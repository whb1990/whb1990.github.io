<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Á∫ø‰∏äÈóÆÈ¢òÊéíÊü•ÊÄªÁªìÔºàÊåÅÁª≠Êõ¥Êñ∞Ôºâ]]></title>
    <url>%2Fposts%2F4a0297a6.html</url>
    <content type="text"><![CDATA[ÂâçË®ÄÂú®Á∫ø‰∏äÔºåÊàë‰ª¨ÂèØËÉΩÁªèÂ∏∏‰ºöÁ¢∞Âà∞Á®ãÂ∫èÂç°Ê≠ªÊàñËÄÖÊâßË°åÂæàÊÖ¢Á≠âÊÉÖÂÜµÔºåËøôÊó∂Êàë‰ª¨Ëø´ÂàáÂ∏åÊúõÁü•ÈÅìÊòØ‰ª£Á†ÅÂì™ÈáåÁöÑÈóÆÈ¢òÔºå‰ª£Á†ÅËøêË°åÂà∞‰∫ÜÂì™ÈáåÔºåÊòØÂì™‰∏ÄÊ≠•ÂæàÊÖ¢ÔºåÊòØÂê¶ËøõÂÖ•‰∫ÜÊ≠ªÂæ™ÁéØÔºåÊòØÂê¶Êúâ‰ª£Á†ÅÂá∫Áé∞‰∫ÜÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÊÉÖÂÜµÔºåÊòØÂê¶ÊúâÊüê‰∫õËøûÊé•Êï∞ÊàñËÄÖÊâìÂºÄÁöÑÊñá‰ª∂Êï∞Â§™Â§öÁ≠âÁ≠âÈóÆÈ¢ò„ÄÇÊ≠§Êó∂Â∞±ÈúÄË¶ÅÈÄöËøáÂàÜÊûêÊ°àÂèëÊó∂ÁöÑÁ∫øÁ®ãÂ†ÜÊ†à‰ø°ÊÅØÔºåÂø´ÈÄüÂÆö‰ΩçÈóÆÈ¢ò„ÄÇ Ë¶ÅÊÉ≥Âø´ÈÄüÂàÜÊûê„ÄÅÂÆö‰ΩçÈóÆÈ¢òÔºåÈÄöÂ∏∏Êàë‰ª¨ÈúÄË¶ÅÂÄüÂä©‰∏ÄÁÇπÂÖ∂‰ªñÂ∑•ÂÖ∑ÔºåÊØîÂ¶ÇÔºöjstat„ÄÅjstack„ÄÅjmap„ÄÅjhat„ÄÅjconsole„ÄÅjprofileÁ≠âÁ≠â„ÄÇ ËÄåÂÆö‰ΩçÈóÆÈ¢òÁöÑÊ≠•È™§Êó†Â§ñ‰πéÂá†Ê≠•Ôºö ps -ef | gre java Ëé∑ÂèñjavaËøõÁ®ãpidtop pid Êü•ÁúãcpuËÄóCPUËøõÁ®ãtop -Hp pid ÊàñËÄÖ ps -mp pid -o THREAD,tid,time Êü•ÁúãËØ•ËøõÁ®ãÊâÄÊúâÁ∫øÁ®ãÁöÑËøêË°åÊÉÖÂÜµÔºåÊâæÂà∞Âç†Áî® CPU ËøáÈ´òÁöÑÁ∫øÁ®ã pidprintf &quot;%x\n&quot; pid ÊâìÂç∞Âá∫ pid ÁöÑ 16 ËøõÂà∂ÂÄºÔºàjstack ÂëΩ‰ª§ÁªìÊûú‰∏≠ÁöÑÁ∫øÁ®ã ID ‰∏∫ nidÔºå‰∏îÁî® 16 ËøõÂà∂Ë°®Á§∫Ôºâjstack -l pid | grep nid ÂëΩ‰ª§Êü•ÁúãÁ∫øÁ®ãÂø´ÁÖßÔºåÊ†πÊçÆ‰∏ä‰∏ÄÊ≠•ÂæóÂà∞ÁöÑ 16 ËøõÂà∂ÂÄºÊâæÂà∞ÂÖ∑‰ΩìÁöÑÁ∫øÁ®ãÔºåÂ∞±ËÉΩÁü•ÈÅìËøô‰∏™ËøõÁ®ãÂú®ÊâßË°å‰ªÄ‰πà‰ª£Á†Å‰∫Ü ‰∏äÈù¢Âá†Ê≠•ÊòØÂ∏∏Áî®ÂÆö‰ΩçÈóÆÈ¢òÁöÑÊ≠•È™§ÔºåÊúâÁöÑÂÖ¨Âè∏ÔºàÊØîÂ¶ÇÊàë‰ª¨ÂÖ¨Âè∏ÔºâËá™Â∑±ÂÜô‰∫ÜÁõëÊéßËÑöÊú¨ÔºåÂú®Âá∫Áé∞ÈóÆÈ¢òÁöÑÊó∂ÂÄôÔºå‰ºöËá™Âä®dumpÁ∫øÁ®ãÂ†ÜÊ†à„ÄÅÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ„ÄÅcpuË¥üËΩΩÊÉÖÂÜµ„ÄÅÂûÉÂúæÂõûÊî∂ÊÉÖÂÜµÁ≠â„ÄÇ‰∏ãÈù¢Â∞±‰ª•ÊàëÈÅáÂà∞ÁöÑ‰∏Ä‰∏™Á∫ø‰∏äÈóÆÈ¢ò‰∏æ‰æãËÆ≤Ëß£Ôºö ‰∏äÈù¢ÁöÑÊà™ÂõæÂ∞±ÊòØÂΩìÊó∂Âá∫ÈóÆÈ¢òÊó∂ËÑöÊú¨Ëá™Âä®ËæìÂá∫ÁöÑÊó•ÂøóÔºåÂÖ∂‰∏≠30669_*Êó∂‰ª•ÂΩìÊó∂ÁöÑÁ∫øÁ®ãID‰∏∫ÂâçÁºÄÔºå‰∏ãÈù¢Â∞±ÈíàÂØπÂêÑ‰∏™Êó•ÂøóÔºà‰ªé‰∏ãÂà∞‰∏äÔºâÂÜÖÂÆπÂ±ïÂºÄÂ≠¶‰π†„ÄÇ loadavg.logÈ¶ñÂÖàÁúã‰∏Ä‰∏ãloadavg.logÁöÑÂÜÖÂÆπÔºåÂ¶Ç‰∏ãÂõæÔºö loadavgÊòØÁ≥ªÁªüÂπ≥ÂùáË¥üËΩΩÔºåÂç≥Âú®ÁâπÂÆöÊó∂Èó¥Èó¥ÈöîÂÜÖËøêË°åÈòüÂàó‰∏≠ÁöÑÂπ≥ÂùáËøõÁ®ãÊï∞„ÄÇ Ââç‰∏â‰∏™ÊòØ1„ÄÅ5„ÄÅ15ÂàÜÈíüÂÜÖÁöÑÂπ≥ÂùáËøõÁ®ãÊï∞„ÄÇÁ¨¨Âõõ‰∏™ÁöÑÂàÜÂ≠êÊòØÊ≠£Âú®ËøêË°åÁöÑËøõÁ®ãÊï∞ÔºåÂàÜÊØçÊòØËøõÁ®ãÊÄªÊï∞„ÄÇÊúÄÂêé‰∏Ä‰∏™ÊòØÊúÄËøëËøêË°åÁöÑËøõÁ®ãIDÂè∑„ÄÇ ‰∏ÄËà¨Êù•ËØ¥ÊØè‰∏™CPUÁöÑÂΩìÂâçÊ¥ªÂä®ËøõÁ®ãÊï∞‰∏çÂ§ß‰∫é3ÈÇ£‰πàÁ≥ªÁªüÁöÑÊÄßËÉΩÂ∞±ÊòØËâØÂ•ΩÁöÑ„ÄÇÂ¶ÇÊûúÊØè‰∏™CPUÁöÑ‰ªªÂä°Êï∞Â§ß‰∫é5ÔºåÈÇ£‰πàÂ∞±Ë°®ÊòéÊú∫Âô®ÁöÑÊÄßËÉΩÊúâ‰∏•ÈáçÈóÆÈ¢ò„ÄÇ ‰ª•‰∏äÂõæ‰∏∫‰æãÔºåÂÅáËÆæÁ≥ªÁªüÊúâ8‰∏™CPUÔºåÂàôÊØè‰∏™CPUÂú®1ÂàÜÈíüÂÜÖÁöÑËøõÁ®ãÊï∞‰∏∫Ôºö1.16/8=0.145Â¶ÇÊûúÊàë‰ª¨ÊÉ≥Êü•ÁúãÁ≥ªÁªüÂπ≥ÂùáË¥üËΩΩÔºåÂèØÈÄöËøáÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö cat /proc/loadavg uptime tload top.log‰∏ãÈù¢Áúã‰∏ã30669_top.logÂíå30669_top10_thread.logÁöÑÂÜÖÂÆπÔºåÂ¶Ç‰∏ãÂõæÔºö 30669_top.logËµÑÊ∫êÂç†Áî®ÊúÄÈ´òÁöÑËøõÁ®ãÊÉÖÂÜµ„ÄÇ30669_top10_thread.logÊòØËµÑÊ∫êÂç†Áî®Ââç10ÁöÑËøõÁ®ãÊÉÖÂÜµ„ÄÇ ÂÜÖÂÆπËß£ËØª123456789top - 15:48:34 up 60 days, 18:06, 1 user, load average: 1.45, 0.47, 0.20Tasks: 1 total, 0 running, 1 sleeping, 0 stopped, 0 zombie%Cpu(s): 96.7 us, 0.0 sy, 0.0 ni, 3.3 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 stKiB Mem : 4046212 total, 127012 free, 1575164 used, 2344036 buff/cacheKiB Swap: 4194300 total, 4171260 free, 23040 used. 1984224 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND30669 www 20 0 3769288 1.4g 14732 S 193.3 37.0 9:55.30 java180.0 146.7 200.0 Á¨¨‰∏ÄË°åtopÊòØÁ≥ªÁªüËøêË°åÊó∂Èó¥ÂíåÂπ≥ÂùáË¥üËΩΩÔºåÂêåuptimeÂëΩ‰ª§ÁöÑÊâßË°åÁªìÊûú15:48:34 üëâ ÂΩìÂâçÊó∂Èó¥up 60 days, 18:06 üëâ Á≥ªÁªüËøêË°åÊó∂Èó¥1 user üëâ ÂΩìÂâçÁôªÂΩïÁî®Êà∑Êï∞load average: 1.45, 0.47, 0.20 üëâ Á≥ªÁªüË¥üËΩΩÔºå‰∏â‰∏™Êï∞ÂÄºÂàÜÂà´‰∏∫ 1ÂàÜÈíü„ÄÅ5ÂàÜÈíü„ÄÅ15ÂàÜÈíüÂâçÂà∞Áé∞Âú®ÁöÑÂπ≥ÂùáÂÄº„ÄÇÁ¨¨‰∫åË°åTasksÊòØ‰ªªÂä°‰ø°ÊÅØ1 total üëâ ËøõÁ®ãÊÄªÊï∞0 running üëâ Ê≠£Âú®ËøêË°åÁöÑËøõÁ®ãÊï∞1 sleeping üëâ Áù°Áú†ÁöÑËøõÁ®ãÊï∞0 stopped üëâ ÂÅúÊ≠¢ÁöÑËøõÁ®ãÊï∞0 zombie üëâ ÂÉµÂ∞∏ËøõÁ®ãÊï∞Á¨¨‰∏âË°å%Cpu(s)ÊòØCPU‰ø°ÊÅØ 96.7 us üëâ Áî®Êà∑Á©∫Èó¥Âç†Áî®CPUÁôæÂàÜÊØî0.0 sy üëâ ÂÜÖÊ†∏Á©∫Èó¥Âç†Áî®CPUÁôæÂàÜÊØî0.0 ni üëâ Áî®Êà∑ËøõÁ®ãÁ©∫Èó¥ÂÜÖÊîπÂèòËøá‰ºòÂÖàÁ∫ßÁöÑËøõÁ®ãÂç†Áî®CPUÁôæÂàÜÊØî3.3 id üëâ Á©∫Èó≤CPUÁôæÂàÜÊØî0.0 wa üëâ Á≠âÂæÖËæìÂÖ•ËæìÂá∫ÁöÑCPUÊó∂Èó¥ÁôæÂàÜÊØî0.0 hi üëâ Á°¨‰ª∂CPU‰∏≠Êñ≠Âç†Áî®ÁôæÂàÜÊØî0.0 si üëâ ËΩØ‰∏≠Êñ≠Âç†Áî®ÁôæÂàÜÊØî0.0 st üëâ ËôöÊãüÊú∫ÔºàËôöÊãüÂåñÊäÄÊúØÔºâÂç†Áî®ÁôæÂàÜÊØîÁ¨¨ÂõõË°åKiB MemÊòØÁâ©ÁêÜÂÜÖÂ≠ò‰ø°ÊÅØ4046212 total üëâ Áâ©ÁêÜÂÜÖÂ≠òÊÄªÈáè127012 free üëâ Á©∫Èó≤Áâ©ÁêÜÂÜÖÂ≠òÊÄªÈáè1575164 used üëâ Â∑≤‰ΩøÁî®Áâ©ÁêÜÂÜÖÂ≠òÊÄªÈáè2344036 buff/cache üëâ Áî®Êà∑ÂÜÖÊ†∏ÁºìÂ≠òÁöÑÂÜÖÂ≠òÊÄªÈáè Á¨¨‰∫îË°åKiB SwapÊòØ‰∫§Êç¢Âå∫ÂÜÖÂ≠ò‰ø°ÊÅØ4194300 total üëâ ‰∫§Êç¢Âå∫ÊÄªÈáè4171260 free üëâ Á©∫Èó≤‰∫§Êç¢Âå∫ÊÄªÈáè23040 used üëâ Â∑≤‰ΩøÁî®‰∫§Êç¢Âå∫ÊÄªÈáè1984224 avail Mem üëâ ÁºìÂÜ≤ÁöÑ‰∫§Êç¢Âå∫ÊÄªÈáè,ÂÜÖÂ≠ò‰∏≠ÁöÑÂÜÖÂÆπË¢´Êç¢Âá∫Âà∞‰∫§Êç¢Âå∫ÔºåËÄåÂêéÂèàË¢´Êç¢ÂÖ•Âà∞ÂÜÖÂ≠òÔºå‰ΩÜ‰ΩøÁî®ËøáÁöÑ‰∫§Êç¢Âå∫Â∞öÊú™Ë¢´Ë¶ÜÁõñÔºåËØ•Êï∞ÂÄºÂç≥‰∏∫Ëøô‰∫õÂÜÖÂÆπÂ∑≤Â≠òÂú®‰∫éÂÜÖÂ≠ò‰∏≠ÁöÑ‰∫§Êç¢Âå∫ÁöÑÂ§ßÂ∞è,Áõ∏Â∫îÁöÑÂÜÖÂ≠òÂÜçÊ¨°Ë¢´Êç¢Âá∫Êó∂ÂèØ‰∏çÂøÖÂÜçÂØπ‰∫§Êç¢Âå∫ÂÜôÂÖ•„ÄÇÁ¨¨ÂÖ≠Ë°åÊòØÁ©∫Ë°åÁ¨¨‰∏ÉË°å‰ª•ÂêéÁöÑÂÜÖÂÆπÊòØÂêÑËøõÁ®ãÔºà‰ªªÂä°ÔºâÁöÑÁä∂ÊÄÅ‰ø°ÊÅØPID üëâ ËøõÁ®ãIDÔºåËøõÁ®ãÁöÑÂîØ‰∏ÄÊ†áËØÜÁ¨¶USER üëâ ËøõÁ®ãÊâÄÊúâËÄÖÁöÑÂÆûÈôÖÁî®Êà∑ÂêçPR üëâ ËøõÁ®ãÁöÑË∞ÉÂ∫¶‰ºòÂÖàÁ∫ß„ÄÇËøô‰∏™Â≠óÊÆµÁöÑ‰∏Ä‰∫õÂÄºÊòØrtÔºåÊÑèÂë≥ÁùÄËøõÁ®ãÂú®ÂÆûÊó∂ËøêË°å‰∏≠„ÄÇNI üëâ ËøõÁ®ãÁöÑniceÂÄºÔºà‰ºòÂÖàÁ∫ßÔºâ„ÄÇË∂äÂ∞èÁöÑÂÄºÊÑèÂë≥ÁùÄË∂äÈ´òÁöÑ‰ºòÂÖàÁ∫ß„ÄÇË¥üÂÄºË°®Á§∫È´ò‰ºòÂÖàÁ∫ßÔºåÊ≠£ÂÄºË°®Á§∫‰Ωé‰ºòÂÖàÁ∫ß„ÄÇVIRT üëâ ËøõÁ®ã‰ΩøÁî®ÁöÑËôöÊãüÂÜÖÂ≠ò„ÄÇËøõÁ®ã‰ΩøÁî®ÁöÑËôöÊãüÂÜÖÂ≠òÊÄªÈáèÔºåÂçï‰Ωçkb„ÄÇVIRT = SWAP + RESRES üëâ È©ªÁïôÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇÈ©ªÁïôÂÜÖÂ≠òÊòØ‰ªªÂä°‰ΩøÁî®ÁöÑÈùû‰∫§Êç¢Áâ©ÁêÜÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇËøõÁ®ã‰ΩøÁî®ÁöÑ„ÄÅÊú™Ë¢´Êç¢Âá∫ÁöÑÁâ©ÁêÜÂÜÖÂ≠òÂ§ßÂ∞èÔºåÂçï‰Ωçkb„ÄÇRES = CODE + DATASHR üëâ SHR ÊòØËøõÁ®ã‰ΩøÁî®ÁöÑÂÖ±‰∫´ÂÜÖÂ≠òÂ§ßÂ∞èÔºåÂçï‰ΩçkbS üëâ ÊòØËøõÁ®ãÁöÑÁä∂ÊÄÅÔºåÊúâ‰ª•‰∏ãÂá†‰∏™ÂÄºÔºöD üëâ ‰∏çÂèØ‰∏≠Êñ≠ÁöÑÁù°Áú†ÊÄÅ„ÄÇR üëâ ËøêË°åÊÄÅS üëâ Áù°Áú†ÊÄÅT üëâ Ë¢´Ë∑üË∏™ÊàñÂ∑≤ÂÅúÊ≠¢Z üëâ ÂÉµÂ∞∏ÊÄÅ%CPU üëâ Ëá™‰ªé‰∏ä‰∏ÄÊ¨°Êõ¥Êñ∞Êó∂Âà∞Áé∞Âú®‰ªªÂä°ÊâÄ‰ΩøÁî®ÁöÑCPUÊó∂Èó¥ÁôæÂàÜÊØî„ÄÇ%MEM üëâ ËøõÁ®ã‰ΩøÁî®ÁöÑÂèØÁî®Áâ©ÁêÜÂÜÖÂ≠òÁôæÂàÜÊØî„ÄÇTIME+ üëâ ‰ªªÂä°ÂêØÂä®ÂêéÂà∞Áé∞Âú®ÊâÄ‰ΩøÁî®ÁöÑÂÖ®ÈÉ®CPUÊó∂Èó¥ÔºåÁ≤æÁ°ÆÂà∞ÁôæÂàÜ‰πã‰∏ÄÁßí„ÄÇCOMMAND üëâ ËøêË°åËøõÁ®ãÊâÄ‰ΩøÁî®ÁöÑÂëΩ‰ª§„ÄÇËøõÁ®ãÂêçÁß∞ÔºàÂëΩ‰ª§Âêç/ÂëΩ‰ª§Ë°åÔºâÂÖ∂‰ªñÈùûÈáçË¶ÅÂàóPPID üëâ Áà∂ËøõÁ®ãIDRUSER üëâ ÁúüÂÆûÁî®Êà∑ÂêçUID üëâ ËøõÁ®ãÊâÄÊúâËÄÖÁöÑÁî®Êà∑IDGROUP üëâ ËøõÁ®ãÊâÄÊúâËÄÖÁöÑÁªÑÂêçTTY üëâ ÂêØÂä®ËøõÁ®ãÁöÑÁªàÁ´ØÂêç„ÄÇ‰∏çÊòØ‰ªéÁªàÁ´ØÂêØÂä®ÁöÑËøõÁ®ãÂàôÊòæÁ§∫‰∏∫?P üëâ ÊúÄÂêé‰ΩøÁî®ÁöÑCPUÔºå‰ªÖÂú®Â§öCPUÁéØÂ¢É‰∏ãÊúâÊÑè‰πâTIME üëâ ËøõÁ®ã‰ΩøÁî®ÁöÑCPUÊó∂Èó¥ÊÄªËÆ°ÔºåÂçï‰ΩçÁßíSWAP üëâ ËøõÁ®ã‰ΩøÁî®ÁöÑËôöÊãüÂÜÖÂ≠ò‰∏≠ÔºåË¢´Êç¢Âá∫ÁöÑÂ§ßÂ∞èÔºåÂçï‰ΩçkbCODE üëâ ÂèØÊâßË°å‰ª£Á†ÅÂç†Áî®ÁöÑÁâ©ÁêÜÂÜÖÂ≠òÂ§ßÂ∞èÔºåÂçï‰ΩçkbDATA üëâ ÂèØÊâßË°å‰ª£Á†Å‰ª•Â§ñÁöÑÈÉ®ÂàÜÔºàÊï∞ÊçÆÊÆµ+Ê†àÔºâÂç†Áî®ÁöÑÁâ©ÁêÜÂÜÖÂ≠òÂ§ßÂ∞èÔºåÂçï‰ΩçkbnFLT üëâ È°µÈù¢ÈîôËØØÊ¨°Êï∞nDRT üëâ ÊúÄÂêé‰∏ÄÊ¨°ÂÜôÂÖ•Âà∞Áé∞Âú®ÔºåË¢´‰øÆÊîπËøáÁöÑÈ°µÈù¢Êï∞WCHAN üëâ Ëã•ËØ•ËøõÁ®ãÂú®Áù°Áú†ÔºåÂàôÊòæÁ§∫Áù°Áú†‰∏≠ÁöÑÁ≥ªÁªüÂáΩÊï∞ÂêçFlags üëâ ‰ªªÂä°Ê†áÂøó topÂ≠¶‰π† topÂëΩ‰ª§ÊòØÁî®Êù•ÁõëÊéßLinuxÁ≥ªÁªüÁä∂ÂÜµÔºåÊØîÂ¶Çcpu„ÄÅÂÜÖÂ≠òÁöÑ‰ΩøÁî®„ÄÇ ËØ≠Ê≥ï1top [-] [d] [p] [q] [c] [C] [S] [s] [n] ÂèÇÊï∞Ëß£Êûê d üëâ ÊåáÂÆöÊØè‰∏§Ê¨°Â±èÂπï‰ø°ÊÅØÂà∑Êñ∞‰πãÈó¥ÁöÑÊó∂Èó¥Èó¥Èöî„ÄÇÂΩìÁÑ∂Áî®Êà∑ÂèØ‰ª•‰ΩøÁî®s‰∫§‰∫íÂëΩ‰ª§Êù•ÊîπÂèò„ÄÇp üëâ ÈÄöËøáÊåáÂÆöÁõëÊéßËøõÁ®ãIDÊù•‰ªÖ‰ªÖÁõëÊéßÊüê‰∏™ËøõÁ®ãÁöÑÁä∂ÊÄÅ„ÄÇq üëâ ËØ•ÈÄâÈ°πÂ∞Ü‰ΩøtopÊ≤°Êúâ‰ªª‰ΩïÂª∂ËøüÁöÑËøõË°åÂà∑Êñ∞„ÄÇÂ¶ÇÊûúË∞ÉÁî®Á®ãÂ∫èÊúâË∂ÖÁ∫ßÁî®Êà∑ÊùÉÈôêÔºåÈÇ£‰πàtopÂ∞Ü‰ª•Â∞ΩÂèØËÉΩÈ´òÁöÑ‰ºòÂÖàÁ∫ßËøêË°å„ÄÇS üëâ ÊåáÂÆöÁ¥ØËÆ°Ê®°Âºè„ÄÇs üëâ ‰ΩøtopÂëΩ‰ª§Âú®ÂÆâÂÖ®Ê®°Âºè‰∏≠ËøêË°å„ÄÇËøôÂ∞ÜÂéªÈô§‰∫§‰∫íÂëΩ‰ª§ÊâÄÂ∏¶Êù•ÁöÑÊΩúÂú®Âç±Èô©„ÄÇi üëâ ‰Ωøtop‰∏çÊòæÁ§∫‰ªª‰ΩïÈó≤ÁΩÆÊàñËÄÖÂÉµÊ≠ªËøõÁ®ã„ÄÇc üëâ ÊòæÁ§∫Êï¥‰∏™ÂëΩ‰ª§Ë°åËÄå‰∏çÂè™ÊòØÊòæÁ§∫ÂëΩ‰ª§Âêç„ÄÇ Â∏∏Áî®‰∫§‰∫íÂëΩ‰ª§ Ctrl+L üëâ Êì¶Èô§Âπ∂‰∏îÈáçÂÜôÂ±èÂπï„ÄÇhÊàñËÄÖ? üëâ ÊòæÁ§∫Â∏ÆÂä©ÁîªÈù¢ÔºåÁªôÂá∫‰∏Ä‰∫õÁÆÄÁü≠ÁöÑÂëΩ‰ª§ÊÄªÁªìËØ¥Êòé„ÄÇk üëâ ÁªàÊ≠¢‰∏Ä‰∏™ËøõÁ®ã„ÄÇÁ≥ªÁªüÂ∞ÜÊèêÁ§∫Áî®Êà∑ËæìÂÖ•ÈúÄË¶ÅÁªàÊ≠¢ÁöÑËøõÁ®ãPIDÔºå‰ª•ÂèäÈúÄË¶ÅÂèëÈÄÅÁªôËØ•ËøõÁ®ã‰ªÄ‰πàÊ†∑ÁöÑ‰ø°Âè∑„ÄÇ‰∏ÄËà¨ÁöÑÁªàÊ≠¢ËøõÁ®ãÂèØ‰ª•‰ΩøÁî®15‰ø°Âè∑ÔºõÂ¶ÇÊûú‰∏çËÉΩÊ≠£Â∏∏ÁªìÊùüÈÇ£Â∞±‰ΩøÁî®‰ø°Âè∑9Âº∫Âà∂ÁªìÊùüËØ•ËøõÁ®ã„ÄÇÈªòËÆ§ÂÄºÊòØ‰ø°Âè∑15„ÄÇÂú®ÂÆâÂÖ®Ê®°Âºè‰∏≠Ê≠§ÂëΩ‰ª§Ë¢´Â±èËîΩ„ÄÇi üëâ ÂøΩÁï•Èó≤ÁΩÆÂíåÂÉµÊ≠ªËøõÁ®ã„ÄÇËøôÊòØ‰∏Ä‰∏™ÂºÄÂÖ≥ÂºèÂëΩ‰ª§„ÄÇq üëâ ÈÄÄÂá∫Á®ãÂ∫è„ÄÇr üëâ ÈáçÊñ∞ÂÆâÊéí‰∏Ä‰∏™ËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÂà´„ÄÇÁ≥ªÁªüÊèêÁ§∫Áî®Êà∑ËæìÂÖ•ÈúÄË¶ÅÊîπÂèòÁöÑËøõÁ®ãPID‰ª•ÂèäÈúÄË¶ÅËÆæÁΩÆÁöÑËøõÁ®ã‰ºòÂÖàÁ∫ßÂÄº„ÄÇËæìÂÖ•‰∏Ä‰∏™Ê≠£ÂÄºÂ∞Ü‰Ωø‰ºòÂÖàÁ∫ßÈôç‰ΩéÔºåÂèç‰πãÂàôÂèØ‰ª•‰ΩøËØ•ËøõÁ®ãÊã•ÊúâÊõ¥È´òÁöÑ‰ºòÂÖàÊùÉ„ÄÇÈªòËÆ§ÂÄºÊòØ10„ÄÇs üëâ ÊîπÂèò‰∏§Ê¨°Âà∑Êñ∞‰πãÈó¥ÁöÑÂª∂ËøüÊó∂Èó¥„ÄÇÁ≥ªÁªüÂ∞ÜÊèêÁ§∫Áî®Êà∑ËæìÂÖ•Êñ∞ÁöÑÊó∂Èó¥ÔºåÂçï‰Ωç‰∏∫s„ÄÇÂ¶ÇÊûúÊúâÂ∞èÊï∞ÔºåÂ∞±Êç¢ÁÆóÊàêm s„ÄÇËæìÂÖ•0ÂÄºÂàôÁ≥ªÁªüÂ∞Ü‰∏çÊñ≠Âà∑Êñ∞ÔºåÈªòËÆ§ÂÄºÊòØ5 s„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÂ¶ÇÊûúËÆæÁΩÆÂ§™Â∞èÁöÑÊó∂Èó¥ÔºåÂæàÂèØËÉΩ‰ºöÂºïËµ∑‰∏çÊñ≠Âà∑Êñ∞Ôºå‰ªéËÄåÊ†πÊú¨Êù•‰∏çÂèäÁúãÊ∏ÖÊòæÁ§∫ÁöÑÊÉÖÂÜµÔºåËÄå‰∏îÁ≥ªÁªüË¥üËΩΩ‰πü‰ºöÂ§ßÂ§ßÂ¢ûÂä†„ÄÇfÊàñËÄÖF üëâ ‰ªéÂΩìÂâçÊòæÁ§∫‰∏≠Ê∑ªÂä†ÊàñËÄÖÂà†Èô§È°πÁõÆ„ÄÇoÊàñËÄÖO üëâ ÊîπÂèòÊòæÁ§∫È°πÁõÆÁöÑÈ°∫Â∫è„ÄÇl üëâ ÂàáÊç¢ÊòæÁ§∫Âπ≥ÂùáË¥üËΩΩÂíåÂêØÂä®Êó∂Èó¥‰ø°ÊÅØ„ÄÇm üëâ ÂàáÊç¢ÊòæÁ§∫ÂÜÖÂ≠ò‰ø°ÊÅØ„ÄÇt üëâ ÂàáÊç¢ÊòæÁ§∫ËøõÁ®ãÂíåCPUÁä∂ÊÄÅ‰ø°ÊÅØ„ÄÇc üëâ ÂàáÊç¢ÊòæÁ§∫ÂëΩ‰ª§ÂêçÁß∞ÂíåÂÆåÊï¥ÂëΩ‰ª§Ë°å„ÄÇM üëâ Ê†πÊçÆÈ©ªÁïôÂÜÖÂ≠òÂ§ßÂ∞èËøõË°åÊéíÂ∫è„ÄÇP üëâ Ê†πÊçÆCPU‰ΩøÁî®ÁôæÂàÜÊØîÂ§ßÂ∞èËøõË°åÊéíÂ∫è„ÄÇT üëâ Ê†πÊçÆÊó∂Èó¥/Á¥ØËÆ°Êó∂Èó¥ËøõË°åÊéíÂ∫è„ÄÇW üëâ Â∞ÜÂΩìÂâçËÆæÁΩÆÂÜôÂÖ•~/.toprcÊñá‰ª∂‰∏≠„ÄÇËøôÊòØÂÜôtopÈÖçÁΩÆÊñá‰ª∂ÁöÑÊé®ËçêÊñπÊ≥ï„ÄÇShift+M üëâ ÂèØÊåâÂÜÖÂ≠òÂç†Áî®ÊÉÖÂÜµËøõË°åÊéíÂ∫è„ÄÇEnter/space üëâ Âà∑Êñ∞ËßÜÂõæA üëâ Âú®ÂÖ®Â±èÊ®°ÂºèÂíåÂ§öÁ™óÂè£ÈÄâÊã©Ê®°Âºè‰πãÈó¥ÂàáÊç¢d üëâ ËÆæÁΩÆÂà∑Êñ∞ÁöÑÊó∂Èó¥Èó¥ÈöîE üëâ ÂàáÊç¢ÂÜÖÂ≠òÂíå‰∫§Êç¢Âå∫Âçï‰ΩçH üëâ ÂºÄÂêØ/ÂÖ≥Èó≠Á∫øÁ®ãÊ®°ÂºèÔºå‰ª•Á∫øÁ®ãÁöÑÊñπÂºèÂ±ïÁ§∫Z üëâ ÊîπÂèòÈ¢úËâ≤ÈÖçÁΩÆ ‰ΩøÁî®Á§∫‰æã1234567top //ÊØèÈöî5ÁßíÊòæÂºèÊâÄÊúâËøõÁ®ãÁöÑËµÑÊ∫êÂç†Áî®ÊÉÖÂÜµtop -d 2 //ÊØèÈöî2ÁßíÊòæÂºèÊâÄÊúâËøõÁ®ãÁöÑËµÑÊ∫êÂç†Áî®ÊÉÖÂÜµtop -c //ÊØèÈöî5ÁßíÊòæÂºèËøõÁ®ãÁöÑËµÑÊ∫êÂç†Áî®ÊÉÖÂÜµÔºåÂπ∂ÊòæÁ§∫ËøõÁ®ãÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞(ÈªòËÆ§Âè™ÊúâËøõÁ®ãÂêç)top -p 12345 -p 6789 //ÊØèÈöî5ÁßíÊòæÁ§∫pidÊòØ12345ÂíåpidÊòØ6789ÁöÑ‰∏§‰∏™ËøõÁ®ãÁöÑËµÑÊ∫êÂç†Áî®ÊÉÖÂÜµtop -d 2 -c -p 123456 //ÊØèÈöî2ÁßíÊòæÁ§∫pidÊòØ12345ÁöÑËøõÁ®ãÁöÑËµÑÊ∫ê‰ΩøÁî®ÊÉÖÂÜµÔºåÂπ∂ÊòæÂºèËØ•ËøõÁ®ãÂêØÂä®ÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞ps -eLf | grep java | wc -l //ÁõëÊéßjavaÁ∫øÁ®ãÊï∞netstat -n | grep tcp | grep ‰æ¶Âê¨Á´ØÂè£ | wc -l //ÁõëÊéßÁΩëÁªúÂÆ¢Êà∑ËøûÊé•Êï∞ threadcount.logÊé•ÁùÄÁúã‰∏ã30669_threadcount.logÁöÑÂÜÖÂÆπÔºåÂ¶Ç‰∏ãÂõæÔºö ËØ•Êó•ÂøóÁöÑÂÜÖÂÆπÊòØ30669ËøõÁ®ã‰∏ãÁöÑÁ∫øÁ®ãÊï∞Èáè„ÄÇ ÁªüËÆ°‰∏Ä‰∏™ËøõÁ®ã‰∏≠ÁöÑÁ∫øÁ®ãÊï∞‰∏ãÈù¢Â≠¶‰π†‰∏ãÂ¶Ç‰ΩïÁªüËÆ°‰∏Ä‰∏™ËøõÁ®ã‰∏≠ÁöÑÁ∫øÁ®ãÊï∞„ÄÇ proc ‰º™Êñá‰ª∂Á≥ªÁªüÔºåÂÆÉÈ©ªÁïôÂú® /proc ÁõÆÂΩïÔºåËøôÊòØÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ïÊù•Êü•Áúã‰ªª‰ΩïÊ¥ªÂä®ËøõÁ®ãÁöÑÁ∫øÁ®ãÊï∞„ÄÇ /proc ÁõÆÂΩï‰ª•ÂèØËØªÊñáÊú¨Êñá‰ª∂ÂΩ¢ÂºèËæìÂá∫ÔºåÊèê‰æõÁé∞ÊúâËøõÁ®ãÂíåÁ≥ªÁªüÁ°¨‰ª∂Áõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØÂ¶Ç CPU„ÄÅ‰∏≠Êñ≠„ÄÅÂÜÖÂ≠ò„ÄÅÁ£ÅÁõòÁ≠âÁ≠â„ÄÇ 12345cat/proc/&lt;pid&gt;/statusÊàñËÄÖ ls /proc/&lt;pid&gt;/task|wc ‰∏äÈù¢ÁöÑÂëΩ‰ª§Â∞ÜÊòæÁ§∫ËøõÁ®ã &lt;pid&gt; ÁöÑËØ¶ÁªÜ‰ø°ÊÅØÔºåÂåÖÊã¨ËøáÁ®ãÁä∂ÊÄÅÔºà‰æãÂ¶Ç, sleeping, running)ÔºåÁà∂ËøõÁ®ã PIDÔºåUIDÔºåGIDÔºå‰ΩøÁî®ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÁöÑÊï∞ÈáèÔºå‰ª•Âèä‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÊï∞Èáè„ÄÇËæìÂá∫‰πüÂåÖÊã¨ËøõÁ®ãÂàõÂª∫ÁöÑÊÄªÁ∫øÁ®ãÊï∞„ÄÇ Á§∫‰æãÂ¶Ç‰∏ãÔºõ È¶ñÂÖà‰ΩøÁî®topÂëΩ‰ª§Êü•‰∏Ä‰∏ãÂΩìÂâçÂç†Áî®ËµÑÊ∫êÊúÄÂ§öÁöÑËøõÁ®ãÔºåÂ¶Ç‰∏ãÂõæÔºö ‰ªéÂõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÂΩìÂâç13985ÊòØÂç†Áî®ËµÑÊ∫êÊúÄÂ§öÔºåÊé•‰∏ãÊù•Â∞±Áúã‰∏Ä‰∏ã13985ËøõÁ®ã‰∏ãÁöÑÁ∫øÁ®ãÊï∞ÔºåÂ¶Ç‰∏ãÂõæÔºö tcp.logÊé•ÁùÄÂÜçÁúã‰∏ã30669_tcp.logÁöÑÂÜÖÂÆπÔºåÂ¶Ç‰∏ãÂõæÔºö ËØ•Êó•ÂøóÂÜÖÂÆπÊòØÁªüËÆ°Ê°àÂèëÊó∂TCPÁöÑËøûÊé•Êï∞Ôºå‰∏ãÈù¢Â≠¶‰π†‰∏ãÂ¶Ç‰ΩïËé∑ÂèñTCPËøûÊé•Êï∞„ÄÇ ÊñπÊ≥ï‰∏Ä 1ss -ant | awk &apos;NR&gt;1 &#123;a[$1]++&#125; END &#123;for (b in a) print b,a[b]&#125;&apos; ÊñπÊ≥ï‰∫å 1netstat -an | awk &apos;/^tcp/ &#123;a[$NF]++&#125; END &#123;for (b in a) print b,a[b]&#125;&apos; ÊñπÊ≥ï‰∏â 1netstat -nat|awk &apos;&#123;print $6&#125;&apos;|sort|uniq -c|sort -rn ÊñπÊ≥ïÂõõ 1cat /proc/net/snmp ËæìÂá∫ÂÜÖÂÆπ‰∏≠ÁöÑÂêÑÈ°πÂèÇÊï∞ÁöÑÊÑè‰πâÔºåËØ∑ÂèÇËÄÉ http://perthcharles.github.io/2015/11/10/wiki-netstat-proc/ lsof.logÊé•ÁùÄÂÜçÁúã‰∏ã30669_lsof.logÁöÑÂÜÖÂÆπÔºåÂ¶Ç‰∏ãÂõæÔºö Ëøô‰∏™Êñá‰ª∂ÁöÑÂÜÖÂÆπÁ©∂Á´üÊòØ‰ªÄ‰πàÂê´‰πâÔºåÂÖ∂ÂÆûÊàë‰πü‰∏çÁü•ÈÅìüòÇÔºåÊé®ÊµãÂèØËÉΩÊòØÁªüËÆ°ÁöÑÊâìÂºÄÁöÑÊñá‰ª∂Êï∞ÊàñËÄÖÊâìÂºÄÁöÑÊñá‰ª∂Â§ßÂ∞è„ÄÇ lsof ÂëΩ‰ª§ËØ¶Ëß£ÁÆÄ‰ªãlsof(list open files)ÊòØ‰∏Ä‰∏™ÂàóÂá∫ÂΩìÂâçÁ≥ªÁªüÊâìÂºÄÊñá‰ª∂ÁöÑÂ∑•ÂÖ∑„ÄÇ Âú®linuxÁéØÂ¢É‰∏ãÔºå‰ªª‰Ωï‰∫ãÁâ©ÈÉΩ‰ª•Êñá‰ª∂ÁöÑÂΩ¢ÂºèÂ≠òÂú®ÔºåÈÄöËøáÊñá‰ª∂‰∏ç‰ªÖ‰ªÖÂèØ‰ª•ËÆøÈóÆÂ∏∏ËßÑÊï∞ÊçÆÔºåËøòÂèØ‰ª•ËÆøÈóÆÁΩëÁªúËøûÊé•ÂíåÁ°¨‰ª∂„ÄÇÊâÄ‰ª•Â¶Ç‰º†ËæìÊéßÂà∂ÂçèËÆÆ (TCP) ÂíåÁî®Êà∑Êï∞ÊçÆÊä•ÂçèËÆÆ (UDP) Â•óÊé•Â≠óÁ≠âÔºåÁ≥ªÁªüÂú®ÂêéÂè∞ÈÉΩ‰∏∫ËØ•Â∫îÁî®Á®ãÂ∫èÂàÜÈÖç‰∫Ü‰∏Ä‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºåÊó†ËÆ∫Ëøô‰∏™Êñá‰ª∂ÁöÑÊú¨Ë¥®Â¶Ç‰ΩïÔºåËØ•Êñá‰ª∂ÊèèËø∞Á¨¶‰∏∫Â∫îÁî®Á®ãÂ∫è‰∏éÂü∫Á°ÄÊìç‰ΩúÁ≥ªÁªü‰πãÈó¥ÁöÑ‰∫§‰∫íÊèê‰æõ‰∫ÜÈÄöÁî®Êé•Âè£„ÄÇÂõ†‰∏∫Â∫îÁî®Á®ãÂ∫èÊâìÂºÄÊñá‰ª∂ÁöÑÊèèËø∞Á¨¶ÂàóË°®Êèê‰æõ‰∫ÜÂ§ßÈáèÂÖ≥‰∫éËøô‰∏™Â∫îÁî®Á®ãÂ∫èÊú¨Ë∫´ÁöÑ‰ø°ÊÅØÔºåÂõ†Ê≠§ÈÄöËøálsofÂ∑•ÂÖ∑ËÉΩÂ§üÊü•ÁúãËøô‰∏™ÂàóË°®ÂØπÁ≥ªÁªüÁõëÊµã‰ª•ÂèäÊéíÈîôÂ∞ÜÊòØÂæàÊúâÂ∏ÆÂä©ÁöÑ„ÄÇ ËæìÂá∫‰ø°ÊÅØËß£ÊûêÂú®ÁªàÁ´Ø‰∏ãËæìÂÖ•lsofÂç≥ÂèØÊòæÁ§∫Á≥ªÁªüÊâìÂºÄÁöÑÊñá‰ª∂ÔºåÂõ†‰∏∫ lsof ÈúÄË¶ÅËÆøÈóÆÊ†∏ÂøÉÂÜÖÂ≠òÂíåÂêÑÁßçÊñá‰ª∂ÔºåÊâÄ‰ª•ÂøÖÈ°ª‰ª• root Áî®Êà∑ÁöÑË∫´‰ªΩËøêË°åÂÆÉÊâçËÉΩÂ§üÂÖÖÂàÜÂú∞ÂèëÊå•ÂÖ∂ÂäüËÉΩ„ÄÇ ÊØèË°åÊòæÁ§∫‰∏Ä‰∏™ÊâìÂºÄÁöÑÊñá‰ª∂ÔºåËã•‰∏çÊåáÂÆöÊù°‰ª∂ÈªòËÆ§Â∞ÜÊòæÁ§∫ÊâÄÊúâËøõÁ®ãÊâìÂºÄÁöÑÊâÄÊúâÊñá‰ª∂„ÄÇlsofËæìÂá∫ÂêÑÂàó‰ø°ÊÅØÁöÑÊÑè‰πâÂ¶Ç‰∏ãÔºö COMMANDÔºöËøõÁ®ãÁöÑÂêçÁß∞ PIDÔºöËøõÁ®ãÊ†áËØÜÁ¨¶USERÔºöËøõÁ®ãÊâÄÊúâËÄÖFDÔºöÊñá‰ª∂ÊèèËø∞Á¨¶ÔºåÂ∫îÁî®Á®ãÂ∫èÈÄöËøáÊñá‰ª∂ÊèèËø∞Á¨¶ËØÜÂà´ËØ•Êñá‰ª∂„ÄÇÂ¶Çcwd„ÄÅtxtÁ≠â TYPEÔºöÊñá‰ª∂Á±ªÂûãÔºåÂ¶ÇDIR„ÄÅREGÁ≠âDEVICEÔºöÊåáÂÆöÁ£ÅÁõòÁöÑÂêçÁß∞SIZEÔºöÊñá‰ª∂ÁöÑÂ§ßÂ∞èNODEÔºöÁ¥¢ÂºïËäÇÁÇπÔºàÊñá‰ª∂Âú®Á£ÅÁõò‰∏äÁöÑÊ†áËØÜÔºâNAMEÔºöÊâìÂºÄÊñá‰ª∂ÁöÑÁ°ÆÂàáÂêçÁß∞FD Âàó‰∏≠ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶cwd ÂÄºË°®Á§∫Â∫îÁî®Á®ãÂ∫èÁöÑÂΩìÂâçÂ∑•‰ΩúÁõÆÂΩïÔºåËøôÊòØËØ•Â∫îÁî®Á®ãÂ∫èÂêØÂä®ÁöÑÁõÆÂΩïÔºåÈô§ÈùûÂÆÉÊú¨Ë∫´ÂØπËøô‰∏™ÁõÆÂΩïËøõË°åÊõ¥Êîπ,txt Á±ªÂûãÁöÑÊñá‰ª∂ÊòØÁ®ãÂ∫è‰ª£Á†ÅÔºåÂ¶ÇÂ∫îÁî®Á®ãÂ∫è‰∫åËøõÂà∂Êñá‰ª∂Êú¨Ë∫´ÊàñÂÖ±‰∫´Â∫ìÔºåÂ¶Ç‰∏äÂàóË°®‰∏≠ÊòæÁ§∫ÁöÑ /sbin/init Á®ãÂ∫è„ÄÇÂÖ∂Ê¨°Êï∞ÂÄºË°®Á§∫Â∫îÁî®Á®ãÂ∫èÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÔºåËøôÊòØÊâìÂºÄËØ•Êñá‰ª∂Êó∂ËøîÂõûÁöÑ‰∏Ä‰∏™Êï¥Êï∞„ÄÇÂ¶Ç‰∏äÁöÑÊúÄÂêé‰∏ÄË°åÊñá‰ª∂/dev/initctlÔºåÂÖ∂Êñá‰ª∂ÊèèËø∞Á¨¶‰∏∫ 10„ÄÇu Ë°®Á§∫ËØ•Êñá‰ª∂Ë¢´ÊâìÂºÄÂπ∂Â§Ñ‰∫éËØªÂèñ/ÂÜôÂÖ•Ê®°ÂºèÔºåËÄå‰∏çÊòØÂè™ËØª ¬Æ ÊàñÂè™ÂÜô (w) Ê®°Âºè„ÄÇÂêåÊó∂ËøòÊúâÂ§ßÂÜô ÁöÑW Ë°®Á§∫ËØ•Â∫îÁî®Á®ãÂ∫èÂÖ∑ÊúâÂØπÊï¥‰∏™Êñá‰ª∂ÁöÑÂÜôÈîÅ„ÄÇËØ•Êñá‰ª∂ÊèèËø∞Á¨¶Áî®‰∫éÁ°Æ‰øùÊØèÊ¨°Âè™ËÉΩÊâìÂºÄ‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÂÆû‰æã„ÄÇÂàùÂßãÊâìÂºÄÊØè‰∏™Â∫îÁî®Á®ãÂ∫èÊó∂ÔºåÈÉΩÂÖ∑Êúâ‰∏â‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶Ôºå‰ªé 0 Âà∞ 2ÔºåÂàÜÂà´Ë°®Á§∫Ê†áÂáÜËæìÂÖ•„ÄÅËæìÂá∫ÂíåÈîôËØØÊµÅ„ÄÇÊâÄ‰ª•Â§ßÂ§öÊï∞Â∫îÁî®Á®ãÂ∫èÊâÄÊâìÂºÄÁöÑÊñá‰ª∂ÁöÑ FD ÈÉΩÊòØ‰ªé 3 ÂºÄÂßã„ÄÇ‰∏é FD ÂàóÁõ∏ÊØîÔºåType ÂàóÂàôÊØîËæÉÁõ¥ËßÇ„ÄÇÊñá‰ª∂ÂíåÁõÆÂΩïÂàÜÂà´Áß∞‰∏∫ REG Âíå DIR„ÄÇËÄåCHR Âíå BLKÔºåÂàÜÂà´Ë°®Á§∫Â≠óÁ¨¶ÂíåÂùóËÆæÂ§áÔºõÊàñËÄÖ UNIX„ÄÅFIFO Âíå IPv4ÔºåÂàÜÂà´Ë°®Á§∫ UNIX ÂüüÂ•óÊé•Â≠ó„ÄÅÂÖàËøõÂÖàÂá∫ (FIFO) ÈòüÂàóÂíåÁΩëÈôÖÂçèËÆÆ (IP) Â•óÊé•Â≠ó„ÄÇ ËØ≠Ê≥ïÊ†ºÂºè1lsof ÔºªoptionsÔºΩ filename histolive.logÊé•ÁùÄÂÜçÊù•Áúã30669_histolive.logÁöÑÂÜÖÂÆπÔºåÂ¶Ç‰∏ãÂõæÔºö ËØ•Êó•ÂøóËÆ∞ÂΩï‰∫ÜÊ°àÂèëÊó∂heap‰∏≠ÁöÑÊâÄÊúâÂØπË±°ÊÉÖÂÜµÔºåÂåÖÊã¨ÂØπË±°ÁöÑÊï∞Èáè„ÄÅÊâÄÂç†Á©∫Èó¥Â§ßÂ∞è„ÄÅÁ±ªÂêç„ÄÇ Êàë‰ª¨‰πüÂèØ‰ª•ÈÄöËøáÂ¶Ç‰∏ãÂëΩ‰ª§Êü•ÁúãÔºö 1jmap -histo[:live] pid ËæìÂá∫ËØ¥ÊòéÔºö instancesÂàóÔºöË°®Á§∫ÂΩìÂâçÁ±ªÊúâÂ§öÂ∞ë‰∏™ÂÆû‰æã„ÄÇbytesÂàóÔºöËØ¥ÊòéÂΩìÂâçÁ±ªÁöÑÂÆû‰æãÊÄªÂÖ±Âç†Áî®‰∫ÜÂ§öÂ∞ë‰∏™Â≠óËäÇclass nameÂàóÔºöË°®Á§∫ÁöÑÂ∞±ÊòØÂΩìÂâçÁ±ªÁöÑÂêçÁß∞Ôºåclass name Ëß£ËØªÔºöB‰ª£Ë°®byte C‰ª£Ë°®char D‰ª£Ë°®double F‰ª£Ë°®float I‰ª£Ë°®int J‰ª£Ë°®long Z‰ª£Ë°®boolean ÂâçËæπÊúâ[‰ª£Ë°®Êï∞ÁªÑÔºå[I Â∞±Áõ∏ÂΩì‰∫éint[]ÂØπË±°Áî®[L+Á±ªÂêçË°®Á§∫ heap.logÊé•ÁùÄÂÜçÊù•Áúã30669_heap.logÁöÑÂÜÖÂÆπÔºåÂõ†ÂÜÖÂÆπËøáÈïøÔºåÊà™Âèñ‰∏ªË¶ÅÂÜÖÂÆπÔºåÂ¶Ç‰∏ãÂõæÔºö ‰∏äÈù¢ÁöÑÂÜÖÂÆπ‰πüÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÂëΩ‰ª§jmap -heap pid ÊâìÂç∞jvmÂÜÖÂ≠òÊï¥‰Ωì‰ΩøÁî®ÊÉÖÂÜµÔºåÂèØ‰ª•ËßÇÂØüÂà∞New GenerationÔºàEden SpaceÔºåFrom SpaceÔºåTo SpaceÔºâ,tenured generation,Perm GenerationÁöÑÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ„ÄÇ ‰ªéÂõæ‰∏≠ÂÜÖÂÆπÂèØ‰ª•ÁúãÂá∫Êñ∞ÁîüÂå∫ÂíåËÄÅÂπ¥Âå∫ÁöÑÂÜÖÂ≠ò‰ΩøÁî®ÁéáÂá†‰πéËææÂà∞‰∫Ü100%ÔºåÁî±Ê≠§ÂèØ‰ª•Êé®Êñ≠ÈÄ†ÊàêËøôÊ¨°‰∫ãÊïÖÁöÑÂéüÂõ†ÊòØÂàõÂª∫ÁöÑÂØπË±°ËøáÂ§öÔºåÂÜçÁªìÂêà‰∏äÈù¢‰∫ÜËß£ËøáÁöÑ30669_histolive.logÔºåÂ∞±ËÉΩÊâæÂà∞ÊòØÂì™‰∫õÂØπË±°ÂàõÂª∫ËøáÂ§ö„ÄÇÂÜçÁªìÂêàÂêéÈù¢Ë¶ÅËÆ≤ÁöÑÁ∫øÁ®ãÂ†ÜÊ†à‰ø°ÊÅØÂÆö‰ΩçÂà∞ÂÖ∑‰ΩìË∞ÉÁî®ÁöÑ‰ª£Á†ÅÊÆµ„ÄÇ gc.logÊé•ÁùÄÂÜçÊù•Áúã30669_gc.logÁöÑÂÜÖÂÆπÔºåÂ¶Ç‰∏ãÂõæÔºö ‰∏äÂõæÂÜÖÂÆπÊòØÊòæÁ§∫Â†ÜÂÜÖÂ≠òÁöÑÂêÑ‰∏™Âç†ÊØîÔºåÂèØÈÄöËøáÂ¶Ç‰∏ãÂëΩ‰ª§Êü•ÁúãÔºö 1jstat -gcutil &lt;pid&gt; Áé∞Âú®Ëß£Èáä‰∏ãËæìÂá∫ÂÜÖÂÆπÊØè‰∏™È°πÁöÑÂê´‰πâÔºö S0 üëâ Âπ∏Â≠ò1Âå∫ÂΩìÂâç‰ΩøÁî®ÊØî‰æãS1 üëâ Âπ∏Â≠ò2Âå∫ÂΩìÂâç‰ΩøÁî®ÊØî‰æãE üëâ ‰ºäÁî∏Âõ≠Âå∫‰ΩøÁî®ÊØî‰æãO üëâ ËÄÅÂπ¥‰ª£‰ΩøÁî®ÊØî‰æãM üëâ ÂÖÉÊï∞ÊçÆÂå∫‰ΩøÁî®ÊØî‰æãCCS üëâ ÂéãÁº©‰ΩøÁî®ÊØî‰æãYGC üëâ Âπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞FGC üëâ ËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞FGCT üëâ ËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊó∂Èó¥GCT üëâ ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊÄªÊó∂Èó¥ ÂâçÈù¢‰πüËØ¥‰∫ÜÔºå‰∏äÂõæÂÜÖÂÆπÂèØ‰ª•ÈÄöËøájstat -gcutil &lt;pid&gt;ÂëΩ‰ª§Êü•ÁúãÔºå‰∏ãÈù¢‰ª•jdk1.8‰∏∫‰æã‰∫ÜËß£‰∏ãjstatÂëΩ‰ª§Êü•ÁúãjvmÁöÑGCÊÉÖÂÜµ„ÄÇ ÂëΩ‰ª§Ê†ºÂºè1jstat [-ÂëΩ‰ª§ÈÄâÈ°π] [vmid] [Èó¥ÈöîÊó∂Èó¥/ÊØ´Áßí] [Êü•ËØ¢Ê¨°Êï∞] Á±ªÂä†ËΩΩÁªüËÆ° Loaded üëâ Âä†ËΩΩclassÁöÑÊï∞ÈáèBytes üëâ ÊâÄÂç†Áî®Á©∫Èó¥Â§ßÂ∞èUnloaded üëâ Êú™Âä†ËΩΩÊï∞ÈáèBytes üëâ Êú™Âä†ËΩΩÂç†Áî®Á©∫Èó¥Time üëâ Êó∂Èó¥ ÁºñËØëÁªüËÆ° Compiled üëâ ÁºñËØëÊï∞Èáè„ÄÇFailed üëâ Â§±Ë¥•Êï∞ÈáèInvalid üëâ ‰∏çÂèØÁî®Êï∞ÈáèTime üëâ Êó∂Èó¥FailedType üëâ Â§±Ë¥•Á±ªÂûãFailedMethod üëâ Â§±Ë¥•ÁöÑÊñπÊ≥ï ÂûÉÂúæÂõûÊî∂ÁªüËÆ° S0C üëâ Á¨¨‰∏Ä‰∏™Âπ∏Â≠òÂå∫ÁöÑÂ§ßÂ∞èS1C üëâ Á¨¨‰∫å‰∏™Âπ∏Â≠òÂå∫ÁöÑÂ§ßÂ∞èS0U üëâ Á¨¨‰∏Ä‰∏™Âπ∏Â≠òÂå∫ÁöÑ‰ΩøÁî®Â§ßÂ∞èS1U üëâ Á¨¨‰∫å‰∏™Âπ∏Â≠òÂå∫ÁöÑ‰ΩøÁî®Â§ßÂ∞èEC üëâ ‰ºäÁî∏Âõ≠Âå∫ÁöÑÂ§ßÂ∞èEU üëâ ‰ºäÁî∏Âõ≠Âå∫ÁöÑ‰ΩøÁî®Â§ßÂ∞èOC üëâ ËÄÅÂπ¥‰ª£Â§ßÂ∞èOU üëâ ËÄÅÂπ¥‰ª£‰ΩøÁî®Â§ßÂ∞èMC üëâ ÊñπÊ≥ïÂå∫Â§ßÂ∞èMU üëâ ÊñπÊ≥ïÂå∫‰ΩøÁî®Â§ßÂ∞èCCSC üëâ ÂéãÁº©Á±ªÁ©∫Èó¥Â§ßÂ∞èCCSU üëâ ÂéãÁº©Á±ªÁ©∫Èó¥‰ΩøÁî®Â§ßÂ∞èYGC üëâ Âπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞YGCT üëâ Âπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊó∂Èó¥FGC üëâ ËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞FGCT üëâ ËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊó∂Èó¥GCT üëâ ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊÄªÊó∂Èó¥ Â†ÜÂÜÖÂ≠òÁªüËÆ° NGCMN üëâ Êñ∞Áîü‰ª£ÊúÄÂ∞èÂÆπÈáèNGCMX üëâ Êñ∞Áîü‰ª£ÊúÄÂ§ßÂÆπÈáèNGC üëâ ÂΩìÂâçÊñ∞Áîü‰ª£ÂÆπÈáèS0C üëâ Á¨¨‰∏Ä‰∏™Âπ∏Â≠òÂå∫Â§ßÂ∞èS1C üëâ Á¨¨‰∫å‰∏™Âπ∏Â≠òÂå∫ÁöÑÂ§ßÂ∞èEC üëâ ‰ºäÁî∏Âõ≠Âå∫ÁöÑÂ§ßÂ∞èOGCMN üëâ ËÄÅÂπ¥‰ª£ÊúÄÂ∞èÂÆπÈáèOGCMX üëâ ËÄÅÂπ¥‰ª£ÊúÄÂ§ßÂÆπÈáèOGC üëâ ÂΩìÂâçËÄÅÂπ¥‰ª£Â§ßÂ∞èOC üëâ ÂΩìÂâçËÄÅÂπ¥‰ª£Â§ßÂ∞èMCMN üëâ ÊúÄÂ∞èÂÖÉÊï∞ÊçÆÂÆπÈáèMCMX üëâ ÊúÄÂ§ßÂÖÉÊï∞ÊçÆÂÆπÈáèMC üëâ ÂΩìÂâçÂÖÉÊï∞ÊçÆÁ©∫Èó¥Â§ßÂ∞èCCSMN üëâ ÊúÄÂ∞èÂéãÁº©Á±ªÁ©∫Èó¥Â§ßÂ∞èCCSMX üëâ ÊúÄÂ§ßÂéãÁº©Á±ªÁ©∫Èó¥Â§ßÂ∞èCCSC üëâ ÂΩìÂâçÂéãÁº©Á±ªÁ©∫Èó¥Â§ßÂ∞èYGC üëâ Âπ¥ËΩª‰ª£gcÊ¨°Êï∞FGC üëâ ËÄÅÂπ¥‰ª£GCÊ¨°Êï∞ Êñ∞Áîü‰ª£ÂûÉÂúæÂõûÊî∂ÁªüËÆ° S0C üëâ Á¨¨‰∏Ä‰∏™Âπ∏Â≠òÂå∫Â§ßÂ∞èS1C üëâ Á¨¨‰∫å‰∏™Âπ∏Â≠òÂå∫ÁöÑÂ§ßÂ∞èS0U üëâ Á¨¨‰∏Ä‰∏™Âπ∏Â≠òÂå∫ÁöÑ‰ΩøÁî®Â§ßÂ∞èS1U üëâ Á¨¨‰∫å‰∏™Âπ∏Â≠òÂå∫ÁöÑ‰ΩøÁî®Â§ßÂ∞èTT üëâ ÂØπË±°Âú®Êñ∞Áîü‰ª£Â≠òÊ¥ªÁöÑÊ¨°Êï∞MTT üëâ ÂØπË±°Âú®Êñ∞Áîü‰ª£Â≠òÊ¥ªÁöÑÊúÄÂ§ßÊ¨°Êï∞DSS üëâ ÊúüÊúõÁöÑÂπ∏Â≠òÂå∫Â§ßÂ∞èEC üëâ ‰ºäÁî∏Âõ≠Âå∫ÁöÑÂ§ßÂ∞èEU üëâ ‰ºäÁî∏Âõ≠Âå∫ÁöÑ‰ΩøÁî®Â§ßÂ∞èYGC üëâ Âπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞YGCT üëâ Âπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊó∂Èó¥ Êñ∞Áîü‰ª£ÂÜÖÂ≠òÁªüËÆ° NGCMN üëâ Êñ∞Áîü‰ª£ÊúÄÂ∞èÂÆπÈáèNGCMX üëâ Êñ∞Áîü‰ª£ÊúÄÂ§ßÂÆπÈáèNGC üëâ ÂΩìÂâçÊñ∞Áîü‰ª£ÂÆπÈáèS0CMX üëâ ÊúÄÂ§ßÂπ∏Â≠ò1Âå∫Â§ßÂ∞èS0C üëâ ÂΩìÂâçÂπ∏Â≠ò1Âå∫Â§ßÂ∞èS1CMX üëâ ÊúÄÂ§ßÂπ∏Â≠ò2Âå∫Â§ßÂ∞èS1C üëâ ÂΩìÂâçÂπ∏Â≠ò2Âå∫Â§ßÂ∞èECMX üëâ ÊúÄÂ§ß‰ºäÁî∏Âõ≠Âå∫Â§ßÂ∞èEC üëâ ÂΩìÂâç‰ºäÁî∏Âõ≠Âå∫Â§ßÂ∞èYGC üëâ Âπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞FGC üëâ ËÄÅÂπ¥‰ª£ÂõûÊî∂Ê¨°Êï∞ ËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂ÁªüËÆ° MC üëâ ÊñπÊ≥ïÂå∫Â§ßÂ∞èMU üëâ ÊñπÊ≥ïÂå∫‰ΩøÁî®Â§ßÂ∞èCCSC üëâ ÂéãÁº©Á±ªÁ©∫Èó¥Â§ßÂ∞èCCSU üëâ ÂéãÁº©Á±ªÁ©∫Èó¥‰ΩøÁî®Â§ßÂ∞èOC üëâ ËÄÅÂπ¥‰ª£Â§ßÂ∞èOU üëâ ËÄÅÂπ¥‰ª£‰ΩøÁî®Â§ßÂ∞èYGC üëâ Âπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞FGC üëâ ËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞FGCT üëâ ËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊó∂Èó¥GCT üëâ ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊÄªÊó∂Èó¥ ËÄÅÂπ¥‰ª£ÂÜÖÂ≠òÁªüËÆ° OGCMN üëâ ËÄÅÂπ¥‰ª£ÊúÄÂ∞èÂÆπÈáèOGCMX üëâ ËÄÅÂπ¥‰ª£ÊúÄÂ§ßÂÆπÈáèOGC üëâ ÂΩìÂâçËÄÅÂπ¥‰ª£Â§ßÂ∞èOC üëâ ËÄÅÂπ¥‰ª£Â§ßÂ∞èYGC üëâ Âπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞FGC üëâ ËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞FGCT üëâ ËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊó∂Èó¥GCT üëâ ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊÄªÊó∂Èó¥ Â†ÜÂÜÖÂ≠òÂç†ÊØîÂèÇËÄÉ30669_gc.logÂÜÖÂÆπÂèäËß£Êûê„ÄÇ jvmÁºñËØëÊñπÊ≥ïÁªüËÆ° Compiled üëâ ÊúÄËøëÁºñËØëÊñπÊ≥ïÁöÑÊï∞ÈáèSize üëâ ÊúÄËøëÁºñËØëÊñπÊ≥ïÁöÑÂ≠óËäÇÁ†ÅÊï∞ÈáèType üëâ ÊúÄËøëÁºñËØëÊñπÊ≥ïÁöÑÁºñËØëÁ±ªÂûã„ÄÇMethod üëâ ÊñπÊ≥ïÂêçÊ†áËØÜ„ÄÇ]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ZookeeperÁü•ËØÜÁÇπ]]></title>
    <url>%2Fposts%2Ff9f2d4de.html</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªã ZooKeeperÊòØ‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑÂàÜÂ∏ÉÂºèÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÂàÜÂ∏ÉÂºèÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•Âü∫‰∫éÂÆÉÂÆûÁé∞ËØ∏Â¶Ç Êï∞ÊçÆÂèëÂ∏É/ËÆ¢ÈòÖ„ÄÅË¥üËΩΩÂùáË°°„ÄÅÂëΩÂêçÊúçÂä°„ÄÅÂàÜÂ∏ÉÂºèÂçèË∞É/ÈÄöÁü•„ÄÅÈõÜÁæ§ÁÆ°ÁêÜ„ÄÅMasterÈÄâ‰∏æ„ÄÅÂàÜÂ∏ÉÂºèÈîÅÂíåÂàÜÂ∏ÉÂºèÈòüÂàóÁ≠âÂäüËÉΩ„ÄÇZooKeeperÂèØ‰ª•‰øùËØÅÂ¶Ç‰∏ãÂàÜÂ∏ÉÂºè‰∏ÄËá¥ÊÄßÁâπÊÄßÔºö È°∫Â∫è‰∏ÄËá¥ÊÄßÔºö‰ªéÂêå‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÂèëËµ∑ÁöÑ‰∫ãÂä°ËØ∑Ê±ÇÔºåÊúÄÁªàÂ∞Ü‰ºö‰∏•Ê†ºÊåâÁÖßÂÖ∂ÂèëËµ∑È°∫Â∫èË¢´Â∫îÁî®Âà∞ZooKeeper‰∏≠„ÄÇ ÂéüÂ≠êÊÄßÔºöÊâÄÊúâ‰∫ãÂä°ËØ∑Ê±ÇÁöÑÁªìÊûúÂú®ÈõÜÁæ§‰∏≠ÊâÄÊúâÊú∫Âô®‰∏äÁöÑÂ∫îÁî®ÊÉÖÂÜµÊòØ‰∏ÄËá¥ÁöÑÔºå‰πüÂ∞±ÊòØËØ¥Ë¶Å‰πàÊï¥‰∏™ÈõÜÁæ§ÈÉΩÊàêÂäüÂ∫îÁî®‰∫ÜÊüê‰∏Ä‰∏™‰∫ãÂä°ÔºåË¶Å‰πàÈÉΩÊ≤°ÊúâÂ∫îÁî®Ôºå‰∏ÄÂÆö‰∏ç‰ºöÂá∫Áé∞ÈõÜÁæ§‰∏≠ÈÉ®ÂàÜÊú∫Âô®Â∫îÁî®‰∫ÜËØ•‰∫ãÂä°ÔºåËÄåÂè¶Â§ñ‰∏ÄÈÉ®ÂàÜÊ≤°ÊúâÂ∫îÁî®ÁöÑÊÉÖÂÜµ„ÄÇ Âçï‰∏ÄËßÜÂõæÔºöÊó†ËÆ∫ÂÆ¢Êà∑Á´ØËøûÊé•ÁöÑÊòØÂì™‰∏™ZooKeeperÊúçÂä°Âô®ÔºåÂÖ∂ÁúãÂà∞ÁöÑÊúçÂä°Á´ØÊï∞ÊçÆÊ®°ÂûãÈÉΩÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ ÂèØÈù†ÊÄßÔºö‰∏ÄÊó¶ÊúçÂä°Á´ØÊàêÂäüÂú∞Â∫îÁî®‰∫Ü‰∏Ä‰∏™‰∫ãÂä°ÔºåÂπ∂ÂÆåÊàêÂØπÂÆ¢Êà∑Á´ØÁöÑÂìçÂ∫îÔºåÈÇ£‰πàËØ•‰∫ãÂä°ÊâÄÂºïËµ∑ÁöÑÊúçÂä°Á´ØÁä∂ÊÄÅÂèòÊõ¥Â∞Ü‰ºöË¢´‰∏ÄÁõ¥‰øùÁïô‰∏ãÊù•ÔºåÈô§ÈùûÊúâÂè¶‰∏Ä‰∏™‰∫ãÂä°ÂèàÂØπÂÖ∂ËøõË°å‰∫ÜÂèòÊõ¥„ÄÇ ÂÆûÊó∂ÊÄßÔºöÈÄöÂ∏∏‰∫∫‰ª¨ÁúãÂà∞ÂÆûÊó∂ÊÄßÁöÑÁ¨¨‰∏ÄÂèçÂ∫îÊòØÔºå‰∏ÄÊó¶‰∏Ä‰∏™‰∫ãÂä°Ë¢´ÊàêÂäüÂ∫îÁî®ÔºåÈÇ£‰πàÂÆ¢Êà∑Á´ØËÉΩÂ§üÁ´ãÂç≥‰ªéÊúçÂä°Á´Ø‰∏äËØªÂèñÂà∞Ëøô‰∏™‰∫ãÂä°ÂèòÊõ¥ÂêéÁöÑÊúÄÊñ∞Êï∞ÊçÆÁä∂ÊÄÅ„ÄÇËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåZooKeeper‰ªÖ‰ªÖ‰øùËØÅÂú®‰∏ÄÂÆöÁöÑÊó∂Èó¥ÊÆµÂÜÖÔºåÂÆ¢Êà∑Á´ØÊúÄÁªà‰∏ÄÂÆöËÉΩÂ§ü‰ªéÊúçÂä°Á´Ø‰∏äËØªÂèñÂà∞ÊúÄÊñ∞ÁöÑÊï∞ÊçÆÁä∂ÊÄÅ„ÄÇ ZookeeperËßíËâ≤ Âú®ZooKeeper‰∏≠ÔºåÊúâ‰∏âÁßçËßíËâ≤Ôºö Leader Follower Observer ‰∏Ä‰∏™ZooKeeperÈõÜÁæ§Âêå‰∏ÄÊó∂ÂàªÂè™‰ºöÊúâ‰∏Ä‰∏™LeaderÔºåÂÖ∂‰ªñÈÉΩÊòØFollowerÊàñObserver„ÄÇ ZooKeeperÈÖçÁΩÆÂæàÁÆÄÂçïÔºåÊØè‰∏™ËäÇÁÇπÁöÑÈÖçÁΩÆÊñá‰ª∂(zoo.cfg)ÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂè™ÊúâmyidÊñá‰ª∂‰∏ç‰∏ÄÊ†∑„ÄÇmyidÁöÑÂÄºÂøÖÈ°ªÊòØzoo.cfg‰∏≠server.{Êï∞ÂÄº}ÁöÑ{Êï∞ÂÄº}ÈÉ®ÂàÜ„ÄÇ zoo.cfgÊñá‰ª∂ÂÜÖÂÆπÁ§∫‰æãÔºö 12345678910111213141516171819202122maxClientCnxns=0# The number of milliseconds of each ticktickTime=2000# The number of ticks that the initial# synchronization phase can takeinitLimit=10# The number of ticks that can pass between# sending a request and getting an acknowledgementsyncLimit=5# the directory where the snapshot is stored.dataDir=/var/lib/zookeeper/data# the port at which the clients will connectclientPort=2181# the directory where the transaction logs are stored.dataLogDir=/var/lib/zookeeper/logsserver.1=192.168.20.101:2888:3888server.2=192.168.20.102:2888:3888server.3=192.168.20.103:2888:3888server.4=192.168.20.104:2888:3888server.5=192.168.20.105:2888:3888minSessionTimeout=4000maxSessionTimeout=100000 Âú®Ë£ÖÊúâZooKeeperÁöÑÊú∫Âô®ÁöÑÁªàÁ´ØÊâßË°å zookeeper-server status ÂèØ‰ª•ÁúãÂΩìÂâçËäÇÁÇπÁöÑZooKeeperÊòØ‰ªÄ‰πàËßíËâ≤ÔºàLeader or FollowerÔºâ„ÄÇ 12345678[root@node-20-103 ~]# zookeeper-server statusJMX enabled by defaultUsing config: /etc/zookeeper/conf/zoo.cfgMode: follower[root@node-20-104 ~]# zookeeper-server statusJMX enabled by defaultUsing config: /etc/zookeeper/conf/zoo.cfgMode: leader Â¶Ç‰∏äÔºånode-20-104ÊòØLeaderÔºånode-20-103ÊòØfollower„ÄÇ ZooKeeperÈªòËÆ§Âè™ÊúâLeaderÂíåFollower‰∏§ÁßçËßíËâ≤ÔºåÊ≤°ÊúâObserverËßíËâ≤„ÄÇ ‰∏∫‰∫Ü‰ΩøÁî®ObserverÊ®°ÂºèÔºåÂú®‰ªª‰ΩïÊÉ≥ÂèòÊàêObserverÁöÑËäÇÁÇπÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Âä†ÂÖ•ÔºöpeerType=observer Âπ∂Âú®ÊâÄÊúâserverÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÈÖçÁΩÆÊàêobserverÊ®°ÂºèÁöÑserverÁöÑÈÇ£Ë°åÈÖçÁΩÆËøΩÂä†:observerÔºå‰æãÂ¶ÇÔºö 1server.1:localhost:2888:3888:observer ZooKeeperÈõÜÁæ§ÁöÑÊâÄÊúâÊú∫Âô®ÈÄöËøá‰∏Ä‰∏™LeaderÈÄâ‰∏æËøáÁ®ãÊù•ÈÄâÂÆö‰∏ÄÂè∞Ë¢´Áß∞‰∏∫„ÄéLeader„ÄèÁöÑÊú∫Âô®ÔºåLeaderÊúçÂä°Âô®‰∏∫ÂÆ¢Êà∑Á´ØÊèê‰æõËØªÂíåÂÜôÊúçÂä°„ÄÇ FollowerÂíåObserverÈÉΩËÉΩÊèê‰æõËØªÊúçÂä°Ôºå‰∏çËÉΩÊèê‰æõÂÜôÊúçÂä°„ÄÇ‰∏§ËÄÖÂîØ‰∏ÄÁöÑÂå∫Âà´Âú®‰∫éÔºåObserverÊú∫Âô®‰∏çÂèÇ‰∏éLeaderÈÄâ‰∏æËøáÁ®ãÔºå‰πü‰∏çÂèÇ‰∏éÂÜôÊìç‰ΩúÁöÑ„ÄéËøáÂçäÂÜôÊàêÂäü„ÄèÁ≠ñÁï•ÔºåÂõ†Ê≠§ObserverÂèØ‰ª•Âú®‰∏çÂΩ±ÂìçÂÜôÊÄßËÉΩÁöÑÊÉÖÂÜµ‰∏ãÊèêÂçáÈõÜÁæ§ÁöÑËØªÊÄßËÉΩ„ÄÇ ‰ºöËØùSession Âú®ZooKeeper‰∏≠Ôºå‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•ÊòØÊåáÂÆ¢Êà∑Á´ØÂíåZooKeeperÊúçÂä°Âô®‰πãÈó¥ÁöÑTCPÈïøËøûÊé•„ÄÇZooKeeperÂØπÂ§ñÁöÑÊúçÂä°Á´ØÂè£ÈªòËÆ§ÊòØ2181ÔºåÂÆ¢Êà∑Á´ØÂêØÂä®Êó∂ÔºåÈ¶ñÂÖà‰ºö‰∏éÊúçÂä°Âô®Âª∫Á´ã‰∏Ä‰∏™TCPËøûÊé•Ôºå‰ªéÁ¨¨‰∏ÄÊ¨°ËøûÊé•Âª∫Á´ãÂºÄÂßãÔºåÂÆ¢Êà∑Á´Ø‰ºöËØùÁöÑÁîüÂëΩÂë®Êúü‰πüÂºÄÂßã‰∫ÜÔºåÈÄöËøáËøô‰∏™ËøûÊé•ÔºåÂÆ¢Êà∑Á´ØËÉΩÂ§üÈÄöËøáÂøÉË∑≥Ê£ÄÊµãÂíåÊúçÂä°Âô®‰øùÊåÅÊúâÊïàÁöÑ‰ºöËØùÔºå‰πüËÉΩÂ§üÂêëZooKeeperÊúçÂä°Âô®ÂèëÈÄÅËØ∑Ê±ÇÂπ∂Êé•ÂèóÂìçÂ∫îÔºåÂêåÊó∂ËøòËÉΩÈÄöËøáËØ•ËøûÊé•Êé•Êî∂Êù•Ëá™ÊúçÂä°Âô®ÁöÑWatch‰∫ã‰ª∂ÈÄöÁü•„ÄÇSessionÁöÑSessionTimeoutÂÄºÁî®Êù•ËÆæÁΩÆ‰∏Ä‰∏™ÂÆ¢Êà∑Á´Ø‰ºöËØùÁöÑË∂ÖÊó∂Êó∂Èó¥„ÄÇÂΩìÁî±‰∫éÊúçÂä°Âô®ÂéãÂäõÂ§™Â§ß„ÄÅÁΩëÁªúÊïÖÈöúÊàñÊòØÂÆ¢Êà∑Á´Ø‰∏ªÂä®Êñ≠ÂºÄËøûÊé•Á≠âÂêÑÁßçÂéüÂõ†ÂØºËá¥ÂÆ¢Êà∑Á´ØËøûÊé•Êñ≠ÂºÄÊó∂ÔºåÂè™Ë¶ÅÂú®SessionTimeoutËßÑÂÆöÁöÑÊó∂Èó¥ÂÜÖËÉΩÂ§üÈáçÊñ∞ËøûÊé•‰∏äÈõÜÁæ§‰∏≠‰ªªÊÑè‰∏ÄÂè∞ÊúçÂä°Âô®ÔºåÈÇ£‰πà‰πãÂâçÂàõÂª∫ÁöÑ‰ºöËØù‰ªçÁÑ∂ÊúâÊïà„ÄÇ]]></content>
      <categories>
        <category>Zookeeper</category>
      </categories>
      <tags>
        <tag>Zookeeper</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÈóÆÈ¢òÊéíÊü•SQL]]></title>
    <url>%2Fposts%2F81d4f14b.html</url>
    <content type="text"><![CDATA[Êü•ÁúãÂΩìÂâçÂ∫îÁî®ËøûÊé•ÔºåËøûÊé•Êï∞Á™ÅÂ¢ûÊéíÊü• 1select user,SUBSTRING_INDEX(host,':',1) as ip , count(*) as count,db from information_schema.processlist where host not in ('localhost') and user not in ('replicater') group by ip order by count; Êü•ÁúãË°®ÊâÄÂ±ûÂèäÂ§ßÊ¶ÇË°åÊï∞Ôºå‰∏ÄËà¨Âä†Â≠óÊÆµÁ¥¢ÂºïÊó∂ÂÅöÂèÇËÄÉ 1select TABLE_SCHEMA,TABLE_NAME,TABLE_ROWS from information_schema.tables where TABLE_NAME='Ë°®Âêç'; Êü•ÁúãË°®Á¢éÁâáÔºåÊòØÂê¶ÈúÄË¶ÅÊï¥ÁêÜË°®ÈáäÊîæÁâ©ÁêÜÁ©∫Èó¥ 1select table_name,table_rows,concat(round(DATA_LENGTH/1024/1024, 2), 'MB') as size,DATA_FREE/1024/1024 AS data_free_MB from information_schema.TABLES where table_schema='Â∫ìÂêç' order by DATA_LENGTH desc; ÂΩìÂâçÊúâÊ≤°ÊúâÈîÅ 1select * from information_schema.innodb_locks; ÂΩìÂâçÈîÅÂ†µÂ°ûÊÉÖÂÜµ 1select * from information_schema.innodb_lock_waits; ÂΩìÂâçÈîÅÁ≠âÂæÖËØ¶ÁªÜ‰ø°ÊÅØ 1select it.trx_mysql_thread_id, il.lock_id, il.lock_table, il.lock_mode, il.lock_type, it.trx_state, pl.USER||'@'||pl.HOST as user_host, pl.db, pl.command, pl.info, it.trx_started, it.trx_wait_started, now()-trx_wait_started as wait_seconds, il.lock_index, it.trx_weight, it.trx_rows_locked, it.trx_rows_modified from information_schema.INNODB_TRX it,information_schema.innodb_locks il,information_schema.processlist pl where it.trx_id = il.lock_trx_id and it.trx_mysql_thread_id = pl.id\G ÊúÄËøë‰∏ÄÊ¨°Ê≠ªÈîÅ„ÄÅÊú™Êèê‰∫§‰∫ãÁâ©„ÄÅCHECKPIONT„ÄÅBUFFER POOLÁ≠â 1show engine innodb status\G ËøáÊª§Êó†Áî®Á∫øÁ®ã‰ø°ÊÅØÂèØÁî®pager 1pager grep -v Sleep;show processlist; Êü•ÁúãÂΩìÂâçËøêË°åÁöÑËØ¶ÁªÜSQL 1SELECT * FROM INFORMATION_SCHEMA.PROCESSLIST WHERE info is not null\G Êü•ÁúãÊüêÊù°sqlÂêÑÈò∂ÊÆµÊâßË°åÊó∂Èó¥ÔºåÂèØÂºÄÂêØprofilingÂäüËÉΩ 1set global profiling=on; Êü•ÁúãÁî®Êà∑‰ø°ÊÅØ 1select user,host,authentication_string from mysql.user group by user; Êü•ÁúãÂì™‰∫õsqlÊâßË°åÊúÄÂ§öÊ¨° 1SELECT SCHEMA_NAME,DIGEST_TEXT,COUNT_STAR,SUM_ROWS_SENT,SUM_ROWS_EXAMINED,FIRST_SEEN,LAST_SEEN FROM performance_schema.events_statements_summary_by_digest where SCHEMA_NAME is not null and SCHEMA_NAME !='information_schema' ORDER BY COUNT_STAR desc LIMIT 1; Âì™‰∏™SQLÊâ´ÊèèÁöÑË°åÊï∞ÊúÄÂ§ö(IOÊ∂àËÄó) 1SELECT SCHEMA_NAME,DIGEST_TEXT,COUNT_STAR,AVG_TIMER_WAIT,SUM_ROWS_SENT,SUM_ROWS_EXAMINED,FIRST_SEEN,LAST_SEEN FROM performance_schema.events_statements_summary_by_digest where SCHEMA_NAME is not null and SCHEMA_NAME !='information_schema' ORDER BY SUM_ROWS_EXAMINED desc LIMIT 1\G Âì™‰∏™SQL‰ΩøÁî®ÁöÑ‰∏¥Êó∂Ë°®ÊúÄÂ§ö 1SELECT SCHEMA_NAME,DIGEST_TEXT,SUM_CREATED_TMP_DISK_TABLES,SUM_CREATED_TMP_TABLES,FIRST_SEEN,LAST_SEEN FROM performance_schema.events_statements_summary_by_digest where SCHEMA_NAME is not null and SCHEMA_NAME !='information_schema' ORDER BY SUM_CREATED_TMP_DISK_TABLES desc LIMIT 1\G Âì™‰∏™SQLËøîÂõûÁöÑÁªìÊûúÈõÜÊúÄÂ§ö(netÊ∂àËÄó) 1SELECT SCHEMA_NAME,DIGEST_TEXT,COUNT_STAR,SUM_ROWS_SENT,SUM_ROWS_SENT,FIRST_SEEN,LAST_SEEN FROM performance_schema.events_statements_summary_by_digest where SCHEMA_NAME is not null and SCHEMA_NAME !='information_schema' ORDER BY SUM_ROWS_SENT desc LIMIT 1\G Âì™‰∏™SQLÊéíÂ∫èÊï∞ÊúÄÂ§ö(CPUÊ∂àËÄó) 1SELECT SCHEMA_NAME,DIGEST_TEXT,COUNT_STAR,SUM_ROWS_SENT,SUM_SORT_ROWS,FIRST_SEEN,LAST_SEEN FROM performance_schema.events_statements_summary_by_digest where SCHEMA_NAME is not null and SCHEMA_NAME !='information_schema' ORDER BY SUM_SORT_ROWS desc LIMIT 1\G]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DevOpsÂàùËØÜ]]></title>
    <url>%2Fposts%2F230bf701.html</url>
    <content type="text"><![CDATA[ËÉåÊôØ DevOpsÁöÑÂá∫Áé∞ÊúâÂÖ∂ÂøÖÁÑ∂ÊÄß„ÄÇÂú®ËΩØ‰ª∂ÂºÄÂèëÁîüÂëΩÂë®Êúü‰∏≠ÔºåÈÅáÂà∞‰∫Ü‰∏§Ê¨°Áì∂È¢à„ÄÇ Á¨¨‰∏ÄÊ¨°Áì∂È¢àÊòØÂú®ÈúÄÊ±ÇÈò∂ÊÆµÂíåÂºÄÂèëÈò∂ÊÆµ‰πãÈó¥ÔºåÈíàÂØπ‰∏çÊñ≠ÂèòÂåñÁöÑÈúÄÊ±ÇÔºåÂØπËΩØ‰ª∂ÂºÄÂèëËÄÖÊèêÂá∫‰∫ÜÈ´òË¶ÅÊ±ÇÔºåÂêéÊù•Âá∫Áé∞‰∫ÜÊïèÊç∑ÊñπÊ≥ïËÆ∫ÔºåÂº∫Ë∞ÉÈÄÇÂ∫îÈúÄÊ±Ç„ÄÅÂø´ÈÄüËø≠‰ª£„ÄÅÊåÅÁª≠‰∫§‰ªò„ÄÇ Á¨¨‰∫å‰∏™Áì∂È¢àÊòØÂú®ÂºÄÂèëÈò∂ÊÆµÂíåÊûÑÂª∫ÈÉ®ÁΩ≤Èò∂ÊÆµ‰πãÈó¥ÔºåÂ§ßÈáèÂÆåÊàêÁöÑÂºÄÂèë‰ªªÂä°ÂèØËÉΩÈòªÂ°ûÂú®ÈÉ®ÁΩ≤Èò∂ÊÆµÔºåÂΩ±Âìç‰∫§‰ªòÔºå‰∫éÊòØÊúâ‰∫ÜDevOps„ÄÇ Ê¶ÇÂøµ DevOps‰∏ÄËØçÁöÑÊù•Ëá™‰∫éDevelopmentÂíåOperationsÁöÑÁªÑÂêàÔºåÁ™ÅÂá∫ÈáçËßÜËΩØ‰ª∂ÂºÄÂèë‰∫∫ÂëòÂíåËøêÁª¥‰∫∫ÂëòÁöÑÊ≤üÈÄöÂêà‰ΩúÔºåÈÄöËøáËá™Âä®ÂåñÊµÅÁ®ãÊù•‰ΩøÂæóËΩØ‰ª∂ÊûÑÂª∫„ÄÅÊµãËØï„ÄÅÂèëÂ∏ÉÊõ¥Âä†Âø´Êç∑„ÄÅÈ¢ëÁπÅÂíåÂèØÈù†„ÄÇ DevOpsÊòØ‰∏∫‰∫ÜÂ°´Ë°•ÂºÄÂèëÁ´ØÂíåËøêÁª¥Á´Ø‰πãÈó¥ÁöÑ‰ø°ÊÅØÈ∏øÊ≤üÔºåÊîπÂñÑÂõ¢Èòü‰πãÈó¥ÁöÑÂçè‰ΩúÂÖ≥Á≥ª„ÄÇ‰∏çËøáÈúÄË¶ÅÊæÑÊ∏ÖÁöÑ‰∏ÄÁÇπÊòØÔºå‰ªéÂºÄÂèëÂà∞ËøêÁª¥Ôºå‰∏≠Èó¥ËøòÊúâÊµãËØïÁéØËäÇ„ÄÇDevOpsÂÖ∂ÂÆûÂåÖÂê´‰∫Ü‰∏â‰∏™ÈÉ®ÂàÜÔºöÂºÄÂèë„ÄÅÊµãËØïÂíåËøêÁª¥„ÄÇ Êç¢Âè•ËØùËØ¥ÔºåDevOpsÂ∏åÊúõÂÅöÂà∞ÁöÑÊòØËΩØ‰ª∂‰∫ßÂìÅ‰∫§‰ªòËøáÁ®ã‰∏≠ITÂ∑•ÂÖ∑ÈìæÁöÑÊâìÈÄöÔºå‰ΩøÂæóÂêÑ‰∏™Âõ¢ÈòüÂáèÂ∞ëÊó∂Èó¥ÊçüËÄóÔºåÊõ¥Âä†È´òÊïàÂú∞ÂçèÂêåÂ∑•‰Ωú„ÄÇ‰∏ìÂÆ∂‰ª¨ÊÄªÁªìÂá∫‰∫Ü‰∏ãÈù¢Ëøô‰∏™DevOpsËÉΩÂäõÂõæÔºåËâØÂ•ΩÁöÑÈó≠ÁéØÂèØ‰ª•Â§ßÂ§ßÂ¢ûÂä†Êï¥‰ΩìÁöÑ‰∫ßÂá∫„ÄÇ ÊåÅÁª≠ÈõÜÊàê ÊåÅÁª≠ÈõÜÊàêÂº∫Ë∞ÉÂºÄÂèë‰∫∫ÂëòÊèê‰∫§‰∫ÜÊñ∞‰ª£Á†Å‰πãÂêéÔºåÁ´ãÂàªËøõË°åÊûÑÂª∫„ÄÅÔºàÂçïÂÖÉÔºâÊµãËØï„ÄÇÊ†πÊçÆÊµãËØïÁªìÊûúÔºåÂèØ‰ª•Á°ÆÂÆöÊñ∞‰ª£Á†ÅÂíåÂéüÊúâ‰ª£Á†ÅËÉΩÂê¶Ê≠£Á°ÆÂú∞ÈõÜÊàêÂú®‰∏ÄËµ∑„ÄÇ ÊåÅÁª≠‰∫§‰ªò ÊåÅÁª≠‰∫§‰ªòÂú®ÊåÅÁª≠ÈõÜÊàêÁöÑÂü∫Á°Ä‰∏äÔºåÂ∞ÜÈõÜÊàêÂêéÁöÑ‰ª£Á†ÅÈÉ®ÁΩ≤Âà∞Êõ¥Ë¥¥ËøëÁúüÂÆûËøêË°åÁéØÂ¢ÉÁöÑ„ÄåÁ±ªÁîü‰∫ßÁéØÂ¢É„ÄçÔºàproduction-like environmentsÔºâ‰∏≠„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨ÂÆåÊàêÂçïÂÖÉÊµãËØïÂêéÔºåÂèØ‰ª•Êää‰ª£Á†ÅÈÉ®ÁΩ≤Âà∞ËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑ Staging ÁéØÂ¢É‰∏≠Êõ¥Â§öÁöÑÊµãËØï„ÄÇÂ¶ÇÊûú‰ª£Á†ÅÊ≤°ÊúâÈóÆÈ¢òÔºåÂèØ‰ª•ÁªßÁª≠ÊâãÂä®ÈÉ®ÁΩ≤Âà∞Áîü‰∫ßÁéØÂ¢É‰∏≠„ÄÇ ÊåÅÁª≠ÈÉ®ÁΩ≤ ÊåÅÁª≠ÈÉ®ÁΩ≤ÂàôÊòØÂú®ÊåÅÁª≠‰∫§‰ªòÁöÑÂü∫Á°Ä‰∏äÔºåÊääÈÉ®ÁΩ≤Âà∞Áîü‰∫ßÁéØÂ¢ÉÁöÑËøáÁ®ãËá™Âä®Âåñ„ÄÇ Âá†‰∏™ÂÖ≥ÈîÆÈóÆÈ¢ò Â•ΩÂ§ÑÊòØ‰ªÄ‰πàÔºü DevOpsÁöÑ‰∏Ä‰∏™Â∑®Â§ßÂ•ΩÂ§ÑÂ∞±ÊòØÂèØ‰ª•È´òÊïà‰∫§‰ªòÔºåËøô‰πüÊ≠£Â•ΩÊòØÂÆÉÁöÑÂàùË°∑„ÄÇ PuppetÂíåDevOps Research and Assessment (DORA) ‰∏ªÂäû‰∫Ü2016Âπ¥DevOpsË∞ÉÊü•Êä•ÂëäÔºåÊ†πÊçÆÂÖ®ÁêÉ4600‰ΩçÂêÑITÂÖ¨Âè∏ÁöÑÊäÄÊúØÂ∑•‰ΩúËÄÖÁöÑÊèê‰∫§Êï∞ÊçÆÁªüËÆ°ÔºåÂæóÂá∫È´òÊïàÂÖ¨Âè∏Âπ≥ÂùáÊØèÂπ¥ÂèØ‰ª•ÂÆåÊàê1460Ê¨°ÈÉ®ÁΩ≤„ÄÇ ‰∏é‰ΩéÊïàÁªÑÁªáÁõ∏ÊØîÔºåÈ´òÊïàÁªÑÁªáÁöÑÈÉ®ÁΩ≤È¢ëÁπÅ200ÂÄçÔºå‰∫ßÂìÅÊäïÂÖ•‰ΩøÁî®ÈÄüÂ∫¶Âø´2555ÂÄçÔºåÊúçÂä°ÊÅ¢Â§çÈÄüÂ∫¶Âø´24ÂÄç„ÄÇÂú®Â∑•‰ΩúÂÜÖÂÆπÁöÑÊó∂Èó¥ÂàÜÈÖç‰∏äÔºå‰ΩéÊïàËÄÖË¶ÅÂ§öËä±22%ÁöÑÊó∂Èó¥Áî®Âú®‰∏∫ËßÑÂàíÂ•ΩÊàñËÄÖÈáçÂ§çÂ∑•‰Ωú‰∏äÔºåËÄåÈ´òÊïàËÄÖÂç¥ÂèØ‰ª•Â§öËä±29%ÁöÑÊó∂Èó¥Áî®Âú®Êñ∞ÁöÑÂ∑•‰Ωú‰∏ä„ÄÇÊâÄ‰ª•ËøôÈáåÁöÑÈ´òÊïà‰∏ç‰ªÖ‰ªÖÊåáÂÖ¨Âè∏‰∫ßÂá∫ÁöÑÊïàÁéáÊèêÈ´òÔºåËøòÊåáÂëòÂ∑•ÁöÑÂ∑•‰ΩúË¥®ÈáèÂæóÂà∞ÊèêÂçá„ÄÇ Âè¶Â§ñ‰∏Ä‰∏™Â•ΩÂ§ÑÂ∞±ÊòØ‰ºöÊîπÂñÑÂÖ¨Âè∏ÁªÑÁªáÊñáÂåñ„ÄÅÊèêÈ´òÂëòÂ∑•ÁöÑÂèÇ‰∏éÊÑü„ÄÇ ÂëòÂ∑•‰ª¨ÂèòÂæóÊõ¥È´òÊïàÔºå‰πüÊõ¥ÊúâÊª°Ë∂≥ÂíåÊàêÂ∞±ÊÑüÔºõË∞ÉÊü•ÊòæÁ§∫È´òÊïàÂëòÂ∑•ÁöÑÈõáÂëòÂáÄÊé®ËçêÂÄºÔºàeNPS:employee Net Promoter ScoreÔºâÊõ¥È´òÔºåÂç≥ÂØπÂÖ¨Âè∏Êõ¥Âä†ËÆ§Âêå„ÄÇ Âø´ÈÄüÈÉ®ÁΩ≤ÂêåÊó∂ÊèêÈ´òITÁ®≥ÂÆöÊÄßÔºåËøô‰∏çÁüõÁõæÂêóÔºü Âø´ÈÄüÁöÑÈÉ®ÁΩ≤ÂÖ∂ÂÆûÂèØ‰ª•Â∏ÆÂä©Êõ¥Âø´Âú∞ÂèëÁé∞ÈóÆÈ¢òÔºå‰∫ßÂìÅË¢´Êõ¥Âø´Âú∞‰∫§‰ªòÂà∞Áî®Êà∑Êâã‰∏≠ÔºåÂõ¢ÈòüÂèØ‰ª•Êõ¥Âø´Âú∞ÂæóÂà∞Áî®Êà∑ÁöÑÂèçÈ¶àÔºå‰ªéËÄåËøõË°åÊõ¥Âø´Âú∞ÂìçÂ∫î„ÄÇËÄå‰∏îÔºåDevOpsÂ∞èÊ≠•Âø´Ë∑ëÁöÑÂΩ¢ÂºèÂ∏¶Êù•ÁöÑÂèòÂåñÊòØÊØîËæÉÂ∞èÁöÑÔºåÂá∫Áé∞ÈóÆÈ¢òÁöÑÂÅèÂ∑ÆÊØèÊ¨°ÈÉΩ‰∏ç‰ºöÂ§™Â§ßÔºå‰øÆÂ§çËµ∑Êù•‰πü‰ºöÁõ∏ÂØπÂÆπÊòì‰∏Ä‰∫õ„ÄÇ ‰∏âÂéüÂàô Âü∫Á°ÄËÆæÊñΩÂç≥‰ª£Á†ÅÔºàInfrastructure as CodeÔºâ DeveOpsÁöÑÂü∫Á°ÄÊòØÂ∞ÜÈáçÂ§çÁöÑ‰∫ãÊÉÖ‰ΩøÁî®Ëá™Âä®ÂåñËÑöÊú¨ÊàñËΩØ‰ª∂Êù•ÂÆûÁé∞Ôºå‰æãÂ¶ÇDockerÔºàÂÆπÂô®ÂåñÔºâ„ÄÅJenkinsÔºàÊåÅÁª≠ÈõÜÊàêÔºâ„ÄÅPuppetÔºàÂü∫Á°ÄÊû∂ÊûÑÊûÑÂª∫Ôºâ„ÄÅVagrantÔºàËôöÊãüÂåñÂπ≥Âè∞ÔºâÁ≠â„ÄÇ ÊåÅÁª≠‰∫§‰ªòÔºàContinuous DeliveryÔºâ ÊåÅÁª≠‰∫§‰ªòÊòØÂú®Áîü‰∫ßÁéØÂ¢ÉÂèëÂ∏ÉÂèØÈù†ÁöÑËΩØ‰ª∂Âπ∂‰∫§‰ªòÁªôÁî®Êà∑‰ΩøÁî®„ÄÇËÄåÊåÅÁª≠ÈÉ®ÁΩ≤Âàô‰∏ç‰∏ÄÂÆö‰∫§‰ªòÁªôÁî®Êà∑‰ΩøÁî®„ÄÇ Ê∂âÂèäÂà∞2‰∏™Êó∂Èó¥ÔºåTTRÔºàTime to RepairÔºâ‰øÆÂ§çÊó∂Èó¥ÔºåTTMÔºàTime To MarketingÔºâ‰∫ßÂìÅ‰∏äÁ∫øÊó∂Èó¥„ÄÇË¶ÅÂÅöÂà∞È´òÊïà‰∫§‰ªòÂèØÈù†ÁöÑËΩØ‰ª∂ÔºåÈúÄË¶ÅÂ∞ΩÂèØËÉΩÁöÑÂáèÂ∞ëËøô2‰∏™Êó∂Èó¥„ÄÇ ÈÉ®ÁΩ≤ÂèØ‰ª•ÊúâÂ§öÁßçÊñπÂºèÔºåÊØîÂ¶ÇËìùÁªøÈÉ®ÁΩ≤„ÄÅÈáë‰∏ùÈõÄÈÉ®ÁΩ≤Á≠â„ÄÇ ÂçèÂêåÂ∑•‰ΩúÔºàCulture of CollaborationÔºâ ÂºÄÂèëËÄÖÂíåËøêÁª¥‰∫∫ÂëòÂøÖÈ°ªÂÆöÊúüËøõË°åÂØÜÂàáÁöÑÂêà‰Ωú„ÄÇÂºÄÂèëÂ∫îËØ•ÊääËøêÁª¥ËßíËâ≤ÁêÜËß£ÊàêËΩØ‰ª∂ÁöÑÂè¶‰∏Ä‰∏™Áî®Êà∑Áæ§‰Ωì„ÄÇÂçè‰ΩúÊúâÂá†‰∏™ÁöÑÂª∫ËÆÆÔºö Ëá™Âä®ÂåñÔºàÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑÂçè‰ΩúÔºâÔºõ Â∞èËåÉÂõ¥ÔºàÊØèÊ¨°‰øÆÊîπÁöÑÂÜÖÂÆπ‰∏çÂÆúËøáÂ§öÔºåÂáèÂ∞ëÂèëÂ∏ÉÁöÑÈ£éÈô©ÔºâÔºõ Áªü‰∏Ä‰ø°ÊÅØÈõÜÊï£Âú∞ÔºàÂ¶ÇwikiÔºåËÆ©ÂèåÊñπËÉΩÂ§üÂÖ±‰∫´‰ø°ÊÅØÔºâÔºõ Ê†áÂáÜÂåñÂçè‰ΩúÂ∑•ÂÖ∑ÔºàÊØîÂ¶ÇjenkinsÔºâ„ÄÇ ÊÄé‰πàÂÆûÁé∞DevOps Á°¨ÊÄßË¶ÅÊ±ÇÔºöÂ∑•ÂÖ∑‰∏äÁöÑÂáÜÂ§á ‰ª£Á†ÅÁÆ°ÁêÜÔºàSCMÔºâÔºöGitHub„ÄÅGitLab„ÄÅBitBucket„ÄÅSubVersionÊûÑÂª∫Â∑•ÂÖ∑ÔºöAnt„ÄÅGradle„ÄÅmavenËá™Âä®ÈÉ®ÁΩ≤ÔºöCapistrano„ÄÅCodeDeployÊåÅÁª≠ÈõÜÊàêÔºàCIÔºâÔºöBamboo„ÄÅHudson„ÄÅJenkinsÈÖçÁΩÆÁÆ°ÁêÜÔºöAnsible„ÄÅChef„ÄÅPuppet„ÄÅSaltStack„ÄÅScriptRock GuardRailÂÆπÂô®ÔºöDocker„ÄÅLXC„ÄÅÁ¨¨‰∏âÊñπÂéÇÂïÜÂ¶ÇAWSÁºñÊéíÔºöKubernetes„ÄÅCore„ÄÅApache Mesos„ÄÅDC/OSÊúçÂä°Ê≥®ÂÜå‰∏éÂèëÁé∞ÔºöZookeeper„ÄÅetcd„ÄÅConsulËÑöÊú¨ËØ≠Ë®ÄÔºöpython„ÄÅruby„ÄÅshellÊó•ÂøóÁÆ°ÁêÜÔºöELK„ÄÅLogentriesÁ≥ªÁªüÁõëÊéßÔºöDatadog„ÄÅGraphite„ÄÅIcinga„ÄÅNagios„ÄÅzabbixÊÄßËÉΩÁõëÊéßÔºöAppDynamics„ÄÅNew Relic„ÄÅSplunkÂéãÂäõÊµãËØïÔºöJMeter„ÄÅBlaze Meter„ÄÅloader.ioÈ¢ÑË≠¶ÔºöPagerDuty„ÄÅpingdom„ÄÅÂéÇÂïÜËá™Â∏¶Â¶ÇAWS SNSHTTPÂä†ÈÄüÂô®ÔºöVarnishÊ∂àÊÅØÊÄªÁ∫øÔºöActiveMQ„ÄÅSQSÂ∫îÁî®ÊúçÂä°Âô®ÔºöTomcat„ÄÅJBossWebÊúçÂä°Âô®ÔºöApache„ÄÅNginx„ÄÅIISÊï∞ÊçÆÂ∫ìÔºöMySQL„ÄÅOracle„ÄÅPostgreSQLÁ≠âÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºõcassandra„ÄÅmongoDB„ÄÅredisÁ≠âNoSQLÊï∞ÊçÆÂ∫ìÈ°πÁõÆÁÆ°ÁêÜÔºàPMÔºâÔºöJira„ÄÅAsana„ÄÅTaiga„ÄÅTrello„ÄÅBasecamp„ÄÅPivotal Tracker Âú®Â∑•ÂÖ∑ÁöÑÈÄâÊã©‰∏äÔºåÈúÄË¶ÅÁªìÂêàÂÖ¨Âè∏‰∏öÂä°ÈúÄÊ±ÇÂíåÊäÄÊúØÂõ¢ÈòüÊÉÖÂÜµËÄåÂÆö„ÄÇ ËΩØÊÄßÈúÄÊ±ÇÔºöÊñáÂåñÂíå‰∫∫ DevOpsÊàêÂäü‰∏éÂê¶ÔºåÂÖ¨Âè∏ÁªÑÁªáÊòØÂê¶Âà©‰∫éÂçè‰ΩúÊòØÂÖ≥ÈîÆ„ÄÇÂºÄÂèë‰∫∫ÂëòÂíåËøêÁª¥‰∫∫ÂëòÂèØ‰ª•ËâØÂ•ΩÊ≤üÈÄö‰∫íÁõ∏Â≠¶‰π†Ôºå‰ªéËÄåÊã•ÊúâÈ´òÁîü‰∫ßÂäõ„ÄÇÂπ∂‰∏îÂçè‰Ωú‰πüÂ≠òÂú®‰∫é‰∏öÂä°‰∫∫Âëò‰∏éÂºÄÂèë‰∫∫Âëò‰πãÈó¥„ÄÇ Âá∫Â∏≠‰∫Ü2016Âπ¥‰º¶Êï¶‰ºÅ‰∏öÁ∫ßDevOpsÂ≥∞‰ºöÁöÑITVÂÖ¨Âè∏Âú®2012Âπ¥Â∞±ÂºÄÂßãËêΩÂú∞DevOpsÔºåÂÖ∂ÈÄöÁî®Âπ≥Âè∞‰∏ªÁÆ°ClarkÂú®Êé•Âèó‰∫ÜInfoQÁöÑÈááËÆøÔºåÂú®Ë∞àÂèäÊàêÂäüÊó∂Ë°®Á§∫Ôºå‰∏öÂä°‰∫∫ÂëòÈùûÂ∏∏Ê∏ÖÊ•ö‰ªñ‰ª¨Â∏åÊúõÂú®ÊúÄÂ∞èÂåñÂèØË°å‰∫ßÂìÅ‰∏≠ÂÆûÁé∞‰ªÄ‰πàÔºåÂ∑•Á®ãÂ∏à‰ª¨Â∞±ÊåâÈúÄ‰∫§‰ªòÔºå‰∏çÂÅöÂ§ö‰ΩôÂ∑•‰Ωú„ÄÇ ËøôÊ†∑ÔºåÂ∑•Á®ãÂ∏à‰ª¨‰ΩøÁî®ÈÄöÁî®ÁöÑÂπ≥Âè∞ÔºàÂç≥ÊâìÈÄöÁöÑÂ∑•ÂÖ∑ÈìæÔºâÂæóÂà∞Êõ¥Â•ΩÁöÑ‰∏ÄËá¥ÊÄßÂíåÊõ¥È´òÁöÑË¥®Èáè„ÄÇÊ≠§Â§ñÔºåDevOpsÂØπÂ∑•Á®ãÂ∏à‰∏™‰∫∫ÁöÑË¶ÅÊ±Ç‰πüÊèêÈ´ò‰∫ÜÔºåÂæàÂ§ö‰∏ìÂÆ∂‰πüËÆ§‰∏∫ÊãõÂãüÂà∞‰ºòÁßÄÁöÑ‰∫∫Êâç‰πüÊòØ‰∏Ä‰∏™ÊåëÊàò„ÄÇ]]></content>
      <categories>
        <category>DevOps</category>
      </categories>
      <tags>
        <tag>DevOps</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàÜÂ∏ÉÂºèÂ≠¶‰π†-ÂàÜÂ∏ÉÂºè‰∫ãÂä°]]></title>
    <url>%2Fposts%2F464cb56d.html</url>
    <content type="text"><![CDATA[‰∫ãÂä°ÂÆö‰πâ ‰∫ãÂä°Êèê‰æõ‰∏ÄÁßçÊú∫Âà∂Â∞Ü‰∏Ä‰∏™Ê¥ªÂä®Ê∂âÂèäÁöÑÊâÄÊúâÊìç‰ΩúÁ∫≥ÂÖ•Âà∞‰∏Ä‰∏™‰∏çÂèØÂàÜÂâ≤ÁöÑÊâßË°åÂçïÂÖÉÔºåÁªÑÊàê‰∫ãÂä°ÁöÑÊâÄÊúâÊìç‰ΩúÂè™ÊúâÂú®ÊâÄÊúâÊìç‰ΩúÂùáËÉΩÊ≠£Â∏∏ÊâßË°åÁöÑÊÉÖÂÜµ‰∏ãÊñπËÉΩÊèê‰∫§ÔºåÂè™Ë¶ÅÂÖ∂‰∏≠‰ªª‰∏ÄÊìç‰ΩúÊâßË°åÂ§±Ë¥•ÔºåÈÉΩÂ∞ÜÂØºËá¥Êï¥‰∏™‰∫ãÂä°ÁöÑÂõûÊªö„ÄÇÁÆÄÂçïÂú∞ËØ¥Ôºå‰∫ãÂä°Êèê‰æõ‰∏ÄÁßç‚ÄúË¶Å‰πà‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºåË¶Å‰πàÂÅöÂÖ®Â•óÔºàAll or NothingÔºâ‚ÄùÊú∫Âà∂„ÄÇ Êï∞ÊçÆÂ∫ì‰∫ãÂä°ÁâπÊÄßÔºàACIDÔºâ A:ÂéüÂ≠êÊÄß(Atomicity) ‰∏Ä‰∏™‰∫ãÂä°(transaction)‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúÔºåË¶Å‰πàÂÖ®ÈÉ®ÂÆåÊàêÔºåË¶Å‰πàÂÖ®ÈÉ®‰∏çÂÆåÊàêÔºå‰∏ç‰ºöÁªìÊùüÂú®‰∏≠Èó¥Êüê‰∏™ÁéØËäÇ„ÄÇ‰∫ãÂä°Âú®ÊâßË°åËøáÁ®ã‰∏≠ÂèëÁîüÈîôËØØÔºå‰ºöË¢´ÂõûÊªöÔºàRollbackÔºâÂà∞‰∫ãÂä°ÂºÄÂßãÂâçÁöÑÁä∂ÊÄÅÔºåÂ∞±ÂÉèËøô‰∏™‰∫ãÂä°‰ªéÊù•Ê≤°ÊúâÊâßË°åËøá‰∏ÄÊ†∑„ÄÇ ‰æãÂ¶ÇÔºöÈì∂Ë°åËΩ¨Ë¥¶Ôºå‰ªéAË¥¶Êà∑ËΩ¨100ÂÖÉËá≥BË¥¶Êà∑ÔºåÂàÜ‰∏∫‰∏§‰∏™Ê≠•È™§Ôºö Ôºà1Ôºâ‰ªéAË¥¶Êà∑Âèñ100ÂÖÉ Ôºà2ÔºâÂ≠òÂÖ•100ÂÖÉËá≥BË¥¶Êà∑„ÄÇ Ëøô‰∏§Ê≠•Ë¶Å‰πà‰∏ÄËµ∑ÂÆåÊàêÔºåË¶Å‰πà‰∏ÄËµ∑‰∏çÂÆåÊàêÔºåÂ¶ÇÊûúÂè™ÂÆåÊàêÁ¨¨‰∏ÄÊ≠•ÔºåÁ¨¨‰∫åÊ≠•Â§±Ë¥•ÔºåÈí±‰ºöËé´ÂêçÂÖ∂Â¶ôÂ∞ë‰∫Ü100ÂÖÉ„ÄÇ C:‰∏ÄËá¥ÊÄß(Consistency) ‰∫ãÂä°ÁöÑ‰∏ÄËá¥ÊÄßÊåáÁöÑÊòØÂú®‰∏Ä‰∏™‰∫ãÂä°ÊâßË°å‰πãÂâçÂíåÊâßË°å‰πãÂêéÊï∞ÊçÆÂ∫ìÈÉΩÂøÖÈ°ªÂ§Ñ‰∫é‰∏ÄËá¥ÊÄßÁä∂ÊÄÅ„ÄÇÂ¶ÇÊûú‰∫ãÂä°ÊàêÂäüÂú∞ÂÆåÊàêÔºåÈÇ£‰πàÁ≥ªÁªü‰∏≠ÊâÄÊúâÂèòÂåñÂ∞ÜÊ≠£Á°ÆÂú∞Â∫îÁî®ÔºåÁ≥ªÁªüÂ§Ñ‰∫éÊúâÊïàÁä∂ÊÄÅ„ÄÇÂ¶ÇÊûúÂú®‰∫ãÂä°‰∏≠Âá∫Áé∞ÈîôËØØÔºåÈÇ£‰πàÁ≥ªÁªü‰∏≠ÁöÑÊâÄÊúâÂèòÂåñÂ∞ÜËá™Âä®Âú∞ÂõûÊªöÔºåÁ≥ªÁªüËøîÂõûÂà∞ÂéüÂßãÁä∂ÊÄÅ„ÄÇ ‰æãÂ¶ÇÔºöÁé∞ÊúâÂÆåÊï¥ÊÄßÁ∫¶ÊùüA+B=100ÔºåÂ¶ÇÊûú‰∏Ä‰∏™‰∫ãÂä°ÊîπÂèò‰∫ÜAÔºåÈÇ£‰πàÂøÖÈ°ªÂæóÊîπÂèòBÔºå‰ΩøÂæó‰∫ãÂä°ÁªìÊùüÂêé‰æùÁÑ∂Êª°Ë∂≥A+B=100ÔºåÂê¶Âàô‰∫ãÂä°Â§±Ë¥•„ÄÇ I:ÈöîÁ¶ªÊÄß(Isolation) ÊåáÁöÑÊòØÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠ÔºåÂΩì‰∏çÂêåÁöÑ‰∫ãÂä°ÂêåÊó∂ÊìçÁ∫µÁõ∏ÂêåÁöÑÊï∞ÊçÆÊó∂ÔºåÊØè‰∏™‰∫ãÂä°ÈÉΩÊúâÂêÑËá™ÁöÑÂÆåÊï¥Êï∞ÊçÆÁ©∫Èó¥„ÄÇÁî±Âπ∂Âèë‰∫ãÂä°ÊâÄÂÅöÁöÑ‰øÆÊîπÂøÖÈ°ª‰∏é‰ªª‰ΩïÂÖ∂‰ªñÂπ∂Âèë‰∫ãÂä°ÊâÄÂÅöÁöÑ‰øÆÊîπÈöîÁ¶ª„ÄÇ‰∫ãÂä°Êü•ÁúãÊï∞ÊçÆÊõ¥Êñ∞Êó∂ÔºåÊï∞ÊçÆÊâÄÂ§ÑÁöÑÁä∂ÊÄÅË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂÆÉ‰πãÂâçÁöÑÁä∂ÊÄÅÔºåË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂÆÉ‰πãÂêéÁöÑÁä∂ÊÄÅÔºå‰∫ãÂä°‰∏ç‰ºöÊü•ÁúãÂà∞‰∏≠Èó¥Áä∂ÊÄÅÁöÑÊï∞ÊçÆ„ÄÇ ‰æãÂ¶ÇÔºöÁé∞ÊúâÊúâ‰∏™‰∫§ÊòìÊòØ‰ªéAË¥¶Êà∑ËΩ¨100ÂÖÉËá≥BË¥¶Êà∑ÔºåÂú®Ëøô‰∏™‰∫§Êòì‰∫ãÂä°ËøòÊú™ÂÆåÊàêÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÊ≠§Êó∂BÊü•ËØ¢Ëá™Â∑±ÁöÑË¥¶Êà∑ÔºåÊòØÁúã‰∏çÂà∞Êñ∞Â¢ûÂä†ÁöÑ100ÂÖÉÁöÑ„ÄÇ D:ÊåÅ‰πÖÊÄß(Durability) ‰∫ãÂä°Â§ÑÁêÜÁªìÊùüÂêéÔºåÂØπÊï∞ÊçÆÁöÑ‰øÆÊîπÂ∞±ÊòØÊ∞∏‰πÖÁöÑÔºåÂç≥‰æøÁ≥ªÁªüÊïÖÈöú‰πü‰∏ç‰ºö‰∏¢Â§±„ÄÇÂç≥‰ΩøÂèëÁîüÁ≥ªÁªüÂ¥©Ê∫ÉÔºåÈáçÊñ∞ÂêØÂä®Êï∞ÊçÆÂ∫ìÁ≥ªÁªüÂêéÔºåÊï∞ÊçÆÂ∫ìËøòËÉΩÊÅ¢Â§çÂà∞‰∫ãÂä°ÊàêÂäüÁªìÊùüÊó∂ÁöÑÁä∂ÊÄÅ„ÄÇ Êâì‰∏™ÊØîÊñπÔºå‰Ω†‰π∞‰∏úË•øÁöÑÊó∂ÂÄôÈúÄË¶ÅËÆ∞ÂΩïÂú®Ë¥¶Êú¨‰∏äÔºåÂç≥‰ΩøËÄÅÊùøÂøòËÆ∞‰∫ÜÈÇ£‰πüÊúâÊçÆÂèØÊü•„ÄÇ Êï∞ÊçÆÂ∫ì‰∫ãÂä°ÂÆûÁé∞ÂéüÁêÜ ‰ª•MySQLÁöÑInnoDB‰∏∫‰æãÔºå‰∫ãÂä°ÁöÑACIDÊòØÈÄöËøáInnoDBÊó•ÂøóÂíåÈîÅÊù•‰øùËØÅ„ÄÇ ‰∫ãÂä°ÁöÑÈöîÁ¶ªÊÄßÊòØÈÄöËøáÊï∞ÊçÆÂ∫ìÈîÅÁöÑÊú∫Âà∂ÂÆûÁé∞ÁöÑÔºåÊåÅ‰πÖÊÄßÈÄöËøáredo logÔºàÈáçÂÅöÊó•ÂøóÔºâÊù•ÂÆûÁé∞ÔºåÂéüÂ≠êÊÄßÂíå‰∏ÄËá¥ÊÄßÈÄöËøáUndo logÊù•ÂÆûÁé∞„ÄÇ UndoLogÁöÑÂéüÁêÜÂæàÁÆÄÂçïÔºå‰∏∫‰∫ÜÊª°Ë∂≥‰∫ãÂä°ÁöÑÂéüÂ≠êÊÄßÔºåÂú®Êìç‰Ωú‰ªª‰ΩïÊï∞ÊçÆ‰πãÂâçÔºåÈ¶ñÂÖàÂ∞ÜÊï∞ÊçÆÂ§á‰ªΩÂà∞‰∏Ä‰∏™Âú∞ÊñπÔºàËøô‰∏™Â≠òÂÇ®Êï∞ÊçÆÂ§á‰ªΩÁöÑÂú∞ÊñπÁß∞‰∏∫UndoLogÔºâ„ÄÇÁÑ∂ÂêéËøõË°åÊï∞ÊçÆÁöÑ‰øÆÊîπ„ÄÇÂ¶ÇÊûúÂá∫Áé∞‰∫ÜÈîôËØØÊàñËÄÖÁî®Êà∑ÊâßË°å‰∫ÜROLLBACKËØ≠Âè•ÔºåÁ≥ªÁªüÂèØ‰ª•Âà©Áî®Undo Log‰∏≠ÁöÑÂ§á‰ªΩÂ∞ÜÊï∞ÊçÆÊÅ¢Â§çÂà∞‰∫ãÂä°ÂºÄÂßã‰πãÂâçÁöÑÁä∂ÊÄÅ„ÄÇ ÂíåUndo LogÁõ∏ÂèçÔºåRedoLogËÆ∞ÂΩïÁöÑÊòØÊñ∞Êï∞ÊçÆÁöÑÂ§á‰ªΩ„ÄÇÂú®‰∫ãÂä°Êèê‰∫§ÂâçÔºåÂè™Ë¶ÅÂ∞ÜRedoLogÊåÅ‰πÖÂåñÂç≥ÂèØÔºå‰∏çÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÊåÅ‰πÖÂåñ„ÄÇÂΩìÁ≥ªÁªüÂ¥©Ê∫ÉÊó∂ÔºåËôΩÁÑ∂Êï∞ÊçÆÊ≤°ÊúâÊåÅ‰πÖÂåñÔºå‰ΩÜÊòØRedoLogÂ∑≤ÁªèÊåÅ‰πÖÂåñ„ÄÇÁ≥ªÁªüÂèØ‰ª•Ê†πÊçÆRedoLogÁöÑÂÜÖÂÆπÔºåÂ∞ÜÊâÄÊúâÊï∞ÊçÆÊÅ¢Â§çÂà∞ÊúÄÊñ∞ÁöÑÁä∂ÊÄÅ„ÄÇ ‰ªÄ‰πàÊó∂ÂÄô‰ΩøÁî®Êï∞ÊçÆÂ∫ì‰∫ãÂä° ÁÆÄÂçïËÄåË®ÄÔºåÂ∞±ÊòØ‰∏öÂä°‰∏äÊúâ‰∏ÄÁªÑÊï∞ÊçÆÊìç‰ΩúÔºåÈúÄË¶ÅÂ¶ÇÊûúÂÖ∂‰∏≠Êúâ‰ªª‰Ωï‰∏Ä‰∏™Êìç‰ΩúÊâßË°åÂ§±Ë¥•ÔºåÊï¥ÁªÑÊìç‰ΩúÂÖ®ÈÉ®‰∏çÊâßË°åÂπ∂ÊÅ¢Â§çÂà∞Êú™ÊâßË°åÁä∂ÊÄÅÔºåË¶Å‰πàÂÖ®ÈÉ®ÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•„ÄÇ Âú®‰ΩøÁî®Êï∞ÊçÆÂ∫ì‰∫ãÂä°Êó∂ÈúÄË¶ÅÊ≥®ÊÑèÔºåÂ∞ΩÂèØËÉΩÁü≠ÁöÑ‰øùÊåÅ‰∫ãÂä°Ôºå‰øÆÊîπÂ§ö‰∏™‰∏çÂêåË°®ÁöÑÊï∞ÊçÆÁöÑÂÜóÈïø‰∫ãÂä°‰ºö‰∏•ÈáçÂ¶®Á¢çÁ≥ªÁªü‰∏≠ÁöÑÊâÄÊúâÂÖ∂‰ªñÁî®Êà∑ÔºåËøôÂæàÊúâÂèØËÉΩÂØºËá¥‰∏Ä‰∫õÊÄßËÉΩÈóÆÈ¢ò„ÄÇ ÂàÜÂ∏ÉÂºèÁêÜËÆ∫ CAPÁêÜËÆ∫ ‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâÔºöÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆ‰øùÊåÅ‰∏ÄËá¥„ÄÇ ÂèØÁî®ÊÄßÔºàAvailabilityÔºâÔºö‰ªª‰Ωï‰∏Ä‰∏™ËäÇÁÇπÊåÇ‰∫ÜÔºåÂÖ∂‰ªñËäÇÁÇπÂèØ‰ª•ÁªßÁª≠ÂØπÂ§ñÊèê‰æõÊúçÂä°„ÄÇ ÂàÜÂå∫ÂÆπÈîôÊÄßÔºàÁΩëÁªúÂàÜÂå∫ÔºâPartition toleranceÔºö‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊâÄÂú®ÁöÑÊú∫Âô®Âùè‰∫ÜÔºåÂ¶ÇÁ°¨ÁõòÂùè‰∫ÜÔºåÊï∞ÊçÆ‰∏¢Â§±‰∫ÜÔºåÂèØ‰ª•Êñ∞Â¢û‰∏ÄÂè∞Êú∫Âô®ÔºåÁÑ∂Âêé‰ªéÂÖ∂‰ªñÊ≠£Â∏∏ÁöÑÊú∫Âô®ÊääÂ§á‰ªΩÁöÑÊï∞ÊçÆÂêåÊ≠•ËøáÊù•„ÄÇ Âú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠Ôºå‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ„ÄÅÂèØÁî®ÊÄßÔºàAvailabilityÔºâÂíåÂàÜÂå∫ÂÆπÂøçÊÄßÔºàPartition ToleranceÔºâ3 ‰∏™Ë¶ÅÁ¥†ÊúÄÂ§öÂè™ËÉΩÂêåÊó∂Êª°Ë∂≥‰∏§‰∏™Ôºå‰∏çÂèØÂÖºÂæó„ÄÇÂÖ∂‰∏≠ÔºåÂàÜÂå∫ÂÆπÂøçÊÄßÂèàÊòØ‰∏çÂèØÊàñÁº∫ÁöÑ„ÄÇ CA(ÊîæÂºÉP)ÔºöÂ∞ÜÊâÄÊúâÁöÑÊï∞ÊçÆÊîæÂú®‰∏Ä‰∏™ËäÇÁÇπ„ÄÇÊª°Ë∂≥‰∏ÄËá¥ÊÄß„ÄÅÂèØÁî®ÊÄß„ÄÇÊØîÂ¶Ç‰º†ÁªüÁöÑÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì„ÄÇ AP(ÊîæÂºÉC)ÔºöÊîæÂºÉÂº∫‰∏ÄËá¥ÊÄßÔºåÁî®ÊúÄÁªà‰∏ÄËá¥ÊÄßÊù•‰øùËØÅ„ÄÇÊØîÂ¶ÇZookeeper„ÄÇ CP(ÊîæÂºÉA)Ôºö‰∏ÄÊó¶Á≥ªÁªüÈÅáÂà∞ÊïÖÈöúÔºåÂèóÂà∞ÂΩ±ÂìçÁöÑÊúçÂä°Âô®ÈúÄË¶ÅÁ≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥ÔºåÂú®ÊÅ¢Â§çÊúüÈó¥Êó†Ê≥ïÂØπÂ§ñÊèê‰æõÊúçÂä°„ÄÇÊØîÂ¶ÇRedisÁ≠â„ÄÇ CAPÁêÜËÆ∫‰∏æ‰æãÔºö Êúâ3Âè∞Êú∫Âô®ÂàÜÂà´Êúâ3‰∏™Êï∞ÊçÆÂ∫ìÂàÜÂà´Êúâ‰∏§Âº†Ë°®,Êï∞ÊçÆÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑ Machine1-db1-tbl_person„ÄÅtbl_order Machine2-db2-tbl_person„ÄÅtbl_order Machine3-db3-tbl_person„ÄÅtbl_order 1ÔºâÂΩìÂêëmachine1ÁöÑdb1ÁöÑË°®tbl_person„ÄÅtbl_orderÊèíÂÖ•Êï∞Êï∞ÊçÆÊó∂ÔºåÂêåÊó∂Ë¶ÅÊääÊèíÂÖ•ÁöÑÊï∞ÊçÆÂêåÊ≠•Âà∞machine2„ÄÅmachine3ÔºåËøôÂ∞±ÊòØ‰∏ÄËá¥ÊÄß„ÄÇ 2ÔºâÂΩìÂÖ∂‰∏≠ÁöÑ‰∏ÄÂè∞Êú∫Âô®ÂÆïÊú∫‰∫ÜÔºåÂèØ‰ª•ÁªßÁª≠ÂØπÂ§ñÊèê‰æõÊúçÂä°ÔºåÊääÂÆïÊú∫ÁöÑÊú∫Âô®ÈáçÊñ∞ÂêØÂä®Ëµ∑Êù•ÂèØ‰ª•ÁªßÁª≠ÊúçÂä°ÔºåËøôÂ∞±ÊòØÂèØÁî®ÊÄß„ÄÇ 3ÔºâÂΩìmachine1ÁöÑÊú∫Âô®Âùè‰∫ÜÔºåÊï∞ÊçÆÂÖ®ÈÉ®‰∏¢Â§±‰∫ÜÔºå‰∏ç‰ºöÊúâ‰ªª‰ΩïÈóÆÈ¢òÔºåÂõ†‰∏∫machine2Âíåmachine3‰∏äËøòÊúâÊï∞ÊçÆÔºåÈáçÊñ∞Âä†‰∏ÄÂè∞Êú∫Âô®machine4ÔºåÊäämachine2Âíåmachine3ÂÖ∂‰∏≠‰∏ÄÂè∞Êú∫Âô®ÁöÑÂ§á‰ªΩÊï∞ÊçÆÂêåÊ≠•ËøáÊù•Â∞±ÂèØ‰ª•‰∫ÜÔºåËøôÂ∞±ÊòØÂàÜÂå∫ÂÆπÈîôÊÄß„ÄÇ ‰∏∫‰ªÄ‰πà‰∏â‰∏™‰∏çËÉΩÂêåÊó∂Êª°Ë∂≥? ËôΩÁÑ∂ CAP ÁêÜËÆ∫ÂÆö‰πâÊòØ‰∏â‰∏™Ë¶ÅÁ¥†‰∏≠Âè™ËÉΩÂèñ‰∏§‰∏™Ôºå‰ΩÜÊîæÂà∞ÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÊù•ÊÄùËÄÉÔºå‰ºöÂèëÁé∞ÂøÖÈ°ªÈÄâÊã© PÔºàÂàÜÂå∫ÂÆπÂøçÔºâË¶ÅÁ¥†ÔºåÂõ†‰∏∫ÁΩëÁªúÊú¨Ë∫´Êó†Ê≥ïÂÅöÂà∞ 100% ÂèØÈù†ÔºåÊúâÂèØËÉΩÂá∫ÊïÖÈöúÔºåÊâÄ‰ª•ÂàÜÂå∫ÊòØ‰∏Ä‰∏™ÂøÖÁÑ∂ÁöÑÁé∞Ë±°„ÄÇ Â¶ÇÊûúÈÄâÊã©‰∫Ü CAÔºà‰∏ÄËá¥ÊÄß + ÂèØÁî®ÊÄßÔºâ ËÄåÊîæÂºÉ‰∫Ü PÔºàÂàÜÂå∫ÂÆπÂøçÊÄßÔºâÔºåÈÇ£‰πàÂΩìÂèëÁîüÂàÜÂå∫Áé∞Ë±°Êó∂Ôºå‰∏∫‰∫Ü‰øùËØÅ CÔºà‰∏ÄËá¥ÊÄßÔºâÔºåÁ≥ªÁªüÈúÄË¶ÅÁ¶ÅÊ≠¢ÂÜôÂÖ•ÔºåÂΩìÊúâÂÜôÂÖ•ËØ∑Ê±ÇÊó∂ÔºåÁ≥ªÁªüËøîÂõû errorÔºà‰æãÂ¶ÇÔºåÂΩìÂâçÁ≥ªÁªü‰∏çÂÖÅËÆ∏ÂÜôÂÖ•ÔºâÔºåËøôÂèàÂíå A(ÂèØÁî®ÊÄß) ÂÜ≤Á™Å‰∫ÜÔºåÂõ†‰∏∫ AÔºàÂèØÁî®ÊÄßÔºâË¶ÅÊ±ÇËøîÂõû no error Âíå no timeout„ÄÇ Âõ†Ê≠§ÔºåÂàÜÂ∏ÉÂºèÁ≥ªÁªüÁêÜËÆ∫‰∏ä‰∏çÂèØËÉΩÈÄâÊã© CA Ôºà‰∏ÄËá¥ÊÄß + ÂèØÁî®ÊÄßÔºâÊû∂ÊûÑÔºåÂè™ËÉΩÈÄâÊã© CPÔºà‰∏ÄËá¥ÊÄß + ÂàÜÂå∫ÂÆπÂøçÊÄßÔºâ ÊàñËÄÖ AP ÔºàÂèØÁî®ÊÄß + ÂàÜÂå∫ÂÆπÂøçÊÄßÔºâÊû∂ÊûÑÔºåÂú®‰∏ÄËá¥ÊÄßÂíåÂèØÁî®ÊÄßÂÅöÊäò‰∏≠ÈÄâÊã©„ÄÇ ‰∏ªË¶ÅËß£Èáä‰∏Ä‰∏ã‰∏∫‰ªÄ‰πàÂú®Êª°Ë∂≥ÂàÜÂå∫ÂÆπÈîôÊÄßÁöÑÊù°‰ª∂‰∏ãÔºåÂèØÁî®ÊÄß‰∏é‰∏ÄËá¥ÊÄß‰∏çËÉΩÂêåÊó∂Êª°Ë∂≥„ÄÇ ‰∏ÄËá¥ÊÄßË¶ÅÊ±ÇÊâÄÊúâËäÇÁÇπÊï∞ÊçÆÈÉΩ‰∏ÄËá¥Êó∂ÂÜçÂìçÂ∫îÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÔºåÈÇ£‰πà‰∏ÄÊó¶ÂèëÁîüËäÇÁÇπÂÆïÊú∫ÊàñËÄÖÁΩëÁªúÈöîÁ¶ªÔºåÂ∞±ÈúÄË¶ÅÁ≠âÂæÖËäÇÁÇπÊÅ¢Â§çÊàñËÄÖÁΩëÁªúÊÅ¢Â§çÊàñËÄÖÈõÜÁæ§ÈáçÊñ∞Ë∞ÉÊï¥ËäÇÁÇπÊï∞ÁõÆÁ≠âÁ≠âÔºåÊâçËÉΩÊª°Ë∂≥‰∏ÄËá¥ÊÄßÔºõÂú®ËøôÊÆµÊó∂Èó¥ÔºåÊúçÂä°ÊòØ‰∏çÂèØÁî®ÁöÑ„ÄÇÁõ∏ÂèçÂ¶ÇÊûúÊÉ≥Ë¶ÅÂú®ËøôÁßçÁä∂ÊÄÅ‰∏ãÔºåÊúçÂä°ÁªßÁª≠ÂèØÁî®Ôºå‰æøÈúÄË¶ÅÁâ∫Áâ≤‰∏ÄËá¥ÊÄß„ÄÇ È°∫‰æø‰∏ÄÊèêÔºåCAPÁêÜËÆ∫‰∏≠ÊòØÂøΩÁï•ÁΩëÁªúÂª∂ËøüÔºå‰πüÂ∞±ÊòØÂΩì‰∫ãÂä°Êèê‰∫§Êó∂Ôºå‰ªéËäÇÁÇπAÂ§çÂà∂Âà∞ËäÇÁÇπBÔºå‰ΩÜÊòØÂú®Áé∞ÂÆû‰∏≠Ëøô‰∏™ÊòØÊòéÊòæ‰∏çÂèØËÉΩÁöÑÔºåÊâÄ‰ª•ÊÄª‰ºöÊúâ‰∏ÄÂÆöÁöÑÊó∂Èó¥ÊòØ‰∏ç‰∏ÄËá¥„ÄÇÂêåÊó∂CAP‰∏≠ÈÄâÊã©‰∏§‰∏™ÔºåÊØîÂ¶Ç‰Ω†ÈÄâÊã©‰∫ÜCPÔºåÂπ∂‰∏çÊòØÂè´‰Ω†ÊîæÂºÉA„ÄÇÂõ†‰∏∫PÂá∫Áé∞ÁöÑÊ¶ÇÁéáÂÆûÂú®ÊòØÂ§™Â∞è‰∫ÜÔºåÂ§ßÈÉ®ÂàÜÁöÑÊó∂Èó¥‰Ω†‰ªçÁÑ∂ÈúÄË¶Å‰øùËØÅCA„ÄÇÂ∞±ÁÆóÂàÜÂå∫Âá∫Áé∞‰∫Ü‰Ω†‰πüË¶Å‰∏∫ÂêéÊù•ÁöÑAÂÅöÂáÜÂ§áÔºåÊØîÂ¶ÇÈÄöËøá‰∏Ä‰∫õÊó•ÂøóÁöÑÊâãÊÆµÔºåÊòØÂÖ∂‰ªñÊú∫Âô®ÂõûÂ§çËá≥ÂèØÁî®„ÄÇ CAPÁêÜËÆ∫ÂëäËØâÊàë‰ª¨ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂè™ËÉΩÈÄâÊã©APÊàñËÄÖCPÔºå‰ΩÜÂÆûÈôÖ‰∏äÂπ∂‰∏çÊòØËØ¥Êï¥‰∏™Á≥ªÁªüÂè™ËÉΩÈÄâÊã©APÊàñËÄÖCPÔºåÂú® CAP ÁêÜËÆ∫ËêΩÂú∞ÂÆûË∑µÊó∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÁ≥ªÁªüÂÜÖÁöÑÊï∞ÊçÆÊåâÁÖß‰∏çÂêåÁöÑÂ∫îÁî®Âú∫ÊôØÂíåË¶ÅÊ±ÇËøõË°åÂàÜÁ±ªÔºåÊØèÁ±ªÊï∞ÊçÆÈÄâÊã©‰∏çÂêåÁöÑÁ≠ñÁï•ÔºàCP ËøòÊòØ APÔºâÔºåËÄå‰∏çÊòØÁõ¥Êé•ÈôêÂÆöÊï¥‰∏™Á≥ªÁªüÊâÄÊúâÊï∞ÊçÆÈÉΩÊòØÂêå‰∏ÄÁ≠ñÁï•„ÄÇ Âè¶Â§ñÔºåÂè™ËÉΩÈÄâÊã©CPÊàñËÄÖAPÊòØÊåáÁ≥ªÁªüÂèëÁîüÂàÜÂå∫Áé∞Ë±°Êó∂Êó†Ê≥ïÂêåÊó∂‰øùËØÅCÔºà‰∏ÄËá¥ÊÄßÔºâÂíåAÔºàÂèØÁî®ÊÄßÔºâÔºå‰ΩÜ‰∏çÊòØÊÑèÂë≥ÁùÄ‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºåÂΩìÂàÜÂå∫ÊïÖÈöúËß£ÂÜ≥ÂêéÔºåÁ≥ªÁªüËøòÊòØË¶Å‰øùÊåÅ‰øùËØÅCA„ÄÇ BASEÁêÜËÆ∫ BASE ÊòØ Basically Available(Âü∫Êú¨ÂèØÁî®)„ÄÅSoft state(ËΩØÁä∂ÊÄÅ)Âíå Eventually consistent (ÊúÄÁªà‰∏ÄËá¥ÊÄß)‰∏â‰∏™Áü≠ËØ≠ÁöÑÁº©ÂÜô„ÄÇÊòØÂØπCAP‰∏≠APÁöÑ‰∏Ä‰∏™Êâ©Â±ï Âü∫Êú¨ÂèØÁî®:ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂú®Âá∫Áé∞ÊïÖÈöúÊó∂ÔºåÂÖÅËÆ∏ÊçüÂ§±ÈÉ®ÂàÜÂèØÁî®ÂäüËÉΩÔºå‰øùËØÅÊ†∏ÂøÉÂäüËÉΩÂèØÁî®„ÄÇÊØîÂ¶ÇÊúçÂä°ÈôçÁ∫ß„ÄÅÈ°µÈù¢ÈôçÁ∫ß„ÄÇ ËΩØÁä∂ÊÄÅ:ÂÖÅËÆ∏Á≥ªÁªü‰∏≠Â≠òÂú®‰∏≠Èó¥Áä∂ÊÄÅÔºåËøô‰∏™Áä∂ÊÄÅ‰∏çÂΩ±ÂìçÁ≥ªÁªüÂèØÁî®ÊÄß„ÄÇ ËøôÈáåÁöÑ‰∏≠Èó¥Áä∂ÊÄÅÊòØÊåá‰∏çÂêåÁöÑdata replication‰πãÈó¥ÁöÑÊï∞ÊçÆÊõ¥Êñ∞ÂèØ‰ª•Âá∫Áé∞Âª∂Êó∂ÁöÑÊúÄÁªà‰∏ÄËá¥ÊÄß„ÄÇ Â¶ÇCAPÁêÜËÆ∫ÈáåÈù¢ÁöÑÁ§∫‰æãÔºåÂΩìÂêëmachine1ÁöÑdb1ÁöÑË°®tbl_person„ÄÅtbl_orderÊèíÂÖ•Êï∞Êï∞ÊçÆÊó∂ÔºåÂêåÊó∂Ë¶ÅÊääÊèíÂÖ•ÁöÑÊï∞ÊçÆÂêåÊ≠•Âà∞machine2„ÄÅmachine3ÔºåÂΩìmachine3ÁöÑÁΩëÁªúÊúâÈóÆÈ¢òÊó∂ÔºåÂêåÊ≠•Â§±Ë¥•Ôºå‰ΩÜÊòØËøá‰∏Ä‰ºöÁΩëÁªúÊÅ¢Â§ç‰∫ÜÂ∞±ÂêåÊ≠•ÊàêÂäü‰∫ÜÔºåËøô‰∏™ÂêåÊ≠•Â§±Ë¥•ÁöÑÁä∂ÊÄÅÂ∞±Áß∞‰∏∫ËΩØÁä∂ÊÄÅÔºåÂõ†‰∏∫ÊúÄÁªàËøòÊòØÂêåÊ≠•ÊàêÂäü‰∫Ü„ÄÇ ÊúÄÁªà‰∏ÄËá¥:ÊúÄÁªà‰∏ÄËá¥ÊòØÊåáÁªèËøá‰∏ÄÊÆµÊó∂Èó¥ÂêéÔºåÊâÄÊúâËäÇÁÇπÊï∞ÊçÆÈÉΩÂ∞Ü‰ºöËææÂà∞‰∏ÄËá¥„ÄÇ BASEËß£ÂÜ≥‰∫ÜCAP‰∏≠ÁêÜËÆ∫Ê≤°ÊúâÁΩëÁªúÂª∂ËøüÔºåÂú®BASE‰∏≠Áî®ËΩØÁä∂ÊÄÅÂíåÊúÄÁªà‰∏ÄËá¥Ôºå‰øùËØÅ‰∫ÜÂª∂ËøüÂêéÁöÑ‰∏ÄËá¥ÊÄß„ÄÇBASEÂíå ACID ÊòØÁõ∏ÂèçÁöÑÔºåÂÆÉÂÆåÂÖ®‰∏çÂêå‰∫éACIDÁöÑÂº∫‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºåËÄåÊòØÈÄöËøáÁâ∫Áâ≤Âº∫‰∏ÄËá¥ÊÄßÊù•Ëé∑ÂæóÂèØÁî®ÊÄßÔºåÂπ∂ÂÖÅËÆ∏Êï∞ÊçÆÂú®‰∏ÄÊÆµÊó∂Èó¥ÂÜÖÊòØ‰∏ç‰∏ÄËá¥ÁöÑÔºå‰ΩÜÊúÄÁªàËææÂà∞‰∏ÄËá¥Áä∂ÊÄÅ„ÄÇ Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÊ®°Âûã Êï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄßÊ®°ÂûãÂèØ‰ª•ÂàÜÊàê‰ª•‰∏ã 3 Á±ªÔºö Âº∫‰∏ÄËá¥ÊÄßÔºöÊï∞ÊçÆÊõ¥Êñ∞ÊàêÂäüÂêéÔºå‰ªªÊÑèÊó∂ÂàªÊâÄÊúâÂâØÊú¨‰∏≠ÁöÑÊï∞ÊçÆÈÉΩÊòØ‰∏ÄËá¥ÁöÑÔºå‰∏ÄËà¨ÈááÁî®ÂêåÊ≠•ÁöÑÊñπÂºèÂÆûÁé∞„ÄÇ Âº±‰∏ÄËá¥ÊÄßÔºöÊï∞ÊçÆÊõ¥Êñ∞ÊàêÂäüÂêéÔºåÁ≥ªÁªü‰∏çÊâøËØ∫Á´ãÂç≥ÂèØ‰ª•ËØªÂà∞ÊúÄÊñ∞ÂÜôÂÖ•ÁöÑÂÄºÔºå‰πü‰∏çÊâøËØ∫ÂÖ∑‰ΩìÂ§ö‰πÖ‰πãÂêéÂèØ‰ª•ËØªÂà∞„ÄÇ ÊúÄÁªà‰∏ÄËá¥ÊÄßÔºöÂº±‰∏ÄËá¥ÊÄßÁöÑ‰∏ÄÁßçÂΩ¢ÂºèÔºåÊï∞ÊçÆÊõ¥Êñ∞ÊàêÂäüÂêéÔºåÁ≥ªÁªü‰∏çÊâøËØ∫Á´ãÂç≥ÂèØ‰ª•ËøîÂõûÊúÄÊñ∞ÂÜôÂÖ•ÁöÑÂÄºÔºå‰ΩÜÊòØ‰øùËØÅÊúÄÁªà‰ºöËøîÂõû‰∏ä‰∏ÄÊ¨°Êõ¥Êñ∞Êìç‰ΩúÁöÑÂÄº„ÄÇ ÂàÜÂ∏ÉÂºè‰∫ãÂä° ‰ªÄ‰πàÊòØÂàÜÂ∏ÉÂºè‰∫ãÂä° ÂàÜÂ∏ÉÂºè‰∫ãÂä°Â∞±ÊòØÊåá‰∫ãÂä°ÁöÑÂèÇ‰∏éËÄÖ„ÄÅÊîØÊåÅ‰∫ãÂä°ÁöÑÊúçÂä°Âô®„ÄÅËµÑÊ∫êÊúçÂä°Âô®‰ª•Âèä‰∫ãÂä°ÁÆ°ÁêÜÂô®ÂàÜÂà´‰Ωç‰∫é‰∏çÂêåÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªüÁöÑ‰∏çÂêåËäÇÁÇπ‰πã‰∏ä„ÄÇÁÆÄÂçïÁöÑËØ¥ÔºåÂ∞±ÊòØ‰∏ÄÊ¨°Â§ßÁöÑÊìç‰ΩúÁî±‰∏çÂêåÁöÑÂ∞èÊìç‰ΩúÁªÑÊàêÔºåËøô‰∫õÂ∞èÁöÑÊìç‰ΩúÂàÜÂ∏ÉÂú®‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÔºå‰∏îÂ±û‰∫é‰∏çÂêåÁöÑÂ∫îÁî®ÔºåÂàÜÂ∏ÉÂºè‰∫ãÂä°ÈúÄË¶Å‰øùËØÅËøô‰∫õÂ∞èÊìç‰ΩúË¶Å‰πàÂÖ®ÈÉ®ÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•„ÄÇÊú¨Ë¥®‰∏äÊù•ËØ¥ÔºåÂàÜÂ∏ÉÂºè‰∫ãÂä°Â∞±ÊòØ‰∏∫‰∫Ü‰øùËØÅ‰∏çÂêåÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆ‰∏ÄËá¥ÊÄß„ÄÇ ‰∏æ‰∏™‰∫íËÅîÁΩëÂ∏∏Áî®ÁöÑ‰∫§Êòì‰∏öÂä°‰∏∫‰æãÔºö ‰∏äÂõæ‰∏≠ÂåÖÂê´‰∫ÜÂ∫ìÂ≠òÂíåËÆ¢Âçï‰∏§‰∏™Áã¨Á´ãÁöÑÂæÆÊúçÂä°ÔºåÊØè‰∏™ÂæÆÊúçÂä°Áª¥Êä§‰∫ÜËá™Â∑±ÁöÑÊï∞ÊçÆÂ∫ì„ÄÇÂú®‰∫§ÊòìÁ≥ªÁªüÁöÑ‰∏öÂä°ÈÄªËæë‰∏≠Ôºå‰∏Ä‰∏™ÂïÜÂìÅÂú®‰∏ãÂçï‰πãÂâçÈúÄË¶ÅÂÖàË∞ÉÁî®Â∫ìÂ≠òÊúçÂä°ÔºåËøõË°åÊâ£Èô§Â∫ìÂ≠òÔºåÂÜçË∞ÉÁî®ËÆ¢ÂçïÊúçÂä°ÔºåÂàõÂª∫ËÆ¢ÂçïËÆ∞ÂΩï„ÄÇ ÂèØ‰ª•ÁúãÂà∞ÔºåÂ¶ÇÊûúÂ§ö‰∏™Êï∞ÊçÆÂ∫ì‰πãÈó¥ÁöÑÊï∞ÊçÆÊõ¥Êñ∞Ê≤°Êúâ‰øùËØÅ‰∫ãÂä°ÔºåÂ∞Ü‰ºöÂØºËá¥Âá∫Áé∞Â≠êÁ≥ªÁªüÊï∞ÊçÆ‰∏ç‰∏ÄËá¥Ôºå‰∏öÂä°Âá∫Áé∞ÈóÆÈ¢ò„ÄÇ ÂàÜÂ∏ÉÂºè‰∫ãÂä°Ëß£ÂÜ≥ÊñπÊ°à 2PC 2PC = Two Phase commit ‰∫åÈò∂ÊÆµÊèê‰∫§ÔºàRDBMSÔºàÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªüÔºâÁªèÂ∏∏Â∞±ÊòØËøôÁßçÊú∫Âà∂Ôºå‰øùËØÅÂº∫‰∏ÄËá¥ÊÄßÔºâ„ÄÇ Âú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÔºåÊØè‰∏™ËäÇÁÇπËôΩÁÑ∂ÂèØ‰ª•Áü•ÊôìËá™Â∑±ÁöÑÊìç‰ΩúÊó∂ÊàêÂäüÊàñËÄÖÂ§±Ë¥•ÔºåÂç¥Êó†Ê≥ïÁü•ÈÅìÂÖ∂‰ªñËäÇÁÇπÁöÑÊìç‰ΩúÁöÑÊàêÂäüÊàñÂ§±Ë¥•„ÄÇÂΩì‰∏Ä‰∏™‰∫ãÂä°Ë∑®Ë∂äÂ§ö‰∏™ËäÇÁÇπÊó∂Ôºå‰∏∫‰∫Ü‰øùÊåÅ‰∫ãÂä°ÁöÑACIDÁâπÊÄßÔºåÈúÄË¶ÅÂºïÂÖ•‰∏Ä‰∏™‰Ωú‰∏∫ÂçèË∞ÉËÄÖÁöÑÁªÑ‰ª∂Êù•Áªü‰∏ÄÊéåÊéßÊâÄÊúâËäÇÁÇπÔºàÁß∞‰ΩúÂèÇ‰∏éËÄÖÔºâÁöÑÊìç‰ΩúÁªìÊûúÂπ∂ÊúÄÁªàÊåáÁ§∫Ëøô‰∫õËäÇÁÇπÊòØÂê¶Ë¶ÅÊääÊìç‰ΩúÁªìÊûúËøõË°åÁúüÊ≠£ÁöÑÊèê‰∫§„ÄÇ ÁÆóÊ≥ïÊÄùË∑Ø ÂèÇ‰∏éËÄÖÂ∞ÜÊìç‰ΩúÊàêË¥•ÈÄöÁü•ÂçèË∞ÉËÄÖÔºåÂÜçÁî±ÂçèË∞ÉËÄÖÊ†πÊçÆÊâÄÊúâÂèÇ‰∏éËÄÖÁöÑÂèçÈ¶àÊÉÖÊä•ÂÜ≥ÂÆöÂêÑÂèÇ‰∏éËÄÖÊòØÂê¶Ë¶ÅÊèê‰∫§Êìç‰ΩúËøòÊòØ‰∏≠Ê≠¢Êìç‰Ωú„ÄÇ Ê†∏ÂøÉÊÄùÊÉ≥ ÂØπÊØè‰∏Ä‰∏™‰∫ãÂä°ÈÉΩÈááÁî®ÂÖàÂ∞ùËØïÂêéÊèê‰∫§ÁöÑÂ§ÑÁêÜÊñπÂºèÔºåÂ§ÑÁêÜÂêéÊâÄÊúâÁöÑËØªÊìç‰ΩúÈÉΩË¶ÅËÉΩËé∑ÂæóÊúÄÊñ∞ÁöÑÊï∞ÊçÆÔºåÂõ†Ê≠§‰πüÂèØ‰ª•Â∞Ü‰∫åÈò∂ÊÆµÊèê‰∫§Áúã‰ΩúÊòØ‰∏Ä‰∏™Âº∫‰∏ÄËá¥ÊÄßÁÆóÊ≥ï„ÄÇ Â§ÑÁêÜÊµÅÁ®ã &lt;font color=&quot;green&quot;&gt;Èò∂ÊÆµ1ÔºöÊèê‰∫§‰∫ãÂä°ËØ∑Ê±ÇÔºàÊäïÁ•®Èò∂ÊÆµÔºâËØ¢ÈóÆÊòØÂê¶ÂèØ‰ª•Êèê‰∫§‰∫ãÂä°&lt;/font&gt; Ëøõ‰∏ÄÊ≠•Â∞ÜÂáÜÂ§áÈò∂ÊÆµÂàÜ‰∏∫‰ª•‰∏ã‰∏â‰∏™Ê≠•È™§Ôºö 1ÔºâÂçèË∞ÉËÄÖËäÇÁÇπÂêëÊâÄÊúâÂèÇ‰∏éËÄÖËäÇÁÇπËØ¢ÈóÆÊòØÂê¶ÂèØ‰ª•ÊâßË°åÊèê‰∫§Êìç‰Ωú(vote)ÔºåÂπ∂ÂºÄÂßãÁ≠âÂæÖÂêÑÂèÇ‰∏éËÄÖËäÇÁÇπÁöÑÂìçÂ∫î„ÄÇ 2ÔºâÂèÇ‰∏éËÄÖËäÇÁÇπÊâßË°åËØ¢ÈóÆÂèëËµ∑‰∏∫Ê≠¢ÁöÑÊâÄÊúâ‰∫ãÂä°Êìç‰ΩúÔºåÂπ∂Â∞ÜUndo‰ø°ÊÅØÂíåRedo‰ø°ÊÅØÂÜôÂÖ•Êó•Âøó„ÄÇÔºàÊ≥®ÊÑèÔºöËã•ÊàêÂäüËøôÈáåÂÖ∂ÂÆûÊØè‰∏™ÂèÇ‰∏éËÄÖÂ∑≤ÁªèÊâßË°å‰∫Ü‰∫ãÂä°Êìç‰ΩúÔºâ 3ÔºâÂêÑÂèÇ‰∏éËÄÖËäÇÁÇπÂìçÂ∫îÂçèË∞ÉËÄÖËäÇÁÇπÂèëËµ∑ÁöÑËØ¢ÈóÆ„ÄÇÂ¶ÇÊûúÂèÇ‰∏éËÄÖËäÇÁÇπÁöÑ‰∫ãÂä°Êìç‰ΩúÂÆûÈôÖÊâßË°åÊàêÂäüÔºåÂàôÂÆÉËøîÂõû‰∏Ä‰∏™&quot;ÂêåÊÑè&quot;Ê∂àÊÅØÔºõÂ¶ÇÊûúÂèÇ‰∏éËÄÖËäÇÁÇπÁöÑ‰∫ãÂä°Êìç‰ΩúÂÆûÈôÖÊâßË°åÂ§±Ë¥•ÔºåÂàôÂÆÉËøîÂõû‰∏Ä‰∏™&quot;‰∏≠Ê≠¢&quot;Ê∂àÊÅØ„ÄÇ &lt;font color=&quot;green&quot;&gt;Èò∂ÊÆµ2ÔºöÊâßË°å‰∫ãÂä°Êèê‰∫§Ôºàcommit„ÄÅrollbackÔºâ ÁúüÊ≠£ÁöÑÊèê‰∫§‰∫ãÂä°&lt;/font&gt; Â¶ÇÊûúÂçèË∞ÉËÄÖÊî∂Âà∞‰∫ÜÂèÇ‰∏éËÄÖÁöÑÂ§±Ë¥•Ê∂àÊÅØÊàñËÄÖË∂ÖÊó∂ÔºåÁõ¥Êé•ÁªôÊØè‰∏™ÂèÇ‰∏éËÄÖÂèëÈÄÅÂõûÊªö(Rollback)Ê∂àÊÅØÔºõ Âê¶ÂàôÔºåÂèëÈÄÅÊèê‰∫§(Commit)Ê∂àÊÅØÔºõÂèÇ‰∏éËÄÖÊ†πÊçÆÂçèË∞ÉËÄÖÁöÑÊåá‰ª§ÊâßË°åÊèê‰∫§ÊàñËÄÖÂõûÊªöÊìç‰ΩúÔºåÈáäÊîæÊâÄÊúâ‰∫ãÂä°Â§ÑÁêÜËøáÁ®ã‰∏≠‰ΩøÁî®ÁöÑÈîÅËµÑÊ∫ê„ÄÇ(Ê≥®ÊÑè:ÂøÖÈ°ªÂú®ÊúÄÂêéÈò∂ÊÆµÈáäÊîæÈîÅËµÑÊ∫ê)„ÄÇ &lt;font color=&quot;blue&quot;&gt;ÂΩìÂçèË∞ÉËÄÖËäÇÁÇπ‰ªéÊâÄÊúâÂèÇ‰∏éËÄÖËäÇÁÇπËé∑ÂæóÁöÑÂìçÂ∫îÊ∂àÊÅØÈÉΩ‰∏∫&quot;ÂêåÊÑè&quot;Êó∂:&lt;/font&gt; 1ÔºâÂçèË∞ÉËÄÖËäÇÁÇπÂêëÊâÄÊúâÂèÇ‰∏éËÄÖËäÇÁÇπÂèëÂá∫&quot;Ê≠£ÂºèÊèê‰∫§(commit)&quot;ÁöÑËØ∑Ê±Ç„ÄÇ 2ÔºâÂèÇ‰∏éËÄÖËäÇÁÇπÊ≠£ÂºèÂÆåÊàêÊìç‰ΩúÔºåÂπ∂ÈáäÊîæÂú®Êï¥‰∏™‰∫ãÂä°ÊúüÈó¥ÂÜÖÂç†Áî®ÁöÑËµÑÊ∫ê„ÄÇ 3ÔºâÂèÇ‰∏éËÄÖËäÇÁÇπÂêëÂçèË∞ÉËÄÖËäÇÁÇπÂèçÈ¶àack(Â∫îÁ≠î)&quot;ÂÆåÊàê&quot;Ê∂àÊÅØ„ÄÇ 4ÔºâÂçèË∞ÉËÄÖËäÇÁÇπÊî∂Âà∞ÊâÄÊúâÂèÇ‰∏éËÄÖËäÇÁÇπÂèçÈ¶àÁöÑackÂ∫îÁ≠î&quot;ÂÆåÊàê&quot;Ê∂àÊÅØÂêéÔºåÂÆåÊàê‰∫ãÂä°„ÄÇ &lt;font color=&quot;blue&quot;&gt;Â¶ÇÊûú‰ªª‰∏ÄÂèÇ‰∏éËÄÖËäÇÁÇπÂú®Á¨¨‰∏ÄÈò∂ÊÆµËøîÂõûÁöÑÂìçÂ∫îÊ∂àÊÅØ‰∏∫&quot;‰∏≠Ê≠¢&quot;ÔºåÊàñËÄÖ ÂçèË∞ÉËÄÖËäÇÁÇπÂú®Á¨¨‰∏ÄÈò∂ÊÆµÁöÑËØ¢ÈóÆË∂ÖÊó∂‰πãÂâçÊó†Ê≥ïËé∑ÂèñÊâÄÊúâÂèÇ‰∏éËÄÖËäÇÁÇπÁöÑÂìçÂ∫îÊ∂àÊÅØÊó∂Ôºö&lt;/font&gt; 1ÔºâÂçèË∞ÉËÄÖËäÇÁÇπÂêëÊâÄÊúâÂèÇ‰∏éËÄÖËäÇÁÇπÂèëÂá∫&quot;ÂõûÊªöÊìç‰Ωú(rollback)&quot;ÁöÑËØ∑Ê±Ç„ÄÇ 2ÔºâÂèÇ‰∏éËÄÖËäÇÁÇπÂà©Áî®‰πãÂâçÂÜôÂÖ•ÁöÑUndo‰ø°ÊÅØÊâßË°åÂõûÊªöÔºåÂπ∂ÈáäÊîæÂú®Êï¥‰∏™‰∫ãÂä°ÊúüÈó¥ÂÜÖÂç†Áî®ÁöÑËµÑÊ∫ê„ÄÇ 3ÔºâÂèÇ‰∏éËÄÖËäÇÁÇπÂêëÂçèË∞ÉËÄÖËäÇÁÇπÂèëÈÄÅ&quot;ÂõûÊªöÂÆåÊàê&quot;Ê∂àÊÅØ„ÄÇ 4ÔºâÂçèË∞ÉËÄÖËäÇÁÇπÊî∂Âà∞ÊâÄÊúâÂèÇ‰∏éËÄÖËäÇÁÇπÂèçÈ¶àÁöÑ&quot;ÂõûÊªöÂÆåÊàê&quot;Ê∂àÊÅØÂêéÔºåÂèñÊ∂à‰∫ãÂä°„ÄÇ &lt;font color=&quot;red&quot;&gt;‰∏çÁÆ°ÊúÄÂêéÁªìÊûúÂ¶Ç‰ΩïÔºåÁ¨¨‰∫åÈò∂ÊÆµÈÉΩ‰ºöÁªìÊùüÂΩìÂâç‰∫ãÂä°„ÄÇ&lt;/font&gt; Â≠òÂú®ÁöÑÈóÆÈ¢ò 1„ÄÅÂêåÊ≠•ÈòªÂ°ûÈóÆÈ¢ò„ÄÇÊâßË°åËøáÁ®ã‰∏≠ÔºåÊâÄÊúâÂèÇ‰∏éËäÇÁÇπÈÉΩÊòØ‰∫ãÂä°ÈòªÂ°ûÂûãÁöÑ„ÄÇÂΩìÂèÇ‰∏éËÄÖÂç†ÊúâÂÖ¨ÂÖ±ËµÑÊ∫êÊó∂ÔºåÂÖ∂‰ªñÁ¨¨‰∏âÊñπËäÇÁÇπËÆøÈóÆÂÖ¨ÂÖ±ËµÑÊ∫ê‰∏çÂæó‰∏çÂ§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅ„ÄÇ 2„ÄÅÂçïÁÇπÊïÖÈöú„ÄÇÁî±‰∫éÂçèË∞ÉËÄÖÁöÑÈáçË¶ÅÊÄßÔºå‰∏ÄÊó¶ÂçèË∞ÉËÄÖÂèëÁîüÊïÖÈöú„ÄÇÂèÇ‰∏éËÄÖ‰ºö‰∏ÄÁõ¥ÈòªÂ°û‰∏ãÂéª„ÄÇÂ∞§ÂÖ∂Âú®Á¨¨‰∫åÈò∂ÊÆµÔºåÂçèË∞ÉËÄÖÂèëÁîüÊïÖÈöúÔºåÈÇ£‰πàÊâÄÊúâÁöÑÂèÇ‰∏éËÄÖËøòÈÉΩÂ§Ñ‰∫éÈîÅÂÆö‰∫ãÂä°ËµÑÊ∫êÁöÑÁä∂ÊÄÅ‰∏≠ÔºåËÄåÊó†Ê≥ïÁªßÁª≠ÂÆåÊàê‰∫ãÂä°Êìç‰Ωú„ÄÇÔºàÂ¶ÇÊûúÊòØÂçèË∞ÉËÄÖÊåÇÊéâÔºåÂèØ‰ª•ÈáçÊñ∞ÈÄâ‰∏æ‰∏Ä‰∏™ÂçèË∞ÉËÄÖÔºå‰ΩÜÊòØÊó†Ê≥ïËß£ÂÜ≥Âõ†‰∏∫ÂçèË∞ÉËÄÖÂÆïÊú∫ÂØºËá¥ÁöÑÂèÇ‰∏éËÄÖÂ§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÁöÑÈóÆÈ¢òÔºâ 3„ÄÅÊï∞ÊçÆ‰∏ç‰∏ÄËá¥„ÄÇÂú®‰∫åÈò∂ÊÆµÊèê‰∫§ÁöÑÈò∂ÊÆµ‰∫å‰∏≠ÔºåÂΩìÂçèË∞ÉËÄÖÂêëÂèÇ‰∏éËÄÖÂèëÈÄÅcommitËØ∑Ê±Ç‰πãÂêéÔºåÂèëÁîü‰∫ÜÂ±ÄÈÉ®ÁΩëÁªúÂºÇÂ∏∏ÊàñËÄÖÂú®ÂèëÈÄÅcommitËØ∑Ê±ÇËøáÁ®ã‰∏≠ÂçèË∞ÉËÄÖÂèëÁîü‰∫ÜÊïÖÈöúÔºåËøô‰ºöÂØºËá¥Âè™Êúâ‰∏ÄÈÉ®ÂàÜÂèÇ‰∏éËÄÖÊé•ÂèóÂà∞‰∫ÜcommitËØ∑Ê±Ç„ÄÇËÄåÂú®ËøôÈÉ®ÂàÜÂèÇ‰∏éËÄÖÊé•Âà∞commitËØ∑Ê±Ç‰πãÂêéÂ∞±‰ºöÊâßË°åcommitÊìç‰Ωú„ÄÇ‰ΩÜÊòØÂÖ∂‰ªñÊú™Êé•Âà∞commitËØ∑Ê±ÇÁöÑÊú∫Âô®ÂàôÊó†Ê≥ïÊâßË°å‰∫ãÂä°Êèê‰∫§„ÄÇ‰∫éÊòØÊï¥‰∏™ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰æøÂá∫Áé∞‰∫ÜÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÊÄßÁöÑÁé∞Ë±°„ÄÇ 4„ÄÅ‰∫åÈò∂ÊÆµÊó†Ê≥ïËß£ÂÜ≥ÁöÑÈóÆÈ¢òÔºöÂçèË∞ÉËÄÖÂÜçÂèëÂá∫commitÊ∂àÊÅØ‰πãÂêéÂÆïÊú∫ÔºåËÄåÂîØ‰∏ÄÊé•Êî∂Âà∞ËøôÊù°Ê∂àÊÅØÁöÑÂèÇ‰∏éËÄÖÂêåÊó∂‰πüÂÆïÊú∫‰∫Ü„ÄÇÈÇ£‰πàÂç≥‰ΩøÂçèË∞ÉËÄÖÈÄöËøáÈÄâ‰∏æÂçèËÆÆ‰∫ßÁîü‰∫ÜÊñ∞ÁöÑÂçèË∞ÉËÄÖÔºåËøôÊù°‰∫ãÂä°ÁöÑÁä∂ÊÄÅ‰πüÊòØ‰∏çÁ°ÆÂÆöÁöÑÔºåÊ≤°‰∫∫Áü•ÈÅì‰∫ãÂä°ÊòØÂê¶Ë¢´Â∑≤ÁªèÊèê‰∫§„ÄÇ &lt;font color=&quot;red&quot;&gt;ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºöÂú®ÂÖ®Â±Ä‰∫ãÂä°ÂÜ≥ÂÆöÂõûÊªöÊó∂ÔºåÁõ¥Êé•ÈÄê‰∏™ÂèëÈÄÅrollbackËØ∑Ê±ÇÂç≥ÂèØÔºå‰∏çÂøÖÂàÜÈò∂ÊÆµ„ÄÇ&lt;/font&gt; 2PCÊú∫Âà∂ÈúÄË¶ÅRMÊèê‰æõÂ∫ïÂ±ÇÊîØÊåÅÔºà‰∏ÄËà¨ÊòØÂÖºÂÆπXAÔºâ„ÄÇÂ¶ÇÊûú‰ΩøÁî®JavaÔºåÈÇ£‰πàÂèØ‰ª•‰ΩøÁî®ÂºÄÊ∫êËΩØ‰ª∂ atomikos ÊàñËÄÖJOTMÊù•Âø´ÈÄüÂÆûÁé∞Ôºå‰∏§ËÄÖÈÉΩÊîØÊåÅspring‰∫ãÂä°Êï¥Âêà„ÄÇ 3PC 3PC = Three Phase commit ‰∏âÈò∂ÊÆµÊèê‰∫§ Áî±‰∫é‰∫åÈò∂ÊÆµÊèê‰∫§Â≠òÂú®ÁùÄËØ∏Â¶ÇÂêåÊ≠•ÈòªÂ°û„ÄÅÂçïÁÇπÈóÆÈ¢ò„ÄÅËÑëË£ÇÁ≠âÁº∫Èô∑ÔºåÊâÄ‰ª•ÔºåÂú®‰∫åÈò∂ÊÆµÊèê‰∫§ÁöÑÂü∫Á°Ä‰∏äÂÅö‰∫ÜÊîπËøõÔºåÊèêÂá∫‰∫Ü‰∏âÈò∂ÊÆµÊèê‰∫§„ÄÇ ‰∏é‰∏§Èò∂ÊÆµÊèê‰∫§‰∏çÂêåÁöÑÊòØÔºå‰∏âÈò∂ÊÆµÊèê‰∫§Êúâ‰∏§‰∏™ÊîπÂä®ÁÇπÔºö 1„ÄÅÂºïÂÖ•Ë∂ÖÊó∂Êú∫Âà∂„ÄÇÂêåÊó∂Âú®ÂçèË∞ÉËÄÖÂíåÂèÇ‰∏éËÄÖ‰∏≠ÈÉΩÂºïÂÖ•Ë∂ÖÊó∂Êú∫Âà∂„ÄÇ 2„ÄÅÂ∞Ü‰∫åÈò∂ÊÆµÁöÑÂáÜÂ§áÈò∂ÊÆµÊãÜÂàÜ‰∏∫2‰∏™Èò∂ÊÆµÔºåÊèíÂÖ•‰∫Ü‰∏Ä‰∏™preCommitÈò∂ÊÆµÔºå‰ΩøÂæóÂéüÂÖàÂú®‰∫åÈò∂ÊÆµÊèê‰∫§‰∏≠ÔºåÂèÇ‰∏éËÄÖÂú®ÂáÜÂ§á‰πãÂêéÔºåÁî±‰∫éÂçèË∞ÉËÄÖÂèëÁîüÂ¥©Ê∫ÉÊàñÈîôËØØÔºåËÄåÂØºËá¥ÂèÇ‰∏éËÄÖÂ§Ñ‰∫éÊó†Ê≥ïÁü•ÊôìÊòØÂê¶Êèê‰∫§ÊàñËÄÖ‰∏≠Ê≠¢ÁöÑ‚Äú‰∏çÁ°ÆÂÆöÁä∂ÊÄÅ‚ÄùÊâÄ‰∫ßÁîüÁöÑÂèØËÉΩÁõ∏ÂΩìÈïøÁöÑÂª∂Êó∂ÁöÑÈóÆÈ¢òÂæó‰ª•Ëß£ÂÜ≥„ÄÇ‰øùËØÅ‰∫ÜÂú®ÊúÄÂêéÊèê‰∫§Èò∂ÊÆµ‰πãÂâçÂêÑÂèÇ‰∏éËäÇÁÇπÁöÑÁä∂ÊÄÅÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ Â§ÑÁêÜÊµÅÁ®ã &lt;font color=&quot;green&quot;&gt;Èò∂ÊÆµ1ÔºöCanCommitÈò∂ÊÆµÔºåÊòØÂê¶Êèê‰∫§-ËØ¢ÈóÆÊòØÂê¶ÂèØ‰ª•ÂÅö‰∫ãÂä°Êèê‰∫§&lt;/font&gt; ‰∫ãÂä°ËØ¢ÈóÆÔºöÂçèË∞ÉËÄÖÂêëÂèÇ‰∏éËÄÖÂèëÈÄÅCanCommitËØ∑Ê±Ç„ÄÇËØ¢ÈóÆÊòØÂê¶ÂèØ‰ª•ÊâßË°å‰∫ãÂä°Êèê‰∫§Êìç‰Ωú„ÄÇÁÑ∂ÂêéÂºÄÂßãÁ≠âÂæÖÂèÇ‰∏éËÄÖÁöÑÂìçÂ∫î„ÄÇ ÂìçÂ∫îÂèçÈ¶àÔºöÂèÇ‰∏éËÄÖÊé•Âà∞CanCommitËØ∑Ê±Ç‰πãÂêéÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÂÖ∂Ëá™Ë∫´ËÆ§‰∏∫ÂèØ‰ª•È°∫Âà©ÊâßË°å‰∫ãÂä°ÔºåÂàôËøîÂõûYesÂìçÂ∫îÔºåÂπ∂ËøõÂÖ•È¢ÑÂ§áÁä∂ÊÄÅ„ÄÇÂê¶ÂàôÂèçÈ¶àNo„ÄÇ &lt;font color=&quot;green&quot;&gt;Èò∂ÊÆµ2ÔºöPreCommitÈò∂ÊÆµÔºåÈ¢ÑÂÖàÊèê‰∫§-È¢ÑÂÖàÊèê‰∫§‰∫ãÂä°&lt;/font&gt; &lt;font color=&quot;blue&quot;&gt;ÂÅáÂ¶ÇÂçèË∞ÉËÄÖ‰ªéÊâÄÊúâÁöÑÂèÇ‰∏éËÄÖËé∑ÂæóÁöÑÂèçÈ¶àÈÉΩÊòØYesÂìçÂ∫îÔºåÈÇ£‰πàÂ∞±‰ºöÊâßË°å‰∫ãÂä°ÁöÑÈ¢ÑÊâßË°å„ÄÇ&lt;/font&gt; ÂèëÈÄÅÈ¢ÑÊèê‰∫§ËØ∑Ê±ÇÔºöÂçèË∞ÉËÄÖÂêëÂèÇ‰∏éËÄÖÂèëÈÄÅPreCommitËØ∑Ê±ÇÔºåÂπ∂ËøõÂÖ•PreparedÈò∂ÊÆµ„ÄÇ ‰∫ãÂä°È¢ÑÊèê‰∫§ÔºöÂèÇ‰∏éËÄÖÊé•Êî∂Âà∞PreCommitËØ∑Ê±ÇÂêéÔºå‰ºöÊâßË°å‰∫ãÂä°Êìç‰ΩúÔºåÂπ∂Â∞ÜundoÂíåredo‰ø°ÊÅØËÆ∞ÂΩïÂà∞‰∫ãÂä°Êó•Âøó‰∏≠„ÄÇ ÂìçÂ∫îÂèçÈ¶àÔºöÂ¶ÇÊûúÂèÇ‰∏éËÄÖÊàêÂäüÁöÑÊâßË°å‰∫Ü‰∫ãÂä°Êìç‰ΩúÔºåÂàôËøîÂõûACKÂìçÂ∫îÔºåÂêåÊó∂ÂºÄÂßãÁ≠âÂæÖÊúÄÁªàÊåá‰ª§„ÄÇ &lt;font color=&quot;blue&quot;&gt;ÂÅáÂ¶ÇÊúâ‰ªª‰Ωï‰∏Ä‰∏™ÂèÇ‰∏éËÄÖÂêëÂçèË∞ÉËÄÖÂèëÈÄÅ‰∫ÜNoÂìçÂ∫îÔºåÊàñËÄÖÁ≠âÂæÖË∂ÖÊó∂‰πãÂêéÔºåÂçèË∞ÉËÄÖÈÉΩÊ≤°ÊúâÊé•Âà∞ÂèÇ‰∏éËÄÖÁöÑÂìçÂ∫îÔºåÈÇ£‰πàÂ∞±ÊâßË°å‰∫ãÂä°ÁöÑ‰∏≠Êñ≠„ÄÇ&lt;/font&gt; 1.ÂèëÈÄÅ‰∏≠Êñ≠ËØ∑Ê±ÇÔºöÂçèË∞ÉËÄÖÂêëÊâÄÊúâÂèÇ‰∏éËÄÖÂèëÈÄÅabortËØ∑Ê±Ç„ÄÇ 2.‰∏≠Êñ≠‰∫ãÂä°ÔºöÂèÇ‰∏éËÄÖÊî∂Âà∞Êù•Ëá™ÂçèË∞ÉËÄÖÁöÑabortËØ∑Ê±Ç‰πãÂêéÔºàÊàñË∂ÖÊó∂‰πãÂêéÔºå‰ªçÊú™Êî∂Âà∞ÂçèË∞ÉËÄÖÁöÑËØ∑Ê±ÇÔºâÔºåÊâßË°å‰∫ãÂä°ÁöÑ‰∏≠Êñ≠„ÄÇ &lt;font color=&quot;green&quot;&gt;Èò∂ÊÆµ3ÔºödoCommitÈò∂ÊÆµÔºåÊâßË°å‰∫ãÂä°Êèê‰∫§Ôºàcommit„ÄÅrollbackÔºâÁúüÊ≠£ÁöÑÊèê‰∫§‰∫ãÂä°ÊâßË°åÊèê‰∫§&lt;/font&gt; ÂèëÈÄÅÊèê‰∫§ËØ∑Ê±ÇÔºöÂçèË∞ÉËÄÖÊé•Êî∂Âà∞ÂèÇ‰∏éËÄÖÂèëÈÄÅÁöÑACKÂìçÂ∫îÔºåÈÇ£‰πà‰ªñÂ∞Ü‰ªéÈ¢ÑÊèê‰∫§Áä∂ÊÄÅËøõÂÖ•Âà∞Êèê‰∫§Áä∂ÊÄÅ„ÄÇÂπ∂ÂêëÊâÄÊúâÂèÇ‰∏éËÄÖÂèëÈÄÅdoCommitËØ∑Ê±Ç„ÄÇ ‰∫ãÂä°Êèê‰∫§ÔºöÂèÇ‰∏éËÄÖÊé•Êî∂Âà∞doCommitËØ∑Ê±Ç‰πãÂêéÔºåÊâßË°åÊ≠£ÂºèÁöÑ‰∫ãÂä°Êèê‰∫§„ÄÇÂπ∂Âú®ÂÆåÊàê‰∫ãÂä°Êèê‰∫§‰πãÂêéÈáäÊîæÊâÄÊúâ‰∫ãÂä°ËµÑÊ∫ê„ÄÇ ÂìçÂ∫îÂèçÈ¶àÔºö‰∫ãÂä°Êèê‰∫§ÂÆå‰πãÂêéÔºåÂêëÂçèË∞ÉËÄÖÂèëÈÄÅAckÂìçÂ∫î„ÄÇ ÂÆåÊàê‰∫ãÂä°ÔºöÂçèË∞ÉËÄÖÊé•Êî∂Âà∞ÊâÄÊúâÂèÇ‰∏éËÄÖÁöÑackÂìçÂ∫î‰πãÂêéÔºåÂÆåÊàê‰∫ãÂä°„ÄÇ &lt;font color=&quot;blue&quot;&gt;‰∏≠Êñ≠‰∫ãÂä° ÂçèË∞ÉËÄÖÊ≤°ÊúâÊé•Êî∂Âà∞ÂèÇ‰∏éËÄÖÂèëÈÄÅÁöÑACKÂìçÂ∫îÔºàÂèØËÉΩÊòØÊé•ÂèóËÄÖÂèëÈÄÅÁöÑ‰∏çÊòØACKÂìçÂ∫îÔºå‰πüÂèØËÉΩÂìçÂ∫îË∂ÖÊó∂ÔºâÔºåÈÇ£‰πàÂ∞±‰ºöÊâßË°å‰∏≠Êñ≠‰∫ãÂä°„ÄÇ&lt;/font&gt; ÂèëÈÄÅ‰∏≠Êñ≠ËØ∑Ê±ÇÔºöÂçèË∞ÉËÄÖÂêëÊâÄÊúâÂèÇ‰∏éËÄÖÂèëÈÄÅabortËØ∑Ê±Ç„ÄÇ ‰∫ãÂä°ÂõûÊªöÔºöÂèÇ‰∏éËÄÖÊé•Êî∂Âà∞abortËØ∑Ê±Ç‰πãÂêéÔºåÂà©Áî®ÂÖ∂Âú®Èò∂ÊÆµ‰∫åËÆ∞ÂΩïÁöÑundo‰ø°ÊÅØÊù•ÊâßË°å‰∫ãÂä°ÁöÑÂõûÊªöÊìç‰ΩúÔºåÂπ∂Âú®ÂÆåÊàêÂõûÊªö‰πãÂêéÈáäÊîæÊâÄÊúâÁöÑ‰∫ãÂä°ËµÑÊ∫ê„ÄÇ ÂèçÈ¶àÁªìÊûúÔºöÂèÇ‰∏éËÄÖÂÆåÊàê‰∫ãÂä°ÂõûÊªö‰πãÂêéÔºåÂêëÂçèË∞ÉËÄÖÂèëÈÄÅACKÊ∂àÊÅØ„ÄÇ ‰∏≠Êñ≠‰∫ãÂä°ÔºöÂçèË∞ÉËÄÖÊé•Êî∂Âà∞ÂèÇ‰∏éËÄÖÂèçÈ¶àÁöÑACKÊ∂àÊÅØ‰πãÂêéÔºåÊâßË°å‰∫ãÂä°ÁöÑ‰∏≠Êñ≠„ÄÇ &lt;p id=&quot;div-border-left-red&quot;&gt;Âú®doCommitÈò∂ÊÆµÔºåÂ¶ÇÊûúÂèÇ‰∏éËÄÖÊó†Ê≥ïÂèäÊó∂Êé•Êî∂Âà∞Êù•Ëá™ÂçèË∞ÉËÄÖÁöÑdoCommitÊàñËÄÖrebortËØ∑Ê±ÇÊó∂Ôºå‰ºöÂú®Á≠âÂæÖË∂ÖÊó∂‰πãÂêéÔºå‰ºöÁªßÁª≠ËøõË°å‰∫ãÂä°ÁöÑÊèê‰∫§„ÄÇÔºàÂÖ∂ÂÆûËøô‰∏™Â∫îËØ•ÊòØÂü∫‰∫éÊ¶ÇÁéáÊù•ÂÜ≥ÂÆöÁöÑÔºåÂΩìËøõÂÖ•Á¨¨‰∏âÈò∂ÊÆµÊó∂ÔºåËØ¥ÊòéÂèÇ‰∏éËÄÖÂú®Á¨¨‰∫åÈò∂ÊÆµÂ∑≤ÁªèÊî∂Âà∞‰∫ÜPreCommitËØ∑Ê±ÇÔºåÈÇ£‰πàÂçèË∞ÉËÄÖ‰∫ßÁîüPreCommitËØ∑Ê±ÇÁöÑÂâçÊèêÊù°‰ª∂ÊòØ‰ªñÂú®Á¨¨‰∫åÈò∂ÊÆµÂºÄÂßã‰πãÂâçÔºåÊî∂Âà∞ÊâÄÊúâÂèÇ‰∏éËÄÖÁöÑCanCommitÂìçÂ∫îÈÉΩÊòØYes„ÄÇÔºà‰∏ÄÊó¶ÂèÇ‰∏éËÄÖÊî∂Âà∞‰∫ÜPreCommitÔºåÊÑèÂë≥‰ªñÁü•ÈÅìÂ§ßÂÆ∂ÂÖ∂ÂÆûÈÉΩÂêåÊÑè‰øÆÊîπ‰∫ÜÔºâÊâÄ‰ª•Ôºå‰∏ÄÂè•ËØùÊ¶ÇÊã¨Â∞±ÊòØÔºåÂΩìËøõÂÖ•Á¨¨‰∏âÈò∂ÊÆµÊó∂ÔºåÁî±‰∫éÁΩëÁªúË∂ÖÊó∂Á≠âÂéüÂõ†ÔºåËôΩÁÑ∂ÂèÇ‰∏éËÄÖÊ≤°ÊúâÊî∂Âà∞commitÊàñËÄÖabortÂìçÂ∫îÔºå‰ΩÜÊòØ‰ªñÊúâÁêÜÁî±Áõ∏‰ø°ÔºöÊàêÂäüÊèê‰∫§ÁöÑÂá†ÁéáÂæàÂ§ß„ÄÇÔºâ&lt;/p&gt; 2PC‰∏é3PCÁöÑÂå∫Âà´ Áõ∏ÂØπ‰∫é2PCÔºå3PC‰∏ªË¶ÅËß£ÂÜ≥ÁöÑÂçïÁÇπÊïÖÈöúÈóÆÈ¢òÔºåÂπ∂ÂáèÂ∞ëÈòªÂ°ûÔºåÂõ†‰∏∫‰∏ÄÊó¶ÂèÇ‰∏éËÄÖÊó†Ê≥ïÂèäÊó∂Êî∂Âà∞Êù•Ëá™ÂçèË∞ÉËÄÖÁöÑ‰ø°ÊÅØ‰πãÂêéÔºå‰ªñ‰ºöÈªòËÆ§ÊâßË°åcommit„ÄÇËÄå‰∏ç‰ºö‰∏ÄÁõ¥ÊåÅÊúâ‰∫ãÂä°ËµÑÊ∫êÂπ∂Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅ„ÄÇ‰ΩÜÊòØËøôÁßçÊú∫Âà∂‰πü‰ºöÂØºËá¥Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢òÔºåÂõ†‰∏∫ÔºåÁî±‰∫éÁΩëÁªúÂéüÂõ†ÔºåÂçèË∞ÉËÄÖÂèëÈÄÅÁöÑabortÂìçÂ∫îÊ≤°ÊúâÂèäÊó∂Ë¢´ÂèÇ‰∏éËÄÖÊé•Êî∂Âà∞ÔºåÈÇ£‰πàÂèÇ‰∏éËÄÖÂú®Á≠âÂæÖË∂ÖÊó∂‰πãÂêéÊâßË°å‰∫ÜcommitÊìç‰Ωú„ÄÇËøôÊ†∑Â∞±ÂíåÂÖ∂‰ªñÊé•Âà∞abortÂëΩ‰ª§Âπ∂ÊâßË°åÂõûÊªöÁöÑÂèÇ‰∏éËÄÖ‰πãÈó¥Â≠òÂú®Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµ„ÄÇ ÁõÆÂâç‰∏§Èò∂ÊÆµÊèê‰∫§„ÄÅ‰∏âÈò∂ÊÆµÊèê‰∫§Â≠òÂú®Â¶Ç‰∏ãÁöÑÂ±ÄÈôêÊÄßÔºåÂπ∂‰∏çÈÄÇÂêàÂú®ÂæÆÊúçÂä°Êû∂ÊûÑ‰ΩìÁ≥ª‰∏ã‰ΩøÁî®Ôºö ÊâÄÊúâÁöÑÊìç‰ΩúÂøÖÈ°ªÊòØ‰∫ãÂä°ÊÄßËµÑÊ∫êÔºàÊØîÂ¶ÇÊï∞ÊçÆÂ∫ì„ÄÅÊ∂àÊÅØÈòüÂàó„ÄÅEJBÁªÑ‰ª∂Á≠âÔºâÔºåÂ≠òÂú®‰ΩøÁî®Â±ÄÈôêÊÄßÔºàÂæÆÊúçÂä°Êû∂ÊûÑ‰∏ãÂ§öÊï∞‰ΩøÁî®HTTPÂçèËÆÆÔºâÔºåÊØîËæÉÈÄÇÂêà‰º†ÁªüÁöÑÂçï‰ΩìÂ∫îÁî®Ôºõ Áî±‰∫éÊòØÂº∫‰∏ÄËá¥ÊÄßÔºåËµÑÊ∫êÈúÄË¶ÅÂú®‰∫ãÂä°ÂÜÖÈÉ®Á≠âÂæÖÔºåÊÄßËÉΩÂΩ±ÂìçËæÉÂ§ßÔºåÂêûÂêêÁéá‰∏çÈ´òÔºå‰∏çÈÄÇÂêàÈ´òÂπ∂Âèë‰∏éÈ´òÊÄßËÉΩÁöÑ‰∏öÂä°Âú∫ÊôØÔºõ TCC‰∫ãÂä° TCC‰∫ãÂä°Êú∫Âà∂Áõ∏ÂØπ‰∫é‰º†Áªü‰∫ãÂä°Êú∫Âà∂ÔºàX/Open XAÔºâÔºåÂÖ∂ÁâπÂæÅÂú®‰∫éÂÆÉ‰∏ç‰æùËµñËµÑÊ∫êÁÆ°ÁêÜÂô®(RM)ÂØπXAÁöÑÊîØÊåÅÔºåËÄåÊòØÈÄöËøáÂØπÔºàÁî±‰∏öÂä°Á≥ªÁªüÊèê‰æõÁöÑÔºâ‰∏öÂä°ÈÄªËæëÁöÑË∞ÉÂ∫¶Êù•ÂÆûÁé∞ÂàÜÂ∏ÉÂºè‰∫ãÂä°„ÄÇ Ëß£ÂÜ≥‰∫ÜXAÁöÑÂá†‰∏™Áº∫ÁÇπ: Ëß£ÂÜ≥‰∫ÜÂçèË∞ÉËÄÖÂçïÁÇπÔºåÁî±‰∏ª‰∏öÂä°ÊñπÂèëËµ∑Âπ∂ÂÆåÊàêËøô‰∏™‰∏öÂä°Ê¥ªÂä®„ÄÇ‰∏öÂä°Ê¥ªÂä®ÁÆ°ÁêÜÂô®‰πüÂèòÊàêÂ§öÁÇπÔºåÂºïÂÖ•ÈõÜÁæ§„ÄÇ ÂêåÊ≠•ÈòªÂ°û:ÂºïÂÖ•Ë∂ÖÊó∂ÔºåË∂ÖÊó∂ÂêéËøõË°åË°•ÂÅøÔºåÂπ∂‰∏î‰∏ç‰ºöÈîÅÂÆöÊï¥‰∏™ËµÑÊ∫êÔºåÂ∞ÜËµÑÊ∫êËΩ¨Êç¢‰∏∫‰∏öÂä°ÈÄªËæëÂΩ¢ÂºèÔºåÁ≤íÂ∫¶ÂèòÂ∞è„ÄÇ Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºåÊúâ‰∫ÜË°•ÂÅøÊú∫Âà∂‰πãÂêéÔºåÁî±‰∏öÂä°Ê¥ªÂä®ÁÆ°ÁêÜÂô®ÊéßÂà∂‰∏ÄËá¥ÊÄß „ÄÇ &lt;p id=&quot;div-border-left-red&quot;&gt;‰∏Ä‰∏™ÂÆåÊï¥ÁöÑTCC‰∏öÂä°Áî±‰∏Ä‰∏™‰∏ª‰∏öÂä°ÊúçÂä°ÂíåËã•Âπ≤‰∏™‰ªé‰∏öÂä°ÊúçÂä°ÁªÑÊàêÔºå‰∏ª‰∏öÂä°ÊúçÂä°ÂèëËµ∑Âπ∂ÂÆåÊàêÊï¥‰∏™‰∏öÂä°Ê¥ªÂä®ÔºåTCCÊ®°ÂºèË¶ÅÊ±Ç‰ªéÊúçÂä°Êèê‰æõ‰∏â‰∏™Êé•Âè£ÔºöTry„ÄÅConfirm„ÄÅCancel„ÄÇ&lt;/p&gt; &lt;p id=&quot;div-border-left-green&quot;&gt;TryÔºöÂÆåÊàêÊâÄÊúâ‰∏öÂä°Ê£ÄÊü•ÔºåÈ¢ÑÁïôÂøÖÈ°ª‰∏öÂä°ËµÑÊ∫ê„ÄÇ&lt;/p&gt; &lt;p id=&quot;div-border-left-green&quot;&gt;ConfirmÔºöÁúüÊ≠£ÊâßË°å‰∏öÂä°Ôºå‰∏ç‰Ωú‰ªª‰Ωï‰∏öÂä°Ê£ÄÊü•ÔºõÂè™‰ΩøÁî®TryÈò∂ÊÆµÈ¢ÑÁïôÁöÑ‰∏öÂä°ËµÑÊ∫êÔºõConfirmÊìç‰ΩúÊª°Ë∂≥ÂπÇÁ≠âÊÄß„ÄÇ&lt;/p&gt; &lt;p id=&quot;div-border-left-green&quot;&gt;CancelÔºöÈáäÊîæTryÈò∂ÊÆµÈ¢ÑÁïôÁöÑ‰∏öÂä°ËµÑÊ∫êÔºõCancelÊìç‰ΩúÊª°Ë∂≥ÂπÇÁ≠âÊÄß„ÄÇ&lt;/p&gt; Êï¥‰∏™TCC‰∏öÂä°ÂàÜÊàê‰∏§‰∏™Èò∂ÊÆµÂÆåÊàêÔºö &lt;span id=&quot;inline-blue&quot;&gt;Á¨¨‰∏ÄÈò∂ÊÆµÔºö&lt;/span&gt; ‰∏ª‰∏öÂä°ÊúçÂä°ÂàÜÂà´Ë∞ÉÁî®ÊâÄÊúâ‰ªé‰∏öÂä°ÁöÑtryÊìç‰ΩúÔºåÂπ∂Âú®Ê¥ªÂä®ÁÆ°ÁêÜÂô®‰∏≠ÁôªËÆ∞ÊâÄÊúâ‰ªé‰∏öÂä°ÊúçÂä°„ÄÇÂΩìÊâÄÊúâ‰ªé‰∏öÂä°ÊúçÂä°ÁöÑtryÊìç‰ΩúÈÉΩË∞ÉÁî®ÊàêÂäüÊàñËÄÖÊüê‰∏™‰ªé‰∏öÂä°ÊúçÂä°ÁöÑtryÊìç‰ΩúÂ§±Ë¥•ÔºåËøõÂÖ•Á¨¨‰∫åÈò∂ÊÆµ„ÄÇ &lt;span id=&quot;inline-blue&quot;&gt;Á¨¨‰∫åÈò∂ÊÆµÔºö&lt;/span&gt; Ê¥ªÂä®ÁÆ°ÁêÜÂô®Ê†πÊçÆÁ¨¨‰∏ÄÈò∂ÊÆµÁöÑÊâßË°åÁªìÊûúÊù•ÊâßË°åconfirmÊàñcancelÊìç‰Ωú„ÄÇÂ¶ÇÊûúÁ¨¨‰∏ÄÈò∂ÊÆµÊâÄÊúâtryÊìç‰ΩúÈÉΩÊàêÂäüÔºåÂàôÊ¥ªÂä®ÁÆ°ÁêÜÂô®Ë∞ÉÁî®ÊâÄÊúâ‰ªé‰∏öÂä°Ê¥ªÂä®ÁöÑconfirmÊìç‰Ωú„ÄÇÂê¶ÂàôË∞ÉÁî®ÊâÄÊúâ‰ªé‰∏öÂä°ÊúçÂä°ÁöÑcancelÊìç‰Ωú„ÄÇ &lt;span id=&quot;inline-purple&quot;&gt;‰∏é2PCÊØîËæÉÔºö&lt;/span&gt; ‰Ωç‰∫é‰∏öÂä°ÊúçÂä°Â±ÇËÄåÈùûËµÑÊ∫êÂ±Ç„ÄÇ Ê≤°ÊúâÂçïÁã¨ÁöÑÂáÜÂ§áÔºàprepareÔºâÈò∂ÊÆµÔºåTryÊìç‰ΩúÂÖºÂ§áËµÑÊ∫êÊìç‰Ωú‰∏éÂáÜÂ§áËÉΩÂäõ„ÄÇ TryÊìç‰ΩúÂèØ‰ª•ÁÅµÊ¥ªÈÄâÊã©‰∏öÂä°ËµÑÊ∫êÁöÑÈîÅÂÆöÁ≤íÂ∫¶„ÄÇ ÂºÄÂèëÊàêÊú¨ËæÉÈ´ò„ÄÇ &lt;span id=&quot;inline-green&quot;&gt;Áº∫ÁÇπÔºö&lt;/span&gt; CanfirmÂíåCancelÁöÑÂπÇÁ≠âÊÄßÂæàÈöæ‰øùËØÅ„ÄÇ ËøôÁßçÊñπÂºèÁº∫ÁÇπÊØîËæÉÂ§öÔºåÈÄöÂ∏∏Âú®Â§çÊùÇÂú∫ÊôØ‰∏ãÊòØ‰∏çÊé®Ëçê‰ΩøÁî®ÁöÑÔºåÈô§ÈùûÊòØÈùûÂ∏∏ÁÆÄÂçïÁöÑÂú∫ÊôØÔºåÈùûÂ∏∏ÂÆπÊòìÊèê‰æõÂõûÊªöCancelÔºåËÄå‰∏î‰æùËµñÁöÑÊúçÂä°‰πüÈùûÂ∏∏Â∞ëÁöÑÊÉÖÂÜµ„ÄÇ ËøôÁßçÂÆûÁé∞ÊñπÂºè‰ºöÈÄ†Êàê‰ª£Á†ÅÈáèÂ∫ûÂ§ßÔºåËÄ¶ÂêàÊÄßÈ´ò„ÄÇËÄå‰∏îÈùûÂ∏∏ÊúâÂ±ÄÈôêÊÄßÔºåÂõ†‰∏∫ÊúâÂæàÂ§öÁöÑ‰∏öÂä°ÊòØÊó†Ê≥ïÂæàÁÆÄÂçïÁöÑÂÆûÁé∞ÂõûÊªöÁöÑÔºåÂ¶ÇÊûú‰∏≤Ë°åÁöÑÊúçÂä°ÂæàÂ§öÔºåÂõûÊªöÁöÑÊàêÊú¨ÂÆûÂú®Â§™È´ò„ÄÇ Êú¨Âú∞Ê∂àÊÅØË°®ÔºàÂºÇÊ≠•Á°Æ‰øùÊúÄÁªà‰∏ÄËá¥ÊÄßÔºâ Êú¨Âú∞Ê∂àÊÅØË°®ÁöÑÊñπÊ°àÊúÄÂàùÊòØÁî±ebayÊèêÂá∫ÔºåÊ†∏ÂøÉÊÄùË∑ØÊòØÂ∞ÜÂàÜÂ∏ÉÂºè‰∫ãÂä°ÊãÜÂàÜÊàêÊú¨Âú∞‰∫ãÂä°ËøõË°åÂ§ÑÁêÜ„ÄÇÈÄöËøáÂú®‰∫ãÂä°‰∏ªÂä®ÂèëËµ∑ÊñπÈ¢ùÂ§ñÊñ∞Âª∫‰∫ãÂä°Ê∂àÊÅØË°®Ôºå‰∫ãÂä°ÂèëËµ∑ÊñπÂ§ÑÁêÜ‰∏öÂä°ÂíåËÆ∞ÂΩï‰∫ãÂä°Ê∂àÊÅØÂú®Êú¨Âú∞‰∫ãÂä°‰∏≠ÂÆåÊàêÔºåËΩÆËØ¢‰∫ãÂä°Ê∂àÊÅØË°®ÁöÑÊï∞ÊçÆÂèëÈÄÅ‰∫ãÂä°Ê∂àÊÅØÔºå‰∫ãÂä°Ë¢´Âä®ÊñπÂü∫‰∫éÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Ê∂àË¥π‰∫ãÂä°Ê∂àÊÅØË°®‰∏≠ÁöÑ‰∫ãÂä°„ÄÇ ÁÆÄÂçïÊù•ËØ¥Â∞±ÊòØÔºöÊú¨Âú∞Ê∂àÊÅØË°®‰∏é‰∏öÂä°Êï∞ÊçÆË°®Â§Ñ‰∫éÂêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰∏≠ÔºåËøôÊ†∑Â∞±ËÉΩÂà©Áî®Êú¨Âú∞‰∫ãÂä°Êù•‰øùËØÅÂú®ÂØπËøô‰∏§‰∏™Ë°®ÁöÑÊìç‰ΩúÊª°Ë∂≥‰∫ãÂä°ÁâπÊÄßÔºåÂπ∂‰∏î‰ΩøÁî®‰∫ÜÊ∂àÊÅØÈòüÂàóÊù•‰øùËØÅÊúÄÁªà‰∏ÄËá¥ÊÄß„ÄÇ Â§ÑÁêÜÊµÅÁ®ã ÊääÂàÜÂ∏ÉÂºè‰∫ãÂä°ÊúÄÂÖàÂºÄÂßãÂ§ÑÁêÜÁöÑ‰∫ãÂä°ÊñπÊàê‰∏∫‰∫ãÂä°‰∏ªÂä®ÊñπÔºåÂú®‰∫ãÂä°‰∏ªÂä®Êñπ‰πãÂêéÂ§ÑÁêÜÁöÑ‰∏öÂä°ÂÜÖÁöÑÂÖ∂‰ªñ‰∫ãÂä°Êàê‰∏∫‰∫ãÂä°Ë¢´Âä®Êñπ„ÄÇÊµÅÁ®ãÂ¶Ç‰∏ãÂõæÔºö ‰∫ãÂä°‰∏ªÂä®ÊñπÂ§ÑÁêÜÊú¨Âú∞‰∫ãÂä°„ÄÇ ‰∫ãÂä°‰∏ªÂä®ÂèëÂú®Êú¨Âú∞‰∫ãÂä°‰∏≠Â§ÑÁêÜ‰∏öÂä°Êõ¥Êñ∞Êìç‰ΩúÂíåÂÜôÊ∂àÊÅØË°®Êìç‰Ωú„ÄÇÔºàÂ¶Ç‰∏äÂõæ‰∏≠Êìç‰Ωú1„ÄÅ2Ôºâ ‰∫ãÂä°‰∏ªÂä®ÊñπÈÄöËøáÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºåÈÄöÁü•‰∫ãÂä°Ë¢´Âä®ÊñπÂ§ÑÁêÜ‰∫ãÂä°ÈÄöÁü•‰∫ãÂä°ÂæÖÊ∂àÊÅØ„ÄÇ Ê∂àÊÅØ‰∏≠Èó¥‰ª∂ÂèØ‰ª•Âü∫‰∫éKafka„ÄÅRocketMQÊ∂àÊÅØÈòüÂàóÔºå‰∫ãÂä°‰∏ªÂä®ÊñπÊ≥ï‰∏ªÂä®ÂÜôÊ∂àÊÅØÂà∞Ê∂àÊÅØÈòüÂàóÔºå‰∫ãÂä°Ê∂àË¥πÊñπÊ∂àË¥πÂπ∂Â§ÑÁêÜÊ∂àÊÅØÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØ„ÄÇÔºàÂ¶Ç‰∏äÂõæ‰∏≠Êìç‰Ωú3„ÄÅ4„ÄÅ5Ôºâ ‰∫ãÂä°Ë¢´Âä®ÊñπÈÄöËøáÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºåÈÄöÁü•‰∫ãÂä°‰∏ªÂä®Êñπ‰∫ãÂä°Â∑≤Â§ÑÁêÜÁöÑÊ∂àÊÅØ„ÄÇÔºàÂ¶Ç‰∏äÂõæ‰∏≠6„ÄÅ7„ÄÅ8Ôºâ ‰∏∫‰∫ÜÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄßÔºåÂΩìÂ§ÑÁêÜÈîôËØØÈúÄË¶ÅÈáçËØïÔºå‰∫ãÂä°ÂèëÈÄÅÊñπÂíå‰∫ãÂä°Êé•Êî∂ÊñπÁõ∏ÂÖ≥‰∏öÂä°Â§ÑÁêÜÈúÄË¶ÅÊîØÊåÅÂπÇÁ≠â„ÄÇÂÖ∑‰Ωì‰øùÂ≠ò‰∏ÄËá¥ÊÄßÁöÑÂÆπÈîôÂ§ÑÁêÜÂ¶Ç‰∏ãÔºö 1„ÄÅÂΩìÊ≠•È™§1Â§ÑÁêÜÂá∫ÈîôÔºå‰∫ãÂä°ÂõûÊªöÔºåÁõ∏ÂΩì‰∫é‰ªÄ‰πàÈÉΩÊ≤°ÂèëÁîü„ÄÇ 2„ÄÅÂΩìÊ≠•È™§2„ÄÅÊ≠•È™§3Â§ÑÁêÜÂá∫ÈîôÔºåÁî±‰∫éÊú™Â§ÑÁêÜÁöÑ‰∫ãÂä°Ê∂àÊÅØËøòÊòØ‰øùÂ≠òÂú®‰∫ãÂä°ÂèëÈÄÅÊñπÔºå‰∫ãÂä°ÂèëÈÄÅÊñπÂèØ‰ª•ÂÆöÊó∂ËΩÆËØ¢‰∏∫Ë∂ÖÊó∂Ê∂àÊÅØÊï∞ÊçÆÔºåÂÜçÊ¨°ÂèëÈÄÅÁöÑÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ËøõË°åÂ§ÑÁêÜ„ÄÇ‰∫ãÂä°Ë¢´Âä®ÊñπÊ∂àË¥π‰∫ãÂä°Ê∂àÊÅØÈáçËØïÂ§ÑÁêÜ„ÄÇ 3„ÄÅÂ¶ÇÊûúÊòØ‰∏öÂä°‰∏äÁöÑÂ§±Ë¥•Ôºå‰∫ãÂä°Ë¢´Âä®ÊñπÂèØ‰ª•ÂèëÊ∂àÊÅØÁªô‰∫ãÂä°‰∏ªÂä®ÊñπËøõË°åÂõûÊªö„ÄÇ 4„ÄÅÂ¶ÇÊûúÂ§ö‰∏™‰∫ãÂä°Ë¢´Âä®ÊñπÂ∑≤ÁªèÊ∂àË¥πÊ∂àÊÅØÔºå‰∫ãÂä°‰∏ªÂä®ÊñπÈúÄË¶ÅÂõûÊªö‰∫ãÂä°Êó∂ÈúÄË¶ÅÈÄöÁü•‰∫ãÂä°Ë¢´Âä®ÊñπÂõûÊªö„ÄÇ ‰ºòÁÇπ ‰ªéÂ∫îÁî®ËÆæËÆ°ÂºÄÂèëÁöÑËßíÂ∫¶ÂÆûÁé∞‰∫ÜÊ∂àÊÅØÊï∞ÊçÆÁöÑÂèØÈù†ÊÄßÔºåÊ∂àÊÅØÊï∞ÊçÆÁöÑÂèØÈù†ÊÄß‰∏ç‰æùËµñ‰∫éÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºåÂº±Âåñ‰∫ÜÂØπMQ‰∏≠Èó¥‰ª∂ÁâπÊÄßÁöÑ‰æùËµñ„ÄÇ ÊñπÊ°àËΩªÈáèÔºåÂÆπÊòìÂÆûÁé∞„ÄÇ Áº∫ÁÇπ ‰∏éÂÖ∑‰ΩìÁöÑ‰∏öÂä°Âú∫ÊôØÁªëÂÆöÔºåËÄ¶ÂêàÊÄßÂº∫Ôºå‰∏çÂèØÂÖ¨Áî®„ÄÇ Ê∂àÊÅØÊï∞ÊçÆ‰∏é‰∏öÂä°Êï∞ÊçÆÂêåÂ∫ìÔºåÂç†Áî®‰∏öÂä°Á≥ªÁªüËµÑÊ∫ê„ÄÇ ‰∏öÂä°Á≥ªÁªüÂú®‰ΩøÁî®ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁöÑÊÉÖÂÜµ‰∏ãÔºåÊ∂àÊÅØÊúçÂä°ÊÄßËÉΩ‰ºöÂèóÂà∞ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÂπ∂ÂèëÊÄßËÉΩÁöÑÂ±ÄÈôê„ÄÇ ÁªìÂêàMQÂÆûÁé∞ÁöÑÂèØÈù†Ê∂àÊÅØÊúÄÁªà‰∏ÄËá¥ÊÄß Âü∫‰∫éMQÁöÑÂàÜÂ∏ÉÂºè‰∫ãÂä°ÊñπÊ°àÂÖ∂ÂÆûÊòØÂØπÊú¨Âú∞Ê∂àÊÅØË°®ÁöÑÂ∞ÅË£ÖÔºåÂ∞ÜÊú¨Âú∞Ê∂àÊÅØË°®Âü∫‰∫éMQ ÂÜÖÈÉ®ÔºåÂÖ∂‰ªñÊñπÈù¢ÁöÑÂçèËÆÆÂü∫Êú¨‰∏éÊú¨Âú∞Ê∂àÊÅØË°®‰∏ÄËá¥„ÄÇ Â§ÑÁêÜÊµÅÁ®ã ‰ª•ÈòøÈáåÁöÑ RocketMQ ‰∏≠Èó¥‰ª∂‰∏∫‰æãÔºåÂú®Êú¨Âú∞Ê∂àÊÅØË°®ÊñπÊ°à‰∏≠Ôºå‰øùËØÅ‰∫ãÂä°‰∏ªÂä®ÊñπÂèëÂÜô‰∏öÂä°Ë°®Êï∞ÊçÆÂíåÂÜôÊ∂àÊÅØË°®Êï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄßÊòØÂü∫‰∫éÊï∞ÊçÆÂ∫ì‰∫ãÂä°ÔºåRocketMQÁöÑ‰∫ãÂä°Ê∂àÊÅØÁõ∏ÂØπ‰∫éÊôÆÈÄöMQÔºåÁõ∏ÂØπ‰∫éÊèê‰æõ‰∫Ü2PCÁöÑÊèê‰∫§Êé•Âè£ÔºåÊñπÊ°àÂ¶Ç‰∏ãÔºö &lt;span id=&quot;inline-blue&quot;&gt;Ê≠£Â∏∏ÊÉÖÂÜµ‚Äî‚Äî‰∫ãÂä°‰∏ªÂä®ÊñπÂèëÊ∂àÊÅØ&lt;/span&gt; ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰∫ãÂä°‰∏ªÂä®ÊñπÊúçÂä°Ê≠£Â∏∏ÔºåÊ≤°ÊúâÂèëÁîüÊïÖÈöúÔºåÂèëÊ∂àÊÅØÊµÅÁ®ãÂ¶Ç‰∏ãÔºö 1„ÄÅÂèëÈÄÅÊñπÂêë MQÊúçÂä°Á´Ø(MQ Server)ÂèëÈÄÅhalfÊ∂àÊÅØ„ÄÇ 2„ÄÅMQ Server Â∞ÜÊ∂àÊÅØÊåÅ‰πÖÂåñÊàêÂäü‰πãÂêéÔºåÂêëÂèëÈÄÅÊñπ ACK Á°ÆËÆ§Ê∂àÊÅØÂ∑≤ÁªèÂèëÈÄÅÊàêÂäü„ÄÇ 3„ÄÅÂèëÈÄÅÊñπÂºÄÂßãÊâßË°åÊú¨Âú∞‰∫ãÂä°ÈÄªËæë„ÄÇ 4„ÄÅÂèëÈÄÅÊñπÊ†πÊçÆÊú¨Âú∞‰∫ãÂä°ÊâßË°åÁªìÊûúÂêë MQ Server Êèê‰∫§‰∫åÊ¨°Á°ÆËÆ§Ôºàcommit ÊàñÊòØ rollbackÔºâ„ÄÇ 5„ÄÅMQ Server Êî∂Âà∞ commit Áä∂ÊÄÅÂàôÂ∞ÜÂçäÊ∂àÊÅØÊ†áËÆ∞‰∏∫ÂèØÊäïÈÄíÔºåËÆ¢ÈòÖÊñπÊúÄÁªàÂ∞ÜÊî∂Âà∞ËØ•Ê∂àÊÅØÔºõMQ Server Êî∂Âà∞ rollback Áä∂ÊÄÅÂàôÂà†Èô§ÂçäÊ∂àÊÅØÔºåËÆ¢ÈòÖÊñπÂ∞Ü‰∏ç‰ºöÊé•ÂèóËØ•Ê∂àÊÅØ„ÄÇ &lt;span id=&quot;inline-blue&quot;&gt;ÂºÇÂ∏∏ÊÉÖÂÜµ‚Äî‚Äî‰∫ãÂä°‰∏ªÂä®ÊñπÊ∂àÊÅØÊÅ¢Â§ç&lt;/span&gt; Âú®Êñ≠ÁΩëÊàñËÄÖÂ∫îÁî®ÈáçÂêØÁ≠âÂºÇÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂèëÈÄÅÊñπÊèê‰∫§ÁöÑ‰∫åÊ¨°Á°ÆËÆ§Ë∂ÖÊó∂Êú™Âà∞Ëææ MQ ServerÔºåÊ≠§Êó∂Â§ÑÁêÜÈÄªËæëÂ¶Ç‰∏ãÔºö 5„ÄÅMQ Server ÂØπËØ•Ê∂àÊÅØÂèëËµ∑Ê∂àÊÅØÂõûÊü•„ÄÇ 6„ÄÅÂèëÈÄÅÊñπÊî∂Âà∞Ê∂àÊÅØÂõûÊü•ÂêéÔºåÈúÄË¶ÅÊ£ÄÊü•ÂØπÂ∫îÊ∂àÊÅØÁöÑÊú¨Âú∞‰∫ãÂä°ÊâßË°åÁöÑÊúÄÁªàÁªìÊûú„ÄÇ 7„ÄÅÂèëÈÄÅÊñπÊ†πÊçÆÊ£ÄÊü•ÂæóÂà∞ÁöÑÊú¨Âú∞‰∫ãÂä°ÁöÑÊúÄÁªàÁä∂ÊÄÅÂÜçÊ¨°Êèê‰∫§‰∫åÊ¨°Á°ÆËÆ§„ÄÇ 8„ÄÅMQ ServerÂü∫‰∫écommit / rollback ÂØπÊ∂àÊÅØËøõË°åÊäïÈÄíÊàñËÄÖÂà†Èô§„ÄÇ MQÂàÜÂ∏ÉÂºè‰∫ãÂä° ‰∫ãÂä°‰∏ªÂä®ÊñπÂü∫‰∫éMQÈÄö‰ø°ÈÄöÁü•‰∫ãÂä°Ë¢´Âä®ÊñπÂ§ÑÁêÜ‰∫ãÂä°Ôºå‰∫ãÂä°Ë¢´Âä®ÊñπÂü∫‰∫éMQËøîÂõûÂ§ÑÁêÜÁªìÊûú„ÄÇ Â¶ÇÊûú‰∫ãÂä°Ë¢´Âä®ÊñπÊ∂àË¥πÊ∂àÊÅØÂºÇÂ∏∏ÔºåÈúÄË¶Å‰∏çÊñ≠ÈáçËØïÔºå‰∏öÂä°Â§ÑÁêÜÈÄªËæëÈúÄË¶Å‰øùËØÅÂπÇÁ≠â„ÄÇ Â¶ÇÊûúÊòØ‰∫ãÂä°Ë¢´Âä®Êñπ‰∏öÂä°‰∏äÁöÑÂ§ÑÁêÜÂ§±Ë¥•ÔºåÂèØ‰ª•ÈÄöËøáMQÈÄöÁü•‰∫ãÂä°‰∏ªÂä®ÊñπËøõË°åË°•ÂÅøÊàñËÄÖ‰∫ãÂä°ÂõûÊªö„ÄÇ ‰ºòÁÇπ Ê∂àÊÅØÊï∞ÊçÆÁã¨Á´ãÂ≠òÂÇ® ÔºåÈôç‰Ωé‰∏öÂä°Á≥ªÁªü‰∏éÊ∂àÊÅØÁ≥ªÁªü‰πãÈó¥ÁöÑËÄ¶Âêà„ÄÇ ÂêûÂêêÈáèÁî±‰∫é‰ΩøÁî®Êú¨Âú∞Ê∂àÊÅØË°®ÊñπÊ°à„ÄÇ Áº∫ÁÇπ ‰∏ÄÊ¨°Ê∂àÊÅØÂèëÈÄÅÈúÄË¶Å‰∏§Ê¨°ÁΩëÁªúËØ∑Ê±Ç(halfÊ∂àÊÅØ„ÄÅcommit/rollbackÊ∂àÊÅØ)„ÄÇ ‰∏öÂä°Â§ÑÁêÜÊúçÂä°ÈúÄË¶ÅÂÆûÁé∞Ê∂àÊÅØÁä∂ÊÄÅÂõûÊü•Êé•Âè£„ÄÇ Â∞ΩÊúÄÂ§ßÂä™ÂäõÈÄöÁü• ËøôÁßçÊñπÊ°à‰∏ªË¶ÅÁî®Âú®‰∏éÁ¨¨‰∏âÊñπÁ≥ªÁªüÈÄöËÆØÊó∂ÔºåÊØîÂ¶ÇÔºöË∞ÉÁî®ÂæÆ‰ø°ÊàñÊîØ‰ªòÂÆùÊîØ‰ªòÂêéÁöÑÊîØ‰ªòÁªìÊûúÈÄöÁü•„ÄÇËøôÁßçÊñπÊ°à‰πüÊòØÁªìÂêàMQËøõË°åÂÆûÁé∞Ôºå‰æãÂ¶ÇÔºöÈÄöËøáMQÂèëÈÄÅhttpËØ∑Ê±ÇÔºåËÆæÁΩÆÊúÄÂ§ßÈÄöÁü•Ê¨°Êï∞„ÄÇËææÂà∞ÈÄöÁü•Ê¨°Êï∞ÂêéÂç≥‰∏çÂÜçÈÄöÁü•„ÄÇ Â§ÑÁêÜÊµÅÁ®ã ‰∏öÂä°Ê¥ªÂä®ÁöÑ‰∏ªÂä®ÊñπÔºåÂú®ÂÆåÊàê‰∏öÂä°Â§ÑÁêÜ‰πãÂêéÔºåÂêë‰∏öÂä°Ê¥ªÂä®ÁöÑË¢´Âä®ÊñπÂèëÈÄÅÊ∂àÊÅØÔºåÂÖÅËÆ∏Ê∂àÊÅØ‰∏¢Â§±„ÄÇ ‰∏ªÂä®ÊñπÂèØ‰ª•ËÆæÁΩÆÊó∂Èó¥Èò∂Ê¢ØÂûãÈÄöÁü•ËßÑÂàôÔºåÂú®ÈÄöÁü•Â§±Ë¥•ÂêéÊåâËßÑÂàôÈáçÂ§çÈÄöÁü•ÔºåÁõ¥Âà∞ÈÄöÁü•NÊ¨°Âêé‰∏çÂÜçÈÄöÁü•„ÄÇ ‰∏ªÂä®ÊñπÊèê‰æõÊ†°ÂØπÊü•ËØ¢Êé•Âè£ÁªôË¢´Âä®ÊñπÊåâÈúÄÊ†°ÂØπÊü•ËØ¢ÔºåÁî®‰∫éÊÅ¢Â§ç‰∏¢Â§±ÁöÑ‰∏öÂä°Ê∂àÊÅØ„ÄÇ ‰∏öÂä°Ê¥ªÂä®ÁöÑË¢´Âä®ÊñπÂ¶ÇÊûúÊ≠£Â∏∏Êé•Êî∂‰∫ÜÊï∞ÊçÆÔºåÂ∞±Ê≠£Â∏∏ËøîÂõûÂìçÂ∫îÔºåÂπ∂ÁªìÊùü‰∫ãÂä°„ÄÇ Â¶ÇÊûúË¢´Âä®ÊñπÊ≤°ÊúâÊ≠£Â∏∏Êé•Êî∂ÔºåÊ†πÊçÆÂÆöÊó∂Á≠ñÁï•ÔºåÂêë‰∏öÂä°Ê¥ªÂä®‰∏ªÂä®ÊñπÊü•ËØ¢ÔºåÊÅ¢Â§ç‰∏¢Â§±ÁöÑ‰∏öÂä°Ê∂àÊÅØ ÊñπÊ°àÁâπÁÇπ Áî®Âà∞ÁöÑÊúçÂä°Ê®°ÂºèÔºöÂèØÊü•ËØ¢Êìç‰Ωú„ÄÅÂπÇÁ≠âÊìç‰Ωú„ÄÇ Ë¢´Âä®ÊñπÁöÑÂ§ÑÁêÜÁªìÊûú‰∏çÂΩ±Âìç‰∏ªÂä®ÊñπÁöÑÂ§ÑÁêÜÁªìÊûúÔºõ ÈÄÇÁî®‰∫éÂØπ‰∏öÂä°ÊúÄÁªà‰∏ÄËá¥ÊÄßÁöÑÊó∂Èó¥ÊïèÊÑüÂ∫¶‰ΩéÁöÑÁ≥ªÁªüÔºõ ÈÄÇÂêàË∑®‰ºÅ‰∏öÁöÑÁ≥ªÁªüÈó¥ÁöÑÊìç‰ΩúÔºåÊàñËÄÖ‰ºÅ‰∏öÂÜÖÈÉ®ÊØîËæÉÁã¨Á´ãÁöÑÁ≥ªÁªüÈó¥ÁöÑÊìç‰ΩúÔºåÊØîÂ¶ÇÈì∂Ë°åÈÄöÁü•„ÄÅÂïÜÊà∑ÈÄöÁü•Á≠âÔºõ Saga‰∫ãÂä°‚Äî‚ÄîÊúÄÁªà‰∏ÄËá¥ÊÄß ÁÆÄ‰ªã Saga‰∫ãÂä°Ê∫ê‰∫é1987Âπ¥ÊôÆÊûóÊñØÈ°øÂ§ßÂ≠¶ÁöÑHectoÂíåKennethÂèëË°®ÁöÑÂ¶Ç‰ΩïÂ§ÑÁêÜlong lived transactionÔºàÈïøÊ¥ª‰∫ãÂä°ÔºâËÆ∫ÊñáÔºåSaga‰∫ãÂä°Ê†∏ÂøÉÊÄùÊÉ≥ÊòØÂ∞ÜÈïø‰∫ãÂä°ÊãÜÂàÜ‰∏∫Â§ö‰∏™Êú¨Âú∞Áü≠‰∫ãÂä°ÔºåÁî±Saga‰∫ãÂä°ÂçèË∞ÉÂô®ÂçèË∞ÉÔºåÂ¶ÇÊûúÊ≠£Â∏∏ÁªìÊùüÈÇ£Â∞±Ê≠£Â∏∏ÂÆåÊàêÔºåÂ¶ÇÊûúÊüê‰∏™Ê≠•È™§Â§±Ë¥•ÔºåÂàôÊ†πÊçÆÁõ∏ÂèçÈ°∫Â∫è‰∏ÄÊ¨°Ë∞ÉÁî®Ë°•ÂÅøÊìç‰Ωú„ÄÇ Saga‰∫ãÂä°Âü∫Êú¨ÂçèËÆÆ ÊØè‰∏™Saga‰∫ãÂä°Áî±‰∏ÄÁ≥ªÂàóÂπÇÁ≠âÁöÑÊúâÂ∫èÂ≠ê‰∫ãÂä°(sub-transaction) Ti ÁªÑÊàê„ÄÇ ÊØè‰∏™Ti ÈÉΩÊúâÂØπÂ∫îÁöÑÂπÇÁ≠âË°•ÂÅøÂä®‰ΩúCiÔºåË°•ÂÅøÂä®‰ΩúÁî®‰∫éÊí§ÈîÄTiÈÄ†ÊàêÁöÑÁªìÊûú„ÄÇ ÂèØ‰ª•ÁúãÂà∞ÔºåÂíåTCCÁõ∏ÊØîÔºåSagaÊ≤°Êúâ‚ÄúÈ¢ÑÁïô‚ÄùÂä®‰ΩúÔºåÂÆÉÁöÑTiÂ∞±ÊòØÁõ¥Êé•Êèê‰∫§Âà∞Â∫ì„ÄÇ Saga‰∫ãÂä°ÊâßË°åÈ°∫Â∫è ‰∏ãÈù¢‰ª•‰∏ãÂçïÊµÅÁ®ã‰∏∫‰æãÔºåÊï¥‰∏™Êìç‰ΩúÂåÖÊã¨ÔºöÂàõÂª∫ËÆ¢Âçï„ÄÅÊâ£ÂáèÂ∫ìÂ≠ò„ÄÅÊîØ‰ªò„ÄÅÂ¢ûÂä†ÁßØÂàÜ SagaÁöÑÊâßË°åÈ°∫Â∫èÊúâ‰∏§ÁßçÔºö &lt;span id=&quot;inline-blue&quot;&gt;‰∫ãÂä°Ê≠£Â∏∏ÊâßË°åÂÆåÊàê&lt;/span&gt; &lt;p id=&quot;div-border-left-red&quot;&gt;T1, T2, T3, ..., TnÔºå‰æãÂ¶ÇÔºöÊâ£ÂáèÂ∫ìÂ≠ò(T1)ÔºåÂàõÂª∫ËÆ¢Âçï(T2)ÔºåÊîØ‰ªò(T3)Ôºå‰æùÊ¨°ÊúâÂ∫èÂÆåÊàêÊï¥‰∏™‰∫ãÂä°„ÄÇ&lt;/p&gt; &lt;span id=&quot;inline-blue&quot;&gt;‰∫ãÂä°ÂõûÊªö&lt;/span&gt; &lt;p id=&quot;div-border-left-red&quot;&gt;T1, T2, ..., Tj, Cj,..., C2, C1ÔºåÂÖ∂‰∏≠0 &lt; j &lt; nÔºå‰æãÂ¶ÇÔºöÊâ£ÂáèÂ∫ìÂ≠ò(T1)ÔºåÂàõÂª∫ËÆ¢Âçï(T2)ÔºåÊîØ‰ªò(T3ÔºåÊîØ‰ªòÂ§±Ë¥•)ÔºåÊîØ‰ªòÂõûÊªö(C3)ÔºåËÆ¢ÂçïÂõûÊªö(C2)ÔºåÊÅ¢Â§çÂ∫ìÂ≠ò(C1)„ÄÇ&lt;/p&gt; SagaÊÅ¢Â§çÁ≠ñÁï•Ôºö ÂêëÂâçÊÅ¢Â§ç(forward recovery) ÂØπÂ∫î‰∫é‰∏äÈù¢Á¨¨‰∏ÄÁßçÊâßË°åÈ°∫Â∫èÔºåÈÄÇÁî®‰∫éÂøÖÈ°ªË¶ÅÊàêÂäüÁöÑÂú∫ÊôØÔºåÂèëÁîüÂ§±Ë¥•ËøõË°åÈáçËØïÔºåÊâßË°åÈ°∫Â∫èÊòØÁ±ª‰ºº‰∫éËøôÊ†∑ÁöÑÔºöT1, T2, ..., Tj(Â§±Ë¥•), Tj(ÈáçËØï),..., TnÔºåÂÖ∂‰∏≠jÊòØÂèëÁîüÈîôËØØÁöÑÂ≠ê‰∫ãÂä°(sub-transaction)„ÄÇËØ•ÊÉÖÂÜµ‰∏ã‰∏çÈúÄË¶ÅCi„ÄÇ ÂêëÂêéÊÅ¢Â§ç(backward recovery) ÂØπÂ∫î‰∫é‰∏äÈù¢ÊèêÂà∞ÁöÑÁ¨¨‰∫åÁßçÊâßË°åÈ°∫Â∫èÔºåÂÖ∂‰∏≠jÊòØÂèëÁîüÈîôËØØÁöÑÂ≠ê‰∫ãÂä°(sub-transaction)ÔºåËøôÁßçÂÅöÊ≥ïÁöÑÊïàÊûúÊòØÊí§ÈîÄÊéâ‰πãÂâçÊâÄÊúâÊàêÂäüÁöÑÂ≠ê‰∫ãÂä°Ôºå‰ΩøÂæóÊï¥‰∏™SagaÁöÑÊâßË°åÁªìÊûúÊí§ÈîÄ„ÄÇ Saga‰∫ãÂä°ÂÆûÁé∞ÊñπÂºè 1„ÄÅÂëΩ‰ª§ÂçèË∞É(Order Orchestrator)Ôºö‰∏≠Â§ÆÂçèË∞ÉÂô®Ë¥üË¥£ÈõÜ‰∏≠Â§ÑÁêÜ‰∫ã‰ª∂ÁöÑÂÜ≥Á≠ñÂíå‰∏öÂä°ÈÄªËæëÊéíÂ∫è„ÄÇ ‰∏≠Â§ÆÂçèË∞ÉÂô®ÔºàOrchestratorÔºåÁÆÄÁß∞OSOÔºâ‰ª•ÂëΩ‰ª§/ÂõûÂ§çÁöÑÊñπÂºè‰∏éÊØèÈ°πÊúçÂä°ËøõË°åÈÄö‰ø°ÔºåÂÖ®ÊùÉË¥üË¥£ÂëäËØâÊØè‰∏™ÂèÇ‰∏éËÄÖËØ•ÂÅö‰ªÄ‰πà‰ª•Âèä‰ªÄ‰πàÊó∂ÂÄôËØ•ÂÅö‰ªÄ‰πà„ÄÇ ‰ª•ÁîµÂïÜËÆ¢ÂçïÁöÑ‰æãÂ≠ê‰∏∫‰æãÔºö 1„ÄÅ‰∫ãÂä°ÂèëËµ∑ÊñπÁöÑ‰∏ª‰∏öÂä°ÈÄªËæëËØ∑Ê±ÇOSOÊúçÂä°ÂºÄÂêØËÆ¢Âçï‰∫ãÂä°„ÄÇ 2„ÄÅOSOÂêëÂ∫ìÂ≠òÊúçÂä°ËØ∑Ê±ÇÊâ£ÂáèÂ∫ìÂ≠òÔºåÂ∫ìÂ≠òÊúçÂä°ÂõûÂ§çÂ§ÑÁêÜÁªìÊûú„ÄÇ 3„ÄÅOSOÂêëËÆ¢ÂçïÊúçÂä°ËØ∑Ê±ÇÂàõÂª∫ËÆ¢ÂçïÔºåËÆ¢ÂçïÊúçÂä°ÂõûÂ§çÂàõÂª∫ÁªìÊûú„ÄÇ 4„ÄÅOSOÂêëÊîØ‰ªòÊúçÂä°ËØ∑Ê±ÇÊîØ‰ªòÔºåÊîØ‰ªòÊúçÂä°ÂõûÂ§çÂ§ÑÁêÜÁªìÊûú„ÄÇ 5„ÄÅ‰∏ª‰∏öÂä°ÈÄªËæëÊé•Êî∂Âπ∂Â§ÑÁêÜOSO‰∫ãÂä°Â§ÑÁêÜÁªìÊûúÂõûÂ§ç„ÄÇ ‰∏≠Â§ÆÂçèË∞ÉÂô®ÂøÖÈ°ª‰∫ãÂÖàÁü•ÈÅìÊâßË°åÊï¥‰∏™ËÆ¢Âçï‰∫ãÂä°ÊâÄÈúÄÁöÑÊµÅÁ®ã(‰æãÂ¶ÇÈÄöËøáËØªÂèñÈÖçÁΩÆ)„ÄÇÂ¶ÇÊûúÊúâ‰ªª‰ΩïÂ§±Ë¥•ÔºåÂÆÉËøòË¥üË¥£ÈÄöËøáÂêëÊØè‰∏™ÂèÇ‰∏éËÄÖÂèëÈÄÅÂëΩ‰ª§Êù•Êí§ÈîÄ‰πãÂâçÁöÑÊìç‰ΩúÊù•ÂçèË∞ÉÂàÜÂ∏ÉÂºèÁöÑÂõûÊªö„ÄÇÂü∫‰∫é‰∏≠Â§ÆÂçèË∞ÉÂô®ÂçèË∞É‰∏ÄÂàáÊó∂ÔºåÂõûÊªöË¶ÅÂÆπÊòìÂæóÂ§öÔºåÂõ†‰∏∫ÂçèË∞ÉÂô®ÈªòËÆ§ÊòØÊâßË°åÊ≠£ÂêëÊµÅÁ®ãÔºåÂõûÊªöÊó∂Âè™Ë¶ÅÊâßË°åÂèçÂêëÊµÅÁ®ãÂç≥ÂèØ„ÄÇ 2„ÄÅ‰∫ã‰ª∂ÁºñÊéí (Event Choreography0ÔºöÊ≤°Êúâ‰∏≠Â§ÆÂçèË∞ÉÂô®ÔºàÊ≤°ÊúâÂçïÁÇπÈ£éÈô©ÔºâÊó∂ÔºåÊØè‰∏™ÊúçÂä°‰∫ßÁîüÂπ∂ËßÇÂØüÂÖ∂‰ªñÊúçÂä°ÁöÑ‰∫ã‰ª∂ÔºåÂπ∂ÂÜ≥ÂÆöÊòØÂê¶Â∫îÈááÂèñË°åÂä®„ÄÇ Âú®‰∫ã‰ª∂ÁºñÊéíÊñπÊ≥ï‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™ÊúçÂä°ÊâßË°å‰∏Ä‰∏™‰∫ãÂä°ÔºåÁÑ∂ÂêéÂèëÂ∏É‰∏Ä‰∏™‰∫ã‰ª∂„ÄÇËØ•‰∫ã‰ª∂Ë¢´‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊúçÂä°ËøõË°åÁõëÂê¨ÔºåËøô‰∫õÊúçÂä°ÂÜçÊâßË°åÊú¨Âú∞‰∫ãÂä°Âπ∂ÂèëÂ∏ÉÔºàÊàñ‰∏çÂèëÂ∏ÉÔºâÊñ∞ÁöÑ‰∫ã‰ª∂„ÄÇ ÂΩìÊúÄÂêé‰∏Ä‰∏™ÊúçÂä°ÊâßË°åÊú¨Âú∞‰∫ãÂä°Âπ∂‰∏î‰∏çÂèëÂ∏É‰ªª‰Ωï‰∫ã‰ª∂Êó∂ÔºåÊÑèÂë≥ÁùÄÂàÜÂ∏ÉÂºè‰∫ãÂä°ÁªìÊùüÔºåÊàñËÄÖÂÆÉÂèëÂ∏ÉÁöÑ‰∫ã‰ª∂Ê≤°ÊúâË¢´‰ªª‰ΩïSagaÂèÇ‰∏éËÄÖÂê¨Âà∞ÈÉΩÊÑèÂë≥ÁùÄ‰∫ãÂä°ÁªìÊùü„ÄÇ ‰ª•ÁîµÂïÜËÆ¢ÂçïÁöÑ‰æãÂ≠ê‰∏∫‰æãÔºö 1„ÄÅ‰∫ãÂä°ÂèëËµ∑ÊñπÁöÑ‰∏ª‰∏öÂä°ÈÄªËæëÂèëÂ∏ÉÂºÄÂßãËÆ¢Âçï‰∫ã‰ª∂„ÄÇ 2„ÄÅÂ∫ìÂ≠òÊúçÂä°ÁõëÂê¨ÂºÄÂßãËÆ¢Âçï‰∫ã‰ª∂ÔºåÊâ£ÂáèÂ∫ìÂ≠òÔºåÂπ∂ÂèëÂ∏ÉÂ∫ìÂ≠òÂ∑≤Êâ£Âáè‰∫ã‰ª∂„ÄÇ 3„ÄÅËÆ¢ÂçïÊúçÂä°ÁõëÂê¨Â∫ìÂ≠òÂ∑≤Êâ£Âáè‰∫ã‰ª∂ÔºåÂàõÂª∫ËÆ¢ÂçïÔºåÂπ∂ÂèëÂ∏ÉËÆ¢ÂçïÂ∑≤ÂàõÂª∫‰∫ã‰ª∂„ÄÇ 4„ÄÅÊîØ‰ªòÊúçÂä°ÁõëÂê¨ËÆ¢ÂçïÂ∑≤ÂàõÂª∫‰∫ã‰ª∂ÔºåËøõË°åÊîØ‰ªòÔºåÂπ∂ÂèëÂ∏ÉËÆ¢ÂçïÂ∑≤ÊîØ‰ªò‰∫ã‰ª∂„ÄÇ 5„ÄÅ‰∏ª‰∏öÂä°ÈÄªËæëÁõëÂê¨ËÆ¢ÂçïÂ∑≤ÊîØ‰ªò‰∫ã‰ª∂Âπ∂Â§ÑÁêÜ„ÄÇ ‰∫ã‰ª∂/ÁºñÊéíÊòØÂÆûÁé∞SagaÊ®°ÂºèÁöÑËá™ÁÑ∂ÊñπÂºèÔºåÂÆÉÂæàÁÆÄÂçïÔºåÂÆπÊòìÁêÜËß£Ôºå‰∏çÈúÄË¶ÅÂ§™Â§öÁöÑ‰ª£Á†ÅÊù•ÊûÑÂª∫„ÄÇÂ¶ÇÊûú‰∫ãÂä°Ê∂âÂèä2Ëá≥4‰∏™Ê≠•È™§ÔºåÂàôÂèØËÉΩÊòØÈùûÂ∏∏ÂêàÈÄÇÁöÑ„ÄÇ ÂëΩ‰ª§ÂçèË∞ÉËÆæËÆ°ÁöÑ‰ºòÁÇπ 1„ÄÅÊúçÂä°‰πãÈó¥ÂÖ≥Á≥ªÁÆÄÂçïÔºåÈÅøÂÖçÊúçÂä°‰πãÈó¥ÁöÑÂæ™ÁéØ‰æùËµñÂÖ≥Á≥ªÔºåÂõ†‰∏∫SagaÂçèË∞ÉÂô®‰ºöË∞ÉÁî®SagaÂèÇ‰∏éËÄÖÔºå‰ΩÜÂèÇ‰∏éËÄÖ‰∏ç‰ºöË∞ÉÁî®ÂçèË∞ÉÂô® 2„ÄÅÁ®ãÂ∫èÂºÄÂèëÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅÊâßË°åÂëΩ‰ª§/ÂõûÂ§ç(ÂÖ∂ÂÆûÂõûÂ§çÊ∂àÊÅØ‰πüÊòØ‰∏ÄÁßç‰∫ã‰ª∂Ê∂àÊÅØ)ÔºåÈôç‰ΩéÂèÇ‰∏éËÄÖÁöÑÂ§çÊùÇÊÄß„ÄÇ 3„ÄÅÊòìÁª¥Êä§Êâ©Â±ïÔºåÂú®Ê∑ªÂä†Êñ∞Ê≠•È™§Êó∂Ôºå‰∫ãÂä°Â§çÊùÇÊÄß‰øùÊåÅÁ∫øÊÄßÔºåÂõûÊªöÊõ¥ÂÆπÊòìÁÆ°ÁêÜÔºåÊõ¥ÂÆπÊòìÂÆûÊñΩÂíåÊµãËØï ÂëΩ‰ª§ÂçèË∞ÉËÆæËÆ°ÁöÑÁº∫ÁÇπ 1„ÄÅ‰∏≠Â§ÆÂçèË∞ÉÂô®ÂÆπÊòìÂ§ÑÁêÜÈÄªËæëÂÆπÊòìËøá‰∫éÂ§çÊùÇÔºåÂØºËá¥Èöæ‰ª•Áª¥Êä§„ÄÇ 2„ÄÅÂ≠òÂú®ÂçèË∞ÉÂô®ÂçïÁÇπÊïÖÈöúÈ£éÈô©„ÄÇ ‰∫ã‰ª∂/ÁºñÊéíËÆæËÆ°ÁöÑ‰ºòÁÇπ 1„ÄÅÈÅøÂÖç‰∏≠Â§ÆÂçèË∞ÉÂô®ÂçïÁÇπÊïÖÈöúÈ£éÈô©„ÄÇ 2„ÄÅÂΩìÊ∂âÂèäÁöÑÊ≠•È™§ËæÉÂ∞ëÊúçÂä°ÂºÄÂèëÁÆÄÂçïÔºåÂÆπÊòìÂÆûÁé∞„ÄÇ ‰∫ã‰ª∂/ÁºñÊéíËÆæËÆ°ÁöÑÁº∫ÁÇπ 1„ÄÅÊúçÂä°‰πãÈó¥Â≠òÂú®Âæ™ÁéØ‰æùËµñÁöÑÈ£éÈô©„ÄÇ 2„ÄÅÂΩìÊ∂âÂèäÁöÑÊ≠•È™§ËæÉÂ§öÔºåÊúçÂä°Èó¥ÂÖ≥Á≥ªÊ∑∑‰π±ÔºåÈöæ‰ª•ËøΩË∏™Ë∞ÉÊµã„ÄÇ ÂÄºÂæóË°•ÂÖÖÁöÑÊòØÔºåÁî±‰∫éSagaÊ®°Âûã‰∏≠Ê≤°ÊúâPrepareÈò∂ÊÆµÔºåÂõ†Ê≠§‰∫ãÂä°Èó¥‰∏çËÉΩ‰øùËØÅÈöîÁ¶ªÊÄßÔºåÂΩìÂ§ö‰∏™Saga‰∫ãÂä°Êìç‰ΩúÂêå‰∏ÄËµÑÊ∫êÊó∂ÔºåÂ∞±‰ºö‰∫ßÁîüÊõ¥Êñ∞‰∏¢Â§±„ÄÅËÑèÊï∞ÊçÆËØªÂèñÁ≠âÈóÆÈ¢òÔºåËøôÊó∂ÈúÄË¶ÅÂú®‰∏öÂä°Â±ÇÊéßÂà∂Âπ∂ÂèëÔºå‰æãÂ¶ÇÔºöÂú®Â∫îÁî®Â±ÇÈù¢Âä†ÈîÅÔºåÊàñËÄÖÂ∫îÁî®Â±ÇÈù¢È¢ÑÂÖàÂÜªÁªìËµÑÊ∫ê„ÄÇ ÂàÜÂ∏ÉÂºè‰∫ãÂä°Ëß£ÂÜ≥ÊñπÊ°àÊØîËæÉ 2PC/3PC ‰æùËµñ‰∫éÊï∞ÊçÆÂ∫ìÔºåËÉΩÂ§üÂæàÂ•ΩÁöÑÊèê‰æõÂº∫‰∏ÄËá¥ÊÄßÂíåÂº∫‰∫ãÂä°ÊÄßÔºå‰ΩÜÁõ∏ÂØπÊù•ËØ¥Âª∂ËøüÊØîËæÉÈ´òÔºåÊØîËæÉÈÄÇÂêà‰º†ÁªüÁöÑÂçï‰ΩìÂ∫îÁî®ÔºåÂú®Âêå‰∏Ä‰∏™ÊñπÊ≥ï‰∏≠Â≠òÂú®Ë∑®Â∫ìÊìç‰ΩúÁöÑÊÉÖÂÜµÔºå‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÂíåÈ´òÊÄßËÉΩË¶ÅÊ±ÇÁöÑÂú∫ÊôØ„ÄÇ TCC ÈÄÇÁî®‰∫éÊâßË°åÊó∂Èó¥Á°ÆÂÆö‰∏îËæÉÁü≠ÔºåÂÆûÊó∂ÊÄßË¶ÅÊ±ÇÈ´òÔºåÂØπÊï∞ÊçÆ‰∏ÄËá¥ÊÄßË¶ÅÊ±ÇÈ´òÔºåÊØîÂ¶Ç‰∫íËÅîÁΩëÈáëËûç‰ºÅ‰∏öÊúÄÊ†∏ÂøÉÁöÑ‰∏â‰∏™ÊúçÂä°Ôºö‰∫§Êòì„ÄÅÊîØ‰ªò„ÄÅË¥¶Âä°„ÄÇ Êú¨Âú∞Ê∂àÊÅØË°®/MQ‰∫ãÂä° ÈÉΩÈÄÇÁî®‰∫é‰∫ãÂä°‰∏≠ÂèÇ‰∏éÊñπÊîØÊåÅÊìç‰ΩúÂπÇÁ≠âÔºåÂØπ‰∏ÄËá¥ÊÄßË¶ÅÊ±Ç‰∏çÈ´òÔºå‰∏öÂä°‰∏äËÉΩÂÆπÂøçÊï∞ÊçÆ‰∏ç‰∏ÄËá¥Âà∞‰∏Ä‰∏™‰∫∫Â∑•Ê£ÄÊü•Âë®ÊúüÔºå‰∫ãÂä°Ê∂âÂèäÁöÑÂèÇ‰∏éÊñπ„ÄÅÂèÇ‰∏éÁéØËäÇËæÉÂ∞ëÔºå‰∏öÂä°‰∏äÊúâÂØπË¥¶/Ê†°È™åÁ≥ªÁªüÂÖúÂ∫ï„ÄÇ Saga‰∫ãÂä° Áî±‰∫éSaga‰∫ãÂä°‰∏çËÉΩ‰øùËØÅÈöîÁ¶ªÊÄßÔºåÈúÄË¶ÅÂú®‰∏öÂä°Â±ÇÊéßÂà∂Âπ∂ÂèëÔºåÈÄÇÂêà‰∫é‰∏öÂä°Âú∫ÊôØ‰∫ãÂä°Âπ∂ÂèëÊìç‰ΩúÂêå‰∏ÄËµÑÊ∫êËæÉÂ∞ëÁöÑÊÉÖÂÜµ„ÄÇ SagaÁõ∏ÊØîÁº∫Â∞ëÈ¢ÑÊèê‰∫§Âä®‰ΩúÔºåÂØºËá¥Ë°•ÂÅøÂä®‰ΩúÁöÑÂÆûÁé∞ÊØîËæÉÈ∫ªÁÉ¶Ôºå‰æãÂ¶Ç‰∏öÂä°ÊòØÂèëÈÄÅÁü≠‰ø°ÔºåË°•ÂÅøÂä®‰ΩúÂàôÂæóÂÜçÂèëÈÄÅ‰∏ÄÊ¨°Áü≠‰ø°ËØ¥ÊòéÊí§ÈîÄÔºåÁî®Êà∑‰ΩìÈ™åÊØîËæÉÂ∑Æ„ÄÇSaga‰∫ãÂä°ËæÉÈÄÇÁî®‰∫éË°•ÂÅøÂä®‰ΩúÂÆπÊòìÂ§ÑÁêÜÁöÑÂú∫ÊôØ„ÄÇ]]></content>
      <categories>
        <category>ÂàÜÂ∏ÉÂºè</category>
      </categories>
      <tags>
        <tag>ÂàÜÂ∏ÉÂºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàÜÂ∏ÉÂºèÂ≠¶‰π†-ÈôêÊµÅÁÆóÊ≥ï]]></title>
    <url>%2Fposts%2F6e0ef647.html</url>
    <content type="text"><![CDATA[ÈôêÊµÅÁöÑ‰ΩúÁî® Áî±‰∫éAPIÊé•Âè£Êó†Ê≥ïÊéßÂà∂Ë∞ÉÁî®ÊñπÁöÑË°å‰∏∫ÔºåÂõ†Ê≠§ÂΩìÈÅáÂà∞Áû¨Êó∂ËØ∑Ê±ÇÈáèÊøÄÂ¢ûÊó∂Ôºå‰ºöÂØºËá¥Êé•Âè£Âç†Áî®ËøáÂ§öÊúçÂä°Âô®ËµÑÊ∫êÔºå‰ΩøÂæóÂÖ∂‰ªñËØ∑Ê±ÇÂìçÂ∫îÈÄüÂ∫¶Èôç‰ΩéÊàñÊòØË∂ÖÊó∂ÔºåÊõ¥ÊúâÁîöËÄÖÂèØËÉΩÂØºËá¥ÊúçÂä°Âô®ÂÆïÊú∫„ÄÇ ÈôêÊµÅ(Rate limiting)ÊåáÂØπÂ∫îÁî®ÊúçÂä°ÁöÑËØ∑Ê±ÇËøõË°åÈôêÂà∂Ôºå‰æãÂ¶ÇÊüê‰∏ÄÊé•Âè£ÁöÑËØ∑Ê±ÇÈôêÂà∂‰∏∫100‰∏™ÊØèÁßí,ÂØπË∂ÖËøáÈôêÂà∂ÁöÑËØ∑Ê±ÇÂàôËøõË°åÂø´ÈÄüÂ§±Ë¥•Êàñ‰∏¢ÂºÉ„ÄÇ ÈôêÊµÅÂèØ‰ª•Â∫îÂØπÔºö ÁÉ≠ÁÇπ‰∏öÂä°Â∏¶Êù•ÁöÑÁ™ÅÂèëËØ∑Ê±ÇÔºõ Ë∞ÉÁî®ÊñπbugÂØºËá¥ÁöÑÁ™ÅÂèëËØ∑Ê±ÇÔºõ ÊÅ∂ÊÑèÊîªÂáªËØ∑Ê±Ç„ÄÇ Âõ†Ê≠§ÔºåÂØπ‰∫éÂÖ¨ÂºÄÁöÑÊé•Âè£ÊúÄÂ•ΩÈááÂèñÈôêÊµÅÊé™ÊñΩ„ÄÇ ‰∏∫‰ªÄ‰πàË¶ÅÂàÜÂ∏ÉÂºèÈôêÊµÅ ‰ΩÜÁ∫ø‰∏ä‰∏öÂä°Âá∫‰∫éÂêÑÁßçÂéüÂõ†ËÄÉËôëÔºåÂ§öÊòØÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºåÂçïËäÇÁÇπÁöÑÈôêÊµÅ‰ªÖËÉΩ‰øùÊä§Ëá™Ë∫´ËäÇÁÇπÔºå‰ΩÜÊó†Ê≥ï‰øùÊä§Â∫îÁî®‰æùËµñÁöÑÂêÑÁßçÊúçÂä°ÔºåÂπ∂‰∏îÂú®ËøõË°åËäÇÁÇπÊâ©ÂÆπ„ÄÅÁº©ÂÆπÊó∂‰πüÊó†Ê≥ïÂáÜÁ°ÆÊéßÂà∂Êï¥‰∏™ÊúçÂä°ÁöÑËØ∑Ê±ÇÈôêÂà∂„ÄÇ ËÄåÂ¶ÇÊûúÂÆûÁé∞‰∫ÜÂàÜÂ∏ÉÂºèÈôêÊµÅÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•Êñπ‰æøÂú∞ÊéßÂà∂Êï¥‰∏™ÊúçÂä°ÈõÜÁæ§ÁöÑËØ∑Ê±ÇÈôêÂà∂Ôºå‰∏îÁî±‰∫éÊï¥‰∏™ÈõÜÁæ§ÁöÑËØ∑Ê±ÇÊï∞ÈáèÂæóÂà∞‰∫ÜÈôêÂà∂ÔºåÂõ†Ê≠§ÊúçÂä°‰æùËµñÁöÑÂêÑÁßçËµÑÊ∫ê‰πüÂæóÂà∞‰∫ÜÈôêÊµÅÁöÑ‰øùÊä§„ÄÇ ÈôêÊµÅÁÆóÊ≥ïÂàÜÁ±ª 1„ÄÅËÆ°Êï∞Âô®ÁÆóÊ≥ïÔºàÂõ∫ÂÆöÊó∂Èó¥Á™óÂè£ÔºâÔºõ 2„ÄÅÊªëÂä®Êó∂Èó¥Á™óÂè£Ôºõ 3„ÄÅ‰ª§ÁâåÊ°∂ÁÆóÊ≥ïÔºõ 4„ÄÅÊºèÊ°∂ÁÆóÊ≥ïÔºõ ËÆ°Êï∞Âô®ÁÆóÊ≥ï ÁÆóÊ≥ïËß£ËØª ËÆ°Êï∞Âô®ÁÆóÊ≥ïÊòØÈôêÊµÅÁÆóÊ≥ïÈáåÊúÄÁÆÄÂçï‰πüÊòØÊúÄÂÆπÊòìÂÆûÁé∞ÁöÑ‰∏ÄÁßçÁÆóÊ≥ï„ÄÇËÆ°Êï∞Âô®Â∞±ÊòØÁªüËÆ°ËÆ∞ÂΩïÂçï‰ΩçÊó∂Èó¥ÂÜÖËøõÂÖ•Á≥ªÁªüÊàñËÄÖÊüê‰∏ÄÊé•Âè£ÁöÑËØ∑Ê±ÇÊ¨°Êï∞ÔºåÂú®ÈôêÂÆöÁöÑÊ¨°Êï∞ÂÜÖÁöÑËØ∑Ê±ÇÂàôÊ≠£Â∏∏Êé•Êî∂Â§ÑÁêÜÔºåË∂ÖËøáÊ¨°Êï∞ÁöÑËØ∑Ê±ÇÂàôÊãíÁªùÊéâÔºåÊàñËÄÖÊîπ‰∏∫ÂºÇÊ≠•Â§ÑÁêÜ„ÄÇ ÊØîÂ¶ÇËßÑÂÆöÔºåÂØπ‰∫éAÊé•Âè£1ÂàÜÈíüÁöÑËÆøÈóÆÊ¨°Êï∞‰∏çËÉΩË∂ÖËøá100‰∏™„ÄÇÈÇ£‰πàÂèØ‰ª•Ëøô‰πàÂÅöÔºöÂú®‰∏ÄÂºÄÂßãÁöÑÊó∂ÂÄôÔºåËÆæÁΩÆ‰∏Ä‰∏™ËÆ°Êï∞Âô®counterÔºåÊØèÂΩì‰∏Ä‰∏™ËØ∑Ê±ÇËøáÊù•ÁöÑÊó∂ÂÄôÔºåcounterÂ∞±Âä†1ÔºåÂ¶ÇÊûúcounterÁöÑÂÄºÂ§ß‰∫é100Âπ∂‰∏îËØ•ËØ∑Ê±Ç‰∏éÁ¨¨‰∏Ä‰∏™ËØ∑Ê±ÇÁöÑÈó¥ÈöîÊó∂Èó¥ËøòÂú®1ÂàÜÈíü‰πãÂÜÖÔºåÈÇ£‰πàËØ¥ÊòéËØ∑Ê±ÇÊï∞ËøáÂ§öÔºõÂ¶ÇÊûúËØ•ËØ∑Ê±Ç‰∏éÁ¨¨‰∏Ä‰∏™ËØ∑Ê±ÇÁöÑÈó¥ÈöîÊó∂Èó¥Â§ß‰∫é1ÂàÜÈíüÔºå‰∏îcounterÁöÑÂÄºËøòÂú®ÈôêÊµÅËåÉÂõ¥ÂÜÖÔºåÈÇ£‰πàÂ∞±ÈáçÁΩÆ counterÔºåÂÖ∑‰ΩìÁÆóÊ≥ïÁöÑÁ§∫ÊÑèÂõæÂ¶Ç‰∏ãÔºö ÁÆóÊ≥ïÁ§∫‰æã ‰ΩøÁî® AomicInteger Êù•ËøõË°åÁªüËÆ°ÂΩìÂâçÊ≠£Âú®Âπ∂ÂèëÊâßË°åÁöÑÊ¨°Êï∞ÔºåÂ¶ÇÊûúË∂ÖËøáÂüüÂÄºÂ∞±Áõ¥Êé•ÊãíÁªùËØ∑Ê±ÇÔºåÊèêÁ§∫Á≥ªÁªüÁπÅÂøô... 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869package com.springboot.whb.study.currentLimiting;import com.google.common.base.Joiner;import org.apache.commons.lang3.concurrent.BasicThreadFactory;import java.time.LocalDateTime;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;import java.util.concurrent.atomic.AtomicInteger;/** * @author: whb * @description: ËÆ°Êï∞Âô®ÈôêÊµÅÁÆóÊ≥ï * ‰ΩøÁî® AomicInteger Êù•ËøõË°åÁªüËÆ°ÂΩìÂâçÊ≠£Âú®Âπ∂ÂèëÊâßË°åÁöÑÊ¨°Êï∞ÔºåÂ¶ÇÊûúË∂ÖËøáÂüüÂÄºÂ∞±Áõ¥Êé•ÊãíÁªùËØ∑Ê±ÇÔºåÊèêÁ§∫Á≥ªÁªüÁπÅÂøô */public class CounterLimiter &#123; /** * ËÆ°Êï∞Âô®ÈôêÊµÅÁÆóÊ≥ïÔºàÊØîËæÉÊö¥Âäõ/Ë∂ÖÂá∫Áõ¥Êé•ÊãíÁªùÔºâ * AtomicÔºåÈôêÂà∂ÊÄªÊï∞ */ private static final AtomicInteger atomic = new AtomicInteger(0); /** * Á∫øÁ®ãÊ±† */ public static final ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(10, 100, 60, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(1000), new BasicThreadFactory.Builder().namingPattern(Joiner.on("-").join("client-thread-pool-", "%s")).build()); /** * ÈôêÊµÅ */ private void atomicLimiter() &#123; // ÊúÄÂ§ßÊîØÊåÅ 3 ÂÄã if (atomic.get() &gt;= 3) &#123; System.out.println(LocalDateTime.now() + " - " + Thread.currentThread().getName() + " - " + "ÊãíÁµï..."); &#125; else &#123; try &#123; atomic.incrementAndGet(); //Â§ÑÁêÜÊ†∏ÂøÉÈÄªËæë System.out.println(LocalDateTime.now() + " - " + Thread.currentThread().getName() + " - " + "ÈÄöËøá..."); TimeUnit.SECONDS.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; atomic.decrementAndGet(); &#125; &#125; &#125; /** * ÊµãËØïÈôêÊµÅ * * @throws InterruptedException */ public void testAtomicLimiter() throws InterruptedException &#123; for (int i = 0; i &lt; 5; i++) &#123; threadPoolExecutor.execute(this::atomicLimiter); &#125; TimeUnit.SECONDS.sleep(5); &#125; /** * mainÊñπÊ≥ïË∞ÉÁî® */ public static void main(String[] args) throws InterruptedException &#123; CounterLimiter counterLimiter = new CounterLimiter(); counterLimiter.testAtomicLimiter(); &#125;&#125; ËøêË°åÁªìÊûú ËÆ°Êï∞Âô®ÁÆóÊ≥ïËôΩÁÑ∂ÁÆÄÂçïÔºå‰ΩÜÊØîËæÉÁ≤óÊîæÔºåÂ≠òÂú®‰∏Ä‰∏™ÂçÅÂàÜËá¥ÂëΩÁöÑÈóÆÈ¢òÔºåÈÇ£Â∞±ÊòØ‰∏¥ÁïåÈóÆÈ¢òÔºåÂ¶Ç‰∏ãÂõæÔºö Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÂÅáËÆæÊúâ‰∏Ä‰∏™ÊÅ∂ÊÑèÁî®Êà∑Ôºå‰ªñÂú®0:59Êó∂ÔºåÁû¨Èó¥ÂèëÈÄÅ‰∫Ü100‰∏™ËØ∑Ê±ÇÔºåÂπ∂‰∏î1:00ÂèàÁû¨Èó¥ÂèëÈÄÅ‰∫Ü100‰∏™ËØ∑Ê±ÇÔºåÈÇ£‰πàÂÖ∂ÂÆûËøô‰∏™Áî®Êà∑Âú® 1ÁßíÈáåÈù¢ÔºåÁû¨Èó¥ÂèëÈÄÅ‰∫Ü200‰∏™ËØ∑Ê±Ç„ÄÇÊàë‰ª¨ÂàöÊâçËßÑÂÆöÁöÑÊòØ1ÂàÜÈíüÊúÄÂ§ö100‰∏™ËØ∑Ê±ÇÔºå‰πüÂ∞±ÊòØÊØèÁßíÈíüÊúÄÂ§ö1.7‰∏™ËØ∑Ê±ÇÔºåÁî®Êà∑ÈÄöËøáÂú®Êó∂Èó¥Á™óÂè£ÁöÑÈáçÁΩÆËäÇÁÇπÂ§ÑÁ™ÅÂèëËØ∑Ê±ÇÔºåÂèØ‰ª•Áû¨Èó¥Ë∂ÖËøáÊàë‰ª¨ÁöÑÈÄüÁéáÈôêÂà∂„ÄÇÁî®Êà∑ÊúâÂèØËÉΩÈÄöËøáÁÆóÊ≥ïÁöÑËøô‰∏™ÊºèÊ¥ûÔºåÁû¨Èó¥ÂéãÂûÆÊàë‰ª¨ÁöÑÂ∫îÁî®„ÄÇ ÂÖ∂ÂÆûËøô‰∏™ÈóÆÈ¢òÁöÑÊú¨Ë¥®Â∞±ÊòØÁªüËÆ°ÁöÑÁ≤æÂ∫¶Â§™‰ΩéÔºåÈÇ£Â¶Ç‰ΩïÈôç‰Ωé‰∏¥ÁïåÈóÆÈ¢òÁöÑÂΩ±ÂìçÔºüÁúã‰∏ãÈù¢ÁöÑÊªëÂä®Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï„ÄÇ ÊªëÂä®Êó∂Èó¥Á™óÂè£ ÁÆóÊ≥ïËß£ËØª ÊªëÂä®Á™óÂè£ÔºåÂèàÁß∞rolling windowÔºåË∑üTCP‰∏≠ÁöÑÊªëÂä®Á™óÂè£ÂêçÁß∞‰∏ÄËá¥Ôºå‰ΩÜË¶ÅÂå∫ÂàÜÂºÄÊù•„ÄÇÂÖàÁî®‰∏ÄÂº†ÂõæËß£Èáä‰∏ãÊªëÂä®Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ïÔºö Â¶Ç‰∏äÂõæÔºåÊï¥‰∏™Á∫¢Ëâ≤ÁöÑÁü©ÂΩ¢Ê°ÜË°®Á§∫‰∏Ä‰∏™Êó∂Èó¥Á™óÂè£ÔºåÂú®ËÆ°Êï∞Âô®ÁÆóÊ≥ï‰∏≠ÔºåÊàë‰ª¨ËßÑÂÆö‰∏Ä‰∏™Êó∂Èó¥Á™óÂè£Â∞±ÊòØ‰∏ÄÂàÜÈíü„ÄÇÂú®ÊªëÂä®Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï‰∏≠Êàë‰ª¨Â∞ÜÊªëÂä®Á™óÂè£ ÂàíÊàê‰∫Ü6Ê†ºÔºåÊâÄ‰ª•ÊØèÊ†º‰ª£Ë°®ÁöÑÊòØ10ÁßíÈíü„ÄÇÊØèËøá10ÁßíÈíüÔºåÊó∂Èó¥Á™óÂè£Â∞±‰ºöÂæÄÂè≥ÊªëÂä®‰∏ÄÊ†º„ÄÇÊØè‰∏Ä‰∏™Ê†ºÂ≠êÈÉΩÊúâËá™Â∑±Áã¨Á´ãÁöÑËÆ°Êï∞Âô®counterÔºåÊØîÂ¶ÇÂΩì‰∏Ä‰∏™ËØ∑Ê±Ç Âú®0:35ÁßíÁöÑÊó∂ÂÄôÂà∞ËææÔºåÈÇ£‰πà0:30~0:39ÂØπÂ∫îÁöÑcounterÂ∞±‰ºöÂä†1„ÄÇ ÈÇ£‰πàÊªëÂä®Á™óÂè£ÊÄé‰πàËß£ÂÜ≥ÂàöÊâçÁöÑ‰∏¥ÁïåÈóÆÈ¢òÁöÑÂë¢ÔºüÁúã‰∏äÂõæÔºå0:59Âà∞ËææÁöÑ100‰∏™ËØ∑Ê±Ç‰ºöËêΩÂú®ÁÅ∞Ëâ≤ÁöÑÊ†ºÂ≠ê‰∏≠ÔºåËÄå1:00Âà∞ËææÁöÑËØ∑Ê±Ç‰ºöËêΩÂú®Á∫¢Ëâ≤ÁöÑÊ†ºÂ≠ê‰∏≠„ÄÇÂΩìÊó∂Èó¥Âà∞Ëææ1:00Êó∂ÔºåÁ™óÂè£‰ºöÂæÄÂè≥ÁßªÂä®‰∏ÄÊ†ºÔºåÈÇ£‰πàÊ≠§Êó∂Êó∂Èó¥Á™óÂè£ÂÜÖÁöÑÊÄªËØ∑Ê±ÇÊï∞Èáè‰∏ÄÂÖ±ÊòØ200‰∏™ÔºåË∂ÖËøá‰∫ÜÈôêÂÆöÁöÑ100‰∏™ÔºåÊâÄ‰ª•Ê≠§Êó∂ËÉΩÂ§üÊ£ÄÊµãÂá∫Êù•Ëß¶Âèë‰∫ÜÈôêÊµÅ„ÄÇ ÂÜçÂõûÈ°æ‰∏Ä‰∏ãÂàöÊâçÁöÑËÆ°Êï∞Âô®ÁÆóÊ≥ïÔºåÂèØ‰ª•ÂèëÁé∞ÔºåËÆ°Êï∞Âô®ÁÆóÊ≥ïÂÖ∂ÂÆûÂ∞±ÊòØÊªëÂä®Á™óÂè£ÁÆóÊ≥ï„ÄÇÂè™ÊòØÂÆÉÊ≤°ÊúâÂØπÊó∂Èó¥Á™óÂè£ÂÅöËøõ‰∏ÄÊ≠•Âú∞ÂàíÂàÜÔºåÊâÄ‰ª•Âè™Êúâ1Ê†º„ÄÇ Áî±Ê≠§ÂèØËßÅÔºåÂΩìÊªëÂä®Á™óÂè£ÁöÑÊ†ºÂ≠êÂàíÂàÜÁöÑË∂äÂ§öÔºåÈÇ£‰πàÊªëÂä®Á™óÂè£ÁöÑÊªöÂä®Â∞±Ë∂äÂπ≥ÊªëÔºåÈôêÊµÅÁöÑÁªüËÆ°Â∞±‰ºöË∂äÁ≤æÁ°Æ„ÄÇ ÁÆóÊ≥ïÁ§∫‰æã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141package com.springboot.whb.study.currentLimiting;/** * @author: whb * @description: ÊªëÂä®Êó∂Èó¥Á™óÂè£ÈôêÊµÅÁÆóÊ≥ï */import java.util.Iterator;import java.util.Random;import java.util.concurrent.ConcurrentLinkedQueue;import java.util.stream.IntStream;public class TimeWindowLimited &#123; /** * ÁºìÂ≠òËØ∑Ê±ÇÁöÑÈòüÂàó */ private ConcurrentLinkedQueue&lt;Long&gt; queue = new ConcurrentLinkedQueue&lt;&gt;(); /** * ÊªëÂä®Êó∂Èó¥Á™óÂè£Â§ßÂ∞è */ private int seconds; /** * ÊúÄÂ§ßÂèØÊé•ÂèóËØ∑Ê±Ç */ private int max; public TimeWindowLimited(int max, int timeWindowOfSeconds) &#123; this.seconds = timeWindowOfSeconds; this.max = max; new Thread(() -&gt; &#123; for (; ; ) &#123; clean(); try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; Thread.currentThread().interrupt(); &#125; &#125; &#125;).start(); &#125; /** * Ëé∑Âèñ‰ª§ÁâåÔºåÂπ∂‰∏îÊ∑ªÂä†Êó∂Èó¥ */ public void take() &#123; long start = System.currentTimeMillis(); try &#123; int size = sizeOfValid(); if (size &gt; max - 1) &#123; System.err.println(" ÈòüÂàóÂ∑≤Êª°ÔºåÈòüÂàóÂÆπÈáè:" + queue.size() + ",max:" + max + ",queue:" + printQueue()); throw new IllegalStateException("full"); &#125; synchronized (queue) &#123; if (sizeOfValid() &gt; max - 1) &#123; System.err.println(" ÈòüÂàóÂ∑≤Êª°: in synchronized,size:" + queue.size() + ",max:" + max + ",queue:" + printQueue()); throw new IllegalStateException("full"); &#125; this.queue.offer(System.currentTimeMillis()); &#125; System.out.println(" queue: d,size:" + queue.size() + ",max:" + max + ",queue:" + printQueue()); &#125; finally &#123; System.out.println("ËÄóÊó∂:" + (System.currentTimeMillis() - start) + " ms"); &#125; &#125; /** * ÊâìÂç∞ÈòüÂàóÂÜÖÂÆπ * * @return */ private String printQueue() &#123; Iterator&lt;Long&gt; it = queue.iterator(); StringBuilder sb = new StringBuilder(); while (it.hasNext()) &#123; Long t = it.next(); sb.append(" ").append(t); &#125; return sb.toString(); &#125; /** * ÊúâÊïàËØ∑Ê±Ç * * @return */ public int sizeOfValid() &#123; Iterator&lt;Long&gt; it = queue.iterator(); Long ms = System.currentTimeMillis() - seconds * 1000; int count = 0; while (it.hasNext()) &#123; long t = it.next(); if (t &gt; ms) &#123; count++; &#125; &#125; return count; &#125; /** * Ê∏ÖÁêÜ */ public void clean() &#123; Long c = System.currentTimeMillis() - seconds * 1000; Long tl = null; System.out.println("peek: " + queue.peek() + "c:" + c); while ((tl = queue.peek()) != null &amp;&amp; tl &lt; c) &#123; System.out.println("peek: t:" + tl); queue.poll(); &#125; &#125; public static void main(String[] args) &#123; final TimeWindowLimited timeWindow = new TimeWindowLimited(200, 2); IntStream.range(0, 100).forEach((i) -&gt; &#123; new Thread(() -&gt; &#123; for (; ; ) &#123; System.out.println("before take i:" + i); try &#123; Thread.sleep(new Random().nextInt(20) * 100); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; try &#123; timeWindow.take(); System.out.println("some option, i:" + i); &#125; catch (Exception e) &#123; System.err.println(" take i:" + i + ", encounter error:" + e.getMessage()); try &#123; Thread.sleep(10L); &#125; catch (InterruptedException e1) &#123; e1.printStackTrace(); &#125; continue; &#125; System.out.println("after take i:" + i); &#125; &#125;).start(); &#125;); &#125;&#125; ËøêË°åÁªìÊûú ÊºèÊ°∂ÁÆóÊ≥ï ÁÆóÊ≥ïËß£ËØª ÊºèÊ°∂ÁÆóÊ≥ïÔºàLeaky BucketÔºâÔºö‰∏ªË¶ÅÁõÆÁöÑÊòØÊéßÂà∂Êï∞ÊçÆÊ≥®ÂÖ•Âà∞ÁΩëÁªúÁöÑÈÄüÁéáÔºåÂπ≥ÊªëÁΩëÁªú‰∏äÁöÑÁ™ÅÂèëÊµÅÈáèÔºåÊï∞ÊçÆÂèØ‰ª•‰ª•‰ªªÊÑèÈÄüÂ∫¶ÊµÅÂÖ•Âà∞ÊºèÊ°∂‰∏≠„ÄÇÊºèÊ°∂ÁÆóÊ≥ïÊèê‰æõ‰∫Ü‰∏ÄÁßçÊú∫Âà∂ÔºåÈÄöËøáÂÆÉÔºåÁ™ÅÂèëÊµÅÈáèÂèØ‰ª•Ë¢´Êï¥ÂΩ¢‰ª•‰æø‰∏∫ÁΩëÁªúÊèê‰æõ‰∏Ä‰∏™Á®≥ÂÆöÁöÑÊµÅÈáè„ÄÇ ÊºèÊ°∂ÂèØ‰ª•Áúã‰ΩúÊòØ‰∏Ä‰∏™Â∏¶ÊúâÂ∏∏ÈáèÊúçÂä°Êó∂Èó¥ÁöÑÂçïÊúçÂä°Âô®ÈòüÂàóÔºåÂ¶ÇÊûúÊºèÊ°∂‰∏∫Á©∫ÔºåÂàô‰∏çÈúÄË¶ÅÊµÅÂá∫Ê∞¥Êª¥ÔºåÂ¶ÇÊûúÊºèÊ°∂ÔºàÂåÖÁºìÂ≠òÔºâÊ∫¢Âá∫ÔºåÈÇ£‰πàÊ∞¥Êª¥‰ºöË¢´Ê∫¢Âá∫‰∏¢ÂºÉ„ÄÇ Áî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÊèèËø∞Â∞±ÊòØÊ≥®Ê∞¥ÊºèÊ∞¥ËøáÁ®ãÔºåÂæÄÊ°∂‰∏≠‰ª•‰∏ÄÂÆöÈÄüÁéáÊµÅÂá∫Ê∞¥Ôºå‰ª•‰ªªÊÑèÈÄüÁéáÊµÅÂÖ•Ê∞¥ÔºåÂΩìÊ∞¥Ë∂ÖËøáÊ°∂ÊµÅÈáèÂàô‰∏¢ÂºÉÔºåÂõ†‰∏∫Ê°∂ÂÆπÈáèÊòØ‰∏çÂèòÁöÑÔºå‰øùËØÅ‰∫ÜÊï¥‰ΩìÁöÑÈÄüÁéá„ÄÇ ÁÆóÊ≥ïÁ§∫‰æã ÊºèÊ°∂ÁÆóÊ≥ïÂèØ‰ª•ÈÄöËøá ‰ø°Âè∑ÈáèÔºàSemaphoreÔºâ ÁöÑÊñπÂºèÂÆûÁé∞ÔºåÂæàÂ•ΩÁöÑËææÂà∞ÂâäÂ≥∞ÁöÑÁõÆÁöÑÔºåÂ¶Ç‰∏ãÁ§∫‰æã‰ª£Á†ÅÔºåÈòüÂàó‰∏≠‰ªªÂä°Â≠òÊ¥ª‰∏™Êï∞Â∞±Â¶ÇÂêåÊòØÊ∞¥Ê°∂ÊúÄÂ§öËÉΩÁõõË£ÖÁöÑÊ∞¥ÈáèÔºåÂΩìË∂ÖÂá∫Ëøô‰∏™ÈòÄÂÄºÂ∞±‰ºö‰∏¢ÂºÉ‰ªªÂä°.... 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package com.springboot.whb.study.currentLimiting;import com.google.common.base.Joiner;import org.apache.commons.lang3.concurrent.BasicThreadFactory;import java.time.LocalDateTime;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.Semaphore;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;/** * @author: whb * @description: ÊºèÊ°∂ÈôêÊµÅÁÆóÊ≥ï */public class LeakyBucket &#123; /** * ‰ø°Âè∑ÈáèÔºåÁî®Êù•ËææÂà∞ÂâäÂ≥∞ÁöÑÁõÆÁöÑÔºåÂπ≥ÊªëÊµÅÈáè */ private static final Semaphore semaphore = new Semaphore(3); /** * Á∫øÁ®ãÊ±† */ public static final ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(10, 100, 60, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(1000), new BasicThreadFactory.Builder().namingPattern(Joiner.on("-").join("client-thread-pool-", "%s")).build()); /** * ÈôêÊµÅÁÆóÊ≥ï */ private void semaphoreLimiter() &#123; // ÈòüÂàó‰∏≠ÂÖÅËÆ∏Â≠òÊ¥ªÁöÑ‰ªªÂä°‰∏™Êï∞‰∏çËÉΩË∂ÖËøá 5 ‰∏™ if (semaphore.getQueueLength() &gt; 5) &#123; System.out.println(LocalDateTime.now() + " - " + Thread.currentThread().getName() + " - ÊãíÁµï..."); &#125; else &#123; try &#123; semaphore.acquire(); System.out.println(LocalDateTime.now() + " - " + Thread.currentThread().getName() + " - ÈÄöËøá..."); //Â§ÑÁêÜÊ†∏ÂøÉÈÄªËæë TimeUnit.SECONDS.sleep(2); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; semaphore.release(); &#125; &#125; &#125; /** * ÊµãËØïÈôêÊµÅÁÆóÊ≥ï * * @throws InterruptedException */ public void testSemaphore() throws InterruptedException &#123; for (int i = 0; i &lt; 10; i++) &#123; threadPoolExecutor.execute(this::semaphoreLimiter); &#125; TimeUnit.SECONDS.sleep(5); &#125; /** * mainÊñπÊ≥ï‰∏≠ÊâßË°åÊµãËØïÊñπÊ≥ï * * @param args * @throws InterruptedException */ public static void main(String[] args) throws InterruptedException &#123; LeakyBucket leakyBucket = new LeakyBucket(); leakyBucket.testSemaphore(); &#125;&#125; ËøêË°åÁªìÊûú ‰∏ÄÂÖ± 10 ‰∏™Á∫øÁ®ãÂêåÊó∂ËØ∑Ê±ÇÔºåÂàùÂßã‰ø°Âè∑Èáè‰∏∫3ÔºåË°®Á§∫ÊúÄÂ§öÂèØ‰ª•ÂêåÊó∂Â§ÑÁêÜ 3 ‰∏™‰ªªÂä°ÔºåË∂ÖÂá∫ËøõÂÖ•ÁºìÂÜ≤Âå∫ÊéíÈòüÁ≠âÂæÖÔºåÂΩìÁºìÂÜ≤Âå∫Êª°‰∫ÜÂêéÂàôÊãíÁªùÊé•Êî∂Êñ∞ÁöÑËØ∑Ê±Ç... ‰ª§ÁâåÊ°∂ÁÆóÊ≥ï ÁÆóÊ≥ïËß£ËØª ‰ª§ÁâåÊ°∂ÁÆóÊ≥ïÊòØÊØîËæÉÂ∏∏ËßÅÁöÑÈôêÊµÅÁÆóÊ≥ï‰πã‰∏ÄÔºåÂ§ßÊ¶ÇÊèèËø∞Â¶Ç‰∏ãÔºö ÊâÄÊúâÁöÑËØ∑Ê±ÇÂú®Â§ÑÁêÜ‰πãÂâçÈÉΩÈúÄË¶ÅÊãøÂà∞‰∏Ä‰∏™ÂèØÁî®ÁöÑ‰ª§ÁâåÊâç‰ºöË¢´Â§ÑÁêÜÔºõ Ê†πÊçÆÈôêÊµÅÂ§ßÂ∞èÔºåËÆæÁΩÆÊåâÁÖß‰∏ÄÂÆöÁöÑÈÄüÁéáÂæÄÊ°∂ÈáåÊ∑ªÂä†‰ª§ÁâåÔºõ Ê°∂ËÆæÁΩÆÊúÄÂ§ßÁöÑÊîæÁΩÆ‰ª§ÁâåÈôêÂà∂ÔºåÂΩìÊ°∂Êª°Êó∂„ÄÅÊñ∞Ê∑ªÂä†ÁöÑ‰ª§ÁâåÂ∞±Ë¢´‰∏¢ÂºÉÊàñËÄÖÊãíÁªùÔºõ ËØ∑Ê±ÇËææÂà∞ÂêéÈ¶ñÂÖàË¶ÅËé∑Âèñ‰ª§ÁâåÊ°∂‰∏≠ÁöÑ‰ª§ÁâåÔºåÊãøÁùÄ‰ª§ÁâåÊâçÂèØ‰ª•ËøõË°åÂÖ∂‰ªñÁöÑ‰∏öÂä°ÈÄªËæëÔºåÂ§ÑÁêÜÂÆå‰∏öÂä°ÈÄªËæë‰πãÂêéÔºåÂ∞Ü‰ª§ÁâåÁõ¥Êé•Âà†Èô§Ôºõ ‰ª§ÁâåÊ°∂ÊúâÊúÄ‰ΩéÈôêÈ¢ùÔºåÂΩìÊ°∂‰∏≠ÁöÑ‰ª§ÁâåËææÂà∞ÊúÄ‰ΩéÈôêÈ¢ùÁöÑÊó∂ÂÄôÔºåËØ∑Ê±ÇÂ§ÑÁêÜÂÆå‰πãÂêéÂ∞Ü‰∏ç‰ºöÂà†Èô§‰ª§ÁâåÔºå‰ª•Ê≠§‰øùËØÅË∂≥Â§üÁöÑÈôêÊµÅÔºõ ÁÆóÊ≥ïÁ§∫‰æã Âú®Google Guava‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™RateLimiter Â∑•ÂÖ∑Á±ªÔºåÂ∞±ÊòØÂü∫‰∫é‰ª§ÁâåÊ°∂ÁÆóÊ≥ïÂÆûÁé∞Âπ≥ÊªëÁ™ÅÂèëÁöÑÈôêÊµÅÁ≠ñÁï•. ‰ª§ÁâåÊ°∂ÁöÑÂ•ΩÂ§ÑÊòØÂèØ‰ª•Êñπ‰æøÁöÑÊîπÂèòÈÄüÂ∫¶Ôºå‰∏ÄÊó¶ÈúÄË¶ÅÊèêÈ´òÈÄüÁéáÔºåÂàôÊåâÈúÄÊèêÈ´òÊîæÂÖ•Ê°∂‰∏≠ÁöÑ‰ª§ÁâåÁöÑÈÄüÁéá„ÄÇ‰∏ÄËà¨‰ºöÂÆöÊó∂(ÊØîÂ¶Ç1000ÊØ´Áßí)ÂæÄÊ°∂‰∏≠Â¢ûÂä†‰∏ÄÂÆöÊï∞ÈáèÁöÑ‰ª§Áâå, Êúâ‰∫õÂèòÁßçÁÆóÊ≥ïÂàôÂèØ‰ª•ÂÆûÊó∂ÁöÑËÆ°ÁÆóÂ∫îËØ•Â¢ûÂä†ÁöÑ‰ª§ÁâåÁöÑÊï∞Èáè„ÄÇ Âú®Á§∫‰æã‰ª£Á†Å‰∏≠‰∏∫ÊØèÁßí‰∏≠‰∫ßÁîü 2 ‰∏™‰ª§ÁâåÔºåÊÑèÂë≥ÁùÄÊØè500ÊØ´Áßí‰ºö‰∫ßÁîü‰∏Ä‰∏™‰ª§Áâå„ÄÇ limiter.acquire(num) Ë°®Á§∫Ê∂àË¥πÂ§öÂ∞ë‰∏™‰ª§Áâå„ÄÇÂΩìÊ°∂‰∏≠ÊúâË∂≥Â§üÁöÑ‰ª§ÁâåÊó∂ÔºåÂàôÁõ¥Êé•ËøîÂõû0ÔºåÂê¶ÂàôÈòªÂ°ûÔºåÁõ¥Âà∞ÊúâÂèØÁî®ÁöÑ‰ª§ÁâåÊï∞ÊâçËøîÂõûÔºåËøîÂõûÁöÑÂÄº‰∏∫ÈòªÂ°ûÁöÑÊó∂Èó¥„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package com.springboot.whb.study.currentLimiting;import com.google.common.base.Joiner;import com.google.common.util.concurrent.RateLimiter;import org.apache.commons.lang3.concurrent.BasicThreadFactory;import java.time.LocalDateTime;import java.util.concurrent.*;/** * @author: whb * @description: Ë∞∑Ê≠å‰ª§ÁâåÊ°∂ÁÆóÊ≥ïÊµãËØï */public class TokenBucket &#123; /** * ÊØèÁßíÁîüÊàê2‰∏™‰ª§Áâå */ private static final RateLimiter limiter = RateLimiter.create(2); /** * Á∫øÁ®ãÊ±† */ public static final ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(10, 100, 60, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(1000), new BasicThreadFactory.Builder().namingPattern(Joiner.on("-").join("client-thread-pool-", "%s")).build()); /** * ÈôêÊµÅ */ private void rateLimiter() &#123; // ÈªòËÆ§Â∞±ÊòØ 1 final double acquire = limiter.acquire(1); System.out.println("ÂΩìÂâçÊó∂Èó¥ - " + LocalDateTime.now() + " - " + Thread.currentThread().getName() + " - ÈòªÂ°û - " + acquire + " ÈÄöËøá..."); &#125; /** * ÈôêÊµÅÁÆóÊ≥ïÊµãËØïÊé•Âè£ * * @throws InterruptedException */ public void testRateLimiter() throws InterruptedException &#123; for (int i = 0; i &lt; 5; i++) &#123; threadPoolExecutor.execute(this::rateLimiter); &#125; TimeUnit.SECONDS.sleep(5); &#125; /** * mainÊñπÊ≥ï‰∏≠Ë∞ÉÁî® * * @param args * @throws InterruptedException */ public static void main(String[] args) throws InterruptedException &#123; TokenBucket rateLimiterTest = new TokenBucket(); rateLimiterTest.testRateLimiter(); &#125;&#125; ËøêË°åÁªìÊûú ÈÄöËøáÊéßÂà∂Âè∞ÁöÑËæìÂá∫ÂèØ‰ª•ÂæàÁõ¥ËßÇÁöÑÁúãÂá∫ÊØè‰∏™‰ª§Áâå‰∫ßÁîüÊó∂Èó¥Èó¥ÈöîÂ§ßÁ∫¶Âú® 500 ÊØ´ÁßíÂ∑¶Âè≥„ÄÇ]]></content>
      <categories>
        <category>ÂàÜÂ∏ÉÂºè</category>
      </categories>
      <tags>
        <tag>ÂàÜÂ∏ÉÂºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàÜÂ∏ÉÂºèÂ≠¶‰π†-ÂàÜÂ∏ÉÂºèÂÖ®Â±ÄÂîØ‰∏ÄID]]></title>
    <url>%2Fposts%2Fa8c8e58f.html</url>
    <content type="text"><![CDATA[‰ªÄ‰πàÊòØÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂîØ‰∏ÄID Âú®Â§çÊùÇÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÔºåÂæÄÂæÄÈúÄË¶ÅÂØπÂ§ßÈáèÁöÑÊï∞ÊçÆÂíåÊ∂àÊÅØËøõË°åÂîØ‰∏ÄÊ†áËØÜ„ÄÇ Â¶ÇÂú®ÈáëËûç„ÄÅÁîµÂïÜ„ÄÅÊîØ‰ªò„ÄÅÁ≠â‰∫ßÂìÅÁöÑÁ≥ªÁªü‰∏≠ÔºåÊï∞ÊçÆÊó•Ê∏êÂ¢ûÈïøÔºåÂØπÊï∞ÊçÆÂàÜÂ∫ìÂàÜË°®ÂêéÈúÄË¶ÅÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄIDÊù•Ê†áËØÜ‰∏ÄÊù°Êï∞ÊçÆÊàñÊ∂àÊÅØÔºåÊï∞ÊçÆÂ∫ìÁöÑËá™Â¢ûIDÊòæÁÑ∂‰∏çËÉΩÊª°Ë∂≥ÈúÄÊ±ÇÔºåÊ≠§Êó∂‰∏Ä‰∏™ËÉΩÂ§üÁîüÊàêÂÖ®Â±ÄÂîØ‰∏ÄIDÁöÑÁ≥ªÁªüÊòØÈùûÂ∏∏ÂøÖË¶ÅÁöÑ„ÄÇ ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂîØ‰∏ÄIDÁöÑÁâπÁÇπ ÂÖ®Â±ÄÂîØ‰∏ÄÊÄßÔºö‰∏çËÉΩÂá∫Áé∞ÈáçÂ§çÁöÑIDÂè∑ÔºåÊó¢ÁÑ∂ÊòØÂîØ‰∏ÄÊ†áËØÜÔºåËøôÊòØÊúÄÂü∫Êú¨ÁöÑË¶ÅÊ±Ç„ÄÇ Ë∂ãÂäøÈÄíÂ¢ûÔºöÂú®MySQL InnoDBÂºïÊìé‰∏≠‰ΩøÁî®ÁöÑÊòØËÅöÈõÜÁ¥¢ÂºïÔºåÁî±‰∫éÂ§öÊï∞RDBMS‰ΩøÁî®B-treeÁöÑÊï∞ÊçÆÁªìÊûÑÊù•Â≠òÂÇ®Á¥¢ÂºïÊï∞ÊçÆÔºåÂú®‰∏ªÈîÆÁöÑÈÄâÊã©‰∏äÈù¢Êàë‰ª¨Â∫îËØ•Â∞ΩÈáè‰ΩøÁî®ÊúâÂ∫èÁöÑ‰∏ªÈîÆ‰øùËØÅÂÜôÂÖ•ÊÄßËÉΩ„ÄÇ ÂçïË∞ÉÈÄíÂ¢ûÔºö‰øùËØÅ‰∏ã‰∏Ä‰∏™ID‰∏ÄÂÆöÂ§ß‰∫é‰∏ä‰∏Ä‰∏™IDÔºå‰æãÂ¶Ç‰∫ãÂä°ÁâàÊú¨Âè∑„ÄÅIMÂ¢ûÈáèÊ∂àÊÅØ„ÄÅÊéíÂ∫èÁ≠âÁâπÊÆäÈúÄÊ±Ç„ÄÇ ‰ø°ÊÅØÂÆâÂÖ®ÔºöÂ¶ÇÊûúIDÊòØËøûÁª≠ÁöÑÔºåÊÅ∂ÊÑèÁî®Êà∑ÁöÑÊâíÂèñÂ∑•‰ΩúÂ∞±ÈùûÂ∏∏ÂÆπÊòìÂÅö‰∫ÜÔºåÁõ¥Êé•ÊåâÁÖßÈ°∫Â∫è‰∏ãËΩΩÊåáÂÆöURLÂç≥ÂèØÔºõÂ¶ÇÊûúÊòØËÆ¢ÂçïÂè∑Â∞±Êõ¥Âç±Èô©‰∫Ü„ÄÇÊâÄ‰ª•Âú®‰∏Ä‰∫õÂ∫îÁî®Âú∫ÊôØ‰∏ãÔºå‰ºöÈúÄË¶ÅIDÊó†ËßÑÂàô„ÄÅ‰∏çËßÑÂàô„ÄÇ ÂêåÊó∂Èô§‰∫ÜÂØπIDÂè∑Á†ÅËá™Ë∫´ÁöÑË¶ÅÊ±ÇÔºå‰∏öÂä°ËøòÂØπIDÂè∑ÁîüÊàêÁ≥ªÁªüÁöÑÂèØÁî®ÊÄßË¶ÅÊ±ÇÊûÅÈ´òÔºåÊÉ≥Ë±°‰∏Ä‰∏ãÔºåÂ¶ÇÊûúIDÁîüÊàêÁ≥ªÁªüÁò´Áó™ÔºåËøôÂ∞±‰ºöÂ∏¶Êù•‰∏ÄÂú∫ÁÅæÈöæ„ÄÇ Áî±Ê≠§ÊÄªÁªì‰∏ã‰∏Ä‰∏™IDÁîüÊàêÁ≥ªÁªüÂ∫îËØ•ÂÅöÂà∞Â¶Ç‰∏ãÂá†ÁÇπÔºö Âπ≥ÂùáÂª∂ËøüÂíåTP999Âª∂ËøüÈÉΩË¶ÅÂ∞ΩÂèØËÉΩ‰ΩéÔºõ ÂèØÁî®ÊÄß5‰∏™9Ôºõ È´òQPS„ÄÇ ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂîØ‰∏ÄIDÂÆûÁé∞ÊñπÊ°à UUID UUIDÊòØÊåáÂú®‰∏ÄÂè∞Êú∫Âô®Âú®Âêå‰∏ÄÊó∂Èó¥‰∏≠ÁîüÊàêÁöÑÊï∞Â≠óÂú®ÊâÄÊúâÊú∫Âô®‰∏≠ÈÉΩÊòØÂîØ‰∏ÄÁöÑ„ÄÇÊåâÁÖßÂºÄÊîæËΩØ‰ª∂Âü∫Èáë‰ºö(OSF)Âà∂ÂÆöÁöÑÊ†áÂáÜËÆ°ÁÆóÔºåÁî®Âà∞‰∫Ü‰ª•Â§™ÁΩëÂç°Âú∞ÂùÄ„ÄÅÁ∫≥ÁßíÁ∫ßÊó∂Èó¥„ÄÅËäØÁâáIDÁ†ÅÂíåËÆ∏Â§öÂèØËÉΩÁöÑÊï∞Â≠ó UUIDÁî±‰ª•‰∏ãÂá†ÈÉ®ÂàÜÁöÑÁªÑÂêàÔºö Ôºà1ÔºâÂΩìÂâçÊó•ÊúüÂíåÊó∂Èó¥„ÄÇ Ôºà2ÔºâÊó∂ÈíüÂ∫èÂàó„ÄÇ Ôºà3ÔºâÂÖ®Â±ÄÂîØ‰∏ÄÁöÑIEEEÊú∫Âô®ËØÜÂà´Âè∑ÔºåÂ¶ÇÊûúÊúâÁΩëÂç°Ôºå‰ªéÁΩëÂç°MACÂú∞ÂùÄËé∑ÂæóÔºåÊ≤°ÊúâÁΩëÂç°‰ª•ÂÖ∂‰ªñÊñπÂºèËé∑Âæó„ÄÇ Ê†áÂáÜÁöÑUUIDÊ†ºÂºè‰∏∫Ôºöxxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx (8-4-4-4-12)Ôºå‰ª•ËøûÂ≠óÂè∑ÂàÜ‰∏∫‰∫îÊÆµÂΩ¢ÂºèÁöÑ36‰∏™Â≠óÁ¨¶ÔºåÁ§∫‰æãÔºö550e8400-e29b-41d4-a716-446655440000 JavaÊ†áÂáÜÁ±ªÂ∫ì‰∏≠Â∑≤ÁªèÊèê‰æõ‰∫ÜUUIDÁöÑAPI„ÄÇ 1UUID.randomUUID(); ‰ºòÁÇπ ÊÄßËÉΩÈùûÂ∏∏È´òÔºöÊú¨Âú∞ÁîüÊàêÔºåÊ≤°ÊúâÁΩëÁªúÊ∂àËÄó„ÄÇ Áº∫ÁÇπ ‰∏çÊòìÂ≠òÂÇ®ÔºöUUIDÂ§™ÈïøÔºå16Â≠óËäÇ128‰ΩçÔºåÈÄöÂ∏∏‰ª•36ÈïøÂ∫¶ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÔºåÂæàÂ§öÂú∫ÊôØ‰∏çÈÄÇÁî®„ÄÇ ‰ø°ÊÅØ‰∏çÂÆâÂÖ®ÔºöÂü∫‰∫éMACÂú∞ÂùÄÁîüÊàêUUIDÁöÑÁÆóÊ≥ïÂèØËÉΩ‰ºöÈÄ†ÊàêMACÂú∞ÂùÄÊ≥ÑÈú≤ÔºåËøô‰∏™ÊºèÊ¥ûÊõæË¢´Áî®‰∫éÂØªÊâæÊ¢Ö‰∏ΩËééÁóÖÊØíÁöÑÂà∂‰ΩúËÄÖ‰ΩçÁΩÆ„ÄÇ ID‰Ωú‰∏∫‰∏ªÈîÆÊó∂Âú®ÁâπÂÆöÁöÑÁéØÂ¢É‰ºöÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºåÊØîÂ¶ÇÂÅöDB‰∏ªÈîÆÁöÑÂú∫ÊôØ‰∏ãÔºåUUIDÂ∞±ÈùûÂ∏∏‰∏çÈÄÇÁî®„ÄÇ TwitterÁöÑsnowflake snowflake ÊòØ Twitter ÂºÄÊ∫êÁöÑÂàÜÂ∏ÉÂºèIDÁîüÊàêÁÆóÊ≥ïÔºåÊòØ‰∏ÄÁßçÂàíÂàÜÂëΩÂêçÁ©∫Èó¥Êù•ÁîüÊàêIDÁöÑ‰∏ÄÁßçÁÆóÊ≥ïÔºåÁªìÊûúÊòØ‰∏Ä‰∏™longÂûãÁöÑID„ÄÇÂÖ∂Ê†∏ÂøÉÊÄùÊÉ≥ÊòØÔºöÊää64-bitÂàÜÂà´ÂàíÂàÜÊàêÂ§öÊÆµ„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö 1‰ΩçÊ†áËØÜÁ¨¶ÔºöÂßãÁªàÊòØ0ÔºåÁî±‰∫élongÂü∫Êú¨Á±ªÂûãÂú®Java‰∏≠ÊòØÂ∏¶Á¨¶Âè∑ÁöÑÔºåÊúÄÈ´ò‰ΩçÊòØÁ¨¶Âè∑‰ΩçÔºåÊ≠£Êï∞ÊòØ0ÔºåË¥üÊï∞ÊòØ1ÔºåÊâÄ‰ª•id‰∏ÄËà¨ÊòØÊ≠£Êï∞ÔºåÊúÄÈ´ò‰ΩçÊòØ0„ÄÇ 41‰ΩçÊó∂Èó¥Êà≥Ôºö41‰ΩçÊó∂Èó¥Êà™‰∏çÊòØÂ≠òÂÇ®ÂΩìÂâçÊó∂Èó¥ÁöÑÊó∂Èó¥Êà™ÔºåËÄåÊòØÂ≠òÂÇ®Êó∂Èó¥Êà™ÁöÑÂ∑ÆÂÄºÔºàÂΩìÂâçÊó∂Èó¥Êà™ - ÂºÄÂßãÊó∂Èó¥Êà™ )ÂæóÂà∞ÁöÑÂÄºÔºåËøôÈáåÁöÑÁöÑÂºÄÂßãÊó∂Èó¥Êà™Ôºå‰∏ÄËà¨ÊòØÊàë‰ª¨ÁöÑidÁîüÊàêÂô®ÂºÄÂßã‰ΩøÁî®ÁöÑÊó∂Èó¥ÔºåÁî±Êàë‰ª¨Á®ãÂ∫èÊù•ÊåáÂÆöÁöÑ„ÄÇ 10‰ΩçÊú∫Âô®Ê†áËØÜÁ†ÅÔºöÂèØ‰ª•ÈÉ®ÁΩ≤Âú®1024‰∏™ËäÇÁÇπÔºåÂ¶ÇÊûúÊú∫Âô®ÂàÜÊú∫ÊàøÔºàIDCÔºâÈÉ®ÁΩ≤ÔºåËøô10‰ΩçÂèØ‰ª•Áî± 5‰ΩçÊú∫ÊàøID + 5‰ΩçÊú∫Âô®ID ÁªÑÊàê„ÄÇ 12‰ΩçÂ∫èÂàóÔºöÊØ´ÁßíÂÜÖÁöÑËÆ°Êï∞Ôºå12‰ΩçÁöÑËÆ°Êï∞È°∫Â∫èÂè∑ÊîØÊåÅÊØè‰∏™ËäÇÁÇπÊØèÊØ´Áßí(Âêå‰∏ÄÊú∫Âô®ÔºåÂêå‰∏ÄÊó∂Èó¥Êà™)‰∫ßÁîü4096‰∏™IDÂ∫èÂè∑ ‰ºòÁÇπ ÊØ´ÁßíÊï∞Âú®È´ò‰ΩçÔºåËá™Â¢ûÂ∫èÂàóÂú®‰Ωé‰ΩçÔºåÊï¥‰∏™IDÈÉΩÊòØË∂ãÂäøÈÄíÂ¢ûÁöÑ„ÄÇ ‰∏ç‰æùËµñÊï∞ÊçÆÂ∫ìÁ≠âÁ¨¨‰∏âÊñπÁ≥ªÁªüÔºå‰ª•ÊúçÂä°ÁöÑÊñπÂºèÈÉ®ÁΩ≤ÔºåÁ®≥ÂÆöÊÄßÊõ¥È´òÔºåÁîüÊàêIDÁöÑÊÄßËÉΩ‰πüÊòØÈùûÂ∏∏È´òÁöÑ„ÄÇ ÂèØ‰ª•Ê†πÊçÆËá™Ë∫´‰∏öÂä°ÁâπÊÄßÂàÜÈÖçbit‰ΩçÔºåÈùûÂ∏∏ÁÅµÊ¥ª„ÄÇ Áº∫ÁÇπ Âº∫‰æùËµñÊú∫Âô®ÁöÑÊó∂ÈíüÔºåÂ¶ÇÊûúÊúçÂä°Âô®Êó∂ÈíüÂõûÊã®Ôºå‰ºöÂØºËá¥ÈáçÂ§çIDÁîüÊàê„ÄÇ Âú®ÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏äÔºåÊØè‰∏™ÊúçÂä°Âô®ÁöÑÊó∂Èíü‰∏çÂèØËÉΩÂÆåÂÖ®ÂêåÊ≠•ÔºåÊúâÊó∂‰ºöÂá∫Áé∞‰∏çÊòØÂÖ®Â±ÄÈÄíÂ¢ûÁöÑÊÉÖÂÜµ„ÄÇ snowflake JavaÂÆûÁé∞ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146/** * Twitter_Snowflake&lt;br&gt; * SnowFlakeÁöÑÁªìÊûÑÂ¶Ç‰∏ã(ÊØèÈÉ®ÂàÜÁî®-ÂàÜÂºÄ):&lt;br&gt; * 0 - 0000000000 0000000000 0000000000 0000000000 0 - 00000 - 00000 - 000000000000 &lt;br&gt; * 1‰ΩçÊ†áËØÜÔºåÁî±‰∫élongÂü∫Êú¨Á±ªÂûãÂú®Java‰∏≠ÊòØÂ∏¶Á¨¶Âè∑ÁöÑÔºåÊúÄÈ´ò‰ΩçÊòØÁ¨¶Âè∑‰ΩçÔºåÊ≠£Êï∞ÊòØ0ÔºåË¥üÊï∞ÊòØ1ÔºåÊâÄ‰ª•id‰∏ÄËà¨ÊòØÊ≠£Êï∞ÔºåÊúÄÈ´ò‰ΩçÊòØ0&lt;br&gt; * 41‰ΩçÊó∂Èó¥Êà™(ÊØ´ÁßíÁ∫ß)ÔºåÊ≥®ÊÑèÔºå41‰ΩçÊó∂Èó¥Êà™‰∏çÊòØÂ≠òÂÇ®ÂΩìÂâçÊó∂Èó¥ÁöÑÊó∂Èó¥Êà™ÔºåËÄåÊòØÂ≠òÂÇ®Êó∂Èó¥Êà™ÁöÑÂ∑ÆÂÄºÔºàÂΩìÂâçÊó∂Èó¥Êà™ - ÂºÄÂßãÊó∂Èó¥Êà™) * ÂæóÂà∞ÁöÑÂÄºÔºâÔºåËøôÈáåÁöÑÁöÑÂºÄÂßãÊó∂Èó¥Êà™Ôºå‰∏ÄËà¨ÊòØÊàë‰ª¨ÁöÑidÁîüÊàêÂô®ÂºÄÂßã‰ΩøÁî®ÁöÑÊó∂Èó¥ÔºåÁî±Êàë‰ª¨Á®ãÂ∫èÊù•ÊåáÂÆöÁöÑÔºàÂ¶Ç‰∏ã‰∏ãÈù¢Á®ãÂ∫èIdWorkerÁ±ªÁöÑstartTimeÂ±ûÊÄßÔºâ„ÄÇ * 41‰ΩçÁöÑÊó∂Èó¥Êà™ÔºåÂèØ‰ª•‰ΩøÁî®69Âπ¥ÔºåÂπ¥T = (1L &lt;&lt; 41) / (1000L * 60 * 60 * 24 * 365) = 69&lt;br&gt; * 10‰ΩçÁöÑÊï∞ÊçÆÊú∫Âô®‰ΩçÔºåÂèØ‰ª•ÈÉ®ÁΩ≤Âú®1024‰∏™ËäÇÁÇπÔºåÂåÖÊã¨5‰ΩçdatacenterIdÂíå5‰ΩçworkerId&lt;br&gt; * 12‰ΩçÂ∫èÂàóÔºåÊØ´ÁßíÂÜÖÁöÑËÆ°Êï∞Ôºå12‰ΩçÁöÑËÆ°Êï∞È°∫Â∫èÂè∑ÊîØÊåÅÊØè‰∏™ËäÇÁÇπÊØèÊØ´Áßí(Âêå‰∏ÄÊú∫Âô®ÔºåÂêå‰∏ÄÊó∂Èó¥Êà™)‰∫ßÁîü4096‰∏™IDÂ∫èÂè∑&lt;br&gt; * Âä†Ëµ∑Êù•ÂàöÂ•Ω64‰ΩçÔºå‰∏∫‰∏Ä‰∏™LongÂûã„ÄÇ&lt;br&gt; * SnowFlakeÁöÑ‰ºòÁÇπÊòØÔºåÊï¥‰Ωì‰∏äÊåâÁÖßÊó∂Èó¥Ëá™Â¢ûÊéíÂ∫èÔºåÂπ∂‰∏îÊï¥‰∏™ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂÜÖ‰∏ç‰ºö‰∫ßÁîüIDÁ¢∞Êíû(Áî±Êï∞ÊçÆ‰∏≠ÂøÉIDÂíåÊú∫Âô®ID‰ΩúÂå∫ÂàÜ)ÔºåÂπ∂‰∏îÊïàÁéáËæÉÈ´òÔºå * ÁªèÊµãËØïÔºåSnowFlakeÊØèÁßíËÉΩÂ§ü‰∫ßÁîü26‰∏áIDÂ∑¶Âè≥„ÄÇ */public class SnowflakeIdWorker &#123; // ==============================Fields=========================================== /** ÂºÄÂßãÊó∂Èó¥Êà™ (2015-01-01) */ private final long twepoch = 1420041600000L; /** Êú∫Âô®idÊâÄÂç†ÁöÑ‰ΩçÊï∞ */ private final long workerIdBits = 5L; /** Êï∞ÊçÆÊ†áËØÜidÊâÄÂç†ÁöÑ‰ΩçÊï∞ */ private final long datacenterIdBits = 5L; /** ÊîØÊåÅÁöÑÊúÄÂ§ßÊú∫Âô®idÔºåÁªìÊûúÊòØ31 (Ëøô‰∏™Áßª‰ΩçÁÆóÊ≥ïÂèØ‰ª•ÂæàÂø´ÁöÑËÆ°ÁÆóÂá∫Âá†‰Ωç‰∫åËøõÂà∂Êï∞ÊâÄËÉΩË°®Á§∫ÁöÑÊúÄÂ§ßÂçÅËøõÂà∂Êï∞) */ private final long maxWorkerId = -1L ^ (-1L &lt;&lt; workerIdBits); /** ÊîØÊåÅÁöÑÊúÄÂ§ßÊï∞ÊçÆÊ†áËØÜidÔºåÁªìÊûúÊòØ31 */ private final long maxDatacenterId = -1L ^ (-1L &lt;&lt; datacenterIdBits); /** Â∫èÂàóÂú®id‰∏≠Âç†ÁöÑ‰ΩçÊï∞ */ private final long sequenceBits = 12L; /** Êú∫Âô®IDÂêëÂ∑¶Áßª12‰Ωç */ private final long workerIdShift = sequenceBits; /** Êï∞ÊçÆÊ†áËØÜidÂêëÂ∑¶Áßª17‰Ωç(12+5) */ private final long datacenterIdShift = sequenceBits + workerIdBits; /** Êó∂Èó¥Êà™ÂêëÂ∑¶Áßª22‰Ωç(5+5+12) */ private final long timestampLeftShift = sequenceBits + workerIdBits + datacenterIdBits; /** ÁîüÊàêÂ∫èÂàóÁöÑÊé©Á†ÅÔºåËøôÈáå‰∏∫4095 (0b111111111111=0xfff=4095) */ private final long sequenceMask = -1L ^ (-1L &lt;&lt; sequenceBits); /** Â∑•‰ΩúÊú∫Âô®ID(0~31) */ private long workerId; /** Êï∞ÊçÆ‰∏≠ÂøÉID(0~31) */ private long datacenterId; /** ÊØ´ÁßíÂÜÖÂ∫èÂàó(0~4095) */ private long sequence = 0L; /** ‰∏äÊ¨°ÁîüÊàêIDÁöÑÊó∂Èó¥Êà™ */ private long lastTimestamp = -1L; //==============================Constructors===================================== /** * ÊûÑÈÄ†ÂáΩÊï∞ * @param workerId Â∑•‰ΩúID (0~31) * @param datacenterId Êï∞ÊçÆ‰∏≠ÂøÉID (0~31) */ public SnowflakeIdWorker(long workerId, long datacenterId) &#123; if (workerId &gt; maxWorkerId || workerId &lt; 0) &#123; throw new IllegalArgumentException(String.format("worker Id can't be greater than %d or less than 0", maxWorkerId)); &#125; if (datacenterId &gt; maxDatacenterId || datacenterId &lt; 0) &#123; throw new IllegalArgumentException(String.format("datacenter Id can't be greater than %d or less than 0", maxDatacenterId)); &#125; this.workerId = workerId; this.datacenterId = datacenterId; &#125; // ==============================Methods========================================== /** * Ëé∑Âæó‰∏ã‰∏Ä‰∏™ID (ËØ•ÊñπÊ≥ïÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ) * @return SnowflakeId */ public synchronized long nextId() &#123; long timestamp = timeGen(); //Â¶ÇÊûúÂΩìÂâçÊó∂Èó¥Â∞è‰∫é‰∏ä‰∏ÄÊ¨°IDÁîüÊàêÁöÑÊó∂Èó¥Êà≥ÔºåËØ¥ÊòéÁ≥ªÁªüÊó∂ÈíüÂõûÈÄÄËøáËøô‰∏™Êó∂ÂÄôÂ∫îÂΩìÊäõÂá∫ÂºÇÂ∏∏ if (timestamp &lt; lastTimestamp) &#123; throw new RuntimeException( String.format("Clock moved backwards. Refusing to generate id for %d milliseconds", lastTimestamp - timestamp)); &#125; //Â¶ÇÊûúÊòØÂêå‰∏ÄÊó∂Èó¥ÁîüÊàêÁöÑÔºåÂàôËøõË°åÊØ´ÁßíÂÜÖÂ∫èÂàó if (lastTimestamp == timestamp) &#123; sequence = (sequence + 1) &amp; sequenceMask; //ÊØ´ÁßíÂÜÖÂ∫èÂàóÊ∫¢Âá∫ if (sequence == 0) &#123; //ÈòªÂ°ûÂà∞‰∏ã‰∏Ä‰∏™ÊØ´Áßí,Ëé∑ÂæóÊñ∞ÁöÑÊó∂Èó¥Êà≥ timestamp = tilNextMillis(lastTimestamp); &#125; &#125; //Êó∂Èó¥Êà≥ÊîπÂèòÔºåÊØ´ÁßíÂÜÖÂ∫èÂàóÈáçÁΩÆ else &#123; sequence = 0L; &#125; //‰∏äÊ¨°ÁîüÊàêIDÁöÑÊó∂Èó¥Êà™ lastTimestamp = timestamp; //Áßª‰ΩçÂπ∂ÈÄöËøáÊàñËøêÁÆóÊãºÂà∞‰∏ÄËµ∑ÁªÑÊàê64‰ΩçÁöÑID return ((timestamp - twepoch) &lt;&lt; timestampLeftShift) // | (datacenterId &lt;&lt; datacenterIdShift) // | (workerId &lt;&lt; workerIdShift) // | sequence; &#125; /** * ÈòªÂ°ûÂà∞‰∏ã‰∏Ä‰∏™ÊØ´ÁßíÔºåÁõ¥Âà∞Ëé∑ÂæóÊñ∞ÁöÑÊó∂Èó¥Êà≥ * @param lastTimestamp ‰∏äÊ¨°ÁîüÊàêIDÁöÑÊó∂Èó¥Êà™ * @return ÂΩìÂâçÊó∂Èó¥Êà≥ */ protected long tilNextMillis(long lastTimestamp) &#123; long timestamp = timeGen(); while (timestamp &lt;= lastTimestamp) &#123; timestamp = timeGen(); &#125; return timestamp; &#125; /** * ËøîÂõû‰ª•ÊØ´Áßí‰∏∫Âçï‰ΩçÁöÑÂΩìÂâçÊó∂Èó¥ * @return ÂΩìÂâçÊó∂Èó¥(ÊØ´Áßí) */ protected long timeGen() &#123; return System.currentTimeMillis(); &#125; //==============================Test============================================= /** ÊµãËØï */ public static void main(String[] args) &#123; SnowflakeIdWorker idWorker = new SnowflakeIdWorker(0, 0); for (int i = 0; i &lt; 1000; i++) &#123; long id = idWorker.nextId(); System.out.println(Long.toBinaryString(id)); System.out.println(id); &#125; &#125;&#125; Êï∞ÊçÆÂ∫ìËá™Â¢ûIDÔºàFlickerÔºâ ‰∏ªË¶ÅÊÄùË∑ØÊòØÈááÁî®Êï∞ÊçÆÂ∫ìËá™Â¢ûID + replace_intoÂÆûÁé∞ÂîØ‰∏ÄIDÁöÑËé∑Âèñ„ÄÇ 123456create table t_global_id( id bigint(20) unsigned not null auto_increment, stub char(1) not null default '', primary key (id), unique key stub (stub)) engine=MyISAM; 123# ÊØèÊ¨°‰∏öÂä°ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãSQLËØªÂÜôMySQLÂæóÂà∞IDÂè∑replace into t_golbal_id(stub) values('a');select last_insert_id(); replace intoË∑üinsertÂäüËÉΩÁ±ª‰ººÔºå‰∏çÂêåÁÇπÂú®‰∫éÔºöreplace intoÈ¶ñÂÖàÂ∞ùËØïÊèíÂÖ•Êï∞ÊçÆÂàóË°®‰∏≠ÔºåÂ¶ÇÊûúÂèëÁé∞Ë°®‰∏≠Â∑≤ÁªèÊúâÊ≠§Ë°åÊï∞ÊçÆÔºàÊ†πÊçÆ‰∏ªÈîÆÊàñÂîØ‰∏ÄÁ¥¢ÂºïÂà§Êñ≠ÔºâÂàôÂÖàÂà†Èô§ÔºåÂÜçÊèíÂÖ•„ÄÇÂê¶ÂàôÁõ¥Êé•ÊèíÂÖ•Êñ∞Êï∞ÊçÆ„ÄÇ ÂΩìÁÑ∂‰∏∫‰∫ÜÈÅøÂÖçÊï∞ÊçÆÂ∫ìÁöÑÂçïÁÇπÊïÖÈöúÔºåÊúÄÂ∞ëÈúÄË¶Å‰∏§‰∏™Êï∞ÊçÆÂ∫ìÂÆû‰æãÔºåÈÄöËøáÂå∫ÂàÜauto_incrementÁöÑËµ∑ÂßãÂÄºÂíåÊ≠•ÈïøÊù•ÁîüÊàêÂ•áÂÅ∂Êï∞ÁöÑID„ÄÇ ÊØîÂ¶ÇÊúâ‰∏§Âè∞Êú∫Âô®„ÄÇËÆæÁΩÆÊ≠•Èïøstep‰∏∫2ÔºåServer1ÁöÑÂàùÂßãÂÄº‰∏∫1Ôºà1Ôºå3Ôºå5Ôºå7Ôºå9Ôºå11‚Ä¶Ôºâ„ÄÅServer2ÁöÑÂàùÂßãÂÄº‰∏∫2Ôºà2Ôºå4Ôºå6Ôºå8Ôºå10‚Ä¶ÔºâÂ¶Ç‰∏ãÊâÄÁ§∫Ôºå‰∏∫‰∫ÜÂÆûÁé∞‰∏äËø∞ÊñπÊ°àÂàÜÂà´ËÆæÁΩÆ‰∏§Âè∞Êú∫Âô®ÂØπÂ∫îÁöÑÂèÇÊï∞ÔºåServer1‰ªé1ÂºÄÂßãÂèëÂè∑ÔºåServer2‰ªé2ÂºÄÂßãÂèëÂè∑Ôºå‰∏§Âè∞Êú∫Âô®ÊØèÊ¨°ÂèëÂè∑‰πãÂêéÈÉΩÈÄíÂ¢û2„ÄÇÂ¶Ç‰∏ãÔºö 1234567Server1Ôºöauto-increment-increment = 2auto-increment-offset = 1Server2Ôºöauto-increment-increment = 2auto-increment-offset = 2 ‰ºòÁÇπ ÁÆÄÂçï„ÄÇÂÖÖÂàÜÂÄüÂä©Êï∞ÊçÆÂ∫ìÁöÑËá™Â¢ûIDÊú∫Âà∂ÔºåÂèØÈù†ÊÄßÈ´òÔºåÁîüÊàêÊúâÂ∫èÁöÑID„ÄÇ Áº∫ÁÇπ IDÁîüÊàê‰æùËµñÊï∞ÊçÆÂ∫ìÂçïÊú∫ÁöÑËØªÂÜôÊÄßËÉΩ„ÄÇ ‰æùËµñÊï∞ÊçÆÂ∫ìÔºåÂΩìÊï∞ÊçÆÂ∫ìÂºÇÂ∏∏Êó∂Êï¥‰∏™Á≥ªÁªü‰∏çÂèØÁî®„ÄÇ ÂØπ‰∫éMySQLÁöÑÊÄßËÉΩÈóÆÈ¢òÔºåÂèØ‰ª•Áî®Â¶Ç‰∏ãÊñπÊ°àËß£ÂÜ≥Ôºö Âú®ÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÉ®ÁΩ≤NÂè∞Êï∞ÊçÆÂ∫ìÂÆû‰æãÔºåÊØèÂè∞ËÆæÁΩÆÊàê‰∏çÂêåÁöÑÂàùÂßãÂÄºÔºåËá™Â¢ûÊ≠•Èïø‰∏∫Êú∫Âô®ÁöÑÂè∞Êï∞„ÄÇÊØèÂè∞ÁöÑÂàùÂßãÂÄºÂàÜÂà´‰∏∫1,2,3...NÔºåÊ≠•Èïø‰∏∫N„ÄÇ ËøôÁßçÊñπÊ°àËôΩÁÑ∂Ëß£ÂÜ≥‰∫ÜÊÄßËÉΩÈóÆÈ¢òÔºå‰ΩÜÊòØ‰πüÂ≠òÂú®ÂæàÂ§ßÁöÑÂ±ÄÈôêÊÄßÔºö Á≥ªÁªüÊ∞¥Âπ≥Êâ©ÂÆπÂõ∞ÈöæÔºöÁ≥ªÁªüÂÆö‰πâÂ•ΩÊ≠•Èïø‰πãÂêéÔºåÂ¢ûÂä†Êú∫Âô®‰πãÂêéË∞ÉÊï¥Ê≠•ÈïøÂõ∞Èöæ„ÄÇÂ¶ÇÊûúË¶ÅÊ∑ªÂä†Êú∫Âô®ÊÄé‰πàÂäûÔºüÂÅáËÆæÁé∞Âú®Âè™Êúâ‰∏ÄÂè∞Êú∫Âô®ÂèëÂè∑ÊòØ1,2,3,4,5ÔºàÊ≠•ÈïøÊòØ1ÔºâÔºåËøô‰∏™Êó∂ÂÄôÈúÄË¶ÅÊâ©ÂÆπÊú∫Âô®‰∏ÄÂè∞„ÄÇÂèØ‰ª•ËøôÊ†∑ÂÅöÔºöÊääÁ¨¨‰∫åÂè∞Êú∫Âô®ÁöÑÂàùÂßãÂÄºËÆæÁΩÆÂæóÊØîÁ¨¨‰∏ÄÂè∞Ë∂ÖËøáÂæàÂ§öÔºåÊØîÂ¶Ç14ÔºàÂÅáËÆæÂú®Êâ©ÂÆπÊó∂Èó¥‰πãÂÜÖÁ¨¨‰∏ÄÂè∞‰∏çÂèØËÉΩÂèëÂà∞14ÔºâÔºåÂêåÊó∂ËÆæÁΩÆÊ≠•Èïø‰∏∫2ÔºåÈÇ£‰πàËøôÂè∞Êú∫Âô®‰∏ãÂèëÁöÑÂè∑Á†ÅÈÉΩÊòØ14‰ª•ÂêéÁöÑÂÅ∂Êï∞„ÄÇÁÑ∂ÂêéÊëòÊéâÁ¨¨‰∏ÄÂè∞ÔºåÊääIDÂÄº‰øùÁïô‰∏∫Â•áÊï∞ÔºåÊØîÂ¶Ç7ÔºåÁÑ∂Âêé‰øÆÊîπÁ¨¨‰∏ÄÂè∞ÁöÑÊ≠•Èïø‰∏∫2„ÄÇËÆ©ÂÆÉÁ¨¶ÂêàÊàë‰ª¨ÂÆö‰πâÁöÑÂè∑ÊÆµÊ†áÂáÜÔºåÂØπ‰∫éËøô‰∏™‰æãÂ≠êÊù•ËØ¥Â∞±ÊòØËÆ©Á¨¨‰∏ÄÂè∞‰ª•ÂêéÂè™ËÉΩ‰∫ßÁîüÂ•áÊï∞„ÄÇÊâ©ÂÆπÊñπÊ°àÁúãËµ∑Êù•Â§çÊùÇÂêóÔºüË≤å‰ººËøòÂ•ΩÔºåÁé∞Âú®ÊÉ≥Ë±°‰∏Ä‰∏ãÂ¶ÇÊûúÊàë‰ª¨Á∫ø‰∏äÊúâ100Âè∞Êú∫Âô®ÔºåËøô‰∏™Êó∂ÂÄôË¶ÅÊâ©ÂÆπËØ•ÊÄé‰πàÂÅöÔºüÁÆÄÁõ¥ÊòØÂô©Ê¢¶„ÄÇ Êï∞ÊçÆÂ∫ìÂéãÂäõÂ§ßÔºöÊØèÊ¨°Ëé∑Âèñ‰∏Ä‰∏™IDÈÉΩÂøÖÈ°ªËØªÂÜô‰∏ÄÊ¨°Êï∞ÊçÆÂ∫ì„ÄÇÂΩìÁÑ∂ÂØπ‰∫éËøôÁßçÈóÆÈ¢òÔºå‰πüÊúâÁõ∏Â∫îÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂ∞±ÊòØÊØèÊ¨°Ëé∑ÂèñIDÊó∂ÈÉΩÊâπÈáèËé∑Âèñ‰∏Ä‰∏™Âå∫Èó¥ÁöÑÂè∑ÊÆµÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁî®ÂÆå‰πãÂêéÂÜçÊù•Ëé∑Âèñ„ÄÇÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩÊèêÈ´ò‰∫ÜÂá†‰∏™ÈáèÁ∫ß„ÄÇ ÁæéÂõ¢ÁöÑLeaf-segment Leaf-segment Âú®‰ΩøÁî®Êï∞ÊçÆÂ∫ìÁöÑÊñπÊ°à‰∏äÂÅö‰∫Ü‰ºòÂåñÔºåÂà©Áî®proxy serverÊâπÈáèËé∑ÂèñÔºåÊØèÊ¨°Ëé∑Âèñ‰∏ÄÊÆµIDs(stepÂÜ≥ÂÆöÂ§ßÂ∞è)ÔºåÁÑ∂ÂêéÊääËøôÊÆµIDs‰Ωú‰∏∫idÊ±†ÁºìÂ≠òËµ∑Êù•‰ΩøÁî®„ÄÇÁî®ÂÆå‰πãÂêéÂÜçÂéªÊï∞ÊçÆÂ∫ìËé∑ÂèñÊñ∞ÁöÑÂè∑ÊÆµÔºå‰ªéËÄåÂ§ßÂ§ßÁöÑÂáèËΩªÊï∞ÊçÆÂ∫ìÁöÑÂéãÂäõ„ÄÇËß£ÂÜ≥‰∫ÜÂéüÊñπÊ°àÊØèÊ¨°Ëé∑ÂèñIDÈÉΩÂæóËØªÂÜô‰∏ÄÊ¨°Êï∞ÊçÆÂ∫ìÔºåÈÄ†ÊàêÊï∞ÊçÆÂ∫ìÂéãÂäõÂ§ßÁöÑÈóÆÈ¢ò„ÄÇLeaf-segmentÁöÑÊÄª‰ΩìÊû∂ÊûÑÂ¶Ç‰∏ãÔºö ‰ºòÁÇπ LeafÊúçÂä°ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÁ∫øÊÄßÊâ©Â±ïÔºåÊÄßËÉΩÂÆåÂÖ®ËÉΩÂ§üÊîØÊíëÂ§ßÂ§öÊï∞‰∏öÂä°Âú∫ÊôØ„ÄÇ IDÂè∑Á†ÅÊòØË∂ãÂäøÈÄíÂ¢ûÁöÑ8byteÁöÑ64‰ΩçÊï∞Â≠óÔºåÊª°Ë∂≥‰∏äËø∞Êï∞ÊçÆÂ∫ìÂ≠òÂÇ®ÁöÑ‰∏ªÈîÆË¶ÅÊ±Ç„ÄÇ ÂÆπÁÅæÊÄßÈ´òÔºöLeafÊúçÂä°ÂÜÖÈÉ®ÊúâÂè∑ÊÆµÁºìÂ≠òÔºåÂç≥‰ΩøDBÂÆïÊú∫ÔºåÁü≠Êó∂Èó¥ÂÜÖLeaf‰ªçËÉΩÊ≠£Â∏∏ÂØπÂ§ñÊèê‰æõÊúçÂä°„ÄÇ ÂèØ‰ª•Ëá™ÂÆö‰πâmax_idÁöÑÂ§ßÂ∞èÔºåÈùûÂ∏∏Êñπ‰æø‰∏öÂä°‰ªéÂéüÊúâÁöÑIDÊñπÂºè‰∏äËøÅÁßªËøáÊù•„ÄÇ Áº∫ÁÇπ IDÂè∑Á†Å‰∏çÂ§üÈöèÊú∫ÔºåËÉΩÂ§üÊ≥ÑÈú≤ÂèëÂè∑Êï∞ÈáèÁöÑ‰ø°ÊÅØÔºå‰∏çÂ§™ÂÆâÂÖ®„ÄÇ TP999Êï∞ÊçÆÊ≥¢Âä®Â§ßÔºåÂΩìÂè∑ÊÆµ‰ΩøÁî®ÂÆå‰πãÂêéËøòÊòØ‰ºöhangÂú®Êõ¥Êñ∞Êï∞ÊçÆÂ∫ìÁöÑI/O‰∏äÔºåtg999Êï∞ÊçÆ‰ºöÂá∫Áé∞ÂÅ∂Â∞îÁöÑÂ∞ñÂà∫„ÄÇ DBÂÆïÊú∫‰ºöÈÄ†ÊàêÊï¥‰∏™Á≥ªÁªü‰∏çÂèØÁî®„ÄÇ Leaf-segment Âêé2ÁÇπÁº∫ÁÇπÔºåLeaf-segmentÂÅö‰∫ÜÂèåbuffer‰ºòÂåñÔºå‰ª•Âèä‚Äú‰∏Ä‰∏ª‰∏§‰ªé‚ÄùÁöÑÈ´òÂèØÁî®ÂÆπÁÅæ„ÄÇ ÁæéÂõ¢ÁöÑLeaf-snowflake Leaf-snowflake ÊñπÊ°àÂÆåÂÖ®Ê≤øÁî®snowflakeÊñπÊ°àÁöÑbit‰ΩçËÆæËÆ°ÔºåÂç≥ÊòØ1+41+10+12ÁöÑÊñπÂºèÁªÑË£ÖIDÂè∑„ÄÇÁõ∏ÊØî snowflakeÔºåLeaf-snowflakeÂÅö‰∫Ü‰ª•‰∏ã2ÁÇπ‰ºòÂåñÔºö ‰ΩøÁî®ZookeeperÊåÅ‰πÖÈ°∫Â∫èËäÇÁÇπÁöÑÁâπÊÄßËá™Âä®ÂØπsnowflakeËäÇÁÇπÈÖçÁΩÆwokerIDÔºå‰∏ÄÂÆöÁ®ãÂ∫¶ÁöÑÊèêÈ´òÁ≥ªÁªüÁöÑ‰º∏Áº©ÊÄßÂíåÂÆπÈîôÊÄß„ÄÇ Ëß£ÂÜ≥Êó∂ÈíüÂõûÊã®‰ºöÂèØËÉΩÂØºËá¥ÁîüÊàêÈáçÂ§çÁöÑIDÂè∑ÁöÑÈóÆÈ¢ò„ÄÇ Leaf-snowflakeÊòØÊåâÁÖß‰∏ãÈù¢Âá†‰∏™Ê≠•È™§ÂêØÂä®ÁöÑÔºö ÂêØÂä®Leaf-snowflakeÊúçÂä°ÔºåËøûÊé•ZookeeperÔºåÂú®leaf_foreverÁà∂ËäÇÁÇπ‰∏ãÊ£ÄÊü•Ëá™Â∑±ÊòØÂê¶Â∑≤ÁªèÊ≥®ÂÜåËøáÔºàÊòØÂê¶ÊúâËØ•È°∫Â∫èÂ≠êËäÇÁÇπÔºâ„ÄÇ Â¶ÇÊûúÊúâÊ≥®ÂÜåËøáÁõ¥Êé•ÂèñÂõûËá™Â∑±ÁöÑworkerIDÔºàzkÈ°∫Â∫èËäÇÁÇπÁîüÊàêÁöÑintÁ±ªÂûãIDÂè∑ÔºâÔºåÂêØÂä®ÊúçÂä°„ÄÇ Â¶ÇÊûúÊ≤°ÊúâÊ≥®ÂÜåËøáÔºåÂ∞±Âú®ËØ•Áà∂ËäÇÁÇπ‰∏ãÈù¢ÂàõÂª∫‰∏Ä‰∏™ÊåÅ‰πÖÈ°∫Â∫èËäÇÁÇπÔºåÂàõÂª∫ÊàêÂäüÂêéÂèñÂõûÈ°∫Â∫èÂè∑ÂΩìÂÅöËá™Â∑±ÁöÑworkerIDÂè∑ÔºåÂêØÂä®ÊúçÂä°„ÄÇ ÂæÆ‰ø°ÁöÑÂ∫èÂàóÂè∑ÁîüÊàêÂô®seqsvr seqsvr ÊòØÂæÆ‰ø°ÁöÑ‰∏Ä‰∏™È´òÂèØÁî®„ÄÅÈ´òÂèØÈù†ÁöÑÂ∫èÂàóÂè∑ÁîüÊàêÂô®ÔºåÂà©Áî®ÁîüÊàêÁöÑÂ∫èÂàóÂè∑ÔºåÂÆûÁé∞ÁªàÁ´Ø‰∏éÂêéÂè∞ÁöÑÊï∞ÊçÆÂ¢ûÈáèÂêåÊ≠•Êú∫Âà∂„ÄÇËøôÂ•óÂêåÊ≠•Êú∫Âà∂‰ªçÁÑ∂Âú®Ê∂àÊÅØÊî∂Âèë„ÄÅÊúãÂèãÂúàÈÄöÁü•„ÄÅÂ•ΩÂèãÊï∞ÊçÆÊõ¥Êñ∞Á≠âÈúÄË¶ÅÊï∞ÊçÆÂêåÊ≠•ÁöÑÂú∞ÊñπÂèëÊå•ÁùÄÊ†∏ÂøÉÁöÑ‰ΩúÁî®„ÄÇseqsvrÁöÑÊû∂ÊûÑÂèØ‰ª•ÂàÜ‰∏∫‰∏§Â±ÇÔºåÂç≥StoreSvrÂíåAllocSvrÔºàÂ≠òÂÇ®Â±ÇÂíåÁºìÂ≠ò‰∏≠Èó¥Â±ÇÔºâ„ÄÇÊû∂ÊûÑÂ¶Ç‰∏ãÂõæÔºö ‰ªéÂûÇÁõ¥ÊñπÂêëÁúãÔºåAllocSvrË¥üË¥£Áõ¥Êé•‰∏∫ÂÆ¢Êà∑Á´ØÂàÜÈÖçsequenceÔºåËÄåStoreSvrÂàôË¥üË¥£ÂΩìÂâçÊúÄÂ§ßsequence numÁöÑÂèØÈù†Â≠òÂÇ®ÔºàÈÄöËøáNRWÂÆûÁé∞Ôºâ„ÄÇËøô‰∏™ËßíÂ∫¶ÁúãÊù•ÔºåÂíåÁæéÂõ¢ÁÇπËØÑÁöÑLeaf-segmentÊòØÈùûÂ∏∏Áõ∏‰ººÁöÑ„ÄÇ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫é‰∏§ÁÇπÔºåÁ¨¨‰∏ÄÊòØseqsvr‰∫ßÁîüÁöÑsequenceÊòØÂú®UIDÔºàÁî®Êà∑IDÔºâ‰πã‰∏ãÁöÑidÔºåÊç¢Ë®Ä‰πã‚Äî‚ÄîUID + sequence = ÂÖ®Â±ÄIDÔºõÁ¨¨‰∫åÁÇπÊòØseqsvr‰ΩøÁî®‰∫ÜNRWÂÆûÁé∞‰∫ÜÊï∞ÊçÆÂ≠òÂÇ®ÁöÑÂº∫‰∏ÄËá¥ÊÄß„ÄÇ ‰ªéÊ∞¥Âπ≥ÊñπÂêëÁúãÔºåseqsvr‰ΩøÁî®UIDËøõË°å‰∫ÜÊ∞¥Âπ≥ÂàáÂàÜÔºåÂÆûÁé∞‰∫ÜË¥üËΩΩÂùáË°°„ÄÇÂØπÂçï‰∏ÄÁöÑ‰∏Ä‰∏™setÂàÜÊûêÂèØÁü•ÔºåAllocSvrÂèØ‰ª•ÂÆåÂÖ®‰ª•ËøêË°åÂú®ÂÜÖÂ≠ò‰∏≠ÔºåËÄå‰∏çÁî®ÂÆûÁé∞ÊåÅ‰πÖÂåñ„ÄÇÂõ†‰∏∫ÊúÄÊÅ∂Âä£ÁöÑÊÉÖÂÜµÂ∞±ÊòØÔºåAllocSvr‰∏≠‰∏ÄÈÉ®ÂàÜidËøòÊ≤°ÊúâË¢´Ê∂àË¥πÁöÑÊÉÖÂÜµ‰∏ãÂÆïÊú∫‰∫ÜÔºåÈáçÂêØ‰πãÂêéÂèàÈáçÊñ∞Áî≥ËØ∑‰∫Ü‰∏ÄÊÆµidÔºåÊâÄ‰ª•Êúâ‰∏ÄÈÉ®ÂàÜidË¢´Ë∑≥Ëøá‰∫Ü„ÄÇÁÑ∂ËÄåÔºåÂæÆ‰ø°ÁöÑsequence numÊúâ64‰ΩçÔºåËÄå‰∏îÊòØ‰Ωç‰∫éUID‰πã‰∏ãÁöÑÔºåÊâÄ‰ª•Ë∑≥Ëøá‰∏ÄÊÆµidÂÆåÂÖ®ÂèØ‰ª•Êé•Âèó„ÄÇ ÊâÄ‰ª•ÔºåseqsvrÁöÑ‰∏ªË¶ÅÂéãÂäõËøòÊòØÂú®StoreSvrÔºåÂç≥‰ΩøËøõË°å‰∫ÜSetÂàáÂàÜÔºåNRWÂ≠òÂÇ®Ê®°Âºè‰æùÁÑ∂ËøòÊòØË¶ÅÂú®ÂêûÂêêÈáè‰∏ä‰ªòÂá∫‰ª£‰ª∑„ÄÇÂ§ßÊ¶ÇÊòØÁªèËøá‰∫ÜËøõ‰∏ÄÊ≠•ÁöÑÂÆûÈ™åÔºåseqsvrËøõË°å‰∫ÜËøõ‰∏ÄÊ≠•ÁöÑ‰ºòÂåñ‚Äî‚ÄîÂàÜÊÆµÂè∑ÂÖ±‰∫´Â≠òÂÇ®„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºåmax_seqÂ∞±ÊòØÂΩìÂâçÁöÑÊúÄÂ§ßÂ∫èÂàóÂè∑„ÄÇ‰∏ÄÁªÑÁî®Êà∑ÂÖ±‰∫´‰∏Ä‰∏™max_seqÔºåÂàÜÁªÑÁöÑÊñπÂºè‰æùÁÑ∂ÊòØ‰ΩøÁî®UIDËøõË°åÂàáÂàÜ„ÄÇËøôÊ†∑‰∏ÄÊù•Ôºåseqsvr‰∏≠StoreSvrÁöÑÂéãÂäõÂèòÂæóÊõ¥Â∞è‰∫Ü„ÄÇ‰∏æ‰æãÊù•ËØ¥ÔºåÂ¶ÇÊûúÂ§ßÂÆ∂ÁöÑÊìç‰ΩúÈ¢ëÁéáÊòØÂùáÁ≠âÁöÑÔºåÈÇ£‰πàStoreSvrÁöÑÂÜôÂÖ•ÂéãÂäõÈôç‰∏∫ÂàáÂàÜ‰πãÂâçÁöÑ1 / NÔºàN‰∏∫ÂàÜÁªÑÂÜÖÈÉ®Áî®Êà∑ÁöÑÊï∞ÁõÆÔºâ„ÄÇËÄå‰∏îStoreSvrÂØπÊï∞ÊçÆÁöÑËΩΩÂÖ•ÂéãÂäõ‰πüÈôç‰Ωé‰∏∫1 / N„ÄÇ RedisÁîüÊàêÂîØ‰∏ÄID RedisÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÂéüÂ≠êÊìç‰ΩúINCRÂíåINCRBYÂÆûÁé∞ÈÄíÂ¢ûÁöÑÊìç‰Ωú„ÄÇÂΩì‰ΩøÁî®Êï∞ÊçÆÂ∫ìÊÄßËÉΩ‰∏çÂ§üÊó∂ÔºåÂèØ‰ª•ÈááÁî®RedisÊù•‰ª£ÊõøÔºåÂêåÊó∂‰ΩøÁî®RedisÈõÜÁæ§Êù•ÊèêÈ´òÂêûÂêêÈáè„ÄÇ ÂèØ‰ª•ÂàùÂßãÂåñÊØèÂè∞RedisÁöÑÂàùÂßãÂÄº‰∏∫1,2,3,4,5ÔºåÁÑ∂ÂêéÊ≠•Èïø‰∏∫5„ÄÇÂêÑ‰∏™RedisÁîüÊàêÁöÑID‰∏∫Ôºö 12345AÔºö1Ôºå6Ôºå11Ôºå16Ôºå21BÔºö2Ôºå7Ôºå12Ôºå17Ôºå22CÔºö3Ôºå8Ôºå13Ôºå18Ôºå23DÔºö4Ôºå9Ôºå14Ôºå19Ôºå24EÔºö5Ôºå10Ôºå15Ôºå20Ôºå25 ‰ºòÁÇπ ‰∏ç‰æùËµñ‰∫éÊï∞ÊçÆÂ∫ìÔºåÁÅµÊ¥ªÊñπ‰æøÔºå‰∏îÊÄßËÉΩ‰ºò‰∫éÊï∞ÊçÆÂ∫ì„ÄÇ Êï∞Â≠óIDÂ§©ÁÑ∂ÊéíÂ∫èÔºåÂØπÂàÜÈ°µÊàñËÄÖÈúÄË¶ÅÊéíÂ∫èÁöÑÁªìÊûúÂæàÊúâÂ∏ÆÂä©„ÄÇ Áº∫ÁÇπ Â¶ÇÊûúÁ≥ªÁªü‰∏≠Ê≤°ÊúâRedisÔºåËøòÈúÄË¶ÅÂºïÂÖ•Êñ∞ÁöÑÁªÑ‰ª∂ÔºåÂ¢ûÂä†Á≥ªÁªüÂ§çÊùÇÂ∫¶„ÄÇ ÈúÄË¶ÅÁºñÁ†ÅÂíåÈÖçÁΩÆÁöÑÂ∑•‰ΩúÈáèÊØîËæÉÂ§ß„ÄÇËøô‰∏™ÈÉΩ‰∏çÊòØÊúÄÂ§ßÁöÑÈóÆÈ¢ò„ÄÇ ZookeeperÁîüÊàêÂîØ‰∏ÄID zookeeper‰∏ªË¶ÅÈÄöËøáÂÖ∂znodeÊï∞ÊçÆÁâàÊú¨Êù•ÁîüÊàêÂ∫èÂàóÂè∑ÔºåÂèØ‰ª•ÁîüÊàê32‰ΩçÂíå64‰ΩçÁöÑÊï∞ÊçÆÁâàÊú¨Âè∑ÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™ÁâàÊú¨Âè∑Êù•‰Ωú‰∏∫ÂîØ‰∏ÄÁöÑÂ∫èÂàóÂè∑„ÄÇ ÂæàÂ∞ë‰ºö‰ΩøÁî®zookeeperÊù•ÁîüÊàêÂîØ‰∏ÄID„ÄÇ‰∏ªË¶ÅÊòØÁî±‰∫éÈúÄË¶Å‰æùËµñzookeeperÔºåÂπ∂‰∏îÊòØÂ§öÊ≠•Ë∞ÉÁî®APIÔºåÂ¶ÇÊûúÂú®Á´û‰∫âËæÉÂ§ßÁöÑÊÉÖÂÜµ‰∏ãÔºåÈúÄË¶ÅËÄÉËôë‰ΩøÁî®ÂàÜÂ∏ÉÂºèÈîÅ„ÄÇÂõ†Ê≠§ÔºåÊÄßËÉΩÂú®È´òÂπ∂ÂèëÁöÑÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÔºå‰πü‰∏çÁîöÁêÜÊÉ≥„ÄÇ]]></content>
      <categories>
        <category>ÂàÜÂ∏ÉÂºè</category>
      </categories>
      <tags>
        <tag>ÂàÜÂ∏ÉÂºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êú¨Âú∞‰ª£Á†Å‰∏ä‰º†Âà∞GitHub]]></title>
    <url>%2Fposts%2Fceff156c.html</url>
    <content type="text"><![CDATA[È¶ñÂÖà‰Ω†ÈúÄË¶Å‰∏Ä‰∏™githubË¥¶Âè∑ÔºåÊâÄÊúâËøòÊ≤°ÊúâÁöÑËØùÂÖàÂéªÊ≥®ÂÜåÂêßÔºÅ https://github.com/ Êàë‰ª¨‰ΩøÁî®gitÈúÄË¶ÅÂÖàÂÆâË£ÖgitÂ∑•ÂÖ∑ÔºåËøôÈáåÁªôÂá∫‰∏ãËΩΩÂú∞ÂùÄÔºå‰∏ãËΩΩÂêé‰∏ÄË∑ØÁõ¥Êé•ÂÆâË£ÖÂç≥ÂèØÔºö https://git-for-windows.github.io/ ËøõÂÖ•GithubÈ¶ñÈ°µÔºåÁÇπÂáªNew repositoryÊñ∞Âª∫‰∏Ä‰∏™È°πÁõÆ Â°´ÂÜôÁõ∏Â∫î‰ø°ÊÅØÂêéÁÇπÂáªcreateÂç≥ÂèØ Repository name: ‰ªìÂ∫ìÂêçÁß∞ Description(ÂèØÈÄâ): ‰ªìÂ∫ìÊèèËø∞‰ªãÁªç Public, Private : ‰ªìÂ∫ìÊùÉÈôêÔºàÂÖ¨ÂºÄÂÖ±‰∫´ÔºåÁßÅÊúâÊàñÊåáÂÆöÂêà‰ΩúËÄÖÔºâ Initialize this repository with a README: Ê∑ªÂä†‰∏Ä‰∏™README.md gitignore: ‰∏çÈúÄË¶ÅËøõË°åÁâàÊú¨ÁÆ°ÁêÜÁöÑ‰ªìÂ∫ìÁ±ªÂûãÔºåÂØπÂ∫îÁîüÊàêÊñá‰ª∂.gitignore license: ËØÅ‰π¶Á±ªÂûãÔºåÂØπÂ∫îÁîüÊàêÊñá‰ª∂LICENSE ÁÇπÂáªClone or dowload‰ºöÂá∫Áé∞‰∏Ä‰∏™Âú∞ÂùÄÔºåcopyËøô‰∏™Âú∞ÂùÄÂ§áÁî®„ÄÇ Êé•‰∏ãÊù•Â∞±Âà∞Êú¨Âú∞Êìç‰Ωú‰∫ÜÔºåÈ¶ñÂÖàÈº†Ê†áÂè≥ÈîÆÔºåÂ¶ÇÊûú‰Ω†‰πãÂâçÂÆâË£ÖgitÊàêÂäüÁöÑËØùÔºåÂè≥ÈîÆ‰ºöÂá∫Áé∞‰∏§‰∏™Êñ∞ÈÄâÈ°πÔºåÂàÜÂà´‰∏∫Git Gui Here,Git Bash Here,ËøôÈáåÊàë‰ª¨ÈÄâÊã©Git Bash HereÔºåËøõÂÖ•Â¶Ç‰∏ãÁïåÈù¢Ôºö Êé•‰∏ãÊù•ËæìÂÖ•Â¶Ç‰∏ã‰ª£Á†ÅÔºàÂÖ≥ÈîÆÊ≠•È™§ÔºâÔºåÊäägithub‰∏äÈù¢ÁöÑ‰ªìÂ∫ìÂÖãÈöÜÂà∞Êú¨Âú∞ 1git clone https://github.com/whb1990/blogSourceCode.git Âú∞ÂùÄÊç¢Êàê‰Ω†Ëá™Â∑±ÁöÑ„ÄÇ Ëøô‰∏™Ê≠•È™§‰ª•Âêé‰Ω†ÁöÑÊú¨Âú∞È°πÁõÆÊñá‰ª∂Â§π‰∏ãÈù¢Â∞±‰ºöÂ§öÂá∫‰∏™Êñá‰ª∂Â§πÔºåËØ•Êñá‰ª∂Â§πÂêçÂç≥‰∏∫‰Ω†github‰∏äÈù¢ÁöÑÈ°πÁõÆÂêçÔºåÂ¶ÇÂõæÊàëÂ§öÂá∫‰∫Ü‰∏™blogSourceCodeÊñá‰ª∂Â§πÔºåÊàë‰ª¨ÊääÊú¨Âú∞ÈúÄË¶Å‰∏ä‰º†ÁöÑÊñá‰ª∂ÈÉΩÂ§çÂà∂Âà∞ËØ•Êñá‰ª∂Â§π‰∏ãÔºö Êé•ÁùÄÁªßÁª≠ËæìÂÖ•ÂëΩ‰ª§ cd blogSourceCodeÔºåËøõÂÖ• blogSourceCode Êñá‰ª∂Â§π Êé•‰∏ãÊù•‰æùÊ¨°ËæìÂÖ•‰ª•‰∏ã‰ª£Á†ÅÂç≥ÂèØÂÆåÊàêÂÖ∂‰ªñÂâ©‰ΩôÊìç‰ΩúÔºö git add . ÔºàÊ≥®ÔºöÂà´ÂøòËÆ∞ÂêéÈù¢ÁöÑ.ÔºåÊ≠§Êìç‰ΩúÊòØÊääblogSourceCodeÊñá‰ª∂Â§π‰∏ãÈù¢ÁöÑÊñá‰ª∂ÈÉΩÊ∑ªÂä†ËøõÊù•Ôºâ ÊâßË°åÂÆåËØ•ÂëΩ‰ª§ÂèØ‰ª•ÁúãÂà∞ÊúâÂ¶Ç‰∏ãÊèêÁ§∫‰ø°ÊÅØÔºö Ëøô‰∏™ÊèêÁ§∫ÁöÑÂ§ßËá¥ÊÑèÊÄùÂ∞±ÊòØÔºö 1234567ÊÇ®Â∑≤ÁªèÂú®ÂΩìÂâçÂ≠òÂÇ®Â∫ì‰∏≠Ê∑ªÂä†‰∫ÜÂè¶‰∏Ä‰∏™GitÂ≠òÂÇ®Â∫ì„ÄÇÂ§ñÈÉ®Â≠òÂÇ®Â∫ìÁöÑÂÖãÈöÜÂ∞Ü‰∏çÂåÖÂê´ÂµåÂÖ•Â≠òÂÇ®Â∫ìÁöÑÂÜÖÂÆπÔºå‰πü‰∏çÁü•ÈÅìÂ¶Ç‰ΩïËé∑ÂèñÂÆÉ„ÄÇÂ¶ÇÊûúË¶ÅÊ∑ªÂä†Â≠êÊ®°ÂùóÔºåËØ∑‰ΩøÁî®Ôºö git submodule add &lt;url&gt; themes/nextÂ¶ÇÊûúÈîôËØØÂú∞Ê∑ªÂä†‰∫ÜÊ≠§Ë∑ØÂæÑÔºåÂàôÂèØ‰ª•‰ΩøÁî® git rm --cached themes/next Âõ†‰∏∫Ëøô‰∏™È°πÁõÆÊòØÊàëÁî®HexoÊê≠Âª∫ÁöÑ‰∏™‰∫∫ÂçöÂÆ¢ÔºåÁî®Âà∞‰∫ÜNext‰∏ªÈ¢ò(Âè¶‰∏Ä‰∏™GitÂ≠òÂÇ®Â∫ì)Ôºå‰∏äÈù¢ÁöÑÊèêÁ§∫‰πüÂëäËØâ‰∫ÜÊàë‰ª¨ËØ•ÊÄé‰πàÂÅöÔºåÂÖ∂ÂÆûÈô§‰∫Ü‰∏äÈù¢‰∏§ÁßçÊñπÂºèÔºåËøòÊúâ‰∏ÄÁßçÊñπÂºèÂ∞±ÊòØÁõ¥Êé•Âà†Èô§‰Ω†Ë¶ÅÂåÖÂê´ÁöÑÂ≠êÂ∫ìÁõÆÂΩï‰∏ãÁöÑ.gitÊñá‰ª∂Â§πÂç≥ÂèØ„ÄÇ git commit -m &quot;Êèê‰∫§‰ø°ÊÅØ&quot; ÔºàÊ≥®Ôºö‚ÄúÊèê‰∫§‰ø°ÊÅØ‚ÄùÈáåÈù¢Êç¢Êàê‰Ω†ÈúÄË¶ÅÔºåÂ¶Ç‚Äúfirst commit‚ÄùÔºâ git push -u origin master ÔºàÊ≥®ÔºöÊ≠§Êìç‰ΩúÁõÆÁöÑÊòØÊääÊú¨Âú∞‰ªìÂ∫ìpushÂà∞github‰∏äÈù¢ÔºåÊ≠§Ê≠•È™§ÈúÄË¶Å‰Ω†ËæìÂÖ•Â∏êÂè∑ÂíåÂØÜÁ†ÅÔºâ ÂéªGitHub‰∏äÁúã‰∏ã‰∏ä‰º†ÂêéÁöÑ‰ª£Á†Å ÈóÆÈ¢òËß£ÂÜ≥Ôºö Âú®‰∏ä‰º†‰ª£Á†ÅÂà∞GitHubÁöÑÊó∂ÂÄôÔºåÊèêÁ§∫Â¶Ç‰∏ãÈîôËØØÔºö ÂéüÂõ†ÊòØÊé®ÈÄÅÁöÑÊñá‰ª∂Â§™Â§ß„ÄÇÊàëËøôÊ¨°Êé®ÈÄÅÁöÑÂÜÖÂÆπË∂ÖËøáÁöÑ1GÔºåÊâÄ‰ª•Êä•Èîô‰∫Ü„ÄÇ ÊñπÊ≥ï‰∏ÄÔºö ‰øÆÊîπÊèê‰∫§ÁºìÂ≠òÂ§ßÂ∞è‰∏∫5000MÔºåÊàñËÄÖÊõ¥Â§ßÁöÑÊï∞Â≠ó 1git config --global http.postBuffer 5242880000 --globalÈÖçÁΩÆÂØπÂΩìÂâçÁî®Êà∑ÁîüÊïàÔºåÂ¶ÇÊûúÈúÄË¶ÅÂØπÊâÄÊúâÁî®Êà∑ÁîüÊïàÔºåÂàôÁî®--system ÊàñËÄÖÂú®ÂÖãÈöÜ/ÂàõÂª∫ÁâàÊú¨Â∫ìÁîüÊàêÁöÑ .gitÁõÆÂΩï‰∏ãÈù¢‰øÆÊîπÁîüÊàêÁöÑconfigÊñá‰ª∂Â¢ûÂä†Â¶Ç‰∏ãÔºö 12[http] postBuffer = 524288000 ÊñπÊ≥ï‰∫åÔºö ÈÖçÁΩÆgitÁöÑÊúÄ‰ΩéÈÄüÂ∫¶ÂíåÊúÄ‰ΩéÈÄüÂ∫¶Êó∂Èó¥Ôºö 12git config --global http.lowSpeedLimit 0git config --global http.lowSpeedTime 999999 Âçï‰Ωç Áßí --globalÈÖçÁΩÆÂØπÂΩìÂâçÁî®Êà∑ÁîüÊïàÔºåÂ¶ÇÊûúÈúÄË¶ÅÂØπÊâÄÊúâÁî®Êà∑ÁîüÊïàÔºåÂàôÁî®--system ÊàëÊòØÈÄâÊã©ÁöÑÊñπÊ≥ï‰∏ÄÔºåËß£ÂÜ≥ÊïàÊûúÂ¶Ç‰∏ãÔºö]]></content>
      <categories>
        <category>Git</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo live2dÊèí‰ª∂ÊïàÊûúÈ¢ÑËßà]]></title>
    <url>%2Fposts%2Ffcf4ee5f.html</url>
    <content type="text"><![CDATA[Epsilon2.1 Gantzert_Felixander haru miku ni-j nico nietzche nipsilon nito shizuku tsumiki wanko z16 hibiki koharu haruto Unitychan tororo hijiki]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàÜÂ∏ÉÂºèÂ≠¶‰π†-Session‰∏¢Â§±ÂèäËß£ÂÜ≥]]></title>
    <url>%2Fposts%2F223e2ff2.html</url>
    <content type="text"><![CDATA[‰ªÄ‰πàÊòØSession‰∏¢Â§± SessionÊòØ‰∏∫‰∫ÜÂ∞ÜÂêå‰∏Ä‰∏™Áî®Êà∑ÁöÑÂ§öÊ¨°ËÆøÈóÆÂú®Á≥ªÁªü‰∏≠Ë¢´ËØÜÂà´‰∏∫‚ÄúÂêå‰∏Ä‰∏™Áî®Êà∑‚ÄùËÄå‰∫ßÁîüÁöÑÊ¶ÇÂøµ„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåËøòÂèØ‰ª•Âü∫‰∫éÂÆÉÊù•ÂáèÂ∞ëÈáçÂ§çÂæÄDBÊàñËÄÖËøúÁ®ãÊúçÂä°Â§ÑËé∑Âèñ‰∏éËØ•Áî®Êà∑Áõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØÔºå‰ª•Ëµ∑Âà∞ÊèêÂçáÊÄßËÉΩÁöÑ‰ΩúÁî®„ÄÇ Âú®ÂÅö‰∫ÜË¥üËΩΩÂùáË°°ÁöÑÂú∫ÊôØ‰∏≠ÔºåÂ¶ÇÊûúÈÄâÊã©ÁöÑË¥üËΩΩÁ≠ñÁï•ÊòØhashÁ≠ñÁï•ÔºåÈÇ£‰πà‰ºö‰ΩøÂæóSession‰∫ßÁîü‰∏Ä‰∏™ÂâØ‰ΩúÁî®ÔºöÁî®Êà∑‰∏ÄÊó¶Áî±‰∫éÊüêÁßçÂéüÂõ†‰ªéÂéüÂÖàËÆøÈóÆÊúçÂä°Âô®AÂèòÊàêËÆøÈóÆÊúçÂä°Âô®BÔºåÂ∞±‰ºöÂá∫Áé∞‚ÄúÁôªÈôÜÁä∂ÊÄÅ‰∏¢Â§±‚Äù„ÄÅ‚ÄúÁºìÂ≠òÁ©øÈÄè‚ÄùÁ≠âÈóÆÈ¢ò„ÄÇ ‰∏∫‰ªÄ‰πàhashÁ≠ñÁï•‰ºöÂá∫Áé∞Ëøô‰∏™ÈóÆÈ¢òÂë¢ÔºüÈ¶ñÂÖàÊúâÂøÖË¶ÅÂÖà‰∫ÜËß£‰∏Ä‰∏ãhashÊòØÂ¶Ç‰ΩïËøõË°åÁöÑ„ÄÇhashÁ≠ñÁï•Â∞±ÊòØ‰∏ãÂõæËøôÊ†∑ÁöÑ‰∏Ä‰∏™Êï£ÂàóÂáΩÊï∞„ÄÇÂú®ÂáΩÊï∞‰∏çÂèòÁöÑÊÉÖÂÜµ‰∏ãÔºåAÊ∞∏ËøúÂØπÂ∫î01ÔºåBÂØπÂ∫î04ÔºåCÂØπÂ∫î08„ÄÇ ‰ª•nginx‰∏≠ÁöÑip_hashÁ≠ñÁï•Êù•‰∏æ‰∏™‰æãÂ≠ê„ÄÇÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÁî®Êà∑ÁöÑip‰∏ç‰ºöÂú®Áü≠Êó∂Èó¥ÂÜÖÂèëÁîüÂèòÂåñÔºåÊâÄ‰ª•ÂΩì‰ΩøÁî®ip_hashÁ≠ñÁï•ËøõË°åË¥üËΩΩÂùáË°°Êó∂ÔºåÊÑèÂë≥ÁùÄÊúüÊúõÂêå‰∏Ä‰∏™Áî®Êà∑ËÉΩÂ§ü‰∏ÄÁõ¥ËÆøÈóÆÂà∞Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÔºåÂ∞±ÂÉè‰∏ãÂõæËøôÊ†∑„ÄÇ Â¶ÇÊ≠§‰∏ÄÊù•ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂú®Ëøô‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÂ∞ÜËøô‰∏™Áî®Êà∑Áõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØÁºìÂ≠òÂú®ËøõÁ®ãÂÜÖÔºåËøôÊó∂ÔºåÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´Ø‰πãÈó¥ÁöÑÁõ∏ÂΩì‰∫éÂª∫Á´ã‰∫Ü‰∏Ä‰∏™‰ø°‰ªªÔºåÁõ∏‰∫íËÆ§ËØÜ„ÄÇËøô‰∏™‰ø°‰ªªÂ∞±ÊòØ„ÄåSession„Äç„ÄÇ‰ΩÜÊòØÔºåÂΩìÊàë‰ª¨Âä†‰∫Ü‰∏ÄÂè∞ÊúçÂä°Âô®‰πãÂêéÔºå‰∫ãÊÉÖÂ∞±ÂèëÁîüÂèòÂåñ‰∫Ü„ÄÇ Ëøô‰∏™Êó∂ÂÄôÂéüÂÖàÁöÑÈ¢ÑÊúüÂ∞±Ë¢´Á†¥Âùè‰∫Ü„ÄÇÂõ†‰∏∫Áî®Êà∑‰∏éÂ∫èÂè∑0ËäÇÁÇπÁöÑÈìæÊé•ÂèòÊàê‰∫Ü‰∏éÂ∫èÂè∑3ÁöÑÈìæÊé•ÔºåÊâÄ‰ª•‰∫ßÁîü‰∫ÜSession‰∏¢Â§±ÈóÆÈ¢ò„ÄÇ‰∏éÊ≠§ÂêåÊó∂ÔºåÂú®Â∫èÂè∑0ËäÇÁÇπ‰∏äÂÅöÁöÑËøõÁ®ãÂÜÖÁºìÂ≠òÈÉΩÊó†Êïà‰∫ÜÔºåËÄåÂú®Â∫èÂè∑3ËäÇÁÇπ‰∏äÂèàÊ≤°ÊúâÁî®Êà∑Áõ∏ÂÖ≥ÁöÑ‰ªª‰ΩïÁºìÂ≠òÔºåÂØºËá¥Â§ßÈáèÊï∞ÊçÆÈúÄË¶Å‰ªé‰∏ãÊ∏∏ÁöÑDBÊàñËÄÖËøúÁ®ãÊúçÂä°Â§ÑËé∑Âèñ„ÄÇË¶ÅÁü•ÈÅìÔºå‰∏ÄÊó¶Ê∂âÂèäÂà∞ÁΩëÁªúÈÄö‰ø°ÔºåÊÄßËÉΩÂøÖÁÑ∂ÊòéÊòæ‰∏ãÈôçÔºåI/O„ÄÅÂ∫èÂàóÂåñÈÉΩÊòØËÄóÊó∂ÁöÑÂ∑•‰Ωú„ÄÇÊõ¥ÈáçË¶ÅÁöÑÊòØÔºå‰∏ÄÊó¶ÂêåÊó∂ÊúâÂ§ßÈáèÁî®Êà∑‰∫ßÁîüËøô‰∏™ÊÉÖÂÜµÔºåÁî±‰∫éÂêéÁ´ØÁöÑDBÂíåËøúÁ®ãÊúçÂä°Áû¨Êó∂Êó†Ê≥ïÊâøËΩΩÊøÄÂ¢ûÁöÑÈ´òÂØÜÂ∫¶ËØ∑Ê±ÇÔºåÂèØËÉΩ‰ºöÂØºËá¥ÂÆÉÊåÇËµ∑„ÄÇËøôËøòÊ≤°ÂÆåÔºåÂ¶ÇÊûúÂΩìÂâçÁ®ãÂ∫èÊ≤°Êúâ‰∏Ä‰∫õÊïÖÈöúÈöîÁ¶ªÊàñËÄÖÈôçÁ∫ßÁ≠ñÁï•ÔºåËøò‰ºöËøõ‰∏ÄÊ≠•‰∫ßÁîüËù¥Ëù∂ÊïàÂ∫îÔºåÂØºËá¥Êï¥‰∏™Â§ßÁ≥ªÁªüÂìçÂ∫îÁºìÊÖ¢„ÄÇ nginxÊòØÂ¶Ç‰ΩïËß£ÂÜ≥ÁöÑ ÈÄöËøáÂú®nginx‰∏≠ÂºïÂÖ•nginx-sticky-moduleÊ®°ÂùóÂèØ‰ª•Êù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇËß£ÂÜ≥ÁöÑÊï¥‰∏™ËøáÁ®ãÂ¶Ç‰∏ã„ÄÇ ÂèØ‰ª•ÁúãÂà∞ÔºåÂΩìclientÁ¨¨‰∏ÄÊ¨°ËøõÂÖ•Âà∞nginxÂåπÈÖçËäÇÁÇπÁöÑÊó∂ÂÄôÔºåÂú®ÁªôÂÆÉÂàÜÈÖç‰∏Ä‰∏™ËäÇÁÇπÁöÑÂêåÊó∂Ôºå‰ºöÂ∞ÜËøô‰∏™ËäÇÁÇπÁöÑÂîØ‰∏ÄÊ†áËØÜËøõË°åmd5ÂêéÂÜôÂÖ•Âà∞cookie‰∏≠‰∏ÄÂπ∂ËøîÂõûÔºåÂ¶ÇÊûú‰∏ãÊ¨°ÂÜçÂèëËµ∑ËØ∑Ê±ÇÁöÑÊó∂ÂÄôÂèëÁé∞Â∏¶ÊúâËøô‰∏™cookieÂÄºÔºåÂ∞±Áõ¥Êé•ËΩ¨ÂèëÂà∞ËØ•ÂÄºÊâÄÂØπÂ∫îÁöÑËäÇÁÇπ‰∏äÂéª„ÄÇËøô‰∏™Êú∫Âà∂Ë¢´‰∏ì‰∏öÁöÑÁß∞‰πã‰∏∫„ÄåSession‰øùÊåÅ„Äç„ÄÇ ËôΩÁÑ∂ÂèØ‰ª•Âà©Áî®cookieÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå‰ΩÜÊòØcookie‰πüÊúâ‰∏Ä‰∏™ÊΩúÂú®ÁöÑÈóÆÈ¢òÔºåÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÊú™ÂºÄÂêØcookieÂäüËÉΩÔºåËøô‰∏™Êú∫Âà∂Â∞±Â§±Êïà‰∫Ü„ÄÇ‰∏çËøáÂ•ΩÂú®ÁõÆÂâç‰∏ªÊµÅÊµèËßàÂô®ÈÉΩÊòØÈªòËÆ§ÊâìÂºÄcookieÁöÑ„ÄÇ ÂÖ∂‰ªñËß£ÂÜ≥ÊñπÊ°à SessionÂ§çÂà∂ ËøôÊòØÊúÄÁÆÄÂçïÁ≤óÊö¥ÁöÑÊñπÂºè„ÄÇÊ†πÊçÆ‰∏äÈù¢ÁöÑÊ°à‰æãÊù•ÁúãÔºåÂØºËá¥ÈóÆÈ¢òÁöÑÂéüÂõ†ÊòØËäÇÁÇπ3Ê≤°ÊúâÁî®Êà∑ÁöÑSession„ÄÇÈÇ£‰πàÂæàÂÆπÊòìÊÉ≥Âà∞ÔºåÂú®ËäÇÁÇπ3ËøêË°å‰πãÂâçÊääSessionÁõ∏ÂÖ≥ÁöÑCacheÊï∞ÊçÆÂ§çÂà∂ËøáÂéªÔºåÂπ∂‰∏îÂú®Â§ö‰∏™ËäÇÁÇπ‰πãÈó¥ÊåÅÁª≠‰øùËØÅÊï∞ÊçÆÁöÑÂêåÊ≠•Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÊØè‰∏ÄÂè∞ËäÇÁÇπ‰∏äÈÉΩÂ≠òÂú®ÊØè‰∏™Áî®Êà∑ÁöÑSessionÊï∞ÊçÆ„ÄÇ ÂÆûÁé∞ÁöÑÊñπÊ°àÊúâÂæàÂ§öÔºåÁâπÂà´ÊòØ‰∏çÂêåÁöÑÂÆø‰∏ªÁ®ãÂ∫èÈÉΩÊàñÂ§öÊàñÂ∞ëÊèê‰æõ‰∫Ü‰∏Ä‰∫õÂàáÂÖ•ÁÇπÔºåÁîöËá≥ÊòØÊãøÊù•Âç≥Áî®ÁöÑÊñπÊ°àÔºåÂ¶ÇTomcatÁöÑDelta ManagerÂíåBackup Manager„ÄÅTomcatÂíåIISÁöÑFilterÊú∫Âà∂Á≠âÁ≠â„ÄÇÊ≠§Á±ªÊñπÊ°àÁöÑÁâπÁÇπÊòØ ‰ºòÁÇπÔºöÂ§©ÁÑ∂È´òÂèØÁî®Ôºå‰∏ÄÈÉ®ÂàÜËäÇÁÇπÂÆïÊú∫Ê≤°‰∫ã„ÄÇÂõ†‰∏∫ÊØè‰∏Ä‰∏™ËäÇÁÇπ‰∏äÂ≠òÊîæÁùÄÊâÄÊúâÂ∑≤ËøûÊé•Áî®Êà∑ÁöÑ‰ºöËØù‰ø°ÊÅØ„ÄÇ Áº∫ÁÇπÔºöÂõ†‰∏∫ÊØèÂè∞ËÆ°ÁÆóÊú∫ÁöÑÂÜÖÂ≠òÊòØÊúâ‰∏äÈôêÁöÑÔºå‰ªÖÈÄÇÁî®‰∫é‰ºöËØùÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÂ§ßÂ∞èËæÉÂ∞èÁöÑÂú∫ÊôØ„ÄÇÂπ∂‰∏îÔºåÁî±‰∫éÂ§ö‰∏™ËäÇÁÇπ‰πãÈó¥ÈúÄË¶ÅÂêåÊ≠•Êï∞ÊçÆÔºåÈúÄË¶ÅÈ¢ùÂ§ñËß£ÂÜ≥Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇ‰∏éÊ≠§ÂêåÊó∂ÔºåÈöèÁùÄËäÇÁÇπË∂äÂ§öÔºåÊçüËÄóË∂äÂ§ßÔºàÂª∂Ëøü„ÄÅÂ∏¶ÂÆΩÁ≠âÔºâÔºåÊúâÂπøÊí≠È£éÊö¥È£éÈô©„ÄÇ SessionÂÖ±‰∫´ ÈÄöËøáÂ∞Üsession‰ø°ÊÅØÂ≠òÊîæÂà∞ÂÖ®Â±ÄÂÖ±‰∫´ÁöÑÂ≠òÂÇ®‰ªãË¥®‰∏≠Êù•ËææÂà∞‰∏ÄÊ†∑ÁöÑÊïàÊûúÔºåÂ¶ÇÊï∞ÊçÆÂ∫ì„ÄÅËøúÁ®ãÁºìÂ≠òÁ≠âÔºåËøôÊòØ‰∏ÄÁßç‰∏≠ÂøÉÂåñÊÄùÊÉ≥ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ Ê≠§Á±ªÊñπÊ°àÁöÑÁâπÁÇπÊòØÔºö ‰ºòÁÇπÔºö‰∏çÁÆ°ËäÇÁÇπÊÄé‰πàÂ¢ûÂä†ÂíåÂáèÂ∞ëÔºå100%‰∏ç‰ºö‰∫ßÁîü‰ºöËØù‰∏¢Â§±„ÄÇ Áº∫ÁÇπÔºöÊØèÊ¨°ËØªÂÜôËØ∑Ê±ÇÈÉΩÈúÄË¶ÅÂ¢ûÂä†È¢ùÂ§ñÂÖ±‰∫´ÂÇ®Â≠òË∞ÉÁî®ÔºåÂ¢ûÂä†‰∫ÜÁΩëÁªúI/O„ÄÅÂ∫èÂàóÂåñÁ≠âÊìç‰ΩúÔºåÊÄßËÉΩÊòéÊòæ‰∏ãÈôç„ÄÇÂè¶Â§ñÔºåÁî®‰ΩúÂÖ±‰∫´ÁöÑÂ≠òÂÇ®‰ªãË¥®Èô§‰∫ÜÂ¢ûÂä†‰∫ÜÈ¢ùÂ§ñÁöÑÁª¥Êä§ÊàêÊú¨Â§ñÔºåËøòÈúÄË¶ÅËß£ÂÜ≥ÂçïÁÇπÈóÆÈ¢òÔºå‰ª•ÂÖç‰∫ßÁîüÁ≥ªÁªüÊÄßÈ£éÈô©„ÄÇ ‰∏âÁßçÊñπÊ°àÂØπÊØî ÂàÜÂà´Áî®‰∏ÄÂè•ËØùÊ¶ÇÊã¨‰∏Ä‰∏ãËøô3‰∏™ÊñπÊ°àÔºö Session ‰øùÊåÅÔºöÂéüÊù•Âú®Âì™ËøòÊòØÂéªÂì™„ÄÇ Session Â§çÂà∂Ôºö‰∏çÁÆ°Âú®Âì™ÈÉΩÊúâ‰∏ÄÊ†∑ÁöÑÊï∞ÊçÆ„ÄÇ Session ÂÖ±‰∫´ÔºöÊâÄÊúâËäÇÁÇπÂÖ±Áî®‰∏Ä‰ªΩÊï∞ÊçÆ„ÄÇ]]></content>
      <categories>
        <category>ÂàÜÂ∏ÉÂºè</category>
      </categories>
      <tags>
        <tag>ÂàÜÂ∏ÉÂºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàÜÂ∏ÉÂºèÂ≠¶‰π†-Ë¥üËΩΩÂùáË°°]]></title>
    <url>%2Fposts%2F95c2b1da.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÁöÑÂÖ≥ÈîÆÊòØÂÅöÂÜó‰ΩôÔºåËÆ©Ëøô‰∫õÂÜó‰ΩôËÉΩÂèëÊå•È´òÂèØÁî®‰ΩúÁî®ÁöÑÂ∞±ÊòØË¥üËΩΩÂùáË°°„ÄÇË¥üËΩΩÂùáË°°ÁöÑ‰ΩúÁî®ÊòØ‰∏Ä‰∏™‚ÄúËøûÊé•ËÄÖ‚ÄùÔºåËÆ©‰∏ä‰∏ãÊ∏∏‰πãÈó¥‰ª•ÊúüÊúõÁöÑÊñπÂºè‚ÄúËøûÊé•‚ÄùËµ∑Êù•„ÄÇÊâÄ‰ª•ÔºåÊúâÂøÖË¶ÅÂÖà‰∫ÜËß£‰∏Ä‰∏ãËøô‰∫õ‰∏ä‰∏ãÊ∏∏ÁöÑÂÖ®Ë≤åÔºåÂπ∂‰∏î‰ªé‰∏≠ÊâæÂà∞ÂÅöË¥üËΩΩÂùáË°°ÁöÑÂú∞Êñπ„ÄÇ ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊúâÂêÑÂºèÂêÑÊ†∑ÁöÑÊû∂ÊûÑÊñπÂºèÔºå‰∏çËøáÊú¨Ë¥®‰∏äÈÉΩÊòØ‰∏äÂõæËøôÊ†∑ÁöÑ‰∏Ä‰∏™ÂàÜÂ±ÇÊû∂ÊûÑ„ÄÇÂõæ‰∏≠Á∫¢ÁÇπÊ†áËÆ∞Âá∫ÁöÑÂú∞ÊñπÂ∞±ÊòØÈúÄË¶ÅÂÅöË¥üËΩΩÂùáË°°ÁöÑÂú∞ÊñπÔºåÂèØ‰ª•ÁúãÂà∞ÔºåÂ∞±ÊòØÊØè‰∏§Â±Ç‰πãÈó¥ÁöÑËøûÊé•Â§Ñ„ÄÇËøô‰∫õËøûÊé•Â§ÑÂú®ÂÆûÈôÖÂÅöË¥üËΩΩÂùáË°°ÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÁªìÂêàÊâÄÂ§ÑÁöÑÁΩëÁªúÂ±ÇÊ¨°„ÄÇÂõ†‰∏∫Âú®‰∏çÂêåÁöÑÁΩëÁªúÂ±ÇÊ¨°Êúâ‰∏çÂêåÁöÑÂÅöÊ≥ï„ÄÇÂ¶Ç‰∏ãÂõæ„ÄÇ ‰∏ÄËà¨‰∏ªÊµÅÁöÑÂõõÂ±ÇË¥üËΩΩÂùáË°°Âíå‰∏ÉÂ±ÇË¥üËΩΩÂùáË°°ÔºåÂâçËÄÖÊåáÁöÑÂ∞±ÊòØ‰º†ËæìÂ±ÇÔºå‰∏ªË¶ÅÊ∂âÂèäÁöÑÂçèËÆÆÊòØTCP„ÄÅUDPÁ≠âÔºåÂêéËÄÖÊåáÁöÑÂ∫îÁî®Â±ÇÔºå‰∏ªË¶ÅÊ∂âÂèäÁöÑÂçèËÆÆÊòØHttp„ÄÅHttpsÂíåFTPÁ≠â„ÄÇ Áî®Êù•ÂÆûÁé∞Ë¥üËΩΩÂùáË°°ÁöÑËß£ÂÜ≥ÊñπÊ°àÊúâÂæàÂ§öÔºåÂàÜ‰∏∫Âü∫‰∫éÁ°¨‰ª∂ÊàñËÄÖÂü∫‰∫éËΩØ‰ª∂ÁöÑÔºåÊØîËæÉÊàêÁÜüÁöÑËØ∏Â¶ÇÔºöF5ÔºàÊîØÊåÅÂõõÂ±Ç„ÄÅ‰∏ÉÂ±ÇÔºâ„ÄÅLVSÔºàÊîØÊåÅÂõõÂ±ÇÔºâ„ÄÅNginxÔºàÊîØÊåÅ‰∏ÉÂ±ÇÔºâÁ≠âÁ≠â„ÄÇ Â∏∏Áî®Ë¥üËΩΩÂùáË°°Á≠ñÁï• ËΩÆËØ¢ ËøôÊòØÊúÄÂ∏∏Áî®‰πüÊúÄÁÆÄÂçïÁ≠ñÁï•ÔºåÂπ≥ÂùáÂàÜÈÖçÔºå‰∫∫‰∫∫ÈÉΩÊúâ„ÄÅ‰∏Ä‰∫∫‰∏ÄÊ¨°„ÄÇÂ§ßËá¥ÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ã„ÄÇ 1234567891011int globalIndex = 0; try&#123; return servers[globalIndex];&#125;finally&#123; globalIndex++; if (globalIndex == 3) globalIndex = 0;&#125; Âä†ÊùÉËΩÆËØ¢ Âú®ËΩÆËØ¢ÁöÑÂü∫Á°Ä‰∏äÔºåÂ¢ûÂä†‰∫Ü‰∏Ä‰∏™ÊùÉÈáçÁöÑÊ¶ÇÂøµ„ÄÇÊùÉÈáçÊòØ‰∏Ä‰∏™Ê≥õÂåñÂêéÁöÑÊ¶ÇÂøµÔºåÂèØ‰ª•Áî®‰ªªÊÑèÊñπÂºèÊù•‰ΩìÁé∞ÔºåÊú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™ËÉΩËÄÖÂ§öÂä≥ÊÄùÊÉ≥„ÄÇÊØîÂ¶ÇÔºåÂèØ‰ª•Ê†πÊçÆÂÆø‰∏ªÁöÑÊÄßËÉΩÂ∑ÆÂºÇÈÖçÁΩÆ‰∏çÂêåÁöÑÊùÉÈáç„ÄÇÂ§ßËá¥ÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ã„ÄÇ 1234567891011121314151617int matchedIndex = -1;int total = 0;for (int i = 0; i &lt; servers.Length; i++)&#123; //ÊØèÊ¨°Âæ™ÁéØÁöÑÊó∂ÂÄôÂÅöËá™Â¢ûÔºàÊ≠•Èïø=ÊùÉÈáçÂÄºÔºâ servers[i].cur_weight += servers[i].weight; //Â∞ÜÊØè‰∏™ËäÇÁÇπÁöÑÊùÉÈáçÂÄºÁ¥ØÂä†Âà∞Ê±áÊÄªÂÄº‰∏≠ total += servers[i].weight; //Â¶ÇÊûú ÂΩìÂâçËäÇÁÇπÁöÑËá™Â¢ûÊï∞ &gt; ÂΩìÂâçÂæÖËøîÂõûËäÇÁÇπÁöÑËá™Â¢ûÊï∞ÔºåÂàôË¶ÜÁõñ„ÄÇ if (matchedIndex == -1 || servers[matchedIndex].cur_weight &lt; servers[i].cur_weight) &#123; matchedIndex = i; &#125;&#125;servers[matchedIndex].cur_weight -= total;//‚ë£Ë¢´ÈÄâÂèñÁöÑËäÇÁÇπÂáèÂéª‚ë°ÁöÑÊ±áÊÄªÂÄºÔºå‰ª•Èôç‰Ωé‰∏ã‰∏ÄÊ¨°Ë¢´ÈÄâ‰∏æÊó∂ÁöÑÂàùÂßãÊùÉÈáçÂÄº„ÄÇreturn servers[matchedIndex]; ËøôÊÆµ‰ª£Á†ÅÁöÑËøáÁ®ãÂ¶Ç‰∏ãÂõæÁöÑË°®Ê†º„ÄÇ&quot;()&quot;‰∏≠ÁöÑÊï∞Â≠óÂ∞±ÊòØËá™Â¢ûÊï∞Ôºå‰ª£Á†Å‰∏≠ÁöÑcur_weight„ÄÇ ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÂä†ÊùÉËΩÆËØ¢Êú¨Ë∫´ËøòÊúâ‰∏çÂêåÁöÑÂÆûÁé∞ÊñπÂºèÔºåËôΩËØ¥ÊúÄÁªàÁöÑÊØî‰æãÈÉΩÊòØ2Ôºö1Ôºö2„ÄÇ‰ΩÜÊòØÂú®ËØ∑Ê±ÇÈÄÅËææÁöÑÂÖàÂêéÈ°∫Â∫è‰∏äÂèØ‰ª•ÊâÄÊúâ‰∏çÂêå„ÄÇÊØîÂ¶Ç„Äå5-4Ôºå3Ôºå2-1„ÄçÂíå‰∏äÈù¢ÁöÑÊ°à‰æãÁõ∏ÊØîÔºåÊúÄÁªàÊØî‰æãÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØÊïàÊûú‰∏çÂêå„ÄÇ„Äå5-4Ôºå3Ôºå2-1„ÄçÊõ¥ÂÆπÊòì‰∫ßÁîüÂπ∂ÂèëÈóÆÈ¢òÔºåÂØºËá¥ÊúçÂä°Á´ØÊã•Â°ûÔºå‰∏îËøô‰∏™ÈóÆÈ¢òÈöèÁùÄÊùÉÈáçÊï∞Â≠óË∂äÂ§ßË∂ä‰∏•Èáç„ÄÇ‰æãÂ≠êÔºö10Ôºö5Ôºö3ÁöÑÁªìÊûúÊòØ„Äå18-17-16-15-14-13-12-11-10-9Ôºå8-7-6-5-4Ôºå3-2-1„Äç ÊúÄÂ∞ëËøûÊé•Êï∞ ËøôÊòØ‰∏ÄÁßçÊ†πÊçÆÂÆûÊó∂ÁöÑË¥üËΩΩÊÉÖÂÜµÔºåËøõË°åÂä®ÊÄÅË¥üËΩΩÂùáË°°ÁöÑÊñπÂºè„ÄÇÁª¥Êä§Â•ΩÊ¥ªÂä®‰∏≠ÁöÑËøûÊé•Êï∞ÈáèÔºåÁÑ∂ÂêéÂèñÊúÄÂ∞èÁöÑËøîÂõûÂç≥ÂèØ„ÄÇÂ§ßËá¥ÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ã„ÄÇ 1234var matchedServer = servers.orderBy(e =&gt; e.active_conns).first();matchedServer.active_conns += 1;return matchedServer;//Âú®ËøûÊé•ÂÖ≥Èó≠Êó∂ËøòÈúÄÂØπactive_connsÂÅöÂáè1ÁöÑÂä®‰Ωú„ÄÇ ÊúÄÂø´ÂìçÂ∫î Ëøô‰πüÊòØ‰∏ÄÁßçÂä®ÊÄÅË¥üËΩΩÂùáË°°Á≠ñÁï•ÔºåÂÆÉÁöÑÊú¨Ë¥®ÊòØÊ†πÊçÆÊØè‰∏™ËäÇÁÇπÂØπËøáÂéª‰∏ÄÊÆµÊó∂Èó¥ÂÜÖÁöÑÂìçÂ∫îÊÉÖÂÜµÊù•ÂàÜÈÖçÔºåÂìçÂ∫îË∂äÂø´ÂàÜÈÖçÁöÑË∂äÂ§ö„ÄÇÂÖ∑‰ΩìÁöÑËøê‰ΩúÊñπÂºè‰πüÊúâÂæàÂ§öÔºå‰∏äÂõæÁöÑËøôÁßçÂèØ‰ª•ÁêÜËß£‰∏∫ÔºåÂ∞ÜÊúÄËøë‰∏ÄÊÆµÊó∂Èó¥ÁöÑËØ∑Ê±ÇËÄóÊó∂ÁöÑÂπ≥ÂùáÂÄºËÆ∞ÂΩï‰∏ãÊù•ÔºåÁªìÂêàÂâçÈù¢ÁöÑ„ÄåÂä†ÊùÉËΩÆËØ¢„ÄçÊù•Â§ÑÁêÜÔºåÊâÄ‰ª•Á≠â‰ª∑‰∫é2Ôºö1Ôºö3ÁöÑÂä†ÊùÉËΩÆËØ¢„ÄÇ HashÊ≥ï hashÊ≥ïÁöÑË¥üËΩΩÂùáË°°‰∏é‰πãÂâçÁöÑÂá†Áßç‰∏çÂêåÂú®‰∫éÔºåÂÆÉÁöÑÁªìÊûúÊòØÁî±ÂÆ¢Êà∑Á´ØÂÜ≥ÂÆöÁöÑ„ÄÇÈÄöËøáÂÆ¢Êà∑Á´ØÂ∏¶Êù•ÁöÑÊüê‰∏™Ê†áËØÜÁªèËøá‰∏Ä‰∏™Ê†áÂáÜÂåñÁöÑÊï£ÂàóÂáΩÊï∞ËøõË°åÊâìÊï£ÂàÜÊëä„ÄÇ Â∏∏Áî®Ë¥üËΩΩÂùáË°°Á≠ñÁï•‰ºòÁº∫ÁÇπÂíåÈÄÇÁî®Âú∫ÊôØ ÂÅ•Â∫∑Êé¢Êµã‰øùÈöúÈ´òÂèØÁî® ‰∏çÁÆ°ÊòØ‰ªÄ‰πàÊ†∑ÁöÑÁ≠ñÁï•ÔºåÈöæÂÖç‰ºöÈÅáÂà∞Êú∫Âô®ÊïÖÈöúÊàñËÄÖÁ®ãÂ∫èÊïÖÈöúÁöÑÊÉÖÂÜµ„ÄÇÊâÄ‰ª•Ë¶ÅÁ°Æ‰øùË¥üËΩΩÂùáË°°ËÉΩÊõ¥Â•ΩÁöÑËµ∑Âà∞ÊïàÊûúÔºåËøòÈúÄË¶ÅÁªìÂêà‰∏Ä‰∫õ„ÄåÂÅ•Â∫∑Êé¢Êµã„ÄçÊú∫Âà∂„ÄÇÂÆöÊó∂ÁöÑÂéªÊé¢ÊµãÊúçÂä°Á´ØÊòØ‰∏çÊòØËøòËÉΩËøû‰∏äÔºåÂìçÂ∫îÊòØ‰∏çÊòØË∂ÖÂá∫È¢ÑÊúüÁöÑÊÖ¢„ÄÇÂ¶ÇÊûúËäÇÁÇπÂ±û‰∫é‚Äú‰∏çÂèØÁî®‚ÄùÁöÑÁä∂ÊÄÅÁöÑËØùÔºåÈúÄË¶ÅÂ∞ÜËøô‰∏™ËäÇÁÇπ‰∏¥Êó∂‰ªéÂæÖÈÄâÂèñÂàóË°®‰∏≠ÁßªÈô§Ôºå‰ª•ÊèêÈ´òÂèØÁî®ÊÄß„ÄÇ‰∏ÄËà¨Â∏∏Áî®ÁöÑ„ÄåÂÅ•Â∫∑Êé¢Êµã„ÄçÊñπÂºèÊúâ3Áßç„ÄÇ HTTPÊé¢Êµã ‰ΩøÁî®Get/PostÁöÑÊñπÂºèËØ∑Ê±ÇÊúçÂä°Á´ØÁöÑÊüê‰∏™Âõ∫ÂÆöÁöÑURLÔºåÂà§Êñ≠ËøîÂõûÁöÑÂÜÖÂÆπÊòØÂê¶Á¨¶ÂêàÈ¢ÑÊúü„ÄÇ‰∏ÄËà¨‰ΩøÁî®HttpÁä∂ÊÄÅÁ†Å„ÄÅresponse‰∏≠ÁöÑÂÜÖÂÆπÊù•Âà§Êñ≠„ÄÇ TCPÊé¢Êµã Âü∫‰∫éTcpÁöÑ‰∏âÊ¨°Êè°ÊâãÊú∫Âà∂Êù•Êé¢ÊµãÊåáÂÆöÁöÑIP + Á´ØÂè£„ÄÇÊúÄ‰Ω≥ÂÆûË∑µÂèØ‰ª•ÂÄüÈâ¥ÈòøÈáå‰∫ëÁöÑSLBÊú∫Âà∂ÔºåÂ¶Ç‰∏ãÂõæ„ÄÇ UDPÊé¢Êµã ÂèØËÉΩÊúâÈÉ®ÂàÜÂ∫îÁî®‰ΩøÁî®ÁöÑUDPÂçèËÆÆ„ÄÇÂú®Ê≠§ÂçèËÆÆ‰∏ãÂèØ‰ª•ÈÄöËøáÊä•ÊñáÊù•ËøõË°åÊé¢ÊµãÊåáÂÆöÁöÑIP + Á´ØÂè£„ÄÇÊúÄ‰Ω≥ÂÆûË∑µÂêåÊ†∑ÂèØ‰ª•ÂÄüÈâ¥ÈòøÈáå‰∫ëÁöÑSLBÊú∫Âà∂ÔºåÂ¶Ç‰∏ãÂõæ„ÄÇ ÁªìÊûúÁöÑÂà§ÂÆöÊñπÂºèÊòØÔºöÂú®ÊúçÂä°Á´ØÊ≤°ÊúâËøîÂõû‰ªª‰Ωï‰ø°ÊÅØÁöÑÊÉÖÂÜµ‰∏ãÔºåÈªòËÆ§Ê≠£Â∏∏Áä∂ÊÄÅ„ÄÇÂê¶Âàô‰ºöËøîÂõû‰∏Ä‰∏™ICMPÁöÑÊä•Èîô‰ø°ÊÅØ„ÄÇ ÂÆûÊñΩË¥üËΩΩÂùáË°° Á°¨‰ª∂Ë¥üËΩΩÂùáË°° Á°¨‰ª∂ËøôÂùóÂêçÊ∞îÊúÄÂ§ßÁöÑËøòÂ±ûF5„ÄÇÊ≠§Á±ªÁ°¨‰ª∂Ë¥üËΩΩÂùáË°°Âô®ÁöÑÁâπÁÇπÊòØ‚ÄúÂ£ï‚ÄùÔºåÊØïÁ´üÊòØÁ∫ØÂïÜ‰∏öÂåñÁöÑ‰∏úË•øÔºåÊäïÂÖ•ÁöÑËµÑÊ∫êÂíåÁ≤æÂäõËá™ÁÑ∂ÊòØ‰ºóÂ§öÂºÄÊ∫êËΩØ‰ª∂Ë¥üËΩΩÂùáË°°ÊâÄÊó†Ê≥ïÊØîÊãüÁöÑÔºåÊâÄ‰ª•ÂäüËÉΩÈùûÂ∏∏Âº∫Â§ß„ÄÇÂåÖÂê´ËÆøÈóÆÂä†ÈÄü„ÄÅÂéãÁº©„ÄÅÂÆâÂÖ®Á≠âÁ≠âË¥üËΩΩÂùáË°°‰πãÂ§ñÁöÑËÆ∏Â§öÈôÑÂä†ÂäüËÉΩ„ÄÇ Â¶ÇÊûúÁî®F5ÁªÑÁΩëÁöÑËØùÔºåÊúâ‰∏§ÁßçÁªìÊûÑÔºå‰∏≤Ë°åÁªìÊûÑÂíåÂπ∂Ë°åÁªìÊûÑÔºå‰πüÁß∞‰∏∫Áõ¥ËøûÊ®°ÂºèÂíåÊóÅË∑ØÊ®°Âºè„ÄÇÂâçËÄÖÁöÑ‰ºòÂäøÂú®ÂØπÁ°¨‰ª∂‰∫ßÁîüÂéãÂäõËæÉÂ∞è„ÄÅ‰∏îÂ§©ÁÑ∂ÂÆâÂÖ®ÊÄßÈ´òÔºåËÄåÂêéËÄÖÂØπÂéüÁΩëÁªúÊû∂ÊûÑÁöÑÊîπÂä®ËæÉÂ∞è„ÄÅ‰∏îÊâ©Â±ïÊÄßËæÉÂ•Ω„ÄÇÂ§ßÂÆ∂Âú®ÂÆûÈôÖÁöÑ‰ΩøÁî®‰∏≠ÁªìÂêàËá™Ë∫´ÊÉÖÂÜµÊù•ÈÉ®ÁΩ≤„ÄÇ ËΩØ‰ª∂Ë¥üËΩΩÂùáË°°ÔºàL7Ôºâ ÈíàÂØπWebÂ∫îÁî®ÁöÑL7Ë¥üËΩΩÂùáË°°ÔºåÊØîËæÉ‰∏ªÊµÅÁöÑ‰∫ßÂìÅÊòØ2‰∏™Nginx„ÄÅHAProxy„ÄÇÂú®L7ÂÅöË¥üËΩΩÂùáË°°ÔºåÊúÄÂ§ßÁöÑÁâπÁÇπÂ∞±ÊòØÁÅµÊ¥ªÔºåËØ∑Ê±ÇÁöÑURL„ÄÅHeaderÈÉΩÊòØÂèØ‰ª•ÂéªÊéåÊéßÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•Âà©Áî®ÂÖ∂‰∏≠ÁöÑ‰ªª‰Ωï‰ø°ÊÅØ‰∏∫Ë¥üËΩΩÂùáË°°Á≠ñÁï•ÊâÄÁî®„ÄÇÂÆûÈôÖÊìç‰Ωú‰∏≠‰∏ªË¶ÅÂÅö2Ê≠•Ôºö Âú®ÂÖ¨ÁΩëÁöÑÂüüÂêçËß£Êûê‰∏≠ÔºåÈÖçÁΩÆËß£ÊûêÂà∞„ÄåÂèçÂêë‰ª£ÁêÜ„Äç„ÄÇËÆ∞ÂΩïÁ±ªÂûãÊòØ„ÄåA„ÄçÔºåËÆ∞ÂΩïÂÄºÊòØ„ÄåÂèçÂêë‰ª£ÁêÜ„ÄçÁöÑIP„ÄÇ ÈÖçÁΩÆÁúüÂÆûÊèê‰æõÊúçÂä°ÁöÑWebÂ∫îÁî®IPÂíåÁ´ØÂè£ÔºåÂíåË¥üËΩΩÂùáË°°ÂùáË°°Á≠ñÁï•„ÄÇ‰∏äÂõæ‰∏≠ÁöÑÈÖçÁΩÆÊòØNginx‰∏≠ÁöÑÁ§∫‰æãÔºåË¥üËΩΩÂùáË°°Á≠ñÁï•ÁöÑÁº∫ÁúÅÂÄºÊòØËΩÆËØ¢„ÄÇ ËΩØ‰ª∂Ë¥üËΩΩÂùáË°°ÔºàL4Ôºâ ÂΩìWebÂ∫îÁî®ÊâÄ‰æùËµñÁöÑTCPÂçèËÆÆÁöÑÊúçÂä°ÈúÄË¶ÅÊ®™ÂêëÊâ©Â±ïÔºåÊàñËÄÖÈúÄË¶ÅÂÅöÊï∞ÊçÆÂ∫ì„ÄÅÂàÜÂ∏ÉÂºèÁºìÂ≠òÁöÑÂ§ö‰∏ª„ÄÅ‰∏ª‰ªéÈõÜÁæ§Êó∂ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶Å‰∏Ä‰∏™ÊîØÊåÅL4ÁöÑË¥üËΩΩÂùáË°°ËΩØ‰ª∂„ÄÇËøôÈáåÊúÄÁü•ÂêçÁöÑÂ∞±Â±ûLVS‰∫ÜÔºåÂÆÉÊòØÂÜÖÊ†∏ÊÄÅÁöÑÁ®ãÂ∫èÔºåÊâÄ‰ª•Áõ∏ÊØîÁî®Nginx„ÄÅHAProxyÊù•ÂÅöL4ÁöÑË¥üËΩΩÂùáË°°ÔºåÂú®ÊÄßËÉΩ„ÄÅËµÑÊ∫êÁöÑÊ∂àËÄó‰∏ä‰ºöÊõ¥‰ºò‰∏Ä‰∫õ„ÄÇÂÆûÈôÖËøêÁî®‰∏≠ÁöÑÊìç‰ΩúÊ≠•È™§‰∏ªË¶Å‰πüÊòØ2Ê≠•Ôºö Âú®LVS‰∏≠Ê∑ªÂä†‰∏Ä‰∏™IPËôöÊãüÊúçÂä°ÔºàIPVSÔºâÔºåÂπ∂ÊåáÂÆöÂÆÉÁöÑIP„ÄÅÁ´ØÂè£ÂíåË¥üËΩΩÂùáË°°Á≠ñÁï•„ÄÇ Â∞ÜIPËôöÊãüÊúçÂä°ÂÖ≥ËÅîÂà∞ÁúüÂÆûÁöÑÊúçÂä°‰∏äÔºåÂπ∂ÊåáÂÆöÊ®°ÂºèÂíåÊùÉÈáçÁöÑ‰ø°ÊÅØ„ÄÇÔºàÂÅöL4ÁöÑË¥üËΩΩÂùáË°°ÂèØ‰ª•‰ΩøÁî®NATÊàñËÄÖFULLNATÊ®°ÂºèÔºâ LVSÁöÑÊ®°Âºè‰∏ÄÂÖ±ÊúâÂõõÁßçÔºåÈô§‰∫ÜNATÂíåFULLNATÔºàNATÁöÑÂ¢ûÂº∫ÁâàÔºâÊ®°ÂºèÂ§ñÔºåÂÆÉÁöÑTUNÊ®°ÂºèÂèØ‰ª•Âú®L3ÂÅöË¥üËΩΩÂùáË°°ÔºåDRÊ®°ÂºèÂèØ‰ª•Âú®L2ÂÅöË¥üËΩΩÂùáË°°ÔºåÂà∞Ëøô‰∏™Â±ÇÈù¢ÂÖ∂ÂÆûÂ∞±ÂíåÂÅöÁ°¨‰ª∂ÂêåÂ§Ñ‰∫é‰∏Ä‰∏™Â±ÇÊ¨°‰∫Ü„ÄÇÂπ∂‰∏îÔºåÈöèÁùÄÂ±ÇÊ¨°ÁöÑÊ∑±ÂÖ•ÔºåËôΩÁÑ∂ÂØπÂäüËÉΩÊÄß‰∏äÊúâÊâÄÂº±ÂåñÔºå‰ΩÜÊòØÂ¶ÇÊûú‰∏çËÄÉËôëÁ´ØÂè£ÁöÑËØùÔºåÂçï‰ªéIPÂ±ÇÈù¢ÁöÑË¥üËΩΩÂùáË°°Êù•ËØ¥ÔºåÁî®DRÊ®°ÂºèÂÅöÔºåÂàôÂØπÊï∞ÊçÆÂåÖÁöÑÂä†Â∑•‰ªãÂÖ•Â∫¶‰ºöÈôçÂà∞ÊúÄ‰ΩéÔºåÂõ†Ê≠§‰πüÊòØÈÄöËøáËΩØ‰ª∂ÂÅöË¥üËΩΩÂùáË°°ËÉΩÂ§üËææÂà∞ÁöÑÊÄßËÉΩÊûÅËá¥„ÄÇ Âè¶Â§ñÔºåLVS‰∏≠ËøêÁî®ÁöÑËôöÊãüIPÊ¶ÇÂøµÔºåÊú¨Ë¥®‰∏äÂíåNginx‰∏≠ÁöÑ‚Äúserver‚ÄùÊ¶ÇÂøµ‰∏ÄÊ†∑ÔºåÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Áªü‰∏ÄÂÖ•Âè£Ôºå‰ΩúÁî®‰∏äÂπ∂Ê≤°ÊúâÂ∑ÆÂà´„ÄÇÂ∞ÜNginx‰∏≠ÁöÑupstreamÂÖ≥ËÅîÂà∞serverÔºåÂ∞±Â¶ÇLVSÊìç‰ΩúÊ≠•È™§Á¨¨2ÁÇπ‰∏≠ÁöÑÂÖ≥ËÅî‰∏ÄËà¨„ÄÇ ‰ºòÁº∫ÁÇπ ‰∏çÂêåÁöÑËß£ÂÜ≥ÊñπÊ°àÊúâ‰∏çÂêåÁöÑ‰æßÈáçÁÇπ„ÄÇÂõ†Ê≠§Âú®Âçï‰∏™Ëß£ÂÜ≥ÊñπÊ°àÂ∑≤ÁªèÊó†Ê≥ïÊª°Ë∂≥ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•ÁªÑÂêà‰ΩøÁî®ÔºåÂêÑÂ∞ΩÊâÄÈïø„ÄÇ Êé®ËçêÊñπÊ°à Ë¥üËΩΩÂùáË°°Ëøô‰∏™È¢ÜÂüüËøòÊòØ‰ª•È´òÂèØÁî®ÂíåÊÄßËÉΩ‰∏∫2‰∏™ÊúÄÈáçË¶ÅÂõ†Á¥†Ôºå‰∏ãÈù¢ÊòØÊé®ËçêÁöÑ‰∏ÄÁßçÁªÑÂêàÊñπÂºèÔºå‰πüÊòØÂú®Á≥ªÁªüÈáèÁ∫ßËææÂà∞ÊØèÂ∞èÊó∂‰∏ä‰∫øPV‰πãÂêéÊúÄË¢´ÂπøÊ≥õ‰ΩøÁî®ÁöÑ‰∏ÄÁßç„ÄÇÁêÜËÆ∫‰∏äÔºåÂà©Áî®Á¨¨‰∏ÄÊ≠•DNSÁöÑÂüüÂêçËß£ÊûêÊâÄÂ∏¶ÁöÑË¥üËΩΩÂùáË°°ÊïàÊûúÔºåÂè™Ë¶ÅÂ§çÂà∂Â§öÂ•óLVS‰∏ªÂ§áÂá∫Êù•ÔºåÁªë‰∏äÂ§ö‰∏™‰∏çÂêåÁöÑËôöIPÔºåÂèØ‰ª•ÂÅöÂà∞Êó†ÈôêÊ®™ÂêëÊâ©Â±ïÔºå‰ª•ÊîØÊíë‰∏çÊñ≠Â¢ûÈïøÁöÑÊµÅÈáè„ÄÇ Áî®Âà∞ÁöÑ3‰∏™ËΩØ‰ª∂ÁõÆÂâçÈÉΩÊòØÂºÄÊ∫ê‰∫ßÂìÅÔºåLVS+KeepalivedË¥üË¥£ÂÅöNginxÁöÑË¥üËΩΩÂùáË°°ÔºåËÄåNginxË¥üË¥£ÂàÜÂèëÂà∞ÂÆûÈôÖÁöÑËØ∑Ê±ÇÂà∞HttpÂíåTcpÂçèËÆÆÁöÑÂ∫îÁî®‰∏ä„ÄÇ ÂÖ≥‰∫éLVSÁöÑÊ®°ÂºèÈÄâÊã©ÔºåÂ¶ÇÊûúÂú®ÂêåÁΩëÊÆµÂÜÖÁöÑËØù‰ºòÂÖà‰ΩøÁî®DRÊ®°ÂºèËøõË°åL2ËΩ¨ÂèëÔºåÊÄßËÉΩÊúÄÂ•Ω„ÄÇÂê¶Âàô‰ΩøÁî®TUNÊ®°ÂºèËøõË°åL3ÂàÜÂèë„ÄÇ‰∏éÊ≠§ÂêåÊó∂ÔºåÂú®L4„ÄÅL7ÁöÑÂàÜÂèë‰∏ä‰ΩøÁî®NginxÊù•ÂÅöÔºåÂèØ‰ª•ÂèëÊå•ÂÖ∂ÁÅµÊ¥ªÊòìÊâ©Â±ïÁöÑÁâπÁÇπ‰ª•ÂèäÂÖ∂ÂÆÉÁöÑ‰∏Ä‰∫õÈ¢ùÂ§ñÁâπÊÄßÂ¶ÇÁºìÂ≠òÁ≠â„ÄÇ]]></content>
      <categories>
        <category>ÂàÜÂ∏ÉÂºè</category>
      </categories>
      <tags>
        <tag>ÂàÜÂ∏ÉÂºè</tag>
        <tag>È´òÂèØÁî®</tag>
        <tag>Ë¥üËΩΩÂùáË°°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊâãÂÜôRPC-ÂçáÁ∫ßÁâà]]></title>
    <url>%2Fposts%2Fa6a74f01.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ ÊâãÂÜôRPC-ÁÆÄÊòìÁâà ÔºåÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÂæàÁÆÄÂçïÁöÑRPCË∞ÉÁî®Á§∫‰æãÔºåÂÖ∂‰∏≠ËøòÂ≠òÂú®ÂæàÂ§öÈóÆÈ¢òÂèäÂèØ‰ºòÂåñÁöÑÁÇπÔºå ËøôÊ¨°ÂÅö‰∏™ÂçáÁ∫ßÔºåÂÆåÂÖ®ÈáçÂÜô‰πãÂâçÁöÑ‰ª£Á†ÅÔºå‰ΩøÂæó‰ª£Á†ÅÈÄªËæëÊõ¥Âä†ËßÑËåÉÔºåÂêåÊó∂ÂºïÂÖ•ZookeeperËæÖÂä©ÂÆåÊàêÊúçÂä°Ê≤ªÁêÜ„ÄÇÂú®‰ª£Á†ÅÂ±ïÁ§∫ÂâçÔºåÂÖà‰ªãÁªç‰∏ãZookeeper„ÄÅÊúçÂä°Ê≤ªÁêÜÁ≠âÊ¶ÇÂøµ„ÄÇ Zookeeper ZooKeeperÔºàÁÆÄÁß∞zkÔºâÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºè„ÄÅÂºÄÊ∫êÁöÑÂ∫îÁî®ÂçèË∞ÉÊúçÂä°ÔºåÂà©Áî®ÂíåPaxosÁ±ª‰ººÁöÑZABÈÄâ‰∏æÁÆóÊ≥ïÂÆûÁé∞ÂàÜÂ∏ÉÂºè‰∏ÄËá¥ÊÄßÊúçÂä°„ÄÇÊúâÁ±ª‰ºº‰∫éUnixÊñá‰ª∂ÁõÆÂΩïÁöÑËäÇÁÇπ‰ø°ÊÅØÔºåÂêåÊó∂ÂèØ‰ª•ÈíàÂØπËäÇÁÇπÁöÑÂèòÊõ¥Ê∑ªÂä†watcherÁõëÂê¨‰ª•ËÉΩÂ§üÂèäÊó∂ÊÑüÁü•Âà∞ËäÇÁÇπ‰ø°ÊÅØÂèòÊõ¥„ÄÇÂèØÊèê‰æõÁöÑÂäüËÉΩ‰æãÂ¶ÇÊï∞ÊçÆÂèëÂ∏É/ËÆ¢ÈòÖ„ÄÅË¥üËΩΩÂùáË°°„ÄÅÂëΩÂêçÊúçÂä°„ÄÅÂàÜÂ∏ÉÂºèÂçèË∞É/ÈÄöÁü•„ÄÅÈõÜÁæ§ÁÆ°ÁêÜ„ÄÅMasterÈÄâ‰∏æ„ÄÅÂàÜÂ∏ÉÂºèÈîÅÂíåÂàÜÂ∏ÉÂºèÈòüÂàóÁ≠âÂäüËÉΩ„ÄÇÂ¶Ç‰∏ãÂõæÂ∞±ÊòØDUBBOÂ≠òÂÇ®Âú®ZooKeeperÁöÑËäÇÁÇπÊï∞ÊçÆÊÉÖÂÜµÔºö Âú®Êú¨Âú∞ÂêØÂä®ÊúçÂä°ÂêéÈÄöËøázkÂÆ¢Êà∑Á´ØËøûÊé•Âêé‰πüÂèØÈÄöËøáÂëΩ‰ª§Êü•ÁúãËäÇÁÇπ‰ø°ÊÅØÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ ZooKeeperÂåÖÂê´‰∫Ü4Áßç‰∏çÂêåÂê´‰πâÁöÑÂäüËÉΩËäÇÁÇπÔºåÂú®ÊØèÊ¨°ÂàõÂª∫ËäÇÁÇπ‰πãÂâçÈÉΩÈúÄË¶ÅÊòéÁ°ÆÂ£∞ÊòéËäÇÁÇπÁ±ªÂûã: Á±ªÂûã ÂÆö‰πâ ÊèèËø∞ PERSISTENT ÊåÅ‰πÖÂåñÁõÆÂΩïËäÇÁÇπ ÂÆ¢Êà∑Á´Ø‰∏ézookeeperÊñ≠ÂºÄËøûÊé•ÂêéÔºåËØ•ËäÇÁÇπ‰æùÊóßÂ≠òÂú® PERSISTENT_SEQUENTIAL ÊåÅ‰πÖÂåñÈ°∫Â∫èÁºñÂè∑ÁõÆÂΩïËäÇÁÇπ ÂÆ¢Êà∑Á´Ø‰∏ézookeeperÊñ≠ÂºÄËøûÊé•ÂêéÔºåËØ•ËäÇÁÇπ‰æùÊóßÂ≠òÂú®ÔºåÂè™ÊòØZookeeperÁªôËØ•ËäÇÁÇπÂêçÁß∞ËøõË°åÈ°∫Â∫èÁºñÂè∑ EPHEMERAL ‰∏¥Êó∂ÁõÆÂΩïËäÇÁÇπ ÂÆ¢Êà∑Á´Ø‰∏ézookeeperÊñ≠ÂºÄËøûÊé•ÂêéÔºåËØ•ËäÇÁÇπË¢´Âà†Èô§ EPHEMERAL_SEQUENTIAL ‰∏¥Êó∂È°∫Â∫èÁºñÂè∑ÁõÆÂΩïËäÇÁÇπ ÂÆ¢Êà∑Á´Ø‰∏ézookeeperÊñ≠ÂºÄËøûÊé•ÂêéÔºåËØ•ËäÇÁÇπË¢´Âà†Èô§ÔºåÂè™ÊòØZookeeperÁªôËØ•ËäÇÁÇπÂêçÁß∞ËøõË°åÈ°∫Â∫èÁºñÂè∑ ZooKeeper‰ΩøÁî®‰πãÂâçÈúÄË¶ÅÂÖàËøõË°åÂÆâË£ÖÔºåÂêéÂºÄÂêØÊúçÂä°Á´ØÁöÑÊúçÂä°Ôºå Êàë‰ª¨ÁöÑÊúçÂä°‰Ωú‰∏∫ÂÆ¢Êà∑Á´ØËøûÊé•ZooKeeper‰ª•‰æø‰∫éÂêéÁª≠ÁöÑÊìç‰Ωú„ÄÇÂÖ∑‰ΩìÂèØÂèÇËÄÉÂÆòÁΩëÊñáÊ°£Zookeeper3.5.5 ÂÆòÊñπÊñáÊ°£ÔºåÂú®ÂÆûÈôÖÁöÑjavaÈ°πÁõÆÂºÄÂèë‰∏≠‰πüÊòØÂèØ‰ª•ÈÄöËøámavenÂºïÂÖ•ZkClientÊàñËÄÖCuratorÂºÄÊ∫êÁöÑÂÆ¢Êà∑Á´ØÔºåÂú®Êú¨ÊñáÂ≠¶‰π†Á¨îËÆ∞‰∏≠ÊòØ‰ΩøÁî®ÁöÑCuratorÔºåÂõ†‰∏∫ÂÖ∂Â∑≤ÁªèÂ∞ÅË£Ö‰∫ÜÂéüÂßãÁöÑËäÇÁÇπÊ≥®ÂÜå„ÄÅÊï∞ÊçÆËé∑Âèñ„ÄÅÊ∑ªÂä†watcherÁ≠âÂäüËÉΩ„ÄÇÂÖ∑‰ΩìmavenÂºïÂÖ•ÁöÑÁâàÊú¨Â¶Ç‰∏ãÔºö 12345678910&lt;dependency&gt; &lt;groupId&gt;org.apache.curator&lt;/groupId&gt; &lt;artifactId&gt;curator-framework&lt;/artifactId&gt; &lt;version&gt;4.2.0&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.curator&lt;/groupId&gt; &lt;artifactId&gt;curator-recipes&lt;/artifactId&gt; &lt;version&gt;4.2.0&lt;/version&gt;&lt;/dependency&gt; ÊúçÂä°Ê≤ªÁêÜ ÊúçÂä°Ê≤ªÁêÜ‰πüÂ∞±ÊòØÈíàÂØπÊúçÂä°ËøõË°åÁÆ°ÁêÜÁöÑÊé™ÊñΩÔºå‰æãÂ¶Ç ÊúçÂä°ÂèëÁé∞„ÄÅ ÊúçÂä°Êö¥Èú≤„ÄÅ Ë¥üËΩΩÂùáË°°„ÄÅ Âø´ÈÄü‰∏ä‰∏ãÁ∫øÁ≠âÈÉΩÊòØÊúçÂä°Ê≤ªÁêÜÁöÑÂÖ∑‰Ωì‰ΩìÁé∞„ÄÇ ÊúçÂä°ÂèëÁé∞Ôºö‰ªéÊúçÂä°ÁÆ°ÁêÜ‰∏≠ÂøÉËé∑ÂèñÂà∞ÈúÄË¶ÅÁöÑÊúçÂä°Áõ∏ÂÖ≥‰ø°ÊÅØÔºå‰æãÂ¶ÇÂèØ‰ª•‰ªézk‰∏≠Ëé∑ÂèñÁõ∏ÂÖ≥ÊúçÂä°ÁöÑÊú∫Âô®‰ø°ÊÅØÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ÂíåÂÖ∑‰ΩìÊú∫Âô®Áõ¥ËøûÂÆåÊàêÁõ∏ÂÖ≥ÂäüËÉΩ„ÄÇ ÊúçÂä°Êö¥Èú≤ÔºöÊúçÂä°Êèê‰æõÊñπÂèØ‰ª•Êèê‰æõ‰ªÄ‰πàÊ†∑Â≠êÁöÑÂäüËÉΩÔºåÁªèËøáÊúçÂä°Êö¥Èú≤Êö¥Èú≤Âá∫ÂéªÔºåÂÖ∂‰ªñ‰ΩøÁî®ÊñπÂ∞±ÂèØ‰ª•ÈÄöËøáÊúçÂä°ÂèëÁé∞ÂèëÁé∞ÂÖ∑‰ΩìÁöÑÊúçÂä°Êèê‰æõÊñπ‰ø°ÊÅØ„ÄÇ Ë¥üËΩΩÂùáË°°Ôºö‰∏ÄËà¨ÈíàÂØπÁöÑÊòØÊúçÂä°Êèê‰æõÊñπÔºåÈÅøÂÖçÂ§ßÈáèËØ∑Ê±ÇÂêåÊó∂ÊâìÂà∞‰∏ÄÂè∞Êú∫Âô®‰∏äÔºåÈááÁî®ÈöèÊú∫„ÄÅËΩÆËØ¢Á≠âÊé™ÊñΩËÆ©ËØ∑Ê±ÇÂùáÂàÜÂà∞ÂêÑ‰∏™Êú∫Âô®‰∏äÔºåÊèê‰æõÊúçÂä°ÊïàÁéáÔºå ÈôêÊµÅÔºå ÁÅ∞Â∫¶Á≠â‰πüÈÉΩÊòØÁ±ª‰ººÁöÑÊìç‰ΩúÔºåÈÄöËøáÂä®ÊÄÅË∑ØÁî±„ÄÅËΩØË¥üËΩΩÁöÑÂΩ¢ÂºèÂ§ÑÁêÜÂàÜÂèëËØ∑Ê±Ç„ÄÇ Âø´ÈÄü‰∏äÁ∫ø‰∏ãÔºö‰ª•ÂæÄÈúÄË¶Å‰∏ä‰∏ãÁ∫øÂèØËÉΩÈúÄË¶ÅÊùÄÊéâÊú∫Âô®‰∏äÁöÑËøõÁ®ãÔºåÁé∞Âú®Âè™ÈúÄË¶ÅËÆ©ËØ•ÊúçÂä°ÂÅúÊ≠¢Êö¥Èú≤Âç≥ÂèØÔºåÂÆûÁé∞ÊúçÂä°ÁöÑÁÅµÊ¥ª‰∏ä‰∏ãÁ∫ø„ÄÇ Êï∞ÊçÆÂ§ÑÁêÜÊµÅÁ®ã ÊúçÂä°Á´ØÔºöÊúçÂä°ÁöÑÊèê‰æõÊñπÔºåÊé•ÂèóÁΩëÁªú‰º†ËæìÁöÑËØ∑Ê±ÇÊï∞ÊçÆ„ÄÅÈÄöËøáÁΩëÁªúÊääÂ∫îÁ≠îÊï∞ÊçÆÂèëÈÄÅÁªôÂÆ¢Êà∑Á´Ø; ÂÆ¢Êà∑Á´ØÔºöÊúçÂä°ÁöÑË∞ÉÁî®ÊñπÔºå‰ΩøÁî®Êú¨Âú∞‰ª£ÁêÜÔºåÈÄöËøáÁΩëÁªúÊääËØ∑Ê±ÇÊï∞ÊçÆÂèëÈÄÅÂá∫ÂéªÔºåÊé•ÂèóÊúçÂä°Á´ØËøîÂõûÁöÑÂ∫îÁ≠îÊï∞ÊçÆ. ÊâÄÊúâÁöÑÊï∞ÊçÆ‰º†ËæìÈÉΩÊòØÊåâÁÖß‰∏äÈù¢ÂõæÁâáËØ¥ÁöÑÊµÅÁ®ãÊù•ÁöÑÔºåÂ¶ÇÊûúÈúÄË¶ÅÊ∑ªÂä†Ëá™ÂÆö‰πâÁöÑÂ∫èÂàóÂåñÂ∑•ÂÖ∑ÔºåÂàôÈúÄË¶ÅÂú®ÊääÊï∞ÊçÆÊèê‰∫§Âà∞socketÁöÑËæìÂá∫ÊµÅÁºìÂÜ≤Âå∫‰πãÂâçÊåâÁÖßÂ∫èÂàóÂåñÂ∑•ÂÖ∑ÂÆåÊàêÂ∫èÂàóÂåñÊìç‰ΩúÔºåÂèçÂ∫èÂàóÂåñÂàôËøõË°åÂèçÂêëÊìç‰ΩúÂç≥ÂèØ„ÄÇ RPC V2ÁâàÊú¨ Êñá‰ª∂Â§πÁõÆÂΩïÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö balanceÊñá‰ª∂Â§πÔºöË¥üËΩΩÂùáË°°ÊúâÂÖ≥Ôºõ configÊñá‰ª∂Â§πÔºöÁΩëÁªúÂ•óÊé•Â≠ó‰º†ËæìÁöÑÊï∞ÊçÆÊ®°Âûã‰ª•ÂèäÊúçÂä°Êö¥Èú≤„ÄÅÊúçÂä°ÂèëÁé∞ÁöÑÊï∞ÊçÆÊ®°ÂûãÔºõ coreÊñá‰ª∂Â§πÔºöÊ†∏ÂøÉÊñá‰ª∂Â§πÔºåÂåÖÂê´‰∫ÜÊúçÂä°Á´ØÂíåÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÂ§ÑÁêÜ„ÄÅ‰ª£ÁêÜÁîüÊàêÁ≠âÔºõ demoÊñá‰ª∂Â§πÔºöÊµãËØï‰ΩøÁî®Ôºõ domainÊñá‰ª∂Â§πÔºöÊ®°Âûã„ÄÅÊûö‰∏æÂ∏∏ÈáèÔºõ io.protocolÊñá‰ª∂Â§πÔºöÁõÆÂâçÊòØÂè™ÊúâÂÖ∑‰ΩìÁöÑËØ∑Ê±ÇÂØπË±°ÂíåÁΩëÁªúioÁöÑÂ∞ÅË£ÖÔºõ registerÊñá‰ª∂Â§πÔºöÊúçÂä°Ê≥®ÂÜå‰ΩøÁî®ÔºåÂÆûÁé∞‰∫Ü‰ΩøÁî®zkËøõË°åÊúçÂä°Ê≥®ÂÜåÂíåÊúçÂä°ÂèëÁé∞ÁöÑÊìç‰ΩúÔºõ serializeÊñá‰ª∂Â§πÔºöÂ∫èÂàóÂåñ„ÄÅÂèçÂ∫èÂàóÂåñÔºåÂÆûÁé∞‰∫ÜJavaÂíåHessian‰∏§Áßç„ÄÇ ÊúçÂä°Ê≥®ÂÜå&amp;ÊúçÂä°ÂèëÁé∞ ServiceRegisterÔºö 123456789101112131415161718192021222324252627282930package com.springboot.whb.study.rpc.rpc_v2.register;import com.springboot.whb.study.rpc.rpc_v2.config.BasicConfig;import com.springboot.whb.study.rpc.rpc_v2.core.RpcRequest;import com.springboot.whb.study.rpc.rpc_v2.domain.ServiceType;import java.net.InetSocketAddress;/** * @author: whb * @description: ÊúçÂä°Ê≥®ÂÜå */public interface ServiceRegister &#123; /** * ÊúçÂä°Ê≥®ÂÜå * * @param config */ void register(BasicConfig config); /** * ÊúçÂä°ÂèëÁé∞Ôºå‰ªéÊ≥®ÂÜå‰∏≠ÂøÉËé∑ÂèñÂèØÁî®ÁöÑÊúçÂä°Êèê‰æõÊñπ‰ø°ÊÅØ * * @param request * @param nodeType * @return */ InetSocketAddress discovery(RpcRequest request, ServiceType nodeType);&#125; ZkServiceRegister ÈªòËÆ§‰ΩøÁî®‰∫ÜCuratorFrameworkÂÆ¢Êà∑Á´ØÂÆåÊàêzkÊï∞ÊçÆÁöÑÊìç‰Ωú. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149package com.springboot.whb.study.rpc.rpc_v2.register;import com.springboot.whb.study.rpc.rpc_v2.balance.DefaultLoadBalance;import com.springboot.whb.study.rpc.rpc_v2.balance.LoadBalance;import com.springboot.whb.study.rpc.rpc_v2.config.BasicConfig;import com.springboot.whb.study.rpc.rpc_v2.core.RpcRequest;import com.springboot.whb.study.rpc.rpc_v2.domain.ServiceType;import lombok.extern.slf4j.Slf4j;import org.apache.curator.RetryPolicy;import org.apache.curator.framework.CuratorFramework;import org.apache.curator.framework.CuratorFrameworkFactory;import org.apache.curator.retry.ExponentialBackoffRetry;import org.apache.zookeeper.CreateMode;import java.net.InetSocketAddress;import java.util.List;/** * @author: whb * @description: ZookeeperÊúçÂä°Ê≥®ÂÜåÂÆûÁé∞Á±ª */@Slf4jpublic class ZkServiceRegister implements ServiceRegister &#123; private CuratorFramework client; private static final String ROOT_PATH = "whb/demo-rpc"; private LoadBalance loadBalance = new DefaultLoadBalance(); public ZkServiceRegister() &#123; //ÈáçËØïÁ≠ñÁï• RetryPolicy policy = new ExponentialBackoffRetry(1000, 3); this.client = CuratorFrameworkFactory .builder() .connectString("127.0.0.1:2181") .sessionTimeoutMs(50000) .retryPolicy(policy) .namespace(ROOT_PATH) .build(); // ‰∏öÂä°ÁöÑÊ†πË∑ØÂæÑÊòØ /whb/demo-rpc ,ÂÖ∂‰ªñÁöÑÈÉΩ‰ºöÈªòËÆ§ÊåÇËΩΩÂú®ËøôÈáå this.client.start(); System.out.println("zkÂêØÂä®Ê≠£Â∏∏"); &#125; /** * ÊúçÂä°Ê≥®ÂÜå * * @param config */ @Override public void register(BasicConfig config) &#123; String interfacePath = "/" + config.getInterfaceName(); try &#123; if (this.client.checkExists().forPath(interfacePath) == null) &#123; // ÂàõÂª∫ ÊúçÂä°ÁöÑÊ∞∏‰πÖËäÇÁÇπ this.client.create() .creatingParentsIfNeeded() .withMode(CreateMode.PERSISTENT) .forPath(interfacePath); &#125; config.getMethods().forEach(method -&gt; &#123; String methodPath = null; try &#123; ServiceType serviceType = config.getType(); if (serviceType == ServiceType.PROVIDER) &#123; // ÊúçÂä°Êèê‰æõÊñπÔºåÈúÄË¶ÅÊö¥Èú≤Ëá™Ë∫´ÁöÑip„ÄÅport‰ø°ÊÅØÔºåËÄåÊ∂àË¥πÁ´ØÂàô‰∏çÈúÄË¶Å String address = getServiceAddress(config); methodPath = String.format("%s/%s/%s/%s", interfacePath, serviceType.getType(), method.getMethodName(), address); &#125; else &#123; methodPath = String.format("%s/%s/%s", interfacePath, serviceType.getType(), method.getMethodName()); &#125; log.info("zk path: [" + ROOT_PATH + methodPath + "]"); // ÂàõÂª∫‰∏¥Êó∂ËäÇÁÇπÔºåËäÇÁÇπÂåÖÂê´‰∫ÜÊúçÂä°Êèê‰æõÊÆµÁöÑ‰ø°ÊÅØ this.client.create() .creatingParentsIfNeeded() .withMode(CreateMode.EPHEMERAL) .forPath(methodPath, "0".getBytes()); &#125; catch (Exception e) &#123; log.error("ÂàõÂª∫‰∏¥Êó∂ËäÇÁÇπ[" + methodPath + "]Â§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125;); &#125; catch (Exception e) &#123; log.error("ÂàõÂª∫ÊúçÂä°ËäÇÁÇπÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; /** * ÊúçÂä°ÂèëÁé∞ * * @param request * @param nodeType * @return */ @Override public InetSocketAddress discovery(RpcRequest request, ServiceType nodeType) &#123; String path = String.format("/%s/%s/%s", request.getClassName(), nodeType.getType(), request.getMethodName()); try &#123; List&lt;String&gt; addressList = this.client.getChildren().forPath(path); // ÈááÁî®Ë¥üËΩΩÂùáË°°ÁöÑÊñπÂºèËé∑ÂèñÊúçÂä°Êèê‰æõÊñπ‰ø°ÊÅØ,‰∏çËøáÂπ∂Ê≤°ÊúâÊ∑ªÂä†watcherÁõëÂê¨Ê®°Âºè String address = loadBalance.balance(addressList); if (address == null) &#123; return null; &#125; return parseAddress(address); &#125; catch (Exception e) &#123; log.error("ÊúçÂä°ÂèëÁé∞Êé•Âè£ÂºÇÂ∏∏Ôºåerror:&#123;&#125;", e); &#125; return null; &#125; /** * Ëé∑ÂèñÊúçÂä°Âú∞ÂùÄ * * @param config * @return */ private String getServiceAddress(BasicConfig config) &#123; String hostInfo = new StringBuilder() .append(config.getHost()) .append(":") .append(config.getPort()) .toString(); return hostInfo; &#125; /** * Â∞ÅË£ÖÁ´ØÂè£ * * @param address * @return */ private InetSocketAddress parseAddress(String address) &#123; String[] result = address.split(":"); return new InetSocketAddress(result[0], Integer.valueOf(result[1])); &#125; /** * ËÆæÁΩÆË¥üËΩΩÂùáË°°Á≠ñÁï• * * @param loadBalance */ public void setLoadBalance(LoadBalance loadBalance) &#123; this.loadBalance = loadBalance; &#125;&#125; Ë¥üËΩΩÂùáË°° LoadBalance 123456789101112131415161718package com.springboot.whb.study.rpc.rpc_v2.balance;import java.util.List;/** * @author: whb * @description: Ë¥üËΩΩÂùáË°°Êé•Âè£ÂÆö‰πâ */public interface LoadBalance &#123; /** * Ë¥üËΩΩÂùáË°° * * @param addressList * @return */ String balance(List&lt;String&gt; addressList);&#125; AbstractLoadBalance 1234567891011121314151617181920212223242526272829package com.springboot.whb.study.rpc.rpc_v2.balance;import java.util.List;/** * @author: whb * @description: ÊäΩË±°Ë¥üËΩΩÂùáË°° */public abstract class AbstractLoadBalance implements LoadBalance &#123; @Override public String balance(List&lt;String&gt; addressList) &#123; if (addressList == null || addressList.isEmpty()) &#123; return null; &#125; if (addressList.size() == 1) &#123; return addressList.get(0); &#125; return doLoad(addressList); &#125; /** * ÊäΩË±°Êé•Âè£ÔºåËÆ©Â≠êÁ±ªÂéªÂÆûÁé∞ * * @param addressList * @return */ abstract String doLoad(List&lt;String&gt; addressList);&#125; DefaultLoadBalance 123456789101112131415161718package com.springboot.whb.study.rpc.rpc_v2.balance;import java.util.List;import java.util.Random;/** * @author: whb * @description: ÈªòËÆ§Ë¥üËΩΩÂùáË°°--ÈöèÊú∫Ë¥üËΩΩÂùáË°° */public class DefaultLoadBalance extends AbstractLoadBalance &#123; @Override String doLoad(List&lt;String&gt; addressList) &#123; //ÈöèÊú∫ Random random = new Random(); return addressList.get(random.nextInt(addressList.size())); &#125;&#125; Ê∂àÊÅØÂçèËÆÆ MessageProtocol 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package com.springboot.whb.study.rpc.rpc_v2.io.protocol;import com.springboot.whb.study.rpc.rpc_v2.core.RpcRequest;import com.springboot.whb.study.rpc.rpc_v2.core.RpcResponse;import java.io.InputStream;import java.io.OutputStream;/** * @author: whb * @description: ËØ∑Ê±Ç„ÄÅÂ∫îÁ≠î Ëß£ÊûêÂíåÂèçËß£ÊûêÔºåÂåÖÂê´‰∫ÜÂ∫èÂàóÂåñ‰ª•ÂèäÂèçÂ∫èÂàóÂåñÊìç‰Ωú */public interface MessageProtocol &#123; /** * ÊúçÂä°Á´ØËß£Êûê‰ªéÁΩëÁªú‰º†ËæìÁöÑÊï∞ÊçÆÔºåËΩ¨ÂèòÊàêrequestÂØπË±° * * @param inputStream * @return */ RpcRequest serviceToRequest(InputStream inputStream); /** * ÊúçÂä°Á´ØÊääËÆ°ÁÆóÁöÑÁªìÊûúÂåÖË£ÖÂ•ΩÔºåÈÄöËøáËæìÂá∫ÊµÅËøîÂõûÁªôÂÆ¢Êà∑Á´Ø * * @param response * @param outputStream * @param &lt;T&gt; */ &lt;T&gt; void serviceGetResponse(RpcResponse&lt;T&gt; response, OutputStream outputStream); /** * ÂÆ¢Êà∑Á´ØÊääËØ∑Ê±ÇÊãºÊé•Â•ΩÔºåÈÄöËøáËæìÂá∫ÊµÅÂèëÈÄÅÂà∞ÊúçÂä°Á´Ø * * @param request * @param outputStream */ void clientToRequest(RpcRequest request, OutputStream outputStream); /** * ÂÆ¢Êà∑Á´ØÊé•Êî∂Âà∞ÊúçÂä°Á´ØÂìçÂ∫îÁöÑÁªìÊûúÔºåËΩ¨ÂèòÊàêresponseÂØπË±° * * @param inputStream */ &lt;T&gt; RpcResponse&lt;T&gt; clientGetResponse(InputStream inputStream);&#125; DefaultMessageProtocol 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188package com.springboot.whb.study.rpc.rpc_v2.io.protocol;import com.springboot.whb.study.rpc.rpc_v2.core.RpcRequest;import com.springboot.whb.study.rpc.rpc_v2.core.RpcResponse;import com.springboot.whb.study.rpc.rpc_v2.serialize.HessianSerialize;import com.springboot.whb.study.rpc.rpc_v2.serialize.SerializeProtocol;import lombok.extern.slf4j.Slf4j;import java.io.ByteArrayOutputStream;import java.io.IOException;import java.io.InputStream;import java.io.OutputStream;import java.util.Arrays;/** * @author: whb * @description: Â•óÊé•Â≠óÁöÑioÊµÅÂíåÊúçÂä°Á´Ø„ÄÅÂÆ¢Êà∑Á´ØÁöÑÊï∞ÊçÆ‰º†Ëæì */@Slf4jpublic class DefaultMessageProtocol implements MessageProtocol &#123; /** * Â∫èÂàóÂåñÂçèËÆÆ */ private SerializeProtocol serializeProtocol; public DefaultMessageProtocol() &#123; this.serializeProtocol = new HessianSerialize(); //this.serializeProtocol = new JavaInnerSerialize(); &#125; public void setSerializeProtocol(SerializeProtocol serializeProtocol) &#123; // ÂèØÊõøÊç¢Â∫èÂàóÂåñÂçèËÆÆ this.serializeProtocol = serializeProtocol; &#125; /** * ÊúçÂä°Á´ØËß£Êûê‰ªéÁΩëÁªú‰º†ËæìÁöÑÊï∞ÊçÆÔºåËΩ¨ÂèòÊàêrequestÂØπË±° * * @param inputStream * @return */ @Override public RpcRequest serviceToRequest(InputStream inputStream) &#123; try &#123; // 2„ÄÅbytes -&gt; request ÂèçÂ∫èÂàóÂåñ byte[] bytes = readBytes(inputStream); System.out.println("[2]ÊúçÂä°Á´ØÂèçÂ∫èÂàóÂåñÂá∫obj:[" + new String(bytes) + "], length:" + bytes.length); //System.out.println("[2]ÊúçÂä°Á´ØÂèçÂ∫èÂàóÂåñÂá∫obj length:" + bytes.length); RpcRequest request = serializeProtocol.deserialize(RpcRequest.class, bytes); return request; &#125; catch (Exception e) &#123; log.error("[2]ÊúçÂä°Á´ØÂèçÂ∫èÂàóÂåñ‰ªéÁΩëÁªú‰º†ËæìÁöÑÊï∞ÊçÆËΩ¨ÂèòÊàêrequestÂØπË±°Â§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; return null; &#125; /** * ÊúçÂä°Á´ØÊääËÆ°ÁÆóÁöÑÁªìÊûúÂåÖË£ÖÂ•ΩÔºåÈÄöËøáËæìÂá∫ÊµÅËøîÂõûÁªôÂÆ¢Êà∑Á´Ø * * @param response * @param outputStream * @param &lt;T&gt; */ @Override public &lt;T&gt; void serviceGetResponse(RpcResponse&lt;T&gt; response, OutputStream outputStream) &#123; try &#123; // 3„ÄÅÊääresponse Â∫èÂàóÂåñÊàêbytes ‰º†ÁªôÂÆ¢Êà∑Á´Ø byte[] bytes = serializeProtocol.serialize(RpcResponse.class, response); System.out.println("[3]ÊúçÂä°Á´ØÂ∫èÂàóÂåñÂá∫bytes:[" + new String(bytes) + "], length:" + bytes.length); //System.out.println("[3]ÊúçÂä°Á´ØÂ∫èÂàóÂåñÂá∫bytes length:" + bytes.length); outputStream.write(bytes); &#125; catch (Exception e) &#123; log.error("[3]ÊúçÂä°Á´ØÂ∫èÂàóÂåñËÆ°ÁÆóÁöÑÁªìÊûúÂá∫ËæìÁªôÂÆ¢Êà∑Á´ØÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; /** * ÂÆ¢Êà∑Á´ØÊääËØ∑Ê±ÇÊãºÊé•Â•ΩÔºåÈÄöËøáËæìÂá∫ÊµÅÂèëÈÄÅÂà∞ÊúçÂä°Á´Ø * * @param request * @param outputStream */ @Override public void clientToRequest(RpcRequest request, OutputStream outputStream) &#123; try &#123; // 1„ÄÅÂÖàÊääËøô‰∏™request -&gt; bytes Â∫èÂàóÂåñÊéâ byte[] bytes = serializeProtocol.serialize(RpcRequest.class, request); System.out.println("[1]ÂÆ¢Êà∑Á´ØÂ∫èÂàóÂåñÂá∫bytes:[" + new String(bytes) + "], length:" + bytes.length); //System.out.println("[1]ÂÆ¢Êà∑Á´ØÂ∫èÂàóÂåñÂá∫bytes length:" + bytes.length); outputStream.write(bytes); &#125; catch (IOException e) &#123; log.error("[1]ÂÆ¢Êà∑Á´ØÂ∫èÂàóÂåñËØ∑Ê±ÇÂèÇÊï∞Â§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; /** * ÂÆ¢Êà∑Á´ØÊé•Êî∂Âà∞ÊúçÂä°Á´ØÂìçÂ∫îÁöÑÁªìÊûúÔºåËΩ¨ÂèòÊàêresponseÂØπË±° * * @param inputStream */ @Override public &lt;T&gt; RpcResponse&lt;T&gt; clientGetResponse(InputStream inputStream) &#123; try &#123; // 4„ÄÅbytes ÂèçÂ∫èÂàóÂåñÊàêresponse byte[] bytes = readBytes(inputStream); System.out.println("[4]ÂÆ¢Êà∑Á´ØÂèçÂ∫èÂàóÂåñÂá∫bytes:[" + new String(bytes) + "], length:" + bytes.length); //System.out.println("[4]ÂÆ¢Êà∑Á´ØÂèçÂ∫èÂàóÂåñÂá∫bytes length:" + bytes.length); RpcResponse response = serializeProtocol.deserialize(RpcResponse.class, bytes); return response; &#125; catch (Exception e) &#123; log.error("[4]ÂÆ¢Êà∑Á´ØÂèçÂ∫èÂàóÂåñËÆ°ÁÆóÁªìÊûúÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; return null; &#125; /** * ÊµÅËΩ¨‰∫åËøõÂà∂Êï∞ÁªÑ * * @param inputStream * @return * @throws IOException */ private byte[] readBytes(InputStream inputStream) throws IOException &#123; if (inputStream == null) &#123; throw new RuntimeException("ËæìÂÖ•ÊµÅ‰∏∫Á©∫"); &#125; return inputStreamToByteArr2(inputStream); &#125; /** * ÊµÅËΩ¨‰∫åËøõÂà∂Êï∞ÁªÑÊñπÊ≥ï1 * * @param inputStream * @return * @throws IOException */ private byte[] inputStreamToByteArr1(InputStream inputStream) throws IOException &#123; // Êúâ‰∏™ÂâçÊèêÊòØÊï∞ÊçÆÊúÄÂ§ßÊòØ1024ÔºåÂπ∂Ê≤°ÊúâËø≠‰ª£ËØªÂèñÊï∞ÊçÆ byte[] bytes = new byte[1024]; int count = inputStream.read(bytes, 0, 1024); return Arrays.copyOf(bytes, count); &#125; /** * ÊµÅËΩ¨‰∫åËøõÂà∂Êï∞ÁªÑÊñπÊ≥ï2 * * @param inputStream * @return * @throws IOException */ private byte[] inputStreamToByteArr2(InputStream inputStream) throws IOException &#123; ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); int bufesize = 1024; while (true) &#123; byte[] data = new byte[bufesize]; int count = inputStream.read(data, 0, bufesize); byteArrayOutputStream.write(data, 0, count); if (count &lt; bufesize) &#123; break; &#125; &#125; return byteArrayOutputStream.toByteArray(); &#125; /** * ÊµÅËΩ¨‰∫åËøõÂà∂Êï∞ÁªÑÊñπÊ≥ï3ÔºåË∞ÉÁî®ËØ•ÊñπÊ≥ï‰πãÂêé‰ºöÈòªÂ°ûÂú®readÔºåÂèØÈÄöËøájstackÊü•ÁúãÁõ∏ÂÖ≥‰ø°ÊÅØ * * @param inputStream * @return * @throws IOException */ private byte[] inputStreamToByteArr3(InputStream inputStream) throws IOException &#123; ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); int bufesize = 1024; byte[] buff = new byte[bufesize]; int rc = 0; while ((rc = inputStream.read(buff, 0, bufesize)) &gt; 0) &#123; byteArrayOutputStream.write(buff, 0, rc); buff = new byte[bufesize]; &#125; byte[] bytes = byteArrayOutputStream.toByteArray(); return bytes; &#125;&#125; Êï∞ÊçÆ‰º†ËæìÊ®°Âûã ArgumentConfig 12345678910111213141516171819202122232425package com.springboot.whb.study.rpc.rpc_v2.config;import lombok.Data;import java.io.Serializable;/** * @author: whb * @description: ÂèÇÊï∞ÈÖçÁΩÆ */@Datapublic class ArgumentConfig implements Serializable &#123; private static final long serialVersionUID = 1L; /** * Á¨¨Âá†‰∏™ÂèÇÊï∞ */ private int index; /** * ÂèÇÊï∞Á±ªÂûã */ private String type;&#125; BasicConfig 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package com.springboot.whb.study.rpc.rpc_v2.config;import com.springboot.whb.study.rpc.rpc_v2.domain.ServiceType;import lombok.Data;import java.util.List;/** * @author: whb * @description: Âü∫Á°ÄÈÖçÁΩÆ */@Datapublic class BasicConfig &#123; /** * Âú∞ÂùÄ */ private String host; /** * Á´ØÂè£Âè∑ */ private int port; /** * ÊúçÂä°Êèê‰æõÊñπËøòÊòØÊúçÂä°Ê∂àË¥πÊñπ */ private ServiceType type; /** * Êé•Âè£Âêç */ private String interfaceName; /** * Êé•Âè£Á±ª */ private Class&lt;?&gt; interfaceClass; /** * ÊñπÊ≥ïÈõÜÂêà */ private List&lt;MethodConfig&gt; methods; /** * ÂàÜÁªÑ */ private String group; /** * ÈªòËÆ§ÁâàÊú¨Âè∑ÊòØdefault */ private String version = "default";&#125; ClientConfig 1234567891011121314151617181920212223242526272829303132333435363738394041424344package com.springboot.whb.study.rpc.rpc_v2.config;import com.springboot.whb.study.rpc.rpc_v2.core.ProxyInstance;import com.springboot.whb.study.rpc.rpc_v2.domain.ServiceType;import lombok.Data;import java.io.Serializable;import java.lang.reflect.Proxy;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØÈÖçÁΩÆ */@Datapublic class ClientConfig&lt;T&gt; extends BasicConfig implements Serializable &#123; private static final long serialVersionUID = 1L; private T proxy; /** * ÂèçÂ∞ÑÂåÖË£ÖÊàêÂÆ¢Êà∑Á´ØÂèÇÊï∞ÈÖçÁΩÆÂØπË±° * * @param interfaceClass * @param invocationHandler * @param &lt;T&gt; * @return */ public static &lt;T&gt; ClientConfig&lt;T&gt; convert(Class&lt;T&gt; interfaceClass, ProxyInstance invocationHandler) &#123; ClientConfig&lt;T&gt; config = new ClientConfig&lt;&gt;(); config.setVersion("default"); config.setInterfaceClass(interfaceClass); config.setInterfaceName(interfaceClass.getName()); config.setMethods(MethodConfig.convert(interfaceClass.getMethods())); config.setType(ServiceType.CONSUMER); Object proxy = Proxy.newProxyInstance(ClientConfig.class.getClassLoader(), new Class&lt;?&gt;[]&#123;interfaceClass&#125;, invocationHandler); config.setProxy((T) proxy); return config; &#125;&#125; MethodConfig 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687package com.springboot.whb.study.rpc.rpc_v2.config;import lombok.Data;import java.io.Serializable;import java.lang.reflect.Method;import java.lang.reflect.Parameter;import java.util.ArrayList;import java.util.List;/** * @author: whb * @description: ÊñπÊ≥ïÈÖçÁΩÆ */@Datapublic class MethodConfig implements Serializable &#123; private static final long serialVersionUID = 1L; /** * ÊñπÊ≥ïÂêç */ private String methodName; /** * ÂèÇÊï∞ */ private List&lt;ArgumentConfig&gt; argumentConfigs; /** * ÊòØÂê¶ÈúÄË¶ÅËøîÂõû */ private Boolean isReturn; /** * ËøîÂõûÂÄºÁ±ªÂûã */ private Class&lt;?&gt; returnType; /** * ÊñπÊ≥ïÊï∞ÁªÑËΩ¨ÊñπÊ≥ïÈÖçÁΩÆÈõÜÂêà * * @param methods * @return */ public static List&lt;MethodConfig&gt; convert(Method[] methods) &#123; List&lt;MethodConfig&gt; methodConfigList = new ArrayList&lt;&gt;(methods.length); MethodConfig methodConfig = null; for (Method method : methods) &#123; methodConfig = new MethodConfig(); methodConfig.setMethodName(method.getName()); Class&lt;?&gt; returnType = method.getReturnType(); String returnName = returnType.getName(); if ("void".equals(returnName)) &#123; methodConfig.setIsReturn(false); &#125; else &#123; methodConfig.setIsReturn(true); &#125; methodConfig.setReturnType(returnType); methodConfig.setArgumentConfigs(convert(method.getParameters())); methodConfigList.add(methodConfig); &#125; return methodConfigList; &#125; /** * ÂèÇÊï∞Êï∞ÁªÑËΩ¨ÂèÇÊï∞ÈÖçÁΩÆÈõÜÂêà * * @param parameters * @return */ private static List&lt;ArgumentConfig&gt; convert(Parameter[] parameters) &#123; List&lt;ArgumentConfig&gt; argumentConfigs = new ArrayList&lt;&gt;(parameters.length); int start = 0; ArgumentConfig argumentConfig = null; for (Parameter parameter : parameters) &#123; argumentConfig = new ArgumentConfig(); argumentConfig.setIndex(start); argumentConfig.setType(parameter.getType().getName()); argumentConfigs.add(argumentConfig); start += 1; &#125; return argumentConfigs; &#125;&#125; ServiceConfig 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package com.springboot.whb.study.rpc.rpc_v2.config;import com.alibaba.fastjson.JSON;import com.springboot.whb.study.rpc.rpc_v2.core.RpcService;import com.springboot.whb.study.rpc.rpc_v2.domain.ServiceType;import lombok.Data;import lombok.extern.slf4j.Slf4j;import java.io.Serializable;import java.net.InetAddress;import java.net.UnknownHostException;/** * @author: whb * @description: ÊúçÂä°ÊñπÈÖçÁΩÆ */@Data@Slf4jpublic class ServiceConfig&lt;T&gt; extends BasicConfig implements Serializable &#123; private static final long serialVersionUID = 1L; private T ref; /** * ÁªüËÆ°Ë∞ÉÁî®Ê¨°Êï∞‰ΩøÁî® */ private int count; @Override public String toString() &#123; return JSON.toJSONString(this); &#125; public static &lt;T&gt; ServiceConfig&lt;T&gt; convert(String interfaceName, Class&lt;T&gt; interfaceClass, T ref, RpcService rpcService) &#123; ServiceConfig&lt;T&gt; serviceConfig = new ServiceConfig&lt;&gt;(); serviceConfig.setRef(ref); serviceConfig.setInterfaceName(interfaceName); serviceConfig.setInterfaceClass(interfaceClass); serviceConfig.setCount(0); serviceConfig.setMethods(MethodConfig.convert(interfaceClass.getMethods())); serviceConfig.setPort(rpcService.getPort()); serviceConfig.setType(ServiceType.PROVIDER); try &#123; InetAddress addr = InetAddress.getLocalHost(); serviceConfig.setHost(addr.getHostAddress()); &#125; catch (UnknownHostException e) &#123; log.error("ÊúçÂä°ÊñπËé∑ÂèñÊú¨Êú∫Âú∞ÂùÄÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; return serviceConfig; &#125;&#125; Êûö‰∏æÂ∏∏Èáè ServiceType 123456789101112131415161718192021222324252627package com.springboot.whb.study.rpc.rpc_v2.domain;/** * @author: whb * @description: ÊúçÂä°Á±ªÂûãÊûö‰∏æÂ∏∏Èáè */public enum ServiceType &#123; /** * ÊúçÂä°Êèê‰æõËÄÖ */ PROVIDER("provider"), /** * ÊúçÂä°Ê∂àË¥πËÄÖ */ CONSUMER("consumer"); private String type; ServiceType(String type) &#123; this.type = type; &#125; public String getType() &#123; return type; &#125;&#125; Â∫èÂàóÂåñ„ÄÅÂèçÂ∫èÂàóÂåñ SerializeProtocol 123456789101112131415161718package com.springboot.whb.study.rpc.rpc_v2.serialize;/** * @author: whb * @description: Â∫èÂàóÂåñÂçèËÆÆÊé•Âè£ */public interface SerializeProtocol &#123; /** * Â∫èÂàóÂåñ */ &lt;T&gt; byte[] serialize(Class&lt;T&gt; clazz, T t); /** * ÂèçÂ∫èÂàóÂåñ */ &lt;T&gt; T deserialize(Class&lt;T&gt; clazz, byte[] bytes);&#125; JavaInnerSerialize 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889package com.springboot.whb.study.rpc.rpc_v2.serialize;import lombok.extern.slf4j.Slf4j;import java.io.*;/** * @author: whb * @description: JavaÂ∫èÂàóÂåñ */@Slf4jpublic class JavaInnerSerialize implements SerializeProtocol &#123; /** * Â∫èÂàóÂåñ * * @param clazz * @param t * @param &lt;T&gt; * @return */ @Override public &lt;T&gt; byte[] serialize(Class&lt;T&gt; clazz, T t) &#123; ByteArrayOutputStream outputStream = new ByteArrayOutputStream(); ObjectOutputStream objectOutputStream = null; try &#123; objectOutputStream = new ObjectOutputStream(outputStream); objectOutputStream.writeObject(t); objectOutputStream.flush(); byte[] bytes = outputStream.toByteArray(); return bytes; &#125; catch (Exception e) &#123; log.error("Java Â∫èÂàóÂåñÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; finally &#123; if (outputStream != null) &#123; try &#123; outputStream.close(); &#125; catch (IOException e) &#123; log.error("Java Â∫èÂàóÂåñÂÖ≥Èó≠‰∫åËøõÂà∂ËæìÂá∫ÊµÅÂ§±Ë¥•,error:&#123;&#125;", e); &#125; &#125; if (objectOutputStream != null) &#123; try &#123; objectOutputStream.close(); &#125; catch (IOException e) &#123; log.error("Java Â∫èÂàóÂåñÂÖ≥Èó≠ÂØπË±°ÊµÅÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; &#125; return null; &#125; /** * ÂèçÂ∫èÂàóÂåñ * * @param clazz * @param bytes * @param &lt;T&gt; * @return */ @Override public &lt;T&gt; T deserialize(Class&lt;T&gt; clazz, byte[] bytes) &#123; ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes); ObjectInputStream objectInputStream = null; try &#123; objectInputStream = new ObjectInputStream(inputStream); T obj = (T) objectInputStream.readObject(); return obj; &#125; catch (Exception e) &#123; log.error("Java ÂèçÂ∫èÂàóÂåñÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; finally &#123; if (inputStream != null) &#123; try &#123; inputStream.close(); &#125; catch (IOException e) &#123; log.error("Java ÂèçÂ∫èÂàóÂåñÂÖ≥Èó≠‰∫åËøõÂà∂ËæìÂÖ•ÊµÅÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; if (objectInputStream != null) &#123; try &#123; objectInputStream.close(); &#125; catch (IOException e) &#123; log.error("Java ÂèçÂ∫èÂàóÂåñÂÖ≥Èó≠ÂØπË±°ËæìÂÖ•ÊµÅÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; &#125; return null; &#125;&#125; HessianSerialize 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687package com.springboot.whb.study.rpc.rpc_v2.serialize;import com.alibaba.com.caucho.hessian.io.Hessian2Input;import com.alibaba.com.caucho.hessian.io.Hessian2Output;import lombok.extern.slf4j.Slf4j;import java.io.ByteArrayInputStream;import java.io.ByteArrayOutputStream;import java.io.IOException;/** * @author: whb * @description: Hessian‰∫åËøõÂà∂Â∫èÂàóÂåñ */@Slf4jpublic class HessianSerialize implements SerializeProtocol &#123; /** * Â∫èÂàóÂåñ * * @param clazz * @param t * @param &lt;T&gt; * @return */ @Override public &lt;T&gt; byte[] serialize(Class&lt;T&gt; clazz, T t) &#123; ByteArrayOutputStream outputStream = new ByteArrayOutputStream(); Hessian2Output hessian2Output = new Hessian2Output(outputStream); try &#123; //È™åËØÅËøáÔºå‰∏ÄÂÆöÈúÄË¶ÅÂú®flush‰πãÂâçÂÖ≥Èó≠Êéâhessian2OutputÔºåÂê¶ÂàôËé∑ÂèñÁöÑbytesÂ≠óÊÆµ‰ø°ÊÅØ‰∏∫Á©∫ hessian2Output.writeObject(t); &#125; catch (IOException e) &#123; throw new RuntimeException(e.getMessage()); &#125; finally &#123; try &#123; hessian2Output.close(); &#125; catch (IOException e) &#123; log.error("Hessian ‰∫åËøõÂà∂Â∫èÂàóÂåñÔºåÂÖ≥Èó≠ÊµÅÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; try &#123; outputStream.flush(); byte[] bytes = outputStream.toByteArray(); return bytes; &#125; catch (IOException e) &#123; throw new RuntimeException(e.getMessage()); &#125; finally &#123; try &#123; outputStream.close(); &#125; catch (IOException e) &#123; log.error("Hessian ‰∫åËøõÂà∂Â∫èÂàóÂåñÔºåÂÖ≥Èó≠ËæìÂá∫ÊµÅÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; &#125; /** * ÂèçÂ∫èÂàóÂåñ * * @param clazz * @param bytes * @param &lt;T&gt; * @return */ @Override public &lt;T&gt; T deserialize(Class&lt;T&gt; clazz, byte[] bytes) &#123; ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes); Hessian2Input hessian2Input = new Hessian2Input(inputStream); try &#123; T t = (T) hessian2Input.readObject(); return t; &#125; catch (IOException e) &#123; throw new RuntimeException(e.getMessage()); &#125; finally &#123; try &#123; hessian2Input.close(); &#125; catch (IOException e) &#123; log.error("Hessian ÂèçÂ∫èÂàóÂåñÔºåÊµÅÂÖ≥Èó≠Â§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; try &#123; inputStream.close(); &#125; catch (IOException e) &#123; log.error("Hessian ÂèçÂ∫èÂàóÂåñÔºåËæìÂÖ•ÊµÅÂÖ≥Èó≠Â§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; &#125;&#125; ËØ∑Ê±Ç„ÄÅÂìçÂ∫îÂØπË±° RpcRequest 1234567891011121314151617181920212223242526272829303132333435363738394041package com.springboot.whb.study.rpc.rpc_v2.core;import com.alibaba.fastjson.JSON;import lombok.Data;import java.io.Serializable;/** * @author: whb * @description: RPCËØ∑Ê±ÇÂØπË±° */@Datapublic class RpcRequest implements Serializable &#123; private static final long serialVersionUID = 1L; /** * Á±ªÂêç */ private String className; /** * ÊñπÊ≥ïÂêç */ private String methodName; /** * ÂèÇÊï∞ */ private Object[] arguments; /** * ÂèÇÊï∞Á±ªÂûã */ private Class&lt;?&gt;[] parameterTypes; @Override public String toString() &#123; return JSON.toJSONString(this); &#125;&#125; RpcResponse 123456789101112131415161718192021222324252627282930313233343536package com.springboot.whb.study.rpc.rpc_v2.core;import com.alibaba.fastjson.JSON;import lombok.Data;import java.io.Serializable;/** * @author: whb * @description: RPCÂìçÂ∫îÂØπË±° */@Datapublic class RpcResponse&lt;T&gt; implements Serializable &#123; private static final long serialVersionUID = 1L; /** * ÂìçÂ∫îÁªìÊûú */ private T result; /** * ÊòØÂê¶Âá∫Èîô */ private Boolean isError; /** * ÈîôËØØ‰ø°ÊÅØ */ private String errorMsg; @Override public String toString() &#123; return JSON.toJSONString(this); &#125;&#125; ÊúçÂä°Á´ØÂ§ÑÁêÜ ServiceConnection 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778package com.springboot.whb.study.rpc.rpc_v2.core;import lombok.Data;import lombok.extern.slf4j.Slf4j;import java.io.IOException;import java.net.ServerSocket;import java.net.Socket;/** * @author: whb * @description: ÊúçÂä°ËøûÊé• */@Slf4j@Datapublic class ServiceConnection implements Runnable &#123; /** * Á´ØÂè£Âè∑ */ private int port; /** * ÊúçÂä°ÂÖ≥Èó≠Ê†áËÆ∞‰Ωç */ private volatile boolean flag = true; /** * ÊúçÂä°Á´ØÂ•óÊé•Â≠ó */ private ServerSocket serverSocket; /** * ÊúçÂä°Â§ÑÁêÜÂô® */ private ServiceHandler serviceHandler; /** * ÂàùÂßãÂåñ * * @param port * @param serviceHandler */ public void init(int port, ServiceHandler serviceHandler) &#123; try &#123; this.port = port; this.serverSocket = new ServerSocket(this.port); &#125; catch (IOException e) &#123; throw new RuntimeException("ÂêØÂä®Â§±Ë¥•Ôºö" + e.getMessage()); &#125; this.serviceHandler = serviceHandler; log.info("ÊúçÂä°ÂêØÂä®‰∫Ü..."); &#125; @Override public void run() &#123; while (flag) &#123; try &#123; Socket socket = serverSocket.accept(); serviceHandler.handler(socket); &#125; catch (IOException e) &#123; try &#123; Thread.sleep(100); &#125; catch (InterruptedException e1) &#123; log.error("ÊúçÂä°Â§ÑÁêÜÂºÇÂ∏∏Ôºåerror:&#123;&#125;", e); &#125; &#125; &#125; &#125; /** * ÂÖ≥Èó≠ËøûÊé• */ public void destory() &#123; log.info("ÊúçÂä°Á´ØÂ•óÊé•Â≠óÂÖ≥Èó≠..."); this.flag = false; &#125;&#125; ServiceHandler 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114package com.springboot.whb.study.rpc.rpc_v2.core;import com.google.common.util.concurrent.ThreadFactoryBuilder;import com.springboot.whb.study.rpc.rpc_v2.io.protocol.MessageProtocol;import lombok.Data;import lombok.extern.slf4j.Slf4j;import java.io.IOException;import java.io.InputStream;import java.io.OutputStream;import java.net.Socket;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.ThreadFactory;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;/** * @author: whb * @description: ÊúçÂä°Á´ØÂ§ÑÁêÜÂô® */@Slf4j@Datapublic class ServiceHandler &#123; /** * Á∫øÁ®ãÊ±† */ private ThreadPoolExecutor executor = null; /** * ÊúçÂä°Êé•Âè£ */ private RpcService rpcService; /** * Ê∂àÊÅØÂçèËÆÆ */ private MessageProtocol messageProtocol; public ServiceHandler(RpcService rpcService) &#123; this.rpcService = rpcService; //ÂàõÂª∫Á∫øÁ®ãÁöÑÁ∫øÁ®ãÂ∑•ÂéÇ ThreadFactory commonThreadName = new ThreadFactoryBuilder() .setNameFormat("Parse-Task-%d") .build(); //ÊûÑÈÄ†Á∫øÁ®ãÊ±† this.executor = new ThreadPoolExecutor( 10, 10, 2, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;&gt;(200), commonThreadName, (Runnable r, ThreadPoolExecutor executor) -&gt; &#123; SocketTask socketTask = (SocketTask) r; Socket socket = socketTask.getSocket(); if (socket != null) &#123; try &#123; //Êó†Ê≥ïÂèäÊó∂Â§ÑÁêÜÂíåÂìçÂ∫îÂ∞±Âø´ÈÄüÊãíÁªùÊéâ socket.close(); log.info("reject socket:" + socketTask + ", and closed."); &#125; catch (IOException e) &#123; log.error("socketÂÖ≥Èó≠Â§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; &#125; ); &#125; /** * ÊúçÂä°Â§ÑÁêÜÔºöÊé•Êî∂Âà∞Êñ∞ÁöÑÂ•óÊé•Â≠óÔºåÂåÖË£ÖÊàê‰∏∫‰∏Ä‰∏™runnableÊèê‰∫§ÁªôÁ∫øÁ®ãÂéªÊâßË°å * * @param socket */ public void handler(Socket socket) &#123; this.executor.execute(new SocketTask(socket)); &#125; class SocketTask implements Runnable &#123; private Socket socket; public SocketTask(Socket socket) &#123; this.socket = socket; &#125; public Socket getSocket() &#123; return socket; &#125; @Override public void run() &#123; try &#123; InputStream inputStream = socket.getInputStream(); OutputStream outputStream = socket.getOutputStream(); // Ëé∑ÂèñÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÊï∞ÊçÆÔºåÁªü‰∏ÄÂåÖË£ÖÊàêRpcRequest RpcRequest request = messageProtocol.serviceToRequest(inputStream); RpcResponse response = rpcService.invoke(request); log.info("request:[" + request + "],response:[" + response + "]"); // ÂèçÂ∞ÑË∞ÉÁî®ÔºåÂæóÂà∞ÂÖ∑‰ΩìÁöÑËøîÂõûÂÄº messageProtocol.serviceGetResponse(response, outputStream); &#125; catch (Exception e) &#123; log.error("ÊúçÂä°Á´ØÂ§ÑÁêÜÂá∫Áé∞ÂºÇÂ∏∏Ôºåerror:&#123;&#125;", e); &#125; finally &#123; if (socket != null) &#123; try &#123; socket.close(); &#125; catch (IOException e) &#123; log.error("socketÂÖ≥Èó≠Â§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; &#125; &#125; &#125;&#125; RpcService 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158package com.springboot.whb.study.rpc.rpc_v2.core;import com.google.common.base.Joiner;import com.springboot.whb.study.rpc.rpc_v2.config.ServiceConfig;import com.springboot.whb.study.rpc.rpc_v2.io.protocol.DefaultMessageProtocol;import com.springboot.whb.study.rpc.rpc_v2.io.protocol.MessageProtocol;import com.springboot.whb.study.rpc.rpc_v2.register.ServiceRegister;import com.springboot.whb.study.rpc.rpc_v2.register.ZkServiceRegister;import lombok.Data;import lombok.extern.slf4j.Slf4j;import org.apache.commons.lang3.concurrent.BasicThreadFactory;import java.lang.reflect.Method;import java.util.HashMap;import java.util.Map;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;/** * @author: whb * @description: RPCÊúçÂä° */@Slf4j@Datapublic class RpcService &#123; /** * k ÊòØÊé•Âè£ÂÖ®ÂêçÁß∞ * v ÊòØÂØπÂ∫îÁöÑÂØπË±°ÂåÖÂê´ÁöÑËØ¶ÁªÜ‰ø°ÊÅØ */ private Map&lt;String, ServiceConfig&gt; serviceConfigMap = new HashMap&lt;&gt;(); /** * Á´ØÂè£Âè∑ */ private int port; /** * ÊúçÂä°Ê≥®ÂÜå */ private ServiceRegister serviceRegister; /** * ËøûÊé•Âô®ËøòÊú™ÊäΩË±°Â§ÑÁêÜÔºå‰ΩøÁî®ÁöÑËøòÊòØBIOÊ®°Âûã */ private ServiceConnection serviceConnection; /** * ÊúçÂä°Â§ÑÁêÜÂô® */ private ServiceHandler serviceHandler; /** * Á∫øÁ®ãÊ±† */ ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(10, 100, 60, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(1000), new BasicThreadFactory.Builder().namingPattern(Joiner.on("-").join("service-thread-pool-", "%s")).build()); public RpcService(int port) &#123; this.port = port; this.serviceHandler = new ServiceHandler(this); this.serviceHandler.setMessageProtocol(new DefaultMessageProtocol()); this.serviceRegister = new ZkServiceRegister(); &#125; /** * ËÆæÁΩÆÊ∂àÊÅØÂçèËÆÆ * * @param messageProtocol */ public void setMessageProtocol(MessageProtocol messageProtocol) &#123; if (this.serviceHandler == null) &#123; throw new RuntimeException("Â•óÊé•Â≠óÂ§ÑÁêÜÂô®Êó†Êïà"); &#125; this.serviceHandler.setMessageProtocol(messageProtocol); &#125; /** * Ê∑ªÂä†ÊúçÂä°Êé•Âè£ * * @param interfaceClass * @param ref * @param &lt;T&gt; */ public &lt;T&gt; void addService(Class&lt;T&gt; interfaceClass, T ref) &#123; String interfaceName = interfaceClass.getName(); ServiceConfig&lt;T&gt; serviceConfig = ServiceConfig.convert(interfaceName, interfaceClass, ref, this); serviceConfigMap.put(interfaceName, serviceConfig); &#125; /** * Ê≥®ÂÜåÊúçÂä° */ private void register() &#123; //ÊúçÂä°Ê≥®ÂÜåÔºåÂú®ÁΩëÁªúÁõëÂê¨ÂêØÂä®‰πãÂâçÂ∞±ÈúÄË¶ÅÂÆåÊàê serviceConfigMap.values().forEach(serviceRegister::register); &#125; /** * ÊúçÂä°ÂêØÂä® */ public void start() &#123; this.register(); log.info("ÊúçÂä°Ê≥®ÂÜåÂÆåÊàê"); this.serviceConnection = new ServiceConnection(); this.serviceConnection.init(port, serviceHandler); threadPoolExecutor.execute(serviceConnection); //‰ºòÈõÖÂÖ≥Èó≠ Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; &#123; RpcService.this.destroy(); &#125;)); &#125; /** * ÈÄöËøáÂèçÂ∞ÑÊâßË°åÔºåÊâßË°åÁªìÊûúÂ∞ÅË£ÖRpcResponse * * @param request * @param &lt;K&gt; * @param &lt;V&gt; * @return */ public &lt;K, V&gt; RpcResponse invoke(RpcRequest request) &#123; if (request == null) &#123; RpcResponse&lt;V&gt; response = new RpcResponse&lt;&gt;(); response.setResult(null); response.setIsError(true); response.setErrorMsg("Êú™Áü•ÂºÇÂ∏∏"); return response; &#125; String className = request.getClassName(); //ÊöÇÊó∂‰∏çËÄÉËôëÊ≤°ÊúâÂØπÂ∫îÁöÑserviceConfigÁöÑÊÉÖÂÜµ ServiceConfig&lt;K&gt; serviceConfig = serviceConfigMap.get(className); K ref = serviceConfig.getRef(); try &#123; Method method = ref.getClass().getMethod(request.getMethodName(), request.getParameterTypes()); V result = (V) method.invoke(ref, request.getArguments()); RpcResponse&lt;V&gt; response = new RpcResponse&lt;&gt;(); response.setResult(result); response.setIsError(false); response.setErrorMsg(""); return response; &#125; catch (Exception e) &#123; &#125; return null; &#125; /** * ÂÖ≥Èó≠ÊúçÂä° */ public void destroy() &#123; this.serviceConnection.destory(); log.info("ÊúçÂä°Á´ØÂÖ≥Èó≠‰∫Ü"); &#125;&#125; ÂÆ¢Êà∑Á´ØÂ§ÑÁêÜ ‰ª£ÁêÜÂØπË±°ProxyInstance 1234567891011121314151617181920212223242526272829303132333435363738394041424344package com.springboot.whb.study.rpc.rpc_v2.core;import lombok.extern.slf4j.Slf4j;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.net.InetSocketAddress;/** * @author: whb * @description: ÂÆ¢Êà∑Á´Ø‰ª£ÁêÜÂØπË±° */@Slf4jpublic class ProxyInstance implements InvocationHandler &#123; /** * RPCË∞ÉÁî®Êñπ */ private RpcClient rpcClient; private Class clazz; public ProxyInstance(RpcClient client, Class clazz) &#123; this.rpcClient = client; this.clazz = clazz; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; RpcRequest request = new RpcRequest(); request.setClassName(clazz.getName()); request.setMethodName(method.getName()); request.setArguments(args); request.setParameterTypes(method.getParameterTypes()); //Ëé∑ÂèñÊúçÂä°Êèê‰æõÊñπ‰ø°ÊÅØ InetSocketAddress address = rpcClient.discovery(request); log.info("[" + Thread.currentThread().getName() + "] discovery service: " + address); //ÂèëËµ∑ÁΩëÁªúËØ∑Ê±ÇÔºåÂæóÂà∞ËØ∑Ê±ÇÊï∞ÊçÆ RpcResponse response = rpcClient.invoke(request, address); return response.getResult(); &#125;&#125; ClientHandler 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677package com.springboot.whb.study.rpc.rpc_v2.core;import com.springboot.whb.study.rpc.rpc_v2.io.protocol.MessageProtocol;import lombok.extern.slf4j.Slf4j;import java.io.IOException;import java.io.InputStream;import java.io.OutputStream;import java.net.InetSocketAddress;import java.net.Socket;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØÂ§ÑÁêÜÂô® */@Slf4jpublic class ClientHandler &#123; private RpcClient rpcClient; private MessageProtocol messageProtocol; public ClientHandler(RpcClient rpcClient) &#123; this.rpcClient = rpcClient; &#125; public void setMessageProtocol(MessageProtocol messageProtocol) &#123; this.messageProtocol = messageProtocol; &#125; public &lt;T&gt; RpcResponse&lt;T&gt; invoke(RpcRequest request, InetSocketAddress address) &#123; RpcResponse&lt;T&gt; response = new RpcResponse&lt;&gt;(); Socket socket = getSocketInstance(address); if (socket == null) &#123; // Â•óÊé•Â≠óÈìæÊé•Â§±Ë¥• response.setIsError(true); response.setErrorMsg("Â•óÊé•Â≠óÈìæÊé•Â§±Ë¥•"); return response; &#125; try &#123; InputStream inputStream = socket.getInputStream(); OutputStream outputStream = socket.getOutputStream(); messageProtocol.clientToRequest(request, outputStream); response = messageProtocol.clientGetResponse(inputStream); &#125; catch (IOException e) &#123; log.error("ÂÆ¢Êà∑Á´ØÂ§ÑÁêÜÂºÇÂ∏∏Ôºåerror:&#123;&#125;", e); &#125; finally &#123; if (socket != null) &#123; try &#123; socket.close(); &#125; catch (IOException e) &#123; log.error("ÂÆ¢Êà∑Á´ØÂÖ≥Èó≠Â•óÊé•Â≠óÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; &#125; &#125; return response; &#125; /** * Ëé∑ÂèñÂØπË±°ÂÆû‰æã * * @param address * @return */ private Socket getSocketInstance(InetSocketAddress address) &#123; try &#123; return new Socket(address.getHostString(), address.getPort()); &#125; catch (IOException e) &#123; log.error("ÂÆ¢Êà∑Á´ØËé∑ÂèñÂ•óÊé•Â≠óÂ§±Ë¥•Ôºåerror:&#123;&#125;", e); &#125; return null; &#125;&#125; RpcClient 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101package com.springboot.whb.study.rpc.rpc_v2.core;import com.springboot.whb.study.rpc.rpc_v2.config.ClientConfig;import com.springboot.whb.study.rpc.rpc_v2.domain.ServiceType;import com.springboot.whb.study.rpc.rpc_v2.io.protocol.DefaultMessageProtocol;import com.springboot.whb.study.rpc.rpc_v2.register.ServiceRegister;import com.springboot.whb.study.rpc.rpc_v2.register.ZkServiceRegister;import java.net.InetSocketAddress;import java.util.HashMap;import java.util.Map;/** * @author: whb * @description: RPCÂÆ¢Êà∑Á´Ø */public class RpcClient &#123; /** * k ÊòØÊé•Âè£ÁöÑÂÖ®ÂêçÁß∞ * v ÊòØÂØπÂ∫îÁöÑÂØπË±°ÂåÖÂê´ÁöÑËØ¶ÁªÜ‰ø°ÊÅØ */ private Map&lt;String, ClientConfig&gt; clientConfigMap = new HashMap&lt;&gt;(); /** * ÊúçÂä°Ê≥®ÂÜå */ private ServiceRegister serviceRegister; /** * ÂÆ¢Êà∑Á´ØÂ§ÑÁêÜÂô® */ private ClientHandler clientHandler; public RpcClient() &#123; this.serviceRegister = new ZkServiceRegister(); this.clientHandler = new ClientHandler(this); // ËÆæÁΩÆÈªòËÆ§ÁöÑÊ∂àÊÅØÂ§ÑÁêÜÂçèËÆÆ this.clientHandler.setMessageProtocol(new DefaultMessageProtocol()); &#125; /** * ËÆ¢ÈòÖÊúçÂä° * * @param clazz * @param &lt;T&gt; */ public &lt;T&gt; void subscribe(Class&lt;T&gt; clazz) &#123; String interfaceName = clazz.getName(); ProxyInstance invocationHandler = new ProxyInstance(this, clazz); ClientConfig&lt;T&gt; clientConfig = ClientConfig.convert(clazz, invocationHandler); clientConfigMap.put(interfaceName, clientConfig); &#125; /** * ÊúçÂä°Ê≥®ÂÜå */ private void register() &#123; // ÊúçÂä°Ê≥®ÂÜåÔºåÂú®ÁΩëÁªúÁõëÂê¨ÂêØÂä®‰πãÂâçÂ∞±ÈúÄË¶ÅÂÆåÊàê clientConfigMap.values().forEach(serviceRegister::register); &#125; /** * ÊúçÂä°ÂêØÂä® */ public void start() &#123; this.register(); &#125; /** * ÊúçÂä°ÂèëÁé∞ * * @param request * @return */ public InetSocketAddress discovery(RpcRequest request) &#123; return serviceRegister.discovery(request, ServiceType.PROVIDER); &#125; /** * ÂèçÂ∞ÑË∞ÉÁî® * * @param request * @param address * @return */ public RpcResponse invoke(RpcRequest request, InetSocketAddress address) &#123; return this.clientHandler.invoke(request, address); &#125; /** * Ëé∑ÂèñÂØπË±°ÂÆû‰æã * * @param clazz * @param &lt;T&gt; * @return */ public &lt;T&gt; T getInstance(Class&lt;T&gt; clazz) &#123; return (T) (clientConfigMap.get(clazz.getName()).getProxy()); &#125;&#125; ÊµãËØï ÊµãËØïÊé•Âè£ÂÆö‰πâCalculate 1234567891011121314151617181920212223242526package com.springboot.whb.study.rpc.rpc_v2.demo;/** * @author: whb * @description: ÊµãËØïÊé•Âè£ÂÆö‰πâ */public interface Calculate&lt;T&gt; &#123; /** * Ê±ÇÂíå * * @param a * @param b * @return */ T add(T a, T b); /** * Ê±ÇÂ∑Æ * * @param a * @param b * @return */ T sub(T a, T b);&#125; ÊµãËØïÊé•Âè£ÂÆûÁé∞Á±ªSimpleCalculate 12345678910111213141516171819202122232425262728package com.springboot.whb.study.rpc.rpc_v2.demo;import java.util.Random;/** * @author: whb * @description: ÊµãËØïÊé•Âè£ÂÆûÁé∞Á±ª */public class SimpleCalculate implements Calculate&lt;Integer&gt; &#123; @Override public Integer add(Integer a, Integer b) &#123; long start = System.currentTimeMillis(); try &#123; Thread.sleep(new Random().nextInt(1000)); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; int c = a + b; System.out.println(Thread.currentThread().getName() + " ËÄóÊó∂:" + (System.currentTimeMillis() - start)); return c; &#125; @Override public Integer sub(Integer a, Integer b) &#123; return a - b; &#125;&#125; ÊµãËØï-ÊúçÂä°Á´ØService 12345678910111213141516package com.springboot.whb.study.rpc.rpc_v2.demo;import com.springboot.whb.study.rpc.rpc_v2.core.RpcService;/** * @author: whb * @description: ÊµãËØïÊúçÂä°Á´Ø */public class Service &#123; public static void main(String[] args) &#123; RpcService rpcService = new RpcService(10001); rpcService.addService(Calculate.class, new SimpleCalculate()); rpcService.start(); &#125;&#125; ÊµãËØï-ÂÆ¢Êà∑Á´ØClient 1234567891011121314151617181920212223242526272829303132333435363738package com.springboot.whb.study.rpc.rpc_v2.demo;import com.google.common.base.Joiner;import com.springboot.whb.study.rpc.rpc_v2.core.RpcClient;import org.apache.commons.lang3.concurrent.BasicThreadFactory;import java.util.Random;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;/** * @author: whb * @description: ÊµãËØïÂÆ¢Êà∑Á´Ø */public class Client &#123; public static final ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(10, 100, 60, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(1000), new BasicThreadFactory.Builder().namingPattern(Joiner.on("-").join("client-thread-pool-", "%s")).build()); public static void main(String[] args) &#123; RpcClient rpcClient = new RpcClient(); rpcClient.subscribe(Calculate.class); rpcClient.start(); Calculate&lt;Integer&gt; calculateProxy = rpcClient.getInstance(Calculate.class); for (int i = 0; i &lt; 200; i++) &#123; threadPoolExecutor.execute(() -&gt; &#123; long start = System.currentTimeMillis(); int s1 = new Random().nextInt(100); int s2 = new Random().nextInt(100); int s3 = calculateProxy.add(s1, s2); System.out.println("[" + Thread.currentThread().getName() + "]a: " + s1 + ", b:" + s2 + ", c=" + s3 + ", ËÄóÊó∂:" + (System.currentTimeMillis() - start)); &#125;); &#125; &#125;&#125; ÊµãËØïÁªìÊûú zookeeper ÊúçÂä°Á´Ø ÂÆ¢Êà∑Á´Ø ÊÄªÁªì v2ÁâàÊú¨Áõ∏ÊØîv1ÁâàÊú¨‰øÆÊîπ‰∫ÜÊï¥‰∏™‰ª£Á†ÅÁªìÊûÑÔºå‰ΩøÂæóÁªìÊûÑËÉΩÂ§üÊõ¥Âä†ÊòéÁ°ÆÔºåÂºïÂÖ•zookeeper‰Ωú‰∏∫ÊúçÂä°Ê≤ªÁêÜÂäüËÉΩÔºåÂ§ßËá¥‰ªãÁªç‰∫ÜzookeeperÁöÑÁâπÁÇπ‰ª•ÂèäÂäüËÉΩÔºåÁªôÊúçÂä°Ê≥®ÂÜå„ÄÅÊúçÂä°ÂèëÁé∞„ÄÅÂ∫èÂàóÂåñÂçèËÆÆÁ≠âÂùáÁïô‰∏ã‰∫ÜÂè£Â≠êÔºå‰ª•‰æøÂÆûÁé∞Ëá™ÂÆö‰πâÁöÑÂçèËÆÆÔºåv1ÁöÑioÊ®°ÂûãÊòØBIOÔºåv2Âπ∂Ê≤°ÊúâÂèòÂåñÔºåÂè™ÊòØÁî±ÂçïÁ∫øÁ®ãÊîπÈÄ†ÊàêÂ§öÁ∫øÁ®ã„ÄÇ Êï¥‰ΩìËÄåË®ÄÁ¨¶Âêà‰∏Ä‰∏™ÁÆÄÂçïÁöÑrpcÊ°ÜÊû∂Ôºå‰æùÊóßËøòÊòØÊúâÂæàÂ§öÁÇπÂèØ‰ª•ÂÆåÂñÑ„ÄÅ‰ºòÂåñÁöÑÁÇπÔºåÂ¶ÇÔºö ioÊ®°ÂûãËøòÊòØÊ≤°ÊúâÊõøÊç¢ÔºåÂêéÈù¢ËÄÉËôëÁõ¥Êé•Êï¥‰ΩìÊé•ÂÖ•nettyÔºõ ‰∏çÂ∫îËØ•ÊØèÊ¨°ÂÆûÊó∂‰ªézkËé∑ÂèñËäÇÁÇπ‰ø°ÊÅØÔºåÂ∫îËØ•ÂÖàËÆæÁΩÆ‰∏Ä‰∏™Êú¨Âú∞ÁºìÂ≠òÔºåÂÜçÂà©Áî®zookeeperÁöÑwatcherÂäüËÉΩÔºåÂºÄÂêØ‰∏Ä‰∏™ÂºÇÊ≠•Á∫øÁ®ãÂéªÁõëÂê¨Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠òÔºåÈôç‰ΩéÂíåzk‰∫§‰∫íÂ∏¶Êù•ÁöÑÊÄßËÉΩÊçüËÄóÔºõ Ê≤°ÊúâÂø´ÈÄüÂ§±Ë¥•„ÄÅÈáçËØïÁöÑÂäüËÉΩÔºåÂÆ¢ËßÇÊÉÖÂÜµ‰∏ãÂ≠òÂú®ÁΩëÁªúÊäñÂä®ÁöÑÈóÆÈ¢òÔºåÈáçËØïÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ Êï¥‰ΩìÁöÑÂêÑÁßçÂçèËÆÆÁ∫¶ÂÆöÂπ∂Ê≤°ÊúâÊòéÁ°ÆËßÑËåÉÔºåÊØîËæÉÊ∑∑‰π±„ÄÇ]]></content>
      <categories>
        <category>RPC</category>
      </categories>
      <tags>
        <tag>RPC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HexoÊ∑ªÂä†Èü≥‰πêÊí≠ÊîæÂô®]]></title>
    <url>%2Fposts%2Fdb828ee7.html</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢ ‰∏∫ÂçöÂÆ¢Ê∑ªÂä†Èü≥‰πêÊí≠ÊîæÂô®ÂäüËÉΩÔºåÁΩë‰∏äÊúâÂæàÂ§öÁßçÊñπÂºèÔºå‰πüÊúâÂæàÂ§öÊèí‰ª∂ÂèØ‰ª•Áî®ÔºåÊØîÂ¶Çaplayer„ÄÅdplayerÁ≠âÁ≠â„ÄÇÈÉ®ÁΩ≤ÊñπÂºèÊó¢ÂèØ‰ª•‰ΩøÁî®hexoÊèí‰ª∂Ôºå‰πüÂèØ‰ª•ÈÄöËøáÊèêÂèñdistÊñá‰ª∂ÁöÑÊñπÂºè„ÄÇ Êú¨‰∫∫‰∏∫Ëá™Â∑±ÁöÑÊí≠ÊîæÈÄâÊã©ÁöÑaplayerÊí≠ÊîæÂô®Ôºå‰∏ÄÂºÄÂßãÊòØ‰ΩøÁî®hexoÊèí‰ª∂ÁöÑÊñπÂºèÔºå‰ΩÜÊòØÈÉ®ÁΩ≤ÁöÑÊó∂ÂÄô‰∏ÄÁõ¥Êä•Ê†áÁ≠æËß£ÊûêÁöÑÈîôËØØÔºåÊü•‰∫ÜÂ•Ω‰πÖ‰πüÊ≤°Êü•Âà∞ÂéüÂõ†ÔºåÊó†Â•àÔºåÊîæÂºÉ‰ΩøÁî®Êèí‰ª∂ÁöÑÊñπÂºèÔºåÊîπ‰∏∫‰ΩøÁî®ÊèêÂèñaplayerÁöÑdistÊñá‰ª∂ÁöÑÊñπÂºè„ÄÇ ‰∏ãËΩΩaplayer ËÆøÈóÆaplayerÊ∫êÁ†ÅÔºöGitHub Aplayer ÔºåÂ∞ÜÊñá‰ª∂‰∏ãËΩΩÂà∞Êú¨Âú∞ÔºåËß£ÂéãÂêéÂ∞ÜdistÊñá‰ª∂Â§πÂ§çÂà∂Âà∞ /themes/next/source Êñá‰ª∂Â§π‰∏ã„ÄÇ ÂàõÂª∫Ê†∑Âºè Êñ∞Âª∫music.js Âú®/themes/next/source/distÊñá‰ª∂Â§π‰∏≠Êñ∞Âª∫music.jsÊñá‰ª∂ÔºåÂ∞Ü‰∏ãÈù¢‰ª£Á†ÅÊ∑ªÂä†ËøõÂéªÔºö 12345678910111213141516171819202122const ap = new APlayer(&#123; container: document.getElementById('aplayer'), autoplay: false, loop: 'all', volume: 0.7, listFolded: true, listMaxHeight: 60, audio: [ &#123; name: 'name1', artist: 'artist1', url: 'url1.mp3', cover: 'cover1.jpg', &#125;, &#123; name: 'name2', artist: 'artist2', url: 'url2.mp3', cover: 'cover2.jpg', &#125; ]&#125;); ÂèÇÊï∞‰øÆÊîπ ‰∏äÈù¢‰ª£Á†Å‰∏∫‰Ω†Âú®hexo‰∏äÁîüÊàêaplayerÊí≠ÊîæÂô®ÁöÑÊ†∑ÂºèÔºåÂèÇÊï∞‰øÆÊîπÂèÇËÄÉ ÂÆòÊñπ‰∏≠ÊñáÊñáÊ°£ „ÄÇ ‰øÆÊîπaplayerÊ†∑Âºè &lt;span id=&quot;inline-blue&quot;&gt; ÊôÆÈÄöÊ®°ÂºèÔºö&lt;/span&gt; 123456789const ap = new APlayer(&#123; container: document.getElementById('aplayer'), audio: [&#123; name: 'name', artist: 'artist', url: 'url.mp3', cover: 'cover.jpg' &#125;]&#125;); &lt;span id=&quot;inline-green&quot;&gt; ÊïàÊûúÂ¶Ç‰∏ãÔºö&lt;/span&gt; &lt;span id=&quot;inline-blue&quot;&gt; Êí≠ÊîæÂàóË°®Ê®°ÂºèÔºö&lt;/span&gt; 123456789101112131415161718192021222324const ap = new APlayer(&#123; container: document.getElementById('player'), listFolded: false,//ÂàóË°®ÈªòËÆ§ÊäòÂè† listMaxHeight: 90,//ÂàóË°®ÊúÄÂ§ßÈ´òÂ∫¶ lrcType: 3, //Ê≠§‰∏∫Ê≠åËØçÊ†ºÂºèÔºåÊ≤°ÊúâÊ≠åËØçÂèØ‰ª•Áõ¥Êé•Âà†ÊéâËøô‰∏ÄË°å audio: [ &#123; name: 'name1', artist: 'artist1', url: 'url1.mp3', cover: 'cover1.jpg', lrc: 'lrc1.lrc', theme: '#ebd0c2' &#125;, &#123; name: 'name2', artist: 'artist2', url: 'url2.mp3', cover: 'cover2.jpg', lrc: 'lrc2.lrc', theme: '#46718b' &#125; ]&#125;); &lt;span id=&quot;inline-green&quot;&gt; ÊïàÊûúÂ¶Ç‰∏ãÔºö&lt;/span&gt; &lt;span id=&quot;inline-blue&quot;&gt; Âê∏Â∫ïÊ®°ÂºèÔºö&lt;/span&gt; 12345678910const ap = new APlayer(&#123; container: document.getElementById('player'), fixed: true, audio: [&#123; name: 'name', artist: 'artist', url: 'url.mp3', cover: 'cover.jpg', &#125;]&#125;); &lt;span id=&quot;inline-green&quot;&gt; ÊïàÊûúÂ¶Ç‰∏ãÔºö&lt;/span&gt; &lt;span id=&quot;inline-blue&quot;&gt; Ëø∑‰Ω†Â∫ïÊ®°ÂºèÔºö&lt;/span&gt; 12345678910const ap = new APlayer(&#123; container: document.getElementById('player'), mini: true, audio: [&#123; name: 'name', artist: 'artist', url: 'url.mp3', cover: 'cover.jpg', &#125;]&#125;); &lt;span id=&quot;inline-purple&quot;&gt; ÈôÑ‰∏äÊàëÁöÑÂèÇÊï∞Ôºö&lt;/span&gt; 1234567891011121314151617181920212223242526272829303132const ap = new APlayer(&#123; container: document.getElementById('aplayer'), //Êí≠ÊîæÂô®ÂÆπÂô®ÂÖÉÁ¥† listFolded: false, //ÂàóË°®ÈªòËÆ§ÊäòÂè† listMaxHeight: 90, //ÂàóË°®ÊúÄÂ§ßÈ´òÂ∫¶ //lrcType: 3, //Ê≠§‰∏∫Ê≠åËØçÊ†ºÂºèÔºåÊ≤°ÊúâÊ≠åËØçÂèØ‰ª•Áõ¥Êé•Âà†ÊéâËøô‰∏ÄË°å mini: false, //Ëø∑‰Ω†Ê®°Âºè autoplay: true, //Ëá™Âä®Êí≠Êîæ theme: '#FADFA3', //‰∏ªÈ¢òËâ≤ loop: 'all', //Èü≥È¢ëÂæ™ÁéØÊí≠Êîæ, ÂèØÈÄâÂÄº: 'all'ÂÖ®ÈÉ®Âæ™ÁéØ, 'one'ÂçïÊõ≤Âæ™ÁéØ, 'none'‰∏çÂæ™ÁéØ order: 'list', //Èü≥È¢ëÂæ™ÁéØÈ°∫Â∫è, ÂèØÈÄâÂÄº: 'list'ÂàóË°®Âæ™ÁéØ, 'random'ÈöèÊú∫Âæ™ÁéØ preload: 'auto', //È¢ÑÂä†ËΩΩÔºåÂèØÈÄâÂÄº: 'none', 'metadata', 'auto' volume: 0.7, //ÈªòËÆ§Èü≥ÈáèÔºåËØ∑Ê≥®ÊÑèÊí≠ÊîæÂô®‰ºöËÆ∞ÂøÜÁî®Êà∑ËÆæÁΩÆÔºåÁî®Êà∑ÊâãÂä®ËÆæÁΩÆÈü≥ÈáèÂêéÈªòËÆ§Èü≥ÈáèÂç≥Â§±Êïà mutex: false, //‰∫íÊñ•ÔºåÈòªÊ≠¢Â§ö‰∏™Êí≠ÊîæÂô®ÂêåÊó∂Êí≠ÊîæÔºåÂΩìÂâçÊí≠ÊîæÂô®Êí≠ÊîæÊó∂ÊöÇÂÅúÂÖ∂‰ªñÊí≠ÊîæÂô® audio: [ //Èü≥È¢ë‰ø°ÊÅØ &#123; name: 'Â§ßÈ±º', //Èü≥È¢ëÂêçÁß∞ artist: 'Âë®Ê∑±„ÄÅÈÉ≠Ê≤Å', //Èü≥È¢ëËâ∫ÊúØÂÆ∂ url: '"http://lc-tguve1gk.cn-n1.lcfile.com/47b5548df9c80bba84f4/%E5%91%A8%E6%B7%B1%E3%80%81%E9%83%AD%E6%B2%81%20-%20%E5%A4%A7%E9%B1%BC%20%282017%E4%B8%AD%E5%9B%BD%E6%96%B0%E6%AD%8C%E5%A3%B0%E7%AC%AC%E4%BA%8C%E5%AD%A3%E7%AC%AC%E5%8D%81%E6%9C%9F%E7%8E%B0%E5%9C%BA%E4%BC%B4%E5%A5%8F%29.mp3', //Èü≥È¢ëÈìæÊé• cover: 'http://lc-tguve1gk.cn-n1.lcfile.com/a9fff99abbddc8757d4b/%E5%A4%A7%E9%B1%BC.jpg', //Èü≥È¢ëÂ∞ÅÈù¢ //lrc: 'lrc1.lrc', //Ê≠åËØç theme: '#ebd0c2' //ÂàáÊç¢Âà∞Ê≠§Èü≥È¢ëÊó∂ÁöÑ‰∏ªÈ¢òËâ≤ÔºåÊØî‰∏äÈù¢ÁöÑ theme ‰ºòÂÖàÁ∫ßÈ´ò &#125;, &#123; name: 'Something just like this', artist: 'Alex Goot _ Madilyn Bailey', url: 'http://lc-tguve1gk.cn-n1.lcfile.com/f3bee3260fa207648d34/Alex%20Goot%20_%20Madilyn%20Bailey%20-%20Something%20Just%20Like%20This.mp3', cover: 'http://lc-tguve1gk.cn-n1.lcfile.com/d21b8e3392433807b1e2/Something%20just%20like%20this.jpg', //lrc: 'lrc2.lrc', theme: '#46718b' &#125; ]&#125;); ÈÉ®ÁΩ≤ aplayerÁöÑÊ†∑ÂºèËÆæÁΩÆÂ•Ω‰πãÂêéÂ∞±ÂèØ‰ª•ÊääaplayerÊîæÂú®Ëá™Â∑±ÊÉ≥Ë¶ÅÊîæÁΩÆÁöÑ‰ΩçÁΩÆ‰∏äÔºåÊîæÁΩÆ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234&lt;link rel="stylesheet" href="/dist/APlayer.min.css"&gt;&lt;div id="aplayer"&gt;&lt;/div&gt;&lt;script type="text/javascript" src="/dist/APlayer.min.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="/dist/music.js"&gt;&lt;/script&gt; Â∞ÜÊîæÁΩÆ‰ª£Á†ÅÊîæÂú®‰∏çÂêåÁöÑ/themes/next/layout/xxx.swigÊñá‰ª∂ÂÜÖ‰ºöÊúâ‰∏çÂêåÁöÑÊïàÊûú„ÄÇ ÊØè‰∏™‰∫∫‰ΩøÁî®ÁöÑ‰∏ªÈ¢ò‰∏ç‰∏ÄÊ†∑ÔºåË¶ÅÊ†πÊçÆËá™Â∑±ÁöÑ‰∏ªÈ¢òÂéªË∞ÉËØï„ÄÇ‰æãÂ¶ÇÊàëÁî®ÁöÑÊòØnext-mist‰∏ªÈ¢òÔºå‰∏îÂñúÊ¨¢ÊîæÁΩÆÂú®‰æßËæπÊ†è„ÄÇÈÇ£‰πàÂú®/themes/next/layout/_marcoÊñá‰ª∂Â§π‰∏ãÊâæÂà∞sidebar.swigÊñá‰ª∂„ÄÇ Â¶ÇÊûúË¶ÅÊîæÁΩÆÂú®‰æßËæπÊ†èÁöÑÂèãÈìæ‰∏ãÈù¢,ÈÇ£‰πàÂú®sidebar.swig‰∏≠ÊâæÂà∞if theme.linksÔºåÂ∞ÜÊîæÁΩÆ‰ª£Á†ÅÊ∑ªÂä†Âà∞endif‰πãÂêé„ÄÇÂ¶Ç‰∏ãÂõæÔºö Â¶ÇË¶ÅÊîæÁΩÆÂà∞RSS‰∏ãÂ∞±Âú®sidebar.swig‰∏≠ÊêúÁ¥¢if theme.rssÔºå‰πüÊòØÊ∑ªÂä†Âà∞endif‰πãÂêé„ÄÇ ÊàëÊòØÈÄâÊã©ÊîæÂú®‰∫ÜÂèãÈìæ‰∏ãÊñπÔºåÂ¶Ç‰∏ãÂõæÔºö ÊúÄÁªàÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö Âà∂‰ΩúÈü≥‰πê/ÂõæÁâáÂ§ñÈìæ Ê≠£Â¶Ç‰πãÂâç‰∏∫ÂçöÂÆ¢Ê∑ªÂä†ËØÑËÆ∫ÂèäÁªüËÆ°ÂäüËÉΩÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨‰ΩøÁî®‰∫ÜLeanCloudÔºåÂà∂‰ΩúÈü≥‰πê/ÂõæÁâáÁöÑÂ§ñÈìæÂêåÊ†∑‰πüÂèØ‰ª•‰ΩøÁî®ÂÆÉ„ÄÇ Ê≥®ÂÜå„ÄÅÁôªÈôÜÁöÑÊ≠•È™§Âú®‰πãÂâçÁöÑÊñáÁ´†ÈáåÂ∑≤ÁªèÊèèÁªòËøá‰∫ÜÔºåËøôÈáå‰∏çÂÜçËØ¶Ëø∞ÔºåÊàë‰ª¨Áõ¥Êé•Ê≠•ÂÖ•Ê≠£È¢ò„ÄÇ Âà∞‰Ω†ÂàõÂª∫ÁöÑÂ∫îÁî®ÈáåÈù¢ÂéªÔºåÁÇπÂáªÂ≠òÂÇ®ÔºåÂ¶Ç‰∏ãÂõæ„ÄÇÁÇπÂáª_FileÔºåÁÇπÂáª‰∏ä‰º†ÔºåÊâæÂà∞‰Ω†‰∏ãËΩΩÂ•ΩÁöÑÈü≥‰πêÊñá‰ª∂ÂíåÈü≥‰πêÂõæÁâá‰∏ä‰º†‰∏äÂéªÂ∞±Ë°å‰∫Ü„ÄÇ ‰∏ä‰º†‰πãÂêéÂà∑Êñ∞È°µÈù¢ÔºåÂ∞ÜÂàóË°®ÂêëÂêéÊãâÔºåÂ∞±ÂèØ‰ª•ÁúãÂà∞ÂØπÂ∫îÁöÑÈü≥‰πêÂíåÂõæÁâáÁöÑurlËøûÊé•‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂàÜÂ∏ÉÂºèÂ≠¶‰π†-‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ï]]></title>
    <url>%2Fposts%2F302399c9.html</url>
    <content type="text"><![CDATA[Á§∫‰æãÂºïÂÖ• ÊØîÂ¶ÇÁé∞Âú®Êúâ N ‰∏™ Redis ÊúçÂä°Âô®Ôºå‰∏çËÄÉËôë‰ΩøÁî®Redis ClusterÁöÑÊÉÖÂÜµ‰∏ãÔºåÈÇ£‰πàÂ¶Ç‰ΩïÂ∞Ü‰∏Ä‰∏™ÂØπË±° object Êò†Â∞ÑÂà∞ N ‰∏™ Redis ‰∏äÂë¢Ôºü ‰Ω†ÂæàÂèØËÉΩ‰ºöÈááÁî®Á±ª‰ºº‰∏ãÈù¢ÁöÑÈÄöÁî®ÊñπÊ≥ïËÆ°ÁÆó object ÁöÑ hash ÂÄºÔºåÁÑ∂ÂêéÂùáÂåÄÁöÑÊò†Â∞ÑÂà∞Âà∞ N ‰∏™ cacheÔºö Ê±Ç‰ΩôÁÆóÊ≥ï: hash(object) % N ËøôÁßçÈÄöÁî®ÁöÑËÆ°ÁÆóÊñπÊ≥ïÊúâ‰ªÄ‰πàÈóÆÈ¢òÂë¢Ôºü ‰∏Ä‰∏™ redis ÊúçÂä°Âô® x ÂÆï Êéâ‰∫ÜÔºåËøôÊ†∑ÊâÄÊúâÊò†Â∞ÑÂà∞ redis x ÁöÑÂØπË±°ÈÉΩ‰ºöÂ§±Êïà„ÄÇÊÄé‰πàÂäûÔºüÈúÄË¶ÅÊää redis x ‰ªé redisÈõÜÁæ§‰∏≠ÁßªÈô§ÔºåËøôÊó∂ÂÄô redisÊúçÂä°Âô® ÊòØ N-1 Âè∞ÔºåÈÇ£‰πàÂØπÂ∫îÊò†Â∞ÑÂÖ¨ÂºèÂèòÊàê‰∫Ü hash(object)%(N-1) Ôºõ ËøòÊúâ‰∏ÄÁßçÊÉÖÂÜµÊòØÁî±‰∫éËÆøÈóÆÈáèÂ¢ûÂ§öÔºåÈúÄË¶ÅÊ∑ªÂä† redis ÔºåËøôÊó∂ÂÄô redis ÊòØ N+1 Âè∞ÔºåÊò†Â∞ÑÂÖ¨ÂºèÂèòÊàê‰∫Ü hash(object)%(N+1) Ôºõ 1 Âíå 2 ÊÑèÂë≥ÁùÄÁ™ÅÁÑ∂‰πãÈó¥Âá†‰πéÊâÄÊúâÁöÑ redisÁºìÂ≠òÈÉΩÂ§±Êïà‰∫Ü„ÄÇÂØπ‰∫éÊúçÂä°Âô®ËÄåË®ÄÔºåËøôÊòØ‰∏ÄÂú∫ÁÅæÈöæÔºåÊâÄÊúâÁöÑËÆøÈóÆÈÉΩ‰ºöÁõ¥Êé•ÂÜ≤ÂêëÂêéÁ´ØÊúçÂä°Âô®ÔºåÂØπÂêéÁ´ØÊúçÂä°Âô®ÈÄ†ÊàêÂéãÂäõÔºåÁîöËá≥ÊòØÂêéÁ´ØÊúçÂä°Âô®Áò´Áó™„ÄÇ Â¶Ç‰ΩïËß£ÂÜ≥‰∏äÈù¢ÁöÑÈóÆÈ¢òÂë¢Ôºü‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ïÂ∞±Ê¥æ‰∏äÁî®Âú∫‰∫Ü„ÄÇ ‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ï ‰∏ÄËá¥ÊÄßHashÁî®‰∫éÂàÜÂ∏ÉÂºèÁºìÂ≠òÁ≥ªÁªüÔºåÂ∞ÜKeyÂÄºÊò†Â∞ÑÂà∞ÂÖ∑‰ΩìÊú∫Âô®Ip‰∏äÔºåÂπ∂‰∏îÂ¢ûÂä†ÂíåÂà†Èô§1Âè∞Êú∫Âô®ÁöÑÊï∞ÊçÆÁßªÂä®ÈáèËæÉÂ∞è„ÄÇ ‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ï‰πüÊòØ‰ΩøÁî®ÂèñÊ®°ÁöÑÊñπÊ≥ïÔºåÂè™ÊòØÔºåÂàöÊâçÊèèËø∞ÁöÑÂèñÊ®°Ê≥ïÊòØÂØπÊúçÂä°Âô®ÁöÑÊï∞ÈáèËøõË°åÂèñÊ®°ÔºåËÄå‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ïÊòØÂØπ2^32ÂèñÊ®°„ÄÇ ÁÆÄÂçïÊù•ËØ¥Ôºå‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ïÂ∞ÜÊï¥‰∏™ÂìàÂ∏åÂÄºÁ©∫Èó¥ÁªÑÁªáÊàê‰∏Ä‰∏™ËôöÊãüÁöÑÂúÜÁéØÔºåÂ¶ÇÂÅáËÆæÊüêÂìàÂ∏åÂáΩÊï∞HÁöÑÂÄºÁ©∫Èó¥‰∏∫0-2^32-1ÔºàÂç≥ÂìàÂ∏åÂÄºÊòØ‰∏Ä‰∏™32‰ΩçÊó†Á¨¶Âè∑Êï¥ÂΩ¢ÔºâÔºåÊï¥‰∏™ÂìàÂ∏åÁéØÂ¶Ç‰∏ãÔºö Êï¥‰∏™Á©∫Èó¥ÊåâÈ°∫Êó∂ÈíàÊñπÂêëÁªÑÁªáÔºåÂúÜÁéØÁöÑÊ≠£‰∏äÊñπÁöÑÁÇπ‰ª£Ë°®0Ôºå0ÁÇπÂè≥‰æßÁöÑÁ¨¨‰∏Ä‰∏™ÁÇπ‰ª£Ë°®1Ôºå‰ª•Ê≠§Á±ªÊé®Ôºå2„ÄÅ3„ÄÅ4„ÄÅ5„ÄÅ6‚Ä¶‚Ä¶Áõ¥Âà∞2^32-1Ôºå‰πüÂ∞±ÊòØËØ¥0ÁÇπÂ∑¶‰æßÁöÑÁ¨¨‰∏Ä‰∏™ÁÇπ‰ª£Ë°®2^32-1Ôºå 0Âíå2^32-1Âú®Èõ∂ÁÇπ‰∏≠ÊñπÂêëÈáçÂêàÔºåÊääËøô‰∏™Áî±2^32‰∏™ÁÇπÁªÑÊàêÁöÑÂúÜÁéØÁß∞‰∏∫HashÁéØ„ÄÇ ‰ª•‰∏äÈù¢ÁöÑÂú∫ÊôØ‰∏∫‰æãÔºåÂÅáËÆæÊúâ4Âè∞ÁºìÂ≠òÊúçÂä°Âô®Ôºånode1„ÄÅnode2„ÄÅnode3Ôºånode4ÔºåÈÇ£‰πàÔºåÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÔºåËøô4Âè∞ÊúçÂä°Âô®ËÇØÂÆöÊúâËá™Â∑±ÁöÑIPÂú∞ÂùÄÊàñ‰∏ªÊú∫ÂêçÔºåÁî®ÂÆÉ‰ª¨ÂêÑËá™ÁöÑIPÂú∞ÂùÄÊàñ‰∏ªÊú∫Âêç‰Ωú‰∏∫ÂÖ≥ÈîÆÂ≠óËøõË°åÂìàÂ∏åËÆ°ÁÆóÔºå‰ΩøÁî®ÂìàÂ∏åÂêéÁöÑÁªìÊûúÂØπ2^32ÂèñÊ®°ÔºåÂèØ‰ª•‰ΩøÁî®Â¶Ç‰∏ãÂÖ¨ÂºèÔºö hashÔºànode1ÁöÑIPÂú∞ÂùÄÔºâ % 2^32 ÈÄöËøá‰∏äÈù¢ÂÖ¨ÂºèÁÆóÂá∫ÁöÑÁªìÊûú‰∏ÄÂÆöËÉΩÂæóÂà∞‰∏Ä‰∏™0Âà∞2^32-1‰πãÈó¥ÁöÑÊï¥Êï∞ÔºåÂ∞±Áî®ÂæóÂá∫ÁöÑÊï¥Êï∞Ôºå‰ª£Ë°®ÊúçÂä°Âô®node1ÔºåÊó¢ÁÑ∂Ëøô‰∏™Êï¥Êï∞ËÇØÂÆöÂ§Ñ‰∫é0Âà∞2^32-1‰πãÈó¥ÔºåÈÇ£‰πàÔºå‰∏äÂõæ‰∏≠ÁöÑhashÁéØ‰∏äÂøÖÂÆöÊúâ‰∏Ä‰∏™ÁÇπ‰∏éËøô‰∏™Êï¥Êï∞ÂØπÂ∫îÔºå‰πüÂ∞±ÊòØÊúçÂä°Âô®node1ÔºåÈÇ£‰πàÔºåÊúçÂä°Âô®node1Â∞±ÂèØ‰ª•Êò†Â∞ÑÂà∞Ëøô‰∏™ÁéØ‰∏ä‰∫ÜÔºåÂÖ∂‰ªñÊúçÂä°Âô®‰æùÊ¨°Á±ªÊé®Âç≥ÂèØÂæóÂà∞Áõ∏Â∫îÁöÑ‰ΩçÁΩÆÔºåÂ¶Ç‰∏ãÂõæÔºö Êé•‰∏ãÊù•‰ΩøÁî®Â¶Ç‰∏ãÁÆóÊ≥ïÂÆö‰ΩçÊï∞ÊçÆËÆøÈóÆÂà∞Áõ∏Â∫îÊúçÂä°Âô®Ôºö Â∞ÜÊï∞ÊçÆkey‰ΩøÁî®Áõ∏ÂêåÁöÑÂáΩÊï∞HashËÆ°ÁÆóÂá∫ÂìàÂ∏åÂÄºÔºåÂπ∂Á°ÆÂÆöÊ≠§Êï∞ÊçÆÂú®ÁéØ‰∏äÁöÑ‰ΩçÁΩÆÔºå‰ªéÊ≠§‰ΩçÁΩÆÊ≤øÁéØÈ°∫Êó∂Èíà‚ÄúË°åËµ∞‚ÄùÔºåÈÅáÂà∞ÁöÑÁ¨¨‰∏ÄÂè∞ÊúçÂä°Âô®Â∞±ÊòØËØ•Êï∞ÊçÆÂ∫îËØ•Êò†Â∞ÑÂà∞ÁöÑÊúçÂä°Âô®„ÄÇ ‰æãÂ¶ÇÊàë‰ª¨ÊúâObject A„ÄÅObject B„ÄÅObject C„ÄÅObject DÂõõ‰∏™Êï∞ÊçÆÂØπË±°ÔºåÁªèËøáÂìàÂ∏åËÆ°ÁÆóÂêéÔºåÂú®ÁéØÁ©∫Èó¥‰∏äÁöÑ‰ΩçÁΩÆÂ¶Ç‰∏ãÔºö Ê†πÊçÆ‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÔºåÊï∞ÊçÆA‰ºöË¢´ÂÆö‰∏∫Âà∞Node A‰∏äÔºåBË¢´ÂÆö‰∏∫Âà∞Node B‰∏äÔºåCË¢´ÂÆö‰∏∫Âà∞Node C‰∏äÔºåDË¢´ÂÆö‰∏∫Âà∞Node D‰∏ä„ÄÇ ‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ïÁöÑÂÆπÈîôÊÄßÂíåÊâ©Â±ïÊÄß Áé∞Âú®ÂÅáËÆæNode C‰∏çÂπ∏ÂÆïÊú∫ÔºåÂèØ‰ª•ÁúãÂà∞Ê≠§Êó∂ÂØπË±°A„ÄÅB„ÄÅD‰∏ç‰ºöÂèóÂà∞ÂΩ±ÂìçÔºåÂè™ÊúâCÂØπË±°Ë¢´ÈáçÂÆö‰ΩçÂà∞Node D„ÄÇ ‰∏ÄËà¨ÁöÑÔºåÂú®‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ï‰∏≠ÔºåÂ¶ÇÊûú‰∏ÄÂè∞ÊúçÂä°Âô®‰∏çÂèØÁî®ÔºåÂàôÂèóÂΩ±ÂìçÁöÑÊï∞ÊçÆ‰ªÖ‰ªÖÊòØÊ≠§ÊúçÂä°Âô®Âà∞ÂÖ∂ÁéØÁ©∫Èó¥‰∏≠Ââç‰∏ÄÂè∞ÊúçÂä°Âô®ÔºàÂç≥Ê≤øÁùÄÈÄÜÊó∂ÈíàÊñπÂêëË°åËµ∞ÈÅáÂà∞ÁöÑÁ¨¨‰∏ÄÂè∞ÊúçÂä°Âô®Ôºâ‰πãÈó¥Êï∞ÊçÆÔºåÂÖ∂ÂÆÉ‰∏ç‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ‰∏ãÈù¢ËÄÉËôëÂè¶Â§ñ‰∏ÄÁßçÊÉÖÂÜµÔºåÂ¶ÇÊûúÂú®Á≥ªÁªü‰∏≠Â¢ûÂä†‰∏ÄÂè∞ÊúçÂä°Âô®Node XÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö Ê≠§Êó∂ÂØπË±°Object A„ÄÅB„ÄÅD‰∏çÂèóÂΩ±ÂìçÔºåÂè™ÊúâÂØπË±°CÈúÄË¶ÅÈáçÂÆö‰ΩçÂà∞Êñ∞ÁöÑNode X „ÄÇ ‰∏ÄËà¨ÁöÑÔºåÂú®‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ï‰∏≠ÔºåÂ¶ÇÊûúÂ¢ûÂä†‰∏ÄÂè∞ÊúçÂä°Âô®ÔºåÂàôÂèóÂΩ±ÂìçÁöÑÊï∞ÊçÆ‰ªÖ‰ªÖÊòØÊñ∞ÊúçÂä°Âô®Âà∞ÂÖ∂ÁéØÁ©∫Èó¥‰∏≠Ââç‰∏ÄÂè∞ÊúçÂä°Âô®ÔºàÂç≥Ê≤øÁùÄÈÄÜÊó∂ÈíàÊñπÂêëË°åËµ∞ÈÅáÂà∞ÁöÑÁ¨¨‰∏ÄÂè∞ÊúçÂä°Âô®Ôºâ‰πãÈó¥Êï∞ÊçÆÔºåÂÖ∂ÂÆÉÊï∞ÊçÆ‰πü‰∏ç‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇ Áªº‰∏äÊâÄËø∞Ôºå‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÂØπ‰∫éËäÇÁÇπÁöÑÂ¢ûÂáèÈÉΩÂè™ÈúÄÈáçÂÆö‰ΩçÁéØÁ©∫Èó¥‰∏≠ÁöÑ‰∏ÄÂ∞èÈÉ®ÂàÜÊï∞ÊçÆÔºåÂÖ∑ÊúâËæÉÂ•ΩÁöÑÂÆπÈîôÊÄßÂíåÂèØÊâ©Â±ïÊÄß„ÄÇ HashÁéØÁöÑÊï∞ÊçÆÂÄæÊñúÈóÆÈ¢ò ‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ïÂú®ÊúçÂä°ËäÇÁÇπÂ§™Â∞ëÊó∂ÔºåÂÆπÊòìÂõ†‰∏∫ËäÇÁÇπÂàÜÈÉ®‰∏çÂùáÂåÄËÄåÈÄ†ÊàêÊï∞ÊçÆÂÄæÊñúÔºàË¢´ÁºìÂ≠òÁöÑÂØπË±°Â§ßÈÉ®ÂàÜÈõÜ‰∏≠ÁºìÂ≠òÂú®Êüê‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÔºâÈóÆÈ¢òÔºå‰æãÂ¶ÇÁ≥ªÁªü‰∏≠Âè™Êúâ‰∏§Âè∞ÊúçÂä°Âô®ÔºåÂÖ∂ÁéØÂàÜÂ∏ÉÂ¶Ç‰∏ãÔºö Ê≠§Êó∂ÂøÖÁÑ∂ÈÄ†ÊàêÂ§ßÈáèÊï∞ÊçÆÈõÜ‰∏≠Âà∞Node A‰∏äÔºåËÄåÂè™ÊúâÊûÅÂ∞ëÈáè‰ºöÂÆö‰ΩçÂà∞Node B‰∏ä„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥ËøôÁßçÊï∞ÊçÆÂÄæÊñúÈóÆÈ¢òÔºå‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ïÂºïÂÖ•‰∫ÜËôöÊãüËäÇÁÇπÊú∫Âà∂ÔºåÂç≥ÂØπÊØè‰∏Ä‰∏™ÊúçÂä°ËäÇÁÇπËÆ°ÁÆóÂ§ö‰∏™ÂìàÂ∏åÔºåÊØè‰∏™ËÆ°ÁÆóÁªìÊûú‰ΩçÁΩÆÈÉΩÊîæÁΩÆ‰∏Ä‰∏™Ê≠§ÊúçÂä°ËäÇÁÇπÔºåÁß∞‰∏∫ËôöÊãüËäÇÁÇπ„ÄÇÂÖ∑‰ΩìÂÅöÊ≥ïÂèØ‰ª•Âú®ÊúçÂä°Âô®IPÊàñ‰∏ªÊú∫ÂêçÁöÑÂêéÈù¢Â¢ûÂä†ÁºñÂè∑Êù•ÂÆûÁé∞„ÄÇ ‰æãÂ¶Ç‰∏äÈù¢ÁöÑÊÉÖÂÜµÔºåÂèØ‰ª•‰∏∫ÊØèÂè∞ÊúçÂä°Âô®ËÆ°ÁÆó‰∏â‰∏™ËôöÊãüËäÇÁÇπÔºå‰∫éÊòØÂèØ‰ª•ÂàÜÂà´ËÆ°ÁÆó ‚ÄúNode A#1‚Äù„ÄÅ‚ÄúNode A#2‚Äù„ÄÅ‚ÄúNode A#3‚Äù„ÄÅ‚ÄúNode B#1‚Äù„ÄÅ‚ÄúNode B#2‚Äù„ÄÅ‚ÄúNode B#3‚ÄùÁöÑÂìàÂ∏åÂÄºÔºå‰∫éÊòØÂΩ¢ÊàêÂÖ≠‰∏™ËôöÊãüËäÇÁÇπÔºö ÂêåÊó∂Êï∞ÊçÆÂÆö‰ΩçÁÆóÊ≥ï‰∏çÂèòÔºåÂè™ÊòØÂ§ö‰∫Ü‰∏ÄÊ≠•ËôöÊãüËäÇÁÇπÂà∞ÂÆûÈôÖËäÇÁÇπÁöÑÊò†Â∞ÑÔºå‰æãÂ¶ÇÂÆö‰ΩçÂà∞‚ÄúNode A#1‚Äù„ÄÅ‚ÄúNode A#2‚Äù„ÄÅ‚ÄúNode A#3‚Äù‰∏â‰∏™ËôöÊãüËäÇÁÇπÁöÑÊï∞ÊçÆÂùáÂÆö‰ΩçÂà∞Node A‰∏ä„ÄÇËøôÊ†∑Â∞±Ëß£ÂÜ≥‰∫ÜÊúçÂä°ËäÇÁÇπÂ∞ëÊó∂Êï∞ÊçÆÂÄæÊñúÁöÑÈóÆÈ¢ò„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÈÄöÂ∏∏Â∞ÜËôöÊãüËäÇÁÇπÊï∞ËÆæÁΩÆ‰∏∫32ÁîöËá≥Êõ¥Â§ßÔºåÂõ†Ê≠§Âç≥‰ΩøÂæàÂ∞ëÁöÑÊúçÂä°ËäÇÁÇπ‰πüËÉΩÂÅöÂà∞Áõ∏ÂØπÂùáÂåÄÁöÑÊï∞ÊçÆÂàÜÂ∏É„ÄÇ ‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ïÁöÑJavaÂÆûÁé∞ HashUtilsÂ∑•ÂÖ∑Á±ª 1234567891011121314151617181920212223242526272829303132package com.springboot.whb.study.consistentHashing;/** * @author: whb * @description: HashÂ∑•ÂÖ∑Á±ª */public class HashUtils &#123; /** * ‰ΩøÁî®FNV1_32_HASHÁÆóÊ≥ïËÆ°ÁÆóÊúçÂä°Âô®ÁöÑHashÂÄº * * @param str * @return */ public static int getHash(String str) &#123; final int p = 16777619; int hash = (int) 2166136261L; for (int i = 0; i &lt; str.length(); i++) &#123; hash = (hash ^ str.charAt(i)) * p; &#125; hash += hash &lt;&lt; 13; hash ^= hash &gt;&gt; 7; hash += hash &lt;&lt; 3; hash ^= hash &gt;&gt; 17; hash += hash &lt;&lt; 5; // Â¶ÇÊûúÁÆóÂá∫Êù•ÁöÑÂÄº‰∏∫Ë¥üÊï∞ÂàôÂèñÂÖ∂ÁªùÂØπÂÄº if (hash &lt; 0) &#123; hash = Math.abs(hash); &#125; return hash; &#125;&#125; ‰∏çÂ∏¶ËôöÊãüËäÇÁÇπ ÂÖ∑‰Ωì‰ª£Á†Å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263package com.springboot.whb.study.consistentHashing;import java.util.SortedMap;import java.util.TreeMap;/** * @author: whb * @description: ‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ï--‰∏çÂ∏¶ËôöÊãüËäÇÁÇπÁöÑÂÆûÁé∞ */public class ConsistentHashingWithoutVirtualNode &#123; /** * ÂæÖÊ∑ªÂä†Âà∞HashÁéØÁöÑÊúçÂä°Âô® */ private static String[] servers = &#123;"127.0.0.1:7000", "127.0.0.1:7001", "127.0.0.1:7002", "127.0.0.1:7003", "127.0.0.1:7004"&#125;; /** * keyË°®Á§∫ÊúçÂä°Âô®ÁöÑHashÂÄºÔºåvalueË°®Á§∫ÊúçÂä°Âô® */ private static SortedMap&lt;Integer, String&gt; sortedMap = new TreeMap&lt;&gt;(); /** * ÂàùÂßãÂåñÔºåÂ∞ÜÊâÄÊúâÊúçÂä°Âô®ÊîæÂÖ•sortedMap */ static &#123; for (int i = 0; i &lt; servers.length; i++) &#123; int hash = HashUtils.getHash(servers[i]); System.out.println("[" + servers[i] + "]Âä†ÂÖ•ÈõÜÂêà‰∏≠, ÂÖ∂HashÂÄº‰∏∫Ôºö" + hash); sortedMap.put(hash, servers[i]); &#125; System.out.println(); &#125; /** * ÂæóÂà∞Â∫îÂΩìË∑ØÁî±Âà∞ÁöÑÁªìÁÇπ * * @param key * @return */ private static String getServer(String key) &#123; //ÂæóÂà∞ËØ•keyÁöÑhashÂÄº int hash = HashUtils.getHash(key); //ÂæóÂà∞Â§ß‰∫éËØ•HashÂÄºÁöÑÊâÄÊúâMap SortedMap&lt;Integer, String&gt; subMap = sortedMap.tailMap(hash); if (subMap.isEmpty()) &#123; //Â¶ÇÊûúÊ≤°ÊúâÊØîËØ•keyÁöÑhashÂÄºÂ§ßÁöÑÔºåÂàô‰ªéÁ¨¨‰∏Ä‰∏™nodeÂºÄÂßã Integer i = sortedMap.firstKey(); //ËøîÂõûÂØπÂ∫îÁöÑÊúçÂä°Âô® return sortedMap.get(i); &#125; else &#123; //Á¨¨‰∏Ä‰∏™KeyÂ∞±ÊòØÈ°∫Êó∂ÈíàËøáÂéªÁ¶ªnodeÊúÄËøëÁöÑÈÇ£‰∏™ÁªìÁÇπ Integer i = subMap.firstKey(); //ËøîÂõûÂØπÂ∫îÁöÑÊúçÂä°Âô® return subMap.get(i); &#125; &#125; public static void main(String[] args) &#123; String[] keys = &#123;"ÊñóÂ∏ù", "ÊñóÂú£", "ÊñóÂ∞ä", "ÊñóÂÆó", "ÊñóÁöá", "ÊñóÁéã", "ÊñóÁÅµ", "Â§ßÊñóÂ∏à", "ÊñóÂ∏à", "ÊñóËÄÖ"&#125;; for (String key : keys) &#123; System.out.println("[" + key + "]ÁöÑhashÂÄº‰∏∫Ôºö" + HashUtils.getHash(key) + ", Ë¢´Ë∑ØÁî±Âà∞ÁªìÁÇπ[" + getServer(key) + "]"); &#125; &#125;&#125; ÊµãËØïÁªìÊûú Â∏¶ËôöÊãüËäÇÁÇπ ÂÖ∑‰Ωì‰ª£Á†Å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114package com.springboot.whb.study.consistentHashing;import com.springboot.whb.study.common.util.StringUtils;import java.util.LinkedList;import java.util.List;import java.util.SortedMap;import java.util.TreeMap;/** * @author: whb * @description: ‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ï--Â∏¶ËôöÊãüËäÇÁÇπÁöÑÂÆûÁé∞ */public class ConsistentHashingWithVirtualNode &#123; /** * ÂæÖÊ∑ªÂä†Âà∞HashÁéØÁöÑÊúçÂä°Âô® */ private static String[] servers = &#123;"127.0.0.1:7000", "127.0.0.1:7001", "127.0.0.1:7002", "127.0.0.1:7003", "127.0.0.1:7004"&#125;; /** * ÁúüÂÆûËäÇÁÇπÂàóË°®ÔºåËÄÉËôëÂà∞ÊúçÂä°Âô®ÁöÑ‰∏äÁ∫ø„ÄÅ‰∏ãÁ∫øÔºåÂç≥Ê∑ªÂä†„ÄÅÂà†Èô§ÁöÑÂú∫ÊôØ‰ºöÊØîËæÉÈ¢ëÁπÅ */ private static List&lt;String&gt; realNodes = new LinkedList&lt;&gt;(); /** * ËôöÊãüËäÇÁÇπÔºåKeyË°®Á§∫ËôöÊãüËäÇÁÇπÁöÑHashÂÄºÔºåvalueË°®Á§∫ËôöÊãüËäÇÁÇπÁöÑÂêçÁß∞ */ private static SortedMap&lt;Integer, String&gt; virtualNodes = new TreeMap&lt;&gt;(); /** * ËôöÊãüËäÇÁÇπÁöÑÊï∞ÁõÆ */ private static final int VIRTUAL_NODES = 5; /** * ÂàùÂßãÂåñÔºåÂä†ÂÖ•ÁúüÂÆûËäÇÁÇπÂèäËôöÊãüËäÇÁÇπ */ static &#123; //ÂÖàÂ∞ÜÂéüÂßãÁöÑÊúçÂä°Âô®Ê∑ªÂä†Âà∞ÁúüÂÆûËäÇÁÇπÂàóË°® for (int i = 0; i &lt; servers.length; i++) &#123; realNodes.add(servers[i]); &#125; //Ê∑ªÂä†ËôöÊãüËäÇÁÇπÔºåÈÅçÂéÜÁúüÂÆûËäÇÁÇπÂàóË°® for (String str : realNodes) &#123; for (int i = 0; i &lt; VIRTUAL_NODES; i++) &#123; String virtualNodeName = str + "&amp;&amp;VN" + String.valueOf(i); setServer(virtualNodeName); &#125; &#125; System.out.println(); &#125; /** * Ê∑ªÂä†ËôöÊãüËäÇÁÇπ * * @param virtualNodeName */ private static void setServer(String virtualNodeName) &#123; setServer(virtualNodeName, null); &#125; /** * Ê∑ªÂä†ËôöÊãüËäÇÁÇπ * * @param virtualNodeName * @param hash */ private static void setServer(String virtualNodeName, Integer hash) &#123; hash = hash != null ? HashUtils.getHash(hash.toString()) : HashUtils.getHash(virtualNodeName); if (StringUtils.isBlank(virtualNodes.get(hash))) &#123; virtualNodes.put(hash, virtualNodeName); System.out.println("ËôöÊãüËäÇÁÇπ[" + virtualNodeName + "]Ë¢´Ê∑ªÂä†, hashÂÄº‰∏∫Ôºö" + hash); &#125; else &#123; //Ëß£ÂÜ≥HashÁ¢∞Êíû setServer(virtualNodeName, hash); &#125; &#125; /** * ÂæóÂà∞Â∫îÂΩìË∑ØÁî±Âà∞ÁöÑÁªìÁÇπ * * @param key * @return */ private static String getServer(String key) &#123; //ÂæóÂà∞ËØ•keyÁöÑhashÂÄº int hash = HashUtils.getHash(key); // ÂæóÂà∞Â§ß‰∫éËØ•HashÂÄºÁöÑÊâÄÊúâMap SortedMap&lt;Integer, String&gt; subMap = virtualNodes.tailMap(hash); String virtualNode; if (subMap.isEmpty()) &#123; //Â¶ÇÊûúÊ≤°ÊúâÊØîËØ•keyÁöÑhashÂÄºÂ§ßÁöÑÔºåÂàô‰ªéÁ¨¨‰∏Ä‰∏™nodeÂºÄÂßã Integer i = virtualNodes.firstKey(); //ËøîÂõûÂØπÂ∫îÁöÑÊúçÂä°Âô® virtualNode = virtualNodes.get(i); &#125; else &#123; //Á¨¨‰∏Ä‰∏™KeyÂ∞±ÊòØÈ°∫Êó∂ÈíàËøáÂéªÁ¶ªnodeÊúÄËøëÁöÑÈÇ£‰∏™ÁªìÁÇπ Integer i = subMap.firstKey(); //ËøîÂõûÂØπÂ∫îÁöÑÊúçÂä°Âô® virtualNode = subMap.get(i); &#125; return virtualNode; &#125; public static void main(String[] args) &#123; String[] keys = &#123;"ÊñóÂ∏ù", "ÊñóÂú£", "ÊñóÂ∞ä", "ÊñóÂÆó", "ÊñóÁöá", "ÊñóÁéã", "ÊñóÁÅµ", "Â§ßÊñóÂ∏à", "ÊñóÂ∏à", "ÊñóËÄÖ"&#125;; for (String key : keys) &#123; String server = getServer(key); String realServer = server.split("&amp;&amp;VN")[0]; System.out.println("[" + key + "]ÁöÑhashÂÄº‰∏∫" + HashUtils.getHash(key) + ", Ë¢´Ë∑ØÁî±Âà∞ËôöÊãüÁªìÁÇπ[" + server + "]ÔºåË¢´Ë∑ØÁî±Âà∞ÁúüÂÆûËäÇÁÇπ[" + realServer + "]"); &#125; &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>ÂàÜÂ∏ÉÂºè</category>
      </categories>
      <tags>
        <tag>ÂàÜÂ∏ÉÂºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊâãÂÜôRPC-NIOÂ≠¶‰π†]]></title>
    <url>%2Fposts%2Fe4966bd.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ NIOÊòØJava1.4Êé®Âá∫ÁöÑ‰∏ÄÁßçÂÖ®Êñ∞ÁöÑIOÊ®°ÂûãÔºåÂÖ®Áß∞ÊòØjava non-blocking IOÔºåÊèê‰æõByteBufferÁ≠âÁºìÂ≠òÁöÑÂÆπÂô®ÔºåËææÂà∞ÈùûÈòªÂ°ûÂºèÁöÑÈ´ò‰º∏Áº©ÊÄßÁΩëÁªú„ÄÇ IOÊ®°Âûã IOÊ®°ÂûãÊòØÊú∫Âô®ËøõË°åIOÂÖ∑‰ΩìÊìç‰ΩúÊñπÊ≥ïÁöÑ‰∏ÄÁßçÊäΩË±°ÔºåÊØèÁßçIOÊ®°ÂûãÈÉΩÊúâÂêÑËá™ÁöÑ‰ºòÁº∫ÁÇπÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØË¶ÅÂÆåÊàêÂêÑÊ®°ÂûãÁöÑÂÆûÈôÖÂºÄÂèëÈúÄË¶ÅÊìç‰ΩúÁ≥ªÁªüÁöÑÊîØÊåÅÔºåÂú®Ê≤°Êúâpoll„ÄÅepollÂá∫Êù•‰πãÂâçÔºåjavaËøõË°åÈùûÈòªÂ°ûÂºèÁöÑËØªÂÜôÊìç‰ΩúÂæàÂ§çÊùÇÔºåËÄåÂΩì‰∏äËø∞ÂäüËÉΩÂá∫Áé∞‰πãÂêéÔºåjavaÊâçÂú®Âü∫‰∫éËØ•ÂäüËÉΩ‰∏äÊ∑ªÂä†‰∫ÜnioÊ®°ÂùóÔºåÂåÖÂêçÊòØjava.nioÔºåÁé∞Âú®Âú®Á±ªLinuxÊòØÂü∫‰∫éepollÂÆûÁé∞ÁöÑÔºåÁ±ªUnixÔºàÂåÖÂê´MacÔºâÊòØÂü∫‰∫ékqueue ÂÆûÁé∞ÁöÑ„ÄÇ Buffer ÊòØ‰∏ÄÁßçÁºìÂÜ≤Êï∞ÊçÆÁöÑÂÆπÂô®ÔºåÂèØ‰ª•Â≠òÂÇ®ÂêÑÁßçÂü∫Êú¨Á±ªÂûãÁöÑÊï∞ÊçÆ„ÄÇÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÔºåÊï∞ÊçÆÁªìÊûÑÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö Á±ª‰ºº‰∫é‰∏Ä‰∏™Êï∞ÁªÑÔºåÂÖ∂‰∏≠capacity‰∏∫ÁºìÂÜ≤Êï∞ÁªÑÁöÑÈïøÂ∫¶Ôºå‰∏∫Âõ∫ÂÆöÁöÑÂÄºÔºõ postionË°®Á§∫‰∏ã‰∏Ä‰∏™ÈúÄË¶ÅÊìç‰ΩúÁöÑ‰ΩçÁΩÆÔºõ limit‰∏∫‰∏ã‰∏Ä‰∏™‰∏çÂèØÊìç‰ΩúÁöÑ‰ΩçÁΩÆÔºõ ÂêÑÁßçÊï∞ÊçÆÁöÑÂ§ßÂ∞èÂÖ≥Á≥ªÊòØ0&lt;=position&lt;=limit&lt;=capacity put ÂÜôÂÖ•Êï∞ÊçÆÔºåÊØèÊ¨°ÂÜôÂÖ•Êï∞ÊçÆÁöÑÂú∞ÊñπÈÉΩÊòØpostionÔºåÂ∞±‰ºö‰ΩøÂæópostionÁöÑÂÄºÂèòÂ§ßÔºåÂΩìÁõ¥Âà∞Â°´ÂÖÖÁöÑÊï∞ÊçÆÈïøÂ∫¶Ë∂ÖËøá‰∫ÜÊï∞ÁªÑÁöÑÈïøÂ∫¶Ôºå‰ºöÊäõÂá∫BufferOverflowExceptionÂºÇÂ∏∏Ôºõ get ËØªÂèñÊï∞ÊçÆ ÊØèÊ¨°‰πü‰ºöËøõË°åpostion+1Êìç‰Ωú,ËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÂà∞ÊØèÊ¨°ËØªÂèñÊï∞ÊçÆ‰πãÂâçÂøÖÈ°ªËøõË°åclearÊìç‰ΩúË¶Å‰∏çÁÑ∂‰ºöÂá∫Áé∞Êï∞ÊçÆÈîôËØØÁöÑÈóÆÈ¢òÔºåÂ¶Ç‰∏ã‰ΩøÁî®‰æãÂ≠êÔºö ÈîôËØØÁ§∫‰æã Ê≠£Á°ÆÁ§∫‰æã clear() Ê∏ÖÁ©∫ÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆÔºåÂÆûÈôÖ‰∏äÊòØÂÅáÊ∏ÖÈô§ÔºåÂè™ÊòØÂ∞ÜpostionÁΩÆ‰Ωç0ÔºålimitÁΩÆ‰ΩçcapacityÔºõ Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456public final Buffer clear() &#123; position = 0; limit = capacity; mark = -1; return this;&#125; allocate(int n) Áî≥ËØ∑ÁºìÂÜ≤Âå∫ÔºåÂ§ßÂ∞èÁî±ÂèÇÊï∞ÂÜ≥ÂÆö; wrap(byte[] byets) ÂêåÊ†∑ÊòØÁî≥ËØ∑ÁºìÂÜ≤Âå∫Ôºå‰º†ÂÖ•ÁöÑÂèÇÊï∞Âç¥ÊòØbyte[],Áõ∏ÂΩì‰∫éËÆæÁΩÆÁöÑÁºìÂÜ≤Âå∫Â§ßÂ∞èÊòØbyteÊï∞ÁªÑÁöÑÈïøÂ∫¶ÔºåÁÑ∂ÂêéÂàùÂßãÂåñËÆæÁΩÆ‰∫ÜËØ•ÁºìÂÜ≤ÂÆπÂô®ÁöÑÂÄº; flip() ÂàáÊç¢Âà∞ËØªÊ®°ÂºèÔºå‰øÆÊîπlimit‰∏∫postionÔºåposition‰∏∫0; hasRemaining() Êü•ÁúãÊòØÂê¶ËøòÊúâÊï∞ÊçÆÂèØËØª return position &lt; limit; ‰∏ÄËà¨ÁöÑ‰ΩøÁî®Â•óË∑ØÈÉΩÊòØ: 12345678ByteBuffer byteBuffer = ByteBuffer.allocate(10);byteBuffer.clear(); // Ê∏ÖÁ©∫byteBuffer.put("hello".getBytes()); // ÂÜôÂÖ•Êï∞ÊçÆbyteBuffer.flip(); // ËØªÊï∞ÊçÆ‰πãÂâçÁöÑÂøÖÂ§áÊìç‰Ωúwhile (byteBuffer.hasRemaining())&#123; // Êï∞ÊçÆÊòØÂê¶ËØªÂèñÂÆåÊØï System.out.print(byteBuffer.get() + "\t" ); // ËØªÂèñÊï∞ÊçÆ&#125;System.out.println(); Channel ChannelÈÄöÈÅìÔºåÂíåpipeline‰∏Ä‰∏™ÊÑèÊÄùÔºåÁ±ª‰ºº‰∫éIOÁöÑStreamÔºåÂè™ÊòØstreamÊòØÂçïÂêëÔºåË¶Å‰πàÊòØInputË¶Å‰πàÊòØOutputÔºåËÄåChannelÊòØÂèåÂêëÁöÑÔºå‰πüÂ∞±ÊÑèÂë≥ÁùÄÂèØ‰ª•ÈÄöËøá‰∏Ä‰∏™channelËøõË°åËØªÂÜôÊìç‰Ωú‰∫Ü„ÄÇ‰∏çËøáÈúÄË¶ÅÊ≥®ÊÑèÂèØ‰ª•ËØªÂÜôÊìç‰ΩúÂíåËÉΩ‰∏çËÉΩËØªÂÜôÊìç‰ΩúËøôÊòØ‰∏§Âõû‰∫ã„ÄÇ NioÁöÑchannelÂÖ∑‰ΩìÂÆûÁé∞‰∏ªË¶Å‰∏∫FileChannel„ÄÅDatagramChannel„ÄÅSocketChannel„ÄÅServerSocketChannelÂõõÁßçÔºåÂàÜÂà´ÂØπÂ∫îÁöÑÊòØÊñá‰ª∂„ÄÅUDPÂíåTCPÁöÑÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´Ø„ÄÇÈáçÁÇπ‰ªãÁªçSocketChannleÂíåServerSocketChannel„ÄÇ SocketChannel Socketchannel ÊòØÂÆ¢Êà∑Á´ØÔºåËøûÊé•‰∏Ä‰∏™ÂàõÂª∫Â•ΩÁöÑTCPÁΩëÁªúÂ•óÊé•Â≠óÁöÑÈÄöÈÅìÔºåÂèØÊúâ‰∏§ÁßçÂàõÂª∫ÊñπÂºè Êñ∞Âª∫‰∏Ä‰∏™socketchannelÔºåÂπ∂ËøûÊé•Âà∞ÊúçÂä°Âô®‰∏ä; 123SocketChannel socketChannel = SocketChannel.open();// ËøûÊé•Âà∞Êú¨Âú∞ÁöÑ8081Á´ØÂè£ÁöÑÊúçÂä°Âô®‰∏äsocketChannel.connect(new InetSocketAddress(8081)); ÊúçÂä°Âô®Êé•Êî∂Âà∞Êù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÊé•Êî∂Âà∞ÁöÑ 12345// ÊúçÂä°Á´ØÊé•Êî∂Âà∞ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑ‰ø°ÊÅØÔºåÈÄöËøáaccpetÂç≥ÂèØËé∑ÂèñÂØπÂ∫îÁöÑsocketChannelSocketChannel socketChannel = serverSocketChannel.accept();// ÂÖ≥Èó≠socketChannelÔºåÁî±‰∫éÂÖ∂‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåÊúÄÂ•ΩÊòØÊîæÂú®finallyÈáåÈù¢ÔºåÂπ∂‰∏îÂÅöÂ•ΩÁ©∫Âà§Êñ≠‰ª•ÂèäÂºÇÂ∏∏ÊçïËé∑socketChannel.close(); Áî±‰∏äÂõæÊâÄÁ§∫ÔºåÈúÄË¶Å‰ªéchannelËØªÊï∞ÊçÆÔºå‰ª•ÂèäÂêëÂ§ñÂèëÈÄÅÊï∞ÊçÆÈÉΩÈúÄË¶Å‰ΩøÁî®buffer‰Ωú‰∏∫ÁºìÂÜ≤ÂÆπÂô® 12345678910111213141516171819// ËØªÊï∞ÊçÆByteBuffer byteBuffer = ByteBuffer.allocate(1024);// read ÊñπÊ≥ï‰ºöËøîÂõûËØªÂèñ‰∫ÜÂ§öÂ∞ëÊï∞ÊçÆÂà∞buffer‰∏≠ÔºåËøîÂõû-1Ë°®Á§∫Êï∞ÊçÆ‰ª•ÂèäËØªÂèñÂÆåÊØïÔºåÂèØ‰ª•ÂÖ≥Èó≠ÈÄöÈÅì‰∫Üint count = socketChannel.read(byteBuffer);// ÂÜôÊï∞ÊçÆString message = "Hello World!";// Áõ¥Êé•Ë∞ÉÁî®writeÊñπÊ≥ïÂÜôÂÖ•Áõ∏ÂÖ≥ÁöÑbytebufferÊï∞ÁªÑsocketChannel.write(message.getBytes());// ÂÜôÊï∞ÊçÆÊñπÊ≥ï2String message = "Hello World!";ByteBuffer byteBuffer = ByteBuffer.allocate(1024);byteBuffer.clear();byetBuffer.put(message.getBytes());byetBuffer.flip();while(byteBuffer.hasRemaing())&#123; socketChannel.write(byetBuffer);&#125; Áî±‰∫éÂÖ∂‰∏∫ÂºÇÊ≠•Ê®°ÂºèÔºåÂú®ÂÖ∂Ë∞ÉÁî®connect()ÊñπÊ≥ïÁöÑÊó∂ÂÄôÊòØÁ´ãÂç≥ËøîÂõûÁªìÊûúÔºåËøûÊé•ÊàêÂäüËøîÂõûtrueÔºåËøûÊé•‰∏çÊàêÂäüËøîÂõûfalseÔºåÂπ∂ÁªßÁª≠ËøõË°åËøûÊé•ÔºàÊúçÂä°Ëá™‰∏ªÊìç‰ΩúÔºâÔºåÂ≠òÂú®ËøòÊú™Âª∫Á´ãËøûÊé•Â∞±ËøîÂõû‰∫ÜÔºåÊâÄ‰ª•Âú®‰ΩøÁî®ÊúçÂä°Á´ØÊï∞ÊçÆÁöÑÊó∂ÂÄôÂÜçË∞ÉÁî®finishConnect()Á°Æ‰øùÈìæÊé•ÁöÑÂª∫Á´ã: 12345678SocketChannel socketChannel = SocketChannel.open();socketChannel.configureBlocking (false); // ‰∏ÄÂÆöË¶ÅËÆæÁΩÆËØ•ÂÜÖÂÆπsocketChannel.connect(new InetSocketAddress(8081)); while(!socketChannel.finishConnect())&#123; ..... // Êó•ÂøóÊâìÂç∞Á≠âÊìç‰ΩúÔºåÁõ¥Âà∞ËøûÊé•ÊàêÂäü&#125;// ËøôÊòØÈòªÂ°ûÊ®°ÂºèÁöÑ// ËøûÊé•ÊàêÂäüÔºåÂèØ‰ª•ËøõË°åËØªÂÜôÊìç‰Ωú‰∫Ü ÂèØ‰ª•ÈÄöËøáÊñπÊ≥ïisConnectionPending()ÁöÑËøîÂõûÂÄºÁ°ÆËÆ§ÊòØÂê¶Â§Ñ‰∫éËøûÊé•‰∏≠„ÄÇ ServerSocketChannel ServerSocketChannel ÊòØÂ∫îÁî®Âú®ÊúçÂä°Á´ØÁöÑÔºåÂíåSocketchannelÁõ∏ÂØπÂ∫îÔºå‰∏ªË¶ÅÊòØÁî®Êù•ÁõëÂê¨Êñ∞Êù•ÁöÑTCPËØ∑Ê±ÇÁöÑ‰∏Ä‰∏™ÈÄöÈÅì„ÄÇÁªëÂÆöÁöÑÊú¨Âú∞Á´ØÂè£ÔºåIPÊòØÊú¨Êú∫IP„ÄÇÂàõÂª∫ÊñπÂºèÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142ServerSocketChannel serverSocketChannel = ServerSocketChannel.open();serverSocketChannel.socket().bind(new InetSocketAddress(8081));// ÈÄöËøáÂØπËØ•channelÊåÅÊúâÁöÑsocketËøõË°åÁªëÂÆöÁ´ØÂè£Êìç‰Ωú// ‰πãÂâçÂæàÂ•áÊÄ™‰∏Ä‰∏™ÈóÆÈ¢òÔºåËøô‰∏™Áõ¥Êé•Ë∞ÉÁî®socket().bind‰∏ç‰ºöÊúâÁ©∫ÊåáÈíà‰πàÔºüËÇØÂÆö‰∏ç‰ºöÊúâËøô‰∏™ÈîôËØØÁöÑ// Âú®Ë∞ÉÁî®socket()ÔºåÂ¶ÇÊûúÂèëÁé∞ÂÖ∂ÂÜÖÁΩÆÁöÑsocket‰∏∫nullÔºåÂ∞±‰ºöÁîüÊàê‰∏Ä‰∏™socketÁöÑÈÄÇÈÖçÂèÇÊï∞ÊõøÊç¢nullclass ServerSocketChannelImpl extends ServerSocketChannel implements SelChImpl &#123; private static NativeDispatcher nd; private final FileDescriptor fd; private int fdVal; private volatile long thread = 0L; private final Object lock = new Object(); private final Object stateLock = new Object(); private static final int ST_UNINITIALIZED = -1; private static final int ST_INUSE = 0; private static final int ST_KILLED = 1; private int state = -1; private InetSocketAddress localAddress; private boolean isReuseAddress; ServerSocket socket; // Ëøô‰∏™Â∞±ÊòØË∞ÉÁî®socketÂèñÂæóÁöÑÊï∞ÊçÆ public ServerSocket socket() &#123; Object var1 = this.stateLock; synchronized (this.stateLock) &#123; if (this.socket == null) &#123; this.socket = ServerSocketAdaptor.create(this); &#125; return this.socket; &#125; &#125;&#125;public class ServerSocketAdaptor extends ServerSocket &#123; private final ServerSocketChannelImpl ssc; private volatile int timeout = 0; public static ServerSocket create(ServerSocketChannelImpl var0) &#123; try &#123; return new ServerSocketAdaptor(var0); &#125; catch (IOException var2) &#123; throw new Error(var2); &#125; &#125;&#125; Selector selector ÊòØnio‰∏≠ËÉΩÂ§üÁÆ°ÁêÜÂ§ö‰∏™channelÈÄöÈÅìÂπ∂ÊÑüÁü•ÂêÑ‰∏™ÈÄöÈÅìÁöÑËØªÂÜôÁä∂ÊÄÅÁöÑ‰∏Ä‰∏™ÁªÑ‰ª∂ÔºåÂèØ‰ª•‰ΩøÁî®ÂçïÁ∫øÁ®ãÁÆ°ÁêÜÂ§ö‰∏™channelÁöÑ‰ªéËÄåÂêåÊó∂Â§ÑÁêÜÂ§ö‰∏™ÁΩëÁªúËØ∑Ê±Ç„ÄÇselectorÂíåchannelÊòØÈÄöËøáselectorkeyÁªëÂÆöÁöÑ 12345678// ÂàõÂª∫‰∏Ä‰∏™selectorSelector selector = Selector.open();// ÂàõÂª∫serversocketChannelÂπ∂ÁªëÂÆöÁ´ØÂè£ServerSocketChannel serverSocketChannel ..... // ËÆæÁΩÆ‰∏∫ÈùûÈòªÂ°ûÊ®°ÂºèServerSocketChannel.configureBlocking(false); // registerÁªëÂÆöselectorÂíåchannelÂà∞‰∏Ä‰∏™ÂØπË±°SelectionKey‰∏≠SelectionKey key = channel.register(selector,Selectionkey.OP_READ); Ê≥®ÊÑèregister()ÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞„ÄÇËøôÊòØ‰∏Ä‰∏™‚ÄúinterestÈõÜÂêà‚ÄùÔºåÊÑèÊÄùÊòØÂú®ÈÄöËøáSelectorÁõëÂê¨ChannelÊó∂ÂØπ‰ªÄ‰πà‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£„ÄÇÂèØ‰ª•ÁõëÂê¨ÂõõÁßç‰∏çÂêåÁ±ªÂûãÁöÑ‰∫ã‰ª∂Ôºö Selectionkey.Connect ÂèØ‰ª•ËøûÊé• ÔºàÂÆ¢Êà∑Á´ØÊé•Êî∂Âà∞ÂèØËøûÊé•Âà∞ËØ∑Ê±ÇÔºâ; Selectionkey.Accept ÂèØ‰ª•Êé•Âèó ÔºàÊúçÂä°Á´ØÊé•Âà∞ÂÆ¢Êà∑Á´ØËøûÊé•ÁöÑËØ∑Ê±ÇÔºâ; Selectionkey.Read ÂèØ‰ª•ËØªÂèñÊï∞ÊçÆ; Selectionkey.Write ÂèØ‰ª•ÂÜôÂÖ•Êï∞ÊçÆ; SelectionKey ÁªëÂÆöchannelÂíåselectorÁöÑÂØπË±°ÔºåËøòÂåÖÂê´ÊúâreadÈõÜÂêàÂíåinterestÈõÜÂêà(ÊÑüÂÖ¥Ë∂£ÔºåÂú®registerËÆæÁΩÆÁöÑÂÄº),ËøòÂèØ‰ª•ÈÄöËøáattachment()ÊñπÊ≥ïÁªëÂÆö‰∏Ä‰∫õÂÖ∂‰ªñÊï∞ÊçÆ„ÄÇÈÖçÂ•óÁöÑËøòÊúâÂà§Êñ≠ÂÖ∂Áä∂ÊÄÅÁöÑÊñπÊ≥ï 123456public class SelectionKeyImpl extends AbstractSelectionKey &#123; final SelChImpl channel; public final SelectorImpl selector; private int index; private volatile int interestOps; private int readyOps; ÈÄâÊã©ÈÄöÈÅì selector‰ªéÂ∑≤ÁªèÊ≥®ÂÜåÂ•ΩÁöÑchannel‰∏≠Ëé∑ÂèñÂ∑≤ÁªèÂáÜÂ§áÂ∞±Áª™ÁöÑÈÄöÈÅìËøõË°åÊìç‰ΩúÔºå‰ª•‰∏ã‰∏âÁßçÊòØËé∑ÂèñÈÄöÈÅìÁöÑÊñπÊ≥ï: int select() // ÈòªÂ°ûÊ®°ÂºèÔºåËá≥Â∞ëÊúâ‰∏Ä‰∏™ÂáÜÂ§áÂ∞±Áª™ÁöÑÈÄöÈÅìÊâçËøîÂõû int select(long timeout) // Âä†ÂÖ•Ë∂ÖÊó∂ËÆæÁΩÆ int selectNow() // ‰ºöÁ´ãÂç≥ËøîÂõûÔºåËøîÂõûÂΩìÂâçÂ∞±Áª™ÁöÑÈÄöÈÅì‰∏™Êï∞ selectedKeys()Ëé∑ÂèñÂΩìÂâçÂ∞±Áª™ÁöÑÈÄöÈÅìÈõÜÂêà close() ÂÖ≥Èó≠ÂΩìÂâçÁöÑselectorÔºå‰ΩøÂæóÁªëÂÆöÁöÑkeyÂÖ®ÈÉ®‰∏çÂèØÁî®Ôºå‰ΩÜÊòØÈÄöÈÅìÊú¨Ë∫´ËøòÊòØÂèØ‰ª•Ê≠£Â∏∏‰ΩøÁî®ÁöÑ 12345678910111213141516171819int count = selector.select();Iterator it = selector.selectedKeys().iterator();while (it.hasNext())&#123; SelectionKey selectionKey = (SelectionKey)it.next(); it.remove(); // Â§ÑÁêÜÂÆåÊàê‰∏Ä‰∏™keyÂ∞±ÁßªÈô§ÊéâÔºåÊó†ÈúÄÂÜçÊ¨°Â§ÑÁêÜ if(selectionKey.isAcceptable())&#123; ServerSocketChannel serverSocketChannel = (ServerSocketChannel) selectionKey.channel(); SocketChannel socketChannel = serverSocketChannel.accept(); socketChannel.configureBlocking(false); socketChannel.register(selector, SelectionKey.OP_READ); &#125; if(selectionKey.isReadable())&#123; SocketChannel socketChannel = (SocketChannel) selectionKey.channel(); createProcessor(socketChannel); socketChannel.register(selector, SelectionKey.OP_WRITE); selectionKey.cancel(); // ÂΩìÂâçkeyÂèñÊ∂àÊéâ‰∫ÜÔºå‰ΩÜÊòØÈÄöÈÅì‰æùÊóßÂèØÁî® &#125;&#125; DatagramChannel Êî∂ÂèëUTPÂåÖÁöÑÈÄöÈÅìÔºåÈÄÇÁî®‰∫éUTPÂçèËÆÆÔºåÂèëÈÄÅÂíåËØªÂèñÁöÑÊòØÁî®Êà∑Êï∞ÊçÆÊä• 123456DatagramChannel channel = DatagramChannel.open();channel.socket().bind(new InetSocketAddress(10002));// Âª∫Á´ã‰∫Ü‰∏Ä‰∏™Êú¨Âú∞10002Á´ØÂè£ÁöÑUTPÊúçÂä°Á´Øchannel.connect(new InetSocketAddress(10002));// ËøûÊé•‰∏Ä‰∏™IPÈªòËÆ§‰∏∫Êú¨Êú∫ÔºåÁ´ØÂè£‰∏∫10002ÊúçÂä°// ËØªÂÜôÂíå‰º†ÁªüÁöÑread„ÄÅwriteÁ±ª‰ºº]]></content>
      <categories>
        <category>RPC</category>
        <category>NIO</category>
      </categories>
      <tags>
        <tag>RPC</tag>
        <tag>NIO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedisÁü•ËØÜÁÇπÂ≠¶‰π†]]></title>
    <url>%2Fposts%2Fb1cc4593.html</url>
    <content type="text"><![CDATA[redis ÁÆÄ‰ªã RedisÊú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™Key-ValueÁ±ªÂûãÁöÑÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÔºåÊï¥‰∏™Êï∞ÊçÆÂ∫ìÁªüÁªüÂä†ËΩΩÂú®ÂÜÖÂ≠òÂΩì‰∏≠ËøõË°åÊìç‰ΩúÔºåÂÆöÊúüÈÄöËøáÂºÇÊ≠•Êìç‰ΩúÊääÊï∞ÊçÆÂ∫ìÊï∞ÊçÆflushÂà∞Á°¨Áõò‰∏äËøõË°å‰øùÂ≠ò„ÄÇ Âõ†‰∏∫ÊòØÁ∫ØÂÜÖÂ≠òÊìç‰ΩúÔºåRedisÁöÑÊÄßËÉΩÈùûÂ∏∏Âá∫Ëâ≤ÔºåÊØèÁßíÂèØ‰ª•Â§ÑÁêÜË∂ÖËøá 10‰∏áÊ¨°ËØªÂÜôÊìç‰ΩúÔºåÊòØÂ∑≤Áü•ÊÄßËÉΩÊúÄÂø´ÁöÑKey-Value DB„ÄÇÂèØÁî®‰∫éÁºìÂ≠ò„ÄÅ‰∫ã‰ª∂ÂèëÂ∏ÉÊàñËÆ¢ÈòÖ„ÄÅÈ´òÈÄüÈòüÂàóÁ≠âÂú∫ÊôØ„ÄÇ ËØ•Êï∞ÊçÆÂ∫ì‰ΩøÁî®ANSI CËØ≠Ë®ÄÁºñÂÜôÔºåÊîØÊåÅÁΩëÁªúÔºåÊèê‰æõÂ≠óÁ¨¶‰∏≤„ÄÅÂìàÂ∏å„ÄÅÂàóË°®„ÄÅÈòüÂàó„ÄÅÈõÜÂêàÁªìÊûÑÁõ¥Êé•Â≠òÂèñÔºåÂü∫‰∫éÂÜÖÂ≠òÔºåÂèØÊåÅ‰πÖÂåñ„ÄÇRedis ÂÜÖÁΩÆ‰∫Ü Â§çÂà∂ÔºàreplicationÔºâÔºåLUAËÑöÊú¨ÔºàLua scriptingÔºâÔºå LRUÈ©±Âä®‰∫ã‰ª∂ÔºàLRU evictionÔºâÔºå‰∫ãÂä°ÔºàtransactionsÔºâ Âíå‰∏çÂêåÁ∫ßÂà´ÁöÑ Á£ÅÁõòÊåÅ‰πÖÂåñÔºàpersistenceÔºâÔºå Âπ∂ÈÄöËøá RedisÂì®ÂÖµÔºàSentinelÔºâÂíåËá™Âä®ÂàÜÂå∫ÔºàClusterÔºâÊèê‰æõÈ´òÂèØÁî®ÊÄßÔºàhigh availabilityÔºâ„ÄÇ redisÁöÑÂ∫îÁî®Âú∫ÊôØÊúâÂì™‰∫õ 1„ÄÅ‰ºöËØùÁºìÂ≠òÔºàÊúÄÂ∏∏Áî®Ôºâ2„ÄÅÊ∂àÊÅØÈòüÂàóÔºåÊØîÂ¶ÇÊîØ‰ªò3„ÄÅÊ¥ªÂä®ÊéíË°åÊ¶úÊàñËÆ°Êï∞4„ÄÅÂèëÂ∏É„ÄÅËÆ¢ÈòÖÊ∂àÊÅØÔºàÊ∂àÊÅØÈÄöÁü•Ôºâ5„ÄÅÂïÜÂìÅÂàóË°®„ÄÅËØÑËÆ∫ÂàóË°®Á≠â ‰∏∫‰ªÄ‰πàË¶ÅÁî® redis ËÄå‰∏çÁî® map/guava ÂÅöÁºìÂ≠ò ÁºìÂ≠òÂàÜ‰∏∫Êú¨Âú∞ÁºìÂ≠òÂíåÂàÜÂ∏ÉÂºèÁºìÂ≠ò„ÄÇ ‰ª•java‰∏∫‰æãÔºå‰ΩøÁî®Ëá™Â∏¶ÁöÑmapÊàñËÄÖguavaÂÆûÁé∞ÁöÑÊòØÊú¨Âú∞ÁºìÂ≠òÔºåÊúÄ‰∏ªË¶ÅÁöÑÁâπÁÇπÊòØËΩªÈáè‰ª•ÂèäÂø´ÈÄüÔºåÁîüÂëΩÂë®ÊúüÈöèÁùÄ jvm ÁöÑÈîÄÊØÅËÄåÁªìÊùüÔºåÂπ∂‰∏îÂú®Â§öÂÆû‰æãÁöÑÊÉÖÂÜµ‰∏ãÔºåÊØè‰∏™ÂÆû‰æãÈÉΩÈúÄË¶ÅÂêÑËá™‰øùÂ≠ò‰∏Ä‰ªΩÁºìÂ≠òÔºåÁºìÂ≠ò‰∏çÂÖ∑Êúâ‰∏ÄËá¥ÊÄß„ÄÇ ‰ΩøÁî® redis Êàñ memcached ‰πãÁ±ªÁöÑÁß∞‰∏∫ÂàÜÂ∏ÉÂºèÁºìÂ≠òÔºåÂú®Â§öÂÆû‰æãÁöÑÊÉÖÂÜµ‰∏ãÔºåÂêÑÂÆû‰æãÂÖ±Áî®‰∏Ä‰ªΩÁºìÂ≠òÊï∞ÊçÆÔºåÁºìÂ≠òÂÖ∑Êúâ‰∏ÄËá¥ÊÄß„ÄÇÁº∫ÁÇπÊòØÈúÄË¶Å‰øùÊåÅ redis Êàñ memcachedÊúçÂä°ÁöÑÈ´òÂèØÁî®ÔºåÊï¥‰∏™Á®ãÂ∫èÊû∂ÊûÑ‰∏äËæÉ‰∏∫Â§çÊùÇ„ÄÇ redis Âíå memcached ÁöÑÂå∫Âà´ redisÊîØÊåÅÊõ¥‰∏∞ÂØåÁöÑÊï∞ÊçÆÁ±ªÂûãÔºàÊîØÊåÅÊõ¥Â§çÊùÇÁöÑÂ∫îÁî®Âú∫ÊôØÔºâÔºöRedis‰∏ç‰ªÖ‰ªÖÊîØÊåÅÁÆÄÂçïÁöÑk/vÁ±ªÂûãÁöÑÊï∞ÊçÆÔºåÂêåÊó∂ËøòÊèê‰æõlistÔºåsetÔºåzsetÔºåhashÁ≠âÊï∞ÊçÆÁªìÊûÑÁöÑÂ≠òÂÇ®„ÄÇmemcachedÊîØÊåÅÁÆÄÂçïÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåString„ÄÇRedisÊîØÊåÅÊï∞ÊçÆÁöÑÊåÅ‰πÖÂåñÔºåÂèØ‰ª•Â∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰øùÊåÅÂú®Á£ÅÁõò‰∏≠ÔºåÈáçÂêØÁöÑÊó∂ÂÄôÂèØ‰ª•ÂÜçÊ¨°Âä†ËΩΩËøõË°å‰ΩøÁî®,ËÄåMemecachedÊääÊï∞ÊçÆÂÖ®ÈÉ®Â≠òÂú®ÂÜÖÂ≠ò‰πã‰∏≠„ÄÇÈõÜÁæ§Ê®°ÂºèÔºömemcachedÊ≤°ÊúâÂéüÁîüÁöÑÈõÜÁæ§Ê®°ÂºèÔºåÈúÄË¶Å‰æùÈù†ÂÆ¢Êà∑Á´ØÊù•ÂÆûÁé∞ÂæÄÈõÜÁæ§‰∏≠ÂàÜÁâáÂÜôÂÖ•Êï∞ÊçÆÔºõ‰ΩÜÊòØredisÁõÆÂâçÊòØÂéüÁîüÊîØÊåÅclusterÊ®°ÂºèÁöÑÔºåredisÂÆòÊñπÂ∞±ÊòØÊîØÊåÅredis clusterÈõÜÁæ§Ê®°ÂºèÁöÑÔºåÊØîmemcachedÊù•ËØ¥Ë¶ÅÊõ¥Â•Ω„ÄÇMemcachedÊòØÂ§öÁ∫øÁ®ãÔºåÈùûÈòªÂ°ûIOÂ§çÁî®ÁöÑÁΩëÁªúÊ®°ÂûãÔºõRedis‰ΩøÁî®ÂçïÁ∫øÁ®ãÁöÑ(ÈÅøÂÖç‰∫ÜÈ¢ëÁπÅÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢)Â§öË∑Ø IO Â§çÁî®Ê®°Âûã„ÄÇ redis Âà†Èô§ËøáÊúüÊï∞ÊçÆ ÂÆöÊúüÂà†Èô§ÔºöredisÈªòËÆ§ÊòØÊØèÈöî 100ms Â∞±ÈöèÊú∫ÊäΩÂèñ‰∏Ä‰∫õËÆæÁΩÆ‰∫ÜËøáÊúüÊó∂Èó¥ÁöÑkeyÔºåÊ£ÄÊü•ÂÖ∂ÊòØÂê¶ËøáÊúüÔºåÂ¶ÇÊûúËøáÊúüÂ∞±Âà†Èô§„ÄÇÊ≥®ÊÑèËøôÈáåÊòØÈöèÊú∫ÊäΩÂèñÁöÑ„ÄÇ‰∏∫‰ªÄ‰πàË¶ÅÈöèÊú∫Âë¢Ôºü‰Ω†ÊÉ≥‰∏ÄÊÉ≥ÂÅáÂ¶Ç redis Â≠ò‰∫ÜÂá†ÂçÅ‰∏á‰∏™ key ÔºåÊØèÈöî100msÂ∞±ÈÅçÂéÜÊâÄÊúâÁöÑËÆæÁΩÆËøáÊúüÊó∂Èó¥ÁöÑ key ÁöÑËØùÔºåÂ∞±‰ºöÁªô CPU Â∏¶Êù•ÂæàÂ§ßÁöÑË¥üËΩΩÔºÅ ÊÉ∞ÊÄßÂà†Èô§ÔºöÂÆöÊúüÂà†Èô§ÂèØËÉΩ‰ºöÂØºËá¥ÂæàÂ§öËøáÊúü key Âà∞‰∫ÜÊó∂Èó¥Âπ∂Ê≤°ÊúâË¢´Âà†Èô§Êéâ„ÄÇÊâÄ‰ª•Â∞±Êúâ‰∫ÜÊÉ∞ÊÄßÂà†Èô§„ÄÇÂÅáÂ¶Ç‰Ω†ÁöÑËøáÊúü keyÔºåÈù†ÂÆöÊúüÂà†Èô§Ê≤°ÊúâË¢´Âà†Èô§ÊéâÔºåËøòÂÅúÁïôÂú®ÂÜÖÂ≠òÈáåÔºåÈô§Èùû‰Ω†ÁöÑÁ≥ªÁªüÂéªÊü•‰∏Ä‰∏ãÈÇ£‰∏™ keyÔºåÊâç‰ºöË¢´redisÁªôÂà†Èô§Êéâ„ÄÇËøôÂ∞±ÊòØÊâÄË∞ìÁöÑÊÉ∞ÊÄßÂà†Èô§Ôºå‰πüÊòØÂ§üÊáíÁöÑÂìàÔºÅ redis ÂÜÖÂ≠òÊ∑òÊ±∞Êú∫Âà∂ Redis Êèê‰æõ 6 ÁßçÊï∞ÊçÆÊ∑òÊ±∞Á≠ñÁï•Ôºö volatile-lruÔºö‰ªéÂ∑≤ËÆæÁΩÆËøáÊúüÊó∂Èó¥ÁöÑÊï∞ÊçÆÈõÜ(server.db[i].expires)‰∏≠ÊåëÈÄâÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÊ∑òÊ±∞„ÄÇvolatile-ttlÔºö‰ªéÂ∑≤ËÆæÁΩÆËøáÊúüÊó∂Èó¥ÁöÑÊï∞ÊçÆÈõÜ(server.db[i].expires)‰∏≠ÊåëÈÄâÂ∞ÜË¶ÅËøáÊúüÁöÑÊï∞ÊçÆÊ∑òÊ±∞„ÄÇvolatile-randomÔºö‰ªéÂ∑≤ËÆæÁΩÆËøáÊúüÊó∂Èó¥ÁöÑÊï∞ÊçÆÈõÜ(server.db[i].expires)‰∏≠‰ªªÊÑèÈÄâÊã©Êï∞ÊçÆÊ∑òÊ±∞„ÄÇallkeys-lruÔºöÂΩìÂÜÖÂ≠ò‰∏çË∂≥‰ª•ÂÆπÁ∫≥Êñ∞ÂÜôÂÖ•Êï∞ÊçÆÊó∂ÔºåÂú®ÈîÆÁ©∫Èó¥‰∏≠ÔºåÁßªÈô§ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑkey(Ëøô‰∏™ÊòØÊúÄÂ∏∏Áî®ÁöÑ)„ÄÇallkeys-randomÔºö‰ªéÊï∞ÊçÆÈõÜ(server.db[i].dict)‰∏≠‰ªªÊÑèÈÄâÊã©Êï∞ÊçÆÊ∑òÊ±∞„ÄÇno-envictionÔºöÁ¶ÅÊ≠¢È©±ÈÄêÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØËØ¥ÂΩìÂÜÖÂ≠ò‰∏çË∂≥‰ª•ÂÆπÁ∫≥Êñ∞ÂÜôÂÖ•Êï∞ÊçÆÊó∂ÔºåÊñ∞ÂÜôÂÖ•Êìç‰Ωú‰ºöÊä•Èîô„ÄÇËøô‰∏™Â∫îËØ•Ê≤°‰∫∫‰ΩøÁî®Âêß! redisÊ∑òÊ±∞Êï∞ÊçÆÊó∂Ëøò‰ºöÂêåÊ≠•Âà∞aof„ÄÇ redis ÊåÅ‰πÖÂåñÊú∫Âà∂ Redis ÁöÑ‰∏ÄÁßçÊåÅ‰πÖÂåñÊñπÂºèÂè´Âø´ÁÖß(snapshottingÔºåRDB)ÔºåÂè¶‰∏ÄÁßçÊñπÂºèÊòØÂè™ËøΩÂä†Êñá‰ª∂(append-only fileÔºåAOF)„ÄÇ Âø´ÁÖß(snapshotting)ÊåÅ‰πÖÂåñ(RDB) Redis ÂèØ‰ª•ÈÄöËøáÂàõÂª∫Âø´ÁÖßÊù•Ëé∑ÂæóÂ≠òÂÇ®Âú®ÂÜÖÂ≠òÈáåÈù¢ÁöÑÊï∞ÊçÆÂú®Êüê‰∏™Êó∂Èó¥ÁÇπ‰∏äÁöÑÂâØÊú¨„ÄÇ Redis ÂàõÂª∫Âø´ÁÖß‰πãÂêéÔºåÂèØ‰ª•ÂØπÂø´ÁÖßËøõË°åÂ§á‰ªΩÔºåÂèØ‰ª•Â∞ÜÂø´ÁÖßÂ§çÂà∂Âà∞ÂÖ∂‰ªñÊúçÂä°Âô®‰ªéËÄåÂàõÂª∫ÂÖ∑ÊúâÁõ∏ÂêåÊï∞ÊçÆÁöÑÊúçÂä°Âô®ÂâØÊú¨(Redis ‰∏ª‰ªéÁªìÊûÑÔºå‰∏ªË¶ÅÁî®Êù•ÊèêÈ´ò Redis ÊÄßËÉΩ)ÔºåËøòÂèØ‰ª•Â∞ÜÂø´ÁÖßÁïôÂú®ÂéüÂú∞‰ª•‰æøÈáçÂêØÊúçÂä°Âô®ÁöÑÊó∂ÂÄô‰ΩøÁî®„ÄÇ Redis‰ºöÂçïÁã¨ÂàõÂª∫fork()‰∏Ä‰∏™Â≠êËøõÁ®ãÔºåÂ∞ÜÂΩìÂâçÁà∂ËøõÁ®ãÁöÑÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÂ§çÂà∂Âà∞Â≠êËøõÁ®ãÁöÑÂÜÖÂ≠ò‰∏≠ÔºåÁÑ∂ÂêéÁî±Â≠êËøõÁ®ãÂÜôÂÖ•Âà∞‰∏¥Êó∂Êñá‰ª∂‰∏≠ÔºåÊåÅ‰πÖÂåñÁöÑËøáÁ®ãÁªìÊùü‰∫ÜÔºåÂÜçÁî®Ëøô‰∏™‰∏¥Êó∂Êñá‰ª∂ÊõøÊç¢‰∏äÊ¨°ÁöÑÂø´ÁÖßÊñá‰ª∂ÔºåÁÑ∂ÂêéÂ≠êËøõÁ®ãÈÄÄÂá∫ÔºåÂÜÖÂ≠òÈáäÊîæ„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÊØèÊ¨°Âø´ÁÖßÊåÅ‰πÖÂåñÈÉΩ‰ºöÂ∞Ü‰∏ªËøõÁ®ãÁöÑÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÂ§çÂà∂‰∏ÄÈÅçÔºåÂØºËá¥ÂÜÖÂ≠òÂºÄÈîÄÂä†ÂÄçÔºåËã•Ê≠§Êó∂ÂÜÖÂ≠ò‰∏çË∂≥ÔºåÂàô‰ºöÈòªÂ°ûÊúçÂä°Âô®ËøêË°åÔºåÁõ¥Âà∞Â§çÂà∂ÁªìÊùüÈáäÊîæÂÜÖÂ≠òÔºõÈÉΩ‰ºöÂ∞ÜÂÜÖÂ≠òÊï∞ÊçÆÂÆåÊï¥ÂÜôÂÖ•Á£ÅÁõò‰∏ÄÊ¨°ÔºåÊâÄ‰ª•Â¶ÇÊûúÊï∞ÊçÆÈáèÂ§ßÁöÑËØùÔºåËÄå‰∏îÂÜôÊìç‰ΩúÈ¢ëÁπÅÔºåÂøÖÁÑ∂‰ºöÂºïËµ∑Â§ßÈáèÁöÑÁ£ÅÁõòI/OÊìç‰ΩúÔºå‰∏•ÈáçÂΩ±ÂìçÊÄßËÉΩÔºåÂπ∂‰∏îÊúÄÂêé‰∏ÄÊ¨°ÊåÅ‰πÖÂåñÂêéÁöÑÊï∞ÊçÆÂèØËÉΩ‰ºö‰∏¢Â§±Ôºõ Âø´ÁÖßÊåÅ‰πÖÂåñÊòØ Redis ÈªòËÆ§ÈááÁî®ÁöÑÊåÅ‰πÖÂåñÊñπÂºèÔºåÂú® redis.conf ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈªòËÆ§ÊúâÊ≠§‰∏ãÈÖçÁΩÆÔºö 12345save 900 1 #Âú®900Áßí(15ÂàÜÈíü)‰πãÂêéÔºåÂ¶ÇÊûúËá≥Â∞ëÊúâ1‰∏™keyÂèëÁîüÂèòÂåñÔºåRedisÂ∞±‰ºöËá™Âä®Ëß¶ÂèëBGSAVEÂëΩ‰ª§ÂàõÂª∫Âø´ÁÖß„ÄÇ save 300 10 #Âú®300Áßí(5ÂàÜÈíü)‰πãÂêéÔºåÂ¶ÇÊûúËá≥Â∞ëÊúâ10‰∏™keyÂèëÁîüÂèòÂåñÔºåRedisÂ∞±‰ºöËá™Âä®Ëß¶ÂèëBGSAVEÂëΩ‰ª§ÂàõÂª∫Âø´ÁÖß„ÄÇ save 60 10000 #Âú®60Áßí(1ÂàÜÈíü)‰πãÂêéÔºåÂ¶ÇÊûúËá≥Â∞ëÊúâ10000‰∏™keyÂèëÁîüÂèòÂåñÔºåRedisÂ∞±‰ºöËá™Âä®Ëß¶ÂèëBGSAVEÂëΩ‰ª§ÂàõÂª∫Âø´ÁÖß„ÄÇ ‰ºòÁÇπÔºö Âè™Êúâ‰∏Ä‰∏™Êñá‰ª∂dump.rdbÔºåÊñπ‰æøÊåÅ‰πÖÂåñ„ÄÇÂÆπÁÅæÊÄßÂ•ΩÔºå‰∏Ä‰∏™Êñá‰ª∂ÂèØ‰ª•‰øùÂ≠òÂà∞ÂÆâÂÖ®ÁöÑÁ£ÅÁõò„ÄÇÊÄßËÉΩÊúÄÂ§ßÂåñÔºåforkÂ≠êËøõÁ®ãÊù•ÂÆåÊàêÂÜôÊìç‰ΩúÔºåËÆ©‰∏ªËøõÁ®ãÁªßÁª≠Â§ÑÁêÜÂëΩ‰ª§ÔºåÊâÄ‰ª•ÊòØIOÊúÄÂ§ßÂåñ„ÄÇÁõ∏ÂØπ‰∫éÊï∞ÊçÆÈõÜÂ§ßÊó∂ÔºåÊØîAOFÁöÑÂêØÂä®ÊïàÁéáÊõ¥È´ò„ÄÇ Áº∫ÁÇπÔºö Êï∞ÊçÆÂÆâÂÖ®ÊÄß‰ΩéÔºåÈÄöËøáÈÖçÁΩÆsaveÂèÇÊï∞Êù•ËææÂà∞ÂÆöÊó∂ÁöÑÂÜôÂø´ÁÖßÔºåÊØîÂ¶Ç ÊØè900 ÁßíÊúâ1‰∏™ÈîÆË¢´‰øÆÊîπÂ∞±ËøõË°å‰∏ÄÊ¨°Âø´ÁÖßÔºåÊØè300ÁßíËá≥Â∞ëÊúâ10‰∏™ÈîÆË¢´‰øÆÊîπËøõË°åÂø´ÁÖßÔºåÊØè60ÁßíÊúâËá≥Â∞ë10000‰∏™ÈîÆË¢´‰øÆÊîπËøõË°åËÆ∞ÂΩï„ÄÇÊâÄ‰ª•Â¶ÇÊûúÂΩìÊúçÂä°Âô®ËøòÂú®Á≠âÂæÖÂÜôÂø´ÁÖßÊó∂Âá∫Áé∞‰∫ÜÂÆïÊú∫ÔºåÈÇ£‰πàÂ∞Ü‰ºö‰∏¢Â§±Êï∞ÊçÆ„ÄÇforkÂ≠êËøõÁ®ãÊó∂ÂèØËÉΩÂØºËá¥ÊúçÂä°Âô®ÂÅúÊú∫1ÁßíÔºåÊï∞ÊçÆÈõÜÂ§™Â§ß„ÄÇ AOF(append-only file)ÊåÅ‰πÖÂåñ ‰∏éÂø´ÁÖßÊåÅ‰πÖÂåñÁõ∏ÊØîÔºåAOF ÊåÅ‰πÖÂåñÁöÑÂÆûÊó∂ÊÄßÊõ¥Â•ΩÔºåÂõ†Ê≠§Â∑≤Êàê‰∏∫‰∏ªÊµÅÁöÑÊåÅ‰πÖÂåñÊñπÊ°à„ÄÇ ‰ª•Êó•ÂøóÁöÑÂΩ¢ÂºèËÆ∞ÂΩïÊØè‰∏™ÂÜôÊìç‰ΩúÔºàËØªÊìç‰Ωú‰∏çËÆ∞ÂΩïÔºâÔºåÂè™ÈúÄËøΩÂä†Êñá‰ª∂‰ΩÜ‰∏çÂèØ‰ª•ÊîπÂÜôÊñá‰ª∂ÔºåredisÂêØÂä®Êó∂‰ºöÊ†πÊçÆÊó•Âøó‰ªéÂ§¥Âà∞Â∞æÂÖ®ÈÉ®ÊâßË°å‰∏ÄÈÅç‰ª•ÂÆåÊàêÊï∞ÊçÆÁöÑÊÅ¢Â§çÂ∑•‰Ωú„ÄÇÂåÖÊã¨flushDB‰πü‰ºöÊâßË°å„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ã Redis Ê≤°ÊúâÂºÄÂêØ AOF(append only file)ÊñπÂºèÁöÑÊåÅ‰πÖÂåñÔºåÂèØ‰ª•ÈÄöËøá appendonly ÂèÇÊï∞ÂºÄÂêØÔºö 1appendonly yes ÂºÄÂêØ AOF ÊåÅ‰πÖÂåñÂêéÊØèÊâßË°å‰∏ÄÊù°‰ºöÊõ¥Êîπ Redis ‰∏≠ÁöÑÊï∞ÊçÆÁöÑÂëΩ‰ª§ÔºåRedis Â∞±‰ºöÂ∞ÜËØ•ÂëΩ‰ª§ÂÜôÂÖ•Á°¨Áõò‰∏≠ÁöÑ AOF Êñá‰ª∂„ÄÇ AOF Êñá‰ª∂ÁöÑ‰øùÂ≠ò‰ΩçÁΩÆÂíå RDB Êñá‰ª∂ÁöÑ‰ΩçÁΩÆÁõ∏ÂêåÔºåÈÉΩÊòØÈÄöËøá dir ÂèÇÊï∞ËÆæÁΩÆÁöÑÔºåÈªòËÆ§ÁöÑÊñá‰ª∂ÂêçÊòØ appendonly.aof„ÄÇ Âú® Redis ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Â≠òÂú®‰∏âÁßç‰∏çÂêåÁöÑ AOF ÊåÅ‰πÖÂåñÊñπÂºèÔºåÂÆÉ‰ª¨ÂàÜÂà´ÊòØÔºö 123appendfsync always #ÊØèÊ¨°ÊúâÊï∞ÊçÆ‰øÆÊîπÂèëÁîüÊó∂ÈÉΩ‰ºöÂÜôÂÖ•AOFÊñá‰ª∂,ËøôÊ†∑‰ºö‰∏•ÈáçÈôç‰ΩéRedisÁöÑÈÄüÂ∫¶ appendfsync everysec #ÊØèÁßíÈíüÂêåÊ≠•‰∏ÄÊ¨°ÔºåÊòæÁ§∫Âú∞Â∞ÜÂ§ö‰∏™ÂÜôÂëΩ‰ª§ÂêåÊ≠•Âà∞Á°¨Áõò appendfsync no #ËÆ©Êìç‰ΩúÁ≥ªÁªüÂÜ≥ÂÆö‰ΩïÊó∂ËøõË°åÂêåÊ≠• ‰∏∫‰∫ÜÂÖºÈ°æÊï∞ÊçÆÂíåÂÜôÂÖ•ÊÄßËÉΩÔºåÁî®Êà∑ÂèØ‰ª•ËÄÉËôë appendfsync everysec ÈÄâÈ°π ÔºåËÆ© Redis ÊØèÁßíÂêåÊ≠•‰∏ÄÊ¨° AOF Êñá‰ª∂ÔºåRedis ÊÄßËÉΩÂá†‰πéÊ≤°ÂèóÂà∞‰ªª‰ΩïÂΩ±Âìç„ÄÇ ËÄå‰∏îËøôÊ†∑Âç≥‰ΩøÂá∫Áé∞Á≥ªÁªüÂ¥©Ê∫ÉÔºåÁî®Êà∑ÊúÄÂ§öÂè™‰ºö‰∏¢Â§±‰∏ÄÁßí‰πãÂÜÖ‰∫ßÁîüÁöÑÊï∞ÊçÆ„ÄÇÂΩìÁ°¨ÁõòÂøô‰∫éÊâßË°åÂÜôÂÖ•Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåRedis Ëøò‰ºö‰ºòÈõÖÁöÑÊîæÊÖ¢Ëá™Â∑±ÁöÑÈÄüÂ∫¶‰ª•‰æøÈÄÇÂ∫îÁ°¨ÁõòÁöÑÊúÄÂ§ßÂÜôÂÖ•ÈÄüÂ∫¶„ÄÇ ‰ºòÁÇπÔºö Êï∞ÊçÆÂÆâÂÖ®ÔºåaofÊåÅ‰πÖÂåñÂèØ‰ª•ÈÖçÁΩÆappendfsyncÂ±ûÊÄßÔºåÊúâalwaysÔºåÊØèËøõË°å‰∏ÄÊ¨°ÂëΩ‰ª§Êìç‰ΩúÂ∞±ËÆ∞ÂΩïÂà∞aofÊñá‰ª∂‰∏≠‰∏ÄÊ¨°ÔºõeverySecÔºåÂ∞±ÊòØÊØèÁßíÂÜÖËøõË°å‰∏ÄÊ¨°Êñá‰ª∂ÁöÑÂÜôÊìç‰ΩúÔºõnoÂ∞±ÊòØ‰∏çËøõË°åaofÊñá‰ª∂ÁöÑÂÜôÊìç‰Ωú„ÄÇÈÄöËøáappendÊ®°ÂºèÂÜôÊñá‰ª∂ÔºåÂç≥‰Ωø‰∏≠ÈÄîÊúçÂä°Âô®ÂÆïÊú∫ÔºåÂèØ‰ª•ÈÄöËøáredis-check-aofÂ∑•ÂÖ∑Ëß£ÂÜ≥Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇAOFÊú∫Âà∂ÁöÑrewriteÊ®°ÂºèÔºåÁî®Êù•Â∞ÜËøáÂ§ßÁöÑaofÊñá‰ª∂Áº©Â∞èÔºåÂÆûÁé∞ÂéüÁêÜÊòØÂ∞ÜÊâÄÊúâÁöÑset ÈÄöËøá‰∏ÄÂè•set ÂëΩ‰ª§ÊÄªÁªìÔºåÊâÄÊúâÁöÑSADDÂëΩ‰ª§Áî®ÊÄªÁªì‰∏∫‰∏ÄÂè•ÔºåËøôÊ†∑ÊØèÁßçÂëΩ‰ª§ÈÉΩÊ¶ÇÊã¨‰∏∫‰∏ÄÂè•Êù•ÊâßË°åÔºåÂ∞±ÂèØ‰ª•ÂáèÂ∞ëaofÊñá‰ª∂ÁöÑÂ§ßÂ∞è‰∫Ü„ÄÇÔºàÊ≥®ÊÑèÔºåÂú®ÈáçÂÜôÁöÑËøáÁ®ã‰∏≠ÔºåÊòØÂàõÂª∫Â≠êËøõÁ®ãÊù•ÂÆåÊàêÈáçÂÜôÊìç‰ΩúÔºå‰∏ªËøõÁ®ãÊØè‰∏™ÂëΩ‰ª§ÈÉΩ‰ºöÂú®AOFÁºìÂÜ≤Âå∫ÂíåAOFÈáçÂÜôÁºìÂÜ≤Âå∫ËøõË°å‰øùÂ≠òÔºåËøôÊ†∑ÊóßÁâàaofÊñá‰ª∂ÂèØ‰ª•ÂÆûÁé∞Êï∞ÊçÆÊúÄÊñ∞ÔºåÂΩìÊõ¥Êñ∞ÂÆåÂêéÂ∞ÜÈáçÂÜôÁºìÂÜ≤Âå∫‰∏≠ÁöÑÊï∞ÊçÆÂÜôÂÖ•Êñ∞ÁöÑaofÊñá‰ª∂‰∏≠ÁÑ∂ÂêéÂ∞±ÂèØ‰ª•Â∞ÜÊñ∞ÁöÑÊñá‰ª∂ÊõøÊç¢ÊéâÊóßÁâàÁöÑÊñá‰ª∂„ÄÇÈªòËÆ§Ëß¶ÂèëÊòØÂΩìaofÊñá‰ª∂Â§ßÂ∞èÊòØ‰∏äÊ¨°ÈáçÂÜôÂêéÂ§ßÂ∞èÁöÑ‰∏ÄÂÄç‰∏îÊñá‰ª∂Â§ß‰∫é64MÊó∂Ëß¶Âèë„ÄÇ) Áº∫ÁÇπÔºö Êñá‰ª∂‰ºöÊØîRDBÂΩ¢ÂºèÁöÑÊñá‰ª∂Â§ß„ÄÇÊï∞ÊçÆÈõÜÂ§ßÁöÑÊó∂ÂÄôÔºåÊØîrdbÂêØÂä®ÊïàÁéá‰Ωé„ÄÇ ÊÄªÁªì ÂΩì‰∏§ÁßçÊñπÂºèÂêåÊó∂ÂºÄÂêØÊó∂ÔºåÊï∞ÊçÆÊÅ¢Â§çredis‰ºö‰ºòÂÖàÈÄâÊã©AOFÊÅ¢Â§ç„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂè™Ë¶Å‰ΩøÁî®ÈªòËÆ§ÂºÄÂêØÁöÑRDBÂç≥ÂèØÔºåÂõ†‰∏∫Áõ∏ÂØπ‰∫éAOFÔºåRDB‰æø‰∫éËøõË°åÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÔºåÂπ∂‰∏îÊÅ¢Â§çÊï∞ÊçÆÈõÜÁöÑÈÄüÂ∫¶‰πüË¶ÅÂø´ÂæàÂ§ö„ÄÇ ÂºÄÂêØÊåÅ‰πÖÂåñÁºìÂ≠òÊú∫Âà∂ÔºåÂØπÊÄßËÉΩ‰ºöÊúâ‰∏ÄÂÆöÁöÑÂΩ±ÂìçÔºåÁâπÂà´ÊòØÂΩìËÆæÁΩÆÁöÑÂÜÖÂ≠òÊª°‰∫ÜÁöÑÊó∂ÂÄôÔºåÊõ¥ÊòØ‰∏ãÈôçÂà∞Âá†Áôæreqs/s„ÄÇÊâÄ‰ª•Â¶ÇÊûúÂè™ÊòØÁî®Êù•ÂÅöÁºìÂ≠òÁöÑËØùÔºåÂèØ‰ª•ÂÖ≥ÊéâÊåÅ‰πÖÂåñ„ÄÇ Redis 4.0 ÂØπ‰∫éÊåÅ‰πÖÂåñÊú∫Âà∂ÁöÑ‰ºòÂåñ Redis 4.0 ÂºÄÂßãÊîØÊåÅ RDB Âíå AOF ÁöÑÊ∑∑ÂêàÊåÅ‰πÖÂåñ(ÈªòËÆ§ÂÖ≥Èó≠ÔºåÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆÈ°π aof-use-rdb-preamble ÂºÄÂêØ)„ÄÇ Â¶ÇÊûúÊääÊ∑∑ÂêàÊåÅ‰πÖÂåñÊâìÂºÄÔºåAOF ÈáçÂÜôÁöÑÊó∂ÂÄôÂ∞±Áõ¥Êé•Êää RDB ÁöÑÂÜÖÂÆπÂÜôÂà∞ AOF Êñá‰ª∂ÂºÄÂ§¥„ÄÇ ËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÂèØ‰ª•ÁªìÂêà RDB Âíå AOF ÁöÑ‰ºòÁÇπ, Âø´ÈÄüÂä†ËΩΩÂêåÊó∂ÈÅøÂÖç‰∏¢Â§±ËøáÂ§öÁöÑÊï∞ÊçÆ„ÄÇ ÂΩìÁÑ∂Áº∫ÁÇπ‰πüÊòØÊúâÁöÑÔºåAOF ÈáåÈù¢ÁöÑ RDB ÈÉ®ÂàÜÊòØÂéãÁº©Ê†ºÂºè‰∏çÂÜçÊòØ AOF Ê†ºÂºèÔºåÂèØËØªÊÄßËæÉÂ∑Æ„ÄÇ Sentinel ÔºàÂì®ÂÖµÔºâÂéüÁêÜ Âì®ÂÖµÁöÑÂäüËÉΩ ÁõëÊéßÔºàMonitoringÔºâÔºöÂì®ÂÖµ‰ºö‰∏çÊñ≠Âú∞Ê£ÄÊü•‰∏ªËäÇÁÇπÂíå‰ªéËäÇÁÇπÊòØÂê¶Ëøê‰ΩúÊ≠£Â∏∏„ÄÇ Ëá™Âä®ÊïÖÈöúËΩ¨ÁßªÔºàAutomatic failoverÔºâÔºöÂΩì‰∏ªËäÇÁÇπ‰∏çËÉΩÊ≠£Â∏∏Â∑•‰ΩúÊó∂ÔºåÂì®ÂÖµ‰ºöÂºÄÂßãËá™Âä®ÊïÖÈöúËΩ¨ÁßªÊìç‰ΩúÔºåÂÆÉ‰ºöÂ∞ÜÂ§±Êïà‰∏ªËäÇÁÇπÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™‰ªéËäÇÁÇπÂçáÁ∫ß‰∏∫Êñ∞ÁöÑ‰∏ªËäÇÁÇπÔºåÂπ∂ËÆ©ÂÖ∂‰ªñ‰ªéËäÇÁÇπÊîπ‰∏∫Â§çÂà∂Êñ∞ÁöÑ‰∏ªËäÇÁÇπ„ÄÇ ÈÖçÁΩÆÊèê‰æõËÄÖÔºàConfiguration providerÔºâÔºöÂÆ¢Êà∑Á´ØÂú®ÂàùÂßãÂåñÊó∂ÔºåÈÄöËøáËøûÊé•Âì®ÂÖµÊù•Ëé∑ÂæóÂΩìÂâç Redis ÊúçÂä°ÁöÑ‰∏ªËäÇÁÇπÂú∞ÂùÄ„ÄÇ ÈÄöÁü•ÔºàNotificationÔºâÔºöÂì®ÂÖµÂèØ‰ª•Â∞ÜÊïÖÈöúËΩ¨ÁßªÁöÑÁªìÊûúÂèëÈÄÅÁªôÂÆ¢Êà∑Á´Ø„ÄÇ Âì®ÂÖµÁ≥ªÁªü‰∏≠ÁöÑ‰∏ª‰ªéËäÇÁÇπÔºå‰∏éÊôÆÈÄöÁöÑ‰∏ª‰ªéËäÇÁÇπÂπ∂Ê≤°Êúâ‰ªÄ‰πàÂå∫Âà´ÔºåÊïÖÈöúÂèëÁé∞ÂíåËΩ¨ÁßªÊòØÁî±Âì®ÂÖµÊù•ÊéßÂà∂ÂíåÂÆåÊàêÁöÑ„ÄÇ Âì®ÂÖµËäÇÁÇπÊú¨Ë¥®‰∏äÊòØ Redis ËäÇÁÇπ„ÄÇ ÊØè‰∏™Âì®ÂÖµËäÇÁÇπÔºåÂè™ÈúÄË¶ÅÈÖçÁΩÆÁõëÊéß‰∏ªËäÇÁÇπÔºå‰æøÂèØ‰ª•Ëá™Âä®ÂèëÁé∞ÂÖ∂‰ªñÁöÑÂì®ÂÖµËäÇÁÇπÂíå‰ªéËäÇÁÇπ„ÄÇ Âú®Âì®ÂÖµËäÇÁÇπÂêØÂä®ÂíåÊïÖÈöúËΩ¨ÁßªÈò∂ÊÆµÔºåÂêÑ‰∏™ËäÇÁÇπÁöÑÈÖçÁΩÆÊñá‰ª∂‰ºöË¢´ÈáçÂÜô(config rewrite)„ÄÇ Âì®ÂÖµÁöÑÂéüÁêÜ ÂÆöÊó∂‰ªªÂä° ÊØè‰∏™Âì®ÂÖµËäÇÁÇπÁª¥Êä§‰∫Ü 3 ‰∏™ÂÆöÊó∂‰ªªÂä°ÔºåÂÆöÊó∂‰ªªÂä°ÁöÑÂäüËÉΩÂàÜÂà´Â¶Ç‰∏ãÔºö ÈÄöËøáÂêë‰∏ª‰ªéËäÇÁÇπÂèëÈÄÅ info ÂëΩ‰ª§Ëé∑ÂèñÊúÄÊñ∞ÁöÑ‰∏ª‰ªéÁªìÊûÑ„ÄÇÈÄöËøáÂèëÂ∏ÉËÆ¢ÈòÖÂäüËÉΩËé∑ÂèñÂÖ∂‰ªñÂì®ÂÖµËäÇÁÇπÁöÑ‰ø°ÊÅØ„ÄÇÈÄöËøáÂêëÂÖ∂‰ªñËäÇÁÇπÂèëÈÄÅ ping ÂëΩ‰ª§ËøõË°åÂøÉË∑≥Ê£ÄÊµãÔºåÂà§Êñ≠ÊòØÂê¶‰∏ãÁ∫ø„ÄÇ ‰∏ªËßÇ‰∏ãÁ∫ø Âú®ÂøÉË∑≥Ê£ÄÊµãÁöÑÂÆöÊó∂‰ªªÂä°‰∏≠ÔºåÂ¶ÇÊûúÂÖ∂‰ªñËäÇÁÇπË∂ÖËøá‰∏ÄÂÆöÊó∂Èó¥Ê≤°ÊúâÂõûÂ§çÔºåÂì®ÂÖµËäÇÁÇπÂ∞±‰ºöÂ∞ÜÂÖ∂ËøõË°å‰∏ªËßÇ‰∏ãÁ∫ø„ÄÇ È°æÂêçÊÄù‰πâÔºå‰∏ªËßÇ‰∏ãÁ∫øÁöÑÊÑèÊÄùÊòØ‰∏Ä‰∏™Âì®ÂÖµËäÇÁÇπ‚Äú‰∏ªËßÇÂú∞‚ÄùÂà§Êñ≠‰∏ãÁ∫øÔºõ‰∏é‰∏ªËßÇ‰∏ãÁ∫øÁõ∏ÂØπÂ∫îÁöÑÊòØÂÆ¢ËßÇ‰∏ãÁ∫ø„ÄÇ ÂÆ¢ËßÇ‰∏ãÁ∫ø Âì®ÂÖµËäÇÁÇπÂú®ÂØπ‰∏ªËäÇÁÇπËøõË°å‰∏ªËßÇ‰∏ãÁ∫øÂêéÔºå‰ºöÈÄöËøá sentinelis-master-down-by-addr ÂëΩ‰ª§ËØ¢ÈóÆÂÖ∂‰ªñÂì®ÂÖµËäÇÁÇπËØ•‰∏ªËäÇÁÇπÁöÑÁä∂ÊÄÅ„ÄÇ Â¶ÇÊûúÂà§Êñ≠‰∏ªËäÇÁÇπ‰∏ãÁ∫øÁöÑÂì®ÂÖµÊï∞ÈáèËææÂà∞‰∏ÄÂÆöÊï∞ÂÄºÔºåÂàôÂØπËØ•‰∏ªËäÇÁÇπËøõË°åÂÆ¢ËßÇ‰∏ãÁ∫ø„ÄÇ ÈúÄË¶ÅÁâπÂà´Ê≥®ÊÑèÁöÑÊòØÔºåÂÆ¢ËßÇ‰∏ãÁ∫øÊòØ‰∏ªËäÇÁÇπÊâçÊúâÁöÑÊ¶ÇÂøµÔºõÂ¶ÇÊûú‰ªéËäÇÁÇπÂíåÂì®ÂÖµËäÇÁÇπÂèëÁîüÊïÖÈöúÔºåË¢´Âì®ÂÖµ‰∏ªËßÇ‰∏ãÁ∫øÂêéÔºå‰∏ç‰ºöÂÜçÊúâÂêéÁª≠ÁöÑÂÆ¢ËßÇ‰∏ãÁ∫øÂíåÊïÖÈöúËΩ¨ÁßªÊìç‰Ωú„ÄÇ ÈÄâ‰∏æÈ¢ÜÂØºËÄÖÂì®ÂÖµËäÇÁÇπ ÂΩì‰∏ªËäÇÁÇπË¢´Âà§Êñ≠ÂÆ¢ËßÇ‰∏ãÁ∫ø‰ª•ÂêéÔºåÂêÑ‰∏™Âì®ÂÖµËäÇÁÇπ‰ºöËøõË°åÂçèÂïÜÔºåÈÄâ‰∏æÂá∫‰∏Ä‰∏™È¢ÜÂØºËÄÖÂì®ÂÖµËäÇÁÇπÔºåÂπ∂Áî±ËØ•È¢ÜÂØºËÄÖËäÇÁÇπÂØπÂÖ∂ËøõË°åÊïÖÈöúËΩ¨ÁßªÊìç‰Ωú„ÄÇ ÁõëËßÜËØ•‰∏ªËäÇÁÇπÁöÑÊâÄÊúâÂì®ÂÖµÈÉΩÊúâÂèØËÉΩË¢´ÈÄâ‰∏∫È¢ÜÂØºËÄÖÔºåÈÄâ‰∏æ‰ΩøÁî®ÁöÑÁÆóÊ≥ïÊòØ Raft ÁÆóÊ≥ï„ÄÇ Raft ÁÆóÊ≥ïÁöÑÂü∫Êú¨ÊÄùË∑ØÊòØÂÖàÂà∞ÂÖàÂæóÔºöÂç≥Âú®‰∏ÄËΩÆÈÄâ‰∏æ‰∏≠ÔºåÂì®ÂÖµ A Âêë B ÂèëÈÄÅÊàê‰∏∫È¢ÜÂØºËÄÖÁöÑÁî≥ËØ∑ÔºåÂ¶ÇÊûú B Ê≤°ÊúâÂêåÊÑèËøáÂÖ∂‰ªñÂì®ÂÖµÔºåÂàô‰ºöÂêåÊÑè A Êàê‰∏∫È¢ÜÂØºËÄÖ„ÄÇ ‰∏ÄËà¨Êù•ËØ¥ÔºåË∞ÅÂÖàÂÆåÊàêÂÆ¢ËßÇ‰∏ãÁ∫øÔºå‰∏ÄËà¨Â∞±ËÉΩÊàê‰∏∫È¢ÜÂØºËÄÖ„ÄÇ ÊïÖÈöúËΩ¨Áßª ÈÄâ‰∏æÂá∫ÁöÑÈ¢ÜÂØºËÄÖÂì®ÂÖµÔºåÂºÄÂßãËøõË°åÊïÖÈöúËΩ¨ÁßªÊìç‰ΩúÔºåËØ•Êìç‰ΩúÂ§ß‰ΩìÂèØ‰ª•ÂàÜ‰∏∫ 3 ‰∏™Ê≠•È™§Ôºö Âú®‰ªéËäÇÁÇπ‰∏≠ÈÄâÊã©Êñ∞ÁöÑ‰∏ªËäÇÁÇπÔºö ÈÄâÊã©ÁöÑÂéüÂàôÊòØÔºåÈ¶ñÂÖàËøáÊª§Êéâ‰∏çÂÅ•Â∫∑ÁöÑ‰ªéËäÇÁÇπÔºåÁÑ∂ÂêéÈÄâÊã©‰ºòÂÖàÁ∫ßÊúÄÈ´òÁöÑ‰ªéËäÇÁÇπ(Áî± slave-priority ÊåáÂÆö)„ÄÇ Â¶ÇÊûú‰ºòÂÖàÁ∫ßÊó†Ê≥ïÂå∫ÂàÜÔºåÂàôÈÄâÊã©Â§çÂà∂ÂÅèÁßªÈáèÊúÄÂ§ßÁöÑ‰ªéËäÇÁÇπÔºõÂ¶ÇÊûú‰ªçÊó†Ê≥ïÂå∫ÂàÜÔºåÂàôÈÄâÊã© runid ÊúÄÂ∞èÁöÑ‰ªéËäÇÁÇπ„ÄÇ Êõ¥Êñ∞‰∏ª‰ªéÁä∂ÊÄÅ: ÈÄöËøá slaveof no one ÂëΩ‰ª§ÔºåËÆ©ÈÄâÂá∫Êù•ÁöÑ‰ªéËäÇÁÇπÊàê‰∏∫‰∏ªËäÇÁÇπÔºõÂπ∂ÈÄöËøá slaveof ÂëΩ‰ª§ËÆ©ÂÖ∂‰ªñËäÇÁÇπÊàê‰∏∫ÂÖ∂‰ªéËäÇÁÇπ„ÄÇ Sentinel Ë¢´ÊéàÊùÉÂêéÔºåÂÆÉÂ∞Ü‰ºöËé∑ÂæóÂÆïÊéâÁöÑ master ÁöÑ‰∏Ä‰ªΩÊúÄÊñ∞ÈÖçÁΩÆÁâàÊú¨Âè∑ (config-epoch)ÔºåÂΩì failover ÊâßË°åÁªìÊùü‰ª•ÂêéÔºåËøô‰∏™ÁâàÊú¨Âè∑Â∞Ü‰ºöË¢´Áî®‰∫éÊúÄÊñ∞ÁöÑÈÖçÁΩÆÔºåÈÄöËøáÂπøÊí≠ÂΩ¢ÂºèÈÄöÁü•ÂÖ∂ÂÆÉ SentinelÔºåÂÖ∂ÂÆÉÁöÑ Sentinel ÂàôÊõ¥Êñ∞ÂØπÂ∫î master ÁöÑÈÖçÁΩÆ„ÄÇ redisÁöÑÂπ∂ÂèëÁ´û‰∫âkeyÈóÆÈ¢ò ÈóÆÈ¢òÊèèËø∞ ÂêåÊó∂ÊúâÂ§ö‰∏™Â≠êÁ≥ªÁªüÂéªset‰∏Ä‰∏™key„ÄÇËøô‰∏™Êó∂ÂÄôË¶ÅÊ≥®ÊÑè‰ªÄ‰πàÂë¢Ôºü ÁôæÂ∫¶‰∏Ä‰∏ãÂü∫Êú¨ÈÉΩÊòØÊé®ËçêÁî® Redis ‰∫ãÂä°Êú∫Âà∂„ÄÇ‰ΩÜÊòØÂπ∂‰∏çÊé®Ëçê‰ΩøÁî® Redis ÁöÑ‰∫ãÂä°Êú∫Âà∂„ÄÇÂõ†‰∏∫Áîü‰∫ßÁéØÂ¢ÉÔºåÂü∫Êú¨ÈÉΩÊòØ Redis ÈõÜÁæ§ÁéØÂ¢ÉÔºåÂÅö‰∫ÜÊï∞ÊçÆÂàÜÁâáÊìç‰Ωú„ÄÇ‰∏Ä‰∏™‰∫ãÂä°‰∏≠ÊúâÊ∂âÂèäÂà∞Â§ö‰∏™ Key Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåËøôÂ§ö‰∏™ Key ‰∏ç‰∏ÄÂÆöÈÉΩÂ≠òÂÇ®Âú®Âêå‰∏Ä‰∏™ redis-server ‰∏ä„ÄÇÂõ†Ê≠§ÔºåRedis ÁöÑ‰∫ãÂä°Êú∫Âà∂ÔºåÂçÅÂàÜÈ∏°ËÇã„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à Â¶ÇÊûúÂØπËøô‰∏™ Key Êìç‰ΩúÔºå‰∏çË¶ÅÊ±ÇÈ°∫Â∫è ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂáÜÂ§á‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÈîÅÔºåÂ§ßÂÆ∂ÂéªÊä¢ÈîÅÔºåÊä¢Âà∞ÈîÅÂ∞±ÂÅösetÊìç‰ΩúÂç≥ÂèØÔºåÊØîËæÉÁÆÄÂçï„ÄÇ Â¶ÇÊûúÂØπËøô‰∏™keyÊìç‰ΩúÔºåË¶ÅÊ±ÇÈ°∫Â∫è ÂÅáËÆæÊúâ‰∏Ä‰∏™key1,Á≥ªÁªüAÈúÄË¶ÅÂ∞Ükey1ËÆæÁΩÆ‰∏∫valueA,Á≥ªÁªüBÈúÄË¶ÅÂ∞Ükey1ËÆæÁΩÆ‰∏∫valueB,Á≥ªÁªüCÈúÄË¶ÅÂ∞Ükey1ËÆæÁΩÆ‰∏∫valueC. ÊúüÊúõÊåâÁÖßkey1ÁöÑvalueÂÄºÊåâÁÖß valueA‚Äì&gt;valueB‚Äì&gt;valueCÁöÑÈ°∫Â∫èÂèòÂåñ„ÄÇËøôÊó∂Âú®Êï∞ÊçÆÂÜôÂÖ•Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºåÈúÄË¶Å‰øùÂ≠ò‰∏Ä‰∏™Êó∂Èó¥Êà≥„ÄÇÂÅáËÆæÊó∂Èó¥Êà≥Â¶Ç‰∏ãÔºö 12345Á≥ªÁªüA key 1 &#123;valueA 3:00&#125;Á≥ªÁªüB key 1 &#123;valueB 3:05&#125;Á≥ªÁªüC key 1 &#123;valueC 3:10&#125; ÈÇ£‰πàÔºåÂÅáËÆæËøô‰ºöÁ≥ªÁªüBÂÖàÊä¢Âà∞ÈîÅÔºåÂ∞Ükey1ËÆæÁΩÆ‰∏∫{valueB 3:05}„ÄÇÊé•‰∏ãÊù•Á≥ªÁªüAÊä¢Âà∞ÈîÅÔºåÂèëÁé∞Ëá™Â∑±ÁöÑvalueAÁöÑÊó∂Èó¥Êà≥Êó©‰∫éÁºìÂ≠ò‰∏≠ÁöÑÊó∂Èó¥Êà≥ÔºåÈÇ£Â∞±‰∏çÂÅösetÊìç‰Ωú‰∫Ü„ÄÇ‰ª•Ê≠§Á±ªÊé®„ÄÇ ÂÖ∂‰ªñÊñπÊ≥ïÔºåÊØîÂ¶ÇÂà©Áî®ÈòüÂàóÔºåÂ∞ÜsetÊñπÊ≥ïÂèòÊàê‰∏≤Ë°åËÆøÈóÆ‰πüÂèØ‰ª•„ÄÇ ÁºìÂ≠òÈõ™Â¥© ÁÆÄ‰ªã ÁºìÂ≠òÂêå‰∏ÄÊó∂Èó¥Â§ßÈù¢ÁßØÁöÑÂ§±ÊïàÔºåÊâÄ‰ª•ÔºåÂêéÈù¢ÁöÑËØ∑Ê±ÇÈÉΩ‰ºöËêΩÂà∞Êï∞ÊçÆÂ∫ì‰∏äÔºåÈÄ†ÊàêÊï∞ÊçÆÂ∫ìÁü≠Êó∂Èó¥ÂÜÖÊâøÂèóÂ§ßÈáèËØ∑Ê±ÇËÄåÂ¥©Êéâ„ÄÇ ÈÄö‰øóÊù•ËØ¥Â∞±ÊòØÔºöÁî±‰∫éÂéüÊúâÁºìÂ≠òÂ§±ÊïàÔºàÊàñËÄÖÊï∞ÊçÆÊú™Âä†ËΩΩÂà∞ÁºìÂ≠ò‰∏≠ÔºâÔºåÊñ∞ÁºìÂ≠òÊú™Âà∞ÊúüÈó¥ÔºàÁºìÂ≠òÊ≠£Â∏∏‰ªéRedis‰∏≠Ëé∑ÂèñÔºâÊâÄÊúâÂéüÊú¨Â∫îËØ•ËÆøÈóÆÁºìÂ≠òÁöÑËØ∑Ê±ÇÈÉΩÂéªÊü•ËØ¢Êï∞ÊçÆÂ∫ì‰∫ÜÔºåËÄåÂØπÊï∞ÊçÆÂ∫ìCPUÂíåÂÜÖÂ≠òÈÄ†ÊàêÂ∑®Â§ßÂéãÂäõÔºå‰∏•ÈáçÁöÑ‰ºöÈÄ†ÊàêÊï∞ÊçÆÂ∫ìÂÆïÊú∫ÔºåÈÄ†ÊàêÁ≥ªÁªüÁöÑÂ¥©Ê∫É„ÄÇ Ê≠£Â∏∏ËÆøÈóÆÂ¶Ç‰∏ãÔºö ÁºìÂ≠òÂ§±ÊïàÁöÑÊó∂ÂÄôÂ¶Ç‰∏ãÂõæÔºö Ëß£ÂÜ≥ÂäûÊ≥ï ‰∫ãÂâçÔºöÂ∞ΩÈáè‰øùËØÅÊï¥‰∏™ Redis ÈõÜÁæ§ÁöÑÈ´òÂèØÁî®ÊÄßÔºåÂèëÁé∞Êú∫Âô®ÂÆïÊú∫Â∞ΩÂø´Ë°•‰∏ä„ÄÇÈÄâÊã©ÂêàÈÄÇÁöÑÂÜÖÂ≠òÊ∑òÊ±∞Á≠ñÁï•„ÄÇ‰∫ã‰∏≠ÔºöÊú¨Âú∞ Ehcache ÁºìÂ≠ò + Hystrix ÈôêÊµÅ&amp;ÈôçÁ∫ßÔºåÈÅøÂÖç Êï∞ÊçÆÂ∫ì Â¥©Êéâ„ÄÇ‰∫ãÂêéÔºöÂà©Áî® Redis ÊåÅ‰πÖÂåñÊú∫Âà∂‰øùÂ≠òÁöÑÊï∞ÊçÆÂ∞ΩÂø´ÊÅ¢Â§çÁºìÂ≠ò„ÄÇÂä†ÈîÅËÆ°Êï∞ÔºàÂç≥ÈôêÂà∂Âπ∂ÂèëÁöÑÊï∞ÈáèÔºåÂèØ‰ª•Áî®semphoreÔºâÊàñËÄÖËµ∑‰∏ÄÂÆöÊï∞ÈáèÁöÑÈòüÂàóÊù•ÈÅøÂÖçÁºìÂ≠òÂ§±ÊïàÊó∂Â§ßÈáèËØ∑Ê±ÇÂπ∂ÂèëÂà∞Êï∞ÊçÆÂ∫ì„ÄÇ‰ΩÜËøôÁßçÊñπÂºè‰ºöÈôç‰ΩéÂêûÂêêÈáè„ÄÇÂàÜÊûêÁî®Êà∑Ë°å‰∏∫ÔºåÁÑ∂ÂêéÂ§±ÊïàÊó∂Èó¥ÂùáÂåÄÂàÜÂ∏É„ÄÇÊàñËÄÖÂú®Â§±ÊïàÊó∂Èó¥ÁöÑÂü∫Á°Ä‰∏äÂÜçÂä†1~5ÂàÜÈíüÁöÑÈöèÊú∫Êï∞„ÄÇÂ¶ÇÊûúÊòØÊüêÂè∞ÁºìÂ≠òÊúçÂä°Âô®ÂÆïÊú∫ÔºåÂàôËÄÉËôëÂÅö‰∏ªÂ§á„ÄÇ ÁºìÂ≠òÁ©øÈÄè ÁÆÄ‰ªã ‰∏ÄËà¨ÊòØÈªëÂÆ¢ÊïÖÊÑèÂéªËØ∑Ê±ÇÁºìÂ≠ò‰∏≠‰∏çÂ≠òÂú®ÁöÑÊï∞ÊçÆÔºåÂØºËá¥ÊâÄÊúâÁöÑËØ∑Ê±ÇÈÉΩËêΩÂà∞Êï∞ÊçÆÂ∫ì‰∏äÔºåÈÄ†ÊàêÊï∞ÊçÆÂ∫ìÁü≠Êó∂Èó¥ÂÜÖÊâøÂèóÂ§ßÈáèËØ∑Ê±ÇËÄåÂ¥©Êéâ„ÄÇ Ëß£ÂÜ≥ÂäûÊ≥ï ÊúÄÂ∏∏ËßÅÁöÑÂàôÊòØÈááÁî®Â∏ÉÈöÜËøáÊª§Âô®ÔºåÂ∞ÜÊâÄÊúâÂèØËÉΩÂ≠òÂú®ÁöÑÊï∞ÊçÆÂìàÂ∏åÂà∞‰∏Ä‰∏™Ë∂≥Â§üÂ§ßÁöÑ bitmap ‰∏≠„ÄÇ‰∏Ä‰∏™‰∏ÄÂÆö‰∏çÂ≠òÂú®ÁöÑÊï∞ÊçÆ‰ºöË¢´Ëøô‰∏™ bitmap Êã¶Êà™ÊéâÔºå‰ªéËÄåÈÅøÂÖç‰∫ÜÂØπÂ∫ïÂ±ÇÂ≠òÂÇ®Á≥ªÁªüÁöÑÊü•ËØ¢ÂéãÂäõ„ÄÇ‰πüÊúâ‰∏Ä‰∏™Êõ¥‰∏∫ÁÆÄÂçïÁ≤óÊö¥ÁöÑÊñπÊ≥ïÔºåÂ¶ÇÊûú‰∏Ä‰∏™Êü•ËØ¢ËøîÂõûÁöÑÊï∞ÊçÆ‰∏∫Á©∫(‰∏çÁÆ°ÊòØÊï∞ÊçÆ‰∏çÂ≠òÂú®ÔºåËøòÊòØÁ≥ªÁªüÊïÖÈöú)Ôºå‰ªçÁÑ∂ÊääËøô‰∏™Á©∫ÁªìÊûúËøõË°åÁºìÂ≠òÔºå‰ΩÜÂÆÉÁöÑËøáÊúüÊó∂Èó¥‰ºöÂæàÁü≠ÔºåÊúÄÈïø‰∏çË∂ÖËøá‰∫îÂàÜÈíü„ÄÇ ÁºìÂ≠òÂπ∂Âèë ÁÆÄ‰ªã Â¶ÇÊûúÁΩëÁ´ôÂπ∂ÂèëËÆøÈóÆÈ´òÔºå‰∏Ä‰∏™ÁºìÂ≠òÂ¶ÇÊûúÂ§±ÊïàÔºåÂèØËÉΩÂá∫Áé∞Â§ö‰∏™ËøõÁ®ãÂêåÊó∂Êü•ËØ¢DBÔºåÂêåÊó∂ËÆæÁΩÆÁºìÂ≠òÁöÑÊÉÖÂÜµÔºåÂ¶ÇÊûúÂπ∂ÂèëÁ°ÆÂÆûÂæàÂ§ßÔºåËøô‰πüÂèØËÉΩÈÄ†ÊàêDBÂéãÂäõËøáÂ§ßÔºåËøòÊúâÁºìÂ≠òÈ¢ëÁπÅÊõ¥Êñ∞ÁöÑÈóÆÈ¢ò„ÄÇ Ëß£ÂÜ≥ÂäûÊ≥ï ÂØπÁºìÂ≠òÊü•ËØ¢Âä†ÈîÅÔºåÂ¶ÇÊûúKEY‰∏çÂ≠òÂú®ÔºåÂ∞±Âä†ÈîÅÔºåÁÑ∂ÂêéÊü•DBÂÖ•ÁºìÂ≠òÔºåÁÑ∂ÂêéËß£ÈîÅÔºõÂÖ∂‰ªñËøõÁ®ãÂ¶ÇÊûúÂèëÁé∞ÊúâÈîÅÂ∞±Á≠âÂæÖÔºåÁÑ∂ÂêéÁ≠âËß£ÈîÅÂêéËøîÂõûÊï∞ÊçÆÊàñËÄÖËøõÂÖ•DBÊü•ËØ¢„ÄÇ ÁºìÂ≠òÈ¢ÑÁÉ≠ ÁÆÄ‰ªã ÁºìÂ≠òÈ¢ÑÁÉ≠Â∞±ÊòØÁ≥ªÁªü‰∏äÁ∫øÂêéÔºåÂ∞ÜÁõ∏ÂÖ≥ÁöÑÁºìÂ≠òÊï∞ÊçÆÁõ¥Êé•Âä†ËΩΩÂà∞ÁºìÂ≠òÁ≥ªÁªü„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•ÈÅøÂÖçÂú®Áî®Êà∑ËØ∑Ê±ÇÁöÑÊó∂ÂÄôÔºåÂÖàÊü•ËØ¢Êï∞ÊçÆÂ∫ìÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÊï∞ÊçÆÁºìÂ≠òÁöÑÈóÆÈ¢òÔºÅÁî®Êà∑Áõ¥Êé•Êü•ËØ¢‰∫ãÂÖàË¢´È¢ÑÁÉ≠ÁöÑÁºìÂ≠òÊï∞ÊçÆÔºÅ Ëß£ÂÜ≥ÂäûÊ≥ï Áõ¥Êé•ÂÜô‰∏™ÁºìÂ≠òÂà∑Êñ∞È°µÈù¢Ôºå‰∏äÁ∫øÊó∂ÊâãÂ∑•Êìç‰Ωú‰∏ãÔºõÊï∞ÊçÆÈáè‰∏çÂ§ßÔºåÂèØ‰ª•Âú®È°πÁõÆÂêØÂä®ÁöÑÊó∂ÂÄôËá™Âä®ËøõË°åÂä†ËΩΩÔºõÂÆöÊó∂Âà∑Êñ∞ÁºìÂ≠òÔºõ RedisÂ∏∏ËßÅÊÄßËÉΩÈóÆÈ¢òÂíåËß£ÂÜ≥ÊñπÊ°à MasterÊúÄÂ•Ω‰∏çË¶ÅÂÅö‰ªª‰ΩïÊåÅ‰πÖÂåñÂ∑•‰ΩúÔºåÂ¶ÇRDBÂÜÖÂ≠òÂø´ÁÖßÂíåAOFÊó•ÂøóÊñá‰ª∂ Â¶ÇÊûúÊï∞ÊçÆÊØîËæÉÈáçË¶ÅÔºåÊüê‰∏™SlaveÂºÄÂêØAOFÂ§á‰ªΩÊï∞ÊçÆÔºåÁ≠ñÁï•ËÆæÁΩÆ‰∏∫ÊØèÁßíÂêåÊ≠•‰∏ÄÊ¨° ‰∏∫‰∫Ü‰∏ª‰ªéÂ§çÂà∂ÁöÑÈÄüÂ∫¶ÂíåËøûÊé•ÁöÑÁ®≥ÂÆöÊÄßÔºåMasterÂíåSlaveÊúÄÂ•ΩÂú®Âêå‰∏Ä‰∏™Â±ÄÂüüÁΩëÂÜÖ Â∞ΩÈáèÈÅøÂÖçÂú®ÂéãÂäõÂæàÂ§ßÁöÑ‰∏ªÂ∫ì‰∏äÂ¢ûÂä†‰ªéÂ∫ì ‰∏ª‰ªéÂ§çÂà∂‰∏çË¶ÅÁî®ÂõæÁä∂ÁªìÊûÑÔºåÁî®ÂçïÂêëÈìæË°®ÁªìÊûÑÊõ¥‰∏∫Á®≥ÂÆöÔºåÂç≥ÔºöMaster &lt;- Slave1 &lt;- Slave2 &lt;- Slave3... ËøôÊ†∑ÁöÑÁªìÊûÑÊñπ‰æøËß£ÂÜ≥ÂçïÁÇπÊïÖÈöúÈóÆÈ¢òÔºåÂÆûÁé∞SlaveÂØπMasterÁöÑÊõøÊç¢„ÄÇÂ¶ÇÊûúMasterÊåÇ‰∫ÜÔºåÂèØ‰ª•Á´ãÂàªÂêØÁî®Slave1ÂÅöMasterÔºåÂÖ∂‰ªñ‰∏çÂèò„ÄÇ Redis ‰∏ª‰ªéÂ§çÂà∂ ÂéüÁêÜ ‰ªéÊúçÂä°Âô®ËøûÊé•‰∏ªÊúçÂä°Âô®ÔºåÂèëÈÄÅSYNCÔºàÂêåÊ≠•ÔºâÂëΩ‰ª§Ôºõ‰∏ªÊúçÂä°Âô®Êé•Êî∂Âà∞SYNCÂëΩÂêçÂêéÔºåÂºÄÂßãÊâßË°åBGSAVEÂëΩ‰ª§ÁîüÊàêRDBÊñá‰ª∂Âπ∂‰ΩøÁî®ÁºìÂÜ≤Âå∫ËÆ∞ÂΩïÊ≠§ÂêéÊâßË°åÁöÑÊâÄÊúâÂÜôÂëΩ‰ª§Ôºõ‰∏ªÊúçÂä°Âô®BGSAVEÊâßË°åÂÆåÂêéÔºåÂêëÊâÄÊúâ‰ªéÊúçÂä°Âô®ÂèëÈÄÅÂø´ÁÖßÊñá‰ª∂ÔºåÂπ∂Âú®ÂèëÈÄÅÊúüÈó¥ÁªßÁª≠ËÆ∞ÂΩïË¢´ÊâßË°åÁöÑÂÜôÂëΩ‰ª§Ôºõ‰ªéÊúçÂä°Âô®Êî∂Âà∞Âø´ÁÖßÊñá‰ª∂Âêé‰∏¢ÂºÉÊâÄÊúâÊóßÊï∞ÊçÆÔºåËΩΩÂÖ•Êî∂Âà∞ÁöÑÂø´ÁÖßÔºõ‰∏ªÊúçÂä°Âô®Âø´ÁÖßÂèëÈÄÅÂÆåÊØïÂêéÂºÄÂßãÂêë‰ªéÊúçÂä°Âô®ÂèëÈÄÅÁºìÂÜ≤Âå∫‰∏≠ÁöÑÂÜôÂëΩ‰ª§Ôºõ‰ªéÊúçÂä°Âô®ÂÆåÊàêÂØπÂø´ÁÖßÁöÑËΩΩÂÖ•ÔºåÂºÄÂßãÊé•Êî∂ÂëΩ‰ª§ËØ∑Ê±ÇÔºåÂπ∂ÊâßË°åÊù•Ëá™‰∏ªÊúçÂä°Âô®ÁºìÂÜ≤Âå∫ÁöÑÂÜôÂëΩ‰ª§ÔºõÔºà‰ªéÊúçÂä°Âô®ÂàùÂßãÂåñÂÆåÊàêÔºâ‰∏ªÊúçÂä°Âô®ÊØèÊâßË°å‰∏Ä‰∏™ÂÜôÂëΩ‰ª§Â∞±‰ºöÂêë‰ªéÊúçÂä°Âô®ÂèëÈÄÅÁõ∏ÂêåÁöÑÂÜôÂëΩ‰ª§Ôºå‰ªéÊúçÂä°Âô®Êé•Êî∂Âπ∂ÊâßË°åÊî∂Âà∞ÁöÑÂÜôÂëΩ‰ª§Ôºà‰ªéÊúçÂä°Âô®ÂàùÂßãÂåñÂÆåÊàêÂêéÁöÑÊìç‰ΩúÔºâ„ÄÇ ‰ºòÁÇπ ÊîØÊåÅ‰∏ª‰ªéÂ§çÂà∂Ôºå‰∏ªÊú∫‰ºöËá™Âä®Â∞ÜÊï∞ÊçÆÂêåÊ≠•Âà∞‰ªéÊú∫ÔºåÂèØ‰ª•ËøõË°åËØªÂÜôÂàÜÁ¶ªÔºõ‰∏∫‰∫ÜÂàÜËΩΩMasterÁöÑËØªÊìç‰ΩúÂéãÂäõÔºåSlaveÊúçÂä°Âô®ÂèØ‰ª•‰∏∫ÂÆ¢Êà∑Á´ØÊèê‰æõÂè™ËØªÊìç‰ΩúÁöÑÊúçÂä°ÔºåÂÜôÊúçÂä°‰ªçÁÑ∂ÂøÖÈ°ªÁî±MasterÊù•ÂÆåÊàêÔºõSlaveÂêåÊ†∑ÂèØ‰ª•Êé•ÂèóÂÖ∂ÂÆÉSlavesÁöÑËøûÊé•ÂíåÂêåÊ≠•ËØ∑Ê±ÇÔºåËøôÊ†∑ÂèØ‰ª•ÊúâÊïàÁöÑÂàÜËΩΩMasterÁöÑÂêåÊ≠•ÂéãÂäõÔºõMaster ServerÊòØ‰ª•ÈùûÈòªÂ°ûÁöÑÊñπÂºè‰∏∫SlavesÊèê‰æõÊúçÂä°„ÄÇÊâÄ‰ª•Âú®Master-SlaveÂêåÊ≠•ÊúüÈó¥ÔºåÂÆ¢Êà∑Á´Ø‰ªçÁÑ∂ÂèØ‰ª•Êèê‰∫§Êü•ËØ¢Êàñ‰øÆÊîπËØ∑Ê±ÇÔºõSlave ServerÂêåÊ†∑ÊòØ‰ª•ÈùûÈòªÂ°ûÁöÑÊñπÂºèÂÆåÊàêÊï∞ÊçÆÂêåÊ≠•„ÄÇÂú®ÂêåÊ≠•ÊúüÈó¥ÔºåÂ¶ÇÊûúÊúâÂÆ¢Êà∑Á´ØÊèê‰∫§Êü•ËØ¢ËØ∑Ê±ÇÔºåRedisÂàôËøîÂõûÂêåÊ≠•‰πãÂâçÁöÑÊï∞ÊçÆ„ÄÇ Áº∫ÁÇπ Redis‰∏çÂÖ∑Â§áËá™Âä®ÂÆπÈîôÂíåÊÅ¢Â§çÂäüËÉΩÔºå‰∏ªÊú∫‰ªéÊú∫ÁöÑÂÆïÊú∫ÈÉΩ‰ºöÂØºËá¥ÂâçÁ´ØÈÉ®ÂàÜËØªÂÜôËØ∑Ê±ÇÂ§±Ë¥•ÔºåÈúÄË¶ÅÁ≠âÂæÖÊú∫Âô®ÈáçÂêØÊàñËÄÖÊâãÂä®ÂàáÊç¢ÂâçÁ´ØÁöÑIPÊâçËÉΩÊÅ¢Â§ç„ÄÇ‰∏ªÊú∫ÂÆïÊú∫ÔºåÂÆïÊú∫ÂâçÊúâÈÉ®ÂàÜÊï∞ÊçÆÊú™ËÉΩÂèäÊó∂ÂêåÊ≠•Âà∞‰ªéÊú∫ÔºåÂàáÊç¢IPÂêéËøò‰ºöÂºïÂÖ•Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢òÔºåÈôç‰Ωé‰∫ÜÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß„ÄÇRedisËæÉÈöæÊîØÊåÅÂú®Á∫øÊâ©ÂÆπÔºåÂú®ÈõÜÁæ§ÂÆπÈáèËææÂà∞‰∏äÈôêÊó∂Âú®Á∫øÊâ©ÂÆπ‰ºöÂèòÂæóÂæàÂ§çÊùÇ„ÄÇ Redis Âì®ÂÖµÊ®°Âºè Â∑•‰ΩúÊñπÂºè ÊØè‰∏™SentinelÔºàÂì®ÂÖµÔºâËøõÁ®ã‰ª•ÊØèÁßíÈíü‰∏ÄÊ¨°ÁöÑÈ¢ëÁéáÂêëÊï¥‰∏™ÈõÜÁæ§‰∏≠ÁöÑMaster‰∏ªÊúçÂä°Âô®ÔºåSlave‰ªéÊúçÂä°Âô®‰ª•ÂèäÂÖ∂‰ªñSentinelÔºàÂì®ÂÖµÔºâËøõÁ®ãÂèëÈÄÅ‰∏Ä‰∏™ PING ÂëΩ‰ª§„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ÂÆû‰æãÔºàinstanceÔºâË∑ùÁ¶ªÊúÄÂêé‰∏ÄÊ¨°ÊúâÊïàÂõûÂ§ç PING ÂëΩ‰ª§ÁöÑÊó∂Èó¥Ë∂ÖËøá down-after-milliseconds ÈÄâÈ°πÊâÄÊåáÂÆöÁöÑÂÄºÔºå ÂàôËøô‰∏™ÂÆû‰æã‰ºöË¢´ SentinelÔºàÂì®ÂÖµÔºâËøõÁ®ãÊ†áËÆ∞‰∏∫‰∏ªËßÇ‰∏ãÁ∫øÔºàSDOWNÔºâÂ¶ÇÊûú‰∏Ä‰∏™Master‰∏ªÊúçÂä°Âô®Ë¢´Ê†áËÆ∞‰∏∫‰∏ªËßÇ‰∏ãÁ∫øÔºàSDOWNÔºâÔºåÂàôÊ≠£Âú®ÁõëËßÜËøô‰∏™Master‰∏ªÊúçÂä°Âô®ÁöÑÊâÄÊúâ SentinelÔºàÂì®ÂÖµÔºâËøõÁ®ãË¶Å‰ª•ÊØèÁßí‰∏ÄÊ¨°ÁöÑÈ¢ëÁéáÁ°ÆËÆ§Master‰∏ªÊúçÂä°Âô®ÁöÑÁ°ÆËøõÂÖ•‰∫Ü‰∏ªËßÇ‰∏ãÁ∫øÁä∂ÊÄÅÂΩìÊúâË∂≥Â§üÊï∞ÈáèÁöÑ SentinelÔºàÂì®ÂÖµÔºâËøõÁ®ãÔºàÂ§ß‰∫éÁ≠â‰∫éÈÖçÁΩÆÊñá‰ª∂ÊåáÂÆöÁöÑÂÄºÔºâÂú®ÊåáÂÆöÁöÑÊó∂Èó¥ËåÉÂõ¥ÂÜÖÁ°ÆËÆ§Master‰∏ªÊúçÂä°Âô®ËøõÂÖ•‰∫Ü‰∏ªËßÇ‰∏ãÁ∫øÁä∂ÊÄÅÔºàSDOWNÔºâÔºå ÂàôMaster‰∏ªÊúçÂä°Âô®‰ºöË¢´Ê†áËÆ∞‰∏∫ÂÆ¢ËßÇ‰∏ãÁ∫øÔºàODOWNÔºâÂú®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºå ÊØè‰∏™ SentinelÔºàÂì®ÂÖµÔºâËøõÁ®ã‰ºö‰ª•ÊØè 10 Áßí‰∏ÄÊ¨°ÁöÑÈ¢ëÁéáÂêëÈõÜÁæ§‰∏≠ÁöÑÊâÄÊúâMaster‰∏ªÊúçÂä°Âô®„ÄÅSlave‰ªéÊúçÂä°Âô®ÂèëÈÄÅ INFO ÂëΩ‰ª§„ÄÇÂΩìMaster‰∏ªÊúçÂä°Âô®Ë¢´ SentinelÔºàÂì®ÂÖµÔºâËøõÁ®ãÊ†áËÆ∞‰∏∫ÂÆ¢ËßÇ‰∏ãÁ∫øÔºàODOWNÔºâÊó∂ÔºåSentinelÔºàÂì®ÂÖµÔºâËøõÁ®ãÂêë‰∏ãÁ∫øÁöÑ Master‰∏ªÊúçÂä°Âô®ÁöÑÊâÄÊúâ Slave‰ªéÊúçÂä°Âô®ÂèëÈÄÅ INFO ÂëΩ‰ª§ÁöÑÈ¢ëÁéá‰ºö‰ªé 10 Áßí‰∏ÄÊ¨°Êîπ‰∏∫ÊØèÁßí‰∏ÄÊ¨°„ÄÇËã•Ê≤°ÊúâË∂≥Â§üÊï∞ÈáèÁöÑ SentinelÔºàÂì®ÂÖµÔºâËøõÁ®ãÂêåÊÑè Master‰∏ªÊúçÂä°Âô®‰∏ãÁ∫øÔºå Master‰∏ªÊúçÂä°Âô®ÁöÑÂÆ¢ËßÇ‰∏ãÁ∫øÁä∂ÊÄÅÂ∞±‰ºöË¢´ÁßªÈô§„ÄÇËã• Master‰∏ªÊúçÂä°Âô®ÈáçÊñ∞Âêë SentinelÔºàÂì®ÂÖµÔºâËøõÁ®ãÂèëÈÄÅ PING ÂëΩ‰ª§ËøîÂõûÊúâÊïàÂõûÂ§çÔºåMaster‰∏ªÊúçÂä°Âô®ÁöÑ‰∏ªËßÇ‰∏ãÁ∫øÁä∂ÊÄÅÂ∞±‰ºöË¢´ÁßªÈô§„ÄÇ ‰ºòÁÇπ Âì®ÂÖµÊ®°ÂºèÊòØÂü∫‰∫é‰∏ª‰ªéÊ®°ÂºèÁöÑÔºåÊâÄÊúâ‰∏ª‰ªéÁöÑ‰ºòÁÇπÔºåÂì®ÂÖµÊ®°ÂºèÈÉΩÂÖ∑Êúâ„ÄÇ‰∏ª‰ªéÂèØ‰ª•Ëá™Âä®ÂàáÊç¢ÔºåÁ≥ªÁªüÊõ¥ÂÅ•Â£ÆÔºåÂèØÁî®ÊÄßÊõ¥È´ò„ÄÇ Áº∫ÁÇπ RedisËæÉÈöæÊîØÊåÅÂú®Á∫øÊâ©ÂÆπÔºåÂú®ÈõÜÁæ§ÂÆπÈáèËææÂà∞‰∏äÈôêÊó∂Âú®Á∫øÊâ©ÂÆπ‰ºöÂèòÂæóÂæàÂ§çÊùÇ„ÄÇ Redis ClusterÈõÜÁæ§Ê®°Âºè redis3‰ª•ÂêéÔºåËäÇÁÇπ‰πãÈó¥Êèê‰æõ‰∫ÜÂÆåÊï¥ÁöÑshardingÔºàÂàÜÁâáÔºâ„ÄÅreplicationÔºà‰∏ªÂ§áÊÑüÁü•ËÉΩÂäõÔºâ„ÄÅfailoverÔºàÊïÖÈöúËΩ¨ÁßªÔºâÁöÑÁâπÊÄß„ÄÇ ÈÖçÁΩÆ‰∏ÄËá¥ÊÄß ÊØè‰∏™ËäÇÁÇπÔºàNodeÔºâÂÜÖÈÉ®ÈÉΩ‰øùÂ≠ò‰∫ÜÈõÜÁæ§ÁöÑÈÖçÁΩÆ‰ø°ÊÅØÔºåÂ≠òÂÇ®Âú®clusterState‰∏≠ÔºåÈÄöËøáÂºïÂÖ•Ëá™Â¢ûÁöÑepochÂèòÈáèÊù•‰ΩøÂæóÈõÜÁæ§ÈÖçÁΩÆÂú®ÂêÑ‰∏™ËäÇÁÇπÈó¥‰øùÊåÅ‰∏ÄËá¥„ÄÇ shardingÊï∞ÊçÆÂàÜÁâá Â∞ÜÊâÄÊúâÊï∞ÊçÆÂàíÂàÜ‰∏∫16384‰∏™ÂàÜÁâáÔºàslotÔºâÔºåÊØè‰∏™ËäÇÁÇπ‰ºöÂØπÂ∫î‰∏ÄÈÉ®ÂàÜslotÔºåÊØè‰∏™keyÈÉΩ‰ºöÊ†πÊçÆÂàÜÂ∏ÉÁÆóÊ≥ïÊò†Â∞ÑÂà∞16384‰∏™slot‰∏≠ÁöÑ‰∏Ä‰∏™ÔºåÂàÜÂ∏ÉÁÆóÊ≥ï‰∏∫slotId=crc16(key)%16384 ÂΩì‰∏Ä‰∏™clientËÆøÈóÆÁöÑkey‰∏çÂú®ÂØπÂ∫îËäÇÁÇπÁöÑslots‰∏≠Ôºåredis‰ºöËøîÂõûÁªôclient‰∏Ä‰∏™movedÂëΩ‰ª§ÔºåÂëäÁü•ÂÖ∂Ê≠£Á°ÆÁöÑË∑ØÁî±‰ø°ÊÅØ‰ªéËÄåÈáçÊñ∞ÂèëËµ∑ËØ∑Ê±Ç„ÄÇclient‰ºöÊ†πÊçÆÊØèÊ¨°ËØ∑Ê±ÇÊù•ÁºìÂ≠òÊú¨Âú∞ÁöÑË∑ØÁî±ÁºìÂ≠ò‰ø°ÊÅØÔºå‰ª•‰æø‰∏ãÊ¨°ËØ∑Ê±ÇÁõ¥Êé•ËÉΩÂ§üË∑ØÁî±Âà∞Ê≠£Á°ÆÁöÑËäÇÁÇπ„ÄÇ ÂàÜÁâáËøÅÁßª ÂàÜÁâáËøÅÁßªÁöÑËß¶ÂèëÂíåËøáÁ®ãÊéßÂà∂Áî±Â§ñÈÉ®Á≥ªÁªüÂÆåÊàêÔºåredisÂè™Êèê‰æõËøÅÁßªËøáÁ®ã‰∏≠ÈúÄË¶ÅÁöÑÂéüËØ≠ÊîØÊåÅ„ÄÇ ‰∏ªË¶ÅÂåÖÂê´‰∏§ÁßçÔºö‰∏ÄÁßçÊòØËäÇÁÇπËøÅÁßªÁä∂ÊÄÅËÆæÁΩÆÔºåÂç≥ËøÅÁßªÂâçÊ†áËÆ∞Ê∫ê„ÄÅÁõÆÊ†áËäÇÁÇπÔºõÂè¶‰∏ÄÁßçÊòØkeyËøÅÁßªÁöÑÂéüÂ≠êÂåñÂëΩ‰ª§„ÄÇ failoverÊïÖÈöúËΩ¨Áßª ÊïÖÈöúÂèëÁé∞ ËäÇÁÇπÈó¥‰∏§‰∏§ÈÄöËøáTCP‰øùÊåÅËøûÊé•ÔºåÂë®ÊúüÊÄßËøõË°åPING„ÄÅPONG‰∫§‰∫íÔºåËã•ÂØπÊñπÁöÑPONGÁõ∏Â∫îË∂ÖÊó∂Êú™Êî∂Âà∞ÔºåÂàôÂ∞ÜÂÖ∂ÁΩÆ‰∏∫PFAILÁä∂ÊÄÅÔºåÂπ∂‰º†Êí≠ÁªôÂÖ∂‰ªñËäÇÁÇπ„ÄÇ ÊïÖÈöúÁ°ÆËÆ§ ÂΩìÈõÜÁæ§‰∏≠Êúâ‰∏ÄÂçä‰ª•‰∏äÁöÑËäÇÁÇπÂØπÊüê‰∏Ä‰∏™PFAILÁä∂ÊÄÅËøõË°å‰∫ÜÁ°ÆËÆ§ÔºåÂàôÂ∞ÜËµ∑Êîπ‰∏∫FAILÁä∂ÊÄÅÔºåÁ°ÆËÆ§ÂÖ∂ÊïÖÈöú„ÄÇ slaveÈÄâ‰∏æ ÂΩìÊúâ‰∏Ä‰∏™masterÊåÇÊéâ‰∫ÜÔºåÂàôÂÖ∂slaveÈáçÊñ∞Á´ûÈÄâÂá∫‰∏Ä‰∏™Êñ∞ÁöÑmaster„ÄÇ‰∏ªË¶ÅÊ†πÊçÆÂêÑ‰∏™slaveÊúÄÂêé‰∏ÄÊ¨°ÂêåÊ≠•master‰ø°ÊÅØÁöÑÊó∂Èó¥ÔºåË∂äÊñ∞Ë°®Á§∫slaveÁöÑÊï∞ÊçÆË∂äÊñ∞ÔºåÁ´ûÈÄâÁöÑ‰ºòÂÖàÁ∫ßË∂äÈ´òÔºåÂ∞±Êõ¥ÊúâÂèØËÉΩÈÄâ‰∏≠„ÄÇÁ´ûÈÄâÊàêÂäü‰πãÂêéÂ∞ÜÊ∂àÊÅØ‰º†Êí≠ÁªôÂÖ∂‰ªñËäÇÁÇπ„ÄÇ ÈõÜÁæ§‰∏çÂèØÁî®ÁöÑÊÉÖÂÜµ ÈõÜÁæ§‰∏≠‰ªªÊÑèmasterÊåÇÊéâÔºå‰∏îÂΩìÂâçmasterÊ≤°Êúâslave„ÄÇ ÈõÜÁæ§‰∏≠Ë∂ÖËøáÂçäÊï∞‰ª•‰∏ämasterÊåÇÊéâ„ÄÇ Redis-ClusterÈááÁî®Êó†‰∏≠ÂøÉÁªìÊûÑÁöÑÁâπÁÇπ ÊâÄÊúâÁöÑredisËäÇÁÇπÂΩºÊ≠§‰∫íËÅî(PING-PONGÊú∫Âà∂),ÂÜÖÈÉ®‰ΩøÁî®‰∫åËøõÂà∂ÂçèËÆÆ‰ºòÂåñ‰º†ËæìÈÄüÂ∫¶ÂíåÂ∏¶ÂÆΩ„ÄÇ ËäÇÁÇπÁöÑfailÊòØÈÄöËøáÈõÜÁæ§‰∏≠Ë∂ÖËøáÂçäÊï∞ÁöÑËäÇÁÇπÊ£ÄÊµãÂ§±ÊïàÊó∂ÊâçÁîüÊïà„ÄÇ ÂÆ¢Êà∑Á´Ø‰∏éredisËäÇÁÇπÁõ¥Ëøû,‰∏çÈúÄË¶Å‰∏≠Èó¥‰ª£ÁêÜÂ±Ç.ÂÆ¢Êà∑Á´Ø‰∏çÈúÄË¶ÅËøûÊé•ÈõÜÁæ§ÊâÄÊúâËäÇÁÇπ,ËøûÊé•ÈõÜÁæ§‰∏≠‰ªª‰Ωï‰∏Ä‰∏™ÂèØÁî®ËäÇÁÇπÂç≥ÂèØ„ÄÇ PipelineÊúâ‰ªÄ‰πàÂ•ΩÂ§ÑÔºå‰∏∫‰ªÄ‰πàË¶ÅÁî®pipeline ÂèØ‰ª•Â∞ÜÂ§öÊ¨°IOÂæÄËøîÁöÑÊó∂Èó¥Áº©Âáè‰∏∫‰∏ÄÊ¨°ÔºåÂâçÊèêÊòØpipelineÊâßË°åÁöÑÊåá‰ª§‰πãÈó¥Ê≤°ÊúâÂõ†ÊûúÁõ∏ÂÖ≥ÊÄß„ÄÇ ‰ΩøÁî®redis-benchmarkËøõË°åÂéãÊµãÁöÑÊó∂ÂÄôÂèØ‰ª•ÂèëÁé∞ÂΩ±ÂìçredisÁöÑQPSÂ≥∞ÂÄºÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÂõ†Á¥†ÊòØpipelineÊâπÊ¨°Êåá‰ª§ÁöÑÊï∞ÁõÆ„ÄÇ Â¶ÇÊûúÊúâÂ§ßÈáèÁöÑkeyÈúÄË¶ÅËÆæÁΩÆÂêå‰∏ÄÊó∂Èó¥ËøáÊúüÈúÄË¶ÅÊ≥®ÊÑè‰ªÄ‰πà Â¶ÇÊûúÂ§ßÈáèÁöÑkeyËøáÊúüÊó∂Èó¥ËÆæÁΩÆÁöÑËøá‰∫éÈõÜ‰∏≠ÔºåÂà∞ËøáÊúüÁöÑÈÇ£‰∏™Êó∂Èó¥ÁÇπÔºåredisÂèØËÉΩ‰ºöÂá∫Áé∞Áü≠ÊöÇÁöÑÂç°È°øÁé∞Ë±°„ÄÇ‰∏ÄËà¨ÈúÄË¶ÅÂú®Êó∂Èó¥‰∏äÂä†‰∏Ä‰∏™ÈöèÊú∫ÂÄºÔºå‰ΩøÂæóËøáÊúüÊó∂Èó¥ÂàÜÊï£‰∏Ä‰∫õ„ÄÇ RedisÂºÇÊ≠•ÈòüÂàó ÂéüÁêÜ ‰∏ÄËà¨‰ΩøÁî®listÁªìÊûÑ‰Ωú‰∏∫ÈòüÂàóÔºårpushÁîü‰∫ßÊ∂àÊÅØÔºålpopÊ∂àË¥πÊ∂àÊÅØ„ÄÇÂΩìlpopÊ≤°ÊúâÊ∂àÊÅØÁöÑÊó∂ÂÄôÔºåË¶ÅÈÄÇÂΩìsleep‰∏Ä‰ºöÂÜçÈáçËØï„ÄÇ ÂèØ‰∏çÂèØ‰ª•‰∏çÁî®sleep listÊúâ‰∏™Êåá‰ª§Âè´blpopÔºåÂú®Ê≤°ÊúâÊ∂àÊÅØÊó∂ÔºåÂÆÉ‰ºöÈòªÂ°û‰ΩèÁõ¥Âà∞Ê∂àÊÅØÂà∞Êù•„ÄÇ ËÉΩ‰∏çËÉΩÁîü‰∫ß‰∏ÄÊ¨°Ê∂àË¥πÂ§öÊ¨° ‰ΩøÁî®pub/sub‰∏ªÈ¢òËÆ¢ÈòÖËÄÖÊ®°ÂºèÔºåÂèØ‰ª•ÂÆûÁé∞1:NÁöÑÊ∂àÊÅØÈòüÂàó„ÄÇ pub/subÊúâ‰ªÄ‰πàÁº∫ÁÇπ Âú®Ê∂àË¥πËÄÖ‰∏ãÁ∫øÁöÑÊÉÖÂÜµ‰∏ãÔºåÁîü‰∫ßÁöÑÊ∂àÊÅØ‰ºö‰∏¢Â§±ÔºåÂæó‰ΩøÁî®‰∏ì‰∏öÁöÑÊ∂àÊÅØÈòüÂàóÂ¶ÇrabbitmqÁ≠â„ÄÇ redisÂ¶Ç‰ΩïÂÆûÁé∞Âª∂Êó∂ÈòüÂàó ‰ΩøÁî®sortedsetÔºåÊãøÊó∂Èó¥Êà≥‰Ωú‰∏∫scoreÔºåÊ∂àÊÅØÂÜÖÂÆπ‰Ωú‰∏∫keyË∞ÉÁî®zaddÊù•Áîü‰∫ßÊ∂àÊÅØÔºåÊ∂àË¥πËÄÖÁî®zrangebyscoreÊåá‰ª§Ëé∑ÂèñNÁßí‰πãÂâçÁöÑÊï∞ÊçÆËΩÆËØ¢ËøõË°åÂ§ÑÁêÜ„ÄÇ ÂÅáÂ¶ÇRedisÈáåÈù¢Êúâ1‰∫ø‰∏™keyÔºåÂÖ∂‰∏≠Êúâ10w‰∏™keyÊòØ‰ª•Êüê‰∏™Âõ∫ÂÆöÁöÑÂ∑≤Áü•ÁöÑÂâçÁºÄÂºÄÂ§¥ÁöÑÔºåÂ¶ÇÊûúÂ∞ÜÂÆÉ‰ª¨ÂÖ®ÈÉ®ÊâæÂá∫Êù• ‰ΩøÁî®keysÊåá‰ª§ÂèØ‰ª•Êâ´Âá∫ÊåáÂÆöÊ®°ÂºèÁöÑkeyÂàóË°®„ÄÇ Â¶ÇÊûúËøô‰∏™redisÊ≠£Âú®ÁªôÁ∫ø‰∏äÁöÑ‰∏öÂä°Êèê‰æõÊúçÂä°ÔºåÈÇ£‰ΩøÁî®keysÊåá‰ª§‰ºöÊúâ‰ªÄ‰πàÈóÆÈ¢ò redisÁöÑÂçïÁ∫øÁ®ãÁöÑ„ÄÇkeysÊåá‰ª§‰ºöÂØºËá¥Á∫øÁ®ãÈòªÂ°û‰∏ÄÊÆµÊó∂Èó¥ÔºåÁ∫ø‰∏äÊúçÂä°‰ºöÂÅúÈ°øÔºåÁõ¥Âà∞Êåá‰ª§ÊâßË°åÂÆåÊØïÔºåÊúçÂä°ÊâçËÉΩÊÅ¢Â§ç„ÄÇËøô‰∏™Êó∂ÂÄôÂèØ‰ª•‰ΩøÁî®scanÊåá‰ª§ÔºåscanÊåá‰ª§ÂèØ‰ª•Êó†ÈòªÂ°ûÁöÑÊèêÂèñÂá∫ÊåáÂÆöÊ®°ÂºèÁöÑkeyÂàóË°®Ôºå‰ΩÜÊòØ‰ºöÊúâ‰∏ÄÂÆöÁöÑÈáçÂ§çÊ¶ÇÁéáÔºåÂú®ÂÆ¢Êà∑Á´ØÂÅö‰∏ÄÊ¨°ÂéªÈáçÂ∞±ÂèØ‰ª•‰∫ÜÔºå‰ΩÜÊòØÊï¥‰ΩìÊâÄËä±Ë¥πÁöÑÊó∂Èó¥‰ºöÊØîÁõ¥Êé•Áî®keysÊåá‰ª§Èïø„ÄÇ]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊâãÂÜôRPC--ÁÆÄÊòìÁâà]]></title>
    <url>%2Fposts%2Fabff3a44.html</url>
    <content type="text"><![CDATA[‰πãÂâçÂú®ÁΩë‰∏äÁúãÂæàÂ§öÂÖ¨Âè∏Âú®Èù¢ËØïÁöÑÊó∂ÂÄôÈÉΩ‰ºöÈóÆÂà∞DubboÁ≠â‰∏Ä‰∫õRPCÊ°ÜÊû∂ÔºåÊõ¥ÊúâÁîöËÄÖÁõ¥Êé•Ë¶ÅÊ±ÇÈù¢ËØïËÄÖÊâãÂÜôPRCÔºå‰ªäÂ§©Â∞±Êù•Êí©‰∏ãRPC„ÄÇ ‰ªÄ‰πàÊòØRPC RPCÔºàRemote Procedure CallÔºâÔºåËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÔºåÊÑèÊÄùÊòØÂèØ‰ª•Âú®‰∏ÄÂè∞Êú∫Âô®‰∏äË∞ÉÁî®ËøúÁ®ãÁöÑÊúçÂä°„ÄÇÂú®ÈùûÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÔºåÊàë‰ª¨ÁöÑÁ®ãÂ∫èË∞ÉÁî®ÊúçÂä°ÈÉΩÊòØÊú¨Âú∞Ë∞ÉÁî®Ôºå‰ΩÜÊòØÈöèÁùÄÂàÜÂ∏ÉÂºèÁªìÊûÑÁöÑÊôÆÈÅçÔºåË∂äÊù•Ë∂äÂ§öÁöÑÂ∫îÁî®ÈúÄË¶ÅËß£ËÄ¶ÔºåÂ∞Ü‰∏çÂêåÁöÑÁã¨Á´ãÂäüËÉΩÈÉ®ÁΩ≤ÂèëÂ∏ÉÊàê‰∏çÂêåÁöÑÊúçÂä°‰æõÂÆ¢Êà∑Á´ØË∞ÉÁî®ÔºåRPCÂ∞±ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÁöÑ„ÄÇRPCÊòØ‰∏ÄÁßçËßÑËåÉÔºåÂíåTCP„ÄÅUDPÈÉΩÊ≤°ÊúâÂÖ≥Á≥ªÔºåRPCÂèØ‰ª•ÈááÁî®TCPÂçèËÆÆÂÆåÊàêÊï∞ÊçÆ‰º†ËæìÔºåÁîöËá≥ÂèØ‰ª•‰ΩøÁî®HTTPÂ∫îÁî®ÂçèËÆÆ„ÄÇRPCÊòØCÁ´ØÊ®°ÂºèÔºåÂåÖÂê´‰∫ÜÊúçÂä°Á´ØÔºàÊúçÂä°Êèê‰æõÊñπÔºâ„ÄÅÂÆ¢Êà∑Á´ØÔºàÊúçÂä°‰ΩøÁî®ÊñπÔºâÔºåÈááÁî®ÁâπÂÆöÁöÑÁΩëÁªú‰º†ËæìÂçèËÆÆÔºåÊääÊï∞ÊçÆÊåâÁÖßÁâπÂÆöÁöÑÂçèËÆÆÂåÖË£ÖÂêéËøõË°å‰º†ËæìÊìç‰ΩúÁ≠âÊìç‰Ωú„ÄÇ RPCÂéüÁêÜ È¶ñÂÖàÔºåÊàë‰ª¨ÂøÉÈáåÂ∏¶ÁùÄËøôÊ†∑ÁöÑÈóÆÈ¢òÔºöË¶ÅÊÄé‰πàÊ†∑ÂéªË∞ÉÁî®ËøúÁ®ãÁöÑÊúçÂä°Âë¢Ôºü ‚ë†ËÇØÂÆöË¶ÅÁü•ÈÅìIPÂíåÁ´ØÂè£ÂêßÔºàÁ°ÆÂÆöÂîØ‰∏Ä‰∏Ä‰∏™ËøõÁ®ãÔºâÔºõ ‚ë°ËÇØÂÆöË¶ÅÁü•ÈÅìË∞ÉÁî®‰ªÄ‰πàÊúçÂä°ÂêßÔºàÊñπÊ≥ïÂêçÂíåÂèÇÊï∞ÔºâÔºõ ‚ë¢Ë∞ÉÁî®ÊúçÂä°ÂêéÂèØËÉΩÈúÄË¶ÅÁªìÊûúÂêß„ÄÇ Ëøô‰∏âÁÇπÂèàÊÄé‰πàÂÆûÁé∞Âë¢Ôºü RPCÁöÑËÆæËÆ°Áî±ClientÔºåClient stubÔºåNetworkÔºåServer stubÔºåServerÊûÑÊàê„ÄÇ ÂÖ∂‰∏≠ClientÂ∞±ÊòØÁî®Êù•Ë∞ÉÁî®ÊúçÂä°ÁöÑÔºåCient stubÊòØÁî®Êù•ÊääË∞ÉÁî®ÁöÑÊñπÊ≥ïÂíåÂèÇÊï∞Â∫èÂàóÂåñÁöÑÔºàÂõ†‰∏∫Ë¶ÅÂú®ÁΩëÁªú‰∏≠‰º†ËæìÔºåÂøÖÈ°ªË¶ÅÊääÂØπË±°ËΩ¨ÂèòÊàêÂ≠óËäÇÔºâÔºåÁΩëÁªúÁî®Êù•‰º†ËæìËøô‰∫õ‰ø°ÊÅØÂà∞ÊúçÂä°Âô®Â≠òÊ†πÔºåÊúçÂä°Âô®Â≠òÊ†πÁî®Êù•ÊääËøô‰∫õ‰ø°ÊÅØÂèçÂ∫èÂàóÂåñÁöÑÔºåÊúçÂä°Âô®Â∞±ÊòØÊúçÂä°ÁöÑÊèê‰æõËÄÖÔºåÊúÄÁªàË∞ÉÁî®ÁöÑÂ∞±ÊòØÊúçÂä°Âô®Êèê‰æõÁöÑÊñπÊ≥ï„ÄÇ RPCÁöÑÁªìÊûÑÂ¶Ç‰∏ãÂõæÔºö Âõæ‰∏≠1-10Â∫èÂè∑ÁöÑÂê´‰πâÂ¶Ç‰∏ãÔºö ÂÆ¢Êà∑Á´ØÂÉèË∞ÉÁî®Êú¨Âú∞ÊúçÂä°‰ººÁöÑË∞ÉÁî®ËøúÁ®ãÊúçÂä°; ÂÆ¢Êà∑Á´ØstubÊé•Êî∂Âà∞Ë∞ÉÁî®ÂêéÔºåÂ∞ÜÁ±ªÂêçÔºåÊñπÊ≥ïÂêçÔºåÂèÇÊï∞ÂàóË°®Â∫èÂàóÂåñ; ÂÆ¢Êà∑Á´ØÈÄöËøáÊèíÂ∫ßÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÊúçÂä°Á´Ø; Server stubÊî∂Âà∞Ê∂àÊÅØÂêéËøõË°åËß£Á†ÅÔºàÂ∞ÜÊ∂àÊÅØÂØπË±°ÂèçÂ∫èÂàóÂåñÔºâ; ÊúçÂä°Âô®Â≠òÊ†πÊ†πÊçÆËß£Á†ÅÁªìÊûúË∞ÉÁî®Êú¨Âú∞ÁöÑÊúçÂä°; Êú¨Âú∞ÊúçÂä°ÊâßË°åÔºàÂØπ‰∫éÊúçÂä°Á´ØÊù•ËØ¥ÊòØÊú¨Âú∞ÊâßË°åÔºâÂπ∂Â∞ÜÁªìÊûúËøîÂõûÁªôÊúçÂä°Âô®Â≠òÊ†π; ÊúçÂä°Âô®Â≠òÊ†πÂ∞ÜËøîÂõûÁªìÊûúÊâìÂåÖÊàêÊ∂àÊÅØÔºàÂ∞ÜÁªìÊûúÊ∂àÊÅØÂØπË±°Â∫èÂàóÂåñÔºâ; ÊúçÂä°Á´ØÈÄöËøáÊèíÂ∫ßÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÂÆ¢Êà∑Á´Ø; ÂÆ¢Êà∑Á´ØstubÊé•Êî∂Âà∞ÁªìÊûúÊ∂àÊÅØÔºåÂπ∂ËøõË°åËß£Á†ÅÔºàÂ∞ÜÁªìÊûúÊ∂àÊÅØÂèëÂ∫èÂàóÂåñÔºâ; ÂÆ¢Êà∑Á´ØÂæóÂà∞ÊúÄÁªàÁªìÊûú„ÄÇ ËøôÂ∞±ÊòØ‰∏Ä‰∏™ÂÆåÊàêPRCË∞ÉÁî®ËøáÁ®ãÔºåÂØπ‰ΩøÁî®ÊñπËÄåË®ÄÂ∞±Âè™Êö¥Èú≤‰∫ÜÊú¨Âú∞‰ª£ÁêÜÂØπË±°ÔºåÂâ©‰∏ãÁöÑÊï∞ÊçÆËß£Êûê„ÄÅËøêËæìÁ≠âÈÉΩË¢´ÂåÖË£Ö‰∫ÜÔºå‰ªéÊúçÂä°Êèê‰æõÊñπÁöÑËßíÂ∫¶ÁúãËøòÊúâÊúçÂä°Êö¥Èú≤ÔºåÂ¶Ç‰∏ãÊòØDubboÁöÑÊû∂ÊûÑÂõæÔºö ÁÆÄÊòìRPCÂÆûÁé∞ È°πÁõÆÁõÆÂΩï MethodParameterÂØπË±° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package com.springboot.whb.study.rpc.rpc_v1;import com.alibaba.fastjson.JSON;import lombok.Data;import java.io.InputStream;import java.io.ObjectInputStream;/** * @author: whb * @description: ËØ∑Ê±ÇÂØπË±° */@Datapublic class MethodParameter &#123; /** * Á±ªÂêç */ private String className; /** * ÊñπÊ≥ïÂêç */ private String methodName; /** * ÂèÇÊï∞ */ private Object[] arguments; /** * ÂèÇÊï∞Á±ªÂûã */ private Class&lt;?&gt;[] parameterTypes; @Override public String toString() &#123; return JSON.toJSONString(this); &#125; /** * ‰ªéËæìÂÖ•ÊµÅ‰∏≠ËØªÂèñÂá∫Á±ªÂêç„ÄÅÊñπÊ≥ïÂêç„ÄÅÂèÇÊï∞Á≠âÊï∞ÊçÆÁªÑË£ÖÊàê‰∏Ä‰∏™MethodParameter * * @param inputStream * @return */ public static MethodParameter convert(InputStream inputStream) &#123; try &#123; ObjectInputStream input = new ObjectInputStream(inputStream); String className = input.readUTF(); String methodName = input.readUTF(); Class&lt;?&gt;[] parameterTypes = (Class&lt;?&gt;[]) input.readObject(); Object[] arguments = (Object[]) input.readObject(); MethodParameter methodParameter = new MethodParameter(); methodParameter.setClassName(className); methodParameter.setMethodName(methodName); methodParameter.setArguments(arguments); methodParameter.setParameterTypes(parameterTypes); return methodParameter; &#125; catch (Exception e) &#123; throw new RuntimeException("Ëß£ÊûêËØ∑Ê±ÇÈîôËØØÔºö&#123;&#125;", e); &#125; &#125;&#125; ÊúçÂä°Á´Ø-ÊúçÂä°Êö¥Èú≤ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package com.springboot.whb.study.rpc.rpc_v1;import com.springboot.whb.study.rpc.rpc_v1.MethodParameter;import java.lang.reflect.Method;import java.util.HashMap;import java.util.Map;/** * @author: whb * @description: ÊúçÂä°Á´ØÊö¥Èú≤ * ÊúçÂä°Êö¥Èú≤Â≠òÂÇ®Âú®objectMapÂØπË±°‰∏≠ÔºåÊâÄÊúâÂèØÂØπÊèê‰æõÁöÑÊúçÂä°ÈÉΩÂøÖÈ°ªÊ∑ªÂä†Âà∞ËØ•ÂÆπÂô®‰∏≠Ôºå‰ª•‰æø‰∫éÊî∂Âà∞ÁΩëÁªúÊï∞ÊçÆÂêéËÉΩÊâæÂà∞ÂØπÂ∫îÁöÑÊúçÂä°ÔºåÁÑ∂ÂêéÈááÁî®ÂèçÂ∞ÑinvokeË∞ÉÁî®ÔºåËøîÂõûÂæóÂà∞ÁöÑÁªìÊûú„ÄÇ */public class RpcExploreService &#123; private Map&lt;String, Object&gt; objectMap = new HashMap&lt;&gt;(); /** * ÂèØÂØπÂ§ñÊèê‰æõÁöÑÊúçÂä° * * @param className * @param object */ public void explore(String className, Object object) &#123; objectMap.put(className, object); &#125; /** * ÈááÁî®ÂèçÂ∞ÑËøõË°åË∞ÉÁî® * * @param methodParameter * @return */ public Object invoke(MethodParameter methodParameter) &#123; Object object = objectMap.get(methodParameter.getClassName()); if (object == null) &#123; throw new RuntimeException("Êó†ÂØπÂ∫îÁöÑÊâßË°åÁ±ªÔºö„Äê" + methodParameter.getClassName() + "„Äë"); &#125; Method method = null; try &#123; method = object.getClass().getMethod(methodParameter.getMethodName(), methodParameter.getParameterTypes()); &#125; catch (NoSuchMethodException e) &#123; throw new RuntimeException("ÊâßË°åÁ±ªÔºö„Äê" + methodParameter.getClassName() + "„ÄëÊó†ÂØπÂ∫îÁöÑÊâßË°åÊñπÊ≥ïÔºö„Äê" + methodParameter.getMethodName() + "„Äë"); &#125; try &#123; Object result = method.invoke(object, methodParameter.getArguments()); System.out.println(methodParameter); return result; &#125; catch (Exception e) &#123; throw new RuntimeException("invokeÊñπÊ≥ïÊâßË°åÂ§±Ë¥•Ôºö" + e.getMessage()); &#125; &#125;&#125; ÊúçÂä°Á´Ø-ÁΩëÁªúÊï∞ÊçÆÂ§ÑÁêÜ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394package com.springboot.whb.study.rpc.rpc_v1;import com.google.common.base.Joiner;import org.apache.commons.lang3.concurrent.BasicThreadFactory;import java.io.IOException;import java.io.InputStream;import java.io.ObjectOutputStream;import java.io.OutputStream;import java.net.ServerSocket;import java.net.Socket;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;/** * @author: whb * @description: ÊúçÂä°Á´Ø-ÁΩëÁªúÊï∞ÊçÆÂ§ÑÁêÜ * ÁÆÄÂçïÁöÑBIOÊ®°ÂûãÔºåÂºÄÂêØ‰∫Ü‰∏Ä‰∏™ServerSocketÂêéÔºåÊé•Êî∂Âà∞Êï∞ÊçÆÂêéÂ∞±Â∞ÜÂ•óÊé•Â≠ó‰∏¢Áªô‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ãÂ§ÑÁêÜÔºåServerSocketRunnableÊé•Êî∂‰∏Ä‰∏™socket‰πãÂêéÔºå * Ëß£ÊûêÂá∫MethodParameterËØ∑Ê±ÇÂØπË±°ÔºåÁÑ∂ÂêéË∞ÉÁî®ÊúçÂä°Êö¥Èú≤ÁöÑInvokeÊñπÊ≥ïÔºåÂÜçÂÜôÂõûsocket‰º†ËæìÁªôÂÆ¢Êà∑Á´Ø„ÄÇ */public class IOService implements Runnable &#123; private int port; private ServerSocket serverSocket; private RpcExploreService rpcExploreService; ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(10, 100, 60, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(1000), new BasicThreadFactory.Builder().namingPattern(Joiner.on("-").join("thread-pool-", "%s")).build()); private volatile boolean flag; public IOService(RpcExploreService rpcExploreService, int port) throws IOException &#123; this.rpcExploreService = rpcExploreService; this.port = port; this.serverSocket = new ServerSocket(port); this.flag = true; System.out.println("******ÊúçÂä°Á´ØÂêØÂä®‰∫Ü********"); //‰ºòÈõÖÂÖ≥Èó≠ Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; &#123; flag = false; System.out.println("+++++ÊúçÂä°Á´ØÂÖ≥Èó≠‰∫Ü+++++"); &#125;)); &#125; @Override public void run() &#123; while (true) &#123; Socket socket = null; try &#123; socket = serverSocket.accept(); &#125; catch (IOException e) &#123; &#125; if (socket == null) &#123; continue; &#125; threadPoolExecutor.execute(new ServerSocketRunnable(socket)); &#125; &#125; class ServerSocketRunnable implements Runnable &#123; private Socket socket; public ServerSocketRunnable(Socket socket) &#123; this.socket = socket; &#125; @Override public void run() &#123; try &#123; InputStream inputStream = socket.getInputStream(); OutputStream outputStream = socket.getOutputStream(); MethodParameter methodParameter = MethodParameter.convert(inputStream); Object result = rpcExploreService.invoke(methodParameter); ObjectOutputStream output = new ObjectOutputStream(outputStream); output.writeObject(result); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; if (socket != null) &#123; try &#123; socket.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; &#125;&#125; ÂÆ¢Êà∑Á´Ø-ÊúçÂä°ËÆ¢ÈòÖ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667package com.springboot.whb.study.rpc.rpc_v1;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;import java.util.HashMap;import java.util.Map;/** * @author: whb * @description: ÂÆ¢Êà∑Á´Ø-ÊúçÂä°ËÆ¢ÈòÖ * ÊúçÂä°‰ΩøÁî®ÊñπÈúÄË¶Å‰ΩøÁî®registerËøõË°åÊúçÂä°ÁöÑÊ≥®ÂÜåÔºå‰ºöÁîüÊàêÂØπÂ∫îÁöÑÊú¨Âú∞‰ª£ÁêÜÂØπË±°ÔºåÂêéÁª≠Âè™ÈúÄË¶ÅÈÄöËøáÊú¨Âú∞‰ª£ÁêÜÂØπË±°„ÄÇ */public class RpcUsedService &#123; private Map&lt;String, Object&gt; proxyObejctMap = new HashMap&lt;&gt;(); private Map&lt;String, Class&gt; classMap = new HashMap&lt;&gt;(); private IOClient ioClient; public void setIoClient(IOClient ioClient) &#123; this.ioClient = ioClient; &#125; /** * ÊúçÂä°Ê≥®ÂÜå * * @param clazz */ public void register(Class clazz) &#123; String className = clazz.getName(); classMap.put(className, clazz); if (!clazz.isInterface()) &#123; throw new RuntimeException("ÊöÇÊó∂Âè™ÊîØÊåÅÊé•Âè£Á±ªÂûãÁöÑ"); &#125; try &#123; RpcInvocationHandler handler = new RpcInvocationHandler(); handler.setClazz(clazz); Object proxyInstance = Proxy.newProxyInstance(clazz.getClassLoader(), new Class&lt;?&gt;[]&#123;clazz&#125;, handler); proxyObejctMap.put(className, proxyInstance); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; public &lt;T&gt; T get(Class&lt;T&gt; clazz) &#123; String className = clazz.getName(); return (T) proxyObejctMap.get(className); &#125; class RpcInvocationHandler implements InvocationHandler &#123; private Class clazz; public void setClazz(Class clazz) &#123; this.clazz = clazz; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; MethodParameter methodParameter = new MethodParameter(); methodParameter.setClassName(clazz.getName()); methodParameter.setMethodName(method.getName()); methodParameter.setArguments(args); methodParameter.setParameterTypes(method.getParameterTypes()); return ioClient.invoke(methodParameter); &#125; &#125;&#125; ÂÆ¢Êà∑Á´Ø-ÁΩëÁªúÂ§ÑÁêÜ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.springboot.whb.study.rpc.rpc_v1;import java.io.*;import java.net.Socket;/** * @author: whb * @description: ÂÆ¢Êà∑Á´Ø-ÁΩëÁªúÂ§ÑÁêÜ * ‰ª£ÁêÜÂØπË±°Ë¢´Ë∞ÉÁî®ÂêéÁîüÊàê‰∏Ä‰∏™MethodParameterÂØπË±°ÔºåÈÄöËøáÊ≠§IOClientÊääÊï∞ÊçÆ‰º†ËæìÂà∞ÊúçÂä°Á´ØÔºåÂπ∂‰∏îËøîÂõûÂØπÂ∫îÁöÑÊï∞ÊçÆ„ÄÇ */public class IOClient &#123; private String ip; private int port; public IOClient(String ip, int port) &#123; this.ip = ip; this.port = port; &#125; public Object invoke(MethodParameter methodParameter) &#123; Socket socket = null; try &#123; socket = new Socket(ip, port); OutputStream outputStream = socket.getOutputStream(); ObjectOutputStream output = new ObjectOutputStream(outputStream); output.writeUTF(methodParameter.getClassName()); output.writeUTF(methodParameter.getMethodName()); output.writeObject(methodParameter.getParameterTypes()); output.writeObject(methodParameter.getArguments()); InputStream inputStream = socket.getInputStream(); ObjectInputStream input = new ObjectInputStream(inputStream); return input.readObject(); &#125; catch (Exception e) &#123; System.out.println(e.getMessage()); &#125; finally &#123; if (socket != null) &#123; try &#123; socket.close(); &#125; catch (IOException e) &#123; throw new RuntimeException("socketÂÖ≥Èó≠Â§±Ë¥•"); &#125; &#125; &#125; return null; &#125;&#125; ÂÆûË∑µ-ÊúçÂä°Á´Ø 1234567891011121314151617181920212223package com.springboot.whb.study.rpc.rpc_v1;import com.springboot.whb.study.rpc.rpc_v1.expore.HelloWorldImpl;/** * @author: whb * @description: ÊúçÂä°Á´Ø */public class Service &#123; public static void main(String[] args) &#123; RpcExploreService rpcExploreService = new RpcExploreService(); //‰º†ÂÖ•ÁöÑÂ≠óÁ¨¶‰∏≤ÊòØÊé•Âè£ÁöÑÂÖ®ÂêçÁß∞ rpcExploreService.explore("com.springboot.whb.study.rpc.rpc_v1.expore.HelloWorld", new HelloWorldImpl()); try &#123; //ÂºÄÂêØ11111Á´ØÂè£ÁõëÂê¨ÊúçÂä° Runnable ioService = new IOService(rpcExploreService, 11111); new Thread(ioService).start(); &#125; catch (Exception e) &#123; &#125; &#125;&#125; ÂÆûË∑µ-ÂÆ¢Êà∑Á´Ø 123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.springboot.whb.study.rpc.rpc_v1;import com.google.common.base.Joiner;import com.springboot.whb.study.rpc.rpc_v1.expore.HelloWorld;import org.apache.commons.lang3.concurrent.BasicThreadFactory;import java.util.Random;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;/** * @author: whb * @description: ÂÆ¢Êà∑Á´Ø */public class Client &#123; public static final ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(10, 100, 60, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(1000), new BasicThreadFactory.Builder().namingPattern(Joiner.on("-").join("client-thread-pool-", "%s")).build()); public static void main(String[] args) &#123; RpcUsedService rpcUsedService = new RpcUsedService(); rpcUsedService.register(HelloWorld.class); try &#123; IOClient ioClient = new IOClient("127.0.0.1", 11111); //ÁΩëÁªúÂ•óÊé•Â≠óËøûÊé• Âêå‰∏äÊòØ10001Á´ØÂè£ rpcUsedService.setIoClient(ioClient); HelloWorld helloWorld = rpcUsedService.get(HelloWorld.class); //ÁîüÊàêÁöÑÊú¨Âú∞‰ª£ÁêÜÂØπË±° proxy for (int i = 0; i &lt; 100; i++) &#123; threadPoolExecutor.execute(() -&gt; &#123; long start = System.currentTimeMillis(); int a = new Random().nextInt(100); int b = new Random().nextInt(100); int c = helloWorld.add(a, b); // .add Êìç‰ΩúÂ∞±ÊòØÂ±èËîΩ‰∫ÜÊâÄÊúâÁöÑÁªÜËäÇÔºåÊèê‰æõÁªôÂÆ¢Êà∑Á´Ø‰ΩøÁî®ÁöÑÊñπÊ≥ï System.out.println("a: " + a + ", b:" + b + ", c=" + c + ", ËÄóÊó∂:" + (System.currentTimeMillis() - start)); &#125;); &#125; &#125; catch (Exception e) &#123; throw new RuntimeException("ÂÆ¢Êà∑Á´ØÊâßË°åÂá∫Èîô:&#123;&#125;", e); &#125; finally &#123; threadPoolExecutor.shutdown(); &#125; &#125;&#125; ÊúçÂä°Êé•Âè£ 12345678910package com.springboot.whb.study.rpc.rpc_v1.expore;/** * @author: whb * @description: Êé•Âè£ÂÆö‰πâ */public interface HelloWorld &#123; int add(int a, int b);&#125; ÊúçÂä°Êé•Âè£ÂÆûÁé∞ 123456789101112131415161718192021222324package com.springboot.whb.study.rpc.rpc_v1.expore;import java.util.Random;/** * @author: whb * @description: Êé•Âè£ÂÆûÁé∞Á±ª */public class HelloWorldImpl implements HelloWorld &#123; @Override public int add(int a, int b) &#123; long start = System.currentTimeMillis(); try &#123; Thread.sleep(new Random().nextInt(10000)); // ÊïÖÊÑèÊ∑ªÂä†‰∫ÜËÄóÊó∂Êìç‰ΩúÔºå‰ª•‰æø‰∫éÊ®°ÊãüÁúüÂÆûÁöÑË∞ÉÁî®Êìç‰Ωú &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; int c = a + b; System.out.println(Thread.currentThread().getName() + " ËÄóÊó∂:" + (System.currentTimeMillis() - start)); return c; &#125;&#125; ËøêË°åÊïàÊûú ÊÄªÁªì ËøôÂè™ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑRPCÂÆûË∑µÔºåÂåÖÂê´‰∫ÜÊúçÂä°Êö¥Èú≤„ÄÅÊúçÂä°Ê≥®ÂÜåÔºàProxyÁîüÊàêÔºâ„ÄÅBIOÊ®°ÂûãËøõË°åÁΩëÁªú‰º†ËæìÔºåjavaÈªòËÆ§ÁöÑÂ∫èÂàóÂåñÊñπÊ≥ïÔºåÂØπRPCÊúâ‰∏Ä‰∏™ÂàùÊ≠•ÁöÑËÆ§ËØÜÂíå‰∫ÜËß£ÔºåÁü•ÈÅìRPCÂøÖÈ°ªÂåÖÂê´ÁöÑÊ®°Âùó„ÄÇ ‰∏çËøáËøòÊòØÊúâÂæàÂ§öÈúÄË¶Å‰ºòÂåñÁöÑÁÇπ‰ª•ÊîπËøõÔºö IOÊ®°ÂûãÔºö‰ΩøÁî®ÁöÑÊòØBIOÊ®°ÂûãÔºåÂèØ‰ª•ÊîπËøõÊç¢ÊàêNIOÊ®°ÂûãÔºåÂºïÂÖ•netty; Ê±†ÂåñÔºö‰∏çË¶ÅÈöèÊÑèÊñ∞Âª∫Á∫øÁ®ãÔºåÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩÂ∫îÊúâÁ∫øÁ®ãÊ±†Áªü‰∏ÄÁÆ°ÁêÜ; ÊúçÂä°ÂèëÁé∞ÔºöÊú¨Âú∞Ê®°ÊãüÁöÑÂ∞èdemoÔºåÂπ∂Ê≤°ÊúâÊúçÂä°ÂèëÁé∞ÔºåÂèØ‰ª•ÈááÁî®zkÁÆ°ÁêÜ; Â∫èÂàóÂåñÔºöjavaÊú¨Ë∫´Ëá™Â∏¶ÁöÑÂ∫èÂàóÂåñÊïàÁéáÂæà‰ΩéÔºåÂèØ‰ª•Êç¢ÊàêHessianÔºàDUBBOÈªòËÆ§ÈááÁî®ÂÖ∂‰Ωú‰∏∫Â∫èÂàóÂåñÂ∑•ÂÖ∑Ôºâ„ÄÅProtobufÔºàProtobufÊòØÁî±GoogleÊèêÂá∫ÁöÑ‰∏ÄÁßçÊîØÊåÅÂ§öËØ≠Ë®ÄÁöÑË∑®Âπ≥Âè∞ÁöÑÂ∫èÂàóÂåñÊ°ÜÊû∂ÔºâÁ≠â; ËøòÊúâ‰æãÂ¶ÇÊúçÂä°ÁªüËÆ°„ÄÅ‰ºòÈõÖ‰∏ãÁ∫ø„ÄÅË¥üËΩΩÂùáË°°Á≠â‰πüÈÉΩÊòØ‰∏Ä‰∏™ÊàêÁÜüÁöÑRPCÊ°ÜÊû∂ÂøÖÈ°ªË¶ÅËÄÉËôëÂà∞ÁöÑÁÇπ„ÄÇ]]></content>
      <categories>
        <category>RPC</category>
      </categories>
      <tags>
        <tag>RPC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HexoÊê≠Âª∫ÂçöÂÆ¢Â∏∏ËßÅÈóÆÈ¢ò]]></title>
    <url>%2Fposts%2F5b526bb.html</url>
    <content type="text"><![CDATA[No Layout:index.html ÈóÆÈ¢òÊèèËø∞ ÊúÄËøëÂØπHexo‰ª•ÂèäNext‰∏ªÈ¢òÂÅö‰∫ÜÂçáÁ∫ßÔºåÂçáÁ∫ß‰πãÂêéÂú®ÊâßË°åhexo gÁºñËØëÊó∂Âá∫Áé∞‰∫ÜNo layout:index.htmlÁöÑÈîôËØØÔºåÂ¶Ç‰∏ãÂõæÔºö Ëß£ÂÜ≥ÊÄùË∑Ø Êü•ÁúãhexoÊèí‰ª∂ÂÆâË£ÖÊÉÖÂÜµÔºåÂõ†ÂÜÖÂÆπËæÉÂ§öÔºåÂè™ÈÉ®ÂàÜÊà™ÂõæÔºö 1npm ls --depth 0 hexoÁöÑ‰∏Ä‰∫õÊèí‰ª∂Êú™ÂÆâË£Ö 12npm ERR! peer dep missing: eslint@&gt;= 4.12.1, required by babel-eslint@10.0.3npm ERR! peer dep missing: eslint@&gt;= 4.12.1, required by babel-eslint@10.0.3 ÈÄê‰∏ÄÂÆâË£ÖÁº∫Â§±ÁöÑÊèí‰ª∂ 1npm install eslint --save ÊâßË°ånpm installÂêéÔºåÊâßË°ånpm audit fix ËÆøÈóÆHexoÂçöÂÆ¢Âá∫Áé∞‚ÄúCannot GET/xxx‚ÄùÈîôËØØ ÈóÆÈ¢òÊèèËø∞ Âú®HexoÂçöÂÆ¢‰∏≠ÔºåÂá∫Áé∞Cannot GET/xxxÈîôËØØ‰æøÊÑèÂë≥ÁùÄxxxÊñá‰ª∂Êú™Ë¢´ÊâæÂà∞„ÄÇ Cannot GET/xxxÈîôËØØÊú¨Ë¥®ÊòØhexo serverËøîÂõûÁöÑ‰∏Ä‰∏™404ÈîôËØØ„ÄÇ Ëß£ÂÜ≥ÊÄùË∑Ø Âà§Êñ≠publicÁõÆÂΩï‰∏ãxxxÊñá‰ª∂ÊòØÂê¶Â≠òÂú®„ÄÇ Â¶ÇÊûúËØ¥xxx.html‰∏çÂ≠òÂú®ÔºåÈÇ£‰πàÊâßË°åhexo cÔºåhexo gÈáçÊñ∞ÁîüÊàê‰∏ÄÊ¨°ÔºåÂõûÂà∞Ê≠•È™§1„ÄÇ Ê≠•È™§2ÊâßË°åÂÆåÂêéxxx.html‰ªç‰∏çÂ≠òÂú®ÔºåÊâßË°ånpm audit fixÔºåÊü•ÁúãÊòØÂê¶Â∞ë‰∫Ü‰ªÄ‰πàÁªÑ‰ª∂ÔºåÈÄöËøánpm install hexo-xxx-xxx ÂÆâË£ÖÂç≥ÂèØ„ÄÇ Ê≠•È™§3ÂÆåÊàê‰πãÂêéÔºåÊâßË°åhexo cÔºåhexo gÈáçÊñ∞ÁîüÊàêÈùôÊÄÅÊñá‰ª∂„ÄÇ ‰ªçÁÑ∂ÊúâÈóÆÈ¢òÔºåËØ∑ÂÜçÂèÇËÄÉÊ≠§ÊñáÔºöhttps://www.cnblogs.com/Sroot/p/6305938.html]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÊçÆÂ∫ì„ÄÅÁºìÂ≠ò‰∏ç‰∏ÄËá¥ÈóÆÈ¢ò]]></title>
    <url>%2Fposts%2Fe755a8c.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ Âè™Ë¶ÅÁî®ÁºìÂ≠òÔºåÂ∞±ÂèØËÉΩ‰ºöÊ∂âÂèäÂà∞ÁºìÂ≠ò‰∏éÊï∞ÊçÆÂ∫ìÂèåÂ≠òÂÇ®ÂèåÂÜôÔºåÂè™Ë¶ÅÊòØÂèåÂÜôÔºåÂ∞±‰∏ÄÂÆö‰ºöÊúâÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢òÔºåÂ¶Ç‰Ωï‰øùËØÅÁºìÂ≠ò‰∏éÊï∞ÊçÆÂ∫ìÁöÑÂèåÂÜô‰∏ÄËá¥ÊÄßÔºü ËØªÂÜô‰∏≤Ë°åÂåñ ‰∏ÄËà¨Êù•ËØ¥ÔºåÂ¶ÇÊûúÂÖÅËÆ∏ÁºìÂ≠òÂèØ‰ª•Á®çÂæÆË∑üÊï∞ÊçÆÂ∫ìÂÅ∂Â∞îÊúâ‰∏ç‰∏ÄËá¥Ôºå‰πüÂ∞±ÊòØËØ¥Á≥ªÁªü‰∏çÊòØ‰∏•Ê†ºË¶ÅÊ±ÇÁºìÂ≠ò+Êï∞ÊçÆÂ∫ìÂøÖÈ°ª‰øùÊåÅ‰∏ÄËá¥ÊÄßÁöÑËØùÔºåÂèØ‰ª•ÈááÁî®ËØªÂÜôËØ∑Ê±Ç‰∏≤Ë°åÂåñÔºö Âç≥ËØªËØ∑Ê±ÇÂíåÂÜôËØ∑Ê±Ç‰∏≤Âà∞‰∏Ä‰∏™ÂÜÖÂ≠òÈòüÂàóÈáåÂéªÔºå‰ªéËÄåËææÂà∞Èò≤Ê≠¢Âπ∂ÂèëËØ∑Ê±ÇÂØºËá¥Êï∞ÊçÆÈîô‰π±ÁöÑÈóÆÈ¢ò„ÄÇ ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºå‰∏≤Ë°åÂåñÂèØ‰ª•‰øùËØÅ‰∏ÄÂÆö‰∏ç‰ºöÂá∫Áé∞‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµÔºå‰ΩÜÊòØÂÆÉ‰πü‰ºöÂØºËá¥Á≥ªÁªüÁöÑÂêûÂêêÈáèÂ§ßÂπÖÂ∫¶Èôç‰Ωé„ÄÇ ‰ª£Á†ÅÂÆûÁé∞Â§ßËá¥Â¶Ç‰∏ãÔºàÁΩë‰∏äÊâæÁöÑÔºâÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * ËØ∑Ê±ÇÂºÇÊ≠•Â§ÑÁêÜÁöÑserviceÂÆûÁé∞ * @author Administrator * */@Service("requestAsyncProcessService") public class RequestAsyncProcessServiceImpl implements RequestAsyncProcessService &#123; @Override public void process(Request request) &#123; try &#123; // ÂÖàÂÅöËØªËØ∑Ê±ÇÁöÑÂéªÈáç RequestQueue requestQueue = RequestQueue.getInstance(); Map&lt;Integer, Boolean&gt; flagMap = requestQueue.getFlagMap(); if(request instanceof ProductInventoryDBUpdateRequest) &#123; // Â¶ÇÊûúÊòØ‰∏Ä‰∏™Êõ¥Êñ∞Êï∞ÊçÆÂ∫ìÁöÑËØ∑Ê±ÇÔºåÈÇ£‰πàÂ∞±Â∞ÜÈÇ£‰∏™productIdÂØπÂ∫îÁöÑÊ†áËØÜËÆæÁΩÆ‰∏∫true flagMap.put(request.getProductId(), true); &#125; else if(request instanceof ProductInventoryCacheRefreshRequest) &#123; Boolean flag = flagMap.get(request.getProductId()); // Â¶ÇÊûúflagÊòØnull if(flag == null) &#123; flagMap.put(request.getProductId(), false); &#125; // Â¶ÇÊûúÊòØÁºìÂ≠òÂà∑Êñ∞ÁöÑËØ∑Ê±ÇÔºåÈÇ£‰πàÂ∞±Âà§Êñ≠ÔºåÂ¶ÇÊûúÊ†áËØÜ‰∏ç‰∏∫Á©∫ÔºåËÄå‰∏îÊòØtrueÔºåÂ∞±ËØ¥Êòé‰πãÂâçÊúâ‰∏Ä‰∏™Ëøô‰∏™ÂïÜÂìÅÁöÑÊï∞ÊçÆÂ∫ìÊõ¥Êñ∞ËØ∑Ê±Ç if(flag != null &amp;&amp; flag) &#123; flagMap.put(request.getProductId(), false); &#125; // Â¶ÇÊûúÊòØÁºìÂ≠òÂà∑Êñ∞ÁöÑËØ∑Ê±ÇÔºåËÄå‰∏îÂèëÁé∞Ê†áËØÜ‰∏ç‰∏∫Á©∫Ôºå‰ΩÜÊòØÊ†áËØÜÊòØfalse // ËØ¥ÊòéÂâçÈù¢Â∑≤ÁªèÊúâ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊõ¥Êñ∞ËØ∑Ê±Ç+‰∏Ä‰∏™ÁºìÂ≠òÂà∑Êñ∞ËØ∑Ê±Ç‰∫ÜÔºåÂ§ßÂÆ∂ÊÉ≥‰∏ÄÊÉ≥ if(flag != null &amp;&amp; !flag) &#123; // ÂØπ‰∫éËøôÁßçËØªËØ∑Ê±ÇÔºåÁõ¥Êé•Â∞±ËøáÊª§ÊéâÔºå‰∏çË¶ÅÊîæÂà∞ÂêéÈù¢ÁöÑÂÜÖÂ≠òÈòüÂàóÈáåÈù¢Âéª‰∫Ü return; &#125; &#125; // ÂÅöËØ∑Ê±ÇÁöÑË∑ØÁî±ÔºåÊ†πÊçÆÊØè‰∏™ËØ∑Ê±ÇÁöÑÂïÜÂìÅidÔºåË∑ØÁî±Âà∞ÂØπÂ∫îÁöÑÂÜÖÂ≠òÈòüÂàó‰∏≠Âéª ArrayBlockingQueue&lt;Request&gt; queue = getRoutingQueue(request.getProductId()); // Â∞ÜËØ∑Ê±ÇÊîæÂÖ•ÂØπÂ∫îÁöÑÈòüÂàó‰∏≠ÔºåÂÆåÊàêË∑ØÁî±Êìç‰Ωú queue.put(request); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; /** * Ëé∑ÂèñË∑ØÁî±Âà∞ÁöÑÂÜÖÂ≠òÈòüÂàó * @param productId ÂïÜÂìÅid * @return ÂÜÖÂ≠òÈòüÂàó */ private ArrayBlockingQueue&lt;Request&gt; getRoutingQueue(Integer productId) &#123; RequestQueue requestQueue = RequestQueue.getInstance(); // ÂÖàËé∑ÂèñproductIdÁöÑhashÂÄº String key = String.valueOf(productId); int h; int hash = (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16); // ÂØπhashÂÄºÂèñÊ®°ÔºåÂ∞ÜhashÂÄºË∑ØÁî±Âà∞ÊåáÂÆöÁöÑÂÜÖÂ≠òÈòüÂàó‰∏≠ÔºåÊØîÂ¶ÇÂÜÖÂ≠òÈòüÂàóÂ§ßÂ∞è8 // Áî®ÂÜÖÂ≠òÈòüÂàóÁöÑÊï∞ÈáèÂØπhashÂÄºÂèñÊ®°‰πãÂêéÔºåÁªìÊûú‰∏ÄÂÆöÊòØÂú®0~7‰πãÈó¥ // ÊâÄ‰ª•‰ªª‰Ωï‰∏Ä‰∏™ÂïÜÂìÅidÈÉΩ‰ºöË¢´Âõ∫ÂÆöË∑ØÁî±Âà∞ÂêåÊ†∑ÁöÑ‰∏Ä‰∏™ÂÜÖÂ≠òÈòüÂàó‰∏≠ÂéªÁöÑ int index = (requestQueue.queueSize() - 1) &amp; hash; System.out.println("===========Êó•Âøó===========: Ë∑ØÁî±ÂÜÖÂ≠òÈòüÂàóÔºåÂïÜÂìÅid=" + productId + ", ÈòüÂàóÁ¥¢Âºï=" + index); return requestQueue.getQueue(index); &#125;&#125; Cache Aside Pattern Cache Aside PattenÔºöÁªèÂÖ∏ÁöÑÁºìÂ≠ò+Êï∞ÊçÆÂ∫ìËØªÂÜôÊ®°Âºè„ÄÇ ËØªÁöÑÊó∂ÂÄôÔºåÂÖàËØªÁºìÂ≠òÔºåÁºìÂ≠òÊ≤°ÊúâÁöÑËØùÔºåÂ∞±ËØªÊï∞ÊçÆÂ∫ìÔºåÁÑ∂ÂêéÂèñÂá∫Êï∞ÊçÆÂêéÊîæÂÖ•ÁºìÂ≠òÔºåÂêåÊó∂ËøîÂõûÂìçÂ∫î„ÄÇÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºåÂÖàÂà†Èô§ÁºìÂ≠òÔºåÁÑ∂ÂêéÂÜçÊõ¥Êñ∞Êï∞ÊçÆÂ∫ì„ÄÇ ‰∏∫‰ªÄ‰πàÊòØÂà†Èô§ÁºìÂ≠òÔºåËÄå‰∏çÊòØÊõ¥Êñ∞ÁºìÂ≠òÔºü ‰πãÊâÄ‰ª•Êõ¥Êñ∞ÁöÑÊó∂ÂÄôÂè™ÊòØÂà†Èô§ÁºìÂ≠òÔºåÂõ†‰∏∫ÂØπ‰∫é‰∏Ä‰∫õÂ§çÊùÇÊúâÈÄªËæëÁöÑÁºìÂ≠òÊï∞ÊçÆÔºåÊØèÊ¨°Êï∞ÊçÆÂèòÊõ¥ÈÉΩÊõ¥Êñ∞‰∏ÄÊ¨°ÁºìÂ≠ò‰ºöÈÄ†ÊàêÈ¢ùÂ§ñÁöÑË¥üÊãÖÔºåÂè™ÊòØÂà†Èô§ÁºìÂ≠òÔºåËÆ©ËØ•Êï∞ÊçÆ‰∏ã‰∏ÄÊ¨°Ë¢´‰ΩøÁî®ÁöÑÊó∂ÂÄôÂÜçÂéªÊâßË°åËØªÁöÑÊìç‰ΩúÊù•ÈáçÊñ∞ÁºìÂ≠òÔºåËøôÈáåÈááÁî®ÁöÑÊòØÊáíÂä†ËΩΩÁöÑÁ≠ñÁï•„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºå‰∏Ä‰∏™ÁºìÂ≠òÊ∂âÂèäÁöÑË°®ÁöÑÂ≠óÊÆµÔºåÂú®1ÂàÜÈíüÂÜÖÂ∞±‰øÆÊîπ‰∫Ü20Ê¨°ÔºåÊàñËÄÖÊòØ100Ê¨°ÔºåÈÇ£‰πàÁºìÂ≠òÊõ¥Êñ∞20Ê¨°Ôºå100Ê¨°;‰ΩÜÊòØËøô‰∏™ÁºìÂ≠òÂú®1ÂàÜÈíüÂÜÖÂ∞±Ë¢´ËØªÂèñ‰∫Ü1Ê¨°ÔºåÂõ†Ê≠§ÊØèÊ¨°Êõ¥Êñ∞ÁºìÂ≠òÂ∞±‰ºöÊúâÂ§ßÈáèÁöÑÂÜ∑Êï∞ÊçÆÔºåÂØπ‰∫éÁºìÂ≠òÁ¨¶Âêà28ÈªÑÈáëÊ≥ïÂàôÔºå20%ÁöÑÊï∞ÊçÆÔºåÂç†Áî®‰∫Ü80%ÁöÑËÆøÈóÆÈáè„ÄÇ ÊúÄÂàùÁ∫ßÁöÑÁºìÂ≠ò‰∏ç‰∏ÄËá¥ÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ°à ÈóÆÈ¢òÔºö ÂÖà‰øÆÊîπÊï∞ÊçÆÂ∫ìÔºåÂÜçÂà†Èô§ÁºìÂ≠ò„ÄÇÂ¶ÇÊûúÂà†Èô§ÁºìÂ≠òÂ§±Ë¥•‰∫ÜÔºåÈÇ£‰πàÂØºËá¥Êï∞ÊçÆÂ∫ì‰∏≠ÊòØÊñ∞Êï∞ÊçÆÔºåÁºìÂ≠ò‰∏≠ÊòØÊóßÊï∞ÊçÆÔºåÊï∞ÊçÆÂ∞±‰ºöÂá∫Áé∞‰∏ç‰∏ÄËá¥ÊÄß„ÄÇ Ëß£ÂÜ≥ÊÄùË∑ØÔºö ÂÖàÂà†Èô§ÁºìÂ≠òÔºåÂÜç‰øÆÊîπÊï∞ÊçÆÂ∫ì„ÄÇÂ¶ÇÊûúÊï∞ÊçÆÂ∫ì‰øÆÊîπÂ§±Ë¥•‰∫ÜÔºåÈÇ£‰πàÊï∞ÊçÆÂ∫ì‰∏≠ÊòØÊóßÊï∞ÊçÆÔºåÁºìÂ≠ò‰∏≠ÊòØÁ©∫ÁöÑÔºåÈÇ£‰πàÊï∞ÊçÆÂ∞±‰∏ç‰ºö‰∏ç‰∏ÄËá¥„ÄÇ Âõ†‰∏∫ËØªÁöÑÊó∂ÂÄôÁºìÂ≠ò‰∏≠Ê≤°ÊúâÔºåÂàôËØªÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊóßÊï∞ÊçÆÔºåÁÑ∂ÂêéÂÜçÊõ¥Êñ∞Âà∞ÁºìÂ≠ò‰∏≠„ÄÇ ÊØîËæÉÂ§çÊùÇÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÈóÆÈ¢ò ÈóÆÈ¢òÔºö Êï∞ÊçÆÂèëÁîü‰∫ÜÂèòÊõ¥ÔºåÂÖàÂà†Èô§‰∫ÜÁºìÂ≠òÔºåÁÑ∂ÂêéË¶ÅÂéª‰øÆÊîπÊï∞ÊçÆÂ∫ìÔºå‰ΩÜÊòØËøòÊ≤°Êù•ÂæóÂèä‰øÆÊîπÔºå‰∏Ä‰∏™ËØ∑Ê±ÇËøáÊù•ÔºåÂéªËØªÁºìÂ≠òÔºåÂèëÁé∞ÁºìÂ≠òÊòØÁ©∫ÁöÑÔºåÂéªÊü•ËØ¢Êï∞ÊçÆÂ∫ìÔºåÊü•Âà∞‰∫Ü‰øÆÊîπÂâçÁöÑÊóßÊï∞ÊçÆÔºåÊîæÂà∞‰∫ÜÁºìÂ≠ò‰∏≠Ôºå ÈöèÂêéÊï∞ÊçÆÂèòÊõ¥ÁöÑÁ®ãÂ∫èÂÆåÊàê‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑ‰øÆÊîπÔºåËøôÊ†∑Â∞±‰ºöÈÄ†ÊàêÊï∞ÊçÆÂ∫ìÂíåÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄËá¥„ÄÇ Ëß£ÂÜ≥ÊÄùË∑ØÔºö Êõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÊ†πÊçÆÊï∞ÊçÆÁöÑÂîØ‰∏ÄÊ†áËØÜÔºåÂ∞ÜÊìç‰ΩúË∑ØÁî±Âà∞‰∏Ä‰∏™JVMÁöÑÂÜÖÈÉ®ÈòüÂàó‰∏≠„ÄÇËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÂèëÁé∞Êï∞ÊçÆ‰∏çÂú®ÁºìÂ≠ò‰∏≠ÔºåÈÇ£‰πàÂ∞ÜÈáçÊñ∞ËØªÂèñÊï∞ÊçÆ+Êõ¥Êñ∞ÁºìÂ≠òÁöÑÊìç‰ΩúÔºåÊ†πÊçÆÂîØ‰∏ÄÊ†áËØÜË∑ØÁî±‰πãÂêéÔºå‰πüÂèëÈÄÅÂêå‰∏Ä‰∏™JVMÂÜÖÈÉ®ÈòüÂàó‰∏≠„ÄÇ ‰∏Ä‰∏™ÈòüÂàóÂØπÂ∫î‰∏Ä‰∏™Â∑•‰ΩúÁ∫øÁ®ãÔºåÊØè‰∏™Â∑•‰ΩúÁ∫øÁ®ã‰∏≤Ë°åÊãøÂà∞ÂØπÂ∫îÁöÑÊìç‰ΩúÔºåÁÑ∂Âêé‰∏ÄÊù°‰∏ÄÊù°ÁöÑÊâßË°å„ÄÇËøôÊ†∑Ôºå‰∏Ä‰∏™Êï∞ÊçÆÂèòÊõ¥ÁöÑÊìç‰ΩúÔºåÂÖàÂà†Èô§ÁºìÂ≠òÔºåÂÜçÂéªÊõ¥Êñ∞Êï∞ÊçÆÂ∫ìÔºå‰ΩÜÊòØËøòÊ≤°ÂÆåÊàêÊõ¥Êñ∞ÔºåÊ≠§Êó∂‰∏Ä‰∏™ ËØªËØ∑Ê±ÇËøáÊù•ÔºåËØªÂà∞‰∫ÜÁ©∫ÁöÑÁºìÂ≠òÔºåÈÇ£‰πàÂèØ‰ª•ÂÖàÂ∞ÜÁºìÂ≠òÊõ¥Êñ∞ÁöÑËØ∑Ê±ÇÂèëÈÄÅÁöÑÈòüÂàó‰∏≠ÔºåÊ≠§Êó∂‰ºöÂú®ÈòüÂàó‰∏≠ÁßØÂéãÔºåÁÑ∂ÂêéÂêåÊ≠•Á≠âÂæÖÁºìÂ≠òÊõ¥Êñ∞ÂÆåÊàê„ÄÇ ËøôÊ†∑Êúâ‰∏Ä‰∏™‰ºòÁÇπÔºö‰∏Ä‰∏™ÈòüÂàó‰∏≠Â§ö‰∏™Êõ¥Êñ∞ÁºìÂ≠òÁöÑËØ∑Ê±Ç‰∏≤Âú®‰∏ÄËµ∑ÊòØÊ≤°ÊÑè‰πâÁöÑÔºåÂõ†Ê≠§ÂèØ‰ª•ÂÅöËøáÊª§„ÄÇÂ¶ÇÊûúÂèëÁé∞ÈòüÂàó‰∏≠Â∑≤ÁªèÊúâ‰∏Ä‰∏™Êõ¥Êñ∞ÁºìÂ≠òÁöÑËØ∑Ê±ÇÔºåÈÇ£‰πà‰∏çÂÜçÊîæÊõ¥Êñ∞ÁºìÂ≠òÁöÑËØ∑Ê±ÇÊìç‰ΩúËøõÂéªÔºåÁõ¥Êé•Á≠âÂæÖÂâçÈù¢ÁöÑÊõ¥Êñ∞Êìç‰ΩúÂÆåÊàêÂç≥ÂèØ„ÄÇ ÂæÖÈÇ£‰∏™ÈòüÂàóÂØπÂ∫îÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÂÆåÊàê‰∫Ü‰∏ä‰∏Ä‰∏™Êìç‰ΩúÁöÑÊï∞ÊçÆÂ∫ìÁöÑ‰øÆÊîπ‰πãÂêéÔºåÊâç‰ºöÂéªÊâßË°å‰∏ã‰∏Ä‰∏™Êìç‰ΩúÔºå‰πüÂ∞±ÊòØÁºìÂ≠òÊõ¥Êñ∞ÁöÑÊìç‰ΩúÔºåÊ≠§Êó∂‰ºö‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ËØªÂèñÊúÄÊñ∞ÁöÑÂÄºÔºåÁÑ∂ÂêéÂÜôÂÖ•ÁºìÂ≠ò‰∏≠„ÄÇ Â¶ÇÊûúËØ∑Ê±ÇËøòÂú®Á≠âÂæÖÊó∂Èó¥ËåÉÂõ¥ÂÜÖÔºå‰∏çÊñ≠ËΩÆËØ¢ÂèëÁé∞ÂèØ‰ª•ÂèñÂà∞ÂÄº‰∫ÜÔºåÈÇ£‰πàÂ∞±Áõ¥Êé•ËøîÂõûÔºõÂ¶ÇÊûúËØ∑Ê±ÇÁ≠âÂæÖÁöÑÊó∂Èó¥Ë∂ÖËøá‰∏ÄÂÆöÊó∂ÈïøÔºåÈÇ£‰πàËøô‰∏ÄÊ¨°Áõ¥Êé•‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ËØªÂèñÂΩìÂâçÁöÑÊóßÂÄº„ÄÇ È´òÂπ∂ÂèëÂú∫ÊôØ‰∏ãÔºåËØ•ÊñπÊ°àË¶ÅÊ≥®ÊÑèÂ¶Ç‰∏ãÁöÑÈóÆÈ¢òÔºö ËØªËØ∑Ê±ÇÈïøÊó∂ÈòªÂ°û Áî±‰∫éËØªËØ∑Ê±ÇËøõË°å‰∫ÜÈùûÂ∏∏ËΩªÂ∫¶ÁöÑÂºÇÊ≠•ÂåñÔºåÊâÄ‰ª•‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèËØªË∂ÖÊó∂ÁöÑÈóÆÈ¢òÔºåÊØè‰∏™ËØªËØ∑Ê±ÇÂøÖÈ°ªÂú®Ë∂ÖÊó∂Êó∂Èó¥ËåÉÂõ¥ÂÜÖËøîÂõû„ÄÇ ËØ•ÊñπÊ°àÊúÄÂ§ßÁöÑÈ£éÈô©ÁÇπÂú®‰∫éÔºåÂèØËÉΩÊï∞ÊçÆÊõ¥Êñ∞ÂæàÈ¢ëÁπÅÔºåÂØºËá¥ÈòüÂàó‰∏≠ÁßØÂéã‰∫ÜÂ§ßÈáèÊõ¥Êñ∞Êìç‰ΩúÂú®ÈáåÈù¢ÔºåÁÑ∂ÂêéËØªËØ∑Ê±Ç‰ºöÂèëÁîüÂ§ßÈáèÁöÑË∂ÖÊó∂ÔºåÊúÄÂêéÂØºËá¥Â§ßÈáèÁöÑËØ∑Ê±ÇÁõ¥Êé•Ëµ∞Êï∞ÊçÆÂ∫ì„ÄÇ ÊâÄ‰ª•Âä°ÂøÖÈÄöËøá‰∏Ä‰∫õÊ®°ÊãüÁúüÂÆûÁöÑÊµãËØïÔºåÁúãÁúãÊõ¥Êñ∞Êï∞ÊçÆÁöÑÈ¢ëÁéáÊòØÊÄéÊ†∑ÁöÑ„ÄÇ Âè¶Â§ñ‰∏ÄÁÇπÔºåÂõ†‰∏∫‰∏Ä‰∏™ÈòüÂàó‰∏≠ÔºåÂèØËÉΩ‰ºöÁßØÂéãÈíàÂØπÂ§ö‰∏™Êï∞ÊçÆÈ°πÁöÑÊõ¥Êñ∞Êìç‰ΩúÔºåÂõ†Ê≠§ÈúÄË¶ÅÊ†πÊçÆËá™Â∑±ÁöÑ‰∏öÂä°ÊÉÖÂÜµËøõË°åÊµãËØïÔºåÂèØËÉΩÈúÄË¶ÅÈÉ®ÁΩ≤Â§ö‰∏™ÊúçÂä°ÔºåÊØè‰∏™ÊúçÂä°ÂàÜÊëä‰∏Ä‰∫õÊï∞ÊçÆÁöÑÊõ¥Êñ∞Êìç‰Ωú„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™ÂÜÖÂ≠òÈòüÂàóÈáåÁßØÂéã 100 ‰∏™ÂïÜÂìÅÁöÑÂ∫ìÂ≠ò‰øÆÊîπÊìç‰ΩúÔºåÊØè‰∏™Â∫ìÂ≠ò‰øÆÊîπÊìç‰ΩúË¶ÅËÄóË¥π 10ms ÂéªÂÆåÊàê„ÄÇÈÇ£‰πàÊúÄÂêé‰∏Ä‰∏™ÂïÜÂìÅÁöÑËØªËØ∑Ê±ÇÔºåÂèØËÉΩÁ≠âÂæÖ 10*100=1000ms=1s ÂêéÔºåÊâçËÉΩÂæóÂà∞Êï∞ÊçÆÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÂØºËá¥ËØªËØ∑Ê±ÇÁöÑÈïøÊó∂ÈòªÂ°û„ÄÇ Âõ†Ê≠§Ôºå‰∏ÄÂÆöË¶ÅÊ†πÊçÆÂÆûÈôÖ‰∏öÂä°Á≥ªÁªüÁöÑËøêË°åÊÉÖÂÜµÔºåÂéªËøõË°å‰∏Ä‰∫õÂéãÂäõÊµãËØïÂíåÊ®°ÊãüÁ∫ø‰∏äÁéØÂ¢ÉÔºåÁúãÈ´òÂ≥∞ÊúüÔºåÂÜÖÂ≠òÈòüÂàóÂèØËÉΩ‰ºöÁßØÂéãÂ§öÂ∞ëÊõ¥Êñ∞Êìç‰ΩúÔºåÂèØËÉΩ‰ºöÂØºËá¥ÊúÄÂêé‰∏Ä‰∏™Êõ¥Êñ∞Êìç‰ΩúÂØπÂ∫îÁöÑËØªËØ∑Ê±ÇÔºå‰ºö Hang Â§öÂ∞ëÊó∂Èó¥„ÄÇ Â¶ÇÊûúËØªËØ∑Ê±ÇÂú® 200ms ËøîÂõûÔºåÂì™ÊÄïÊòØÊúÄÁπÅÂøôÁöÑÊó∂ÂÄôÔºåÁßØÂéã 10 ‰∏™Êõ¥Êñ∞Êìç‰ΩúÔºåÊúÄÂ§öÁ≠âÂæÖ 200msÔºåÈÇ£ËøòÂèØ‰ª•ÁöÑ„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™ÂÜÖÂ≠òÈòüÂàó‰∏≠ÂèØËÉΩÁßØÂéãÁöÑÊõ¥Êñ∞Êìç‰ΩúÁâπÂà´Â§öÔºåÈÇ£Â∞±Ë¶ÅÂä†Êú∫Âô®ÔºåËÆ©ÊØè‰∏™Êú∫Âô®‰∏äÈÉ®ÁΩ≤ÁöÑÊúçÂä°ÂÆû‰æãÂ§ÑÁêÜÊõ¥Â∞ëÁöÑÊï∞ÊçÆÔºåÈÇ£‰πàÊØè‰∏™ÂÜÖÂ≠òÈòüÂàó‰∏≠ÁßØÂéãÁöÑÊõ¥Êñ∞Êìç‰ΩúÂ∞±‰ºöË∂äÂ∞ë„ÄÇ ‰∏ÄËà¨Êù•ËØ¥ÔºåÊï∞ÊçÆÁöÑÂÜôÈ¢ëÁéáÊòØÂæà‰ΩéÁöÑÔºåÂõ†Ê≠§ÂÆûÈôÖ‰∏äÊ≠£Â∏∏Êù•ËØ¥ÔºåÂú®ÈòüÂàó‰∏≠ÁßØÂéãÁöÑÊõ¥Êñ∞Êìç‰ΩúÂ∫îËØ•ÊòØÂæàÂ∞ëÁöÑ„ÄÇÂÉèËøôÁßçÈíàÂØπËØªÈ´òÂπ∂Âèë„ÄÅËØªÁºìÂ≠òÊû∂ÊûÑÁöÑÈ°πÁõÆÔºå‰∏ÄËà¨Êù•ËØ¥ÂÜôËØ∑Ê±ÇÊòØÈùûÂ∏∏Â∞ëÁöÑÔºåÊØèÁßíÁöÑ QPS ËÉΩÂà∞Âá†ÁôæÂ∞±‰∏çÈîô‰∫Ü„ÄÇ ÂÆûÈôÖÁ≤óÁï•ÊµãÁÆó‰∏Ä‰∏ãÔºåÂ¶ÇÊûú‰∏ÄÁßíÊúâ 500 ÁöÑÂÜôÊìç‰ΩúÔºåÂàÜÊàê 5 ‰∏™Êó∂Èó¥ÁâáÔºåÊØè 200ms Â∞± 100 ‰∏™ÂÜôÊìç‰ΩúÔºåÊîæÂà∞ 20 ‰∏™ÂÜÖÂ≠òÈòüÂàó‰∏≠ÔºåÊØè‰∏™ÂÜÖÂ≠òÈòüÂàóÔºåÂèØËÉΩÂ∞±ÁßØÂéã 5 ‰∏™ÂÜôÊìç‰Ωú„ÄÇ ÊØè‰∏™ÂÜôÊìç‰ΩúÊÄßËÉΩÊµãËØïÂêéÔºå‰∏ÄËà¨ÊòØÂú® 20ms Â∑¶Âè≥Â∞±ÂÆåÊàêÔºåÈÇ£‰πàÈíàÂØπÊØè‰∏™ÂÜÖÂ≠òÈòüÂàóÁöÑÊï∞ÊçÆÁöÑËØªËØ∑Ê±ÇÔºå‰πüÂ∞±ÊúÄÂ§ö Hang ‰∏Ä‰ºöÂÑøÔºå200ms ‰ª•ÂÜÖËÇØÂÆöËÉΩËøîÂõû‰∫Ü„ÄÇ ÁªèËøáÁÆÄÂçïÁöÑÊµãÁÆóÔºåÂçïÊú∫ÊîØÊíëÁöÑÂÜô QPS Âú®Âá†ÁôæÊòØÊ≤°ÈóÆÈ¢òÁöÑÔºåÂ¶ÇÊûúÂÜô QPS Êâ©Â§ß‰∫Ü 10 ÂÄçÔºåÈÇ£‰πàÂ∞±Êâ©ÂÆπÊú∫Âô®ÔºåÊâ©ÂÆπ 10 ÂÄçÁöÑÊú∫Âô®ÔºåÊØè‰∏™Êú∫Âô® 20 ‰∏™ÈòüÂàó„ÄÇ ËØªËØ∑Ê±ÇÂπ∂ÂèëÈáèËøáÈ´ò ËøôÈáåËøòÂøÖÈ°ªÂÅöÂ•ΩÂéãÂäõÊµãËØïÔºåÁ°Æ‰øùÊÅ∞Â∑ßÁ¢∞‰∏ä‰∏äËø∞ÊÉÖÂÜµÊó∂ÔºåËøòÊúâ‰∏Ä‰∏™È£éÈô©ÔºåÂ∞±ÊòØÁ™ÅÁÑ∂Èó¥Â§ßÈáèËØªËØ∑Ê±Ç‰ºöÂú®Âá†ÂçÅÊØ´ÁßíÁöÑÂª∂Êó∂ Hang Âú®ÊúçÂä°‰∏äÔºåÁúãÊúçÂä°ËÉΩ‰∏çËÉΩÊâõÁöÑ‰ΩèÔºåÈúÄË¶ÅÂ§öÂ∞ëÊú∫Âô®ÊâçËÉΩÊâõ‰ΩèÊúÄÂ§ßÁöÑÊûÅÈôêÊÉÖÂÜµÁöÑÂ≥∞ÂÄº„ÄÇ ‰ΩÜÊòØÂõ†‰∏∫Âπ∂‰∏çÊòØÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩÂú®Âêå‰∏ÄÊó∂Èó¥Êõ¥Êñ∞ÔºåÁºìÂ≠ò‰πü‰∏ç‰ºöÂêå‰∏ÄÊó∂Èó¥Â§±ÊïàÔºåÊâÄ‰ª•ÊØèÊ¨°ÂèØËÉΩ‰πüÂ∞±ÊòØÂ∞ëÊï∞Êï∞ÊçÆÁöÑÁºìÂ≠òÂ§±Êïà‰∫ÜÔºåÁÑ∂ÂêéÈÇ£‰∫õÊï∞ÊçÆÂØπÂ∫îÁöÑËØªËØ∑Ê±ÇËøáÊù•ÔºåÂπ∂ÂèëÈáèÂ∫îËØ•‰πü‰∏ç‰ºöÁâπÂà´Â§ß„ÄÇ Â§öÊúçÂä°ÂÆû‰æãÈÉ®ÁΩ≤ÁöÑËØ∑Ê±ÇË∑ØÁî± ÂèØËÉΩËøô‰∏™ÊúçÂä°ÈÉ®ÁΩ≤‰∫ÜÂ§ö‰∏™ÂÆû‰æãÔºåÈÇ£‰πàÂøÖÈ°ª‰øùËØÅÊâßË°åÊï∞ÊçÆÊõ¥Êñ∞Êìç‰ΩúÔºå‰ª•ÂèäÊâßË°åÁºìÂ≠òÊõ¥Êñ∞Êìç‰ΩúÁöÑËØ∑Ê±ÇÔºåÈÉΩÈÄöËøá Nginx ÊúçÂä°Âô®Ë∑ØÁî±Âà∞Áõ∏ÂêåÁöÑÊúçÂä°ÂÆû‰æã‰∏ä„ÄÇ ÊØîÂ¶ÇÂØπÂêå‰∏Ä‰∏™ÂïÜÂìÅÁöÑËØªÂÜôËØ∑Ê±ÇÔºåÂÖ®ÈÉ®Ë∑ØÁî±Âà∞Âêå‰∏ÄÂè∞Êú∫Âô®‰∏ä„ÄÇÂèØ‰ª•Ëá™Â∑±ÂéªÂÅöÊúçÂä°Èó¥ÁöÑÊåâÁÖßÊüê‰∏™ËØ∑Ê±ÇÂèÇÊï∞ÁöÑ Hash Ë∑ØÁî±Ôºå‰πüÂèØ‰ª•Áî® Nginx ÁöÑ Hash Ë∑ØÁî±ÂäüËÉΩÁ≠âÁ≠â„ÄÇ]]></content>
      <categories>
        <category>ÁºìÂ≠ò</category>
        <category>redis</category>
      </categories>
      <tags>
        <tag>ÁºìÂ≠ò</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÊçÆÂ∫ìÂ∏∏Áî®Êû∂ÊûÑÊñπÊ°à]]></title>
    <url>%2Fposts%2F4c1379b8.html</url>
    <content type="text"><![CDATA[Êï∞ÊçÆÂ∫ìÊû∂ÊûÑÂéüÂàô È´òÂèØÁî® È´òÊÄßËÉΩ ‰∏ÄËá¥ÊÄß Êâ©Â±ïÊÄß Â∏∏ËßÅÁöÑÊû∂ÊûÑÊñπÊ°à ‰∏ªÂ§áÊû∂ÊûÑ ËØ•ÊñπÊ°àÂè™Êúâ‰∏ªÂ∫ìÊèê‰æõËØªÂÜôÊúçÂä°ÔºåÂ§áÂ∫ìÂÜó‰Ωô‰ΩúÊïÖÈöúËΩ¨Áßª„ÄÇ Êï∞ÊçÆÂ∫ìÈìæÊé•Â≠óÁ¨¶‰∏≤Ôºöjdbc:mysql://vip:3306/xxdb È´òÂèØÁî®ÂàÜÊûêÔºöÈ´òÂèØÁî®Ôºå‰∏ªÂ∫ìÊåÇ‰∫ÜÔºåkeepaliveÔºà‰∏ÄÁßçÂ∑•ÂÖ∑Ôºâ‰ºöËá™Âä®ÂàáÊç¢Âà∞Â§áÂ∫ì„ÄÇËøô‰∏™ËøáÁ®ãÂØπ‰∏öÂä°Â±ÇÊòØÈÄèÊòéÁöÑÔºåÊó†ÈúÄ‰øÆÊîπ‰ª£Á†ÅÊàñÈÖçÁΩÆ„ÄÇ È´òÊÄßËÉΩÂàÜÊûêÔºöËØªÂÜôÈÉΩÊìç‰Ωú‰∏ªÂ∫ìÔºåÂæàÂÆπÊòì‰∫ßÁîüÁì∂È¢à„ÄÇÂ§ßÈÉ®ÂàÜ‰∫íËÅîÁΩëÂ∫îÁî®ËØªÂ§öÂÜôÂ∞ëÔºåËØª‰ºöÂÖàÊàê‰∏∫Áì∂È¢àÔºåËøõËÄåÂΩ±ÂìçÂÜôÊÄßËÉΩ„ÄÇÂè¶Â§ñÔºåÂ§áÂ∫ìÂè™ÊòØÂçïÁ∫ØÁöÑÂ§á‰ªΩÔºåËµÑÊ∫êÂà©Áî®ÁéáÂè™Êúâ50%„ÄÇ ‰∏ÄËá¥ÊÄßÂàÜÊûêÔºöËØªÂÜôÈÉΩÊìç‰Ωú‰∏ªÂ∫ìÔºå‰∏çÂ≠òÂú®Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇ Êâ©Â±ïÊÄßÂàÜÊûêÔºöÊó†Ê≥ïÈÄöËøáÂä†‰ªéÂ∫ìÊù•Êâ©Â±ïËØªÊÄßËÉΩÔºåËøõËÄåÊèêÈ´òÊï¥‰ΩìÊÄßËÉΩ„ÄÇ ÂèØËêΩÂú∞ÂàÜÊûêÔºö‰∏§ÁÇπÂΩ±ÂìçËêΩÂú∞ÔºöÁ¨¨‰∏ÄÔºåÊÄßËÉΩ‰∏ÄËà¨ÔºåËøôÁÇπÂèØ‰ª•ÈÄöËøáÂª∫Á´ãÈ´òÊïàÁöÑÁ¥¢ÂºïÂíåÂºïÂÖ•ÁºìÂ≠òÊù•Â¢ûÂä†ËØªÊÄßËÉΩÔºåËøõËÄåÊèêÈ´òÊÄßËÉΩ„ÄÇËøô‰πüÊòØÈÄöÁî®ÁöÑÊñπÊ°à„ÄÇÁ¨¨‰∫åÔºåÊâ©Â±ïÊÄßÂ∑ÆÔºåËøôÁÇπÂèØ‰ª•ÈÄöËøáÂàÜÂ∫ìÂàÜË°®Êù•Êâ©Â±ï„ÄÇ Âèå‰∏ªÊû∂ÊûÑ ËØ•ÊñπÊ°àÔºå‰∏§‰∏™‰∏ªÂ∫ìÂêåÊó∂Êèê‰æõÊúçÂä°ÔºåË¥üËΩΩÂùáË°°„ÄÇ Êï∞ÊçÆÂ∫ìÈìæÊé•Â≠óÁ¨¶‰∏≤Ôºöjdbc:mysql://vip:3306/xxdb È´òÂèØÁî®ÂàÜÊûêÔºöÈ´òÂèØÁî®Ôºå‰∏Ä‰∏™‰∏ªÂ∫ìÊåÇ‰∫ÜÔºå‰∏çÂΩ±ÂìçÂè¶‰∏ÄÂè∞‰∏ªÂ∫ìÊèê‰æõÊúçÂä°„ÄÇËøô‰∏™ËøáÁ®ãÂØπ‰∏öÂä°Â±ÇÊòØÈÄèÊòéÁöÑÔºåÊó†ÈúÄ‰øÆÊîπ‰ª£Á†ÅÊàñÈÖçÁΩÆ„ÄÇ È´òÊÄßËÉΩÂàÜÊûêÔºöËØªÂÜôÊÄßËÉΩÁõ∏ÊØî‰∫éÊñπÊ°à‰∏ÄÈÉΩÂæóÂà∞ÊèêÂçáÔºåÊèêÂçá‰∏ÄÂÄç„ÄÇ ‰∏ÄËá¥ÊÄßÂàÜÊûêÔºöÂ≠òÂú®Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇ Êâ©Â±ïÊÄßÂàÜÊûêÔºöÂΩìÁÑ∂ÂèØ‰ª•Êâ©Â±ïÊàê‰∏â‰∏ªÂæ™ÁéØÔºå‰ΩÜ‰∏çÂª∫ËÆÆÔºà‰ºöÂ§ö‰∏ÄÂ±ÇÊï∞ÊçÆÂêåÊ≠•ÔºåËøôÊ†∑ÂêåÊ≠•ÁöÑÊó∂Èó¥‰ºöÊõ¥ÈïøÔºâ„ÄÇÂ¶ÇÊûúÈùûÂæóÂú®Êï∞ÊçÆÂ∫ìÊû∂ÊûÑÂ±ÇÈù¢Êâ©Â±ïÁöÑËØùÔºåÊâ©Â±ï‰∏∫ÊñπÊ°àÂõõ„ÄÇ ÂèØËêΩÂú∞ÂàÜÊûêÔºö‰∏§ÁÇπÂΩ±ÂìçËêΩÂú∞:Á¨¨‰∏ÄÔºåÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢òÔºå‰∏ÄËá¥ÊÄßËß£ÂÜ≥ÊñπÊ°àÂèØËß£ÂÜ≥ÈóÆÈ¢ò„ÄÇÁ¨¨‰∫åÔºå‰∏ªÈîÆÂÜ≤Á™ÅÈóÆÈ¢òÔºåIDÁªü‰∏ÄÂú∞Áî±ÂàÜÂ∏ÉÂºèIDÁîüÊàêÊúçÂä°Êù•ÁîüÊàêÂèØËß£ÂÜ≥ÈóÆÈ¢ò„ÄÇ ‰∏Ä‰∏ªÂ§ö‰ªé ËØ•ÊñπÊ°àÈááÁî®‰∏ª‰ªéÊû∂ÊûÑÔºå‰∏Ä‰∏ªÂ§ö‰ªéÔºåËØªÂÜôÂàÜÁ¶ª„ÄÇ Êï∞ÊçÆÂ∫ìÈìæÊé•Â≠óÁ¨¶‰∏≤Ôºö 12345jdbc:mysql://master-ip:3306/xxdb jdbc:mysql://slave1-ip:3306/xxdb jdbc:mysql://slave2-ip:3306/xxdb È´òÂèØÁî®ÂàÜÊûêÔºö‰∏ªÂ∫ìÂçïÁÇπÔºå‰ªéÂ∫ìÈ´òÂèØÁî®„ÄÇ‰∏ÄÊó¶‰∏ªÂ∫ìÊåÇ‰∫ÜÔºåÂÜôÊúçÂä°‰πüÂ∞±Êó†Ê≥ïÊèê‰æõ„ÄÇ È´òÊÄßËÉΩÂàÜÊûêÔºöÂ§ßÈÉ®ÂàÜ‰∫íËÅîÁΩëÂ∫îÁî®ËØªÂ§öÂÜôÂ∞ëÔºåËØª‰ºöÂÖàÊàê‰∏∫Áì∂È¢àÔºåËøõËÄåÂΩ±ÂìçÊï¥‰ΩìÊÄßËÉΩ„ÄÇËØªÁöÑÊÄßËÉΩÊèêÈ´ò‰∫ÜÔºåÊï¥‰ΩìÊÄßËÉΩ‰πüÊèêÈ´ò‰∫Ü„ÄÇÂè¶Â§ñÔºå‰∏ªÂ∫ìÂèØ‰ª•‰∏çÁî®Á¥¢ÂºïÔºåÁ∫ø‰∏ä‰ªéÂ∫ìÂíåÁ∫ø‰∏ã‰ªéÂ∫ì‰πüÂèØ‰ª•Âª∫Á´ã‰∏çÂêåÁöÑÁ¥¢ÂºïÔºàÁ∫ø‰∏ä‰ªéÂ∫ìÂ¶ÇÊûúÊúâÂ§ö‰∏™ËøòÊòØË¶ÅÂª∫Á´ãÁõ∏ÂêåÁöÑÁ¥¢ÂºïÔºå‰∏çÁÑ∂Âæó‰∏çÂÅøÂ§±ÔºõÁ∫ø‰∏ã‰ªéÂ∫ìÊòØÂπ≥Êó∂ÂºÄÂèë‰∫∫ÂëòÊéíÊü•Á∫ø‰∏äÈóÆÈ¢òÊó∂Êü•ÁöÑÂ∫ìÔºåÂèØ‰ª•Âª∫Êõ¥Â§öÁöÑÁ¥¢ÂºïÔºâ„ÄÇ ‰∏ÄËá¥ÊÄßÂàÜÊûêÔºöÂ≠òÂú®Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇ Êâ©Â±ïÊÄßÂàÜÊûêÔºöÂèØ‰ª•ÈÄöËøáÂä†‰ªéÂ∫ìÊù•Êâ©Â±ïËØªÊÄßËÉΩÔºåËøõËÄåÊèêÈ´òÊï¥‰ΩìÊÄßËÉΩ„ÄÇÔºàÂ∏¶Êù•ÁöÑÈóÆÈ¢òÊòØÔºå‰ªéÂ∫ìË∂äÂ§öÈúÄË¶Å‰ªé‰∏ªÂ∫ìÊãâÂèñbinlogÊó•ÂøóÁöÑÁ´ØÂ∞±Ë∂äÂ§öÔºåËøõËÄåÂΩ±Âìç‰∏ªÂ∫ìÁöÑÊÄßËÉΩÔºåÂπ∂‰∏îÊï∞ÊçÆÂêåÊ≠•ÂÆåÊàêÁöÑÊó∂Èó¥‰πü‰ºöÊõ¥ÈïøÔºâ ÂèØËêΩÂú∞ÂàÜÊûêÔºö‰∏§ÁÇπÂΩ±ÂìçËêΩÂú∞:Á¨¨‰∏ÄÔºåÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢òÔºå‰∏ÄËá¥ÊÄßËß£ÂÜ≥ÊñπÊ°àÂèØËß£ÂÜ≥ÈóÆÈ¢ò„ÄÇÁ¨¨‰∫åÔºå‰∏ªÂ∫ìÂçïÁÇπÈóÆÈ¢òÔºåÊöÇÊó∂Ê≤°ÊÉ≥Âà∞ÂæàÂ•ΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ Âèå‰∏ª+‰∏ª‰ªé Êï∞ÊçÆÂ∫ìÈìæÊé•Â≠óÁ¨¶‰∏≤Ôºö 12345jdbc:mysql://vip:3306/xxdbjdbc:mysql://slave1-ip:3306/xxdbjdbc:mysql://slave2-ip:3306/xxdb È´òÂèØÁî®ÂàÜÊûêÔºöÈ´òÂèØÁî®„ÄÇ È´òÊÄßËÉΩÂàÜÊûêÔºöÈ´òÊÄßËÉΩ„ÄÇ ‰∏ÄËá¥ÊÄßÂàÜÊûêÔºöÂ≠òÂú®Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇ Êâ©Â±ïÊÄßÂàÜÊûêÔºöÂèØ‰ª•ÈÄöËøáÂä†‰ªéÂ∫ìÊù•Êâ©Â±ïËØªÊÄßËÉΩÔºåËøõËÄåÊèêÈ´òÊï¥‰ΩìÊÄßËÉΩ„ÄÇÔºàÂ∏¶Êù•ÁöÑÈóÆÈ¢òÂêåÊñπÊ°à‰∫åÔºâ ÂèØËêΩÂú∞ÂàÜÊûêÔºöÂêåÊñπÊ°à‰∫åÔºå‰ΩÜÊï∞ÊçÆÂêåÊ≠•ÂèàÂ§ö‰∫Ü‰∏ÄÂ±ÇÔºåÊï∞ÊçÆÂª∂ËøüÊõ¥‰∏•Èáç„ÄÇ Êï∞ÊçÆ‰∏ÄËá¥ÊÄßËß£ÂÜ≥ÊñπÊ°à ‰∏ªÂ∫ìÂíå‰ªéÂ∫ì‰∏ÄËá¥ÊÄßËß£ÂÜ≥ÊñπÊ°à Ê≥®ÔºöÂõæ‰∏≠ÂúàÂá∫ÁöÑÊòØÊï∞ÊçÆÂêåÊ≠•ÁöÑÂú∞ÊñπÔºåÊï∞ÊçÆÂêåÊ≠•Ôºà‰ªéÂ∫ì‰ªé‰∏ªÂ∫ìÊãâÂèñbinlogÊó•ÂøóÔºåÂÜçÊâßË°å‰∏ÄÈÅçÔºâÊòØÈúÄË¶ÅÊó∂Èó¥ÁöÑÔºåËøô‰∏™ÂêåÊ≠•Êó∂Èó¥ÂÜÖ‰∏ªÂ∫ìÂíå‰ªéÂ∫ìÁöÑÊï∞ÊçÆ‰ºöÂ≠òÂú®‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµ„ÄÇÂ¶ÇÊûúÂêåÊ≠•ËøáÁ®ã‰∏≠ÊúâËØªËØ∑Ê±ÇÔºåÈÇ£‰πàËØªÂà∞ÁöÑÂ∞±ÊòØ‰ªéÂ∫ì‰∏≠ÁöÑËÄÅÊï∞ÊçÆ„ÄÇÂ¶Ç‰∏ãÂõæ„ÄÇ Êó¢ÁÑ∂Áü•ÈÅì‰∫ÜÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÊÄß‰∫ßÁîüÁöÑÂéüÂõ†ÔºåÊúâ‰∏ãÈù¢Âá†‰∏™Ëß£ÂÜ≥ÊñπÊ°à‰æõÂèÇËÄÉÔºö Áõ¥Êé•ÂøΩÁï•ÔºåÂ¶ÇÊûú‰∏öÂä°ÂÖÅËÆ∏Âª∂Êó∂Â≠òÂú®ÔºåÈÇ£‰πàÂ∞±‰∏çÂéªÁÆ°ÂÆÉ„ÄÇ Âº∫Âà∂ËØª‰∏ªÔºåÈááÁî®‰∏ªÂ§áÊû∂ÊûÑÊñπÊ°àÔºåËØªÂÜôÈÉΩËµ∞‰∏ªÂ∫ì„ÄÇÁî®ÁºìÂ≠òÊù•Êâ©Â±ïÊï∞ÊçÆÂ∫ìËØªÊÄßËÉΩ „ÄÇÂ¶ÇÊûúÁºìÂ≠òÊåÇ‰∫ÜÔºåÂèØËÉΩ‰ºö‰∫ßÁîüÈõ™Â¥©Áé∞Ë±°Ôºå‰∏çËøá‰∏ÄËà¨ÂàÜÂ∏ÉÂºèÁºìÂ≠òÈÉΩÊòØÈ´òÂèØÁî®ÁöÑ„ÄÇ ÈÄâÊã©ËØª‰∏ªÔºåÂÜôÊìç‰ΩúÊó∂Ê†πÊçÆÂ∫ì+Ë°®+‰∏öÂä°ÁâπÂæÅÁîüÊàê‰∏Ä‰∏™keyÊîæÂà∞CacheÈáåÂπ∂ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥ÔºàÂ§ß‰∫éÁ≠â‰∫é‰∏ª‰ªéÊï∞ÊçÆÂêåÊ≠•Êó∂Èó¥Ôºâ„ÄÇËØªËØ∑Ê±ÇÊó∂ÔºåÂêåÊ†∑ÁöÑÊñπÂºèÁîüÊàêkeyÂÖàÂéªÊü•CacheÔºåÂÜçÂà§Êñ≠ÊòØÂê¶ÂëΩ‰∏≠„ÄÇËã•ÂëΩ‰∏≠ÔºåÂàôËØª‰∏ªÂ∫ìÔºåÂê¶ÂàôËØª‰ªéÂ∫ì„ÄÇ‰ª£‰ª∑ÊòØÂ§ö‰∫Ü‰∏ÄÊ¨°ÁºìÂ≠òËØªÂÜôÔºåÂü∫Êú¨ÂèØ‰ª•ÂøΩÁï•„ÄÇ ÂçäÂêåÊ≠•Â§çÂà∂ÔºåÁ≠â‰∏ª‰ªéÂêåÊ≠•ÂÆåÊàêÔºåÂÜôËØ∑Ê±ÇÊâçËøîÂõû„ÄÇÂ∞±ÊòØÂ§ßÂÆ∂Â∏∏ËØ¥ÁöÑ‚ÄúÂçäÂêåÊ≠•Â§çÂà∂‚Äùsemi-sync„ÄÇËøôÂèØ‰ª•Âà©Áî®Êï∞ÊçÆÂ∫ìÂéüÁîüÂäüËÉΩÔºåÂÆûÁé∞ÊØîËæÉÁÆÄÂçï„ÄÇ‰ª£‰ª∑ÊòØÂÜôËØ∑Ê±ÇÊó∂Âª∂Â¢ûÈïøÔºåÂêûÂêêÈáèÈôç‰Ωé„ÄÇ Êï∞ÊçÆÂ∫ì‰∏≠Èó¥‰ª∂ÔºåÂºïÂÖ•ÂºÄÊ∫êÔºàmycatÁ≠âÔºâÊàñËá™Á†îÁöÑÊï∞ÊçÆÂ∫ì‰∏≠Èó¥Â±Ç„ÄÇÊÄùË∑ØÂêåÈÄâÊã©ËØª‰∏ª„ÄÇÊï∞ÊçÆÂ∫ì‰∏≠Èó¥‰ª∂ÁöÑÊàêÊú¨ÊØîËæÉÈ´òÔºåÂπ∂‰∏îËøòÂ§öÂºïÂÖ•‰∫Ü‰∏ÄÂ±Ç„ÄÇ DBÂíåÁºìÂ≠ò‰∏ÄËá¥ÊÄßËß£ÂÜ≥ÊñπÊ°à ÂÖàÊù•Áúã‰∏Ä‰∏ãÂ∏∏Áî®ÁöÑÁºìÂ≠ò‰ΩøÁî®ÊñπÂºèÔºö Á¨¨‰∏ÄÊ≠•ÔºöÊ∑òÊ±∞ÁºìÂ≠òÔºõ Á¨¨‰∫åÊ≠•ÔºöÂÜôÂÖ•Êï∞ÊçÆÂ∫ìÔºõ Á¨¨‰∏âÊ≠•ÔºöËØªÂèñÁºìÂ≠òÔºüËøîÂõûÔºöËØªÂèñÊï∞ÊçÆÂ∫ìÔºõ Á¨¨ÂõõÊ≠•ÔºöËØªÂèñÊï∞ÊçÆÂ∫ìÂêéÂÜôÂÖ•ÁºìÂ≠ò„ÄÇ Ê≥®ÔºöÂ¶ÇÊûúÊåâÁÖßËøôÁßçÊñπÂºèÔºåÂõæ‰∏ÄÔºå‰∏ç‰ºö‰∫ßÁîüDBÂíåÁºìÂ≠ò‰∏ç‰∏ÄËá¥ÈóÆÈ¢òÔºõÂõæ‰∫åÔºå‰ºö‰∫ßÁîüDBÂíåÁºìÂ≠ò‰∏ç‰∏ÄËá¥ÈóÆÈ¢òÔºåÂç≥r2.readÂÖà‰∫éw3.syncÊâßË°å„ÄÇÂ¶ÇÊûú‰∏çÂÅöÂ§ÑÁêÜÔºåÁºìÂ≠òÈáåÁöÑÊï∞ÊçÆÂèØËÉΩ‰∏ÄÁõ¥ÊòØËÑèÊï∞ÊçÆ„ÄÇËß£ÂÜ≥ÊñπÂºèÂ¶Ç‰∏ãÔºö &lt;font color=&quot;red&quot;&gt;Ê≥®ÔºöËÆæÁΩÆÁºìÂ≠òÊó∂Ôºå‰∏ÄÂÆöË¶ÅÂä†‰∏äÂ§±ÊïàÊó∂Èó¥Ôºå‰ª•Èò≤Âª∂Êó∂Ê∑òÊ±∞ÁºìÂ≠òÂ§±Ë¥•ÁöÑÊÉÖÂÜµÔºÅ&lt;/font&gt; MySQLÂ§çÂà∂ MySQL‰∏ª‰ªéÂ§çÂà∂ ÁõÆÁöÑ ÂÆûÁé∞Êï∞ÊçÆÂ∫ìËØªÂÜôÂàÜÁ¶ªÔºåÂÜôÊìç‰ΩúËÆøÈóÆ‰∏ªÊï∞ÊçÆÂ∫ìÔºåËØªÊìç‰ΩúËÆøÈóÆ‰ªéÊï∞ÊçÆÂ∫ìÔºå‰ªéËÄå‰ΩøÊï∞ÊçÆÂ∫ìÂÖ∑ÊúâÊõ¥Âº∫Â§ßÁöÑËÆøÈóÆË¥üËΩΩËÉΩÂäõÔºåÊîØÊíëÊõ¥Â§öÁöÑÁî®Êà∑ËÆøÈóÆ„ÄÇ ÂéüÁêÜ ÂΩìÂ∫îÁî®Á®ãÂ∫èÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∏ÄÊù°Êõ¥Êñ∞ÂëΩ‰ª§Âà∞Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºåÊï∞ÊçÆÂ∫ì‰ºöÊääËøôÊù°Êõ¥Êñ∞ÂëΩ‰ª§ÂêåÊ≠•ËÆ∞ÂΩïÂà∞Binlog‰∏≠ÔºåÁÑ∂ÂêéÁî±Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ã‰ªéBinlog‰∏≠ËØªÂèñËøôÊù°Êó•ÂøóÔºåÁÑ∂ÂêéÈÄöËøáËøúÁ®ãÈÄöËÆØÁöÑÊñπÂºèÂ∞ÜÂÆÉÂ§çÂà∂Âà∞‰ªéÊúçÂä°Âô®‰∏äÈù¢ÂéªÔºå‰ªéÊúçÂä°Âô®Ëé∑ÂæóËøôÊù°Êõ¥Êñ∞Êó•ÂøóÂêéÔºåÂ∞ÜÂÖ∂Âä†ÂÖ•Âà∞Ëá™Â∑±ÁöÑRelay log‰∏≠ÔºåÁÑ∂ÂêéÁî±Âè¶Â§ñ‰∏Ä‰∏™SQLÊâßË°åÁ∫øÁ®ã‰ªéRelay log‰∏≠ËØªÂèñËøôÊù°Êñ∞ÁöÑÊó•ÂøóÔºåÂπ∂ÊääÂÆÉÂú®Êú¨Âú∞ÁöÑÊï∞ÊçÆÂ∫ì‰∏≠ÈáçÊñ∞ÊâßË°å‰∏ÄÈÅç„ÄÇ ËøôÊ†∑ÂΩìÂÆ¢Êà∑Á´ØÂ∫îÁî®Á®ãÂ∫èÊâßË°å‰∏Ä‰∏™updateÂëΩ‰ª§ÁöÑÊó∂ÂÄôÔºåËøô‰∏™ÂëΩ‰ª§‰ºöÂú®‰∏ªÊï∞ÊçÆÂ∫ìÂíå‰ªéÊï∞ÊçÆÂ∫ì‰∏äÂêåÊ≠•ÊâßË°åÔºå‰ªéËÄåÂÆûÁé∞‰∫Ü‰∏ªÊï∞ÊçÆÂ∫ìÂêë‰ªéÊï∞ÊçÆÂ∫ìÁöÑÂ§çÂà∂ÔºåËÆ©‰ªéÊï∞ÊçÆÂ∫ìÂíå‰∏ªÊï∞ÊçÆÂ∫ì‰øùÊåÅ‰∏ÄÊ†∑ÁöÑÊï∞ÊçÆ„ÄÇ MySQL‰∏Ä‰∏ªÂ§ö‰ªéÂ§çÂà∂ ÁõÆÁöÑ MySQLÁöÑ‰∏ª‰ªéÂ§çÂà∂ÊòØ‰∏ÄÁßçÊï∞ÊçÆÂêåÊ≠•Êú∫Âà∂ÔºåÈô§‰∫ÜÂèØ‰ª•Â∞Ü‰∏Ä‰∏™‰∏ªÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÂêåÊ≠•Â§çÂà∂Âà∞‰∏Ä‰∏™‰ªéÊï∞ÊçÆÂ∫ì‰∏äÔºåËøòÂèØ‰ª•Â∞Ü‰∏Ä‰∏™‰∏ªÊï∞ÊçÆÂ∫ì‰∏äÁöÑÊï∞ÊçÆÂêåÊ≠•Â§çÂà∂Âà∞Â§ö‰∏™‰ªéÊï∞ÊçÆÂ∫ì‰∏äÔºå‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑMySQLÁöÑ‰∏Ä‰∏ªÂ§ö‰ªéÂ§çÂà∂„ÄÇ ÂéüÁêÜ Â§ö‰∏™‰ªéÊï∞ÊçÆÂ∫ìÂÖ≥ËÅîÂà∞‰∏ªÊï∞ÊçÆÂ∫ìÂêéÔºåÂ∞Ü‰∏ªÊï∞ÊçÆÂ∫ì‰∏äÁöÑBinlogÊó•ÂøóÂêåÊ≠•Âú∞Â§çÂà∂Âà∞‰∫ÜÂ§ö‰∏™‰ªéÊï∞ÊçÆÂ∫ì‰∏ä„ÄÇÈÄöËøáÊâßË°åÊó•ÂøóÔºåËÆ©ÊØè‰∏™‰ªéÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆÈÉΩÂíå‰∏ªÊï∞ÊçÆÂ∫ì‰∏äÁöÑÊï∞ÊçÆ‰øùÊåÅ‰∫Ü‰∏ÄËá¥„ÄÇËøôÈáåÈù¢ÁöÑÊï∞ÊçÆÊõ¥Êñ∞Êìç‰ΩúË°®Á§∫ÁöÑÊòØÊâÄÊúâÊï∞ÊçÆÂ∫ìÁöÑÊõ¥Êñ∞Êìç‰ΩúÔºåÈô§‰∫Ü‰∏çÂåÖÊã¨SELECT‰πãÁ±ªÁöÑÊü•ËØ¢ËØªÊìç‰ΩúÔºåÂÖ∂‰ªñÁöÑINSERT„ÄÅDELETE„ÄÅUPDATEËøôÊ†∑ÁöÑDMLÂÜôÊìç‰ΩúÔºå‰ª•ÂèäCREATE TABLE„ÄÅDROPT ABLE„ÄÅALTER TABLEÁ≠âDDLÊìç‰Ωú‰πüÈÉΩÂèØ‰ª•ÂêåÊ≠•Â§çÂà∂Âà∞‰ªéÊï∞ÊçÆÂ∫ì‰∏äÂéª„ÄÇ ‰ºòÁÇπ ‰∏Ä‰∏ªÂ§ö‰ªéÂ§çÂà∂ÊúâÂõõÂ§ß‰ºòÁÇπÔºåÂàÜÂà´ÊòØÂàÜÊëäË¥üËΩΩ„ÄÅ‰∏ìÊú∫‰∏ìÁî®„ÄÅ‰æø‰∫éÂÜ∑Â§áÂíåÈ´òÂèØÁî®„ÄÇ ÂàÜÊëäË¥üËΩΩÔºöÂ∞ÜÂè™ËØªÊìç‰ΩúÂàÜÂ∏ÉÂú®Â§ö‰∏™‰ªéÊï∞ÊçÆÂ∫ì‰∏äÔºå‰ªéËÄåÂ∞ÜË¥üËΩΩÂàÜÊëäÂà∞Â§öÂè∞ÊúçÂä°Âô®‰∏ä„ÄÇ ‰∏ìÊú∫‰∏ìÁî®ÔºöÂèØ‰ª•ÈíàÂØπ‰∏çÂêåÁ±ªÂûãÁöÑÊü•ËØ¢Ôºå‰ΩøÁî®‰∏çÂêåÁöÑ‰ªéÊúçÂä°Âô®„ÄÇ ‰æø‰∫éÂÜ∑Â§áÔºöÂç≥‰ΩøÊï∞ÊçÆÂ∫ìËøõË°å‰∫Ü‰∏Ä‰∏ªÂ§ö‰ªéÁöÑÂ§çÂà∂ÔºåÂú®‰∏Ä‰∫õÊûÅÁ´ØÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ‰πüÂèØËÉΩ‰ºöÂØºËá¥Êï¥‰∏™Êï∞ÊçÆ‰∏≠ÂøÉÁöÑÊï∞ÊçÆÈÉΩ‰∏¢Â§±„ÄÇÊâÄ‰ª•ÈÄöÂ∏∏ÈúÄË¶ÅÂØπÊï∞ÊçÆÂÅöÂÜ∑Â§áÔºå‰ΩÜÂÜ∑Â§áÊúâ‰∏Ä‰∏™Âõ∞ÈöæÁÇπÂú®‰∫éÔºåÊï∞ÊçÆÂ∫ìÂ¶ÇÊûúÊ≠£Âú®ËøõË°åÂÜôÊìç‰ΩúÔºåÂÜ∑Â§áÁöÑÊï∞ÊçÆÂ∞±ÂèØËÉΩ‰∏çÂÆåÊï¥ÔºåÊï∞ÊçÆÊñá‰ª∂ÂèØËÉΩÂ§Ñ‰∫éÊçüÂùèÁä∂ÊÄÅ„ÄÇ‰ΩøÁî®‰∏Ä‰∏ªÂ§ö‰ªéÁöÑÂ§çÂà∂Â∞±Â∞±ÂèØ‰ª•ÂÆûÁé∞Èõ∂ÂÅúÊú∫ÁöÑÂ§á‰ªΩ„ÄÇÂè™ÈúÄË¶ÅÂÖ≥Èó≠Êï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆÂ§çÂà∂ËøõÁ®ãÔºåÊñá‰ª∂Â∞±Â§Ñ‰∫éÂÖ≥Èó≠Áä∂ÊÄÅ‰∫ÜÔºåÁÑ∂ÂêéËøõË°åÊï∞ÊçÆÊñá‰ª∂Êã∑Ë¥ùÔºåÊã∑Ë¥ùÂÆåÊàêÂêéÂÜçÈáçÊñ∞ÊâìÂºÄÊï∞ÊçÆÂ§çÂà∂Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ È´òÂèØÁî®ÔºöÂ¶ÇÊûú‰∏ÄÂè∞ÊúçÂä°Âô®ÂÆïÊú∫‰∫ÜÔºåÂè™Ë¶Å‰∏çÂèëËØ∑Ê±ÇÁªôËøôÂè∞ÊúçÂä°Âô®Â∞±‰∏ç‰ºöÂá∫ÈóÆÈ¢ò„ÄÇÂΩìËøôÂè∞ÊúçÂä°Âô®ÊÅ¢Â§çÁöÑÊó∂ÂÄôÔºåÈáçÊñ∞ÂèëËØ∑Ê±ÇÂà∞ËøôÂè∞ÊúçÂä°Âô®„ÄÇÊâÄ‰ª•ÔºåÂú®‰∏Ä‰∏ªÂ§ö‰ªéÁöÑÊÉÖÂÜµ‰∏ãÔºåÊüê‰∏ÄÂè∞‰ªéÊúçÂä°Âô®ÂÆïÊú∫‰∏çÂèØÁî®ÔºåÂØπÊï¥‰∏™Á≥ªÁªüÁöÑÂΩ±ÂìçÊòØÈùûÂ∏∏Â∞èÁöÑ„ÄÇ MySQL‰∏ª‰∏ªÂ§çÂà∂ ÁõÆÁöÑ ‰∏Ä‰∏ªÂ§ö‰ªéÂè™ËÉΩÂ§üÂÆûÁé∞‰ªéÊúçÂä°Âô®‰∏äÁöÑËøô‰∫õ‰ºòÁÇπÔºåÂΩì‰∏ªÊï∞ÊçÆÂ∫ìÂÆïÊú∫‰∏çÂèØÁî®ÁöÑÊó∂ÂÄôÔºåÊï∞ÊçÆ‰æùÁÑ∂ÊòØ‰∏çËÉΩÂ§üÂÜôÂÖ•ÁöÑÔºåÂõ†‰∏∫Êï∞ÊçÆ‰∏çËÉΩÂ§üÂÜôÂÖ•Âà∞‰ªéÊúçÂä°Âô®‰∏äÈù¢ÂéªÔºå‰ªéÊúçÂä°Âô®ÊòØÂè™ËØªÁöÑ„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥‰∏ªÊúçÂä°Âô®ÁöÑÂèØÁî®ÊÄßÈóÆÈ¢òÔºåÈááÁî®MySQLÁöÑ‰∏ª‰∏ªÂ§çÂà∂ÊñπÊ°à„ÄÇ ÂéüÁêÜ ÂΩìÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÂØπ‰∏ªÊúçÂä°Âô®AËøõË°åÊï∞ÊçÆÊõ¥Êñ∞Êìç‰ΩúÁöÑÊó∂ÂÄôÔºå‰∏ªÊúçÂä°Âô®A‰ºöÊääÊõ¥Êñ∞Êìç‰ΩúÂÜôÂÖ•Âà∞BinlogÊó•Âøó‰∏≠„ÄÇÁÑ∂ÂêéBinlog‰ºöÂ∞ÜÊï∞ÊçÆÊó•ÂøóÂêåÊ≠•Âà∞‰∏ªÊúçÂä°Âô®BÔºåÂÜôÂÖ•Âà∞‰∏ªÊúçÂä°Âô®ÁöÑRelay log‰∏≠ÔºåÁÑ∂ÂêéÊâßRelay logÔºåËé∑ÂæóRelay log‰∏≠ÁöÑÊõ¥Êñ∞Êó•ÂøóÔºåÊâßË°åSQLÊìç‰ΩúÂÜôÂÖ•Âà∞Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®BÁöÑÊú¨Âú∞Êï∞ÊçÆÂ∫ì‰∏≠„ÄÇBÊúçÂä°Âô®‰∏äÁöÑÊõ¥Êñ∞‰πüÂêåÊ†∑ÈÄöËøáBinlogÂ§çÂà∂Âà∞‰∫ÜÊúçÂä°Âô®AÁöÑRelay log‰∏≠ÔºåÁÑ∂ÂêéÈÄöËøáRelay logÂ∞ÜÊï∞ÊçÆÊõ¥Êñ∞Âà∞ÊúçÂä°Âô®A‰∏≠„ÄÇ ÈÄöËøáËøôÁßçÊñπÂºèÔºåÊúçÂä°Âô®AÊàñËÄÖB‰ªª‰Ωï‰∏ÄÂè∞ÊúçÂä°Âô®Êî∂Âà∞‰∫ÜÊï∞ÊçÆÁöÑÂÜôÁöÑÊìç‰ΩúÈÉΩ‰ºöÂêåÊ≠•Êõ¥Êñ∞Âà∞Âè¶‰∏ÄÂè∞ÊúçÂä°Âô®ÔºåÂÆûÁé∞‰∫ÜÊï∞ÊçÆÂ∫ì‰∏ª‰∏ªÂ§çÂà∂„ÄÇ‰∏ª‰∏ªÂ§çÂà∂ÂèØ‰ª•ÊèêÈ´òÁ≥ªÁªüÁöÑÂÜôÂèØÁî®ÔºåÂÆûÁé∞ÂÜôÊìç‰ΩúÁöÑÈ´òÂèØÁî®„ÄÇ MySQL‰∏ª‰∏ªÂ§çÂà∂Â§±ÊïàÊÅ¢Â§ç Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÁî®Êà∑‰ºöÂÜôÂÖ•Âà∞‰∏ªÊúçÂä°Âô®A‰∏≠ÔºåÁÑ∂ÂêéÊï∞ÊçÆ‰ªéAÂ§çÂà∂Âà∞‰∏ªÊúçÂä°Âô®B‰∏ä„ÄÇÂΩì‰∏ªÊúçÂä°Âô®AÂ§±ÊïàÁöÑÊó∂ÂÄôÔºåÂÜôÊìç‰Ωú‰ºöË¢´ÂèëÈÄÅÂà∞‰∏ªÊúçÂä°Âô®B‰∏≠ÂéªÔºåÊï∞ÊçÆ‰ªéBÊúçÂä°Âô®Â§çÂà∂Âà∞AÊúçÂä°Âô®„ÄÇ ‰∏ª‰∏ªÂ§±ÊïàÁª¥Êä§ËøáÁ®ãÔºö ÊúÄÂºÄÂßãÁöÑÊó∂ÂÄôÔºåÊâÄÊúâÁöÑ‰∏ªÊúçÂä°Âô®ÈÉΩÂèØ‰ª•Ê≠£Â∏∏‰ΩøÁî®ÔºåÂΩì‰∏ªÊúçÂä°Âô®AÂ§±ÊïàÁöÑÊó∂ÂÄôÔºåËøõÂÖ•ÊïÖÈöúÁä∂ÊÄÅÔºåÂ∫îÁî®Á®ãÂ∫èÊ£ÄÊµãÂà∞‰∏ªÊúçÂä°Âô®AÂ§±ÊïàÔºåÊ£ÄÊµãÂà∞Ëøô‰∏™Â§±ÊïàÂèØËÉΩÈúÄË¶ÅÂá†ÁßíÈíüÊàñËÄÖÂá†ÂàÜÈíüÁöÑÊó∂Èó¥ÔºåÁÑ∂ÂêéÂ∫îÁî®Á®ãÂ∫èÈúÄË¶ÅËøõË°åÂ§±ÊïàËΩ¨ÁßªÔºåÂ∞ÜÂÜôÊìç‰ΩúÂèëÈÄÅÂà∞Â§á‰ªΩ‰∏ªÊúçÂä°Âô®B‰∏äÈù¢ÂéªÔºåÂ∞ÜËØªÊìç‰ΩúÂèëÈÄÅÂà∞BÊúçÂä°Âô®ÂØπÂ∫îÁöÑ‰ªéÊúçÂä°Âô®‰∏äÈù¢Âéª„ÄÇ ‰∏ÄÊÆµÊó∂Èó¥ÂêéÊïÖÈöúÁªìÊùüÔºåAÊúçÂä°Âô®ÈúÄË¶ÅÈáçÂª∫Â§±ÊïàÊúüÈó¥‰∏¢Â§±ÁöÑÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØÊääËá™Â∑±ÂΩì‰Ωú‰ªéÊúçÂä°Âô®‰ªéBÊúçÂä°Âô®‰∏äÈù¢ÂéªÂêåÊ≠•Êï∞ÊçÆ„ÄÇÂêåÊ≠•ÂÆåÊàêÂêéÁ≥ªÁªüÊâçËÉΩÊÅ¢Â§çÊ≠£Â∏∏„ÄÇËøô‰∏™Êó∂ÂÄôBÊúçÂä°Âô®ÊòØÁî®Êà∑ÁöÑ‰∏ªË¶ÅËÆøÈóÆÊúçÂä°Âô®ÔºåAÊúçÂä°Âô®ÂΩì‰ΩúÂ§á‰ªΩÊúçÂä°Âô®„ÄÇ MySQLÂ§çÂà∂Ê≥®ÊÑè‰∫ãÈ°π ‰∏çË¶ÅÂØπ‰∏§‰∏™Êï∞ÊçÆÂ∫ìÂêåÊó∂ËøõË°åÊï∞ÊçÆÂÜôÊìç‰ΩúÔºåÂõ†‰∏∫ËøôÁßçÊÉÖÂÜµ‰ºöÂØºËá¥Êï∞ÊçÆÂÜ≤Á™Å„ÄÇ Â§çÂà∂Âè™ÊòØÂ¢ûÂä†‰∫ÜÊï∞ÊçÆÁöÑËØªÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõÔºåÂπ∂Ê≤°ÊúâÂ¢ûÂä†ÂÜôÂπ∂ÂèëÁöÑËÉΩÂäõÂíåÁ≥ªÁªüÂ≠òÂÇ®ËÉΩÂäõ„ÄÇ Êõ¥Êñ∞Êï∞ÊçÆË°®ÁöÑÁªìÊûÑ‰ºöÂØºËá¥Â∑®Â§ßÁöÑÂêåÊ≠•Âª∂Ëøü„ÄÇ ÈúÄË¶ÅÊõ¥Êñ∞Ë°®ÁªìÊûÑÁöÑÊìç‰ΩúÔºå‰∏çË¶ÅÂÜôÂÖ•Âà∞Âà∞Binlog‰∏≠ÔºåË¶ÅÂÖ≥Èó≠Êõ¥Êñ∞Ë°®ÁªìÊûÑÁöÑBinlog„ÄÇÂ¶ÇÊûúË¶ÅÂØπË°®ÁªìÊûÑËøõË°åÊõ¥Êñ∞ÔºåÂ∫îËØ•Áî±ËøêÁª¥Â∑•Á®ãÂ∏àDBAÂØπÊâÄÊúâ‰∏ª‰ªéÊï∞ÊçÆÂ∫ìÂàÜÂà´ÊâãÂ∑•ËøõË°åÊï∞ÊçÆË°®ÁªìÊûÑÁöÑÊõ¥Êñ∞Êìç‰Ωú„ÄÇ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
      </categories>
      <tags>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HexoÊê≠Âª∫GitHubÂçöÂÆ¢(ÊåÅÁª≠Êõ¥Êñ∞)]]></title>
    <url>%2Fposts%2Fd5766023.html</url>
    <content type="text"><![CDATA[ÂÖ•Èó®Hexo Áî±‰∫éÂπ≥Êó∂Ëá™Â∑±ÂñúÊ¨¢Áúã‰∏Ä‰∫õÊäÄÊúØÁ±ªÊñáÁ´†Êï¥ÁêÜÊàêWordÁ¨îËÆ∞ÔºåÊÄªÊÑüËßâËøôÁßçÊñπÂºèÂ§™lowÔºåÊÉ≥Ëá™Â∑±Êê≠Âª∫Â±û‰∫éËá™Â∑±ÁöÑÂçöÂÆ¢ÔºåÂú®ÁΩë‰∏äÊü•ÈòÖ‰∫Ü‰∏Ä‰∏ãÔºåÂèëÁé∞HexoÂú®GitHubÊàñËÄÖÊòØÁ†Å‰∫ë‰∏äÊê≠Âª∫ÂçöÂÆ¢ÈùûÂ∏∏ÁªôÂäõ„ÄÇ ÁÑ∂ÂêéËá™Â∑±‰πüÊê≠Âª∫‰∫ÜÂçöÂÆ¢ÔºåËøôÁØáÊñáÁ´†Â∞±ËÆ∞ÂΩï‰∫ÜÊê≠Âª∫ÁöÑËøáÁ®ãÂèä‰∏Ä‰∫õ‰ºòÂåñ„ÄÇ ‰ªÄ‰πàÊòØHexo Hexo ÊòØ‰∏Ä‰∏™Âø´ÈÄü„ÄÅÁÆÄÊ¥Å‰∏îÈ´òÊïàÁöÑÂçöÂÆ¢Ê°ÜÊû∂„ÄÇHexo ‰ΩøÁî® Markdown ÔºàÊàñÂÖ∂‰ªñÊ∏≤ÊüìÂºïÊìéÔºâËß£ÊûêÊñáÁ´†ÔºåÂú®Âá†ÁßíÂÜÖÔºåÂç≥ÂèØÂà©Áî®Èùì‰∏ΩÁöÑ‰∏ªÈ¢òÁîüÊàêÈùôÊÄÅÁΩëÈ°µ„ÄÇÂ§ßÂÆ∂ËøõÂÖ• HexoÂÆòÁΩë ËøõË°åÊü•Áúã„ÄÇ ÂÆâË£ÖHexo ÂÆâË£Ö Hexo Áõ∏ÂΩìÁÆÄÂçï„ÄÇÁÑ∂ËÄåÂú®ÂÆâË£ÖÂâçÔºåÊÇ®ÂøÖÈ°ªÊ£ÄÊü•ÁîµËÑë‰∏≠ÊòØÂê¶Â∑≤ÂÆâË£Ö‰∏ãÂàóÂ∫îÁî®Á®ãÂ∫èÔºö Node.js Git cnpm Â¶ÇÊûúnpmËøêË°åÂá∫ÈîôÂ∞±ÂÆâË£ÖcnpmÂõΩÂÜÖÈïúÂÉè ÊâÄÊúâÂøÖÂ§áÁöÑÂ∫îÁî®Á®ãÂ∫èÂÆâË£ÖÂÆåÊàêÂêéÔºåÂç≥ÂèØ‰ΩøÁî® npmÊàñËÄÖcnpm ÂÆâË£Ö Hexo„ÄÇ ÊâìÂºÄGit Bash hereÔºåËæìÂÖ•Ôºö 123$ npm install -g hexo-cli ÊàñËÄÖ $ cnpm install -g hexo-cli Ê£ÄÊü•ÊòØÂê¶ÂÆâË£ÖHexoÂÆåÊàê,Êü•ËØ¢ÊòØÂê¶ÊàêÂäüÔºåÊòæÁ§∫hexo-cli ÁâàÊú¨Â∞±ËØ¥ÊòéÊàêÂäü‰∫Ü 1$ hexo -V Âª∫Á´ô ÂÆâË£Ö‰∏ÄÂàáÊâÄÈúÄÁöÑÁ®ãÂ∫èÂêéÔºåÂ∞±ÂèØ‰ª•ÂºÄÂßãÂª∫Á´ô‰∫ÜÔºåÂ∞±ÊòØÂàõÂª∫Êàë‰ª¨ÁöÑÂçöÂÆ¢,Â§ßÂÆ∂‰πüÂèØ‰ª•ËøõÂÖ• Âª∫Á´ôÂÆòÁΩë Êü•Áúã„ÄÇ Êñ∞Âª∫‰∏Ä‰∏™Êñá‰ª∂Â§πÔºåÊù•ÁÆ°ÁêÜÊàë‰ª¨ÁöÑÂçöÂÆ¢È°πÁõÆÔºåÊâßË°å‰∏ãÂàóÂëΩ‰ª§ÔºåHexo Â∞Ü‰ºöÂú®ÊåáÂÆöÊñá‰ª∂Â§π‰∏≠Êñ∞Âª∫ÊâÄÈúÄË¶ÅÁöÑÊñá‰ª∂„ÄÇ ËøêË°åÂëΩ‰ª§ 123$ hexo init &lt;folder&gt;$ cd &lt;folder&gt;$ cnpm install Ê≥®Ôºö&lt;folder&gt;ÊòØË°®Á§∫Âª∫Á´ôÁöÑÂçöÂÆ¢È°πÁõÆÂêç ÊâìÂºÄGit Bash hereÔºåËæìÂÖ•Ôºö 1$ hexo init githubBlog ËøõÂÖ•ÂàõÂª∫ÁöÑÂçöÂÆ¢È°πÁõÆ‰∏ãÔºåÂÆâË£Ö 12$ cd githubBlog$ cnpm install ÂÆâË£Ö‰πãÂêéÔºåÊï¥‰∏™ÂçöÂÆ¢È°πÁõÆÁõÆÂΩïÂ¶Ç‰∏ãÔºö ËÆøÈóÆURL 123$ hexo server ÊàñËÄÖ$ hexo s ËÆøÈóÆURLÔºöhttp://localhost:4000ÔºåÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö Âà∞ËøôÈáåÂ∑≤ÁªèÈÄöËøáHexoÂàùÊ≠•ÂàõÂª∫ÂçöÂÆ¢‰∫ÜÔºå‰∏ãÈù¢ÂÜçÊù•‰∫ÜËß£‰∏Ä‰∏ãÂ¶Ç‰ΩïÂ∞ÜÊàë‰ª¨ÁöÑÂçöÂÆ¢ÊâòÁÆ°Âà∞GitHubÊúçÂä°Âô®‰∏ä„ÄÇ ÊâòÁÆ°Âà∞GitHub GitHubÂàõÂª∫repositories ËøõÂÖ•GitHubÂÆòÁΩë‰∏≠ÊµèËßàÂô®ËæìÂÖ• https://github.com/ ,Â¶ÇÊûúËøòÊ≤°ÊúâË¥¶Âè∑Â∞±ÂàõÂª∫‰∏Ä‰∏™Ë¥¶Âè∑Â∞±Â•Ω‰∫Ü„ÄÇÁôªÂΩïËá™Â∑±ÁöÑË¥¶Âè∑„ÄÇÁõ¥Êé•new repositories ÊàñËÄÖËøõÂÖ•You repositories Âú®new repositories„ÄÇ ËøõÂÖ•Âà∞ÂàõÂª∫ repositories È°µÈù¢Âêé,‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèÔºåÂ∞ÜÊñ∞Âª∫ÁöÑrepositoryÁöÑÂêçÂ≠ó‰∏∫: You account name.github.io„ÄÇÂÖ∂‰ªñÈªòËÆ§Â∞±Â•Ω‰∫Ü„ÄÇ ÈÖçÁΩÆ GitHubÁöÑRepositoryÂàõÂª∫Â•ΩÂêéÔºåÂú®ÂõûÂà∞Êú¨Âú∞ÁöÑHexoÁöÑgithubBlogÈ°πÁõÆ‰∏≠ÔºåÊâæÂà∞Âú®È°πÁõÆÁöÑÊ†πÁõÆÂΩï‰∏ã_config.ymlÊâæÂà∞ deployÊ†áÁ≠æ Âú®ËØ•Êñá‰ª∂‰∏ãÈù¢Ê∑ªÂä† Ê≥®Ôºörepository: https://github.com/whb1990/whb1990.github.io ÊòØËá™Â∑±ÂàöÂàöÂàõÂª∫You account name.github.io ÁöÑrepositoryÔºåÂú®Clone with HTTPSÈáåÈù¢ÔºåÂ§çÂà∂Á≤òË¥¥Â∞±Â•Ω‰∫ÜÔºåÂÜíÂè∑ÂêéÈù¢ËÆ∞ÂæóÁ©∫Ê†º„ÄÇbranch ÂêéÈù¢ÊòØmasterÂ∞±Â•Ω‰∫Ü„ÄÇ 1234deploy: #ÈÉ®ÁΩ≤ type: git repository: https://github.com/whb1990/whb1990.github.io.git branch: master Âú®_config.ymlÊâæÂà∞urlËøõË°å‰øÆÊîπ‰∏∫Ôºö 1url: http://whb1990.github.io #ÂçöÂÆ¢ÁΩëÂùÄ ÈÉ®ÁΩ≤ Âà∞ËøôÈáåÂ∞±Â∑Æ‰∏çÂà∞‰∫ÜÔºåÊé•‰∏ãÊù•ÈúÄË¶ÅÊâßË°å‰∏Ä‰∫õÂëΩ‰ª§ÔºåÂ∞ÜÂçöÂÆ¢ÈÉ®ÁΩ≤Âà∞GitHub‰∏äÂéª„ÄÇ ÊâìÂºÄGit Bash HereËøõÂÖ•githubBlog Ê†πÁõÆÂΩï‰∏ãÔºåÈ¶ñÂÖàÈúÄË¶ÅÂÆâË£Ö‰∏Ä‰∏ã hexo-deployer-git ‰∏çÁÑ∂ÂèØËÉΩÂá∫Áé∞ÈîôËØØÊó†Ê≥ïÈÉ®ÁΩ≤ÊàêÂäü„ÄÇ 1$ cnpm install hexo-deployer-git --save ÁÑ∂ÂêéÂú®ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§: 123$ hexo clean$ hexo generate$ hexo deploy ÊàñËÄÖÁÆÄÂÜô 123$ hexo clean$ hexo g$ hexo d ÈÉ®ÁΩ≤ÊàêÂäüÂ¶Ç‰∏ãÊòæÁ§∫: ÊµãËØï Êàë‰ª¨ËøõË°åËÆøÈóÆ https://whb1990.github.io/ Âíå http://localhost:4000/ ‰∏ÄÊ†∑ÁöÑÈ°µÈù¢ËØ¥ÊòéÊòØÂ∑≤ÁªèÊàêÂäü„ÄÇ Á´ôÁÇπÊñá‰ª∂ÈÖçÁΩÆ Âú®Ê†πgithubBlogÁõÆÂΩï‰∏ã_config.ymlÊñá‰ª∂ÔºåÊàë‰ª¨ÊöÇ‰∏îÁß∞‰∏∫Á´ôÁÇπÈÖçÁΩÆÊñá‰ª∂Ôºå‰ª•‰æø‰∏éÂêéÈù¢ËÆ≤Âà∞ÁöÑ‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂(Next‰∏ªÈ¢ò‰∏ãÁöÑ_config.ymlÊñá‰ª∂)ËøõË°åÂå∫ÂàÜ„ÄÇ ÁΩëÁ´ô ÂèÇÊï∞ ÊèèËø∞ title ÁΩëÁ´ôÊ†áÈ¢ò subtitle ÁΩëÁ´ôÂâØÊ†áÈ¢ò description ÁΩëÁ´ôÊèèËø∞ author ÊÇ®ÁöÑÂêçÂ≠ó language ÁΩëÁ´ô‰ΩøÁî®ÁöÑËØ≠Ë®Ä timezone ÁΩëÁ´ôÊó∂Âå∫„ÄÇHexo ÈªòËÆ§‰ΩøÁî®ÊÇ®ÁîµËÑëÁöÑÊó∂Âå∫„ÄÇÊó∂Âå∫ÂàóË°®„ÄÇÊØîÂ¶ÇËØ¥ÔºöAmerica/New_York, Japan, Âíå UTC „ÄÇ ÁõÆÂΩï ÂèÇÊï∞ ÊèèËø∞ source_dir ËµÑÊ∫êÊñá‰ª∂Â§πÔºåËøô‰∏™Êñá‰ª∂Â§πÁî®Êù•Â≠òÊîæÂÜÖÂÆπ„ÄÇ public_dir ÂÖ¨ÂÖ±Êñá‰ª∂Â§πÔºåËøô‰∏™Êñá‰ª∂Â§πÁî®‰∫éÂ≠òÊîæÁîüÊàêÁöÑÁ´ôÁÇπÊñá‰ª∂„ÄÇ tag_dir Ê†áÁ≠æÊñá‰ª∂Â§π archive_dir ÂΩíÊ°£Êñá‰ª∂Â§π category_dir ÂàÜÁ±ªÊñá‰ª∂Â§π code_dir Include code Êñá‰ª∂Â§π i18n_dir ÂõΩÈôÖÂåñÔºài18nÔºâÊñá‰ª∂Â§π skip_render Ë∑≥ËøáÊåáÂÆöÊñá‰ª∂ÁöÑÊ∏≤ÊüìÔºåÊÇ®ÂèØ‰ΩøÁî® glob Êù•ÈÖçÁΩÆË∑ØÂæÑ ÊñáÁ´† ÂèÇÊï∞ ÊèèËø∞ ÈªòËÆ§ÂÄº new_post_name Êñ∞ÊñáÁ´†ÁöÑÊñá‰ª∂ÂêçÁß∞ :title.md default_layout È¢ÑËÆæÂ∏ÉÂ±Ä post auto_spacing Âú®‰∏≠ÊñáÂíåËã±Êñá‰πãÈó¥Âä†ÂÖ•Á©∫Ê†º false titlecase ÊääÊ†áÈ¢òËΩ¨Êç¢‰∏∫ title case false external_link Âú®Êñ∞Ê†áÁ≠æ‰∏≠ÊâìÂºÄÈìæÊé• true filename_case ÊääÊñá‰ª∂ÂêçÁß∞ËΩ¨Êç¢‰∏∫ (1) Â∞èÂÜôÊàñ (2) Â§ßÂÜô 0 render_drafts ÊòæÁ§∫ËçâÁ®ø false post_asset_folder ÂêØÂä® Asset Êñá‰ª∂Â§π false relative_link ÊääÈìæÊé•Êîπ‰∏∫‰∏éÊ†πÁõÆÂΩïÁöÑÁõ∏ÂØπ‰ΩçÂùÄ false future ÊòæÁ§∫Êú™Êù•ÁöÑÊñáÁ´† true highlight ‰ª£Á†ÅÂùóÁöÑËÆæÁΩÆ ÂàÜÁ±ª&amp;Ê†áÁ≠æ ÂèÇÊï∞ ÊèèËø∞ ÈªòËÆ§ÂÄº default_category ÈªòËÆ§ÂàÜÁ±ª uncategorized category_map ÂàÜÁ±ªÂà´Âêç tag_map Ê†áÁ≠æÂà´Âêç ÂàÜÈ°µ ÂèÇÊï∞ ÊèèËø∞ ÈªòËÆ§ÂÄº per_page ÊØèÈ°µÊòæÁ§∫ÁöÑÊñáÁ´†Èáè (0 = ÂÖ≥Èó≠ÂàÜÈ°µÂäüËÉΩ) 10 pagination_dir ÂàÜÈ°µÁõÆÂΩï page ÂÜô‰Ωú ÂàõÂª∫ÊñáÁ´† 1$ hexo new [layout] &lt;title&gt; Â¶ÇÔºöÂàõÂª∫hello-world 1$ hexo new hello-world Â¶ÇÊûú‰∏çÊ∑ªÂä†titleÔºåÈªòËÆ§Â∞±ÊòØÊ†áÈ¢òtitle: hello-world„ÄÇ ËøôÈáåÊ≥®ÊÑè‰∏Ä‰∏ãÔºåÂ¶ÇÊûúÂàõÂª∫Â∏¶Êúâ‰∏≠ÊñáÁöÑË∑ØÂæÑÂêçÁß∞Êó∂ÔºåÁîüÊàêÈùôÊÄÅÈ°µÈù¢hexo gÂèØËÉΩ‰ºöÊä•Èîô„ÄÇ 12warning: LF will be replaced by CRLF in xxxxThe file will have its original line endings in your working directory. ËøôÊòØÁî±‰∫éÂéüÂõ†ÊòØË∑ØÂæÑ‰∏≠Â≠òÂú® / ÁöÑÁ¨¶Âè∑ËΩ¨‰πâÈóÆÈ¢ò Â¶ÇÔºöÂàõÂª∫ÊñáÁ´†Êó∂ÂëΩÂêç‰∏∫‰∏≠ÊñáÔºå‰∏ÄËà¨ÈÉΩÂá∫Áé∞Ëøô‰∏™Â∞èÈóÆÈ¢ò„ÄÇ Ëß£ÂÜ≥ Âú®ÂëΩ‰ª§Ë°å‰∏≠ËæìÂÖ•: 1$ git config --global core.autocrlf false ÁÑ∂ÂêéÈáçÊñ∞ÁîüÊàêÊñá‰ª∂ÈÉ®ÁΩ≤Â∞±Â•Ω‰∫Ü„ÄÇ ÁºñËæëÊñáÁ´† ÂàõÂª∫ÁöÑÊñáÁ´†Âú®source/_postsÁõÆÂΩï‰∏ãÔºåÊâìÂºÄÊñá‰ª∂ËøõË°åÁºñËæëÔºåÂÆåÂÖ®ÊîØÊåÅMarkdownËØ≠Ê≥ï„ÄÇ Next‰∏ªÈ¢ò Âú® Hexo‰∏ªÈ¢òÂÆòÁΩë ‰∏≠ÊúâËÆ∏Â§ö‰∏ªÈ¢òÔºåÂ§ßÂÆ∂ÂñúÊ¨¢‰ªÄ‰πàÂ∞±ËøõË°åÈÉ®ÁΩ≤ÂíåÁºñËæëÂ∞±Â•Ω‰∫ÜÔºåÂ§ßËá¥ÁöÑÊÄùË∑ØÈÉΩÊòØÂ∑Æ‰∏çÂ§öÁöÑ„ÄÇ ÊàëÈÄâÊã©ÁöÑ Next‰∏ªÈ¢ò ÔºåÁΩë‰∏äÂæàÂ§ö‰πüÊòØÁî®ÁöÑËøô‰∏™‰∏ªÈ¢ò„ÄÇ ÂÆâË£Ö Âú®githubBlogÊ†πÁõÆÂΩï‰∏ãÔºåÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö 1$ git clone https://github.com/theme-next/hexo-theme-next themes/next ‰∏äÈù¢ÁöÑÂëΩ‰ª§ÊòØcloneÊúÄÊñ∞ÁâàÊú¨ÁöÑ‰∏ªÈ¢òÔºå‰πüÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÂëΩ‰ª§cloneÊåáÂÆöÁâàÊú¨ÁöÑ‰∏ªÈ¢ò 1$ git clone --branch v7.1.1 https://github.com/theme-next/hexo-theme-next themes/next ÂÆâË£ÖÂÆåÊàê‰πãÂêéÔºåÂú®themes‰∏ãÂ∞±‰ºöÊúânextÁõÆÂΩï ÂàáÊç¢‰∏ªÈ¢ò Âú®È°πÁõÆÊ†πÁõÆÂΩï‰∏ãÊâìÂºÄ_config.ymlÊñá‰ª∂Â∞ÜthemeËÆæÁΩÆ‰∏∫nextÂç≥ÂèØÔºö ÈÉ®ÁΩ≤‰πãÂêéÊü•ÁúãÊïàÊûúÂ¶Ç‰∏ãÔºåÊúâÁÇπ‰∏ëÔºö ‰∏ªÈ¢òÈÖçÁΩÆ ‰∏ÄËà¨ÈÖçÁΩÆÈÉΩÂú®theme/next/-config.ymlÊñá‰ª∂‰∏ãÈÖçÁΩÆ„ÄÇ ‰øÆÊîπÊï¥‰ΩìÂ∏ÉÂ±Ä Âú®theme/next/-config.ymlÊâæÂà∞menuÁúãÁúãËá™Â∑±ÂçöÂÆ¢ÊâÄÈúÄÁöÑÂàÜÁ±ª 123456789menu: home: / || home #È¶ñÈ°µ about: /about/ || user #ÂÖ≥‰∫é tags: /tags/ || tags #Ê†áÁ≠æ categories: /categories/ || th #ÁõÆÂΩï archives: /archives/ || archive #ÂΩíÊ°£ #schedule: /schedule/ || calendar #Êó•Á®ã sitemap: /sitemap.xml || sitemap #Á´ôÁÇπÂú∞Âõæ commonweal: /404/ || heartbeat #ÂÖ¨Áõä404 Âú®menu_settingsÂ¶ÇÊûúËÆæÁΩÆicon: falseÂàôÊó†ÂõæÊ†áÔºåbadges: trueÂàôÊ†áÁ≠æÈÉΩ‰ºöÊòæÁ§∫Êï∞Â≠ó 123menu_settings: icons: true badges: false &lt;font color=&quot;red&quot;&gt;Ê≥®:&lt;/font&gt;ËøôÈáåÈúÄË¶ÅÂàõÂª∫aboutÈ°µÈù¢ÔºåÂæàÁÆÄÂçïÔºåÂêåÁêÜÂàõÂª∫Ê†áÁ≠ætags„ÄÅÂΩíÊ°£archivesÈ°µÈù¢‰∏ÄÊ†∑ÁöÑÊñπÂºèÔºåÊâÄÈúÄË¶ÅÂàõÂª∫ÁöÑÂêçÁß∞Ë¶Å‰∏émenuÁõ∏ÂØπÂ∫îÔºå‰∏æ‰æãËØ¥ÊòéÂ¶Ç‰∏ã„ÄÇ 12$ hexo new page about #ÁúãÁúãmenu‰∏äËøòÊúâ‰ªÄ‰πàÊ†áÁ≠æÊ≤°ÂàõÂª∫Â∞±Ë°åÂàõÂª∫$ hexo new page tags #ÂàõÂª∫Ê†áÁ≠æÁ≠â ÂàõÂª∫ÂÆåÊàê‰πãÂêéÂú®Ëá™Â∑±È°πÁõÆÊü•ÊâæÔºåÂ¶ÇÊàëÁöÑÊòØgithubBlog/source/ÁõÆÂΩï‰∏ãÊü•ÁúãÊñ∞ÂàõÂª∫Â•ΩÁöÑÁõ∏ÂÖ≥Ê†áÁ≠æÈ°µÈù¢ÔºåÈáåÈù¢ÂåÖÂê´ÂêÑËá™ÁöÑindex.mdÊñá‰ª∂ÔºåÂ§ßÂÆ∂ÂèØ‰ª•Ëá™Ë°åÁºñËæë‰∫Ü„ÄÇ SchemesÊñπÊ°àËÆæÁΩÆ 12345# Schemes#scheme: Muse #ËøôÊòØ NexÈªòËÆ§ÁâàÊú¨ÔºåÈªëÁôΩ‰∏ªË∞ÉÔºåÂ§ßÈáèÁïôÁôΩ #scheme: Mist #Muse ÁöÑÁ¥ßÂáëÁâàÊú¨ÔºåÊï¥Ê¥ÅÊúâÂ∫èÁöÑÂçïÊ†èÂ§ñËßÇ#scheme: Pisces #ÂèåÊ†è SchemeÔºåÂ∞èÂÆ∂Á¢ßÁéâ‰ººÁöÑÊ∏ÖÊñ∞scheme: Gemini #ÂèåÂ≠êÂ∫ßÔºå‰πüÊòØÂèåÊ†èÂΩ¢ÂºèÔºåÂíåPiscesÁ±ª‰ºº Ëá™Â∑±ÂñúÊ¨¢‰ªÄ‰πàÈ£éÊ†ºËá™Ë°åÈÄâÊã©„ÄÇ socialËÆæÁΩÆ ‰ΩøÁî®ÊñπÂºè: Key: permalink || icon KeyË°®Á§∫Ê†áÁ≠æÊòæÁ§∫ÔºåpermalinkË°®Á§∫URIËøûÊé•ÔºåiconË°®Á§∫ÂõæÊ†áÔºåËá™Â∑±Ê∑ªÂä†ÊâÄË¶ÅÊòæÁ§∫ÁöÑÔºå 12345678910111213141516171819social: GitHub: https://github.com/whb1990 || github E-Mail: mailto:whbsurpass@163.com || envelope QQ: 270028806 || qq ÂæÆ‰ø°: yan521bo ||weixin #Weibo: https://weibo.com/yourname || weibo #Google: https://plus.google.com/yourname || google #Twitter: https://twitter.com/yourname || twitter #FB Page: https://www.facebook.com/yourname || facebook #VK Group: https://vk.com/yourname || vk #StackOverflow: https://stackoverflow.com/yourname || stack-overflow #YouTube: https://youtube.com/yourname || youtube #Instagram: https://instagram.com/yourname || instagram #Skype: skype:yourname?call|chat || skypesocial_icons: #ËÆæÁΩÆÂõæÊ†áÊòØÂê¶ÊòæÁ§∫ËøôÈáå enable: true #Ë°®Á§∫ÂºÄÂêØ icons_only: false #Âè™ÊòæÁ§∫ÂõæÁâá transition: false &lt;font color=&quot;red&quot;&gt;Ê≥®Ôºö&lt;/font&gt;ÂõæÊ†áÂ∫ìÊù•Ê∫ê [https://fontawesome.com/icons?from=io] ÔºåÂú®scheme: PiscesËØ•ÊïàÊûú‰∏çÊòæÁ§∫„ÄÇ avatarÂ§¥ÂÉèËÆæÁΩÆ 12345678910111213avatar: # In theme directory (source/images): /images/avatar.gif # In site directory (source/uploads): /uploads/avatar.gif # You can also use other linking images. url: /images/avatar.jpg # If true, the avatar would be dispalyed in circle. #ÂúÜÂΩ¢Ê°Ü rounded: true # The value of opacity should be choose from 0 to 1 to set the opacity of the avatar. opacity: 1 # If true, the avatar would be rotated with the cursor. #Â§¥ÂÉèÊòØÂê¶ÊóãËΩ¨ rotated: true tocËæπÊ†è‰∏≠ÁöÑÁõÆÂΩïËÆæÁΩÆ 12345678910toc: #ËæπÊ†èËÆæÁΩÆ enable: true #ÊòØÂê¶ÂêØÁî®ËæπÊ†è # Automatically add list number to toc. number: true #Ëá™Âä®Â∞ÜÂàóË°®ÁºñÂè∑Ê∑ªÂä†Âà∞toc # If true, all words will placed on next lines if header width longer then sidebar width. wrap: false #trueÊó∂ÊòØÂΩìÊ†áÈ¢òÂÆΩÂ∫¶ÂæàÈïøÊó∂ÔºåËá™Âä®Êç¢Âà∞‰∏ã‰∏ÄË°å # If true, all level of TOC in a post will be displayed, rather than the activated part of it. expand_all: false #ÊäòÂè† # Maximum heading depth of generated toc. You can set it in one post through `toc_max_depth` in Front-matter. max_depth: 6 #ÊúÄÂ§ßÊ∑±Â∫¶ Creative Commons 4.0ÂõΩÈôÖËÆ∏ÂèØËÆæÁΩÆ 12# Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zerocreative_commons: by-nc-sa sidebar‰æßËæπÊ†èÈÖçÁΩÆËøôÈáåÈÄâÊã©ÈªòËÆ§Âêß 1234567891011121314151617181920212223sidebar: # Sidebar Position, available values: left | right (only for Pisces | Gemini). position: left #position: right # Manual define the sidebar width. If commented, will be default for: # Muse | Mist: 320 # Pisces | Gemini: 240 width: 240 # Sidebar Display, available values (only for Muse | Mist): # - post expand on posts automatically. Default. # - always expand for all pages automatically. # - hide expand only when click on the sidebar toggle icon. # - remove totally remove sidebar including sidebar toggle. display: post # Sidebar offset from top menubar in pixels (only for Pisces | Gemini). offset: 12 # Enable sidebar on narrow view (only for Muse | Mist). onmobile: true # Click any blank part of the page to close sidebar (only for Muse | Mist). dimmer: false save_scrollÈÖçÁΩÆ 12# Automatically saving scroll position on each post / page in cookies.save_scroll: false #ÊòØÂê¶Âú®Cookie‰∏≠Ëá™Âä®‰øùÂ≠òÊØè‰∏™Â∏ñÂ≠ê/È°µÈù¢‰∏äÁöÑÊªöÂä®‰ΩçÁΩÆ„ÄÇ excerpt_description 12# Automatically excerpt description in homepage as preamble text.excerpt_description: false #ÊòØÂê¶Ëá™Âä®ÊëòÂΩï‰∏ªÈ°µ‰∏≠ÁöÑÊèèËø∞‰Ωú‰∏∫ÂâçÂØºÊñáÊú¨„ÄÇ auto_excerptÈÖçÁΩÆ 123auto_excerpt: enable: true #ÊòØÂê¶Ëá™Âä®ÊëòÂΩï„ÄÇ‰∏çÊé®Ëçê length: 150 #ËøôÈáåÊòØËØ¥ÊñáÁ´†ÂºÄÂ§¥Á¨¨‰∏Ä‰∏™Â≠óÂà∞Á¨¨150‰∏™Â≠óÂ∞±ÊòæÁ§∫"ÈòÖËØªÂÖ®Êñá" codeblock‰ª£Á†ÅÂùóÈÖçÁΩÆ 1234567891011121314codeblock: # Code Highlight theme # Available values: normal | night | night eighties | night blue | night bright # See: https://github.com/chriskempson/tomorrow-theme highlight_theme: normal #‰ª£Á†ÅÁ™ÅÂá∫ÊòæÁ§∫‰∏ªÈ¢ò # Manual define the border radius in codeblock, leave it blank for the default value: 1 border_radius: 1 # Add copy button on codeblock copy_button: enable: true # Show text copy result. show_result: true # Available values: default | flat | mac style: flat wechat_subscriberÂæÆ‰ø°ÈÖçÁΩÆ 1234wechat_subscriber: enabled: true #ÊòØÂê¶ÂêØÂä®ÂæÆ‰ø°ËÆ¢ÈòÖ qcode: /path/to/your/wechatqcode ex. /uploads/wechat-qcode.jpg description: ex. subscribe to my blog by scanning my public wechat account footer Â∫ïÈÉ®ËÆæÁΩÆ 12345678910111213141516171819202122232425262728footer: # Specify the date when the site was setup. If not defined, current year will be used. since: 2019 #Âª∫Á´ôÂºÄÂßãÊó∂Èó¥ # Icon between year and copyright info. icon: # Icon name in Font Awesome. See: https://fontawesome.com/v4.7.0/icons/ # `heart` is recommended with animation in red (#ff0000). name: heart #ËÆæÁΩÆÂõæÊ†áÔºåÊÉ≥‰øÆÊîπÂõæÊ†á‰ªéhttps://fontawesome.com/v4.7.0/iconsËé∑Âèñ # If you want to animate the icon, set it to true. animated: true # Change the color of icon, using Hex Code. color: "#ff0000" # If not defined, `author` from Hexo `_config.yml` will be used. copyright: ¬©2019 by ÁéãÊ¥™Âçö #ÁâàÊùÉ powered: # Hexo link (Powered by Hexo). enable: true ##ÊòØÂê¶ÊòæÁ§∫Hexo link # Version info of Hexo after Hexo link (vX.X.X). version: true #ÊòØÂê¶ÊòæÁ§∫HexoÁâàÊú¨ theme: # Theme &amp; scheme info link (Theme - NexT.scheme). enable: true #ÊòØÂê¶ÊòæÁ§∫NexT‰∏ªÈ¢ò # Version info of NexT after scheme info (vX.X.X). version: true #ÊòØÂê¶ÊòæÁ§∫NexTÁâàÊú¨ faviconÊ†áÁ≠æÈ°µÂõæÊ†á 12345favicon: small: /images/favicon-16x16-next.png #Â∞èÂõæÊ†á ÈªòËÆ§ÁöÑNexT medium: /images/favicon-32x32-next.png #‰∏≠ÂõæÊ†á ÈªòËÆ§NexT apple_touch_icon: /images/apple-touch-icon-next.png #ËãπÊûúËß¶Êë∏ÂõæÊ†á safari_pinned_tab: /images/logo.svg #safariÂõ∫ÂÆöÊ†áÁ≠æ Math Equations Render Support Êï∞Â≠¶ÊñπÁ®ãÂºèÊ∏≤ÊüìÊîØÊåÅ 12345678math: enable: true #ÈªòËÆ§‰∏∫false per_page: true engine: mathjax #‰∏§ÁßçÊñπÂºè mathjax / katex mathjax: cdn: //cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML #ÈªòËÆ§ ËøôÈáåÂ§ßÂÆ∂Ê†πÊçÆËá™Â∑±ÈúÄÊ±Ç katex: cdn: //cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css #ÈªòËÆ§ 16 .Han Support ÊîØÊåÅÊ±âÂ≠ó ËÆæÁΩÆÊ±âÂ≠óÊîØÊåÅÔºåÊåâÁÖß‰ª•‰∏ãÊ≠•È™§Ôºö ÊâìÂºÄGit Bash Here,ËøõÂÖ•theme/nextÁõÆÂΩï‰∏ã 1$ cd themes/next Ëé∑ÂèñËØ•Ê±âÂ≠óÊîØÊåÅGit module,ÊâßË°åÂëΩ‰ª§‰ª•‰∏ãÂëΩ‰ª§Ëé∑Âæó 1$ git clone https://github.com/theme-next/theme-next-han source/lib/Han ËÆæÁΩÆÊ±âÂ≠óÊîØÊåÅ 1han: true Êõ¥Êñ∞update 12$ cd themes/next/source/lib/Han$ git pull fontÂ≠ó‰ΩìËÆæÁΩÆ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647font: # Use custom fonts families or not. # Depended options: `external` and `family`. enable: true #ÈªòËÆ§false Â¶ÇÊûúË¶ÅËøõË°åÂ≠ó‰Ωì‰øÆÊîπÈÇ£‰πàËÆæÁΩÆ‰∏∫true # Uri of fonts host, e.g. //fonts.googleapis.com (Default). host: //fonts.lug.ustc.edu.cn # Font options: # `external: true` will load this font family from `host` above. # `family: Times New Roman`. Without any quotes. # `size: x.x`. Use `em` as unit. Default: 1 (16px) # Global font settings used for all elements inside &lt;body&gt;. global: external: true family: Lato size: # Font settings for site title (.site-title). title: external: true family: size: # Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;). headings: external: true family: Roboto Slab size: # Font settings for posts (.post-body). posts: external: true family: # Font settings for &lt;code&gt; and code blocks. codes: external: true family: Roboto Mono # Font settings for Logo. # Fallback to `global` font settings. logo: external: true family: size: Ê∑ªÂä†ÂõæÊ†áÈìæÊé•Âà∞GitHub ‰∏ÄËà¨Âú®Âè≥‰∏äËßíÊàñËÄÖÂ∑¶‰∏äËßíÔºåÂ¶ÇÈÖçÁΩÆÂè≥‰∏äËßíFork_me_on_GitHub,Êåâ‰ª•‰∏ãÊ≠•È™§ËøõË°å ÊâìÂºÄ Fork_me_on_GitHub ÈìæÊé•ÔºåÈáåÈù¢ÊúâËÆ∏Â§öÊ†∑ÂºèÔºåÈÄâÊã©Ëá™Â∑±ÂñúÊ¨¢ÁöÑÊ†∑ÂºèÔºåÂ∞ÜÂÖ∂Â§çÂà∂‰∏ãÊù•„ÄÇ ÊâìÂºÄËá™Â∑±ÂçöÂÆ¢È°πÁõÆ‰∏≠ÁöÑthemes/next/layout/_layout.swigÊñá‰ª∂ÔºåÊêúÁ¥¢&lt;div class=&quot;headband&quot;&gt;&lt;/div&gt; Â∞ÜÂ§çÂà∂ÁöÑÂÜÖÂÆπÁ≤òË¥¥Âà∞&lt;div class=&quot;headband&quot;&gt;&lt;/div&gt;‰∏ãÈù¢ÔºåÂ¶Ç‰∏ãÔºö ÈÖçÁΩÆÂè≥‰∏äËßíÁöÑFork_me_on_GitHub: ‰øÆÊîπÊñáÁ´†Â∫ïÈÉ®Ê†áÁ≠æ Âú®ÂçöÂÆ¢È°πÁõÆ‰∏≠ÊâæÂà∞/themes/next/layout/_macro/post.swigÔºåÊêúÁ¥¢ rel=&quot;tag&quot;ÔºåÂ∞Ü #Âè∑ Êç¢Êàê&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt; ÂéüÂÖà#Âè∑ÁöÑÊ†∑Âºè ‰øÆÊîπ‰∏∫ÂõæÊ†áÁöÑÊ†∑Âºè ËÆæÁΩÆËÉåÊôØÂä®ÁîªÊ†∑Âºè NexTÈáåÈù¢ÊúâÂá†ÁßçÂä®ÁîªËÉåÊôØÊ†∑Âºècanvas_nest„ÄÅthree_waves„ÄÅcanvas_lines„ÄÅcanvas_sphereÁ≠â canvas_nestÂ¶Ç‰∏ãÂõæÊâÄÁ§∫: ÊåâÁÖß‰ª•‰∏ãÊ≠•È™§ÂÆåÊàê ÊâìÂºÄGit Bash HereËøõÂÖ•Ëá™Â∑±Êñá‰ª∂Â§π‰∏ã/themes/nextÊñá‰ª∂Â§π‰∏ã 1$ cd /themes/next ‰∏ãËΩΩÂÆâË£Ö canvas_nest module ÊâßË°å 1$ git clone https://github.com/theme-next/theme-next-canvas-nest source/lib/canvas-nest Âú® /themes/next/source/libÊü•Áúã‰ºöÁúãÂà∞canvas_nestÊñá‰ª∂Â§π Âú®/themes/next/_config.ymlËÆæÁΩÆ 1canvas_nest: true three_wavesÂ¶ÇÂõæÊâÄÁ§∫ three_waves ËÆæÁΩÆÊ≠•È™§ÔºåÂíå canvas_nest Ê≠•È™§ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ‰∏ãËΩΩÂÆåÊàêÂêéÔºåÂú®/themes/next/_config.ymlËÆæÁΩÆ 12345three_waves: true#ORcanvas_lines: true#ORcanvas_sphere: true canvas_ribbon canvas_ribbonÂè™ÈÄÇÂêà scheme Pisces ËøôÈáå‰∏çÊµãËØï‰∫ÜÔºåÂ§ßÂÆ∂ÂèØ‰ª•ËøõÂÖ• canvas_ribbon ÂÆâË£Ö„ÄÇ Âú®ÁΩëÁ´ôÂ∫ïÈÉ®Ê∑ªÂä†ËÆøÈóÆÈáè ËøõÂÖ• \themes\next\layout\_partials\footer.swig Êñá‰ª∂È°∂ÈÉ®Á¨¨‰∏ÄË°åÊ∑ªÂä† 1&lt;script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"&gt;&lt;/script&gt; ÊêúÁ¥¢ 1&#123;% if theme.footer.powered.enable %&#125; Âú®Ëøô‰∏™‰ΩçÁΩÆ‰∏äÊ∑ªÂä†‰ª•‰∏ã‰ª£Á†Å: 12345&lt;div class="powered-by"&gt;&lt;i class="fa fa-user-md"&gt;&lt;/i&gt;&lt;span id="busuanzi_container_site_uv"&gt; Êú¨Á´ôËÆøÂÆ¢Êï∞:&lt;span id="busuanzi_value_site_uv"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt; Ê≥®ÔºöËøôÈáåÁöÑidÂÄºÂèØ‰ª•ÈÄâÊã©‰∏§Áßç 12busuanzi_value_site_uv #Ë°®Á§∫Áî®Êà∑ËøûÁª≠ÁÇπÂáªnÁØáÊñáÁ´†ÔºåÂè™ËÆ∞ÂΩï1Ê¨°ËÆøÂÆ¢Êï∞busuanzi_value_site_pv #Ë°®Á§∫Áî®Êà∑ËøûÁª≠ÁÇπÂáªnÁØáÊñáÁ´†ÔºåËÆ∞ÂΩï+nÊ¨°ËÆøÈóÆÈáè ËøôÈáåÂØπÂ∫îÁöÑÊòØ2‰∏äÁöÑidÂÄº ÁªôÊØèÁØáÊñáÁ´†Ê∑ªÂä†Á±ªÂà´ÂíåÊ†áÁ≠æ Âú®ÂàõÂª∫ÁöÑÊñáÁ´†ÈÉΩÂú®source/_postÁõÆÂΩï‰∏ãÊâæÂà∞ÔºåÊØèÁØáÊñáÁ´†Ê∑ªÂä†tags„ÄÅcategories Ê∑ªÂä†ËøõÂ∫¶Êù° Ê∑ªÂä†ËøõÂ∫¶Êù°ÁöÑËØùÂú®ÊâãÊú∫ÊµèËßàÁöÑÊó∂ÂÄô‰∏ÄËà¨ÊÉÖÂÜµÈÉΩÊúâËá™Â∏¶ÁöÑËøõÂ∫¶Êù°‰∫ÜÔºå‰æãÂ¶ÇÂæÆ‰ø°ÊµèËßà„ÄÅÊµèËßàÂô®ÊµèËßàÁ≠âÁ≠âÔºåËøôÊ†∑Â∞±Âá∫Áé∞ÈáçÂ§çÁöÑËøõÂ∫¶Êù°‰∫ÜÔºåËøôÈáåÁúã‰∏™‰∫∫ÊòØÂê¶Ê∑ªÂä†„ÄÇ‰ΩÜÊòØÂú®ÁîµËÑëÊµèËßàÂô®ÊµèËßàÂç¥ÊòØ‰∏çÈîôÁöÑ„ÄÇ Êú¨‰æãËÆæÁΩÆÁöÑÂ¶Ç‰∏ãpace-theme-center-circleÊòæÁ§∫ ÊåâÁÖß‰ª•‰∏ãÊ≠•È™§ËøõË°åÊàñËÄÖËøõÂÖ•ËøôÈáå ProgressÈÖçÁΩÆ Êü•ÁúãÂ¶Ç‰ΩïÈÖçÁΩÆ ÊâìÂºÄGit Bash HereËøõÂÖ•Ëá™Â∑±Êñá‰ª∂Â§π‰∏ã/themes/nextÊñá‰ª∂Â§π‰∏ã 1$ cd /themes/next ‰∏ãËΩΩÂÆâË£Ö Progress module ÊâßË°å 1$ git clone https://github.com/theme-next/theme-next-pace source/lib/pace Âú® /themes/next/source/libÊü•Áúã‰ºöÁúãÂà∞paceÊñá‰ª∂Â§π Âú®/themes/next/_config.ymlËÆæÁΩÆ 123456pace: enable: true # Themes list: # big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple # corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal theme: minimal #‰ªªÈÄâ‰∏ÄÁßç Ê∑ªÂä†Á´ôÂÜÖÊêúÁ¥¢ Áî±‰∫éÂèØËÉΩÈúÄË¶ÅÂø´ÈÄüÊü•ÊâæÁõ∏ÂÖ≥ÊñáÁ´†ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÊ∑ªÂä†Á´ôÂÜÖÊêúÁ¥¢„ÄÇ Êåâ‰ª•‰∏ãÊ≠•È™§ËøõË°åÊàñËÄÖËøõÂÖ• NexTÈÖçÁΩÆÁ´ôÂÜÖÊêúÁ¥¢ ÊñáÊ°£Êü•ÁúãÂ¶Ç‰ΩïÈÖçÁΩÆ ÂÆâË£ÖÁ´ôÂÜÖÊêúÁ¥¢Êèí‰ª∂ 123$ npm install hexo-generator-searchdb --saveÊàñËÄÖ$ cnpm install hexo-generator-searchdb --save Âú®Ê†πÁõÆÂΩï‰∏ãÁöÑ_config.ymlÊ∑ªÂä† 123456#Ë°®Á§∫Á´ôÂÜÖÊêúÁ¥¢search: path: search.xml field: post format: html limit: 10000 Âú®themes/next/_config.ymlÊñá‰ª∂‰∏≠ÊêúÁ¥¢local_search,ËøõË°åËÆæÁΩÆ 12345local_search: enable: true #ËÆæÁΩÆ‰∏∫true trigger: auto # auto / manualÔºåauto Ëá™Âä®ÊêúÁ¥¢„ÄÅmanualÔºöÊåâÂõûËΩ¶[enter ]ÈîÆÊâãÂä®ÊêúÁ¥¢ top_n_per_article: 1 unescape: true Ê∑ªÂä†ÊâìËµè NexT‰∏ªË¶ÅÊèê‰æõ‰∏âÁßçÊâìËµèÊñπÂºèÂàÜÂà´ÊòØÂæÆ‰ø°„ÄÅÊîØ‰ªòÂÆù„ÄÅÊØîÁâπÂ∏Å Âú®themes/nextÊêúÁ¥¢RewardÔºö 123456reward_settings: # If true, reward would be displayed in every article by default. # You can show or hide reward in a specific article throuth `reward: true | false` in Front-matter. enable: true #ÂêØÁî®ÊâìËµè animation: true #ÂêØÁî®Âä®ÁîªÊïàÊûú comment: ÊçêËµ†‰ΩúËÄÖËØ∑ÁÇπÂáª‰∏ãÊñπÁöÑ‚ÄúÊâìËµè‚ÄùÊåâÈíÆ #ÂÜÖÂÆπ ÂèãÊÉÖÈìæÊé• 12345678# Blog rolls #ÂèãÊÉÖÈìæÊé•links_icon: linklinks_title: ÂèãÊÉÖÈìæÊé•links_layout: block#links_layout: inlinelinks: Eirunye: http://eirunye.github.io/ #ÊâÄÈúÄÊ∑ªÂä†ÁöÑÂèãÊÉÖÈìæÊé• TitleÊòØË°®Á§∫ÂèãÊÉÖÈìæÊé•ÁöÑÂçöÂÆ¢ÂêçÁß∞ÊàñËÄÖÈöèÊÑè‰Ω†ÂèñÔºåÂêéÈù¢ÊòØÈìæÊé•ÔºåÂÜíÂè∑ÂêéÈù¢ËÆ∞ÂæóÁ©∫Ê†º Á®ãÊôìÊòé: https://www.infoq.cn/profile/1278512 Ê∑ªÂä†ÈòÖËØªÁªüËÆ° ÁªôÊØèÁØáÊñáÁ´†ËøõË°åÊ∑ªÂä†ÈòÖËØªÁªüËÆ°ÔºåÊïàÊûúÂ¶Ç‰∏ãÂõæ: ËøõÂÖ• leancloud ÂàõÂª∫Â∫îÁî® ËøõÂÖ•ËÆæÁΩÆÈ°µÈù¢Ëé∑ÂèñÂ∫îÁî®Key Â∞ÜApp ID„ÄÅApp Key ÈÖçÁΩÆÂà∞next/_config.yml‰∏≠leancloud_visitors 1234567leancloud_visitors: enable: true ËÆæÁΩÆ‰∏∫true ÈªòËÆ§‰∏∫false app_id: #‰Ω†ÁöÑApp IDÔºåÊ≥®ÊÑèÂÜíÂè∑ÂêéÈù¢Á©∫Ê†º app_key: #‰Ω†ÁöÑApp KeyÔºåÊ≥®ÊÑèÂÜíÂè∑ÂêéÈù¢Á©∫Ê†º Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security #ËÆæÁΩÆ‰æùËµñ security: true #Â¶ÇÊûúÊÇ®‰∏çÂÖ≥ÂøÉlcËÆ°Êï∞Âô®‰∏≠ÁöÑÂÆâÂÖ®ÊÄßÂπ∂‰∏îÂè™ÊÉ≥Áõ¥Êé•‰ΩøÁî®ÂÆÉÔºàÊ≤°Êúâhexo-leancloud-counter-securityÊèí‰ª∂ÔºâÔºåËØ∑Â∞Ü`security`ËÆæÁΩÆ‰∏∫`false`„ÄÇ betterPerformance: true#Êõ¥Â•ΩÁöÑÊÄßËÉΩ Âú®leancloudÂ≠òÂÇ®ÁöÑ‰ΩçÁΩÆÂàõÂª∫Class,ÂøÖÈ°ªÂëΩÂêç‰∏∫Counter Êü•ÁúãÂêéÂè∞ÁªüËÆ°Êï∞ÊçÆ Ê∑ªÂä†ËØÑËÆ∫ ÊàëÁöÑÂçöÂÆ¢ÈÄâÊã©ÁöÑÊòØValine„ÄÇ Âú®next/_config.ymlÊêúÁ¥¢Valine,ËøõÂÖ• Valine ÂÆòÁΩëÔºå‰πüÊòØ leancloud ÂÆòÁΩëÔºåËøõÂÖ•leancloud ÊéßÂà∂Âè∞,Ê≤°ÊúâË¥¶Âè∑ÂØÜÁ†ÅÂ∞±ËøõË°åËÆæÁΩÆ„ÄÇ ÂàõÂª∫Â∫îÁî® ÂèÇËÄÉ‰∏äÈù¢ Ê∑ªÂä†ÈòÖËØªÁªüËÆ° ÁöÑÂàõÂª∫Â∫îÁî®„ÄÇ ËøõÂÖ•ËÆæÁΩÆÈ°µÈù¢Ëé∑ÂèñÂ∫îÁî®key ÂèÇËÄÉ‰∏äÈù¢ Ê∑ªÂä†ÈòÖËØªÁªüËÆ° ÁöÑËøõÂÖ•ËÆæÁΩÆÈ°µÈù¢Ëé∑ÂèñÂ∫îÁî®key„ÄÇ Âú®next/_config.ymlËøõË°åÈÖçÁΩÆ„ÄÇ 1234567891011valine: enable: true # ËÆæÁΩÆ‰∏∫trueÔºåÈªòËÆ§‰∏∫false appid: # Â∞ÜÂ∫îÁî®keyÁöÑApp IDËÆæÁΩÆÂú®ËøôÈáå appkey: # Â∞ÜÂ∫îÁî®keyÁöÑApp KeyËÆæÁΩÆÂú®ËøôÈáå notify: true# ÈÇÆÁÆ±ÈÄöÁü• , https://github.com/xCss/Valine/wikiÔºåÈªòËÆ§‰∏∫false verify: true# È™åËØÅÁ†Å ÈªòËÆ§‰∏∫false placeholder: Just go go ^_^ # ÂàùÂßãÂåñËØÑËÆ∫ÊòæÁ§∫ÔºåÊ†πÊçÆËá™Â∑±‰øÆÊîπÔºåËøôÈáåÈªòËÆ§Ôºå avatar: wavatar # Â§¥ÂÉèÈ£éÊ†ºÔºåÈªòËÆ§‰∏∫mmÔºåÂèØËøõÂÖ•ÁΩëÂùÄÔºöhttps://valine.js.org/visitor.htmlÊü•ÁúãÂ§¥ÂÉèËÆæÁΩÆÔºåËøôÈáåÊúâËÆ∏Â§öÂ§¥ÂÉèÈ£éÊ†ºÔºåËøõË°åËÆæÁΩÆ guest_info: nick,mail,link # Ëá™ÂÆö‰πâËØÑËÆ∫Ê†áÈ¢ò pageSize: 10 # ÂàÜÈ°µÂ§ßÂ∞èÔºå10È°µÂ∞±Ëá™Âä®ÂàÜÈ°µ visitor: true # ÊòØÂê¶ÂÖÅËÆ∏Ê∏∏ÂÆ¢ËØÑËÆ∫ ÔºåËøõÂÖ•ÂÆòÁΩëÊü•ÁúãËÆæÁΩÆÔºöhttps://valine.js.org/visitor.html ÊòæÁ§∫ÁªìÊûú ËøôÊ†∑Â∞±ÂÆåÊàê‰∫ÜvalineËØÑËÆ∫ÁöÑÈÖçÁΩÆ‰∫ÜÔºåÊé•‰∏ãÊù•Â∞±ÂèØ‰ª•ËøõË°åËØÑËÆ∫‰∫ÜÔºåÊàë‰ª¨ËøòÂèØ‰ª•Âú®ÂêéÂè∞Êü•ÁúãËØÑËÆ∫‰ø°ÊÅØ„ÄÇ Âú®ÂêéÂè∞Êü•ÁúãËØÑËÆ∫Êï∞ÊçÆ Âú®valineÂêéÂè∞ÔºåÂ≠òÂÇ®‰ΩçÁΩÆ‰∏≠ÁöÑÊï∞ÊçÆÈáåÈù¢ÂàõÂª∫ClassÔºåÂêçÁß∞ÂøÖÈ°ª‰∏∫ÂëΩÂêç‰∏∫Comment ÂèÇËÄÉ‰∏äÈù¢ Ê∑ªÂä†ÈòÖËØªÁªüËÆ° ÁöÑÂàõÂª∫Class„ÄÇ &lt;font color=&quot;red&quot;&gt;Ê≥®Ôºö&lt;/font&gt;ÈÄâÊã©valineËØÑËÆ∫Á≥ªÁªüÊòØÂõ†‰∏∫ÊîØÊåÅÂõΩÂÜÖÁΩëÁªúÔºå‰∏çÈúÄË¶ÅËøûÊé•Â§ñÁΩëÔºàÁøªÂ¢ôÔºâÂ∞±ÂèØ‰ª•ËøõË°åÊòæÁ§∫ËØÑËÆ∫Á≥ªÁªüÔºåËÄå‰∏îÂæàÂ•ΩÁÆ°ÁêÜÔºåÈ°µÈù¢ÁÆÄÂçï„ÄÇ Ê∑ªÂä†RSS ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ïÔºö ÂàáÊç¢Âà∞‰Ω†ÁöÑblogÊ†πÁõÆÂΩï‰∏ãÔºåÁÑ∂ÂêéÂÆâË£Ö Hexo Êèí‰ª∂Ôºö(Ëøô‰∏™Êèí‰ª∂‰ºöÊîæÂú®node_modulesËøô‰∏™Êñá‰ª∂Â§πÈáå) 1$ cnpm install --save hexo-generator-feed ÁÑ∂ÂêéÂú®Ê†πÁõÆÂΩïÁöÑÁ´ôÁÇπÈÖçÁΩÆÊñá‰ª∂_config.yml‰∏ãËøõË°åÈÖçÁΩÆ 12## Plugins: http://hexo.io/plugins/plugins: hexo-generate-feed # RSSËÆ¢ÈòÖ ÁÑ∂ÂêéÊâìÂºÄnext‰∏ªÈ¢òÊñá‰ª∂Â§πÈáåÈù¢ÁöÑ_config.yml,Âú®ÈáåÈù¢ÈÖçÁΩÆ‰∏∫Â¶Ç‰∏ãÔºö 1234# Set rss to false to disable feed link.# Leave rss as empty to use site's feed link.# Set rss to specific value if you have burned your feed already.rss: /atom.xml ÁÇπÂáªÂá∫Áé∞Ê°ÉÂøÉÊïàÊûú ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï ÊâìÂºÄÊµèËßàÂô®ÔºåËæìÂÖ•Ôºö http://7u2ss1.com1.z0.glb.clouddn.com/love.js ÁÑ∂ÂêéÂ∞ÜÈáåÈù¢ÁöÑ‰ª£Á†Åcopy‰∏Ä‰∏ãÔºåÊñ∞Âª∫love.jsÊñá‰ª∂Âπ∂‰∏îÂ∞Ü‰ª£Á†ÅÂ§çÂà∂ËøõÂéªÔºåÁÑ∂Âêé‰øùÂ≠ò„ÄÇ Â∞Ülove.jsÊñá‰ª∂ÊîæÂà∞Ë∑ØÂæÑ/themes/next/source/js/srcÈáåÈù¢ÔºåÁÑ∂ÂêéÊâìÂºÄ\themes\next\layout\_layout.swigÊñá‰ª∂,Âú®Êú´Â∞æÔºàÂú®ÂâçÈù¢ÂºïÁî®‰ºöÂá∫Áé∞Êâæ‰∏çÂà∞ÁöÑbugÔºâÊ∑ªÂä†‰ª•‰∏ã‰ª£Á†ÅÔºö 12&lt;!-- È°µÈù¢ÁÇπÂáªÂ∞èÁ∫¢ÂøÉ --&gt;&lt;script type="text/javascript" src="/js/src/love.js"&gt;&lt;/script&gt; ‰øÆÊîπÊñáÁ´†ÂÜÖÈìæÊé•ÊñáÊú¨Ê†∑Âºè ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï ‰øÆÊîπÊñá‰ª∂ themes\next\source\css\_common\components\post\post.stylÔºåÂú®Êú´Â∞æÊ∑ªÂä†Â¶Ç‰∏ãcssÊ†∑ÂºèÔºö 1234567891011// ÊñáÁ´†ÂÜÖÈìæÊé•ÊñáÊú¨Ê†∑Âºè.post-body p a&#123; color: #0593d3; border-bottom: none; border-bottom: 1px solid #0593d3; &amp;:hover &#123; color: #fc6423; border-bottom: none; border-bottom: 1px solid #fc6423; &#125;&#125; ÂÖ∂‰∏≠ÈÄâÊã©.post-body ÊòØ‰∏∫‰∫Ü‰∏çÂΩ±ÂìçÊ†áÈ¢òÔºåÈÄâÊã© p ÊòØ‰∏∫‰∫Ü‰∏çÂΩ±ÂìçÈ¶ñÈ°µ‚ÄúÈòÖËØªÂÖ®Êñá‚ÄùÁöÑÊòæÁ§∫Ê†∑Âºè,È¢úËâ≤ÂèØ‰ª•Ëá™Â∑±ÂÆö‰πâ„ÄÇ Âú®ÊØèÁØáÊñáÁ´†Êú´Â∞æÁªü‰∏ÄÊ∑ªÂä†‚ÄúÊú¨ÊñáÁªìÊùü‚ÄùÊ†áËÆ∞ ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï Âú®Ë∑ØÂæÑ \themes\next\layout\_macro ‰∏≠Êñ∞Âª∫ passage-end-tag.swig Êñá‰ª∂,Âπ∂Ê∑ªÂä†‰ª•‰∏ãÂÜÖÂÆπÔºö 12345&lt;div&gt; &#123;% if not is_index %&#125; &lt;div style="text-align:center;color: #ccc;font-size:14px;"&gt;-------------Êú¨ÊñáÁªìÊùü&lt;i class="fa fa-paw"&gt;&lt;/i&gt;ÊÑüË∞¢ÊÇ®ÁöÑÈòÖËØª-------------&lt;/div&gt; &#123;% endif %&#125;&lt;/div&gt; Êé•ÁùÄÊâìÂºÄ\themes\next\layout\_macro\post.swigÊñá‰ª∂ÔºåÂú®post-body ‰πãÂêéÔºå post-footer ‰πãÂâçÊ∑ªÂä†Â¶Ç‰∏ãÁîªÁ∫¢Ëâ≤ÈÉ®ÂàÜ‰ª£Á†ÅÔºàpost-footer‰πãÂâç‰∏§‰∏™DIVÔºâÔºö 12345&lt;div&gt; &#123;% if not is_index %&#125; &#123;% include 'passage-end-tag.swig' %&#125; &#123;% endif %&#125;&lt;/div&gt; ÁÑ∂ÂêéÊâìÂºÄ‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂Ôºà_config.yml),Âú®Êú´Â∞æÊ∑ªÂä†Ôºö 123# ÊñáÁ´†Êú´Â∞æÊ∑ªÂä†‚ÄúÊú¨ÊñáÁªìÊùü‚ÄùÊ†áËÆ∞passage_end_tag: enabled: true ‰øÆÊîπ``‰ª£Á†ÅÂùóËá™ÂÆö‰πâÊ†∑Âºè ÊïàÊûúÂ¶Ç‰∏ãÔºö ÂÆûÁé∞ÊñπÊ≥ï ÊâìÂºÄ\themes\next\source\css\_custom\custom.styl,ÂêëÈáåÈù¢Âä†ÂÖ•Ôºö(È¢úËâ≤ÂèØ‰ª•Ëá™Â∑±ÂÆö‰πâ) 123456789101112131415// Custom styles.code &#123; color: #ff7600; background: #fbf7f8; margin: 2px;&#125;// Â§ß‰ª£Á†ÅÂùóÁöÑËá™ÂÆö‰πâÊ†∑Âºè.highlight, pre &#123; margin: 5px 0; padding: 5px; border-radius: 3px;&#125;.highlight, code, pre &#123; border: 1px solid #d6d6d6;&#125; ‰∏ªÈ°µÊñáÁ´†Ê∑ªÂä†Èò¥ÂΩ±ÊïàÊûú ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï ÊâìÂºÄ\themes\next\source\css\_custom\custom.styl,ÂêëÈáåÈù¢Âä†ÂÖ•Ôºö 12345678// ‰∏ªÈ°µÊñáÁ´†Ê∑ªÂä†Èò¥ÂΩ±ÊïàÊûú .post &#123; margin-top: 60px; margin-bottom: 60px; padding: 25px; -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5); -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5); &#125; Ê∑ªÂä†ÁÉ≠Â∫¶ ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï next‰∏ªÈ¢òÈõÜÊàêleanCloudÔºåÊâìÂºÄ/themes/next/layout/_macro/post.swig,Âú®ÁîªÁ∫¢Á∫øÁöÑÂå∫ÂüüÊ∑ªÂä†‚ÑÉÔºö ÁÑ∂ÂêéÊâìÂºÄÔºå/themes/next/languages/zh-Hans.yml,Â∞ÜÁîªÁ∫¢Ê°ÜÁöÑÊîπ‰∏∫ÁÉ≠Â∫¶Â∞±ÂèØ‰ª•‰∫Ü: ÁΩëÁ´ôÂ∫ïÈÉ®Â≠óÊï∞ÁªüËÆ° ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï ÂàáÊç¢Âà∞Ê†πÁõÆÂΩï‰∏ãÔºåÁÑ∂ÂêéËøêË°åÂ¶Ç‰∏ã‰ª£Á†Å 1$ cnpm install hexo-wordcount --save ÁÑ∂ÂêéÂú®/themes/next/layout/_partials/footer.swigÊñá‰ª∂Â∞æÈÉ®Âä†‰∏äÔºö 1234&lt;div class="theme-info"&gt; &lt;div class="powered-by"&gt;&lt;/div&gt; &lt;span class="post-count"&gt;Á´ôÁÇπÊÄªÂ≠óÊï∞&#123;&#123; totalcount(site) &#125;&#125;Â≠ó&lt;/span&gt;&lt;/div&gt; Ê∑ªÂä† README.md Êñá‰ª∂ ÊØè‰∏™È°πÁõÆ‰∏ã‰∏ÄËà¨ÈÉΩÊúâ‰∏Ä‰∏™ README.md Êñá‰ª∂Ôºå‰ΩÜÊòØ‰ΩøÁî® hexo ÈÉ®ÁΩ≤Âà∞‰ªìÂ∫ìÂêéÔºåÈ°πÁõÆ‰∏ãÊòØÊ≤°Êúâ README.md Êñá‰ª∂ÁöÑ„ÄÇ Âú® Hexo ÁõÆÂΩï‰∏ãÁöÑ source Ê†πÁõÆÂΩï‰∏ãÊ∑ªÂä†‰∏Ä‰∏™ README.md Êñá‰ª∂Ôºå‰øÆÊîπÁ´ôÁÇπÈÖçÁΩÆÊñá‰ª∂ _config.ymlÔºåÂ∞Ü skip_render ÂèÇÊï∞ÁöÑÂÄºËÆæÁΩÆ‰∏∫ 1skip_render: README.md ‰øùÂ≠òÈÄÄÂá∫Âç≥ÂèØ„ÄÇÂÜçÊ¨°‰ΩøÁî® hexo d ÂëΩ‰ª§ÈÉ®ÁΩ≤ÂçöÂÆ¢ÁöÑÊó∂ÂÄôÂ∞±‰∏ç‰ºöÂú®Ê∏≤Êüì README.md Ëøô‰∏™Êñá‰ª∂‰∫Ü„ÄÇ ÂÆûÁé∞ÁªüËÆ°ÂäüËÉΩ ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï Âú®Ê†πÁõÆÂΩï‰∏ãÂÆâË£Ö hexo-wordcount,ËøêË°åÔºö 1$ cnpm install hexo-wordcount --save ÁÑ∂ÂêéÂú®‰∏ªÈ¢òÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÈÖçÁΩÆÂ¶Ç‰∏ãÔºö 12345678# Post wordcount display settings# Dependencies: https://github.com/willin/hexo-wordcountpost_wordcount: item_text: true wordcount: true #Â≠óÊï∞ÁªüËÆ° min2read: true #ÈòÖËØªÊó∂ÈïøÈ¢ÑËÆ° totalcount: true #ÊÄªÂ≠óÊï∞ÁªüËÆ° separated_meta: true Ê∑ªÂä†È°∂ÈÉ®Âä†ËΩΩÊù° ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï ÊâìÂºÄ/themes/next/layout/_partials/head.swigÊñá‰ª∂ÔºåÊ∑ªÂä†Á∫¢Ê°Ü‰∏äÁöÑ‰ª£Á†Å 12&lt;script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"&gt;&lt;/script&gt;&lt;link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"&gt; ‰ΩÜÊòØÔºåÈªòËÆ§ÁöÑÊòØÁ≤âËâ≤ÁöÑÔºåË¶ÅÊîπÂèòÈ¢úËâ≤ÂèØ‰ª•Âú®/themes/next/layout/_partials/head.swigÊñá‰ª∂‰∏≠Ê∑ªÂä†Â¶Ç‰∏ã‰ª£Á†ÅÔºàÊé•Âú®ÂàöÊâçlinkÁöÑÂêéÈù¢Ôºâ 12345678910111213&lt;style&gt; .pace .pace-progress &#123; background: #1E92FB; /*ËøõÂ∫¶Êù°È¢úËâ≤*/ height: 3px; &#125; .pace .pace-progress-inner &#123; box-shadow: 0 0 10px #1E92FB, 0 0 5px #1E92FB; /*Èò¥ÂΩ±È¢úËâ≤*/ &#125; .pace .pace-activity &#123; border-top-color: #1E92FB; /*‰∏äËæπÊ°ÜÈ¢úËâ≤*/ border-left-color: #1E92FB; /*Â∑¶ËæπÊ°ÜÈ¢úËâ≤*/ &#125;&lt;/style&gt; Âú®ÊñáÁ´†Â∫ïÈÉ®Â¢ûÂä†ÁâàÊùÉ‰ø°ÊÅØ ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï Âú®ÁõÆÂΩï next/layout/_macro/‰∏ãÊ∑ªÂä† my-copyright.swigÔºö 1234567891011121314151617181920212223242526272829303132&#123;% if page.copyright %&#125;&lt;div class="my_post_copyright"&gt; &lt;script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"&gt;&lt;/script&gt; &lt;!-- JSÂ∫ì sweetalert ÂèØ‰øÆÊîπË∑ØÂæÑ --&gt; &lt;script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"&gt;&lt;/script&gt; &lt;script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"&gt;&lt;/script&gt; &lt;p&gt;&lt;span&gt;Êú¨ÊñáÊ†áÈ¢ò:&lt;/span&gt;&lt;a href="&#123;&#123; url_for(page.path) &#125;&#125;"&gt;&#123;&#123; page.title &#125;&#125;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;span&gt;ÊñáÁ´†‰ΩúËÄÖ:&lt;/span&gt;&lt;a href="/" title="ËÆøÈóÆ &#123;&#123; theme.author &#125;&#125; ÁöÑ‰∏™‰∫∫ÂçöÂÆ¢"&gt;&#123;&#123; theme.author &#125;&#125;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;span&gt;ÂèëÂ∏ÉÊó∂Èó¥:&lt;/span&gt;&#123;&#123; page.date.format("YYYYÂπ¥MMÊúàDDÊó• - HH:MM") &#125;&#125;&lt;/p&gt; &lt;p&gt;&lt;span&gt;ÊúÄÂêéÊõ¥Êñ∞:&lt;/span&gt;&#123;&#123; page.updated.format("YYYYÂπ¥MMÊúàDDÊó• - HH:MM") &#125;&#125;&lt;/p&gt; &lt;p&gt;&lt;span&gt;ÂéüÂßãÈìæÊé•:&lt;/span&gt;&lt;a href="&#123;&#123; url_for(page.path) &#125;&#125;" title="&#123;&#123; page.title &#125;&#125;"&gt;&#123;&#123; page.permalink &#125;&#125;&lt;/a&gt; &lt;span class="copy-path" title="ÁÇπÂáªÂ§çÂà∂ÊñáÁ´†ÈìæÊé•"&gt;&lt;i class="fa fa-clipboard" data-clipboard-text="&#123;&#123; page.permalink &#125;&#125;" aria-label="Â§çÂà∂ÊàêÂäüÔºÅ"&gt;&lt;/i&gt;&lt;/span&gt; &lt;/p&gt; &lt;!-- &lt;p&gt;&lt;span&gt;ËÆ∏ÂèØÂçèËÆÆ:&lt;/span&gt;&lt;i class="fa fa-creative-commons"&gt;&lt;/i&gt; &lt;a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)"&gt;ÁΩ≤Âêç-ÈùûÂïÜ‰∏öÊÄß‰ΩøÁî®-Á¶ÅÊ≠¢ÊºîÁªé 4.0 ÂõΩÈôÖ&lt;/a&gt; ËΩ¨ËΩΩËØ∑‰øùÁïôÂéüÊñáÈìæÊé•Âèä‰ΩúËÄÖ„ÄÇ&lt;/p&gt; --&gt; &lt;/div&gt;&lt;script&gt; var clipboard = new Clipboard('.fa-clipboard'); $(".fa-clipboard").click(function()&#123; clipboard.on('success', function()&#123; swal(&#123; title: "", text: 'Â§çÂà∂ÊàêÂäü', icon: "success", showConfirmButton: true &#125;); &#125;); &#125;); &lt;/script&gt;&#123;% endif %&#125; Âú®ÁõÆÂΩïnext/source/css/_common/components/post/‰∏ãÊ∑ªÂä†my-post-copyright.stylÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445.my_post_copyright &#123; width: 85%; max-width: 45em; margin: 2.8em auto 0; padding: 0.5em 1.0em; border: 1px solid #d3d3d3; font-size: 0.93rem; line-height: 1.6em; word-break: break-all; background: rgba(255,255,255,0.4);&#125;.my_post_copyright p&#123;margin:0;&#125;.my_post_copyright span &#123; display: inline-block; width: 5.2em; color: #b5b5b5; font-weight: bold;&#125;.my_post_copyright .raw &#123; margin-left: 1em; width: 5em;&#125;.my_post_copyright a &#123; color: #808080; border-bottom:0;&#125;.my_post_copyright a:hover &#123; color: #a3d2a3; text-decoration: underline;&#125;.my_post_copyright:hover .fa-clipboard &#123; color: #000;&#125;.my_post_copyright .post-url:hover &#123; font-weight: normal;&#125;.my_post_copyright .copy-path &#123; margin-left: 1em; width: 1em; +mobile()&#123;display:none;&#125;&#125;.my_post_copyright .copy-path:hover &#123; color: #808080; cursor: pointer;&#125; ‰øÆÊîπnext/layout/_macro/post.swigÔºåÂú®‰ª£Á†Å 12345&lt;div&gt; &#123;% if not is_index %&#125; &#123;% include 'wechat-subscriber.swig' %&#125; &#123;% endif %&#125;&lt;/div&gt; ‰πãÂâçÊ∑ªÂä†Â¢ûÂä†Â¶Ç‰∏ã‰ª£Á†ÅÔºö 12345&lt;div&gt; &#123;% if not is_index %&#125; &#123;% include 'my-copyright.swig' %&#125; &#123;% endif %&#125;&lt;/div&gt; Â¶Ç‰∏ãÂõæÔºö ‰øÆÊîπnext/source/css/_common/components/post/post.stylÊñá‰ª∂ÔºåÂú®ÊúÄÂêé‰∏ÄË°åÂ¢ûÂä†‰ª£Á†ÅÔºö 1@import "my-post-copyright" ‰øùÂ≠òÈáçÊñ∞ÁîüÊàêÂç≥ÂèØ„ÄÇÂ¶ÇÊûúË¶ÅÂú®ËØ•ÂçöÊñá‰∏ãÈù¢Â¢ûÂä†ÁâàÊùÉ‰ø°ÊÅØÁöÑÊòæÁ§∫ÔºåÈúÄË¶ÅÂú® Markdown ‰∏≠Â¢ûÂä†copyright: trueÁöÑËÆæÁΩÆÔºåÁ±ª‰ººÔºö 123456789101112---title: JavaÂπ∂Âèë-ReentrantLockcopyright: truedate: 2019-08-26 14:59:12updated:tags: - Java - J.U.Ccategories: - Java - J.U.C--- Â¶ÇÊûú‰Ω†ËßâÂæóÊØèÊ¨°ÈÉΩË¶ÅËæìÂÖ•copyright: trueÂæàÈ∫ªÁÉ¶ÁöÑËØù,ÈÇ£‰πàÂú®/scaffolds/post.mdÊñá‰ª∂‰∏≠Ê∑ªÂä†Ôºö 1copyright: true ËøôÊ†∑ÊØèÊ¨°hexo new &quot;‰Ω†ÁöÑÂÜÖÂÆπ&quot;‰πãÂêéÔºåÁîüÊàêÁöÑmdÊñá‰ª∂‰ºöËá™Âä®Êääcopyright:trueÂä†Âà∞ÈáåÈù¢Âéª„ÄÇ ÈöêËóèÁΩëÈ°µÂ∫ïÈÉ®powered By Hexo / Âº∫ÂäõÈ©±Âä® ÊâìÂºÄthemes/next/layout/_partials/footer.swig,ÈöêËóèÊàñÂà†Èô§Â¶Ç‰∏ã‰ª£Á†ÅÔºåÂ¶Ç‰∏ãÂõæÔºö ‰øÆÊîπÊâìËµèÂ≠ó‰Ωì‰∏çÈó™Âä® ‰øÆÊîπÊñá‰ª∂next/source/css/_common/components/post/post-reward.stylÔºåÁÑ∂ÂêéÊ≥®ÈáäÂÖ∂‰∏≠ÁöÑÂáΩÊï∞wechat:hoverÂíåalipay:hoverÔºåÂ¶Ç‰∏ãÔºö 123456789101112/* Ê≥®ÈáäÊñáÂ≠óÈó™Âä®ÂáΩÊï∞ #wechat:hover p&#123; animation: roll 0.1s infinite linear; -webkit-animation: roll 0.1s infinite linear; -moz-animation: roll 0.1s infinite linear;&#125; #alipay:hover p&#123; animation: roll 0.1s infinite linear; -webkit-animation: roll 0.1s infinite linear; -moz-animation: roll 0.1s infinite linear;&#125;*/ ÊñáÁ´†Âä†ÂØÜËÆøÈóÆ ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï ÊâìÂºÄthemes/next/layout/_partials/head/head.swigÊñá‰ª∂,Âú®‰ª•‰∏ã‰ΩçÁΩÆÊèíÂÖ•ËøôÊ†∑‰∏ÄÊÆµ‰ª£Á†ÅÔºö 12345678910&lt;script&gt; (function()&#123; if('&#123;&#123; page.password &#125;&#125;')&#123; if (prompt('ËØ∑ËæìÂÖ•ÊñáÁ´†ÂØÜÁ†Å') !== '&#123;&#123; page.password &#125;&#125;')&#123; alert('ÂØÜÁ†ÅÈîôËØØÔºÅ'); history.back(); &#125; &#125; &#125;)();&lt;/script&gt; ÁÑ∂ÂêéÂú®ÊñáÁ´†‰∏äÂÜôÊàêÁ±ª‰ººËøôÊ†∑Ôºö Ê∑ªÂä†Èº†Ê†áÁÇπÂáªÊòæÁ§∫Â≠ó‰ΩìÊïàÊûú ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï Âú® /themes/next/source/js ‰∏ãÊñ∞Âª∫Êñá‰ª∂ click_show_text.jsÔºåÂú® click_show_text.js Êñá‰ª∂‰∏≠Ê∑ªÂä†‰ª•‰∏ã‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233var a_idx = 0;jQuery(document).ready(function($) &#123; $("body").click(function(e) &#123; var a = new Array ("ÂØåÂº∫", "Ê∞ë‰∏ª", "ÊñáÊòé", "ÂíåË∞ê", "Ëá™Áî±", "Âπ≥Á≠â", "ÂÖ¨Ê≠£", "Ê≥ïÊ≤ª", "Áà±ÂõΩ", "Êï¨‰∏ö", "ËØö‰ø°", "ÂèãÂñÑ"); var $i = $("&lt;span/&gt;").text(a[a_idx]); a_idx = (a_idx + 1) % a.length; var x = e.pageX, y = e.pageY; $i.css(&#123; "z-index": 5, "top": y - 20, "left": x, "position": "absolute", "font-weight": "bold", "color": "#FF0000" &#125;); $("body").append($i); $i.animate(&#123; "top": y - 180, "opacity": 0 &#125;, 3000, function() &#123; $i.remove(); &#125;); &#125;); setTimeout('delay()', 2000);&#125;);function delay() &#123; $(".buryit").removeAttr("onclick");&#125; ÂÖ∂‰∏≠ÁöÑÁ§æ‰ºö‰∏ª‰πâÊ†∏ÂøÉ‰ª∑ÂÄºËßÇÂèØ‰ª•Ê†πÊçÆ‰Ω†Ëá™Â∑±ÁöÑÂàõÊÑèÊõøÊç¢‰∏∫ÂÖ∂‰ªñÊñáÂ≠óÔºåÁÑ∂ÂêéÂú® \themes\next\layout\_layout.swing Êñá‰ª∂Êú´Â∞æÊ∑ªÂä†‰ª•‰∏ã‰ª£Á†ÅÔºö 12&lt;!--ÂçïÂáªÊòæÁ§∫ÊñáÂ≠ó--&gt;&lt;script type="text/javascript" src="/js/click_show_text.js"&gt;&lt;/script&gt; Ê∑ªÂä†Èº†Ê†áÁÇπÂáªÁÉüËä±ÁàÜÁÇ∏ÊïàÊûú ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï Âú® \themes\next\source\js ÁõÆÂΩï‰∏ãÊñ∞Âª∫‰∏Ä‰∏™ fireworks.js ÁöÑÊñá‰ª∂ÔºåÈáåÈù¢ÂÜôÂÖ•‰ª•‰∏ã‰ª£Á†ÅÔºö 1"use strict";function updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;function setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;return&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;function createParticule(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=function()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;function createCircle(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color="#F00",a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=function()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;function renderParticule(e)&#123;for(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;function animateParticules(e,t)&#123;for(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:function(e)&#123;return e.endPos.x&#125;,y:function(e)&#123;return e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:"linear",duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule,offset:0&#125;)&#125;function debounce(e,t)&#123;var a;return function()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(function()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(".fireworks");if(canvasEl)&#123;var ctx=canvasEl.getContext("2d"),numberOfParticules=30,pointerX=0,pointerY=0,tap="mousedown",colors=["#FF1461","#18FF92","#5A87FF","#FBF38C"],setCanvasSize=debounce(function()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px",canvasEl.getContext("2d").scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:function()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,function(e)&#123;"sidebar"!==e.target.id&amp;&amp;"toggle-sidebar"!==e.target.id&amp;&amp;"A"!==e.target.nodeName&amp;&amp;"IMG"!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1)&#125;"use strict";function updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;function setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;return&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;function createParticule(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=function()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;function createCircle(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color="#F00",a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=function()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;function renderParticule(e)&#123;for(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;function animateParticules(e,t)&#123;for(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:function(e)&#123;return e.endPos.x&#125;,y:function(e)&#123;return e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:"linear",duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule,offset:0&#125;)&#125;function debounce(e,t)&#123;var a;return function()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(function()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(".fireworks");if(canvasEl)&#123;var ctx=canvasEl.getContext("2d"),numberOfParticules=30,pointerX=0,pointerY=0,tap="mousedown",colors=["#FF1461","#18FF92","#5A87FF","#FBF38C"],setCanvasSize=debounce(function()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px",canvasEl.getContext("2d").scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:function()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,function(e)&#123;"sidebar"!==e.target.id&amp;&amp;"toggle-sidebar"!==e.target.id&amp;&amp;"A"!==e.target.nodeName&amp;&amp;"IMG"!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1)&#125;; ÁÑ∂ÂêéÂú® \themes\next\layout\layout.swing Êñá‰ª∂‰∏≠ÂÜôÂÖ•‰ª•‰∏ã‰ª£Á†ÅÔºö 123&lt;canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" &gt;&lt;/canvas&gt; &lt;script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"&gt;&lt;/script&gt; &lt;script type="text/javascript" src="/js/fireworks.js"&gt;&lt;/script&gt; Ëá™ÂÆö‰πâÈº†Ê†áÊåáÈíàÊ†∑Âºè Âú® \themes\next\source\css\_custom\custom.styl Êñá‰ª∂ body Ê†∑ÂºèÈáåÂÜôÂÖ•Â¶Ç‰∏ã‰ª£Á†ÅÔºö 12345/*Ëá™ÂÆö‰πâÈº†Ê†áÊ†∑Âºè*/body &#123; cursor: url("/images/mouse.cur"),auto; background-color: @theme_background;&#125; Èº†Ê†áÊåáÈíàÂèØ‰ª•Áî® Axialis CursorWorkshop Ëøô‰∏™ËΩØ‰ª∂Ëá™Â∑±Âà∂‰ΩúÔºå‰∏çÂêå‰∏ªÈ¢òÂÖ∑‰ΩìÊîæÁöÑÊñá‰ª∂ÊúâÊâÄ‰∏çÂêåÔºåÁ°Æ‰øùÂú®ÂçöÂÆ¢‰∏ª‰Ωì body ÁöÑ CSS Êñá‰ª∂‰∏≠Âç≥ÂèØÔºåÂÖ∂‰∏≠ÁöÑÈº†Ê†áÊåáÈíàÈìæÊé•ÂèØÊõøÊç¢ÊàêËá™Â∑±ÁöÑÔºåÈ¶ñÂÖàÂ∞ùËØïÂä†ËΩΩmouse.cur ÔºåÂ¶ÇÊûúËØ•Êñá‰ª∂‰∏çÂ≠òÂú®ÊàñÁî±‰∫éÂÖ∂‰ªñÂéüÂõ†Êó†ÊïàÔºåÈÇ£‰πà auto ‰ºöË¢´‰ΩøÁî®Ôºå‰πüÂ∞±ÊòØËá™Âä®ÈªòËÆ§ÊïàÊûúÔºåÂõæÁâáÊ†ºÂºè‰∏∫.ico„ÄÅ.ani„ÄÅ.curÔºåÂª∫ËÆÆ‰ΩøÁî®.curÔºåÂ¶ÇÊûú‰ΩøÁî®.aniÊàñËÄÖÂÖ∂‰ªñÊ†ºÂºèÊó†ÊïàÔºåÂéüÂõ†ÊòØÊµèËßàÂô®ÂÖºÂÆπÈóÆÈ¢ò„ÄÇ Ê∑ªÂä†ÂΩ©Ëâ≤ÊªöÂä®ÂèòÊç¢Â≠ó‰Ωì Âú®‰Ω†ÊÉ≥Ë¶ÅÊ∑ªÂä†ÂΩ©Ëâ≤ÊªöÂä®ÂèòÊç¢Â≠ó‰ΩìÁöÑÂú∞ÊñπÂÜôÂÖ•‰ª•‰∏ã‰ª£Á†ÅÂç≥ÂèØÔºåÂÖ∂‰∏≠ÊñáÂ≠óÂèØËá™Ë°åÊõ¥ÊîπÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;div id="binft"&gt;&lt;/div&gt; &lt;script&gt; var binft = function (r) &#123; function t() &#123; return b[Math.floor(Math.random() * b.length)] &#125; function e() &#123; return String.fromCharCode(94 * Math.random() + 33) &#125; function n(r) &#123; for (var n = document.createDocumentFragment(), i = 0; r &gt; i; i++) &#123; var l = document.createElement("span"); l.textContent = e(), l.style.color = t(), n.appendChild(l) &#125; return n &#125; function i() &#123; var t = o[c.skillI]; c.step ? c.step-- : (c.step = g, c.prefixP &lt; l.length ? (c.prefixP &gt;= 0 &amp;&amp; (c.text += l[c.prefixP]), c.prefixP++) : "forward" === c.direction ? c.skillP &lt; t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = "backward", c.delay = a) : c.skillP &gt; 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % o.length, c.direction = "forward")), r.textContent = c.text, r.appendChild(n(c.prefixP &lt; l.length ? Math.min(s, s + c.prefixP) : Math.min(s, t.length - c.skillP))), setTimeout(i, d) &#125; var l = "", o = ["ÈùíÈùíÈôµ‰∏äÊüèÔºåÁ£äÁ£äÊ∂ß‰∏≠Áü≥„ÄÇ", "‰∫∫ÁîüÂ§©Âú∞Èó¥ÔºåÂøΩÂ¶ÇËøúË°åÂÆ¢„ÄÇ","ÊñóÈÖíÁõ∏Â®±‰πêÔºåËÅäÂéö‰∏ç‰∏∫ËñÑ„ÄÇ", "È©±ËΩ¶Á≠ñÈ©ΩÈ©¨ÔºåÊ∏∏ÊàèÂÆõ‰∏éÊ¥õ„ÄÇ","Ê¥õ‰∏≠‰ΩïÈÉÅÈÉÅÔºåÂÜ†Â∏¶Ëá™Áõ∏Á¥¢„ÄÇ","ÈïøË°¢ÁΩóÂ§πÂ∑∑ÔºåÁéã‰æØÂ§öÁ¨¨ÂÆÖ„ÄÇ","‰∏§ÂÆ´ÈÅ•Áõ∏ÊúõÔºåÂèåÈòôÁôæ‰ΩôÂ∞∫„ÄÇ","ÊûÅÂÆ¥Â®±ÂøÉÊÑèÔºåÊàöÊàö‰ΩïÊâÄËø´Ôºü"].map(function (r) &#123; return r + "" &#125;), a = 2, g = 1, s = 5, d = 75, b = ["rgb(110,64,170)", "rgb(150,61,179)", "rgb(191,60,175)", "rgb(228,65,157)", "rgb(254,75,131)", "rgb(255,94,99)", "rgb(255,120,71)", "rgb(251,150,51)", "rgb(226,183,47)", "rgb(198,214,60)", "rgb(175,240,91)", "rgb(127,246,88)", "rgb(82,246,103)", "rgb(48,239,130)", "rgb(29,223,163)", "rgb(26,199,194)", "rgb(35,171,216)", "rgb(54,140,225)", "rgb(76,110,219)", "rgb(96,84,200)"], c = &#123; text: "", prefixP: -s, skillI: 0, skillP: 0, direction: "forward", delay: a, step: g &#125;; i() &#125;; binft(document.getElementById('binft')); &lt;/script&gt; ÊàëÊòØÊîæÂú®‰∫Ü‰æßËæπÊ†èÂ§¥ÂÉèÁöÑ‰∏ãËæπÔºåÊèèËø∞ÁöÑ‰ΩçÁΩÆ\themes\next\layout\_macro\sidebar.swingÔºö ÊµèËßàÂô®ÁΩëÈ°µÊ†áÈ¢òÊÅ∂Êêû ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï Âú®ÁõÆÂΩï \themes\next\source\js ‰∏ãÊñ∞Âª∫‰∏Ä‰∏™ FunnyTitle.js Êñá‰ª∂ÔºåÂú®ÈáåÈù¢Â°´ÂÜôÂ¶Ç‰∏ã‰ª£Á†ÅÔºö 1234567891011121314151617&lt;!--ÊµèËßàÂô®ÊêûÁ¨ëÊ†áÈ¢ò--&gt; var OriginTitle = document.title; var titleTime; document.addEventListener('visibilitychange', function () &#123; if (document.hidden) &#123; $('[rel="icon"]').attr('href', "/img/trhx2.png"); document.title = '„ÉΩ(‚óè-`–î¬¥-)„Éé‰Ω†‰∏ë‰Ω†Â∞±Ëµ∞ÔºÅ'; clearTimeout(titleTime); &#125; else &#123; $('[rel="icon"]').attr('href', "/img/trhx2.png"); document.title = '„Éæ(≈ê‚àÄ≈ê3)„Éé‰Ω†Â∏ÖÂ∞±ÂõûÊù•ÔºÅ' + OriginTitle; titleTime = setTimeout(function () &#123; document.title = OriginTitle; &#125;, 2000); &#125; &#125;); ÁÑ∂ÂêéÂú® \themes\next\layout\layout.swing Êñá‰ª∂‰∏≠ÂÜôÂÖ•‰ª•‰∏ã‰ª£Á†ÅÔºö 12&lt;!--ÊµèËßàÂô®ÊêûÁ¨ëÊ†áÈ¢ò--&gt;&lt;script type="text/javascript" src="\js\FunnyTitle.js"&gt;&lt;/script&gt; ÂÜçÊ¨°ÈÉ®ÁΩ≤ÂçöÂÆ¢ÂêéÂ∞±ÂèØ‰ª•ÁúãËßÅÊ†áÈ¢òÊêûÁ¨ëÁöÑÊïàÊûú‰∫Ü„ÄÇ Ê∑ªÂä†ÁΩëÁ´ôÈõ™Ëä±È£òËêΩÊïàÊûú ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï Âú® \themes\next\source\js ÁõÆÂΩï‰∏ãÊñ∞Âª∫‰∏Ä‰∏™ snow.js Êñá‰ª∂ÔºåÁ≤òË¥¥‰ª•‰∏ã‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142/*Ê†∑Âºè‰∏Ä*/(function($)&#123; $.fn.snow = function(options)&#123; var $flake = $('&lt;div id="snowbox" /&gt;').css(&#123;'position': 'absolute','z-index':'9999', 'top': '-50px'&#125;).html('&amp;#10052;'), documentHeight = $(document).height(), documentWidth = $(document).width(), defaults = &#123; minSize : 10, maxSize : 20, newOn : 1000, flakeColor : "#AFDAEF" /* Ê≠§Â§ÑÂèØ‰ª•ÂÆö‰πâÈõ™Ëä±È¢úËâ≤ÔºåËã•Ë¶ÅÁôΩËâ≤ÂèØ‰ª•Êîπ‰∏∫#FFFFFF */ &#125;, options = $.extend(&#123;&#125;, defaults, options); var interval= setInterval( function()&#123; var startPositionLeft = Math.random() * documentWidth - 100, startOpacity = 0.5 + Math.random(), sizeFlake = options.minSize + Math.random() * options.maxSize, endPositionTop = documentHeight - 200, endPositionLeft = startPositionLeft - 500 + Math.random() * 500, durationFall = documentHeight * 10 + Math.random() * 5000; $flake.clone().appendTo('body').css(&#123; left: startPositionLeft, opacity: startOpacity, 'font-size': sizeFlake, color: options.flakeColor &#125;).animate(&#123; top: endPositionTop, left: endPositionLeft, opacity: 0.2 &#125;,durationFall,'linear',function()&#123; $(this).remove() &#125;); &#125;, options.newOn); &#125;;&#125;)(jQuery);$(function()&#123; $.fn.snow(&#123; minSize: 5, /* ÂÆö‰πâÈõ™Ëä±ÊúÄÂ∞èÂ∞∫ÂØ∏ */ maxSize: 50,/* ÂÆö‰πâÈõ™Ëä±ÊúÄÂ§ßÂ∞∫ÂØ∏ */ newOn: 300 /* ÂÆö‰πâÂØÜÈõÜÁ®ãÂ∫¶ÔºåÊï∞Â≠óË∂äÂ∞èË∂äÂØÜÈõÜ */ &#125;);&#125;); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128/*Ê†∑Âºè‰∫å*//* ÊéßÂà∂‰∏ãÈõ™ */function snowFall(snow) &#123; /* ÂèØÈÖçÁΩÆÂ±ûÊÄß */ snow = snow || &#123;&#125;; this.maxFlake = snow.maxFlake || 200; /* ÊúÄÂ§öÁâáÊï∞ */ this.flakeSize = snow.flakeSize || 10; /* Èõ™Ëä±ÂΩ¢Áä∂ */ this.fallSpeed = snow.fallSpeed || 1; /* Âù†ËêΩÈÄüÂ∫¶ */&#125;/* ÂÖºÂÆπÂÜôÊ≥ï */requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function(callback) &#123; setTimeout(callback, 1000 / 60); &#125;;cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame || window.oCancelAnimationFrame;/* ÂºÄÂßã‰∏ãÈõ™ */snowFall.prototype.start = function()&#123; /* ÂàõÂª∫ÁîªÂ∏É */ snowCanvas.apply(this); /* ÂàõÂª∫Èõ™Ëä±ÂΩ¢Áä∂ */ createFlakes.apply(this); /* ÁîªÈõ™ */ drawSnow.apply(this)&#125;/* ÂàõÂª∫ÁîªÂ∏É */function snowCanvas() &#123; /* Ê∑ªÂä†DomÁªìÁÇπ */ var snowcanvas = document.createElement("canvas"); snowcanvas.id = "snowfall"; snowcanvas.width = window.innerWidth; snowcanvas.height = document.body.clientHeight; snowcanvas.setAttribute("style", "position:absolute; top: 0; left: 0; z-index: 1; pointer-events: none;"); document.getElementsByTagName("body")[0].appendChild(snowcanvas); this.canvas = snowcanvas; this.ctx = snowcanvas.getContext("2d"); /* Á™óÂè£Â§ßÂ∞èÊîπÂèòÁöÑÂ§ÑÁêÜ */ window.onresize = function() &#123; snowcanvas.width = window.innerWidth; /* snowcanvas.height = window.innerHeight */ &#125;&#125;/* Èõ™ËøêÂä®ÂØπË±° */function flakeMove(canvasWidth, canvasHeight, flakeSize, fallSpeed) &#123; this.x = Math.floor(Math.random() * canvasWidth); /* xÂùêÊ†á */ this.y = Math.floor(Math.random() * canvasHeight); /* yÂùêÊ†á */ this.size = Math.random() * flakeSize + 2; /* ÂΩ¢Áä∂ */ this.maxSize = flakeSize; /* ÊúÄÂ§ßÂΩ¢Áä∂ */ this.speed = Math.random() * 1 + fallSpeed; /* Âù†ËêΩÈÄüÂ∫¶ */ this.fallSpeed = fallSpeed; /* Âù†ËêΩÈÄüÂ∫¶ */ this.velY = this.speed; /* YÊñπÂêëÈÄüÂ∫¶ */ this.velX = 0; /* XÊñπÂêëÈÄüÂ∫¶ */ this.stepSize = Math.random() / 30; /* Ê≠•Èïø */ this.step = 0 /* Ê≠•Êï∞ */&#125;flakeMove.prototype.update = function() &#123; var x = this.x, y = this.y; /* Â∑¶Âè≥ÊëÜÂä®(‰ΩôÂº¶) */ this.velX *= 0.98; if (this.velY &lt;= this.speed) &#123; this.velY = this.speed &#125; this.velX += Math.cos(this.step += .05) * this.stepSize; this.y += this.velY; this.x += this.velX; /* È£ûÂá∫ËæπÁïåÁöÑÂ§ÑÁêÜ */ if (this.x &gt;= canvas.width || this.x &lt;= 0 || this.y &gt;= canvas.height || this.y &lt;= 0) &#123; this.reset(canvas.width, canvas.height) &#125;&#125;;/* È£ûÂá∫ËæπÁïå-ÊîæÁΩÆÊúÄÈ°∂Á´ØÁªßÁª≠Âù†ËêΩ */flakeMove.prototype.reset = function(width, height) &#123; this.x = Math.floor(Math.random() * width); this.y = 0; this.size = Math.random() * this.maxSize + 2; this.speed = Math.random() * 1 + this.fallSpeed; this.velY = this.speed; this.velX = 0;&#125;;// Ê∏≤ÊüìÈõ™Ëä±-ÈöèÊú∫ÂΩ¢Áä∂ÔºàÊ≠§Â§ÑÂèØ‰øÆÊîπÈõ™Ëä±È¢úËâ≤ÔºÅÔºÅÔºÅÔºâflakeMove.prototype.render = function(ctx) &#123; var snowFlake = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size); snowFlake.addColorStop(0, "rgba(255, 255, 255, 0.9)"); /* Ê≠§Â§ÑÊòØÈõ™Ëä±È¢úËâ≤ÔºåÈªòËÆ§ÊòØÁôΩËâ≤ */ snowFlake.addColorStop(.5, "rgba(255, 255, 255, 0.5)"); /* Ëã•Ë¶ÅÊîπ‰∏∫ÂÖ∂‰ªñÈ¢úËâ≤ÔºåËØ∑Ëá™Ë°åÊü• */ snowFlake.addColorStop(1, "rgba(255, 255, 255, 0)"); /* Êâæ16ËøõÂà∂ÁöÑRGB È¢úËâ≤‰ª£Á†Å„ÄÇ */ ctx.save(); ctx.fillStyle = snowFlake; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); ctx.restore();&#125;;/* ÂàõÂª∫Èõ™Ëä±-ÂÆö‰πâÂΩ¢Áä∂ */function createFlakes() &#123; var maxFlake = this.maxFlake, flakes = this.flakes = [], canvas = this.canvas; for (var i = 0; i &lt; maxFlake; i++) &#123; flakes.push(new flakeMove(canvas.width, canvas.height, this.flakeSize, this.fallSpeed)) &#125;&#125;/* ÁîªÈõ™ */function drawSnow() &#123; var maxFlake = this.maxFlake, flakes = this.flakes; ctx = this.ctx, canvas = this.canvas, that = this; /* Ê∏ÖÁ©∫Èõ™Ëä± */ ctx.clearRect(0, 0, canvas.width, canvas.height); for (var e = 0; e &lt; maxFlake; e++) &#123; flakes[e].update(); flakes[e].render(ctx); &#125; /* ‰∏ÄÂ∏ß‰∏ÄÂ∏ßÁöÑÁîª */ this.loop = requestAnimationFrame(function() &#123; drawSnow.apply(that); &#125;);&#125;/* Ë∞ÉÁî®ÂèäÊéßÂà∂ÊñπÊ≥ï */var snow = new snowFall(&#123;maxFlake:60&#125;);snow.start(); ÁÑ∂ÂêéÂú® \themes\next\layout\layout.swing Êñá‰ª∂‰∏≠ÂÜôÂÖ•‰ª•‰∏ã‰ª£Á†ÅÔºö 12&lt;!-- Èõ™Ëä±ÁâπÊïà --&gt;&lt;script type="text/javascript" src="\js\snow.js"&gt;&lt;/script&gt; Â¶ÇÊûúÊ≤°ÊïàÊûúÔºåËØ∑Á°ÆËÆ§ÁΩëÈ°µÊòØÂê¶Â∑≤ËΩΩÂÖ•JQureyÔºåÂ¶ÇÊûúÊ≤°ÊúâËØ∑Âú®‰∏ãÈõ™‰ª£Á†Å‰πãÂâçÂºïÂÖ•JQÂç≥ÂèØÔºö 12&lt;script type="text/javascript" src="http://libs.baidu.com/jquery/1.8.3/jquery.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="http://libs.baidu.com/jquery/1.8.3/jquery.min.js"&gt;&lt;/script&gt; Ê∑ªÂä†ËÉåÊôØÂä®ÊÄÅÂΩ©Â∏¶ÊïàÊûú ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï Âú® \themes\next\layout\layout.swing Êñá‰ª∂‰∏≠ÂÜôÂÖ•‰ª•‰∏ã‰ª£Á†ÅÔºö 12345&lt;!-- Ê†∑Âºè‰∏ÄÔºàÈº†Ê†áÁÇπÂáªÊõ¥Êç¢Ê†∑ÂºèÔºâ --&gt;&lt;script src="https://g.joyinshare.com/hc/ribbon.min.js" type="text/javascript"&gt;&lt;/script&gt;&lt;!-- Ê†∑Âºè‰∫åÔºàÈ£òÂä®ÁöÑÂΩ©Â∏¶Ôºâ --&gt;&lt;script src="https://g.joyinshare.com/hc/piao.js" type="text/javascript"&gt;&lt;/script&gt; Ê∑ªÂä†ËÉåÊôØ‰ª£Á†ÅÈõ®ÁâπÊïà ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï Âú® \themes\next\source\js ÁõÆÂΩï‰∏ãÊñ∞Âª∫‰∏Ä‰∏™ DigitalRain.js Êñá‰ª∂ÔºåÁ≤òË¥¥‰ª•‰∏ã‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657window.onload = function()&#123; //Ëé∑ÂèñÁîªÂ∏ÉÂØπË±° var canvas = document.getElementById("canvas"); //Ëé∑ÂèñÁîªÂ∏ÉÁöÑ‰∏ä‰∏ãÊñá var context =canvas.getContext("2d"); var s = window.screen; var W = canvas.width = s.width; var H = canvas.height; //Ëé∑ÂèñÊµèËßàÂô®Â±èÂπïÁöÑÂÆΩÂ∫¶ÂíåÈ´òÂ∫¶ //var W = window.innerWidth; //var H = window.innerHeight; //ËÆæÁΩÆcanvasÁöÑÂÆΩÂ∫¶ÂíåÈ´òÂ∫¶ canvas.width = W; canvas.height = H; //ÊØè‰∏™ÊñáÂ≠óÁöÑÂ≠ó‰ΩìÂ§ßÂ∞è var fontSize = 12; //ËÆ°ÁÆóÂàó var colunms = Math.floor(W /fontSize); //ËÆ∞ÂΩïÊØèÂàóÊñáÂ≠óÁöÑyËΩ¥ÂùêÊ†á var drops = []; //ÁªôÊØè‰∏Ä‰∏™ÊñáÂ≠óÂàùÂßãÂåñ‰∏Ä‰∏™Ëµ∑ÂßãÁÇπÁöÑ‰ΩçÁΩÆ for(var i=0;i&lt;colunms;i++)&#123; drops.push(0); &#125; //ËøêÂä®ÁöÑÊñáÂ≠ó var str ="WELCOME TO WWW.ITRHX.COM"; //4:fillText(str,x,y);ÂéüÁêÜÂ∞±ÊòØÂéªÊõ¥ÊîπyÁöÑÂùêÊ†á‰ΩçÁΩÆ //ÁªòÁîªÁöÑÂáΩÊï∞ function draw()&#123; context.fillStyle = "rgba(238,238,238,.08)";//ÈÅÆÁõñÂ±Ç context.fillRect(0,0,W,H); //ÁªôÂ≠ó‰ΩìËÆæÁΩÆÊ†∑Âºè context.font = "600 "+fontSize+"px Georgia"; //ÁªôÂ≠ó‰ΩìÊ∑ªÂä†È¢úËâ≤ context.fillStyle = ["#33B5E5", "#0099CC", "#AA66CC", "#9933CC", "#99CC00", "#669900", "#FFBB33", "#FF8800", "#FF4444", "#CC0000"][parseInt(Math.random() * 10)];//randColor();ÂèØ‰ª•rgb,hsl, Ê†áÂáÜËâ≤ÔºåÂçÅÂÖ≠ËøõÂà∂È¢úËâ≤ //ÂÜôÂÖ•ÁîªÂ∏É‰∏≠ for(var i=0;i&lt;colunms;i++)&#123; var index = Math.floor(Math.random() * str.length); var x = i*fontSize; var y = drops[i] *fontSize; context.fillText(str[index],x,y); //Â¶ÇÊûúË¶ÅÊîπÂèòÊó∂Èó¥ÔºåËÇØÂÆöÂ∞±ÊòØÊîπÂèòÊØèÊ¨°‰ªñÁöÑËµ∑ÁÇπ if(y &gt;= canvas.height &amp;&amp; Math.random() &gt; 0.99)&#123; drops[i] = 0; &#125; drops[i]++; &#125; &#125;; function randColor()&#123;//ÈöèÊú∫È¢úËâ≤ var r = Math.floor(Math.random() * 256); var g = Math.floor(Math.random() * 256); var b = Math.floor(Math.random() * 256); return "rgb("+r+","+g+","+b+")"; &#125; draw(); setInterval(draw,35);&#125;; ÁÑ∂ÂêéÂú® \themes\next\source\css\_custom\custom.styl ‰∏≠ÂÜôÂÖ•Ê†∑ÂºèÔºö 12345678910canvas &#123; position: fixed; right: 0px; bottom: 0px; min-width: 100%; min-height: 100%; height: auto; width: auto; z-index: -1;&#125; Âú® \themes\next\layout\layout.swing Êñá‰ª∂‰∏≠ÂÜôÂÖ•‰ª•‰∏ã‰ª£Á†ÅÔºö 123&lt;!-- ‰ª£Á†ÅÈõ® --&gt; &lt;canvas id="canvas" width="1440" height="900" &gt;&lt;/canvas&gt; &lt;script type="text/javascript" src="/js/DigitalRain.js"&gt;&lt;/script&gt; ‰ª£Á†ÅÂùóÂ§çÂà∂ÂäüËÉΩ ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï ‰∏ãËΩΩ clipboard.js clipboard.js clipboard.min.js Êé®Ëçê ‰øùÂ≠òÊñá‰ª∂clipboard.js / clipboard.min.js Âà∞Ë∑ØÂæÑ\themes\next\source\js\src‰∏ã„ÄÇ ‰ΩøÁî®clipboard.js ‰πüÊòØÂú® \themes\next\source\js\src ÁõÆÂΩï‰∏ãÔºåÂàõÂª∫clipboard-use.jsÔºåÊñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 12345678910111213141516/*È°µÈù¢ËΩΩÂÖ•ÂÆåÊàêÂêéÔºåÂàõÂª∫Â§çÂà∂ÊåâÈíÆ*/!function (e, t, a) &#123; /* code */ var initCopyCode = function()&#123; var copyHtml = ''; copyHtml += '&lt;button class="btn-copy" data-clipboard-snippet=""&gt;'; copyHtml += ' &lt;i class="fa fa-globe"&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;'; copyHtml += '&lt;/button&gt;'; $(".highlight .code pre").before(copyHtml); new ClipboardJS('.btn-copy', &#123; target: function(trigger) &#123; return trigger.nextElementSibling; &#125; &#125;); &#125; initCopyCode(); Âú®\themes\next\source\css\_custom\custom.stylÊ†∑ÂºèÊñá‰ª∂‰∏≠Ê∑ªÂä†‰∏ãÈù¢‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536//‰ª£Á†ÅÂùóÂ§çÂà∂ÊåâÈíÆ.highlight&#123; //Êñπ‰æøcopy‰ª£Á†ÅÊåâÈíÆÔºàbtn-copyÔºâÁöÑÂÆö‰Ωç position: relative;&#125;.btn-copy &#123; display: inline-block; cursor: pointer; background-color: #eee; background-image: linear-gradient(#fcfcfc,#eee); border: 1px solid #d5d5d5; border-radius: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-appearance: none; font-size: 13px; font-weight: 700; line-height: 20px; color: #333; -webkit-transition: opacity .3s ease-in-out; -o-transition: opacity .3s ease-in-out; transition: opacity .3s ease-in-out; padding: 2px 6px; position: absolute; right: 5px; top: 5px; opacity: 0;&#125;.btn-copy span &#123; margin-left: 5px;&#125;.highlight:hover .btn-copy&#123; opacity: 1;&#125; ÂºïÁî® Âú®\themes\next\layout\_layout.swigÊñá‰ª∂‰∏≠ÔºåÊ∑ªÂä†ÂºïÁî®ÔºàÊ≥®ÔºöÂú® swig Êú´Â∞æÊàñ body ÁªìÊùüÊ†áÁ≠æÔºà&lt;/body&gt;Ôºâ‰πãÂâçÊ∑ªÂä†ÔºâÔºö 123&lt;!-- ‰ª£Á†ÅÂùóÂ§çÂà∂ÂäüËÉΩ --&gt; &lt;script type="text/javascript" src="/js/src/clipboard.min.js"&gt;&lt;/script&gt; &lt;script type="text/javascript" src="/js/src/clipboard-use.js"&gt;&lt;/script&gt; HexoÊñáÁ´†‰∏≠ÂõæÁâáÁÇπÂáªÂÆûÁé∞ÂÖ®Â±èÊü•Áúã ‰ΩøÁî®ÂõæÁâáÊµèËßàÊîæÂ§ßÂäüËÉΩfancyboxÊèí‰ª∂„ÄÇ ÂàáÊç¢Âà∞libÁõÆÂΩï 1$ cd next/source/lib ‰∏ãËΩΩÊèí‰ª∂ 1$ git clone https://github.com/theme-next/theme-next-fancybox3 fancybox Êõ¥Êîπ‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ 1fancybox: true 3DÂä®ÊÄÅÊ†áÁ≠æ‰∫ë ÂÆâË£ÖÊ†áÁ≠æ‰∫ëhexo-tag-cloudÊèí‰ª∂ 1$ cnpm install hexo-tag-cloud@^2.* --save ÈÖçÁΩÆsidebar.swigÊñá‰ª∂ ÊâìÂºÄnext/layout/_macro/sidebar.swigÔºåËæìÂÖ•Ôºö 1234567891011&#123;% if site.tags.length &gt; 1 %&#125;&lt;script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"&gt;&lt;/script&gt;&lt;div class="widget-wrap"&gt; &lt;div id="myCanvasContainer" class="widget tagcloud"&gt; &lt;canvas width="250" height="250" id="resCanvas" style="width=100%"&gt; &#123;&#123; list_tags() &#125;&#125; &lt;/canvas&gt; &lt;/div&gt;&lt;/div&gt;&#123;% endif %&#125; Ê†πÊçÆËá™Â∑±ÁöÑÈúÄË¶ÅÊîæÂú®ÂêàÈÄÇÁöÑ‰ΩçÁΩÆ„ÄÇÈáçÊñ∞hexo s‰∏Ä‰∏ãÔºåÂ∞±ÂèØ‰ª•Âá∫Áé∞ÂàöÂàöÈÇ£‰∏™3dÊ†áÁ≠æ‰∫ë‰∫Ü! Ê∑ªÂä†Âç°ÈÄö‰∫∫Áâ© ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÂÆûÁé∞ÊñπÊ≥ï ‰∏ãËΩΩ live2d 1$ cnpm install --save hexo-helper-live2d ‰∏ãËΩΩÊ®°Âûã 1$ cnpm install live2d-widget-model-z16 Êõ¥Â§öÊ®°ÂûãÈÄâÊã©ËØ∑ ÁÇπÂáªÊ≠§Â§ÑÔºå ÂêÑ‰∏™Ê®°ÂûãÁöÑÈ¢ÑËßàËØ∑ ÁÇπÂáªÊ≠§Â§Ñ ‰øÆÊîπÁ´ôÁÇπÈÖçÁΩÆÊñá‰ª∂ 12345678910111213141516171819202122232425262728293031323334#Ê∑ªÂä†ËêåÂÆ†Ôºå‰ª•‰∏ã‰ªªÈÄâ‰∏Ä‰∏™#live2d-widget-model-chitose#live2d-widget-model-epsilon2_1#live2d-widget-model-gf#live2d-widget-model-haru/01 (use npm install --save live2d-widget-model-haru)#live2d-widget-model-haru/02 (use npm install --save live2d-widget-model-haru)#live2d-widget-model-haruto#live2d-widget-model-hibiki#live2d-widget-model-hijiki#live2d-widget-model-izumi#live2d-widget-model-koharu#live2d-widget-model-miku#live2d-widget-model-ni-j#live2d-widget-model-nico#live2d-widget-model-nietzsche#live2d-widget-model-nipsilon#live2d-widget-model-nito#live2d-widget-model-shizuku#live2d-widget-model-tororo#live2d-widget-model-tsumiki#live2d-widget-model-unitychan#live2d-widget-model-wanko#live2d-widget-model-z16live2d: enable: true scriptFrom: local model: use: live2d-widget-model-z16 display: position: right #Ê®°Âûã‰ΩçÁΩÆ width: 140 #Ê®°ÂûãÂÆΩÂ∫¶ height: 260 #Ê®°ÂûãÈ´òÂ∫¶ mobile: show: false #ÊòØÂê¶Âú®ÊâãÊú∫Á´ØÊòæÁ§∫ Âç°ÈÄö‰∫∫Áâ©ÂçáÁ∫ßÁâà ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ËÉΩËØ¥ËØù„ÄÅËÉΩÊç¢Ë£Ö„ÄÅËÉΩÁé©Ê∏∏Êàè„ÄÅËÉΩÊãçÁÖß„ÄÅËøòËÉΩËá™ÂÆö‰πâ„ÄÇ ÂÆûÁé∞ÊñπÊ≥ï ‰∏ãËΩΩ Âº†‰π¶Ê®µ Â§ßÁ•ûÁöÑÈ°πÁõÆÔºåËß£ÂéãÂà∞Êú¨Âú∞ÂçöÂÆ¢ÁõÆÂΩïÁöÑthemes/next/source‰∏ãÔºå‰øÆÊîπautoload.jsÊñá‰ª∂ÔºåÂ¶Ç‰∏ãÔºö Â∞Ü 1234const live2d_path = "https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/";Êîπ‰∏∫const live2d_path = "/live2d-widget/"; Âú®/themes/next/layout/_layout.swing‰∏≠,Êñ∞Â¢ûÂ¶Ç‰∏ãÂÜÖÂÆπÔºö 1&lt;script src="/live2d-widget/autoload.js"&gt;&lt;/script&gt; Âú®‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ ‰∏≠,Êñ∞Â¢ûÂ¶Ç‰∏ãÂÜÖÂÆπÔºö 12live2d: enable: true ÊÉ≥‰øÆÊîπÁúãÊùøÂ®òÂ§ßÂ∞è„ÄÅ‰ΩçÁΩÆ„ÄÅÊ†ºÂºè„ÄÅÊñáÊú¨ÂÜÖÂÆπÁ≠âÔºåÂèØÊü•ÁúãÂπ∂‰øÆÊîπ waifu-tips.js „ÄÅ waifu-tips.json Âíå waifu.css„ÄÇ Êâ©Â±ïÁúãÊùøÂ®òÊ®°Âûã Áî±‰∫éÂÆòÊñπÁöÑÁúãÊùøÂ®òÊ®°ÂûãÊØîËæÉÂ∞ëÔºåÂèØÊâãÂä®Ê∑ªÂä†Ê®°Âûã„ÄÇ Êää githubÊ®°Âûã ‰∏ãËΩΩÂà∞Êú¨Âú∞ÔºåËß£ÂéãÂêéÂ∞ÜassetsÁõÆÂΩïÊã∑Ë¥ùÂà∞ÂçöÂÆ¢Ê†πÁõÆÂΩï‰∏≠ÁöÑlive2d_modelsÔºàËá™Â∑±Êñ∞Âª∫ÔºåÊñá‰ª∂Âêç‰∏çÂèØÊîπÔºâÈáåÔºåÂÜç‰øÆÊîπ_config.yml ÈáåÁöÑ live2d‰∏≠model.useÂç≥ÂèØÔºàÊîπ‰∏∫live2d_models‰∏≠ÁöÑÊ®°ÂûãÂêçÂ≠óÂ∞±Ë°åÔºâ„ÄÇ ÂéªÊéâÈ°∂ÈÉ®ÈªëÁ∫ø ÊâìÂºÄthemes\next\source\css\_custom\custom.stylÊ∑ªÂä†‰ª•‰∏ã‰ª£Á†ÅÔºö 1.headband &#123;display:none;&#125; ‰øÆÊîπ‰∏ªÈ¢òÈ°µÈù¢Â∏ÉÂ±Ä‰∏∫ÂúÜËßí ÊñπÊ≥ï‰∏Ä Âú®/themes/next/source/css/_variables/custom.stylÊñá‰ª∂ÁßçÊ∑ªÂä†Â¶Ç‰∏ã‰ª£Á†ÅÔºà‰ª•GeminiÈ£éÊ†º‰∏∫‰æãÔºâÔºö 123456789101112131415// ‰øÆÊîπ‰∏ªÈ¢òÈ°µÈù¢Â∏ÉÂ±Ä‰∏∫ÂúÜËßí// Variables of Gemini scheme// =================================================@import "Pisces.styl";// Settings for some of the most global styles.// --------------------------------------------------$body-bg-color = #eee// Borders.// --------------------------------------------------$box-shadow-inner = 0 2px 2px 0 rgba(0,0,0,.12), 0 3px 1px -2px rgba(0,0,0,.06), 0 1px 5px 0 rgba(0,0,0,.12)$box-shadow = 0 2px 2px 0 rgba(0,0,0,.12), 0 3px 1px -2px rgba(0,0,0,.06), 0 1px 5px 0 rgba(0,0,0,.12), 0 -1px .5px 0 rgba(0,0,0,.09)$border-radius-inner = initial$border-radius = initial$border-radius-inner = 15px 15px 15px 15px;$border-radius = 15px; ÊñπÊ≥ï‰∫å Âú®\themes\next\source\css\_variables\Gemini.stylÊñá‰ª∂‰∏≠Áõ¥Êé•Ê∑ªÂä†Ôºö 123// ‰øÆÊîπ‰∏ªÈ¢òÈ°µÈù¢Â∏ÉÂ±Ä‰∏∫ÂúÜËßí$border-radius-inner = 15px 15px 15px 15px;$border-radius = 15px; ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö Ëá™ÈÄÇÂ∫îËÉåÊôØÂõæÁâá Âú®Á´ôÁÇπÈÖçÁΩÆÊñá‰ª∂Â§π/themes/next/source/images/ÊîæÂÖ•‰Ω†ÁöÑËÉåÊôØÂõæÁâá; ÁÑ∂Âêé‰øÆÊîπ‰∏ªÈ¢òÊñá‰ª∂Â§πthemes/source/css/_custom/custom.stylÔºåÂú®custom.stylÂºÄÂ§¥Âä†ÂÖ•Â¶Ç‰∏ãÁöÑ‰ª£Á†Å: 12345678910111213141516body &#123; background: url(/images/background.jpg); background-repeat: no-repeat; background-attachment: fixed; background-position: 50% 50%; background-size: cover; -webkit-background-size: cover; -o-background-size: cover; -moz-background-size: cover; -ms-background-size: cover; /*ËøôÊòØËÆæÁΩÆÂ∫ïÈÉ®ÊñáÂ≠ó, Áúã‰∏™‰∫∫ÈúÄË¶Å‰øÆÊîπ*/ #footer &gt; div &gt; div &#123; color: #eee; &#125;&#125; Èò≤Ê≠¢ÊØèÊ¨°heox clean ÂêéCNAMEÊñá‰ª∂Ë¢´Âà†Èô§ ÂÖàÊäägithub‰∏≠ÁöÑCNAMEÊñá‰ª∂Â§çÂà∂‰∏Ä‰ªΩÂà∞Êú¨Âú∞public ÂÜçÂÆâË£ÖÊèí‰ª∂ 1cnpm install hexo-generator-cname --save Ê†πÁõÆÂΩï_config.yml‰∏≠Ê∑ªÂä† 12Plugins:- hexo-generator-cname Âπ∂‰øÆÊîπ 1url: yoursite.com ÂéªÈô§valineÁöÑPowered By ‰øÆÊîπ\themes\next\layout\_third-party\comments\valine.swigÊñá‰ª∂ 123456789101112new Valine(&#123;...pageSize:'&#123;&#123; theme.valine.pageSize &#125;&#125;' || 10,&#125;);//Êñ∞Â¢û‰ª•‰∏ã‰ª£Á†ÅÂç≥ÂèØÔºåÂèØ‰ª•ÁßªÈô§.info‰∏ãÊâÄÊúâÂ≠êËäÇÁÇπ„ÄÇvar infoEle = document.querySelector('#comments .info');if (infoEle &amp;&amp; infoEle.childNodes &amp;&amp; infoEle.childNodes.length &gt; 0)&#123; infoEle.childNodes.forEach(function(item) &#123; item.parentNode.removeChild(item); &#125;);&#125; Â¢ûÂä†ËØç‰∫ë Â¢ûÂä†‰πãÂâçÁöÑÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ÊñπÊ≥ïÊØîËæÉÁÆÄÂçïÔºåÂä†‰∏™jsËÑöÊú¨Â∞±Â•Ω‰∫ÜÔºåÂ∞±Âä†Âú®Ê†áÁ≠æÁöÑÈÇ£‰∏™È°µÈù¢Â•Ω‰∫Ü„ÄÇ ÊâìÂºÄthemes\next\layout\page.swig ÊâæÂà∞ 1&#123;% if page.type === "tags" %&#125; Â∞Ü‰∏ãÈù¢ËøôÊÆµ‰ª£Á†Å: 123456789101112131415161718&lt;div class="tag-cloud"&gt; &lt;div class="tag-cloud-title"&gt; &#123;% set visibleTags = 0 %&#125; &#123;% for tag in site.tags %&#125; &#123;% if tag.length %&#125; &#123;% set visibleTags += 1 %&#125; &#123;% endif %&#125; &#123;% endfor %&#125; &#123;&#123; _p('counter.tag_cloud', visibleTags) &#125;&#125; &lt;/div&gt; &lt;div class="tag-cloud-tags"&gt; &#123;% if not theme.tagcloud %&#125; &#123;&#123; tagcloud(&#123;min_font: 12, max_font: 30, amount: 200, color: true, start_color: '#ccc', end_color: '#111'&#125;) &#125;&#125; &#123;% else %&#125; &#123;&#123; tagcloud(&#123;min_font: 13, max_font: 31, amount: 1000, color: true, start_color: '#9733EE', end_color: '#FF512F'&#125;) &#125;&#125; &#123;% endif %&#125; &lt;/div&gt;&lt;/div&gt; Êç¢Êàê‰∏ãÈù¢ËøôÊÆµ‰ª£Á†ÅÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;div class="tag-cloud"&gt; &lt;!-- &lt;div class="tag-cloud-title"&gt; &#123;&#123; _p('counter.tag_cloud', site.tags.length) &#125;&#125; &lt;/div&gt; --&gt; &lt;div class="tag-cloud-tags" id="tags"&gt; &#123;&#123; tagcloud(&#123;min_font: 16, max_font: 16, amount: 300, color: true, start_color: '#fff', end_color: '#fff'&#125;) &#125;&#125; &lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;script type="text/javascript"&gt; var alltags=document.getElementById('tags'); var tags=alltags.getElementsByTagName('a'); for (var i = tags.length - 1; i &gt;= 0; i--) &#123; var r=Math.floor(Math.random()*75+130); var g=Math.floor(Math.random()*75+100); var b=Math.floor(Math.random()*75+80); tags[i].style.background = "rgb("+r+","+g+","+b+")"; &#125;&lt;/script&gt;&lt;style type="text/css"&gt; div#posts.posts-expand .tag-cloud a&#123; background-color: #f5f7f1; border-radius: 6px; padding-left: 10px; padding-right: 10px; margin-top: 18px; &#125; .tag-cloud a&#123; background-color: #f5f7f1; border-radius: 4px; padding-right: 5px; padding-left: 5px; margin-right: 5px; margin-left: 0px; margin-top: 8px; margin-bottom: 0px; &#125; .tag-cloud a:before&#123; content: "üìú"; &#125; .tag-cloud-tags&#123; text-align: left; counter-reset: tags; &#125;&lt;/style&gt; ÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö ‰ª£Á†ÅÂùóMac PanelÁâπÊïà ÂÖà‰∏äÊïàÊûúÂõæÔºö ËÉΩËÆæÁΩÆÈò¥ÂΩ±ÊïàÊûúÂíåÂÆûÁé∞ÊñáÊú¨ÁºñËæëÂäüËÉΩÔºå‰∏çËøáÊñáÊú¨Âè™Â≠òÂú®ÊµèËßàÂô®È°µÈù¢‰∏äÔºå‰∏ç‰ºöÁúüÊ≠£‰øùÂ≠ò„ÄÇ ÂÆûÁé∞Ê≠•È™§ ÂºïÂÖ•JS ËøôÈáåÈúÄË¶ÅÊñ∞Âª∫‰∏§‰∏™jsÊñá‰ª∂events.jsÂíåcodeblock.jsÔºåË∑ØÂæÑ‰Ωç‰∫é/themes/next/scripts/ÂåÖ‰∏ã„ÄÇ events.js‰ª£Á†ÅÔºö 1234567// mac PanelÊïàÊûú‰ª£Á†ÅÂùóÁõ∏ÂÖ≥var exec = require('child_process').exec;// new ÂêéËá™Âä®ÊâìÂºÄÁºñËæëÂô®hexo.on('new', function(data)&#123; exec('open -a MacDown ' + data.path);&#125;); codeblock.js‰ª£Á†ÅÔºö 12345678910111213141516171819202122// mac PanelÊïàÊûú‰ª£Á†ÅÂùóÁõ∏ÂÖ≥var attributes = [ 'autocomplete="off"', 'autocorrect="off"', 'autocapitalize="off"', 'spellcheck="false"', 'contenteditable="true"']var attributesStr = attributes.join(' ')hexo.extend.filter.register('after_post_render', function (data) &#123; while (/&lt;figure class="highlight ([a-zA-Z]+)"&gt;.*?&lt;\/figure&gt;/.test(data.content)) &#123; data.content = data.content.replace(/&lt;figure class="highlight ([a-zA-Z]+)"&gt;.*?&lt;\/figure&gt;/, function () &#123; var language = RegExp.$1 || 'plain' var lastMatch = RegExp.lastMatch lastMatch = lastMatch.replace(/&lt;figure class="highlight /, '&lt;figure class="iseeu highlight /') return '&lt;div class="highlight-wrap"' + attributesStr + 'data-rel="' + language.toUpperCase() + '"&gt;' + lastMatch + '&lt;/div&gt;' &#125;) &#125; return data&#125;) ÂºïÂÖ•CSS Âú®/themes/next/source/css/_common/components/highlight/ÁõÆÂΩï‰∏ãÊñ∞Âª∫macPanel.stylÊñá‰ª∂ÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// mac PanelÊïàÊûú‰ª£Á†ÅÂùóÁõ∏ÂÖ≥.highlight-wrap[data-rel] &#123; position: relative; overflow: hidden; border-radius: 5px; //box-shadow: 0 10px 30px 0px rgba(0, 0, 0, 0.4); box-shadow:18px 18px 15px 0px rgba(0,0,0,.4) margin: 35px 0; ::-webkit-scrollbar &#123; height: 10px; &#125; ::-webkit-scrollbar-track &#123; -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3); border-radius: 10px; &#125; ::-webkit-scrollbar-thumb &#123; border-radius: 10px; -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5); &#125; &amp;::before &#123; color: white; content: attr(data-rel); height: 38px; line-height: 38px; //background: #21252b; background: #108414de; color: #fff; font-size: 16px; //position: absolute; top: 0; left: 0; width: 100%; //font-family: 'Source Sans Pro', sans-serif; font-weight: bold; padding: 0px 80px; text-indent: 15px; float: left; &#125; &amp;::after &#123; content: ' '; position: absolute; -webkit-border-radius: 50%; border-radius: 50%; background: #fc625d; width: 12px; height: 12px; top: 0; left: 20px; margin-top: 13px; -webkit-box-shadow: 20px 0px #fdbc40, 40px 0px #35cd4b; box-shadow: 20px 0px #fdbc40, 40px 0px #35cd4b; z-index: 3; &#125;&#125; Ê≠§cssÊòØÊ†πÊçÆÊàëÊú¨Âú∞ÁöÑÊ†∑ÂºèÂÅöËøáË∞ÉÊï¥ÔºåÊ≥®ÈáäÁöÑ‰ª£Á†Å‰∏∫ÂéüÊúâÁöÑÔºåÊ†πÊçÆÈúÄË¶ÅË∞ÉÊï¥Ê†∑ÂºèÂç≥ÂèØ„ÄÇ ÈÖçÁΩÆÂºïÁî® Âú®/themes/next/source/css/_common/components/highlight/highlight.stylÊñá‰ª∂‰∏≠ÂºïÂÖ•ÂàöÊâçÊñ∞Âª∫ÁöÑmacPanel.stylÔºö 1@require "macPanel" ÈÖçÁΩÆÂú®Êñá‰ª∂ÁöÑÈ°∂ÈÉ®‰ΩçÁΩÆÂç≥ÂèØ„ÄÇ Âà∞Ê≠§Mac PanelÂ∑≤ÈÖçÁΩÆÂÆåÊàêÔºåÊ†πÊçÆÈúÄË¶ÅÂèØË∞ÉÊï¥‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑhighlight_themeÈÄâÈ°πÔºåÈÄâÊã©Ëá™Â∑±ÂñúÊ¨¢ÁöÑÊ†∑Âºè„ÄÇ ÂèØËÉΩÈÅáÂà∞ÁöÑÈóÆÈ¢ò Â¶ÇÊûúÂú®ÈÖçÁΩÆÂÆåÊØïÂêéÔºåhexoÂêØÂä®Êä•ÈîôÔºåÂèØÂ∞ÜÁ´ôÁÇπÈÖçÁΩÆÊñá‰ª∂ÈáåÁöÑhighlightÂ±ûÊÄßauto_detectÊîπÊàêfalseÔºö 123456highlight: enable: true line_number: true- auto_detect: true+ auto_detect: false tab_replace: Â¶ÇÊûúËøòÊòØÊúâÈóÆÈ¢òÔºåÂèØ‰ªîÁªÜÊ£ÄÊü•‰∏Ä‰∏ãÂàöÊâçÊñ∞Âª∫ÁöÑÊñá‰ª∂„ÄÅ‰øÆÊîπÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÊúâ‰ªÄ‰πàÂú∞ÊñπÈÖçÁΩÆÈîô‰∫ÜÔºåÊàñËÄÖÊòØËØ≠Ê≥ï‰∏äÁöÑÈîôËØØ,‰øÆÊîπÂêéÈáçÊñ∞ÂêØÂä®Âç≥ÂèØÁúãÂà∞ÊïàÊûú„ÄÇ ‰∏∫ÊñáÁ´†ÁîüÊàêÊ∞∏‰πÖÈìæÊé• hexoÈªòËÆ§ÁöÑÊñáÁ´†ÈìæÊé•ÂΩ¢Âºè‰∏∫year/:month/:day/:titleÔºåÊòØÊåâÁÖßÂπ¥„ÄÅÊúà„ÄÅÊó•„ÄÅÊ†áÈ¢òÊù•ÁîüÊàêÁöÑ„ÄÇÂΩìÊääÊñáÁ´†Ê∫êÊñá‰ª∂ÂêçÊîπÊéâ‰πãÂêéÔºåÈìæÊé•‰πü‰ºöÊîπÂèòÔºåËøôÂæà‰∏çÂèãÂ•Ω„ÄÇÂπ∂‰∏îÂ¶ÇÊûúÊñáÁ´†Ê†áÈ¢òÊòØ‰∏≠ÊñáÁöÑÔºåÈÇ£‰πàËØ•Ë∑ØÂæÑÂ∞±‰ºöÂá∫Áé∞‰∏≠ÊñáÂ≠óÁ¨¶„ÄÇÂú®Ë∑ØÂæÑ‰∏≠Âá∫Áé∞‰∫Ü‰∏≠ÊñáÂ≠óÁ¨¶ÂæàÂÆπÊòìÂºïÂèëÂêÑÁßçÈóÆÈ¢òÔºåËÄå‰∏î‰πü‰∏çÂà©‰∫éseoÔºåÂõ†‰∏∫Ë∑ØÂæÑÂåÖÂê´‰∫ÜÂπ¥ÊúàÊó•‰∏â‰∏™Â±ÇÁ∫ßÔºåÂ±ÇÁ∫ßÂ§™Ê∑±‰∏çÂà©‰∫éÁôæÂ∫¶ËúòËõõÊäìÂèñ„ÄÇ Ëß£ÂÜ≥ÂäûÊ≥ïÂ∞±ÊòØÂà©Áî®ÂÖ∂ÂÆÉÁöÑÊèí‰ª∂Êù•ÁîüÊàêÂîØ‰∏ÄÁöÑË∑ØÂæÑÔºåËøôÊ†∑Â∞±ÁÆóÊñá‰ª∂Ê†áÈ¢òÈöèÊÑè‰øÆÊîπÔºåËÄå‰∏ç‰ºöÂØºËá¥ÂéüÊú¨ÁöÑÈìæÊé•Â§±ÊïàËÄåÈÄ†ÊàêÁ´ôÁÇπ‰∏ãÂ≠òÂú®Â§ßÈáèÁöÑÊ≠ªÈìæ„ÄÇ ÂÆâË£ÖÊèí‰ª∂ 1cnpm install hexo-abbrlink --save &lt;font color=&quot;red&quot;&gt;Ê≥®ÊÑèÔºöÊâßË°åÊ≠§ÂëΩ‰ª§ÂèØËÉΩ‰ºö‰∏çÊàêÂäüÔºåÊèêÁ§∫‰Ω†Áº∫Â∞ëÁõ∏Â∫îÁöÑ‰æùËµñÔºåÊØîÂ¶Çbabel-eslint„ÄÅmini-css-extract-plugin„ÄÅwebpack-cli‚Ä¶‰ΩøÁî®npmÂëΩ‰ª§ÂÆâË£ÖÂç≥ÂèØ„ÄÇ&lt;/font&gt;ÊØîÂ¶ÇÔºö 1npm install eslint@4.x babel-eslint@8 --save-dev ÈÖçÁΩÆ ‰øÆÊîπÊ†πÁõÆÂΩïÁ´ôÁÇπÈÖçÁΩÆÊñá‰ª∂config.ymlÔºåÊîπ‰∏∫Ôºö 1234permalink: posts/:abbrlink.html # Ê≠§Â§ÑÂèØ‰ª•Ëá™Â∑±ËÆæÁΩÆÔºå‰πüÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® /:abbrlinkabbrlink: alg: crc32 #ÁÆóÊ≥ïÔºö crc16(default) and crc32 rep: hex #ËøõÂà∂Ôºö dec(default) and hex ËøôÈáåÂ∞ÜÈ°µÈù¢ÈÉΩÊ∑ªÂä†‰∫Ü .html ÁöÑÂêéÁºÄÔºåÁî®Êù•‰º™Ë£ÖÊàêÈùôÊÄÅÈ°µÈù¢(ËôΩËØ¥HexoÁöÑÈ°µÈù¢Êú¨Ë∫´Â∞±ÊòØÈùôÊÄÅÈ°µÈù¢)ÔºåËøôÊ†∑ÂèØ‰ª•Áõ¥Êé•‰ªéË∑ØÂæÑÂ∞±Áü•ÈÅìËøôÊòØ‰∏™ÈùôÊÄÅÈ°µÈù¢ÔºåÊñπ‰æøseo„ÄÇ ÁîüÊàêÁöÑÈìæÊé•Â∞Ü‰ºöÊòØËøôÊ†∑ÁöÑ(ÂÆòÊñπÊ†∑‰æã)Ôºö 12345678910crc16 &amp; hexhttps://post.zz173.com/posts/66c8.htmlcrc16 &amp; dechttps://post.zz173.com/posts/65535.htmlcrc32 &amp; hexhttps://post.zz173.com/posts/8ddf18fb.htmlcrc32 &amp; dechttps://post.zz173.com/posts/1690090958.html ÁîüÊàêÂÆåÂêéÔºåÂéümdÊñá‰ª∂ÁöÑFront-matter ÂÜÖ‰ºöÂ¢ûÂä†abbrlink Â≠óÊÆµÔºåÂÄº‰∏∫ÁîüÊàêÁöÑID „ÄÇËøô‰∏™Â≠óÊÆµÁ°Æ‰øù‰∫ÜÂú®Êàë‰ª¨‰øÆÊîπ‰∫ÜFront-matter ÂÜÖÁöÑÂçöÂÆ¢Ê†áÈ¢òtitleÊàñÂàõÂª∫Êó•ÊúüdateÂ≠óÊÆµ‰πãÂêéËÄå‰∏ç‰ºöÊîπÂèòÈìæÊé•Âú∞ÂùÄ„ÄÇ]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-ThreadLocal]]></title>
    <url>%2Fposts%2F94ca0535.html</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªã ThreadLocalÂπ∂ÈùûÊòØ‰∏Ä‰∏™Á∫øÁ®ãÁöÑÊú¨Âú∞ÂÆûÁé∞ÁâàÊú¨ÔºåÂÆÉÂπ∂‰∏çÊòØ‰∏Ä‰∏™ThreadÔºåËÄåÊòØthreadlocalvariable(Á∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáè)„ÄÇ Á∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáè(ThreadLocal)ÁöÑÂäüÁî®Â∞±ÊòØ‰∏∫ÊØè‰∏Ä‰∏™‰ΩøÁî®ËØ•ÂèòÈáèÁöÑÁ∫øÁ®ãÈÉΩÊèê‰æõ‰∏Ä‰∏™ÂèòÈáèÂÄºÁöÑÂâØÊú¨ÔºåÊòØJava‰∏≠‰∏ÄÁßçËæÉ‰∏∫ÁâπÊÆäÁöÑÁ∫øÁ®ãÁªëÂÆöÊú∫Âà∂ÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÂèØ‰ª•Áã¨Á´ãÂú∞ÊîπÂèòËá™Â∑±ÁöÑÂâØÊú¨ÔºåËÄå‰∏ç‰ºöÂíåÂÖ∂ÂÆÉÁ∫øÁ®ãÁöÑÂâØÊú¨ÂÜ≤Á™Å„ÄÇ ‰ªéÁ∫øÁ®ãÁöÑËßíÂ∫¶ÁúãÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩ‰øùÊåÅ‰∏Ä‰∏™ÂØπÂÖ∂Á∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáèÂâØÊú¨ÁöÑÈöêÂºèÂºïÁî®ÔºåÂè™Ë¶ÅÁ∫øÁ®ãÊòØÊ¥ªÂä®ÁöÑÂπ∂‰∏î ThreadLocal ÂÆû‰æãÊòØÂèØËÆøÈóÆÁöÑÔºõÂú®Á∫øÁ®ãÊ∂àÂ§±‰πãÂêéÔºåÂÖ∂Á∫øÁ®ãÂ±ÄÈÉ®ÂÆû‰æãÁöÑÊâÄÊúâÂâØÊú¨ÈÉΩ‰ºöË¢´ÂûÉÂúæÂõûÊî∂ÔºàÈô§ÈùûÂ≠òÂú®ÂØπËøô‰∫õÂâØÊú¨ÁöÑÂÖ∂‰ªñÂºïÁî®Ôºâ„ÄÇ ÈÄöËøáThreadLocalÂ≠òÂèñÁöÑÊï∞ÊçÆÔºåÊÄªÊòØ‰∏éÂΩìÂâçÁ∫øÁ®ãÁõ∏ÂÖ≥Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåJVM ‰∏∫ÊØè‰∏™ËøêË°åÁöÑÁ∫øÁ®ãÔºåÁªëÂÆö‰∫ÜÁßÅÊúâÁöÑÊú¨Âú∞ÂÆû‰æãÂ≠òÂèñÁ©∫Èó¥Ôºå‰ªéËÄå‰∏∫Â§öÁ∫øÁ®ãÁéØÂ¢ÉÂ∏∏Âá∫Áé∞ÁöÑÂπ∂ÂèëËÆøÈóÆÈóÆÈ¢òÊèê‰æõ‰∫Ü‰∏ÄÁßçÈöîÁ¶ªÊú∫Âà∂„ÄÇ ThreadLocalÊòØÂ¶Ç‰ΩïÂÅöÂà∞‰∏∫ÊØè‰∏Ä‰∏™Á∫øÁ®ãÁª¥Êä§ÂèòÈáèÁöÑÂâØÊú¨ÁöÑÂë¢Ôºü ÂÆûÁé∞ÊÄùË∑ØÂæàÁÆÄÂçïÔºåÂú®ThreadLocalÁ±ª‰∏≠Êúâ‰∏Ä‰∏™MapÔºåÁî®‰∫éÂ≠òÂÇ®ÊØè‰∏Ä‰∏™Á∫øÁ®ãÁöÑÂèòÈáèÁöÑÂâØÊú¨„ÄÇ Ê¶ÇÊã¨Ëµ∑Êù•ËØ¥ÔºåÂØπ‰∫éÂ§öÁ∫øÁ®ãËµÑÊ∫êÂÖ±‰∫´ÁöÑÈóÆÈ¢òÔºåÂêåÊ≠•Êú∫Âà∂ÈááÁî®‰∫Ü‚Äú‰ª•Êó∂Èó¥Êç¢Á©∫Èó¥‚ÄùÁöÑÊñπÂºèÔºåËÄåThreadLocalÈááÁî®‰∫Ü‚Äú‰ª•Á©∫Èó¥Êç¢Êó∂Èó¥‚ÄùÁöÑÊñπÂºè„ÄÇÂâçËÄÖ‰ªÖÊèê‰æõ‰∏Ä‰ªΩÂèòÈáèÔºåËÆ©‰∏çÂêåÁöÑÁ∫øÁ®ãÊéíÈòüËÆøÈóÆÔºåËÄåÂêéËÄÖ‰∏∫ÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊèê‰æõ‰∫Ü‰∏Ä‰ªΩÂèòÈáèÔºåÂõ†Ê≠§ÂèØ‰ª•ÂêåÊó∂ËÆøÈóÆËÄå‰∫í‰∏çÂΩ±Âìç„ÄÇ ÂÜÖÈÉ®ÁªìÊûÑ ÂÆûÁé∞ÂéüÁêÜ ‰ªé‰∏äÈù¢ThreadLocalÁ±ªÂõæÁªìÊûÑÂèØÁü•ÔºåThreadÁ±ª‰∏≠Êúâ‰∏§‰∏™ÂèòÈáèthreadLocalsÂíåinheritableThreadLocalsÔºå‰∫åËÄÖÈÉΩÊòØThreadLocalÂÜÖÈÉ®Á±ªThreadLocalMapÁ±ªÂûãÁöÑÂèòÈáè„ÄÇ ÈÄöËøáÊü•ÁúãÂÜÖÈÉ®Á±ªThreadLocalMapÂèØ‰ª•ÂèëÁé∞ÂÆûÈôÖ‰∏äÂÆÉÁ±ª‰ºº‰∫é‰∏Ä‰∏™HashMap„ÄÇÂú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊØè‰∏™Á∫øÁ®ã‰∏≠ÁöÑËøô‰∏§‰∏™ÂèòÈáèÈÉΩ‰∏∫nullÔºåÂè™ÊúâÂΩìÁ∫øÁ®ãÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî®ThreadLocalÁöÑsetÊàñËÄÖgetÊñπÊ≥ïÁöÑÊó∂ÂÄôÊâç‰ºöÂàõÂª∫‰ªñ‰ª¨„ÄÇ ÊØè‰∏™Á∫øÁ®ãÁöÑÊú¨Âú∞ÂèòÈáè‰∏çÊòØÂ≠òÊîæÂú®ThreadLocalÂÆû‰æã‰∏≠ÔºåËÄåÊòØÊîæÂú®Ë∞ÉÁî®Á∫øÁ®ãÁöÑThreadLocalsÂèòÈáèÈáåÈù¢Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåThreadLocalÁ±ªÂûãÁöÑÊú¨Âú∞ÂèòÈáèÊòØÂ≠òÊîæÂú®ÂÖ∑‰ΩìÁöÑÁ∫øÁ®ãÁ©∫Èó¥‰∏äÔºåÂÖ∂Êú¨Ë∫´Áõ∏ÂΩì‰∫é‰∏Ä‰∏™Ë£ÖËΩΩÊú¨Âú∞ÂèòÈáèÁöÑÂ∑•ÂÖ∑Â£≥ÔºåÈÄöËøásetÊñπÊ≥ïÂ∞ÜvalueÊ∑ªÂä†Âà∞Ë∞ÉÁî®Á∫øÁ®ãÁöÑthreadLocals‰∏≠ÔºåÂΩìË∞ÉÁî®Á∫øÁ®ãË∞ÉÁî®getÊñπÊ≥ïÊó∂ÂÄôËÉΩÂ§ü‰ªéÂÆÉÁöÑthreadLocals‰∏≠ÂèñÂá∫ÂèòÈáè„ÄÇÂ¶ÇÊûúË∞ÉÁî®Á∫øÁ®ã‰∏ÄÁõ¥‰∏çÁªàÊ≠¢ÔºåÈÇ£‰πàËøô‰∏™Êú¨Âú∞ÂèòÈáèÂ∞Ü‰ºö‰∏ÄÁõ¥Â≠òÊîæÂú®‰ªñÁöÑthreadLocals‰∏≠ÔºåÊâÄ‰ª•‰∏ç‰ΩøÁî®Êú¨Âú∞ÂèòÈáèÁöÑÊó∂ÂÄôÈúÄË¶ÅË∞ÉÁî®removeÊñπÊ≥ïÂ∞ÜthreadLocals‰∏≠Âà†Èô§‰∏çÁî®ÁöÑÊú¨Âú∞ÂèòÈáè„ÄÇ Ê†∏ÂøÉAPI ThreadLocalÁ±ªÊèê‰æõÂ¶Ç‰∏ãÂá†‰∏™Ê†∏ÂøÉÊñπÊ≥ïÔºö 123public T get()public void set(T value)public void remove() setÊñπÊ≥ï 12345678910111213141516171819public void set(T value) &#123; //Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÔºàË∞ÉÁî®ËÄÖÁ∫øÁ®ãÔºâ Thread t = Thread.currentThread(); //‰ª•ÂΩìÂâçÁ∫øÁ®ã‰Ωú‰∏∫keyÂÄºÔºåÂéªÊü•ÊâæÂØπÂ∫îÁöÑÁ∫øÁ®ãÂèòÈáèÔºåÊâæÂà∞ÂØπÂ∫îÁöÑmap ThreadLocalMap map = getMap(t); //Â¶ÇÊûúmap‰∏ç‰∏∫nullÔºåÂ∞±Áõ¥Êé•Ê∑ªÂä†Êú¨Âú∞ÂèòÈáèÔºåkey‰∏∫ÂΩìÂâçÁ∫øÁ®ãÔºåÂÄº‰∏∫Ê∑ªÂä†ÁöÑÊú¨Âú∞ÂèòÈáèÂÄº if (map != null) map.set(this, value); //Â¶ÇÊûúmap‰∏∫nullÔºåËØ¥ÊòéÈ¶ñÊ¨°Ê∑ªÂä†ÔºåÈúÄË¶ÅÈ¶ñÂÖàÂàõÂª∫Âá∫ÂØπÂ∫îÁöÑmap else createMap(t, value);&#125;/** *Ëé∑ÂèñÁ∫øÁ®ãËá™Â∑±ÁöÑÂèòÈáèthreadLocalsÔºåÂπ∂ÁªëÂÆöÂà∞ÂΩìÂâçË∞ÉÁî®Á∫øÁ®ãÁöÑÊàêÂëòÂèòÈáèthreadLocals‰∏ä */ThreadLocalMap getMap(Thread t) &#123; return t.threadLocals;&#125; Â¶ÇÊûúË∞ÉÁî®getMapÊñπÊ≥ïËøîÂõûÂÄº‰∏ç‰∏∫nullÔºåÂ∞±Áõ¥Êé•Â∞ÜvalueÂÄºËÆæÁΩÆÂà∞threadLocals‰∏≠Ôºàkey‰∏∫ÂΩìÂâçÁ∫øÁ®ãÂºïÁî®ÔºåÂÄº‰∏∫Êú¨Âú∞ÂèòÈáèÔºâÔºõ Â¶ÇÊûúgetMapÊñπÊ≥ïËøîÂõûnullËØ¥ÊòéÊòØÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî®setÊñπÊ≥ïÔºàÂâçÈù¢ËØ¥Âà∞ËøáÔºåthreadLocalsÈªòËÆ§ÂÄº‰∏∫nullÔºåÂè™ÊúâË∞ÉÁî®setÊñπÊ≥ïÁöÑÊó∂ÂÄôÊâç‰ºöÂàõÂª∫mapÔºâÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅË∞ÉÁî®createMapÊñπÊ≥ïÂàõÂª∫threadLocals; 123void createMap(Thread t, T firstValue) &#123; t.threadLocals = new ThreadLocalMap(this, firstValue);&#125; createMapÊñπÊ≥ï‰∏ç‰ªÖÂàõÂª∫‰∫ÜthreadLocalsÔºåÂêåÊó∂‰πüÂ∞ÜË¶ÅÊ∑ªÂä†ÁöÑÊú¨Âú∞ÂèòÈáèÂÄºÊ∑ªÂä†Âà∞‰∫ÜthreadLocals‰∏≠„ÄÇ getÊñπÊ≥ï 123456789101112131415161718192021222324252627282930313233public T get() &#123; //Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ã Thread t = Thread.currentThread(); //Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÁöÑthreadLocalsÂèòÈáè ThreadLocalMap map = getMap(t); //Â¶ÇÊûúthreadLocalsÂèòÈáè‰∏ç‰∏∫nullÔºåÂ∞±ÂèØ‰ª•Âú®map‰∏≠Êü•ÊâæÂà∞Êú¨Âú∞ÂèòÈáèÁöÑÂÄº if (map != null) &#123; ThreadLocalMap.Entry e = map.getEntry(this); if (e != null) &#123; @SuppressWarnings("unchecked") T result = (T)e.value; return result; &#125; &#125; //ÊâßË°åÂà∞Ê≠§Â§ÑÔºåthreadLocals‰∏∫nullÔºåË∞ÉÁî®ËØ•Êõ¥ÊîπÂàùÂßãÂåñÂΩìÂâçÁ∫øÁ®ãÁöÑthreadLocalsÂèòÈáè return setInitialValue();&#125;private T setInitialValue() &#123; //protected T initialValue() &#123;return null;&#125; T value = initialValue(); //Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ã Thread t = Thread.currentThread(); //‰ª•ÂΩìÂâçÁ∫øÁ®ã‰Ωú‰∏∫keyÂÄºÔºåÂéªÊü•ÊâæÂØπÂ∫îÁöÑÁ∫øÁ®ãÂèòÈáèÔºåÊâæÂà∞ÂØπÂ∫îÁöÑmap ThreadLocalMap map = getMap(t); //Â¶ÇÊûúmap‰∏ç‰∏∫nullÔºåÂ∞±Áõ¥Êé•Ê∑ªÂä†Êú¨Âú∞ÂèòÈáèÔºåkey‰∏∫ÂΩìÂâçÁ∫øÁ®ãÔºåÂÄº‰∏∫Ê∑ªÂä†ÁöÑÊú¨Âú∞ÂèòÈáèÂÄº if (map != null) map.set(this, value); //Â¶ÇÊûúmap‰∏∫nullÔºåËØ¥ÊòéÈ¶ñÊ¨°Ê∑ªÂä†ÔºåÈúÄË¶ÅÈ¶ñÂÖàÂàõÂª∫Âá∫ÂØπÂ∫îÁöÑmap else createMap(t, value); return value;&#125; Âú®getÊñπÊ≥ïÁöÑÂÆûÁé∞‰∏≠ÔºåÈ¶ñÂÖàËé∑ÂèñÂΩìÂâçË∞ÉÁî®ËÄÖÁ∫øÁ®ãÔºåÂ¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÁöÑthreadLocals‰∏ç‰∏∫nullÔºåÂ∞±Áõ¥Êé•ËøîÂõûÂΩìÂâçÁ∫øÁ®ãÁªëÂÆöÁöÑÊú¨Âú∞ÂèòÈáèÂÄºÔºåÂê¶ÂàôÊâßË°åsetInitialValueÊñπÊ≥ïÂàùÂßãÂåñthreadLocalsÂèòÈáè„ÄÇ Âú®setInitialValueÊñπÊ≥ï‰∏≠ÔºåÁ±ª‰ºº‰∫ésetÊñπÊ≥ïÁöÑÂÆûÁé∞ÔºåÈÉΩÊòØÂà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÁöÑthreadLocalsÂèòÈáèÊòØÂê¶‰∏∫nullÔºåÊòØÂàôÊ∑ªÂä†Êú¨Âú∞ÂèòÈáèÔºàËøô‰∏™Êó∂ÂÄôÁî±‰∫éÊòØÂàùÂßãÂåñÔºåÊâÄ‰ª•Ê∑ªÂä†ÁöÑÂÄº‰∏∫nullÔºâÔºåÂê¶ÂàôÂàõÂª∫threadLocalsÂèòÈáèÔºåÂêåÊ†∑Ê∑ªÂä†ÁöÑÂÄº‰∏∫null„ÄÇ removeÊñπÊ≥ï 1234567public void remove() &#123; //Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÁªëÂÆöÁöÑthreadLocals ThreadLocalMap m = getMap(Thread.currentThread()); //Â¶ÇÊûúmap‰∏ç‰∏∫nullÔºåÂ∞±ÁßªÈô§ÂΩìÂâçÁ∫øÁ®ã‰∏≠ÊåáÂÆöThreadLocalÂÆû‰æãÁöÑÊú¨Âú∞ÂèòÈáè if (m != null) m.remove(this); &#125; removeÊñπÊ≥ïÂà§Êñ≠ËØ•ÂΩìÂâçÁ∫øÁ®ãÂØπÂ∫îÁöÑthreadLocalsÂèòÈáèÊòØÂê¶‰∏∫nullÔºå‰∏ç‰∏∫nullÂ∞±Áõ¥Êé•Âà†Èô§ÂΩìÂâçÁ∫øÁ®ã‰∏≠ÊåáÂÆöÁöÑthreadLocalsÂèòÈáè„ÄÇ ThreadLocalMap ThreadLocalMapÊòØThreadLocalÁöÑÂÜÖÈÉ®Á±ªÔºåÊ≤°ÊúâÂÆûÁé∞MapÊé•Âè£ÔºåÁî®Áã¨Á´ãÁöÑÊñπÂºèÂÆûÁé∞‰∫ÜMapÁöÑÂäüËÉΩÔºåÂÖ∂ÂÜÖÈÉ®ÁöÑEntry‰πüÁã¨Á´ãÂÆûÁé∞„ÄÇ 123456789101112131415161718192021222324252627282930/** * ÊòØÁªßÊâøËá™WeakReferenceÁöÑ‰∏Ä‰∏™Á±ªÔºåËØ•Á±ª‰∏≠ÂÆûÈôÖÂ≠òÊîæÁöÑkeyÊòØ * ÊåáÂêëThreadLocalÁöÑÂº±ÂºïÁî®Âíå‰∏é‰πãÂØπÂ∫îÁöÑvalueÂÄº(ËØ•valueÂÄº * Â∞±ÊòØÈÄöËøáThreadLocalÁöÑsetÊñπÊ≥ï‰º†ÈÄíËøáÊù•ÁöÑÂÄº) * Áî±‰∫éÊòØÂº±ÂºïÁî®ÔºåÂΩìgetÊñπÊ≥ïËøîÂõûnullÁöÑÊó∂ÂÄôÊÑèÂë≥ÁùÄÂùëËÉΩÂºïÁî® */static class Entry extends WeakReference&lt;ThreadLocal&lt;?&gt;&gt; &#123; /** valueÂ∞±ÊòØÂíåThreadLocalÁªëÂÆöÁöÑ */ Object value; //kÔºöThreadLocalÁöÑÂºïÁî®ÔºåË¢´‰º†ÈÄíÁªôWeakReferenceÁöÑÊûÑÈÄ†ÊñπÊ≥ï Entry(ThreadLocal&lt;?&gt; k, Object v) &#123; super(k); value = v; &#125;&#125;//WeakReferenceÊûÑÈÄ†ÊñπÊ≥ï(public class WeakReference&lt;T&gt; extends Reference&lt;T&gt; )public WeakReference(T referent) &#123; super(referent); //referentÔºöThreadLocalÁöÑÂºïÁî®&#125;//ReferenceÊûÑÈÄ†ÊñπÊ≥ï Reference(T referent) &#123; this(referent, null);//referentÔºöThreadLocalÁöÑÂºïÁî®&#125;Reference(T referent, ReferenceQueue&lt;? super T&gt; queue) &#123; this.referent = referent; this.queue = (queue == null) ? ReferenceQueue.NULL : queue;&#125; ‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫ÔºåÂΩìÂâçThreadLocalÁöÑÂºïÁî®kË¢´‰º†ÈÄíÁªôWeakReferenceÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÊâÄ‰ª•ThreadLocalMap‰∏≠ÁöÑkey‰∏∫ThreadLocalÁöÑÂº±ÂºïÁî®„ÄÇÂΩì‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®ThreadLocalÁöÑsetÊñπÊ≥ïËÆæÁΩÆÂèòÈáèÁöÑÊó∂ÂÄôÔºåÂΩìÂâçÁ∫øÁ®ãÁöÑThreadLocalMapÂ∞±‰ºöÂ≠òÊîæ‰∏Ä‰∏™ËÆ∞ÂΩïÔºåËøô‰∏™ËÆ∞ÂΩïÁöÑkeyÂÄº‰∏∫ThreadLocalÁöÑÂº±ÂºïÁî®ÔºåvalueÂ∞±ÊòØÈÄöËøásetËÆæÁΩÆÁöÑÂÄº„ÄÇÂ¶ÇÊûúÂΩìÂâçÁ∫øÁ®ã‰∏ÄÁõ¥Â≠òÂú®‰∏îÊ≤°ÊúâË∞ÉÁî®ËØ•ThreadLocalÁöÑremoveÊñπÊ≥ïÔºåÂ¶ÇÊûúËøô‰∏™Êó∂ÂÄôÂà´ÁöÑÂú∞ÊñπËøòÊúâÂØπThreadLocalÁöÑÂºïÁî®ÔºåÈÇ£‰πàÂΩìÂâçÁ∫øÁ®ã‰∏≠ÁöÑThreadLocalMap‰∏≠‰ºöÂ≠òÂú®ÂØπThreadLocalÂèòÈáèÁöÑÂºïÁî®ÂíåvalueÂØπË±°ÁöÑÂºïÁî®ÔºåÊòØ‰∏ç‰ºöÈáäÊîæÁöÑÔºåÂ∞±‰ºöÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ ËÄÉËôëËøô‰∏™ThreadLocalÂèòÈáèÊ≤°ÊúâÂÖ∂‰ªñÂº∫‰æùËµñÔºåÂ¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãËøòÂ≠òÂú®ÔºåÁî±‰∫éÁ∫øÁ®ãÁöÑThreadLocalMapÈáåÈù¢ÁöÑkeyÊòØÂº±ÂºïÁî®ÔºåÊâÄ‰ª•ÂΩìÂâçÁ∫øÁ®ãÁöÑThreadLocalMapÈáåÈù¢ÁöÑThreadLocalÂèòÈáèÁöÑÂº±ÂºïÁî®Âú®gcÁöÑÊó∂ÂÄôÂ∞±Ë¢´ÂõûÊî∂Ôºå‰ΩÜÊòØÂØπÂ∫îÁöÑvalueËøòÊòØÂ≠òÂú®ÁöÑËøôÂ∞±ÂèØËÉΩÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÊºè(Âõ†‰∏∫Ëøô‰∏™Êó∂ÂÄôThreadLocalMap‰ºöÂ≠òÂú®key‰∏∫null‰ΩÜÊòØvalue‰∏ç‰∏∫nullÁöÑentryÈ°π)„ÄÇ ÊÄªÁªìÔºöTHreadLocalMap‰∏≠ÁöÑEntryÁöÑkey‰ΩøÁî®ÁöÑÊòØThreadLocalÂØπË±°ÁöÑÂº±ÂºïÁî®ÔºåÂú®Ê≤°ÊúâÂÖ∂‰ªñÂú∞ÊñπÂØπThreadLoca‰æùËµñÔºåThreadLocalMap‰∏≠ÁöÑThreadLocalÂØπË±°Â∞±‰ºöË¢´ÂõûÊî∂ÊéâÔºå‰ΩÜÊòØÂØπÂ∫îÁöÑ‰∏ç‰ºöË¢´ÂõûÊî∂ÔºåËøô‰∏™Êó∂ÂÄôMap‰∏≠Â∞±ÂèØËÉΩÂ≠òÂú®key‰∏∫null‰ΩÜÊòØvalue‰∏ç‰∏∫nullÁöÑÈ°πÔºåËøôÈúÄË¶ÅÂÆûÈôÖÁöÑÊó∂ÂÄô‰ΩøÁî®ÂÆåÊØïÂèäÊó∂Ë∞ÉÁî®removeÊñπÊ≥ïÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis‰∏∫‰ªÄ‰πàËøô‰πàÂø´]]></title>
    <url>%2Fposts%2F8b544b71.html</url>
    <content type="text"><![CDATA[ÂâçË®Ä RedisÊú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™Âü∫‰∫éÈîÆÂÄºÂØπ(Key-Value)Á±ªÂûãÁöÑÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÔºåRedisÁöÑValueÂèØ‰ª•Áî±StringÔºåhashÔºålistÔºåsetÔºåzsetÔºåBitmapsÔºåHyperLogLogÁ≠âÂ§öÁßçÊï∞ÊçÆÁªìÊûÑÂíåÁÆóÊ≥ïÁªÑÊàê„ÄÇÊï¥‰∏™Êï∞ÊçÆÂ∫ìÁªüÁªüÂä†ËΩΩÂú®ÂÜÖÂ≠òÂΩì‰∏≠ËøõË°åÊìç‰ΩúÔºåÂÆöÊúüÈÄöËøáÂºÇÊ≠•Êìç‰ΩúÊääÊï∞ÊçÆÂ∫ìÊï∞ÊçÆflushÂà∞Á°¨Áõò‰∏äËøõË°å‰øùÂ≠ò„ÄÇÂõ†‰∏∫ÊòØÁ∫ØÂÜÖÂ≠òÊìç‰ΩúÔºåRedisÁöÑÊÄßËÉΩÈùûÂ∏∏Âá∫Ëâ≤ÔºåÊØèÁßíÂèØ‰ª•Â§ÑÁêÜË∂ÖËøá 10‰∏áÊ¨°ËØªÂÜôÊìç‰ΩúÔºåÊòØÂ∑≤Áü•ÊÄßËÉΩÊúÄÂø´ÁöÑKey-Value DB„ÄÇÂèØÁî®‰∫éÁºìÂ≠ò„ÄÅ‰∫ã‰ª∂ÂèëÂ∏ÉÊàñËÆ¢ÈòÖ„ÄÅÈ´òÈÄüÈòüÂàóÁ≠âÂú∫ÊôØ„ÄÇËØ•Êï∞ÊçÆÂ∫ì‰ΩøÁî®ANSI CËØ≠Ë®ÄÁºñÂÜôÔºåÊîØÊåÅÁΩëÁªúÔºåÊèê‰æõÂ≠óÁ¨¶‰∏≤„ÄÅÂìàÂ∏å„ÄÅÂàóË°®„ÄÅÈòüÂàó„ÄÅÈõÜÂêàÁªìÊûÑÁõ¥Êé•Â≠òÂèñÔºåÂü∫‰∫éÂÜÖÂ≠òÔºåÂèØÊåÅ‰πÖÂåñ„ÄÇRedis ÂÜÖÁΩÆ‰∫Ü Â§çÂà∂ÔºàreplicationÔºâÔºåLUAËÑöÊú¨ÔºàLua scriptingÔºâÔºå LRUÈ©±Âä®‰∫ã‰ª∂ÔºàLRU evictionÔºâÔºå‰∫ãÂä°ÔºàtransactionsÔºâ Âíå‰∏çÂêåÁ∫ßÂà´ÁöÑ Á£ÅÁõòÊåÅ‰πÖÂåñÔºàpersistenceÔºâÔºå Âπ∂ÈÄöËøá RedisÂì®ÂÖµÔºàSentinelÔºâÂíåËá™Âä® ÂàÜÂå∫ÔºàClusterÔºâÊèê‰æõÈ´òÂèØÁî®ÊÄßÔºàhigh availabilityÔºâ„ÄÇ ÂÆòÊñπÁªôÂá∫ÁöÑÊÄßËÉΩÂèØ‰ª•ËææÂà∞10W+qpsÔºåÈÇ£‰πàRedisÂà∞Â∫ïÂø´Âú®Âì™Âë¢Ôºü ÂºÄÂèëËØ≠Ë®Ä Áé∞Âú®Êàë‰ª¨ÈÉΩÁî®È´òÁ∫ßËØ≠Ë®ÄÊù•ÁºñÁ®ãÔºåÊØîÂ¶ÇJava„ÄÅpythonÁ≠â„ÄÇ‰πüËÆ∏‰Ω†‰ºöËßâÂæóCËØ≠Ë®ÄÂæàÂè§ËÄÅÔºå‰ΩÜÊòØÂÆÉÁúüÁöÑÂæàÊúâÁî®ÔºåÊØïÁ´üunixÁ≥ªÁªüÂ∞±ÊòØÁî®CÂÆûÁé∞ÁöÑÔºåÊâÄ‰ª•CËØ≠Ë®ÄÊòØÈùûÂ∏∏Ë¥¥ËøëÊìç‰ΩúÁ≥ªÁªüÁöÑËØ≠Ë®Ä„ÄÇRedisÂ∞±ÊòØÁî®CËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÊâÄ‰ª•ÊâßË°å‰ºöÊØîËæÉÂø´„ÄÇ Á∫ØÂÜÖÂ≠òËÆøÈóÆ RedisÂ∞ÜÊâÄÊúâÊï∞ÊçÆÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÈùûÊï∞ÊçÆÂêåÊ≠•Ê≠£Â∏∏Â∑•‰Ωú‰∏≠ÔºåÊòØ‰∏çÈúÄË¶Å‰ªéÁ£ÅÁõòËØªÂèñÊï∞ÊçÆÁöÑÔºå0Ê¨°IO„ÄÇÂÜÖÂ≠òÂìçÂ∫îÊó∂Èó¥Â§ßÁ∫¶‰∏∫100Á∫≥ÁßíÔºåËøôÊòØRedisÈÄüÂ∫¶Âø´ÁöÑÈáçË¶ÅÂü∫Á°Ä„ÄÇ ÂçïÁ∫øÁ®ã Á¨¨‰∏ÄÔºåÂçïÁ∫øÁ®ãÁÆÄÂåñÁÆóÊ≥ïÁöÑÂÆûÁé∞ÔºåÂπ∂ÂèëÁöÑÊï∞ÊçÆÁªìÊûÑÂÆûÁé∞‰∏ç‰ΩÜÂõ∞Èöæ‰∏îÊµãËØï‰πüÈ∫ªÁÉ¶„ÄÇ Á¨¨‰∫åÔºåÂçïÁ∫øÁ®ãÈÅøÂÖç‰∫ÜÁ∫øÁ®ãÂàáÊç¢‰ª•ÂèäÂä†ÈîÅÈáäÊîæÈîÅÂ∏¶Êù•ÁöÑÊ∂àËÄóÔºåÂØπ‰∫éÊúçÂä°Á´ØÂºÄÂèëÊù•ËØ¥ÔºåÈîÅÂíåÁ∫øÁ®ãÂàáÊç¢ÈÄöÂ∏∏ÊòØÊÄßËÉΩÊùÄÊâã„ÄÇ ÂΩìÁÑ∂‰∫ÜÔºåÂçïÁ∫øÁ®ã‰πü‰ºöÊúâÂÆÉÁöÑÁº∫ÁÇπÔºå‰πüÊòØRedisÁöÑÂô©Ê¢¶ÔºöÈòªÂ°û„ÄÇÂ¶ÇÊûúÊâßË°å‰∏Ä‰∏™ÂëΩ‰ª§ËøáÈïøÔºåÈÇ£‰πà‰ºöÈÄ†ÊàêÂÖ∂‰ªñÂëΩ‰ª§ÁöÑÈòªÂ°ûÔºåÂØπ‰∫éRedisÊòØÂçÅÂàÜËá¥ÂëΩÁöÑÔºåÊâÄ‰ª•RedisÊòØÈù¢ÂêëÂø´ÈÄüÊâßË°åÂú∫ÊôØÁöÑÊï∞ÊçÆÂ∫ì„ÄÇ Èô§‰∫ÜRedis‰πãÂ§ñÔºåNode.js‰πüÊòØÂçïÁ∫øÁ®ãÔºåNginx‰πüÊòØÂçïÁ∫øÁ®ãÔºå‰ΩÜ‰ªñ‰ª¨ÈÉΩÊòØÊúçÂä°Âô®È´òÊÄßËÉΩÁöÑÂÖ∏ËåÉ„ÄÇ ÈùûÈòªÂ°ûÂ§öË∑ØI/OÂ§çÁî®Êú∫Âà∂ ÂÖàËØ¥‰∏Ä‰∏ã‰º†ÁªüÁöÑÈòªÂ°ûI/OÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÔºö ÂΩì‰ΩøÁî®readÊàñËÄÖwriteÂØπÊüê‰∏ÄÊñá‰ª∂ÊèèËø∞Á¨¶ÔºàFile Descriptor FDÔºâËøõË°åËØªÂÜôÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÊï∞ÊçÆÊ≤°ÊúâÊî∂Âà∞ÔºåÈÇ£‰πàËØ•Á∫øÁ®ã‰ºöË¢´ÊåÇËµ∑ÔºåÁõ¥Âà∞Êî∂Âà∞Êï∞ÊçÆ„ÄÇÈòªÂ°ûÊ®°ÂûãËôΩÁÑ∂Êòì‰∫éÁêÜËß£Ôºå‰ΩÜÊòØÂú®ÈúÄË¶ÅÂ§ÑÁêÜÂ§ö‰∏™ÂÆ¢Êà∑Á´Ø‰ªªÂä°ÁöÑÊó∂ÂÄôÔºå‰∏ç‰ºö‰ΩøÁî®ÈòªÂ°ûÊ®°Âûã„ÄÇ I/OÂ§öË∑ØÂ§çÁî®ÂÆûÈôÖ‰∏äÊòØÊåáÂ§ö‰∏™ËøûÊé•ÁöÑ**ÁÆ°ÁêÜÂèØ‰ª•Âú®Âêå‰∏ÄËøõÁ®ã„ÄÇ**Â§öË∑ØÊòØÊåáÁΩëÁªúËøûÊé•ÔºåÂ§çÁî®Âè™ÊòØÂêå‰∏Ä‰∏™Á∫øÁ®ã„ÄÇÂú®ÁΩëÁªúÊúçÂä°‰∏≠ÔºåI/OÂ§öË∑ØÂ§çÁî®Ëµ∑ÁöÑ‰ΩúÁî®ÊòØ‰∏ÄÊ¨°ÊÄßÊääÂ§ö‰∏™ËøûÊé•ÁöÑ‰∫ã‰ª∂ÈÄöÁü•‰∏öÂä°‰ª£Á†ÅÂ§ÑÁêÜÔºåÂ§ÑÁêÜÁöÑÊñπÂºèÁî±‰∏öÂä°‰ª£Á†ÅÊù•ÂÜ≥ÂÆö„ÄÇÂú®I/OÂ§öË∑ØÂ§çÁî®Ê®°Âûã‰∏≠ÔºåÊúÄÈáçË¶ÅÁöÑÂáΩÊï∞Ë∞ÉÁî®Â∞±ÊòØI/O Â§öË∑ØÂ§çÁî®ÂáΩÊï∞ÔºåËØ•ÊñπÊ≥ïËÉΩÂêåÊó∂ÁõëÊéßÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºàfdÔºâÁöÑËØªÂÜôÊÉÖÂÜµÔºåÂΩìÂÖ∂‰∏≠ÁöÑÊüê‰∫õfdÂèØËØª/ÂÜôÊó∂ÔºåËØ•ÊñπÊ≥ïÂ∞±‰ºöËøîÂõûÂèØËØª/ÂÜôÁöÑfd‰∏™Êï∞„ÄÇ Redis‰ΩøÁî®epoll‰Ωú‰∏∫I/OÂ§öË∑ØÂ§çÁî®ÊäÄÊúØÁöÑÂÆûÁé∞ÔºåÂÜçÂä†‰∏äRedisËá™Ë∫´ÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÊ®°ÂûãÂ∞ÜepollÁöÑread„ÄÅwrite„ÄÅcloseÁ≠âÈÉΩËΩ¨Êç¢Êàê‰∫ã‰ª∂Ôºå‰∏çÂú®ÁΩëÁªúI/O‰∏äÊµ™Ë¥πËøáÂ§öÁöÑÊó∂Èó¥„ÄÇÂÆûÁé∞ÂØπÂ§ö‰∏™FDËØªÂÜôÁöÑÁõëÊéßÔºåÊèêÈ´òÊÄßËÉΩ„ÄÇ ‰∏æ‰∏™‰æãÂ≠ê:ÊØîÂ¶Ç‰∏Ä‰∏™tcpÊúçÂä°Âô®Â§ÑÁêÜ20‰∏™ÂÆ¢Êà∑Á´Øsocket„ÄÇ AÊñπÊ°àÔºöÈ°∫Â∫èÂ§ÑÁêÜÔºåÂ¶ÇÊûúÁ¨¨‰∏Ä‰∏™socketÂõ†‰∏∫ÁΩëÂç°ËØªÊï∞ÊçÆÂ§ÑÁêÜÊÖ¢‰∫ÜÔºå‰∏ÄÈòªÂ°ûÔºåÂêéÈù¢ÈÉΩÁé©ËõãÂéª„ÄÇ BÊñπÊ°àÔºöÊØè‰∏™socketËØ∑Ê±ÇÈÉΩÂàõÂª∫‰∏Ä‰∏™ÂàÜË∫´Â≠êËøõÁ®ãÊù•Â§ÑÁêÜÔºå‰∏çËØ¥ÊØè‰∏™ËøõÁ®ãÊ∂àËÄóÂ§ßÈáèÁ≥ªÁªüËµÑÊ∫êÔºåÂÖâÊòØËøõÁ®ãÂàáÊç¢Â∞±Â§üÊìç‰ΩúÁ≥ªÁªüÁ¥ØÁöÑ‰∫Ü„ÄÇ CÊñπÊ°à**ÔºàI/OÂ§çÁî®Ê®°ÂûãÔºåepollÔºâÔºöÂ∞ÜÁî®Êà∑socketÂØπÂ∫îÁöÑfdÊ≥®ÂÜåËøõepollÔºàÂÆûÈôÖ‰∏äÊúçÂä°Âô®ÂíåÊìç‰ΩúÁ≥ªÁªü‰πãÈó¥‰º†ÈÄíÁöÑ‰∏çÊòØsocketÁöÑfdËÄåÊòØfd_setÁöÑÊï∞ÊçÆÁªìÊûÑÔºâÔºåÁÑ∂ÂêéepollÂè™ÂëäËØâÂì™‰∫õÈúÄË¶ÅËØª/ÂÜôÁöÑsocketÔºåÂè™ÈúÄË¶ÅÂ§ÑÁêÜÈÇ£‰∫õÊ¥ªË∑ÉÁöÑ„ÄÅÊúâÂèòÂåñÁöÑsocket fdÁöÑÂ∞±Â•Ω‰∫Ü„ÄÇËøôÊ†∑ÔºåÊï¥‰∏™ËøáÁ®ãÂè™Âú®Ë∞ÉÁî®epollÁöÑÊó∂ÂÄôÊâç‰ºöÈòªÂ°ûÔºåÊî∂ÂèëÂÆ¢Êà∑Ê∂àÊÅØÊòØ‰∏ç‰ºöÈòªÂ°ûÁöÑ„ÄÇ**]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis - Â∏∏Áî®Êï∞ÊçÆÁ±ªÂûãÂèäÂëΩ‰ª§]]></title>
    <url>%2Fposts%2F2853eeb9.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ Redis‰∏≠Â≠òÂÇ®Êï∞ÊçÆÊòØÈÄöËøákey-valueÊ†ºÂºèÂ≠òÂÇ®Êï∞ÊçÆÁöÑÔºåÂÖ∂‰∏≠valueÂèØ‰ª•ÂÆö‰πâ‰∫îÁßçÊï∞ÊçÆÁ±ªÂûãÔºö StringÔºàÂ≠óÁ¨¶Á±ªÂûãÔºâ HashÔºàÊï£ÂàóÁ±ªÂûãÔºâ ListÔºàÂàóË°®Á±ªÂûãÔºâ SetÔºàÈõÜÂêàÁ±ªÂûãÔºâ SortedSetÔºàÊúâÂ∫èÈõÜÂêàÁ±ªÂûãÔºåÁÆÄÁß∞zsetÔºâ Ê≥®ÊÑèÔºöÂú®redis‰∏≠ÁöÑÂëΩ‰ª§ËØ≠Âè•‰∏≠ÔºåÂëΩ‰ª§ÊòØÂøΩÁï•Â§ßÂ∞èÂÜôÁöÑÔºåËÄåkeyÊòØ‰∏çÂøΩÁï•Â§ßÂ∞èÂÜôÁöÑ„ÄÇ StringÁ±ªÂûã ËµãÂÄº ËØ≠Ê≥ïÔºöset key value 12127.0.0.1:6379&gt; set k1 v1OK ÂèñÂÄº ËØ≠Ê≥ïÔºöget key 12127.0.0.1:6379&gt; get k1&quot;v1&quot; ÂèñÂÄºÂπ∂ËµãÂÄº ËØ≠Ê≥ïÔºögetset key value 1234127.0.0.1:6379&gt; getset k1 v2&quot;v1&quot;127.0.0.1:6379&gt; get k1&quot;v2&quot; ÈÄíÂ¢ûÊï∞Â≠ó ËØ≠Ê≥ïÔºöINCR key 123456127.0.0.1:6379&gt; incr num(integer) 1127.0.0.1:6379&gt; incr num(integer) 2127.0.0.1:6379&gt; incr num(integer) 3 Â¢ûÂä†ÊåáÂÆöÁöÑÊï¥Êï∞ ËØ≠Ê≥ïÔºöINCRBY key increment 123456127.0.0.1:6379&gt; incrby num 2(integer) 5127.0.0.1:6379&gt; incrby num 2(integer) 7127.0.0.1:6379&gt; incrby num 2(integer) 9 ÈÄíÂáèÊï∞ÂÄº ËØ≠Ê≥ïÔºöDECR key 1234 127.0.0.1:6379&gt; decr num(integer) 9127.0.0.1:6379&gt; decr num(integer) 8 ÂáèÂ∞ëÊåáÂÆöÁöÑÊï¥Êï∞ ËØ≠Ê≥ïÔºöDECRBY key decrement 12345678127.0.0.1:6379&gt; decr num(integer) 6127.0.0.1:6379&gt; decr num(integer) 5127.0.0.1:6379&gt; decrby num 3(integer) 2127.0.0.1:6379&gt; decrby num 3(integer) -1 ‰ªÖÂΩì‰∏çÂ≠òÂú®Êó∂ËµãÂÄº ËØ≠Ê≥ïÔºösetnx key value 12345678redis&gt; EXISTS k1 # k1 ‰∏çÂ≠òÂú®(integer) 0redis&gt; SETNX k1 &quot;v1&quot; # k1ËÆæÁΩÆÊàêÂäü(integer) 1redis&gt; SETNX k1 &quot;v2&quot; # Â∞ùËØïË¶ÜÁõñ k1ÔºåÂ§±Ë¥•(integer) 0redis&gt; GET k1 # Ê≤°ÊúâË¢´Ë¶ÜÁõñ&quot;v1&quot; ÂêëÂ∞æÈÉ®ËøΩÂä†ÂÄº APPENDÂëΩ‰ª§ÔºåÂêëÈîÆÂÄºÁöÑÊú´Â∞æËøΩÂä†value„ÄÇÂ¶ÇÊûúÈîÆ‰∏çÂ≠òÂú®ÂàôÂ∞ÜËØ•ÈîÆÁöÑÂÄºËÆæÁΩÆ‰∏∫valueÔºåÂç≥Áõ∏ÂΩì‰∫é SET key value„ÄÇËøîÂõûÂÄºÊòØËøΩÂä†ÂêéÂ≠óÁ¨¶‰∏≤ÁöÑÊÄªÈïøÂ∫¶„ÄÇ ËØ≠Ê≥ïÔºöAPPEND key value 123456127.0.0.1:6379&gt; set str helloOK127.0.0.1:6379&gt; append str &quot; world!&quot;(integer) 12127.0.0.1:6379&gt; get str &quot;hello world!&quot; Ëé∑ÂèñÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ STRLENÂëΩ‰ª§ÔºåËøîÂõûÈîÆÂÄºÁöÑÈïøÂ∫¶ÔºåÂ¶ÇÊûúÈîÆ‰∏çÂ≠òÂú®ÂàôËøîÂõû0„ÄÇ ËØ≠Ê≥ïÔºöSTRLEN key 123456127.0.0.1:6379&gt; strlen str (integer) 0127.0.0.1:6379&gt; set str helloOK127.0.0.1:6379&gt; strlen str (integer) 5 ÂêåÊó∂ËÆæÁΩÆ/Ëé∑ÂèñÂ§ö‰∏™ÈîÆÂÄº ËØ≠Ê≥ïÔºö MSET key value [key value ‚Ä¶] MGET key [key ‚Ä¶] 1234567127.0.0.1:6379&gt; mset k1 v1 k2 v2 k3 v3OK127.0.0.1:6379&gt; get k1&quot;v1&quot;127.0.0.1:6379&gt; mget k1 k31) &quot;v1&quot;2) &quot;v3&quot; HashÁ±ªÂûã hashÂè´Êï£ÂàóÁ±ªÂûãÔºåÂÆÉÊèê‰æõ‰∫ÜÂ≠óÊÆµÂíåÂ≠óÊÆµÂÄºÁöÑÊò†Â∞Ñ„ÄÇÂ≠óÊÆµÂÄºÂè™ËÉΩÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºå‰∏çÊîØÊåÅÊï£ÂàóÁ±ªÂûã„ÄÅÈõÜÂêàÁ±ªÂûãÁ≠âÂÖ∂ÂÆÉÁ±ªÂûã„ÄÇÂ¶Ç‰∏ãÔºö ËµãÂÄº HSETÂëΩ‰ª§‰∏çÂå∫ÂàÜÊèíÂÖ•ÂíåÊõ¥Êñ∞Êìç‰ΩúÔºåÂΩìÊâßË°åÊèíÂÖ•Êìç‰ΩúÊó∂HSETÂëΩ‰ª§ËøîÂõû1ÔºåÂΩìÊâßË°åÊõ¥Êñ∞Êìç‰ΩúÊó∂0„ÄÇ ‰∏ÄÊ¨°Âè™ËÉΩËÆæÁΩÆ‰∏Ä‰∏™Â≠óÊÆµÂÄº ËØ≠Ê≥ïÔºöHSET key field value 12127.0.0.1:6379&gt; hset user username zhangsan (integer) 1 ‰∏ÄÊ¨°ÂèØ‰ª•ËÆæÁΩÆÂ§ö‰∏™Â≠óÊÆµÂÄº ËØ≠Ê≥ïÔºöHMSET key field value [field value ...] 12127.0.0.1:6379&gt; hmset user age 20 username lisi OK ÂΩìÂÄº‰∏çÂ≠òÂú®ÊâçËµãÂÄº ÂΩìÂ≠óÊÆµ‰∏çÂ≠òÂú®Êó∂ËµãÂÄºÔºåÁ±ª‰ººHSETÔºåÂå∫Âà´Âú®‰∫éÂ¶ÇÊûúÂ≠óÊÆµÂ≠òÂú®ÔºåËØ•ÂëΩ‰ª§‰∏çÊâßË°å‰ªª‰ΩïÊìç‰Ωú ËØ≠Ê≥ïÔºöHSETNX key field value 12127.0.0.1:6379&gt; hsetnx user age 30 (integer) 0 Â¶ÇÊûúuser‰∏≠Ê≤°ÊúâageÂ≠óÊÆµÂàôËÆæÁΩÆageÂÄº‰∏∫30ÔºåÂê¶Âàô‰∏çÂÅö‰ªª‰ΩïÊìç‰Ωú ÂèñÂÄº ‰∏ÄÊ¨°Âè™ËÉΩËé∑Âèñ‰∏Ä‰∏™Â≠óÊÆµÂÄº ËØ≠Ê≥ïÔºöHGET key field 12127.0.0.1:6379&gt; hget user username&quot;lisi‚Äú ‰∏ÄÊ¨°ÂèØ‰ª•Ëé∑ÂèñÂ§ö‰∏™Â≠óÊÆµÂÄº ËØ≠Ê≥ïÔºöHMGET key field [field ...] 123127.0.0.1:6379&gt; hmget user age username1) &quot;20&quot;2) &quot;lisi&quot; Ëé∑ÂèñÊâÄÊúâÂ≠óÊÆµÂÄº ËØ≠Ê≥ïÔºöHGETALL key 12345127.0.0.1:6379&gt; hgetall user1) &quot;age&quot;2) &quot;20&quot;3) &quot;username&quot;4) &quot;lisi&quot; Âà†Èô§Â≠óÊÆµ ÂèØ‰ª•Âà†Èô§‰∏Ä‰∏™ÊàñÂ§ö‰∏™Â≠óÊÆµÔºåËøîÂõûÂÄºÊòØË¢´Âà†Èô§ÁöÑÂ≠óÊÆµ‰∏™Êï∞ ËØ≠Ê≥ïÔºöHDEL key field [field ...] 123456127.0.0.1:6379&gt; hdel user age(integer) 1127.0.0.1:6379&gt; hdel user age name(integer) 0127.0.0.1:6379&gt; hdel user age username(integer) 1 Â¢ûÂä†Êï∞Â≠ó ËØ≠Ê≥ïÔºöHINCRBY key field increment 123456#Â∞ÜÁî®Êà∑ÁöÑÂπ¥ÈæÑÂä†2127.0.0.1:6379&gt; hincrby user age 2 (integer) 22#Ëé∑ÂèñÁî®Êà∑ÁöÑÂπ¥ÈæÑ127.0.0.1:6379&gt; hget user age &quot;22&quot; Âà§Êñ≠Â≠óÊÆµÊòØÂê¶Â≠òÂú® ËØ≠Ê≥ïÔºöHEXISTS key field 123456#Êü•Áúãuser‰∏≠ÊòØÂê¶ÊúâageÂ≠óÊÆµ127.0.0.1:6379&gt; hexists user age (integer) 1#Êü•Áúãuser‰∏≠ÊòØÂê¶ÊúânameÂ≠óÊÆµ127.0.0.1:6379&gt; hexists user name (integer) 0 Âè™Ëé∑ÂèñÂ≠óÊÆµÂêçÊàñÂ≠óÊÆµÂÄº ËØ≠Ê≥ïÔºö 12HKEYS keyHVALS key 12345678127.0.0.1:6379&gt; hmset user age 20 name lisi OK127.0.0.1:6379&gt; hkeys user1) &quot;age&quot;2) &quot;name&quot;127.0.0.1:6379&gt; hvals user1) &quot;20&quot;2) &quot;lisi&quot; Ëé∑ÂèñÂ≠óÊÆµÊï∞Èáè ËØ≠Ê≥ïÔºöHLEN key 12127.0.0.1:6379&gt; hlen user(integer) 2 Ëé∑ÂèñÊâÄÊúâÂ≠óÊÆµ ‰ΩúÁî®ÔºöËé∑ÂæóhashÁöÑÊâÄÊúâ‰ø°ÊÅØÔºåÂåÖÊã¨keyÂíåvalue ËØ≠Ê≥ïÔºöhgetall key ListÁ±ªÂûã RedisÁöÑÂàóË°®Á±ªÂûãÔºàlistÔºâÂèØ‰ª•Â≠òÂÇ®‰∏Ä‰∏™ÊúâÂ∫èÁöÑÂ≠óÁ¨¶‰∏≤ÂàóË°®ÔºåÂ∏∏Áî®ÁöÑÊìç‰ΩúÊòØÂêëÂàóË°®‰∏§Á´ØÊ∑ªÂä†ÂÖÉÁ¥†ÔºåÊàñËÄÖËé∑ÂæóÂàóË°®ÁöÑÊüê‰∏Ä‰∏™ÁâáÊÆµ„ÄÇ ÂàóË°®Á±ªÂûãÂÜÖÈÉ®ÊòØ‰ΩøÁî®**ÂèåÂêëÈìæË°®Ôºàdouble linked listÔºâ**ÂÆûÁé∞ÁöÑÔºåÊâÄ‰ª•ÂêëÂàóË°®‰∏§Á´ØÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(1)ÔºåËé∑ÂèñË∂äÊé•Ëøë‰∏§Á´ØÁöÑÂÖÉÁ¥†ÈÄüÂ∫¶Â∞±Ë∂äÂø´„ÄÇËøôÊÑèÂë≥ÁùÄÂç≥‰ΩøÊòØ‰∏Ä‰∏™ÊúâÂá†ÂçÉ‰∏á‰∏™ÂÖÉÁ¥†ÁöÑÂàóË°®ÔºåËé∑ÂèñÂ§¥ÈÉ®ÊàñÂ∞æÈÉ®ÁöÑ10Êù°ËÆ∞ÂΩï‰πüÊòØÊûÅÂø´ÁöÑ„ÄÇ ÂêëÂàóË°®Â∑¶ËæπÂ¢ûÂä†ÂÖÉÁ¥† ËØ≠Ê≥ïÔºöLPUSH key value [value ...] 12127.0.0.1:6379&gt; lpush list:1 1 2 3(integer) 3 ÂêëÂàóË°®Âè≥ËæπÂ¢ûÂä†ÂÖÉÁ¥† ËØ≠Ê≥ïÔºöRPUSH key value [value ...] 12127.0.0.1:6379&gt; rpush list:1 4 5 6(integer) 6 Êü•ÁúãÂàóË°® ËØ≠Ê≥ïÔºöLRANGE key start stop LRANGEÂëΩ‰ª§ÊòØÂàóË°®Á±ªÂûãÊúÄÂ∏∏Áî®ÁöÑÂëΩ‰ª§‰πã‰∏ÄÔºåËé∑ÂèñÂàóË°®‰∏≠ÁöÑÊüê‰∏ÄÁâáÊÆµÔºåÂ∞ÜËøîÂõûstart„ÄÅstop‰πãÈó¥ÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºàÂåÖÂê´‰∏§Á´ØÁöÑÂÖÉÁ¥†ÔºâÔºåÁ¥¢Âºï‰ªé0ÂºÄÂßã„ÄÇÁ¥¢ÂºïÂèØ‰ª•ÊòØË¥üÊï∞ÔºåÂ¶ÇÔºö‚Äú-1‚Äù‰ª£Ë°®ÊúÄÂêéËæπÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ 1234127.0.0.1:6379&gt; lrange list:1 0 21) &quot;3&quot;2) &quot;2&quot;3) &quot;1&quot; ‰ªéÂàóË°®‰∏§Á´ØÂºπÂá∫ÂÖÉÁ¥† LPOPÂëΩ‰ª§‰ªéÂàóË°®Â∑¶ËæπÂºπÂá∫‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå‰ºöÂàÜ‰∏§Ê≠•ÂÆåÊàêÔºö Á¨¨‰∏ÄÊ≠•ÊòØÂ∞ÜÂàóË°®Â∑¶ËæπÁöÑÂÖÉÁ¥†‰ªéÂàóË°®‰∏≠ÁßªÈô§ Á¨¨‰∫åÊ≠•ÊòØËøîÂõûË¢´ÁßªÈô§ÁöÑÂÖÉÁ¥†ÂÄº„ÄÇ ËØ≠Ê≥ïÔºö 123LPOP keyRPOP key 1234127.0.0.1:6379&gt; lpop list:1&quot;3&quot;127.0.0.1:6379&gt; rpop list:1&quot;6&quot; Ëé∑ÂèñÂàóË°®‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ ËØ≠Ê≥ïÔºöLLEN key 12127.0.0.1:6379&gt; llen list:1(integer) 4 Âà†Èô§ÂàóË°®‰∏≠ÊåáÂÆö‰∏™Êï∞ÁöÑÂÄº LREMÂëΩ‰ª§‰ºöÂà†Èô§ÂàóË°®‰∏≠Ââçcount‰∏™ÂÄº‰∏∫valueÁöÑÂÖÉÁ¥†ÔºåËøîÂõûÂÆûÈôÖÂà†Èô§ÁöÑÂÖÉÁ¥†‰∏™Êï∞„ÄÇÊ†πÊçÆcountÂÄºÁöÑ‰∏çÂêåÔºåËØ•ÂëΩ‰ª§ÁöÑÊâßË°åÊñπÂºè‰ºöÊúâÊâÄ‰∏çÂêåÔºö ÂΩìcount&gt;0Êó∂Ôºå LREM‰ºö‰ªéÂàóË°®Â∑¶ËæπÂºÄÂßãÂà†Èô§„ÄÇ ÂΩìcount&lt;0Êó∂Ôºå LREM‰ºö‰ªéÂàóË°®ÂêéËæπÂºÄÂßãÂà†Èô§„ÄÇ ÂΩìcount=0Êó∂Ôºå LREMÂà†Èô§ÊâÄÊúâÂÄº‰∏∫valueÁöÑÂÖÉÁ¥†„ÄÇ ËØ≠Ê≥ïÔºöLREM key count value Ëé∑ÂæóÊåáÂÆöÁ¥¢ÂºïÁöÑÂÖÉÁ¥†ÂÄº ËØ≠Ê≥ïÔºöLINDEX key index 12127.0.0.1:6379&gt; lindex list:1 2&quot;4&quot; ËÆæÁΩÆÊåáÂÆöÁ¥¢ÂºïÁöÑÂÖÉÁ¥†ÂÄº ËØ≠Ê≥ïÔºöLSET key index value 1234567127.0.0.1:6379&gt; lset list:1 2 2OK127.0.0.1:6379&gt; lrange list:1 0 -11) &quot;2&quot;2) &quot;1&quot;3) &quot;2&quot;4) &quot;5&quot; Âè™‰øùÁïôÂàóË°®ÊåáÂÆöÁâáÊÆµ, ÊåáÂÆöËåÉÂõ¥ÂíåLRANGE‰∏ÄËá¥ ËØ≠Ê≥ïÔºöLTRIM key start stop 1234567891011127.0.0.1:6379&gt; lrange list:1 0 -11) &quot;2&quot;2) &quot;1&quot;3) &quot;2&quot;4) &quot;5&quot;127.0.0.1:6379&gt; ltrim list:1 0 2OK127.0.0.1:6379&gt; lrange list:1 0 -11) &quot;2&quot;2) &quot;1&quot;3) &quot;2&quot; ÂêëÂàóË°®‰∏≠ÊèíÂÖ•ÂÖÉÁ¥† ËØ•ÂëΩ‰ª§È¶ñÂÖà‰ºöÂú®ÂàóË°®‰∏≠‰ªéÂ∑¶Âà∞Âè≥Êü•ÊâæÂÄº‰∏∫pivotÁöÑÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÊ†πÊçÆÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØBEFOREËøòÊòØAFTERÊù•ÂÜ≥ÂÆöÂ∞ÜvalueÊèíÂÖ•Âà∞ËØ•ÂÖÉÁ¥†ÁöÑÂâçÈù¢ËøòÊòØÂêéÈù¢„ÄÇ ËØ≠Ê≥ïÔºöLINSERT key BEFORE|AFTER pivot value 1234567891011127.0.0.1:6379&gt; lrange list 0 -11) &quot;3&quot;2) &quot;2&quot;3) &quot;1&quot;127.0.0.1:6379&gt; linsert list after 3 4(integer) 4127.0.0.1:6379&gt; lrange list 0 -11) &quot;3&quot;2) &quot;4&quot;3) &quot;2&quot;4) &quot;1&quot; Â∞ÜÂÖÉÁ¥†‰ªé‰∏Ä‰∏™ÂàóË°®ËΩ¨ÁßªÂà∞Âè¶‰∏Ä‰∏™ÂàóË°®‰∏≠ ËØ≠Ê≥ïÔºöRPOPLPUSH source destination 12345678127.0.0.1:6379&gt; rpoplpush list newlist &quot;1&quot;127.0.0.1:6379&gt; lrange newlist 0 -11) &quot;1&quot;127.0.0.1:6379&gt; lrange list 0 -11) &quot;3&quot;2) &quot;4&quot;3) &quot;2&quot; SetÁ±ªÂûã setÁ±ªÂûãÂç≥ÈõÜÂêàÁ±ªÂûãÔºåÂÖ∂‰∏≠ÁöÑÊï∞ÊçÆÊòØ‰∏çÈáçÂ§ç‰∏îÊ≤°ÊúâÈ°∫Â∫è„ÄÇ ÈõÜÂêàÁ±ªÂûãÂíåÂàóË°®Á±ªÂûãÁöÑÂØπÊØîÔºö ÈõÜÂêàÁ±ªÂûãÁöÑÂ∏∏Áî®Êìç‰ΩúÊòØÂêëÈõÜÂêà‰∏≠Âä†ÂÖ•ÊàñÂà†Èô§ÂÖÉÁ¥†„ÄÅÂà§Êñ≠Êüê‰∏™ÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®Á≠âÔºåÁî±‰∫éÈõÜÂêàÁ±ªÂûãÁöÑRedisÂÜÖÈÉ®ÊòØ‰ΩøÁî®ÂÄº‰∏∫Á©∫ÁöÑÊï£ÂàóË°®ÂÆûÁé∞ÔºåÊâÄÊúâËøô‰∫õÊìç‰ΩúÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÉΩ‰∏∫0(1)„ÄÇRedisËøòÊèê‰æõ‰∫ÜÂ§ö‰∏™ÈõÜÂêà‰πãÈó¥ÁöÑ‰∫§ÈõÜ„ÄÅÂπ∂ÈõÜ„ÄÅÂ∑ÆÈõÜÁöÑËøêÁÆó„ÄÇ Â¢ûÂä†/Âà†Èô§ÂÖÉÁ¥† ËØ≠Ê≥ïÔºöSADD key member [member ...] 1234127.0.0.1:6379&gt; sadd set a b c(integer) 3127.0.0.1:6379&gt; sadd set a(integer) 0 ËØ≠Ê≥ïÔºöSREM key member [member ...] 12127.0.0.1:6379&gt; srem set c d(integer) 1 Ëé∑ÂæóÈõÜÂêà‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥† ËØ≠Ê≥ïÔºöSMEMBERS key 123127.0.0.1:6379&gt; smembers set1) &quot;b&quot;2) &quot;a‚Äù Âà§Êñ≠ÂÖÉÁ¥†ÊòØÂê¶Âú®ÈõÜÂêà‰∏≠ ËØ≠Ê≥ïÔºöSISMEMBER key member 1234127.0.0.1:6379&gt; sismember set a(integer) 1127.0.0.1:6379&gt; sismember set h(integer) 0 ÈõÜÂêàËøêÁÆóÂëΩ‰ª§ ÈõÜÂêàÁöÑÂ∑ÆÈõÜËøêÁÆó A-B : Â±û‰∫éAÂπ∂‰∏î‰∏çÂ±û‰∫éBÁöÑÂÖÉÁ¥†ÊûÑÊàêÁöÑÈõÜÂêà„ÄÇ ËØ≠Ê≥ïÔºöSDIFF key [key ...] 12345678127.0.0.1:6379&gt; sadd setA 1 2 3(integer) 3127.0.0.1:6379&gt; sadd setB 2 3 4(integer) 3127.0.0.1:6379&gt; sdiff setA setB 1) &quot;1&quot;127.0.0.1:6379&gt; sdiff setB setA 1) &quot;4&quot; ÈõÜÂêàÁöÑ‰∫§ÈõÜËøêÁÆó A ‚à© B : Â±û‰∫éA‰∏îÂ±û‰∫éBÁöÑÂÖÉÁ¥†ÊûÑÊàêÁöÑÈõÜÂêà„ÄÇ ËØ≠Ê≥ïÔºöSINTER key [key ...] 123127.0.0.1:6379&gt; sinter setA setB 1) &quot;2&quot;2) &quot;3&quot; ÈõÜÂêàÁöÑÂπ∂ÈõÜËøêÁÆó A ‚à™ B : Â±û‰∫éAÊàñËÄÖÂ±û‰∫éBÁöÑÂÖÉÁ¥†ÊûÑÊàêÁöÑÈõÜÂêà ËØ≠Ê≥ïÔºöSUNION key [key ...] 12345127.0.0.1:6379&gt; sunion setA setB1) &quot;1&quot;2) &quot;2&quot;3) &quot;3&quot;4) &quot;4&quot; Ëé∑ÂæóÈõÜÂêà‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ ËØ≠Ê≥ïÔºöSCARD key 123456127.0.0.1:6379&gt; smembers setA 1) &quot;1&quot;2) &quot;2&quot;3) &quot;3&quot;127.0.0.1:6379&gt; scard setA (integer) 3 ‰ªéÈõÜÂêà‰∏≠ÂºπÂá∫‰∏Ä‰∏™ÂÖÉÁ¥† Ê≥®ÊÑèÔºöÁî±‰∫éÈõÜÂêàÊòØÊó†Â∫èÁöÑÔºåÊâÄÊúâSPOPÂëΩ‰ª§‰ºö‰ªéÈõÜÂêà‰∏≠ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™ÂÖÉÁ¥†ÂºπÂá∫ ËØ≠Ê≥ïÔºöSPOP key 12127.0.0.1:6379&gt; spop setA &quot;1&quot; ZSetÁ±ªÂûã Âú®ÈõÜÂêàÁ±ªÂûãÁöÑÂü∫Á°Ä‰∏äÔºåÊúâÂ∫èÈõÜÂêàÁ±ªÂûã‰∏∫ÈõÜÂêà‰∏≠ÁöÑÊØè‰∏™ÂÖÉÁ¥†ÈÉΩÂÖ≥ËÅî‰∏Ä‰∏™ÂàÜÊï∞ÔºåËøô‰ΩøÂæóÊàë‰ª¨‰∏ç‰ªÖÂèØ‰ª•ÂÆåÊàêÊèíÂÖ•„ÄÅÂà†Èô§ÂíåÂà§Êñ≠ÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®Âú®ÈõÜÂêà‰∏≠ÔºåËøòËÉΩÂ§üËé∑ÂæóÂàÜÊï∞ÊúÄÈ´òÊàñÊúÄ‰ΩéÁöÑÂâçN‰∏™ÂÖÉÁ¥†„ÄÅËé∑ÂèñÊåáÂÆöÂàÜÊï∞ËåÉÂõ¥ÂÜÖÁöÑÂÖÉÁ¥†Á≠â‰∏éÂàÜÊï∞ÊúâÂÖ≥ÁöÑÊìç‰Ωú„ÄÇ Âú®Êüê‰∫õÊñπÈù¢ÊúâÂ∫èÈõÜÂêàÂíåÂàóË°®Á±ªÂûãÊúâ‰∫õÁõ∏‰ººÔºö ‰∫åËÄÖÈÉΩÊòØÊúâÂ∫èÁöÑ„ÄÇ ‰∫åËÄÖÈÉΩÂèØ‰ª•Ëé∑ÂæóÊüê‰∏ÄËåÉÂõ¥ÁöÑÂÖÉÁ¥†„ÄÇ ‰ΩÜÊòØÔºå‰∫åËÄÖÊúâÁùÄÂæàÂ§ßÂå∫Âà´Ôºö ÂàóË°®Á±ªÂûãÊòØÈÄöËøáÈìæË°®ÂÆûÁé∞ÁöÑÔºåËé∑ÂèñÈù†Ëøë‰∏§Á´ØÁöÑÊï∞ÊçÆÈÄüÂ∫¶ÊûÅÂø´ÔºåËÄåÂΩìÂÖÉÁ¥†Â¢ûÂ§öÂêéÔºåËÆøÈóÆ‰∏≠Èó¥Êï∞ÊçÆÁöÑÈÄüÂ∫¶‰ºöÂèòÊÖ¢„ÄÇ ÊúâÂ∫èÈõÜÂêàÁ±ªÂûã‰ΩøÁî®Êï£ÂàóË°®ÂÆûÁé∞ÔºåÊâÄ‰ª•Âç≥‰ΩøËØªÂèñ‰Ωç‰∫é‰∏≠Èó¥ÈÉ®ÂàÜÁöÑÊï∞ÊçÆ‰πüÂæàÂø´„ÄÇ ÂàóË°®‰∏≠‰∏çËÉΩÁÆÄÂçïÁöÑË∞ÉÊï¥Êüê‰∏™ÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆÔºå‰ΩÜÊòØÊúâÂ∫èÈõÜÂêàÂèØ‰ª•ÔºàÈÄöËøáÊõ¥ÊîπÂàÜÊï∞ÂÆûÁé∞Ôºâ ÊúâÂ∫èÈõÜÂêàË¶ÅÊØîÂàóË°®Á±ªÂûãÊõ¥ËÄóÂÜÖÂ≠ò„ÄÇ Â¢ûÂä†ÂÖÉÁ¥† ÂêëÊúâÂ∫èÈõÜÂêà‰∏≠Âä†ÂÖ•‰∏Ä‰∏™ÂÖÉÁ¥†ÂíåËØ•ÂÖÉÁ¥†ÁöÑÂàÜÊï∞ÔºåÂ¶ÇÊûúËØ•ÂÖÉÁ¥†Â∑≤ÁªèÂ≠òÂú®Âàô‰ºöÁî®Êñ∞ÁöÑÂàÜÊï∞ÊõøÊç¢ÂéüÊúâÁöÑÂàÜÊï∞„ÄÇËøîÂõûÂÄºÊòØÊñ∞Âä†ÂÖ•Âà∞ÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†‰∏™Êï∞Ôºå‰∏çÂåÖÂê´‰πãÂâçÂ∑≤ÁªèÂ≠òÂú®ÁöÑÂÖÉÁ¥†„ÄÇ ËØ≠Ê≥ïÔºöZADD key score member [score member ...] 1234127.0.0.1:6379&gt; zadd scoreboard 80 zhangsan 89 lisi 94 wangwu (integer) 3127.0.0.1:6379&gt; zadd scoreboard 97 lisi (integer) 0 Ëé∑ÂæóÊéíÂêçÂú®Êüê‰∏™ËåÉÂõ¥ÁöÑÂÖÉÁ¥†ÂàóË°® ÊåâÁÖßÂÖÉÁ¥†ÂàÜÊï∞‰ªéÂ∞èÂà∞Â§ßÁöÑÈ°∫Â∫èËøîÂõûÁ¥¢Âºï‰ªéstartÂà∞stop‰πãÈó¥ÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºàÂåÖÂê´‰∏§Á´ØÁöÑÂÖÉÁ¥†Ôºâ ËØ≠Ê≥ïÔºöZRANGE key start stop [WITHSCORES] 1234127.0.0.1:6379&gt; zrange scoreboard 0 21) &quot;zhangsan&quot;2) &quot;wangwu&quot;3) &quot;lisi‚Äú ÊåâÁÖßÂÖÉÁ¥†ÂàÜÊï∞‰ªéÂ§ßÂà∞Â∞èÁöÑÈ°∫Â∫èËøîÂõûÁ¥¢Âºï‰ªéstartÂà∞stop‰πãÈó¥ÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºàÂåÖÂê´‰∏§Á´ØÁöÑÂÖÉÁ¥†Ôºâ ËØ≠Ê≥ïÔºöZREVRANGE key start stop [WITHSCORES] 1234127.0.0.1:6379&gt; zrevrange scoreboard 0 21) &quot;lisi&quot;2) &quot;wangwu&quot;3) &quot;zhangsan&quot; Â¶ÇÊûúÈúÄË¶ÅËé∑ÂæóÂÖÉÁ¥†ÁöÑÂàÜÊï∞ÁöÑÂèØ‰ª•Âú®ÂëΩ‰ª§Â∞æÈÉ®Âä†‰∏äWITHSCORESÂèÇÊï∞ 12345127.0.0.1:6379&gt; zrange scoreboard 0 1 WITHSCORES1) &quot;zhangsan&quot;2) &quot;80&quot;3) &quot;wangwu&quot;4) &quot;94&quot; Ëé∑ÂèñÂÖÉÁ¥†ÁöÑÂàÜÊï∞ ËØ≠Ê≥ïÔºöZSCORE key member 12127.0.0.1:6379&gt; zscore scoreboard lisi &quot;97&quot; Âà†Èô§ÂÖÉÁ¥† ÁßªÈô§ÊúâÂ∫èÈõÜkey‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊàêÂëòÔºå‰∏çÂ≠òÂú®ÁöÑÊàêÂëòÂ∞ÜË¢´ÂøΩÁï•„ÄÇÂΩìkeyÂ≠òÂú®‰ΩÜ‰∏çÊòØÊúâÂ∫èÈõÜÁ±ªÂûãÊó∂ÔºåËøîÂõû‰∏Ä‰∏™ÈîôËØØ„ÄÇ ËØ≠Ê≥ïÔºöZREM key member [member ...] 12127.0.0.1:6379&gt; zrem scoreboard lisi(integer) 1 Ëé∑ÂæóÊåáÂÆöÂàÜÊï∞ËåÉÂõ¥ÁöÑÂÖÉÁ¥† ËØ≠Ê≥ïÔºöZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count] 12345127.0.0.1:6379&gt; ZRANGEBYSCORE scoreboard 90 97 WITHSCORES1) &quot;wangwu&quot;2) &quot;94&quot;127.0.0.1:6379&gt; ZRANGEBYSCORE scoreboard 70 100 limit 1 21) &quot;wangwu&quot; Â¢ûÂä†Êüê‰∏™ÂÖÉÁ¥†ÁöÑÂàÜÊï∞ ËøîÂõûÂÄºÊòØÊõ¥ÊîπÂêéÁöÑÂàÜÊï∞ ËØ≠Ê≥ïÔºöZINCRBY key increment member 12127.0.0.1:6379&gt; ZINCRBY scoreboard 4 lisi &quot;101&quot; Ëé∑ÂæóÈõÜÂêà‰∏≠ÂÖÉÁ¥†ÁöÑÊï∞Èáè ËØ≠Ê≥ïÔºöZCARD key 12127.0.0.1:6379&gt; ZCARD scoreboard(integer) 3 Ëé∑ÂæóÊåáÂÆöÂàÜÊï∞ËåÉÂõ¥ÂÜÖÁöÑÂÖÉÁ¥†‰∏™Êï∞ ËØ≠Ê≥ïÔºöZCOUNT key min max 12127.0.0.1:6379&gt; ZCOUNT scoreboard 80 90(integer) 1 ÊåâÁÖßÊéíÂêçËåÉÂõ¥Âà†Èô§ÂÖÉÁ¥† ËØ≠Ê≥ïÔºöZREMRANGEBYRANK key start stop 1234127.0.0.1:6379&gt; ZREMRANGEBYRANK scoreboard 0 1(integer) 2 127.0.0.1:6379&gt; ZRANGE scoreboard 0 -11) &quot;lisi&quot; ÊåâÁÖßÂàÜÊï∞ËåÉÂõ¥Âà†Èô§ÂÖÉÁ¥† ËØ≠Ê≥ïÔºöZREMRANGEBYSCORE key min max 1234127.0.0.1:6379&gt; zadd scoreboard 84 zhangsan (integer) 1127.0.0.1:6379&gt; ZREMRANGEBYSCORE scoreboard 80 100(integer) 1 Ëé∑ÂèñÂÖÉÁ¥†ÁöÑÊéíÂêç ‰ªéÂ∞èÂà∞Â§ß ËØ≠Ê≥ïÔºöZRANK key member 12127.0.0.1:6379&gt; ZRANK scoreboard lisi (integer) 0 ‰ªéÂ§ßÂà∞Â∞è ËØ≠Ê≥ïÔºöZREVRANK key member 12127.0.0.1:6379&gt; ZREVRANK scoreboard zhangsan (nil) ÈÄöÁî®ÂëΩ‰ª§ keys ‰ΩúÁî®ÔºöËøîÂõûÊª°Ë∂≥ÁªôÂÆöpattern ÁöÑÊâÄÊúâkey ËØ≠Ê≥ïÔºökeys pattern 123456127.0.0.1:6379&gt; keys mylist*1) &quot;mylist&quot;2) &quot;mylist5&quot;3) &quot;mylist6&quot;4) &quot;mylist7&quot;5) &quot;mylist8&quot; del ‰ΩúÁî®ÔºöÂà†Èô§ÊåáÂÆöÁöÑkey ËØ≠Ê≥ïÔºöDEL key 12127.0.0.1:6379&gt; del test(integer) 1 exists ‰ΩúÁî®ÔºöÁ°ÆËÆ§‰∏Ä‰∏™key ÊòØÂê¶Â≠òÂú® ËØ≠Ê≥ïÔºöexists key Á§∫‰æãÔºö‰ªéÁªìÊûúÊù•ÁúãÔºåÊï∞ÊçÆÂ∫ì‰∏≠‰∏çÂ≠òÂú®HongWan Ëøô‰∏™keyÔºå‰ΩÜÊòØage Ëøô‰∏™key ÊòØÂ≠òÂú®ÁöÑ 1234127.0.0.1:6379&gt; exists HongWan(integer) 0127.0.0.1:6379&gt; exists age(integer) 1 expire ‰ΩúÁî®ÔºöËÆæÁΩÆÁîüÂ≠òÊó∂Èó¥ÔºåÂà∞ÊúüÂêéÊï∞ÊçÆÈîÄÊØÅ„ÄÇ EXPIRE key seconds ËÆæÁΩÆkeyÁöÑÁîüÂ≠òÊó∂Èó¥ÔºàÂçï‰ΩçÔºöÁßíÔºâkeyÂú®Â§öÂ∞ëÁßíÂêé‰ºöËá™Âä®Âà†Èô§ TTL key Êü•ÁúãkeyÁîü‰∫éÁöÑÁîüÂ≠òÊó∂Èó¥ PERSIST key Ê∏ÖÈô§ÁîüÂ≠òÊó∂Èó¥ PEXPIRE key milliseconds ÁîüÂ≠òÊó∂Èó¥ËÆæÁΩÆÂçï‰Ωç‰∏∫ÔºöÊØ´Áßí 123456789101112127.0.0.1:6379&gt; set test 1 ËÆæÁΩÆtestÁöÑÂÄº‰∏∫1OK127.0.0.1:6379&gt; get test Ëé∑ÂèñtestÁöÑÂÄº&quot;1&quot;127.0.0.1:6379&gt; EXPIRE test 5 ËÆæÁΩÆtestÁöÑÁîüÂ≠òÊó∂Èó¥‰∏∫5Áßí(integer) 1127.0.0.1:6379&gt; TTL test Êü•ÁúãtestÁöÑÁîü‰∫éÁîüÊàêÊó∂Èó¥ËøòÊúâ1ÁßíÂà†Èô§(integer) 1127.0.0.1:6379&gt; TTL test(integer) -2127.0.0.1:6379&gt; get test Ëé∑ÂèñtestÁöÑÂÄºÔºåÂ∑≤ÁªèÂà†Èô§(nil) rename ‰ΩúÁî®ÔºöÈáçÂëΩÂêçkey ËØ≠Ê≥ïÔºörename oldkey newkey 123456127.0.0.1:6379&gt; keys *1) &quot;age&quot;127.0.0.1:6379&gt; rename age age_newOK127.0.0.1:6379&gt; keys *1) &quot;age_new&quot; type ‰ΩúÁî®ÔºöÊòæÁ§∫ÊåáÂÆökeyÁöÑÊï∞ÊçÆÁ±ªÂûã ËØ≠Ê≥ïÔºötype key 123456127.0.0.1:6379&gt; type addrstring127.0.0.1:6379&gt; type myzset2zset127.0.0.1:6379&gt; type mylistlist]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈòøÈáåÂ∑¥Â∑¥ËøûÊé•Ê±†DruidDataSourceÁöÑ‰∏Ä‰∏™bug]]></title>
    <url>%2Fposts%2Fd2af9ee0.html</url>
    <content type="text"><![CDATA[ÈóÆÈ¢ò ‰ΩøÁî®ÈòøÈáåÂ∑¥Â∑¥ÁöÑÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†DruidÔºåÂΩìÂ∫îÁî®Á®ãÂ∫èËøûÊé•Êï∞ÊçÆÂ∫ìÔºåËÄÅÊòØÊä•ÈîôÔºöcaused by wait mills 5000,active 0,maxactive 20 ËøûÊé•Êï∞ÊçÆÂ∫ìË∂ÖÊó∂Ôºå‰ΩÜÊòØ‰ΩøÁî®ÂçïÁã¨ÁöÑjdbcËøûÊé•Âç¥ÊòØÂèØ‰ª•ËøûÊé•ÁöÑ„ÄÇ Ëß£ÂÜ≥ ÁªèËøáÂèçÂ§çÊµãËØïÔºåÂèëÁé∞ÈóÆÈ¢òÊâÄÂú®ÔºåÂéüÊù•ÊòØËøûÊé•Ê±†ÂèÇÊï∞&lt;property name=&quot;validationQuery&quot; value=&quot;select 1&quot;&gt;ÈÖçÁΩÆÈîôËØØ„ÄÇËôΩÁÑ∂ÊòØÈÖçÁΩÆÈîôËØØÔºå‰ΩÜÊòØËøûÊé•Ê±†ÁâàÊú¨ÊòØ1.0.10ÔºåÂ§™ÊóßÔºå ÂØºËá¥Ê≤°ÊúâÊääÁúüÊ≠£ÁöÑÊä•ÈîôÊèêÁ§∫Âá∫Êù•ora-00923 Êú™ÊâæÂà∞Ë¶ÅÊ±ÇÁöÑÂÖ≥ÈîÆÂ≠ófromÔºåËÄåÊòØÊä•Ëøô‰∏™ÈîôÔºöcaused by wait mills 5000,active 0,maxactive 20„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÊú¨Êù•ÊòØÂõ†‰∏∫ÈÖçÁΩÆÈîôËØØÂØºËá¥ÁöÑÔºå ‰ΩÜÊòØÂõ†‰∏∫ÈòøÈáåÂ∑¥Â∑¥ËøûÊé•Ê±†DruidDataSourceÁöÑbugÔºåÊääËøô‰∏™ÈîôËØØÈöêËóèËµ∑Êù•‰∫ÜÔºå‰∏ÄÁõ¥Ê≤°ÊúâÊääÁúüÊ≠£ÁöÑÈîôËØØÊä•Âá∫Êù•„ÄÇ ÊÄªÁªì Â∞ÜDruidÁâàÊú¨ÂçáÁ∫ßÂà∞ÊúÄÊñ∞ÁöÑÁ®≥ÂÆöÁâàÊú¨ÔºåDruidDataSourceÈÖçÁΩÆÊàêÂ¶Ç‰∏ãÔºö 123456789&lt;property name="minIdle" value="1" /&gt;&lt;property name="validationQuery" value="SELECT 1 FROM DUAL" /&gt;&lt;property name="testOnBorrow" value="true" /&gt;&lt;property name="poolPreparedStatements" value="true" /&gt;&lt;property name="initialSize" value=1 /&gt; ÂèÇÊï∞ËØ¥Êòé validationQuery SQLÊü•ËØ¢,Áî®Êù•È™åËØÅ‰ªéËøûÊé•Ê±†ÂèñÂá∫ÁöÑËøûÊé•,Âú®Â∞ÜËøûÊé•ËøîÂõûÁªôË∞ÉÁî®ËÄÖ‰πãÂâç.Â¶ÇÊûúÊåáÂÆö, ÂàôÊü•ËØ¢ÂøÖÈ°ªÊòØ‰∏Ä‰∏™SQL SELECTÂπ∂‰∏îÂøÖÈ°ªËøîÂõûËá≥Â∞ë‰∏ÄË°åËÆ∞ÂΩï„ÄÇ testOnBorrow true--ÊåáÊòéÊòØÂê¶Âú®‰ªéÊ±†‰∏≠ÂèñÂá∫ËøûÊé•ÂâçËøõË°åÊ£ÄÈ™å,Â¶ÇÊûúÊ£ÄÈ™åÂ§±Ë¥•, Âàô‰ªéÊ±†‰∏≠ÂéªÈô§ËøûÊé•Âπ∂Â∞ùËØïÂèñÂá∫Âè¶‰∏Ä‰∏™„ÄÇ Ê≥®ÊÑè: ËÆæÁΩÆ‰∏∫trueÂêéÂ¶ÇÊûúË¶ÅÁîüÊïà,validationQueryÂèÇÊï∞ÂøÖÈ°ªËÆæÁΩÆ‰∏∫ÈùûÁ©∫Â≠óÁ¨¶‰∏≤ „ÄÇ testOnReturn false--ÊåáÊòéÊòØÂê¶Âú®ÂΩíËøòÂà∞Ê±†‰∏≠ÂâçËøõË°åÊ£ÄÈ™å„ÄÇ Ê≥®ÊÑè: ËÆæÁΩÆ‰∏∫trueÂêéÂ¶ÇÊûúË¶ÅÁîüÊïà,validationQueryÂèÇÊï∞ÂøÖÈ°ªËÆæÁΩÆ‰∏∫ÈùûÁ©∫Â≠óÁ¨¶‰∏≤ „ÄÇ testWhileIdle false--ÊåáÊòéËøûÊé•ÊòØÂê¶Ë¢´Á©∫Èó≤ËøûÊé•ÂõûÊî∂Âô®(Â¶ÇÊûúÊúâ)ËøõË°åÊ£ÄÈ™å.Â¶ÇÊûúÊ£ÄÊµãÂ§±Ë¥•, ÂàôËøûÊé•Â∞ÜË¢´‰ªéÊ±†‰∏≠ÂéªÈô§„ÄÇ Ê≥®ÊÑè: ËÆæÁΩÆ‰∏∫trueÂêéÂ¶ÇÊûúË¶ÅÁîüÊïà,validationQueryÂèÇÊï∞ÂøÖÈ°ªËÆæÁΩÆ‰∏∫ÈùûÁ©∫Â≠óÁ¨¶‰∏≤ timeBetweenEvictionRunsMillis -1--Âú®Á©∫Èó≤ËøûÊé•ÂõûÊî∂Âô®Á∫øÁ®ãËøêË°åÊúüÈó¥‰ºëÁú†ÁöÑÊó∂Èó¥ÂÄº,‰ª•ÊØ´Áßí‰∏∫Âçï‰Ωç. Â¶ÇÊûúËÆæÁΩÆ‰∏∫ÈùûÊ≠£Êï∞,Âàô‰∏çËøêË°åÁ©∫Èó≤ËøûÊé•ÂõûÊî∂Âô®Á∫øÁ®ã„ÄÇ numTestsPerEvictionRun 3--Âú®ÊØèÊ¨°Á©∫Èó≤ËøûÊé•ÂõûÊî∂Âô®Á∫øÁ®ã(Â¶ÇÊûúÊúâ)ËøêË°åÊó∂Ê£ÄÊü•ÁöÑËøûÊé•Êï∞Èáè „ÄÇ minEvictableIdleTimeMillis 1000 * 60 * 30--ËøûÊé•Âú®Ê±†‰∏≠‰øùÊåÅÁ©∫Èó≤ËÄå‰∏çË¢´Á©∫Èó≤ËøûÊé•ÂõûÊî∂Âô®Á∫øÁ®ã(Â¶ÇÊûúÊúâ)ÂõûÊî∂ÁöÑÊúÄÂ∞èÊó∂Èó¥ÂÄºÔºåÂçï‰ΩçÊØ´Áßí„ÄÇ]]></content>
      <categories>
        <category>druid</category>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>druid</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MybatisÂºÇÂ∏∏There is no getter for property named 'XXX' in class]]></title>
    <url>%2Fposts%2F53121faf.html</url>
    <content type="text"><![CDATA[Âú®ÈõÜÊàêMybatisÁöÑÈ°πÁõÆ‰∏≠ÂÆö‰πâÊé•Âè£Âπ∂ÂÆûÁé∞Êò†Â∞ÑSQLÊó∂ÔºåÈÅáÂà∞Ëøá‰∏Ä‰∏™ÂæàÂ•áÊÄ™ÁöÑÈóÆÈ¢òÔºåÂ¶Ç‰∏ãÔºö ÂÆö‰πâÊé•Âè£Ôºö 1UserCouponBo getUserCouponInfoById(Long userCouponId); ÁÑ∂ÂêéÂØπÂ∫îÁöÑsqlÁöÑxmlÂ¶Ç‰∏ãÔºö 12345678&lt;select id="selectUserCouponInfoById" parameterType="java.lang.Long" resultMap="baseResultMap"&gt; select amount,receive_time from user_coupon &lt;where&gt; &lt;if test="userCouponId != null"&gt; id = #&#123;userCouponId,jdbcType=BIGINT&#125; &lt;/if&gt; &lt;/where&gt;&lt;/select&gt; ‰∏äÈù¢ÁöÑÊé•Âè£Â∞±ÊòØÈÄöËøáidÊü•ËØ¢ÊåáÂÆöÁöÑ‰ºòÊÉ†Âà∏‰ø°ÊÅØÔºå‰∏™‰∫∫ÊÑüËßâËØ•sqlÂÜôÁöÑ‰∏çÂ§ü‰ºòÈõÖ„ÄÇÂ∞±ÊòØËøô‰∏™Êé•Âè£ÔºåÊä•ÈîôÔºöThere is no gettery for property...!!! ËøôÊòØ‰∏∫‰ªÄ‰πàÂë¢Ôºü ÂéüÂõ†ÊòØÂú®ifÈáåÈù¢Áî®‰∫ÜMybatisÁöÑÂÜÖÁΩÆÂØπË±°Ôºå&lt;if test=&quot;id != null&quot;&gt;ÔºåMybatisÈªòËÆ§ÈááÁî®OGNLËß£ÊûêÂèÇÊï∞ÔºåÊâÄ‰ª•‰ºöËá™Âä®ÈááÁî®ÂØπË±°Ê†ëÁöÑÂΩ¢ÂºèÂèñlong.xxxÂÄºÔºåÂ¶ÇÊûúÊ≤°Âú®ÊñπÊ≥ï‰∏≠ÂÆö‰πâÔºåÂàô‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à‰∏ÄÔºöÊää#{xxx}‰øÆÊîπ‰∏∫#{_parameter}Âç≥ÂèØ 12345678&lt;select id="selectUserCouponInfoById" parameterType="java.lang.Long" resultMap="baseResultMap"&gt; select amount,receive_time from user_coupon &lt;where&gt; &lt;if test="_parameter != null"&gt; id = #&#123;_parameter&#125; &lt;/if&gt; &lt;/where&gt;&lt;/select&gt; Ëß£ÂÜ≥Ëß£ÂÜ≥ÊñπÊ°à‰∫åÔºöÂú®ÊñπÊ≥ï‰∏≠ÊèêÂâçÂÆö‰πâ„ÄÇ 1UserCouponBo getUserCouponInfoById(@Param("userCouponId") Long userCouponId); ÁªôuserCouponIdÂä†@ParamÊ≥®Ëß£ÔºåÂÆö‰πâ‰∏Ä‰∏ãÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-ReentrantReadWriteLock]]></title>
    <url>%2Fposts%2Fb29432a8.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ ReadWriteLockÔºåÈ°æÂêçÊÄù‰πâÔºåÊòØËØªÂÜôÈîÅ„ÄÇÂÆÉÁª¥Êä§‰∫Ü‰∏ÄÂØπÁõ∏ÂÖ≥ÁöÑÈîÅ ‚Äî ‚Äî ‚ÄúËØªÂèñÈîÅ‚ÄùÂíå‚ÄúÂÜôÂÖ•ÈîÅ‚ÄùÔºå‰∏Ä‰∏™Áî®‰∫éËØªÂèñÊìç‰ΩúÔºåÂè¶‰∏Ä‰∏™Áî®‰∫éÂÜôÂÖ•Êìç‰Ωú„ÄÇ ‚ÄúËØªÂèñÈîÅ‚ÄùÁî®‰∫éÂè™ËØªÊìç‰ΩúÔºåÂÆÉÊòØ‚ÄúÂÖ±‰∫´ÈîÅ‚ÄùÔºåËÉΩÂêåÊó∂Ë¢´Â§ö‰∏™Á∫øÁ®ãËé∑Âèñ„ÄÇ ‚ÄúÂÜôÂÖ•ÈîÅ‚ÄùÁî®‰∫éÂÜôÂÖ•Êìç‰ΩúÔºåÂÆÉÊòØ‚ÄúÁã¨Âç†ÈîÅ‚ÄùÔºåÂÜôÂÖ•ÈîÅÂè™ËÉΩË¢´‰∏Ä‰∏™Á∫øÁ®ãÈîÅËé∑Âèñ„ÄÇ &lt;font color=&quot;red&quot;&gt;Ê≥®ÊÑèÔºö‰∏çËÉΩÂêåÊó∂Â≠òÂú®ËØªÂèñÈîÅÂíåÂÜôÂÖ•ÈîÅÔºÅ&lt;/font&gt; ReadWriteLockÊòØ‰∏Ä‰∏™Êé•Âè£„ÄÇReentrantReadWriteLockÊòØÂÆÉÁöÑÂÆûÁé∞Á±ªÔºåReentrantReadWriteLockÂåÖÊã¨Â≠êÁ±ªReadLockÂíåWriteLock„ÄÇ ËØªÂÜôÈîÅÂ∫ïÂ±Ç‰πüÊòØÈÄöËøáAQSÊ°ÜÊû∂ÂÆûÁé∞ÁöÑÔºåÈÄöËøá‰πãÂâçÁöÑÊñáÁ´†ÂèØÁü•ÔºåÂ¶ÇÊûú‰ΩøÁî®AQSÊ°ÜÊû∂ÔºåÂú®Ëøô‰∏™Á±ªÂÜÖÈÉ®ÂøÖÂÆöÊúâ‰∏Ä‰∏™AQSÊ°ÜÊû∂ÁöÑÂ≠êÁ±ªÔºåAQSÂ≠êÁ±ªÊó†ÈùûÂ∞±ÊòØÂÆûÁé∞Â¶Ç‰∏ãÂá†ÁÇπÔºö Á¨¨‰∏ÄÁÇπÔºöÂØπÂÖ±‰∫´ËµÑÊ∫êstateËøõË°åÊìç‰Ωú Á¨¨‰∫åÁÇπÔºöÂ¶ÇÊûúÊòØÁã¨Âç†Ê®°Âºè‰∏ãÂØπËµÑÊ∫êÁöÑËé∑ÂèñÂíåÈáäÊîæÔºåÈÇ£‰πàÂøÖÈ°ªÂÆûÁé∞tryAcquire()ÊñπÊ≥ïÂíåtryRelease()ÊñπÊ≥ï„ÄÇ Á¨¨‰∏âÁÇπÔºöÂ¶ÇÊûúÊòØÂÖ±‰∫´Ê®°Âºè‰∏ãÂØπËµÑÊ∫êÁöÑËé∑ÂèñÂíåÈáäÊîæÔºåÈÇ£‰πàÂøÖÈ°ªÂÆûÁé∞tryAcquireShared()ÊñπÊ≥ïÂíåtryReleaseShared()ÊñπÊ≥ï„ÄÇ ËÄåËØªÂÜôÈîÅReentrantReadWriteLockÂç≥ÂåÖÂê´Áã¨Âç†Ê®°Âºè‰∏ãËµÑÊ∫êÁöÑËé∑ÂèñÂíåÈáäÊîæ(ÂÜôÈîÅ)Ôºå‰πüÂåÖÂê´ÂÖ±‰∫´Ê®°Âºè‰∏ãËµÑÊ∫êÁöÑËé∑ÂèñÂíåÈáäÊîæ(ËØªÈîÅ)ÔºåÊâÄ‰ª•ÈúÄË¶Å‰∏äÈù¢ÁöÑÂõõ‰∏™ÊñπÊ≥ïÈÉΩÈúÄË¶ÅÂÆûÁé∞„ÄÇ Áî®state‰∏Ä‰∏™Êï¥ÂΩ¢ÂèòÈáèÊÄéÊ†∑ÂéªÁª¥Êä§ËØªÂíåÂÜô‰∏§ÁßçÁä∂ÊÄÅ ÂÖ±‰∫´ËµÑÊ∫êstateÊòØ‰∏Ä‰∏™Êï¥ÂΩ¢ÂèòÈáèÔºåÂú®ËØªÂÜôÈîÅ‰∏≠ÂèàÂøÖÈ°ªÁª¥Êä§ËØªÂíåÂÜô‰∏§ÁßçÁä∂ÊÄÅÔºåÊâÄ‰ª•Âè™ËÉΩÊåâ‰ΩçÊäästateÂàÜÂâ≤Êàê‰∏§‰∏™ÈÉ®ÂàÜÔºå‰∏Ä‰∏™Êï¥ÂΩ¢Êúâ32‰ΩçÔºåÈ´ò16‰Ωç‰ª£Ë°®ËØªÔºå‰Ωé16‰Ωç‰ª£Ë°®ÂÜô„ÄÇÂ¶ÇÂõæÊâÄÁ§∫Ôºö ![img][link1] 123456789101112//ËØªÁä∂ÊÄÅÂç†Áî®‰ΩçÊï∞static final int SHARED_SHIFT = 16;//ÊØè‰∏ÄÊ¨°Â¢ûÂä†ÁöÑËØªÁä∂ÊÄÅÔºö(1&lt;&lt;16),Âõ†‰∏∫ËØªÁä∂ÊÄÅÊòØstateÁöÑÈ´ò16‰Ωçstatic final int SHARED_UNIT = (1 &lt;&lt; SHARED_SHIFT);//ËØªÁä∂ÊÄÅÊàñÂÜôÁä∂ÊÄÅÊúÄÂ§ßÁöÑÊï∞Èáèstatic final int MAX_COUNT = (1 &lt;&lt; SHARED_SHIFT) - 1;//Áî®Êù•ËÆ°ÁÆóÂÜôÁöÑÂêåÊ≠•Áä∂ÊÄÅstatic final int EXCLUSIVE_MASK = (1 &lt;&lt; SHARED_SHIFT) - 1;//ËÆ°ÁÆóËØªÈîÅÁöÑÊï∞Èáèstatic int sharedCount(int c) &#123; return c &gt;&gt;&gt; SHARED_SHIFT; &#125;//ËÆ°ÁÆóÂÜôÈîÅÁöÑÊï∞Èáèstatic int exclusiveCount(int c) &#123; return c &amp; EXCLUSIVE_MASK; &#125; ËØªÊìç‰ΩúÔºåÂõ†‰∏∫È´ò16‰Ωç‰∏∫ËØªÊìç‰ΩúÔºåË¶ÅÊÉ≥Ëé∑ÂèñËØªÁöÑÊï∞ÈáèÔºåÂè™ÈúÄÂ∞ÜstateÊó†Á¨¶Âè∑Âè≥Áßª16‰ΩçÂç≥ÂèØÔºöstate&gt;&gt;&gt;16„ÄÇËØªÊúÄÂ§ßÁöÑÊï∞ÈáèÔºö65535(‰∫åËøõÂà∂Ë°®Á§∫Ôºö11111111110000000000000000) ÂÜôÊìç‰ΩúÔºåÂõ†‰∏∫‰Ωé16‰Ωç‰∏∫ÂÜôÊìç‰ΩúÔºåË¶ÅÂêëËé∑ÂèñÂÜôÊï∞ÈáèÔºåÂè™ÈúÄË¶ÅÊäästateÁöÑÈ´ò16‰ΩçÊäπÂéªÂ∞±ÂèØ‰ª•‰∫ÜÔºåÂæàÂÆπÊòìÊÉ≥Âà∞‚ÄúÊåâ‰Ωç‰∏é‚ÄùÊìç‰ΩúÔºöstate&amp;1111111111111111„ÄÇÂÜôÊúÄÂ§ßÁöÑÊï∞ÈáèÔºö65535(‰∫åËøõÂà∂Ë°®Á§∫Ôºö00000000000000001111111111111111) ÂÖ±‰∫´ÈîÅ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public static class ReadLock implements Lock, java.io.Serializable &#123; private static final long serialVersionUID = -5992448646407690164L; // ReentrantReadWriteLockÁöÑAQSÂØπË±° private final Sync sync; protected ReadLock(ReentrantReadWriteLock lock) &#123; sync = lock.sync; &#125; // Ëé∑Âèñ‚ÄúÂÖ±‰∫´ÈîÅ‚Äù public void lock() &#123; sync.acquireShared(1); &#125; // Â¶ÇÊûúÁ∫øÁ®ãÊòØ‰∏≠Êñ≠Áä∂ÊÄÅÔºåÂàôÊäõÂá∫‰∏ÄÂú∫ÔºåÂê¶ÂàôÂ∞ùËØïËé∑ÂèñÂÖ±‰∫´ÈîÅ„ÄÇ public void lockInterruptibly() throws InterruptedException &#123; sync.acquireSharedInterruptibly(1); &#125; // Â∞ùËØïËé∑Âèñ‚ÄúÂÖ±‰∫´ÈîÅ‚Äù public boolean tryLock() &#123; return sync.tryReadLock(); &#125; // Âú®ÊåáÂÆöÊó∂Èó¥ÂÜÖÔºåÂ∞ùËØïËé∑Âèñ‚ÄúÂÖ±‰∫´ÈîÅ‚Äù public boolean tryLock(long timeout, TimeUnit unit) throws InterruptedException &#123; return sync.tryAcquireSharedNanos(1, unit.toNanos(timeout)); &#125; // ÈáäÊîæ‚ÄúÂÖ±‰∫´ÈîÅ‚Äù public void unlock() &#123; sync.releaseShared(1); &#125; // Êñ∞Âª∫Êù°‰ª∂ public Condition newCondition() &#123; throw new UnsupportedOperationException(); &#125; public String toString() &#123; int r = sync.getReadLockCount(); return super.toString() + "[Read locks = " + r + "]"; &#125;&#125; ReadLock‰∏≠ÁöÑsyncÊòØ‰∏Ä‰∏™SyncÂØπË±°ÔºåSyncÁªßÊâø‰∫éAQSÁ±ªÔºåÂç≥SyncÂ∞±ÊòØ‰∏Ä‰∏™ÈîÅ„ÄÇReentrantReadWriteLock‰∏≠‰πüÊúâ‰∏Ä‰∏™SyncÂØπË±°ÔºåËÄå‰∏îReadLock‰∏≠ÁöÑsyncÂíåReentrantReadWriteLock‰∏≠ÁöÑsyncÊòØÂØπÂ∫îÂÖ≥Á≥ª„ÄÇÂç≥ReentrantReadWriteLockÂíåReadLockÂÖ±‰∫´Âêå‰∏Ä‰∏™AQSÂØπË±°ÔºåÂÖ±‰∫´Âêå‰∏ÄÊääÈîÅ„ÄÇ Ëé∑ÂèñÂÖ±‰∫´ÈîÅ Ëé∑ÂèñÂÖ±‰∫´ÈîÅÁöÑÊÄùÊÉ≥(Âç≥lockÂáΩÊï∞ÁöÑÊ≠•È™§)ÔºåÊòØÂÖàÈÄöËøátryAcquireShared()Â∞ùËØïËé∑ÂèñÂÖ±‰∫´ÈîÅ„ÄÇÂ∞ùËØïÊàêÂäüÁöÑËØùÔºåÂàôÁõ¥Êé•ËøîÂõûÔºõÂ∞ùËØïÂ§±Ë¥•ÁöÑËØùÔºåÂàôÈÄöËøádoAcquireShared()‰∏çÊñ≠ÁöÑÂæ™ÁéØÂπ∂Â∞ùËØïËé∑ÂèñÈîÅÔºåËã•ÊúâÈúÄË¶ÅÔºåÂàôÈòªÂ°ûÁ≠âÂæÖ„ÄÇdoAcquireShared()Âú®Âæ™ÁéØ‰∏≠ÊØèÊ¨°Â∞ùËØïËé∑ÂèñÈîÅÊó∂ÔºåÈÉΩÊòØÈÄöËøátryAcquireShared()Êù•ËøõË°åÂ∞ùËØïÁöÑ„ÄÇ‰∏ãÈù¢ÁúãÁúã‚ÄúËé∑ÂèñÂÖ±‰∫´ÈîÅ‚ÄùÁöÑËØ¶ÁªÜÊµÅÁ®ã„ÄÇ lock() 123public void lock() &#123; sync.acquireShared(1);&#125; acquireShared() SyncÁªßÊâø‰∫éAQSÔºåacquireShared()ÂÆö‰πâÂú®AQS‰∏≠„ÄÇÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 1234public final void acquireShared(int arg) &#123; if (tryAcquireShared(arg) &lt; 0) doAcquireShared(arg);&#125; acquireShared()È¶ñÂÖà‰ºöÈÄöËøátryAcquireShared()Êù•Â∞ùËØïËé∑ÂèñÈîÅ„ÄÇ Â∞ùËØïÊàêÂäüÁöÑËØùÔºåÂàô‰∏çÂÜçÂÅö‰ªª‰ΩïÂä®‰Ωú(Âõ†‰∏∫Â∑≤ÁªèÊàêÂäüËé∑ÂèñÂà∞ÈîÅ‰∫Ü)„ÄÇ Â∞ùËØïÂ§±Ë¥•ÁöÑËØùÔºåÂàôÈÄöËøádoAcquireShared()Êù•Ëé∑ÂèñÈîÅ„ÄÇdoAcquireShared()‰ºöËé∑ÂèñÂà∞ÈîÅ‰∫ÜÊâçËøîÂõû„ÄÇ tryAcquireShared() 123456789101112131415161718192021222324252627282930313233343536protected final int tryAcquireShared(int unused) &#123; Thread current = Thread.currentThread(); // Ëé∑Âèñ‚ÄúÈîÅ‚ÄùÁöÑÁä∂ÊÄÅ int c = getState(); // Â¶ÇÊûú‚ÄúÈîÅ‚ÄùÊòØ‚Äú‰∫íÊñ•ÈîÅ‚ÄùÔºåÂπ∂‰∏îËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ã‰∏çÊòØcurrentÁ∫øÁ®ãÔºõÂàôËøîÂõû-1„ÄÇ if (exclusiveCount(c) != 0 &amp;&amp; getExclusiveOwnerThread() != current) return -1; // Ëé∑Âèñ‚ÄúËØªÂèñÈîÅ‚ÄùÁöÑÂÖ±‰∫´ËÆ°Êï∞ int r = sharedCount(c); // Â¶ÇÊûú‚Äú‰∏çÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖ‚ÄùÔºåÂπ∂‰∏î‚ÄúËØªÂèñÈîÅ‚ÄùÁöÑÂÖ±‰∫´ËÆ°Êï∞Â∞è‰∫éMAX_COUNTÔºõ // ÂàôÈÄöËøáCASÂáΩÊï∞Êõ¥Êñ∞‚ÄúÈîÅÁöÑÁä∂ÊÄÅ‚ÄùÔºåÂ∞Ü‚ÄúËØªÂèñÈîÅ‚ÄùÁöÑÂÖ±‰∫´ËÆ°Êï∞+1„ÄÇ if (!readerShouldBlock() &amp;&amp; r &lt; MAX_COUNT &amp;&amp; compareAndSetState(c, c + SHARED_UNIT)) &#123; // Á¨¨1Ê¨°Ëé∑Âèñ‚ÄúËØªÂèñÈîÅ‚Äù„ÄÇ if (r == 0) &#123; firstReader = current; firstReaderHoldCount = 1; // Â¶ÇÊûúÊÉ≥Ë¶ÅËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ã(current)ÊòØÁ¨¨1‰∏™Ëé∑ÂèñÈîÅ(firstReader)ÁöÑÁ∫øÁ®ã &#125; else if (firstReader == current) &#123; firstReaderHoldCount++; &#125; else &#123; // HoldCounterÊòØÁî®Êù•ÁªüËÆ°ËØ•Á∫øÁ®ãËé∑Âèñ‚ÄúËØªÂèñÈîÅ‚ÄùÁöÑÊ¨°Êï∞„ÄÇ HoldCounter rh = cachedHoldCounter; if (rh == null || rh.tid != current.getId()) cachedHoldCounter = rh = readHolds.get(); else if (rh.count == 0) readHolds.set(rh); // Â∞ÜËØ•Á∫øÁ®ãËé∑Âèñ‚ÄúËØªÂèñÈîÅ‚ÄùÁöÑÊ¨°Êï∞+1„ÄÇ rh.count++; &#125; return 1; &#125; return fullTryAcquireShared(current);&#125; tryAcquireShared()ÁöÑ‰ΩúÁî®ÊòØÂ∞ùËØïËé∑Âèñ‚ÄúÂÖ±‰∫´ÈîÅ‚Äù„ÄÇ Â¶ÇÊûúÂú®Â∞ùËØïËé∑ÂèñÈîÅÊó∂Ôºå‚Äú‰∏çÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖ‚ÄùÂπ∂‰∏î‚ÄúËØªÂèñÈîÅÁöÑÂÖ±‰∫´ËÆ°Êï∞Â∞è‰∫éMAX_COUNT‚ÄùÔºåÂàôÁõ¥Êé•ÈÄöËøáCASÂáΩÊï∞Êõ¥Êñ∞‚ÄúËØªÂèñÈîÅÁöÑÂÖ±‰∫´ËÆ°Êï∞‚ÄùÔºå‰ª•ÂèäÂ∞Ü‚ÄúÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñËØªÂèñÈîÅÁöÑÊ¨°Êï∞+1‚Äù„ÄÇ Âê¶ÂàôÔºåÈÄöËøáfullTryAcquireShared()Ëé∑ÂèñËØªÂèñÈîÅ„ÄÇ fullTryAcquireShared() 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758final int fullTryAcquireShared(Thread current) &#123; HoldCounter rh = null; for (;;) &#123; // Ëé∑Âèñ‚ÄúÈîÅ‚ÄùÁöÑÁä∂ÊÄÅ int c = getState(); // Â¶ÇÊûú‚ÄúÈîÅ‚ÄùÊòØ‚Äú‰∫íÊñ•ÈîÅ‚ÄùÔºåÂπ∂‰∏îËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ã‰∏çÊòØcurrentÁ∫øÁ®ãÔºõÂàôËøîÂõû-1„ÄÇ if (exclusiveCount(c) != 0) &#123; if (getExclusiveOwnerThread() != current) return -1; // Â¶ÇÊûú‚ÄúÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖ‚Äù„ÄÇ // (01) ÂΩì‚ÄúÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖ‚ÄùÁöÑÁ∫øÁ®ãÊòØÁ¨¨1‰∏™Ëé∑ÂèñÈîÅÁöÑÁ∫øÁ®ãÁöÑËØùÔºåÂàôÁªßÁª≠ÂæÄ‰∏ãÊâßË°å„ÄÇ // (02) ÂΩì‚ÄúÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖ‚ÄùÁöÑÁ∫øÁ®ãËé∑ÂèñÈîÅÁöÑÊ¨°Êï∞=0Êó∂ÔºåÂàôËøîÂõû-1„ÄÇ &#125; else if (readerShouldBlock()) &#123; // Â¶ÇÊûúÊÉ≥Ë¶ÅËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ã(current)ÊòØÁ¨¨1‰∏™Ëé∑ÂèñÈîÅ(firstReader)ÁöÑÁ∫øÁ®ã if (firstReader == current) &#123; &#125; else &#123; if (rh == null) &#123; rh = cachedHoldCounter; if (rh == null || rh.tid != current.getId()) &#123; rh = readHolds.get(); if (rh.count == 0) readHolds.remove(); &#125; &#125; // Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÈîÅÁöÑËÆ°Êï∞=0,ÂàôËøîÂõû-1„ÄÇ if (rh.count == 0) return -1; &#125; &#125; // Â¶ÇÊûú‚Äú‰∏çÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖ‚ÄùÔºåÂàôËé∑Âèñ‚ÄúËØªÂèñÈîÅ‚ÄùÁöÑÂÖ±‰∫´ÁªüËÆ°Êï∞Ôºõ // Â¶ÇÊûúÂÖ±‰∫´ÁªüËÆ°Êï∞Ë∂ÖËøáMAX_COUNTÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏„ÄÇ if (sharedCount(c) == MAX_COUNT) throw new Error("Maximum lock count exceeded"); // Â∞ÜÁ∫øÁ®ãËé∑Âèñ‚ÄúËØªÂèñÈîÅ‚ÄùÁöÑÊ¨°Êï∞+1„ÄÇ if (compareAndSetState(c, c + SHARED_UNIT)) &#123; // Â¶ÇÊûúÊòØÁ¨¨1Ê¨°Ëé∑Âèñ‚ÄúËØªÂèñÈîÅ‚ÄùÔºåÂàôÊõ¥Êñ∞firstReaderÂíåfirstReaderHoldCount„ÄÇ if (sharedCount(c) == 0) &#123; firstReader = current; firstReaderHoldCount = 1; // Â¶ÇÊûúÊÉ≥Ë¶ÅËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ã(current)ÊòØÁ¨¨1‰∏™Ëé∑ÂèñÈîÅ(firstReader)ÁöÑÁ∫øÁ®ãÔºå // ÂàôÂ∞ÜfirstReaderHoldCount+1„ÄÇ &#125; else if (firstReader == current) &#123; firstReaderHoldCount++; &#125; else &#123; if (rh == null) rh = cachedHoldCounter; if (rh == null || rh.tid != current.getId()) rh = readHolds.get(); else if (rh.count == 0) readHolds.set(rh); // Êõ¥Êñ∞Á∫øÁ®ãÁöÑËé∑Âèñ‚ÄúËØªÂèñÈîÅ‚ÄùÁöÑÂÖ±‰∫´ËÆ°Êï∞ rh.count++; cachedHoldCounter = rh; // cache for release &#125; return 1; &#125; &#125;&#125; fullTryAcquireShared()‰ºöÊ†πÊçÆ‚ÄúÊòØÂê¶ÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖ‚ÄùÔºå‚ÄúËØªÂèñÈîÅÁöÑÂÖ±‰∫´ËÆ°Êï∞ÊòØÂê¶Ë∂ÖËøáÈôêÂà∂‚ÄùÁ≠âÁ≠âËøõË°åÂ§ÑÁêÜ„ÄÇÂ¶ÇÊûú‰∏çÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖÔºåÂπ∂‰∏îÈîÅÁöÑÂÖ±‰∫´ËÆ°Êï∞Ê≤°ÊúâË∂ÖËøáÈôêÂà∂ÔºåÂàôÈÄöËøáCASÂ∞ùËØïËé∑ÂèñÈîÅÔºåÂπ∂ËøîÂõû1„ÄÇ doAcquireShared() 1234567891011121314151617181920212223242526272829303132private void doAcquireShared(int arg) &#123; // addWaiter(Node.SHARED)ÁöÑ‰ΩúÁî®ÊòØÔºåÂàõÂª∫‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÂØπÂ∫îÁöÑÁªìÁÇπÔºåÂπ∂Â∞ÜËØ•Á∫øÁ®ãÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàó‰∏≠„ÄÇ final Node node = addWaiter(Node.SHARED); boolean failed = true; try &#123; boolean interrupted = false; for (;;) &#123; // Ëé∑Âèñ‚Äúnode‚ÄùÁöÑÂâç‰∏ÄÁªìÁÇπ final Node p = node.predecessor(); // Â¶ÇÊûú‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÊòØÂêåÊ≠•ÈòüÂàóÁöÑË°®Â§¥ÔºåÂàôÂ∞ùËØïËé∑ÂèñÂÖ±‰∫´ÈîÅ„ÄÇ if (p == head) &#123; int r = tryAcquireShared(arg); if (r &gt;= 0) &#123; setHeadAndPropagate(node, r); p.next = null; // help GC if (interrupted) selfInterrupt(); failed = false; return; &#125; &#125; // Â¶ÇÊûú‚ÄúÂΩìÂâçÁ∫øÁ®ã‚Äù‰∏çÊòØÂêåÊ≠•ÈòüÂàóÁöÑË°®Â§¥ÔºåÂàôÈÄöËøáshouldParkAfterFailedAcquire()Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÁ≠âÂæÖÔºå // ÈúÄË¶ÅÁöÑËØùÔºåÂàôÈÄöËøáparkAndCheckInterrupt()ËøõË°åÈòªÂ°ûÁ≠âÂæÖ„ÄÇËã•ÈòªÂ°ûÁ≠âÂæÖËøáÁ®ã‰∏≠ÔºåÁ∫øÁ®ãË¢´‰∏≠Êñ≠ËøáÔºåÂàôËÆæÁΩÆinterrupted‰∏∫true„ÄÇ if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) interrupted = true; &#125; &#125; finally &#123; if (failed) cancelAcquire(node); &#125;&#125; doAcquireShared()ÁöÑ‰ΩúÁî®ÊòØËé∑ÂèñÂÖ±‰∫´ÈîÅ„ÄÇ ÂÆÉ‰ºöÈ¶ñÂÖàÂàõÂª∫Á∫øÁ®ãÂØπÂ∫îÁöÑÂêåÊ≠•ÈòüÂàóÁöÑÁªìÁÇπÔºåÁÑ∂ÂêéÂ∞ÜËØ•ÁªìÁÇπÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàó‰∏≠„ÄÇÂêåÊ≠•ÈòüÂàóÊòØÁÆ°ÁêÜËé∑ÂèñÈîÅÁöÑÁ≠âÂæÖÁ∫øÁ®ãÁöÑÈòüÂàó„ÄÇ Â¶ÇÊûú‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÊòØÂêåÊ≠•ÈòüÂàóÁöÑË°®Â§¥ÔºåÂàôÂ∞ùËØïËé∑ÂèñÂÖ±‰∫´ÈîÅÔºõÂê¶ÂàôÔºåÂàôÈúÄË¶ÅÈÄöËøáshouldParkAfterFailedAcquire()Âà§Êñ≠ÊòØÂê¶ÈòªÂ°ûÁ≠âÂæÖÔºåÈúÄË¶ÅÁöÑËØùÔºåÂàôÈÄöËøáparkAndCheckInterrupt()ËøõË°åÈòªÂ°ûÁ≠âÂæÖ„ÄÇ doAcquireShared()‰ºöÈÄöËøáforÂæ™ÁéØÔºå‰∏çÊñ≠ÁöÑËøõË°å‰∏äÈù¢ÁöÑÊìç‰ΩúÔºõÁõÆÁöÑÂ∞±ÊòØËé∑ÂèñÂÖ±‰∫´ÈîÅ„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºödoAcquireShared()Âú®ÊØè‰∏ÄÊ¨°Â∞ùËØïËé∑ÂèñÈîÅÊó∂ÔºåÊòØÈÄöËøátryAcquireShared()Êù•ÊâßË°åÁöÑÔºÅ ÈáäÊîæÂÖ±‰∫´ÈîÅ ÈáäÊîæÂÖ±‰∫´ÈîÅÁöÑÊÄùÊÉ≥ÔºåÊòØÂÖàÈÄöËøátryReleaseShared()Â∞ùËØïÈáäÊîæÂÖ±‰∫´ÈîÅ„ÄÇÂ∞ùËØïÊàêÂäüÁöÑËØùÔºåÂàôÈÄöËøádoReleaseShared()Âî§ÈÜí‚ÄúÂÖ∂‰ªñÁ≠âÂæÖËé∑ÂèñÂÖ±‰∫´ÈîÅÁöÑÁ∫øÁ®ã‚ÄùÔºåÂπ∂ËøîÂõûtrueÔºõÂê¶ÂàôÁöÑËØùÔºåËøîÂõûflase„ÄÇ unlock() 123public void unlock() &#123; sync.releaseShared(1);&#125; ËØ•ÂáΩÊï∞ÂÆûÈôÖ‰∏äË∞ÉÁî®releaseShared(1)ÈáäÊîæÂÖ±‰∫´ÈîÅ„ÄÇ releaseShared() 1234567public final boolean releaseShared(int arg) &#123; if (tryReleaseShared(arg)) &#123; doReleaseShared(); return true; &#125; return false;&#125; releaseShared()ÁöÑÁõÆÁöÑÊòØËÆ©ÂΩìÂâçÁ∫øÁ®ãÈáäÊîæÂÆÉÊâÄÊåÅÊúâÁöÑÂÖ±‰∫´ÈîÅ„ÄÇ ÂÆÉÈ¶ñÂÖà‰ºöÈÄöËøátryReleaseShared()ÂéªÂ∞ùËØïÈáäÊîæÂÖ±‰∫´ÈîÅ„ÄÇÂ∞ùËØïÊàêÂäüÔºåÂàôÁõ¥Êé•ËøîÂõûÔºõÂ∞ùËØïÂ§±Ë¥•ÔºåÂàôÈÄöËøádoReleaseShared()ÂéªÈáäÊîæÂÖ±‰∫´ÈîÅ„ÄÇ tryReleaseShared() 123456789101112131415161718192021222324252627282930313233343536protected final boolean tryReleaseShared(int unused) &#123; // Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÔºåÂç≥ÈáäÊîæÂÖ±‰∫´ÈîÅÁöÑÁ∫øÁ®ã„ÄÇ Thread current = Thread.currentThread(); // Â¶ÇÊûúÊÉ≥Ë¶ÅÈáäÊîæÈîÅÁöÑÁ∫øÁ®ã(current)ÊòØÁ¨¨1‰∏™Ëé∑ÂèñÈîÅ(firstReader)ÁöÑÁ∫øÁ®ãÔºå // Âπ∂‰∏î‚ÄúÁ¨¨1‰∏™Ëé∑ÂèñÈîÅÁöÑÁ∫øÁ®ãËé∑ÂèñÈîÅÁöÑÊ¨°Êï∞‚Äù=1ÔºåÂàôËÆæÁΩÆfirstReader‰∏∫nullÔºõ // Âê¶ÂàôÔºåÂ∞Ü‚ÄúÁ¨¨1‰∏™Ëé∑ÂèñÈîÅÁöÑÁ∫øÁ®ãÁöÑËé∑ÂèñÊ¨°Êï∞‚Äù-1„ÄÇ if (firstReader == current) &#123; // assert firstReaderHoldCount &gt; 0; if (firstReaderHoldCount == 1) firstReader = null; else firstReaderHoldCount--; // Ëé∑ÂèñrhÂØπË±°ÔºåÂπ∂Êõ¥Êñ∞‚ÄúÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÈîÅÁöÑ‰ø°ÊÅØ‚Äù„ÄÇ &#125; else &#123; HoldCounter rh = cachedHoldCounter; if (rh == null || rh.tid != current.getId()) rh = readHolds.get(); int count = rh.count; if (count &lt;= 1) &#123; readHolds.remove(); if (count &lt;= 0) throw unmatchedUnlockException(); &#125; --rh.count; &#125; for (;;) &#123; // Ëé∑ÂèñÈîÅÁöÑÁä∂ÊÄÅ int c = getState(); // Â∞ÜÈîÅÁöÑËé∑ÂèñÊ¨°Êï∞-1„ÄÇ int nextc = c - SHARED_UNIT; // ÈÄöËøáCASÊõ¥Êñ∞ÈîÅÁöÑÁä∂ÊÄÅ„ÄÇ if (compareAndSetState(c, nextc)) return nextc == 0; &#125;&#125; tryReleaseShared()ÁöÑ‰ΩúÁî®ÊòØÂ∞ùËØïÈáäÊîæÂÖ±‰∫´ÈîÅ„ÄÇ doReleaseShared() 1234567891011121314151617181920212223242526private void doReleaseShared() &#123; for (;;) &#123; // Ëé∑ÂèñCLHÈòüÂàóÁöÑÂ§¥ËäÇÁÇπ Node h = head; // Â¶ÇÊûúÂ§¥ËäÇÁÇπ‰∏ç‰∏∫nullÔºåÂπ∂‰∏îÂ§¥ËäÇÁÇπ‰∏çÁ≠â‰∫étailËäÇÁÇπ„ÄÇ if (h != null &amp;&amp; h != tail) &#123; // Ëé∑ÂèñÂ§¥ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ int ws = h.waitStatus; // Â¶ÇÊûúÂ§¥ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÊòØSIGNALÁä∂ÊÄÅÔºåÂàôÊÑèÂë≥ÁùÄ‚ÄúÂ§¥ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÊâÄÂØπÂ∫îÁöÑÁ∫øÁ®ã‚ÄùÈúÄË¶ÅË¢´unparkÂî§ÈÜí„ÄÇ if (ws == Node.SIGNAL) &#123; // ËÆæÁΩÆ‚ÄúÂ§¥ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÁä∂ÊÄÅ‚Äù‰∏∫Á©∫Áä∂ÊÄÅ„ÄÇÂ§±Ë¥•ÁöÑËØùÔºåÂàôÁªßÁª≠Âæ™ÁéØ„ÄÇ if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0)) continue; // Âî§ÈÜí‚ÄúÂ§¥ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÊâÄÂØπÂ∫îÁöÑÁ∫øÁ®ã‚Äù„ÄÇ unparkSuccessor(h); &#125; // Â¶ÇÊûúÂ§¥ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÊòØÁ©∫Áä∂ÊÄÅÔºåÂàôËÆæÁΩÆ‚ÄúÊñá‰ª∂ÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÊâÄÊã•ÊúâÁöÑÂÖ±‰∫´ÈîÅ‚Äù‰∏∫ÂÖ∂ÂÆÉÁ∫øÁ®ãËé∑ÂèñÈîÅÁöÑÁ©∫Áä∂ÊÄÅ„ÄÇ else if (ws == 0 &amp;&amp; !compareAndSetWaitStatus(h, 0, Node.PROPAGATE)) continue; // loop on failed CAS &#125; // Â¶ÇÊûúÂ§¥ËäÇÁÇπÂèëÁîüÂèòÂåñÔºåÂàôÁªßÁª≠Âæ™ÁéØ„ÄÇÂê¶ÂàôÔºåÈÄÄÂá∫Âæ™ÁéØ„ÄÇ if (h == head) // loop if head changed break; &#125;&#125; doReleaseShared()‰ºöÈáäÊîæ‚ÄúÂÖ±‰∫´ÈîÅ‚Äù„ÄÇÂÆÉ‰ºö‰ªéÂâçÂæÄÂêéÁöÑÈÅçÂéÜÂêåÊ≠•ÈòüÂàóÔºå‰æùÊ¨°‚ÄúÂî§ÈÜí‚ÄùÁÑ∂Âêé‚ÄúÊâßË°å‚ÄùÈòüÂàó‰∏≠ÊØè‰∏™ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÔºõÊúÄÁªàÁöÑÁõÆÁöÑÊòØËÆ©Ëøô‰∫õÁ∫øÁ®ãÈáäÊîæÂÆÉ‰ª¨ÊâÄÊåÅÊúâÁöÑÈîÅ„ÄÇ ÂÖ¨Âπ≥/ÈùûÂÖ¨Âπ≥ÂÖ±‰∫´ÈîÅ Âíå‰∫íÊñ•ÈîÅReentrantLock‰∏ÄÊ†∑ÔºåReadLock‰πüÂàÜ‰∏∫ÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅ„ÄÇ ÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÁöÑÂå∫Âà´Ôºå‰ΩìÁé∞Âú®Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÈòªÂ°ûÁöÑÂáΩÊï∞readerShouldBlock()ÊòØ‰∏çÂêåÁöÑ„ÄÇ ÂÖ¨Âπ≥ÈîÅÁöÑreaderShouldBlock()ÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123final boolean readerShouldBlock() &#123; return hasQueuedPredecessors();&#125; Âú®ÂÖ¨Âπ≥ÂÖ±‰∫´ÈîÅ‰∏≠ÔºåÂ¶ÇÊûúÂú®ÂΩìÂâçÁ∫øÁ®ãÁöÑÂâçÈù¢ÊúâÂÖ∂‰ªñÁ∫øÁ®ãÂú®Á≠âÂæÖËé∑ÂèñÂÖ±‰∫´ÈîÅÔºåÂàôËøîÂõûtrueÔºõÂê¶ÂàôÔºåËøîÂõûfalse„ÄÇ ÈùûÂÖ¨Âπ≥ÈîÅÁöÑreaderShouldBlock()ÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123final boolean readerShouldBlock() &#123; return apparentlyFirstQueuedIsExclusive();&#125; Âú®ÈùûÂÖ¨Âπ≥ÂÖ±‰∫´ÈîÅ‰∏≠ÔºåÂÆÉ‰ºöÊó†ËßÜÂΩìÂâçÁ∫øÁ®ãÁöÑÂâçÈù¢ÊòØÂê¶ÊúâÂÖ∂‰ªñÁ∫øÁ®ãÂú®Á≠âÂæÖËé∑ÂèñÂÖ±‰∫´ÈîÅ„ÄÇÂè™Ë¶ÅËØ•ÈùûÂÖ¨Âπ≥ÂÖ±‰∫´ÈîÅÂØπÂ∫îÁöÑÁ∫øÁ®ã‰∏ç‰∏∫nullÔºåÂàôËøîÂõûtrue„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÁêÜËß£Spring‰∏≠ÁöÑÊ≥®Ëß£]]></title>
    <url>%2Fposts%2Ff989cad5.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ Spring‰∏≠ÁöÑÊ≥®Ëß£Â§ßÊ¶ÇÂèØ‰ª•ÂàÜ‰∏∫‰∏§Á±ªÔºö SpringÁöÑbeanÂÆπÂô®Áõ∏ÂÖ≥ÁöÑÊ≥®Ëß£ÔºåÊàñËÄÖËØ¥beanÂ∑•ÂéÇÁõ∏ÂÖ≥ÁöÑÊ≥®Ëß£Ôºõ SpringmvcÁõ∏ÂÖ≥ÁöÑÊ≥®Ëß£„ÄÇ SpringÁöÑbeanÂÆπÂô®Áõ∏ÂÖ≥ÁöÑÊ≥®Ëß£ÊúâÔºö @Required, @Autowired, @PostConstruct, @PreDestory, ËøòÊúâSpring3.0ÂºÄÂßãÊîØÊåÅÁöÑJSR-330Ê†áÂáÜjavax.inject.*‰∏≠ÁöÑÊ≥®Ëß£Ôºö @Inject, @Named, @Qualifer, @Provider, @Scope, @Singleton„ÄÇ SpringmvcÁõ∏ÂÖ≥ÁöÑÊ≥®Ëß£ÊúâÔºö @Controller, @RequestMapping, @RequestParam, @ResponseBody Á≠âÁ≠â„ÄÇ Ë¶ÅÁêÜËß£Spring‰∏≠ÁöÑÊ≥®Ëß£ÔºåÂÖàË¶ÅÁêÜËß£Java‰∏≠ÁöÑÊ≥®Ëß£„ÄÇ Java‰∏≠ÁöÑÊ≥®Ëß£ @Override Jdk1.5ÂºÄÂßãÂºïÂÖ•Ê≥®Ëß£ÔºåÊúÄÁÜüÊÇâÂ∏∏ËßÅÁöÑÂ∫îËØ•ÊòØ@OverrideÔºåÂÆÉÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 12345678910111213141516171819/** * Indicates that a method declaration is intended to override a * method declaration in a supertype. If a method is annotated with * this annotation type compilers are required to generate an error * message unless at least one of the following conditions hold: * The method does override or implement a method declared in a * supertype. * The method has a signature that is override-equivalent to that of * any public method declared in Object. * * @author Peter von der Ah&amp;eacute; * @author Joshua Bloch * @jls 9.6.1.4 @Override * @since 1.5 */@Target(ElementType.METHOD)@Retention(RetentionPolicy.SOURCE)public @interface Override &#123;&#125; ‰ªéÊ≥®ÈáäÂèØ‰ª•ÁúãÂá∫Ôºå@OverrideÁöÑ‰ΩúÁî®ÊòØÔºåÊèêÁ§∫ÁºñËØëÂô®Ôºå‰ΩøÁî®‰∫Ü@OverrideÊ≥®Ëß£ÁöÑÊñπÊ≥ïÂøÖÈ°ªoverrideÁà∂Á±ªÊàñËÄÖjava.lang.Object‰∏≠ÁöÑ‰∏Ä‰∏™ÂêåÂêçÊñπÊ≥ï„ÄÇÊàë‰ª¨ÁúãÂà∞@OverrideÁöÑÂÆö‰πâ‰∏≠‰ΩøÁî®Âà∞‰∫Ü @Target, @RetentionÔºåÂÆÉ‰ª¨Â∞±ÊòØÊâÄË∞ìÁöÑ‚ÄúÂÖÉÊ≥®Ëß£‚Äù‚Äî‚ÄîÂ∞±ÊòØÂÆö‰πâÊ≥®Ëß£ÁöÑÊ≥®Ëß£ÔºåÊàñËÄÖËØ¥Ê≥®Ëß£Ê≥®Ëß£ÁöÑÊ≥®Ëß£„ÄÇ @Retention Áúã‰∏ã@RetentionÊ≥®Ëß£ÂÆö‰πâÔºö 12345678910111213141516/** * Indicates how long annotations with the annotated type are to * be retained. If no Retention annotation is present on * an annotation type declaration, the retention policy defaults to * RetentionPolicy.CLASS. */@Documented@Retention(RetentionPolicy.RUNTIME)@Target(ElementType.ANNOTATION_TYPE)public @interface Retention &#123; /** * Returns the retention policy. * @return the retention policy */ RetentionPolicy value();&#125; @RetentionÁî®‰∫éÊèêÁ§∫Ê≥®Ëß£Ë¢´‰øùÁïôÂ§öÈïøÊó∂Èó¥ÔºåÊúâ‰∏âÁßçÂèñÂÄºÔºö 12345678910111213141516171819public enum RetentionPolicy &#123; /** * Annotations are to be discarded by the compiler. */ SOURCE, /** * Annotations are to be recorded in the class file by the compiler * but need not be retained by the VM at run time. This is the default * behavior. */ CLASS, /** * Annotations are to be recorded in the class file by the compiler and * retained by the VM at run time, so they may be read reflectively. * * @see java.lang.reflect.AnnotatedElement */ RUNTIME&#125; RetentionPolicy.SOURCE ‰øùÁïôÂú®Ê∫êÁ†ÅÁ∫ßÂà´ÔºåË¢´ÁºñËØëÂô®ÊäõÂºÉ(@OverrideÂ∞±ÊòØÊ≠§Á±ª)Ôºõ RetentionPolicy.CLASSË¢´ÁºñËØëÂô®‰øùÁïôÂú®ÁºñËØëÂêéÁöÑÁ±ªÊñá‰ª∂Á∫ßÂà´Ôºå‰ΩÜÊòØË¢´ËôöÊãüÊú∫‰∏¢ÂºÉÔºõ RetentionPolicy.RUNTIME‰øùÁïôËá≥ËøêË°åÊó∂ÔºåÂèØ‰ª•Ë¢´ÂèçÂ∞ÑËØªÂèñ„ÄÇ @Target 1234567891011121314151617181920212223package java.lang.annotation;/** * Indicates the contexts in which an annotation type is applicable. The * declaration contexts and type contexts in which an annotation type may be * applicable are specified in JLS 9.6.4.1, and denoted in source code by enum * constants of java.lang.annotation.ElementType * @since 1.5 * @jls 9.6.4.1 @Target * @jls 9.7.4 Where Annotations May Appear */@Documented@Retention(RetentionPolicy.RUNTIME)@Target(ElementType.ANNOTATION_TYPE)public @interface Target &#123; /** * Returns an array of the kinds of elements an annotation type * can be applied to. * @return an array of the kinds of elements an annotation type * can be applied to */ ElementType[] value();&#125; @TargetÁî®‰∫éÊèêÁ§∫ËØ•Ê≥®Ëß£‰ΩøÁî®ÁöÑÂú∞ÊñπÔºåÂèñÂÄºÊúâÔºö 12345678910111213141516171819202122232425262728public enum ElementType &#123; /** Class, interface (including annotation type), or enum declaration */ TYPE, /** Field declaration (includes enum constants) */ FIELD, /** Method declaration */ METHOD, /** Formal parameter declaration */ PARAMETER, /** Constructor declaration */ CONSTRUCTOR, /** Local variable declaration */ LOCAL_VARIABLE, /** Annotation type declaration */ ANNOTATION_TYPE, /** Package declaration */ PACKAGE, /** * Type parameter declaration * @since 1.8 */ TYPE_PARAMETER, /** * Use of a type * @since 1.8 */ TYPE_USE&#125; ÂàÜÂà´Ë°®Á§∫ËØ•Ê≥®Ëß£ÂèØ‰ª•Ë¢´‰ΩøÁî®ÁöÑÂú∞ÊñπÔºö Á±ª,Êé•Âè£,Ê≥®Ëß£,enum; Â±ûÊÄßÂüüÔºõ 3ÔºâÊñπÊ≥ïÔºõ 4ÔºâÂèÇÊï∞Ôºõ 5ÔºâÊûÑÈÄ†ÂáΩÊï∞Ôºõ 6ÔºâÂ±ÄÈÉ®ÂèòÈáèÔºõ 7ÔºâÊ≥®Ëß£Á±ªÂûãÔºõ 8ÔºâÂåÖ„ÄÇ ÊâÄ‰ª•Ôºö 1234@Target(ElementType.METHOD)@Retention(RetentionPolicy.SOURCE)public @interface Override &#123;&#125; Ë°®Á§∫ @Override Âè™ËÉΩ‰ΩøÁî®Âú®ÊñπÊ≥ï‰∏äÔºå‰øùÁïôÂú®Ê∫êÁ†ÅÁ∫ßÂà´ÔºåË¢´ÁºñËØëÂô®Â§ÑÁêÜÔºåÁÑ∂ÂêéÊäõÂºÉÊéâ„ÄÇ @Documented 12345678910111213/** * Indicates that annotations with a type are to be documented by javadoc * and similar tools by default. This type should be used to annotate the * declarations of types whose annotations affect the use of annotated * elements by their clients. If a type declaration is annotated with * Documented, its annotations become part of the public API * of the annotated elements. */@Documented@Retention(RetentionPolicy.RUNTIME)@Target(ElementType.ANNOTATION_TYPE)public @interface Documented &#123;&#125; Ë°®Á§∫Ê≥®Ëß£ÊòØÂê¶ËÉΩË¢´ javadoc Â§ÑÁêÜÂπ∂‰øùÁïôÂú®ÊñáÊ°£‰∏≠„ÄÇ ‰ΩøÁî® ÂÖÉÊ≥®Ëß£ Êù•Ëá™ÂÆö‰πâÊ≥®Ëß£ Âíå Â§ÑÁêÜËá™ÂÆö‰πâÊ≥®Ëß£ Êúâ‰∫ÜÂÖÉÊ≥®Ëß£ÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®ÂÆÉÊù•Ëá™ÂÆö‰πâÊàë‰ª¨ÈúÄË¶ÅÁöÑÊ≥®Ëß£„ÄÇÁªìÂêàËá™ÂÆö‰πâÊ≥®Ëß£ÂíåAOPÊàñËÄÖËøáÊª§Âô®ÔºåÂçÅÂàÜÂº∫Â§ß„ÄÇÊØîÂ¶ÇÂèØ‰ª•‰ΩøÁî®Ê≥®Ëß£Êù•ÂÆûÁé∞ÊùÉÈôêÁöÑÁªÜÁ≤íÂ∫¶ÁöÑÊéßÂà∂‚Äî‚ÄîÂú®Á±ªÊàñËÄÖÊñπÊ≥ï‰∏ä‰ΩøÁî®ÊùÉÈôêÊ≥®Ëß£ÔºåÁÑ∂ÂêéÂú®AOPÊàñËÄÖËøáÊª§Âô®‰∏≠ËøõË°åÊã¶Êà™Â§ÑÁêÜ„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÂÖ≥‰∫éÁôªÂΩïÁöÑÊùÉÈôêÁöÑÊ≥®Ëß£ÁöÑÂÆûÁé∞Ôºö 12345678/** * ‰∏çÈúÄË¶ÅÁôªÂΩïÊ≥®Ëß£ */@Target(&#123; ElementType.METHOD, ElementType.TYPE &#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface NoLogin &#123;&#125; Ëá™ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Ê≥®Ëß£ @NoLogin, ÂèØ‰ª•Ë¢´Áî®‰∫é ÊñπÊ≥ï Âíå Á±ª ‰∏äÔºåÊ≥®Ëß£‰∏ÄÁõ¥‰øùÁïôÂà∞ËøêË°åÊúüÔºåÂèØ‰ª•Ë¢´ÂèçÂ∞ÑËØªÂèñÂà∞„ÄÇËØ•Ê≥®Ëß£ÁöÑÂê´‰πâÊòØÔºöË¢´ @NoLogin Ê≥®Ëß£ÁöÑÁ±ªÊàñËÄÖÊñπÊ≥ïÔºåÂç≥‰ΩøÁî®Êà∑Ê≤°ÊúâÁôªÂΩïÔºå‰πüÊòØÂèØ‰ª•ËÆøÈóÆÁöÑ„ÄÇ‰∏ãÈù¢Â∞±ÊòØÂØπÊ≥®Ëß£ËøõË°åÂ§ÑÁêÜ‰∫ÜÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * Ê£ÄÊü•ÁôªÂΩïÊã¶Êà™Âô® * Â¶Ç‰∏çÈúÄË¶ÅÊ£ÄÊü•ÁôªÂΩïÂèØÂú®ÊñπÊ≥ïÊàñËÄÖcontroller‰∏äÂä†‰∏ä@NoLogin */public class CheckLoginInterceptor implements HandlerInterceptor &#123; private static final Logger logger = Logger.getLogger(CheckLoginInterceptor.class); @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; if (!(handler instanceof HandlerMethod)) &#123; logger.warn("ÂΩìÂâçÊìç‰Ωúhandler‰∏ç‰∏∫HandlerMethod=" + handler.getClass().getName() + ",req=" + request.getQueryString()); return true; &#125; HandlerMethod handlerMethod = (HandlerMethod) handler; String methodName = handlerMethod.getMethod().getName(); // Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÊ£ÄÊü•ÁôªÂΩï NoLogin noLogin = handlerMethod.getMethod().getAnnotation(NoLogin.class); if (null != noLogin) &#123; if (logger.isDebugEnabled()) &#123; logger.debug("ÂΩìÂâçÊìç‰ΩúmethodName=" + methodName + "‰∏çÈúÄË¶ÅÊ£ÄÊü•ÁôªÂΩïÊÉÖÂÜµ"); &#125; return true; &#125; noLogin = handlerMethod.getMethod().getDeclaringClass().getAnnotation(NoLogin.class); if (null != noLogin) &#123; if (logger.isDebugEnabled()) &#123; logger.debug("ÂΩìÂâçÊìç‰ΩúmethodName=" + methodName + "‰∏çÈúÄË¶ÅÊ£ÄÊü•ÁôªÂΩïÊÉÖÂÜµ"); &#125; return true; &#125; if (null == request.getSession().getAttribute(CommonConstants.SESSION_KEY_USER)) &#123; logger.warn("ÂΩìÂâçÊìç‰Ωú" + methodName + "Áî®Êà∑Êú™ÁôªÂΩï,ip=" + request.getRemoteAddr()); response.getWriter().write(JsonConvertor.convertFailResult(ErrorCodeEnum.NOT_LOGIN).toString()); // ËøîÂõûÈîôËØØ‰ø°ÊÅØ return false; &#125; return true; &#125; @Override public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123; &#125; @Override public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123; &#125;&#125; ‰∏äÈù¢Êàë‰ª¨ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÁôªÂΩïÊã¶Êà™Âô®ÔºåÈ¶ñÂÖà‰ΩøÁî®ÂèçÂ∞ÑÊù•Âà§Êñ≠ÊñπÊ≥ï‰∏äÊòØÂê¶Ë¢´ @NoLogin Ê≥®Ëß£Ôºö NoLogin noLogin = handlerMethod.getMethod().getAnnotation(NoLogin.class); ÁÑ∂ÂêéÂà§Êñ≠Á±ªÊòØÂê¶Ë¢´ @NoLoginÊ≥®Ëß£Ôºö noLogin = handlerMethod.getMethod().getDeclaringClass().getAnnotation(NoLogin.class); Â¶ÇÊûúË¢´Ê≥®Ëß£‰∫ÜÔºåÂ∞±ËøîÂõû trueÔºåÂ¶ÇÊûúÊ≤°ÊúâË¢´Ê≥®Ëß£ÔºåÂ∞±Âà§Êñ≠ÊòØÂê¶Â∑≤ÁªèÁôªÂΩïÔºåÊ≤°ÊúâÁôªÂΩïÂàôËøîÂõûÈîôËØØ‰ø°ÊÅØÁªôÂâçÂè∞Âíåfalse. ËøôÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰ΩøÁî® Ê≥®Ëß£ Âíå ËøáÊª§Âô® Êù•ËøõË°åÊùÉÈôêÂ§ÑÁêÜÁöÑ‰æãÂ≠ê„ÄÇÊâ©Â±ïÂºÄÊù•ÔºåÈÇ£‰πàÊàë‰ª¨Â∞±ÂèØ‰ª•‰ΩøÁî®Ê≥®Ëß£ÔºåÊù•Ë°®Á§∫ÊüêÊñπÊ≥ïÊàñËÄÖÁ±ªÔºåÂè™ËÉΩË¢´ÂÖ∑ÊúâÊüêÁßçËßíËâ≤ÔºåÊàñËÄÖÂÖ∑ÊúâÊüêÁßçÊùÉÈôêÁöÑÁî®Êà∑ÊâÄËÆøÈóÆÔºåÁÑ∂ÂêéÂú®ËøáÊª§Âô®‰∏≠ËøõË°åÂà§Êñ≠Â§ÑÁêÜ„ÄÇ SpringÁöÑbeanÂÆπÂô®Áõ∏ÂÖ≥ÁöÑÊ≥®Ëß£ @Autowired ÊòØÊàë‰ª¨‰ΩøÁî®ÂæóÊúÄÂ§öÁöÑÊ≥®Ëß£ÔºåÂÖ∂ÂÆûÂ∞±ÊòØ autowire=byType Â∞±ÊòØÊ†πÊçÆÁ±ªÂûãÁöÑËá™Âä®Ê≥®ÂÖ•‰æùËµñÔºàÂü∫‰∫éÊ≥®Ëß£ÁöÑ‰æùËµñÊ≥®ÂÖ•ÔºâÔºåÂèØ‰ª•Ë¢´‰ΩøÁî®Âú®Â±ûÊÄßÂüüÔºåÊñπÊ≥ïÔºåÊûÑÈÄ†ÂáΩÊï∞‰∏ä„ÄÇ @Qualifier Â∞±ÊòØ autowire=byName, @AutowiredÊ≥®Ëß£Âà§Êñ≠Â§ö‰∏™beanÁ±ªÂûãÁõ∏ÂêåÊó∂ÔºåÂ∞±ÈúÄË¶Å‰ΩøÁî® @Qualifier(&quot;xxBean&quot;) Êù•ÊåáÂÆö‰æùËµñÁöÑbeanÁöÑidÔºö 123456@Controller@RequestMapping("/user")public class HelloController &#123; @Autowired @Qualifier("userService") private UserService userService; @Resource Â±û‰∫éJSR-250Ê†áÂáÜÔºåÁî®‰∫éÂ±ûÊÄßÂüüÂíåÊñπÊ≥ï‰∏ä„ÄÇ‰πüÊòØ byName Á±ªÂûãÁöÑ‰æùËµñÊ≥®ÂÖ•„ÄÇ‰ΩøÁî®ÊñπÂºèÔºö@Resource(name=&quot;xxBean&quot;). ‰∏çÂ∏¶ÂèÇÊï∞ÁöÑ @Resource ÈªòËÆ§ÂÄºÁ±ªÂêçÈ¶ñÂ≠óÊØçÂ∞èÂÜô„ÄÇ JSR-330Ê†áÂáÜjavax.inject.*‰∏≠ÁöÑÊ≥®Ëß£(@Inject, @Named, @Qualifier, @Provider, @Scope, @Singleton)„ÄÇ@InjectÂ∞±Áõ∏ÂΩì‰∫é@Autowired, @Named Â∞±Áõ∏ÂΩì‰∫é @Qualifier, Âè¶Â§ñ @Named Áî®Âú®Á±ª‰∏äËøòÊúâ @ComponentÁöÑÂäüËÉΩ„ÄÇ @Component, @Controller, @Service, @Repository, ËøôÂá†‰∏™Ê≥®Ëß£‰∏çÂêå‰∫é‰∏äÈù¢ÁöÑÊ≥®Ëß£Ôºå‰∏äÈù¢ÁöÑÊ≥®Ëß£ÈÉΩÊòØÂ∞ÜË¢´‰æùËµñÁöÑbeanÊ≥®ÂÖ•ËøõÊù•ÔºåËÄåËøôÂá†‰∏™Ê≥®Ëß£ÁöÑ‰ΩúÁî®ÈÉΩÊòØÁîü‰∫ßbean, Ëøô‰∫õÊ≥®Ëß£ÈÉΩÊòØÊ≥®Ëß£Âú®Á±ª‰∏äÔºåÂ∞ÜÁ±ªÊ≥®Ëß£ÊàêspringÁöÑbeanÂ∑•ÂéÇ‰∏≠‰∏Ä‰∏™‰∏Ä‰∏™ÁöÑbean„ÄÇ@Controller, @Service, @RepositoryÂü∫Êú¨Â∞±ÊòØËØ≠‰πâÊõ¥Âä†ÁªÜÂåñÁöÑ@Component„ÄÇ @PostConstruct Âíå @PreDestroy ‰∏çÊòØÁî®‰∫é‰æùËµñÊ≥®ÂÖ•ÔºåËÄåÊòØbean ÁöÑÁîüÂëΩÂë®Êúü„ÄÇÁ±ª‰ºº‰∫é init-method(InitializeingBean)Âíådestory-method(DisposableBean)„ÄÇ Spring‰∏≠Ê≥®Ëß£ÁöÑÂ§ÑÁêÜ spring‰∏≠Ê≥®Ëß£ÁöÑÂ§ÑÁêÜÂü∫Êú¨ÈÉΩÊòØÈÄöËøáÂÆûÁé∞Êé•Âè£ BeanPostProcessor Êù•ËøõË°åÁöÑÔºö 1234public interface BeanPostProcessor &#123; Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException; Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;&#125; Áõ∏ÂÖ≥ÁöÑÂ§ÑÁêÜÁ±ªÊúâÔºö AutowiredAnnotationBeanPostProcessorÔºå CommonAnnotationBeanPostProcessorÔºå PersistenceAnnotationBeanPostProcessorÔºå RequiredAnnotationBeanPostProcessor„ÄÇ Ëøô‰∫õÂ§ÑÁêÜÁ±ªÔºåÂèØ‰ª•ÈÄöËøá &lt;context:annotation-config/&gt; ÈÖçÁΩÆ ÈöêÂºèÁöÑÈÖçÁΩÆËøõspringÂÆπÂô®„ÄÇËøô‰∫õÈÉΩÊòØ‰æùËµñÊ≥®ÂÖ•ÁöÑÂ§ÑÁêÜÔºåËøòÊúâÁîü‰∫ßbeanÁöÑÊ≥®Ëß£(@ComponentÔºå @Controller, @Service, @Repository)ÁöÑÂ§ÑÁêÜÔºö &lt;context:component-scan base-package=&quot;net.aazj.service,net.aazj.aop&quot; /&gt; Ëøô‰∫õÈÉΩÊòØÈÄöËøáÊåáÂÆöÊâ´ÊèèÁöÑÂü∫ÂåÖË∑ØÂæÑÊù•ËøõË°åÁöÑÔºåÂ∞Ü‰ªñ‰ª¨Êâ´ÊèèËøõspringÁöÑbeanÂÆπÂô®„ÄÇÊ≥®ÊÑè &lt;context:component-scan/&gt; ‰πü‰ºöÈªòËÆ§Â∞Ü AutowiredAnnotationBeanPostProcessorÔºåCommonAnnotationBeanPostProcessor ÈÖçÁΩÆËøõÊù•„ÄÇÊâÄ‰ª•&lt;context:annotation-config/&gt;ÊòØÂèØ‰ª•ÁúÅÁï•ÁöÑ„ÄÇÂè¶Â§ñ&lt;context:component-scan/&gt;‰πüÂèØ‰ª•Êâ´Êèè@AspectÈ£éÊ†ºÁöÑAOPÊ≥®Ëß£Ôºå‰ΩÜÊòØÈúÄË¶ÅÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠Âä†ÂÖ• &lt;aop:aspectj-autoproxy/&gt;ËøõË°åÈÖçÂêà„ÄÇ SpringÊ≥®Ëß£ÂíåJSR-330Ê†áÂáÜÊ≥®Ëß£ÁöÑÂå∫Âà´]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-ReentrantLock]]></title>
    <url>%2Fposts%2Ffd3ef277.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ Âú®Jdk5.0‰πãÂâçÔºåÂçèË∞ÉÂØπÂÖ±‰∫´ÂØπË±°ÁöÑËÆøÈóÆÂèØ‰ª•‰ΩøÁî®ÁöÑÊú∫Âà∂Âè™ÊúâsynchronizedÂíåvolatile„ÄÇsynchronizedÂÖ≥ÈîÆÂ≠óÂÆûÁé∞‰∫ÜÂÜÖÁΩÆÈîÅÔºåËÄåvolatileÂÖ≥ÈîÆÂ≠ó‰øùËØÅ‰∫ÜÂ§öÁ∫øÁ®ãÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß„ÄÇÂú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåËøô‰∫õÊú∫Âà∂ÈÉΩËÉΩÂæàÂ•ΩÂú∞ÂÆåÊàêÂ∑•‰ΩúÔºå‰ΩÜÂç¥Êó†Ê≥ïÂÆûÁé∞‰∏Ä‰∫õÊõ¥È´òÁ∫ßÁöÑÂäüËÉΩÔºå‰æãÂ¶ÇÔºåÊó†Ê≥ï‰∏≠Êñ≠‰∏Ä‰∏™Ê≠£Âú®Á≠âÂæÖËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ãÔºåÊó†Ê≥ïÂÆûÁé∞ÈôêÂÆöÊó∂Èó¥ÁöÑËé∑ÂèñÈîÅÊú∫Âà∂ÔºåÊó†Ê≥ïÂÆûÁé∞ÈùûÈòªÂ°ûÁªìÊûÑÁöÑÂä†ÈîÅËßÑÂàôÁ≠â„ÄÇËÄåËøô‰∫õÊõ¥ÁÅµÊ¥ªÁöÑÂä†ÈîÅÊú∫Âà∂ÈÄöÂ∏∏ÈÉΩËÉΩÂ§üÊèê‰æõÊõ¥Â•ΩÁöÑÊ¥ªË∑ÉÊÄßÊàñÊÄßËÉΩ„ÄÇÂõ†Ê≠§ÔºåÂú®Jdk5.0‰∏≠Â¢ûÂä†‰∫Ü‰∏ÄÁßçÊñ∞ÁöÑÊú∫Âà∂ÔºöReentrantLock„ÄÇ ReentrantLockÁ±ªÂÆûÁé∞‰∫ÜLockÊé•Âè£ÔºåÂπ∂Êèê‰æõ‰∫Ü‰∏ésynchronizedÁõ∏ÂêåÁöÑ‰∫íÊñ•ÊÄßÂíåÂÜÖÂ≠òÂèØËßÅÊÄßÔºåÂÆÉÁöÑÂ∫ïÂ±ÇÊòØÈÄöËøáAQSÊù•ÂÆûÁé∞Â§öÁ∫øÁ®ãÂêåÊ≠•ÁöÑ„ÄÇ‰∏éÂÜÖÁΩÆÈîÅÁõ∏ÊØîReentrantLock‰∏ç‰ªÖÊèê‰æõ‰∫ÜÊõ¥‰∏∞ÂØåÁöÑÂä†ÈîÅÊú∫Âà∂ÔºåËÄå‰∏îÂú®ÊÄßËÉΩ‰∏ä‰πü‰∏çÈÄäËâ≤‰∫éÂÜÖÁΩÆÈîÅ(Âú®‰ª•ÂâçÁöÑÁâàÊú¨‰∏≠ÁîöËá≥‰ºò‰∫éÂÜÖÁΩÆÈîÅ)„ÄÇ synchronizedÂÖ≥ÈîÆÂ≠ó JavaÊèê‰æõ‰∫ÜÂÜÖÁΩÆÈîÅÊù•ÊîØÊåÅÂ§öÁ∫øÁ®ãÁöÑÂêåÊ≠•ÔºåJVMÊ†πÊçÆsynchronizedÂÖ≥ÈîÆÂ≠óÊù•Ê†áËØÜÂêåÊ≠•‰ª£Á†ÅÂùó„ÄÇ ÂΩìÁ∫øÁ®ãËøõÂÖ•ÂêåÊ≠•‰ª£Á†ÅÂùóÊó∂‰ºöËá™Âä®Ëé∑ÂèñÈîÅÔºåÈÄÄÂá∫ÂêåÊ≠•‰ª£Á†ÅÂùóÊó∂‰ºöËá™Âä®ÈáäÊîæÈîÅ„ÄÇ‰∏Ä‰∏™Á∫øÁ®ãËé∑ÂæóÈîÅÂêéÂÖ∂‰ªñÁ∫øÁ®ãÂ∞Ü‰ºöË¢´ÈòªÂ°û„ÄÇ ÊØè‰∏™JavaÂØπË±°ÈÉΩÂèØ‰ª•Áî®ÂÅö‰∏Ä‰∏™ÂÆûÁé∞ÂêåÊ≠•ÁöÑÈîÅÔºåsynchronizedÂÖ≥ÈîÆÂ≠óÂèØ‰ª•Áî®Êù•‰øÆÈ•∞ÂØπË±°ÊñπÊ≥ïÔºåÈùôÊÄÅÊñπÊ≥ïÂíå‰ª£Á†ÅÂùó„ÄÇ ÂΩì‰øÆÈ•∞ÂØπË±°ÊñπÊ≥ïÂíåÈùôÊÄÅÊñπÊ≥ïÊó∂ÈîÅÂàÜÂà´ÊòØÊñπÊ≥ïÊâÄÂú®ÁöÑÂØπË±°ÂíåClassÂØπË±°ÔºåÂΩì‰øÆÈ•∞‰ª£Á†ÅÂùóÊó∂ÈúÄÊèê‰æõÈ¢ùÂ§ñÁöÑÂØπË±°‰Ωú‰∏∫ÈîÅ„ÄÇ ÊØè‰∏™JavaÂØπË±°‰πãÊâÄ‰ª•ÂèØ‰ª•‰Ωú‰∏∫ÈîÅÔºåÊòØÂõ†‰∏∫Âú®ÂØπË±°Â§¥‰∏≠ÂÖ≥ËÅî‰∫Ü‰∏Ä‰∏™monitorÂØπË±°(ÁÆ°Á®ã)„ÄÇÁ∫øÁ®ãËøõÂÖ•ÂêåÊ≠•‰ª£Á†ÅÂùóÊó∂‰ºöËá™Âä®ÊåÅÊúâmonitorÂØπË±°ÔºåÈÄÄÂá∫Êó∂‰ºöËá™Âä®ÈáäÊîæmonitorÂØπË±°ÔºåÂΩìmonitorÂØπË±°Ë¢´ÊåÅÊúâÊó∂ÂÖ∂‰ªñÁ∫øÁ®ãÂ∞Ü‰ºöË¢´ÈòªÂ°û„ÄÇÂΩìÁÑ∂Ëøô‰∫õÂêåÊ≠•Êìç‰ΩúÈÉΩÁî±JVMÂ∫ïÂ±ÇÂ∏Æ‰Ω†ÂÆûÁé∞‰∫ÜÔºå‰ΩÜ‰ª•synchronizedÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑÊñπÊ≥ïÂíå‰ª£Á†ÅÂùóÂú®Â∫ïÂ±ÇÂÆûÁé∞‰∏äËøòÊòØÊúâ‰∫õÂå∫Âà´ÁöÑ„ÄÇ synchronizedÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑÊñπÊ≥ïÊòØÈöêÂºèÂêåÊ≠•ÁöÑÔºåÂç≥Êó†ÈúÄÈÄöËøáÂ≠óËäÇÁ†ÅÊåá‰ª§Êù•ÊéßÂà∂ÁöÑÔºåJVMÂèØ‰ª•Ê†πÊçÆÊñπÊ≥ïË°®‰∏≠ÁöÑACC_SYNCHRONIZEDËÆøÈóÆÊ†áÂøóÊù•Âå∫ÂàÜ‰∏Ä‰∏™ÊñπÊ≥ïÊòØÂê¶ÊòØÂêåÊ≠•ÊñπÊ≥ïÔºõ ËÄåsynchronizedÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑ‰ª£Á†ÅÂùóÊòØÊòæÂºèÂêåÊ≠•ÁöÑÔºåÂÆÉÊòØÈÄöËøámonitorenterÂíåmonitorexitÂ≠óËäÇÁ†ÅÊåá‰ª§Êù•ÊéßÂà∂Á∫øÁ®ãÂØπÁÆ°Á®ãÁöÑÊåÅÊúâÂíåÈáäÊîæ„ÄÇ monitorÂØπË±°ÂÜÖÈÉ®ÊåÅÊúâ_countÂ≠óÊÆµÔºå_countÁ≠â‰∫é0Ë°®Á§∫ÁÆ°Á®ãÊú™Ë¢´ÊåÅÊúâÔºå_countÂ§ß‰∫é0Ë°®Á§∫ÁÆ°Á®ãÂ∑≤Ë¢´ÊåÅÊúâÔºåÊØèÊ¨°ÊåÅÊúâÁ∫øÁ®ãÈáçÂÖ•Êó∂_countÈÉΩ‰ºöÂä†1ÔºåÊØèÊ¨°ÊåÅÊúâÁ∫øÁ®ãÈÄÄÂá∫Êó∂_countÈÉΩ‰ºöÂáè1ÔºåËøôÂ∞±ÊòØÂÜÖÁΩÆÈîÅÈáçÂÖ•ÊÄßÁöÑÂÆûÁé∞ÂéüÁêÜ„ÄÇ Âè¶Â§ñÔºåmonitorÂØπË±°ÂÜÖÈÉ®ËøòÊúâ‰∏§Êù°ÈòüÂàó_EntryListÂíå_WaitSetÔºåÂØπÂ∫îÁùÄAQSÁöÑÂêåÊ≠•ÈòüÂàóÂíåÊù°‰ª∂ÈòüÂàóÔºåÂΩìÁ∫øÁ®ãËé∑ÂèñÈîÅÂ§±Ë¥•Êó∂‰ºöÂà∞_EntryList‰∏≠ÈòªÂ°ûÔºåÂΩìË∞ÉÁî®ÈîÅÂØπË±°ÁöÑwaitÊñπÊ≥ïÊó∂Á∫øÁ®ãÂ∞Ü‰ºöËøõÂÖ•_WaitSet‰∏≠Á≠âÂæÖÔºåËøôÊòØÂÜÖÁΩÆÈîÅÁöÑÁ∫øÁ®ãÂêåÊ≠•ÂíåÊù°‰ª∂Á≠âÂæÖÁöÑÂÆûÁé∞ÂéüÁêÜ„ÄÇ ReentrantLockÂíåSynchronizedÁöÑÂØπÊØî synchronizedÂÖ≥ÈîÆÂ≠óÊòØJavaÊèê‰æõÁöÑÂÜÖÁΩÆÈîÅÊú∫Âà∂ÔºåÂÖ∂ÂêåÊ≠•Êìç‰ΩúÁî±Â∫ïÂ±ÇJVMÂÆûÁé∞ÔºåËÄåReentrantLockÊòØjava.util.concurrentÂåÖÊèê‰æõÁöÑÊòæÂºèÈîÅÔºåÂÖ∂ÂêåÊ≠•Êìç‰ΩúÁî±AQSÂêåÊ≠•Âô®Êèê‰æõÊîØÊåÅ„ÄÇ ReentrantLockÂú®Âä†ÈîÅÂíåÂÜÖÂ≠ò‰∏äÊèê‰æõÁöÑËØ≠‰πâ‰∏éÂÜÖÁΩÆÈîÅÁõ∏ÂêåÔºåÊ≠§Â§ñÂÆÉËøòÊèê‰æõ‰∫Ü‰∏Ä‰∫õÂÖ∂‰ªñÂäüËÉΩÔºåÂåÖÊã¨ÂÆöÊó∂ÁöÑÈîÅÁ≠âÂæÖÔºåÂèØ‰∏≠Êñ≠ÁöÑÈîÅÁ≠âÂæÖÔºåÂÖ¨Âπ≥ÈîÅÔºå‰ª•ÂèäÂÆûÁé∞ÈùûÂùóÁªìÊûÑÁöÑÂä†ÈîÅ„ÄÇ Âú®Êó©ÊúüÁöÑJDKÁâàÊú¨‰∏≠ReentrantLockÂú®ÊÄßËÉΩ‰∏äËøòÂç†Êúâ‰∏ÄÂÆöÁöÑ‰ºòÂäøÔºåÊó¢ÁÑ∂ReentrantLockÊã•ÊúâËøô‰πàÂ§ö‰ºòÂäøÔºå‰∏∫‰ªÄ‰πàËøòË¶Å‰ΩøÁî®synchronizedÂÖ≥ÈîÆÂ≠óÂë¢Ôºü‰∫ãÂÆû‰∏äÁ°ÆÂÆûÊúâËÆ∏Â§ö‰∫∫‰ΩøÁî®ReentrantLockÊù•Êõø‰ª£synchronizedÂÖ≥ÈîÆÂ≠óÁöÑÂä†ÈîÅÊìç‰Ωú„ÄÇ‰ΩÜÊòØÂÜÖÁΩÆÈîÅ‰ªçÁÑ∂ÊúâÂÆÉÁâπÊúâÁöÑ‰ºòÂäøÔºåÂÜÖÁΩÆÈîÅ‰∏∫ËÆ∏Â§öÂºÄÂèë‰∫∫ÂëòÊâÄÁÜüÊÇâÔºå‰ΩøÁî®ÊñπÂºè‰πüÊõ¥Âä†ÁöÑÁÆÄÊ¥ÅÁ¥ßÂáëÔºåÂõ†‰∏∫ÊòæÂºèÈîÅÂøÖÈ°ªÊâãÂä®Âú®finallyÂùó‰∏≠Ë∞ÉÁî®unlockÔºåÊâÄ‰ª•‰ΩøÁî®ÂÜÖÁΩÆÈîÅÁõ∏ÂØπÊù•ËØ¥‰ºöÊõ¥Âä†ÂÆâÂÖ®‰∫õ„ÄÇÂêåÊó∂Êú™Êù•Êõ¥Âä†ÂèØËÉΩ‰ºöÂéªÊèêÂçásynchronizedËÄå‰∏çÊòØReentrantLockÁöÑÊÄßËÉΩ„ÄÇÂõ†‰∏∫synchronizedÊòØJVMÁöÑÂÜÖÁΩÆÂ±ûÊÄßÔºåÂÆÉËÉΩÊâßË°å‰∏Ä‰∫õ‰ºòÂåñÔºå‰æãÂ¶ÇÂØπÁ∫øÁ®ãÂ∞ÅÈó≠ÁöÑÈîÅÂØπË±°ÁöÑÈîÅÊ∂àÈô§‰ºòÂåñÔºåÈÄöËøáÂ¢ûÂä†ÈîÅÁöÑÁ≤íÂ∫¶Êù•Ê∂àÈô§ÂÜÖÁΩÆÈîÅÁöÑÂêåÊ≠•ÔºåËÄåÂ¶ÇÊûúÈÄöËøáÂü∫‰∫éÁ±ªÂ∫ìÁöÑÈîÅÊù•ÂÆûÁé∞Ëøô‰∫õÂäüËÉΩÔºåÂàôÂèØËÉΩÊÄß‰∏çÂ§ß„ÄÇÊâÄ‰ª•ÂΩìÈúÄË¶Å‰∏Ä‰∫õÈ´òÁ∫ßÂäüËÉΩÊó∂ÊâçÂ∫îËØ•‰ΩøÁî®ReentrantLockÔºåËøô‰∫õÂäüËÉΩÂåÖÊã¨ÔºöÂèØÂÆöÊó∂ÁöÑÔºåÂèØËΩÆËØ¢ÁöÑ‰∏éÂèØ‰∏≠Êñ≠ÁöÑÈîÅËé∑ÂèñÊìç‰ΩúÔºåÂÖ¨Âπ≥ÈòüÂàóÔºå‰ª•ÂèäÈùûÂùóÁªìÊûÑÁöÑÈîÅ„ÄÇÂê¶ÂàôÔºåËøòÊòØÂ∫îËØ•‰ºòÂÖà‰ΩøÁî®synchronized„ÄÇ Ëé∑ÂèñÈîÅÂíåÈáäÊîæÈîÅ È¶ñÂÖàÈÄöËøá‰∏Ä‰∏™‰æãÂ≠êÊù•‰∫ÜËß£‰∏ãReentrantLockÁöÑÁî®Ê≥ïÔºöÂ¶ÇÊûúÊúâ‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáècountÔºåÊúâ10‰∏™Á∫øÁ®ãÂØπÂÆÉËøõË°åÁ¥ØÂä†ÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÁ¥ØÂä†1000Ê¨°ÔºåËøôÊÆµ‰ª£Á†ÅÊÄéÊ†∑ËÆæËÆ°Âë¢Ôºü ÊúâÂæàÂ§öÁßçÂäûÊ≥ïÔºåÂèØ‰ª•Âà©Áî®synchronizedÂÖ≥ÈîÆÂ≠óÔºå‰πüÂèØ‰ª•Âà©Áî®ÂéüÂ≠êÁ±ªAtomicInteger,ÈÇ£Êàë‰ª¨Âà©Áî®ReentrantLockÊÄéÊ†∑Â§ÑÁêÜÁöÑÔºü 123456789101112131415161718192021222324252627282930package main.java.com.study.lock;/** * @author: whb * @description: ReentrantLockÊµãËØïÁ±ª */public class ReentrantLockTest &#123; private static int count = 0; //ÈªòËÆ§ÊòØËé∑Âèñ‰∏Ä‰∏™ÈùûÂÖ¨Âπ≥ÈîÅ private static ReentrantLock lock = new ReentrantLock(); public static void main(String[] args) throws InterruptedException &#123; for (int i = 0; i &lt; 10; i++) &#123; new Thread(() -&gt; &#123; try &#123; //ÊâßË°åÂâçÂÖàÂä†ÈîÅ lock.lock(); for (int j = 0; j &lt; 1000; j++) &#123; count++; &#125; &#125; finally &#123; //ÊúÄÂêéÈáäÊîæÈîÅ lock.unlock(); &#125; &#125;).start(); &#125; Thread.sleep(5000); System.out.println("count=" + count); &#125;&#125; ‰ª•‰∏ãÊòØËé∑ÂèñÈîÅÂíåÈáäÊîæÈîÅËøô‰∏§‰∏™Êìç‰ΩúÁöÑAPI„ÄÇ 12345678//Ëé∑ÂèñÈîÅÁöÑÊìç‰Ωúpublic void lock() &#123; sync.lock();&#125;//ÈáäÊîæÈîÅÁöÑÊìç‰Ωúpublic void unlock() &#123; sync.release(1);&#125; ÈîÅÁöÑËé∑ÂèñÂíåÈáäÊîæÁöÑÊ∫êÁ†ÅÂπ∂Ê≤°ÊúâÊõ¥Â§öÁöÑÈÄªËæëÔºåËÄåÊ†∏ÂøÉÁöÑÈÄªËæëÂàÜÂà´ÂßîÊâòÁªôSyncÂØπË±°ÁöÑlockÊñπÊ≥ïÂíåreleaseÊñπÊ≥ï„ÄÇÈÇ£‰πàSyncÂèàÊòØ‰ªÄ‰πàÂë¢ÔºüÂú®AQSÁöÑÊñáÁ´†‰∏≠ÊèêÂà∞ËøáÔºåÂú®Âπ∂ÂèëÂåÖ‰∏≠ÈîÅÁöÑÂ∫ïÂ±ÇÂÆûÁé∞ÈÉΩÊòØÈÄöËøáAQSÊ°ÜÊû∂ÂÆûÁé∞ÁöÑ„ÄÇ Â¶ÇÊûúÊÉ≥ÂÆûÁé∞Áã¨Âç†ÈîÅÔºåÂ≠êÁ±ªÂè™ÈúÄË¶ÅÂÆûÁé∞Â¶Ç‰∏ãÊñπÊ≥ïÔºö 1ÔºöËé∑ÂèñÈîÅÔºötryAcquire() 2ÔºöÈáäÊîæÈîÅÔºötryRelease() Â¶ÇÊûúÊÉ≥ÂÆûÁé∞ÂÖ±‰∫´ÈîÅÔºö 1: Ëé∑ÂèñÈîÅÔºötryAcquireShared() 2: ÈáäÊîæÈîÅÔºötryReleaseShared() SyncÂ∞±ÊòØAQSÁöÑÂ≠êÁ±ª,Âπ∂‰∏îÊòØÁã¨Âç†ÈîÅÊ®°Âºè„ÄÇ Âú®ReentrantLock‰∏≠Êúâ‰∏§ÁßçÊ®°ÂºèÔºö‰∏ÄÁßçÊòØÈùûÂÖ¨Âπ≥Ê®°ÂºèËé∑ÂèñÈîÅÔºåÂè¶‰∏ÄÁßçÊòØÂÖ¨Âπ≥Ê®°ÂºèËé∑ÂèñÈîÅ„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊòØÈùûÂÖ¨Âπ≥ÁöÑ„ÄÇ 1234567891011121314151617181920212223242526272829303132public class ReentrantLock implements Lock, java.io.Serializable &#123; private final Sync sync; abstract static class Sync extends AbstractQueuedSynchronizer &#123; abstract void lock(); &#125; //ÂÆûÁé∞ÈùûÂÖ¨Âπ≥ÈîÅÁöÑÂêåÊ≠•Âô® static final class NonfairSync extends Sync &#123; final void lock() &#123; ... &#125; &#125; //ÂÆûÁé∞ÂÖ¨Âπ≥ÈîÅÁöÑÂêåÊ≠•Âô® static final class FairSync extends Sync &#123; final void lock() &#123; ... &#125; &#125; //ÈªòËÆ§ÊûÑÈÄ†Âô®ÔºöÈùûÂÖ¨Âπ≥ÈîÅ public ReentrantLock() &#123; sync = new NonfairSync(); &#125; //Â∏¶ÂèÇÊûÑÈÄ†Âô®Ôºöfair=trueË°®Á§∫ÊòØÂÖ¨Âπ≥Ê®°ÂºèËé∑ÂèñÈîÅ;fair=falseË°®Á§∫ÊòØÈùûÂÖ¨Âπ≥Ê®°ÂºèËé∑ÂèñÈîÅ public ReentrantLock(boolean fair) &#123; sync = fair ? new FairSync() : new NonfairSync(); &#125;&#125; Ë∞ÉÁî®ÈªòËÆ§Êó†ÂèÇÊûÑÈÄ†Âô®‰ºöÂ∞ÜNonfairSyncÂÆû‰æãËµãÂÄºÁªôsyncÔºåÊ≠§Êó∂ÈîÅÊòØÈùûÂÖ¨Âπ≥ÈîÅ„ÄÇÊúâÂèÇÊûÑÈÄ†Âô®ÂÖÅËÆ∏ÈÄöËøáÂèÇÊï∞Êù•ÊåáÂÆöÊòØÂ∞ÜFairSyncÂÆû‰æãËøòÊòØNonfairSyncÂÆû‰æãËµãÂÄºÁªôsync„ÄÇNonfairSyncÂíåFairSyncÈÉΩÊòØÁªßÊâøËá™SyncÁ±ªÂπ∂ÈáçÂÜô‰∫Ülock()ÊñπÊ≥ïÔºåÊâÄ‰ª•ÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÂú®Ëé∑ÂèñÈîÅÁöÑÊñπÂºè‰∏äÊúâ‰∫õÂå∫Âà´„ÄÇ ÂÜçÊù•ÁúãÁúãÈáäÊîæÈîÅÁöÑÊìç‰ΩúÔºåÊØèÊ¨°Ë∞ÉÁî®unlock()ÊñπÊ≥ïÈÉΩÂè™ÊòØÂéªÊâßË°åsync.release(1)Êìç‰ΩúÔºåËøôÊ≠•Êìç‰Ωú‰ºöË∞ÉÁî®AbstractQueuedSynchronizerÁ±ªÁöÑrelease()ÊñπÊ≥ïÔºå‰∏ãÈù¢Áúã‰∏Ä‰∏ãÔºö 123456789101112131415//ÈáäÊîæÈîÅÁöÑÊìç‰Ωú(Áã¨Âç†Ê®°Âºè)public final boolean release(int arg) &#123; //Â∞ùËØïÈáäÊîæÈîÅ if (tryRelease(arg)) &#123; //Ëé∑ÂèñheadÁªìÁÇπ Node h = head; //Â¶ÇÊûúheadÁªìÁÇπ‰∏ç‰∏∫Á©∫Âπ∂‰∏îÁ≠âÂæÖÁä∂ÊÄÅ‰∏çÁ≠â‰∫é0Â∞±ÂéªÂî§ÈÜíÂêéÁªßÁªìÁÇπ if (h != null &amp;&amp; h.waitStatus != 0) &#123; //Âî§ÈÜíÂêéÁªßÁªìÁÇπ unparkSuccessor(h); &#125; return true; &#125; return false;&#125; Ëøô‰∏™releaseÊñπÊ≥ïÊòØAQSÊèê‰æõÁöÑÈáäÊîæÈîÅÊìç‰ΩúÁöÑAPIÔºåÂÆÉÈ¶ñÂÖà‰ºöÂéªË∞ÉÁî®tryReleaseÊñπÊ≥ïÂéªÂ∞ùËØïËé∑ÂèñÈîÅÔºåtryReleaseÊñπÊ≥ïÊòØÊäΩË±°ÊñπÊ≥ïÔºåÂÆÉÁöÑÂÆûÁé∞ÈÄªËæëÂú®Â≠êÁ±ªSyncÈáåÈù¢„ÄÇ 123456789101112131415161718//Â∞ùËØïÈáäÊîæÈîÅprotected final boolean tryRelease(int releases) &#123; int c = getState() - releases; //Â¶ÇÊûúÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ã‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÂ∞±ÊäõÂá∫ÂºÇÂ∏∏ if (Thread.currentThread() != getExclusiveOwnerThread()) &#123; throw new IllegalMonitorStateException(); &#125; boolean free = false; //Â¶ÇÊûúÂêåÊ≠•Áä∂ÊÄÅ‰∏∫0ÂàôË°®ÊòéÈîÅË¢´ÈáäÊîæ if (c == 0) &#123; //ËÆæÁΩÆÈîÅË¢´ÈáäÊîæÁöÑÊ†áÂøó‰∏∫Áúü free = true; //ËÆæÁΩÆÂç†Áî®Á∫øÁ®ã‰∏∫Á©∫ setExclusiveOwnerThread(null); &#125; setState(c); return free;&#125; Ëøô‰∏™tryReleaseÊñπÊ≥ïÈ¶ñÂÖà‰ºöËé∑ÂèñÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅÔºåÂπ∂Â∞ÜÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅÂáèÂéª‰º†ÂÖ•ÁöÑÂèÇÊï∞ÂÄºÂæóÂà∞Êñ∞ÁöÑÂêåÊ≠•Áä∂ÊÄÅÔºåÁÑ∂ÂêéÂà§Êñ≠Êñ∞ÁöÑÂêåÊ≠•Áä∂ÊÄÅÊòØÂê¶Á≠â‰∫é0ÔºåÂ¶ÇÊûúÁ≠â‰∫é0ÂàôË°®ÊòéÂΩìÂâçÈîÅË¢´ÈáäÊîæÔºåÁÑ∂ÂêéÂÖàÂ∞ÜÈîÅÁöÑÈáäÊîæÁä∂ÊÄÅÁΩÆ‰∏∫ÁúüÔºåÂÜçÂ∞ÜÂΩìÂâçÂç†ÊúâÈîÅÁöÑÁ∫øÁ®ãÊ∏ÖÁ©∫ÔºåÊúÄÂêéË∞ÉÁî®setStateÊñπÊ≥ïËÆæÁΩÆÊñ∞ÁöÑÂêåÊ≠•Áä∂ÊÄÅÂπ∂ËøîÂõûÈîÅÁöÑÈáäÊîæÁä∂ÊÄÅ„ÄÇ ÂÖ¨Âπ≥ÈîÅ/ÈùûÂÖ¨Âπ≥ÈîÅ ReentrantLockÊòØÂÖ¨Âπ≥ÈîÅËøòÊòØÈùûÂÖ¨Âπ≥ÈîÅÊòØÂü∫‰∫ésyncÊåáÂêëÁöÑÊòØÂì™‰∏™ÂÖ∑‰ΩìÂÆû‰æã„ÄÇÂú®ÊûÑÈÄ†Êó∂‰ºö‰∏∫ÊàêÂëòÂèòÈáèsyncËµãÂÄºÔºåÂ¶ÇÊûúËµãÂÄº‰∏∫NonfairSyncÂÆû‰æãÂàôË°®ÊòéÊòØÈùûÂÖ¨Âπ≥ÈîÅÔºåÂ¶ÇÊûúËµãÂÄº‰∏∫FairSyncÂÆû‰æãÂàôË°®Êòé‰∏∫ÂÖ¨Âπ≥ÈîÅ„ÄÇÂ¶ÇÊûúÊòØÂÖ¨Âπ≥ÈîÅÔºåÁ∫øÁ®ãÂ∞ÜÊåâÁÖßÂÆÉ‰ª¨ÂèëÂá∫ËØ∑Ê±ÇÁöÑÈ°∫Â∫èÊù•Ëé∑ÂæóÈîÅÔºå‰ΩÜÂú®ÈùûÂÖ¨Âπ≥ÈîÅ‰∏äÔºåÂàôÂÖÅËÆ∏ÊèíÈòüË°å‰∏∫ÔºöÂΩì‰∏Ä‰∏™Á∫øÁ®ãËØ∑Ê±ÇÈùûÂÖ¨Âπ≥ÁöÑÈîÅÊó∂ÔºåÂ¶ÇÊûúÂú®ÂèëÂá∫ËØ∑Ê±ÇÁöÑÂêåÊó∂ËØ•ÈîÅÁöÑÁä∂ÊÄÅÂèò‰∏∫ÂèØÁî®ÔºåÈÇ£‰πàËøô‰∏™Á∫øÁ®ãÂ∞ÜË∑≥ËøáÈòüÂàó‰∏≠ÊâÄÊúâÁ≠âÂæÖÁöÑÁ∫øÁ®ãÁõ¥Êé•Ëé∑ÂæóËøô‰∏™ÈîÅ„ÄÇ ÈùûÂÖ¨Âπ≥ÈîÅ 12345678910111213141516171819202122232425//ÈùûÂÖ¨Âπ≥ÂêåÊ≠•Âô®static final class NonfairSync extends Sync &#123; //ÂÆûÁé∞Áà∂Á±ªÁöÑÊäΩË±°Ëé∑ÂèñÈîÅÁöÑÊñπÊ≥ï final void lock() &#123; //‰ΩøÁî®CASÊñπÂºèËÆæÁΩÆÂêåÊ≠•Áä∂ÊÄÅ if (compareAndSetState(0, 1)) &#123; //Â¶ÇÊûúËÆæÁΩÆÊàêÂäüÂàôË°®ÊòéÈîÅÊ≤°Ë¢´Âç†Áî® setExclusiveOwnerThread(Thread.currentThread()); &#125; else &#123; //Âê¶ÂàôË°®ÊòéÈîÅÂ∑≤ÁªèË¢´Âç†Áî®, Ë∞ÉÁî®acquireËÆ©Á∫øÁ®ãÂéªÂêåÊ≠•ÈòüÂàóÊéíÈòüËé∑Âèñ acquire(1); &#125; &#125; //Â∞ùËØïËé∑ÂèñÈîÅÁöÑÊñπÊ≥ï protected final boolean tryAcquire(int acquires) &#123; return nonfairTryAcquire(acquires); &#125;&#125;//‰ª•‰∏çÂèØ‰∏≠Êñ≠Ê®°ÂºèËé∑ÂèñÈîÅ(Áã¨Âç†Ê®°Âºè)public final void acquire(int arg) &#123; if (!tryAcquire(arg) &amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg)) &#123; selfInterrupt(); &#125;&#125; ÂèØ‰ª•ÁúãÂà∞Âú®ÈùûÂÖ¨Âπ≥ÈîÅÁöÑlockÊñπÊ≥ï‰∏≠ÔºåÁ∫øÁ®ãÁ¨¨‰∏ÄÊ≠•Â∞±‰ºö‰ª•CASÊñπÂºèÂ∞ÜÂêåÊ≠•Áä∂ÊÄÅÁöÑÂÄº‰ªé0Êîπ‰∏∫1„ÄÇÂÖ∂ÂÆûËøôÊ≠•Êìç‰ΩúÂ∞±Á≠â‰∫éÂéªÂ∞ùËØïËé∑ÂèñÈîÅÔºåÂ¶ÇÊûúÊõ¥ÊîπÊàêÂäüÂàôË°®ÊòéÁ∫øÁ®ãÂàöÊù•Â∞±Ëé∑Âèñ‰∫ÜÈîÅÔºåËÄå‰∏çÂøÖÂÜçÂéªÂêåÊ≠•ÈòüÂàóÈáåÈù¢ÊéíÈòü‰∫Ü„ÄÇÂ¶ÇÊûúÊõ¥ÊîπÂ§±Ë¥•ÂàôË°®ÊòéÁ∫øÁ®ãÂàöÊù•Êó∂ÈîÅËøòÊú™Ë¢´ÈáäÊîæÔºåÊâÄ‰ª•Êé•‰∏ãÊù•Â∞±Ë∞ÉÁî®acquireÊñπÊ≥ï„ÄÇËøô‰∏™acquireÊñπÊ≥ïÊòØÁªßÊâøËá™AbstractQueuedSynchronizerÁöÑÊñπÊ≥ïÔºöÁ∫øÁ®ãËøõÂÖ•acquireÊñπÊ≥ïÂêéÈ¶ñÂÖàÂéªË∞ÉÁî®tryAcquireÊñπÊ≥ïÂ∞ùËØïÂéªËé∑ÂèñÈîÅÔºåÁî±‰∫éNonfairSyncË¶ÜÁõñ‰∫ÜtryAcquireÊñπÊ≥ïÔºåÂπ∂Âú®ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®‰∫ÜÁà∂Á±ªSyncÁöÑnonfairTryAcquireÊñπÊ≥ïÔºåÊâÄ‰ª•ËøôÈáå‰ºöË∞ÉÁî®Âà∞nonfairTryAcquireÊñπÊ≥ïÂéªÂ∞ùËØïËé∑ÂèñÈîÅ„ÄÇ‰∏ãÈù¢ÁúãÁúãËøô‰∏™ÊñπÊ≥ïÂÖ∑‰ΩìÂÅö‰∫Ü‰∫õ‰ªÄ‰πà„ÄÇ 123456789101112131415161718192021222324252627//ÈùûÂÖ¨Âπ≥ÁöÑËé∑ÂèñÈîÅfinal boolean nonfairTryAcquire(int acquires) &#123; //Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ã final Thread current = Thread.currentThread(); //Ëé∑ÂèñÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅ int c = getState(); //Â¶ÇÊûúÂêåÊ≠•Áä∂ÊÄÅ‰∏∫0ÂàôË°®ÊòéÈîÅÊ≤°ÊúâË¢´Âç†Áî® if (c == 0) &#123; //‰ΩøÁî®CASÊõ¥Êñ∞ÂêåÊ≠•Áä∂ÊÄÅ if (compareAndSetState(0, acquires)) &#123; //ËÆæÁΩÆÁõÆÂâçÂç†Áî®ÈîÅÁöÑÁ∫øÁ®ã setExclusiveOwnerThread(current); return true; &#125; //Âê¶ÂàôÁöÑËØùÂ∞±Âà§Êñ≠ÊåÅÊúâÈîÅÁöÑÊòØÂê¶ÊòØÂΩìÂâçÁ∫øÁ®ã &#125;else if (current == getExclusiveOwnerThread()) &#123; //Â¶ÇÊûúÈîÅÊòØË¢´ÂΩìÂâçÁ∫øÁ®ãÊåÅÊúâÁöÑ, Â∞±Áõ¥Êé•‰øÆÊîπÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅ int nextc = c + acquires; if (nextc &lt; 0) &#123; throw new Error("Maximum lock count exceeded"); &#125; setState(nextc); return true; &#125; //Â¶ÇÊûúÊåÅÊúâÈîÅÁöÑ‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÂàôËøîÂõûÂ§±Ë¥•Ê†áÂøó return false;&#125; nonfairTryAcquireÊñπÊ≥ïÊòØSyncÁöÑÊñπÊ≥ïÔºåÂèØ‰ª•ÁúãÂà∞Á∫øÁ®ãËøõÂÖ•Ê≠§ÊñπÊ≥ïÂêéÈ¶ñÂÖàÂéªËé∑ÂèñÂêåÊ≠•Áä∂ÊÄÅÔºåÂ¶ÇÊûúÂêåÊ≠•Áä∂ÊÄÅ‰∏∫0Â∞±‰ΩøÁî®CASÊìç‰ΩúÊõ¥ÊîπÂêåÊ≠•Áä∂ÊÄÅÔºåÂÖ∂ÂÆûËøôÂèàÊòØËé∑Âèñ‰∫Ü‰∏ÄÈÅçÈîÅ„ÄÇÂ¶ÇÊûúÂêåÊ≠•Áä∂ÊÄÅ‰∏ç‰∏∫0Ë°®ÊòéÈîÅË¢´Âç†Áî®ÔºåÊ≠§Êó∂‰ºöÂÖàÂéªÂà§Êñ≠ÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÊòØÂê¶ÊòØÂΩìÂâçÁ∫øÁ®ãÔºåÂ¶ÇÊûúÊòØÁöÑËØùÂ∞±Â∞ÜÂêåÊ≠•Áä∂ÊÄÅÂä†1ÔºåÂê¶ÂàôÁöÑËØùËøôÊ¨°Â∞ùËØïËé∑ÂèñÈîÅÁöÑÊìç‰ΩúÂÆ£ÂëäÂ§±Ë¥•„ÄÇ‰∫éÊòØ‰ºöË∞ÉÁî®addWaiterÊñπÊ≥ïÂ∞ÜÁ∫øÁ®ãÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàó„ÄÇ Áªº‰∏äÊù•ÁúãÔºåÂú®ÈùûÂÖ¨Âπ≥ÈîÅÁöÑÊ®°Âºè‰∏ã‰∏Ä‰∏™Á∫øÁ®ãÂú®ËøõÂÖ•ÂêåÊ≠•ÈòüÂàó‰πãÂâç‰ºöÂ∞ùËØïËé∑Âèñ‰∏§ÈÅçÈîÅÔºåÂ¶ÇÊûúËé∑ÂèñÊàêÂäüÂàô‰∏çËøõÂÖ•ÂêåÊ≠•ÈòüÂàóÊéíÈòüÔºåÂê¶ÂàôÊâçËøõÂÖ•ÂêåÊ≠•ÈòüÂàóÊéíÈòü„ÄÇ ÂÖ¨Âπ≥ÈîÅ 1234567891011121314151617181920212223242526272829303132333435363738394041424344//ÂÆûÁé∞ÂÖ¨Âπ≥ÈîÅÁöÑÂêåÊ≠•Âô®static final class FairSync extends Sync &#123; //ÂÆûÁé∞Áà∂Á±ªÁöÑÊäΩË±°Ëé∑ÂèñÈîÅÁöÑÊñπÊ≥ï final void lock() &#123; //Ë∞ÉÁî®acquireËÆ©Á∫øÁ®ãÂéªÂêåÊ≠•ÈòüÂàóÊéíÈòüËé∑Âèñ acquire(1); &#125; //Â∞ùËØïËé∑ÂèñÈîÅÁöÑÊñπÊ≥ï protected final boolean tryAcquire(int acquires) &#123; //Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ã final Thread current = Thread.currentThread(); //Ëé∑ÂèñÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅ int c = getState(); //Â¶ÇÊûúÂêåÊ≠•Áä∂ÊÄÅ0ÂàôË°®Á§∫ÈîÅÊ≤°Ë¢´Âç†Áî® if (c == 0) &#123; //Âà§Êñ≠ÂêåÊ≠•ÈòüÂàóÊòØÂê¶ÊúâÂâçÈ©±ÁªìÁÇπ if (!hasQueuedPredecessors() &amp;&amp; compareAndSetState(0, acquires)) &#123; //Â¶ÇÊûúÊ≤°ÊúâÂâçÈ©±ÁªìÁÇπ‰∏îËÆæÁΩÆÂêåÊ≠•Áä∂ÊÄÅÊàêÂäüÂ∞±Ë°®Á§∫Ëé∑ÂèñÈîÅÊàêÂäü setExclusiveOwnerThread(current); return true; &#125; //Âê¶ÂàôÂà§Êñ≠ÊòØÂê¶ÊòØÂΩìÂâçÁ∫øÁ®ãÊåÅÊúâÈîÅ &#125;else if (current == getExclusiveOwnerThread()) &#123; //Â¶ÇÊûúÊòØÂΩìÂâçÁ∫øÁ®ãÊåÅÊúâÈîÅÂ∞±Áõ¥Êé•‰øÆÊîπÂêåÊ≠•Áä∂ÊÄÅ int nextc = c + acquires; if (nextc &lt; 0) &#123; throw new Error("Maximum lock count exceeded"); &#125; setState(nextc); return true; &#125; //Â¶ÇÊûú‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÊåÅÊúâÈîÅÂàôËé∑ÂèñÂ§±Ë¥• return false; &#125;&#125;//Âà§Êñ≠ÊòØÂê¶ÊúâÂâçÈ©±ÁªìÁÇπpublic final boolean hasQueuedPredecessors() &#123; Node t = tail; Node h = head; Node s; return h != t &amp;&amp; ((s = h.next) == null || s.thread != Thread.currentThread());&#125; Ë∞ÉÁî®ÂÖ¨Âπ≥ÈîÅÁöÑlockÊñπÊ≥ïÊó∂‰ºöÁõ¥Êé•Ë∞ÉÁî®acquireÊñπÊ≥ï„ÄÇÂêåÊ†∑ÁöÑÔºåacquireÊñπÊ≥ïÈ¶ñÂÖà‰ºöË∞ÉÁî®FairSyncÈáçÂÜôÁöÑtryAcquireÊñπÊ≥ïÊù•Â∞ùËØïËé∑ÂèñÈîÅ„ÄÇÂú®ËØ•ÊñπÊ≥ï‰∏≠‰πüÊòØÈ¶ñÂÖàËé∑ÂèñÂêåÊ≠•Áä∂ÊÄÅÁöÑÂÄºÔºåÂ¶ÇÊûúÂêåÊ≠•Áä∂ÊÄÅ‰∏∫0ÂàôË°®ÊòéÊ≠§Êó∂ÈîÅÂàöÂ•ΩË¢´ÈáäÊîæÔºåËøôÊó∂ÂíåÈùûÂÖ¨Âπ≥ÈîÅ‰∏çÂêåÁöÑÊòØÂÆÉ‰ºöÂÖàÂéªË∞ÉÁî®hasQueuedPredecessorsÊñπÊ≥ïÊü•ËØ¢ÂêåÊ≠•ÈòüÂàó‰∏≠ÊòØÂê¶Êúâ‰∫∫Âú®ÊéíÈòüÔºåÂ¶ÇÊûúÊ≤°‰∫∫Âú®ÊéíÈòüÊâç‰ºöÂéª‰øÆÊîπÂêåÊ≠•Áä∂ÊÄÅÁöÑÂÄºÔºåÂèØ‰ª•ÁúãÂà∞ÂÖ¨Âπ≥ÈîÅÂú®ËøôÈáåÈááÂèñÁ§ºËÆ©ÁöÑÊñπÂºèËÄå‰∏çÊòØËá™Â∑±È©¨‰∏äÂéªËé∑ÂèñÈîÅ„ÄÇÈô§‰∫ÜËøô‰∏ÄÊ≠•ÂíåÈùûÂÖ¨Âπ≥ÈîÅ‰∏ç‰∏ÄÊ†∑‰πãÂ§ñÔºåÂÖ∂‰ªñÁöÑÊìç‰ΩúÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ Áªº‰∏äÊâÄËø∞ÔºåÂèØ‰ª•ÁúãÂà∞ÂÖ¨Âπ≥ÈîÅÂú®ËøõÂÖ•ÂêåÊ≠•ÈòüÂàó‰πãÂâçÂè™Ê£ÄÊü•‰∫Ü‰∏ÄÈÅçÈîÅÁöÑÁä∂ÊÄÅÔºåÂç≥‰ΩøÊòØÂèëÁé∞‰∫ÜÈîÅÊòØÂºÄÁöÑ‰πü‰∏ç‰ºöËá™Â∑±È©¨‰∏äÂéªËé∑ÂèñÔºåËÄåÊòØÂÖàËÆ©ÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑÁ∫øÁ®ãÂÖàËé∑ÂèñÔºåÊâÄ‰ª•ÂèØ‰ª•‰øùËØÅÂú®ÂÖ¨Âπ≥ÈîÅ‰∏ãÊâÄÊúâÁ∫øÁ®ãËé∑ÂèñÈîÅÁöÑÈ°∫Â∫èÈÉΩÊòØÂÖàÊù•ÂêéÂà∞ÁöÑÔºåËøô‰πü‰øùËØÅ‰∫ÜËé∑ÂèñÈîÅÁöÑÂÖ¨Âπ≥ÊÄß„ÄÇ ÈÇ£‰πà‰∏∫‰ªÄ‰πà‰∏çÂ∏åÊúõÊâÄÊúâÈîÅÈÉΩÊòØÂÖ¨Âπ≥ÁöÑÂë¢ÔºüÊØïÁ´üÂÖ¨Âπ≥ÊòØ‰∏ÄÁßçÂ•ΩÁöÑË°å‰∏∫ÔºåËÄå‰∏çÂÖ¨Âπ≥ÊòØ‰∏ÄÁßç‰∏çÂ•ΩÁöÑË°å‰∏∫„ÄÇÁî±‰∫éÁ∫øÁ®ãÁöÑÊåÇËµ∑ÂíåÂî§ÈÜíÊìç‰ΩúÂ≠òÂú®ËæÉÂ§ßÁöÑÂºÄÈîÄËÄåÂΩ±ÂìçÁ≥ªÁªüÊÄßËÉΩÔºåÁâπÂà´ÊòØÂú®Á´û‰∫âÊøÄÁÉàÁöÑÊÉÖÂÜµ‰∏ãÂÖ¨Âπ≥ÈîÅÂ∞ÜÂØºËá¥Á∫øÁ®ãÈ¢ëÁπÅÁöÑÊåÇËµ∑ÂíåÂî§ÈÜíÊìç‰ΩúÔºåËÄåÈùûÂÖ¨Âπ≥ÈîÅÂèØ‰ª•ÂáèÂ∞ëËøôÊ†∑ÁöÑÊìç‰ΩúÔºåÊâÄ‰ª•Âú®ÊÄßËÉΩ‰∏äÂ∞Ü‰ºö‰ºò‰∫éÂÖ¨Âπ≥ÈîÅ„ÄÇÂè¶Â§ñÔºåÁî±‰∫éÂ§ßÈÉ®ÂàÜÁ∫øÁ®ã‰ΩøÁî®ÈîÅÁöÑÊó∂Èó¥ÈÉΩÊòØÈùûÂ∏∏Áü≠ÊöÇÁöÑÔºåËÄåÁ∫øÁ®ãÁöÑÂî§ÈÜíÊìç‰Ωú‰ºöÂ≠òÂú®Âª∂Êó∂ÊÉÖÂÜµÔºåÊúâÂèØËÉΩÂú®AÁ∫øÁ®ãË¢´Âî§ÈÜíÊúüÈó¥BÁ∫øÁ®ãÈ©¨‰∏äËé∑Âèñ‰∫ÜÈîÅÂπ∂‰ΩøÁî®ÂÆåÈáäÊîæ‰∫ÜÈîÅÔºåËøôÂ∞±ÂØºËá¥‰∫ÜÂèåËµ¢ÁöÑÂ±ÄÈù¢ÔºåAÁ∫øÁ®ãËé∑ÂèñÈîÅÁöÑÊó∂ÂàªÂπ∂Ê≤°ÊúâÊé®ËøüÔºå‰ΩÜBÁ∫øÁ®ãÊèêÂâç‰ΩøÁî®‰∫ÜÈîÅÔºåÂπ∂‰∏îÂêûÂêêÈáè‰πüËé∑Âæó‰∫ÜÊèêÈ´ò„ÄÇ Êù°‰ª∂ÈòüÂàóÁöÑÂÆûÁé∞Êú∫Âà∂ ÂÜÖÁΩÆÊù°‰ª∂ÈòüÂàóÂ≠òÂú®‰∏Ä‰∫õÁº∫Èô∑ÔºåÊØè‰∏™ÂÜÖÁΩÆÈîÅÈÉΩÂè™ËÉΩÊúâ‰∏Ä‰∏™Áõ∏ÂÖ≥ËÅîÁöÑÊù°‰ª∂ÈòüÂàóÔºåËøôÂØºËá¥Â§ö‰∏™Á∫øÁ®ãÂèØËÉΩÂú®Âêå‰∏Ä‰∏™Êù°‰ª∂ÈòüÂàó‰∏äÁ≠âÂæÖ‰∏çÂêåÁöÑÊù°‰ª∂Ë∞ìËØçÔºåÈÇ£‰πàÊØèÊ¨°Ë∞ÉÁî®notifyAllÊó∂ÈÉΩ‰ºöÂ∞ÜÊâÄÊúâÁ≠âÂæÖÁöÑÁ∫øÁ®ãÂî§ÈÜíÔºåÂΩìÁ∫øÁ®ãÈÜíÊù•ÂêéÂèëÁé∞Âπ∂‰∏çÊòØËá™Â∑±Á≠âÂæÖÁöÑÊù°‰ª∂Ë∞ìËØçÔºåËΩ¨ËÄåÂèà‰ºöË¢´ÊåÇËµ∑„ÄÇËøôÂØºËá¥ÂÅö‰∫ÜÂæàÂ§öÊó†Áî®ÁöÑÁ∫øÁ®ãÂî§ÈÜíÂíåÊåÇËµ∑Êìç‰ΩúÔºåËÄåËøô‰∫õÊìç‰ΩúÂ∞Ü‰ºöÂ§ßÈáèÊµ™Ë¥πÁ≥ªÁªüËµÑÊ∫êÔºåÈôç‰ΩéÁ≥ªÁªüÁöÑÊÄßËÉΩ„ÄÇÂ¶ÇÊûúÊÉ≥ÁºñÂÜô‰∏Ä‰∏™Â∏¶ÊúâÂ§ö‰∏™Êù°‰ª∂Ë∞ìËØçÁöÑÂπ∂ÂèëÂØπË±°ÔºåÊàñËÄÖÊÉ≥Ëé∑ÂæóÈô§‰∫ÜÊù°‰ª∂ÈòüÂàóÂèØËßÅÊÄß‰πãÂ§ñÁöÑÊõ¥Â§öÊéßÂà∂ÊùÉÔºåÂ∞±ÈúÄË¶Å‰ΩøÁî®ÊòæÂºèÁöÑLockÂíåConditionËÄå‰∏çÊòØÂÜÖÁΩÆÈîÅÂíåÊù°‰ª∂ÈòüÂàó„ÄÇ‰∏Ä‰∏™ConditionÂíå‰∏Ä‰∏™LockÂÖ≥ËÅîÂú®‰∏ÄËµ∑ÔºåÂ∞±ÂÉè‰∏Ä‰∏™Êù°‰ª∂ÈòüÂàóÂíå‰∏Ä‰∏™ÂÜÖÁΩÆÈîÅÁõ∏ÂÖ≥ËÅî‰∏ÄÊ†∑„ÄÇË¶ÅÂàõÂª∫‰∏Ä‰∏™ConditionÔºåÂèØ‰ª•Âú®Áõ∏ÂÖ≥ËÅîÁöÑLock‰∏äË∞ÉÁî®Lock.newConditionÊñπÊ≥ï„ÄÇ‰∏ãÈù¢Áúã‰∏Ä‰∏™‰ΩøÁî®ConditionÁöÑÁ§∫‰æã„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869package main.java.com.study.producerconsumer.v2;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;/** * @author: whb * @description: ÁºìÂÜ≤Âå∫ */public class ConditionBuffer &#123; private final Lock lock = new ReentrantLock(); /** * ‰∏çÊª° */ final Condition notFull = lock.newCondition(); /** * ‰∏çÁ©∫ */ final Condition notEmpty = lock.newCondition(); /** * ÁºìÂÜ≤Âå∫ */ final Object[] items = new Object[100]; int putptr, takeptr, count; //Áîü‰∫ßÊñπÊ≥ï public void put(Object x) throws InterruptedException &#123; lock.lock(); try &#123; while (count == items.length) &#123; //ÈòüÂàóÂ∑≤Êª°, Á∫øÁ®ãÂú®notFullÈòüÂàó‰∏äÁ≠âÂæÖ notFull.await(); &#125; items[putptr] = x; if (++putptr == items.length) &#123; putptr = 0; &#125; ++count; //Áîü‰∫ßÊàêÂäü, Âî§ÈÜínotEmptyÈòüÂàóÁöÑÁªìÁÇπ notEmpty.signal(); &#125; finally &#123; lock.unlock(); &#125; &#125; //Ê∂àË¥πÊñπÊ≥ï public Object take() throws InterruptedException &#123; lock.lock(); try &#123; while (count == 0) &#123; //ÈòüÂàó‰∏∫Á©∫, Á∫øÁ®ãÂú®notEmptyÈòüÂàó‰∏äÁ≠âÂæÖ notEmpty.await(); &#125; Object x = items[takeptr]; if (++takeptr == items.length) &#123; takeptr = 0; &#125; --count; //Ê∂àË¥πÊàêÂäü, Âî§ÈÜínotFullÈòüÂàóÁöÑÁªìÁÇπ notFull.signal(); return x; &#125; finally &#123; lock.unlock(); &#125; &#125;&#125; ‰∏Ä‰∏™lockÂØπË±°ÂèØ‰ª•‰∫ßÁîüÂ§ö‰∏™Êù°‰ª∂ÈòüÂàóÔºåËøôÈáå‰∫ßÁîü‰∫Ü‰∏§‰∏™Êù°‰ª∂ÈòüÂàónotFullÂíånotEmpty„ÄÇ ÂΩìÂÆπÂô®Â∑≤Êª°Êó∂ÂÜçË∞ÉÁî®putÊñπÊ≥ïÁöÑÁ∫øÁ®ãÈúÄË¶ÅËøõË°åÈòªÂ°ûÔºåÁ≠âÂæÖÊù°‰ª∂Ë∞ìËØç‰∏∫Áúü(ÂÆπÂô®‰∏çÊª°)ÊâçÈÜíÊù•ÁªßÁª≠ÊâßË°åÔºõ ÂΩìÂÆπÂô®‰∏∫Á©∫Êó∂ÂÜçË∞ÉÁî®takeÊñπÊ≥ïÁöÑÁ∫øÁ®ã‰πüÈúÄË¶ÅÈòªÂ°ûÔºåÁ≠âÂæÖÊù°‰ª∂Ë∞ìËØç‰∏∫Áúü(ÂÆπÂô®‰∏çÁ©∫)ÊâçÈÜíÊù•ÁªßÁª≠ÊâßË°å„ÄÇ Ëøô‰∏§Á±ªÁ∫øÁ®ãÊòØÊ†πÊçÆ‰∏çÂêåÁöÑÊù°‰ª∂Ë∞ìËØçËøõË°åÁ≠âÂæÖÁöÑÔºåÊâÄ‰ª•ÂÆÉ‰ª¨‰ºöËøõÂÖ•‰∏§‰∏™‰∏çÂêåÁöÑÊù°‰ª∂ÈòüÂàó‰∏≠ÈòªÂ°ûÔºåÁ≠âÂà∞ÂêàÈÄÇÊó∂Êú∫ÂÜçÈÄöËøáË∞ÉÁî®ConditionÂØπË±°‰∏äÁöÑAPIËøõË°åÂî§ÈÜí„ÄÇ ‰∏ãÈù¢ÊòØnewConditionÊñπÊ≥ïÁöÑÂÆûÁé∞‰ª£Á†Å„ÄÇ 1234567891011//ÂàõÂª∫Êù°‰ª∂ÈòüÂàópublic Condition newCondition() &#123; return sync.newCondition();&#125;abstract static class Sync extends AbstractQueuedSynchronizer &#123; //Êñ∞Âª∫ConditionÂØπË±° final ConditionObject newCondition() &#123; return new ConditionObject(); &#125;&#125; ReentrantLock‰∏äÁöÑÊù°‰ª∂ÈòüÂàóÁöÑÂÆûÁé∞ÈÉΩÊòØÂü∫‰∫éAbstractQueuedSynchronizerÁöÑÔºåÂú®Ë∞ÉÁî®newConditionÊñπÊ≥ïÊó∂ÊâÄËé∑ÂæóÁöÑConditionÂØπË±°Â∞±ÊòØAQSÁöÑÂÜÖÈÉ®Á±ªConditionObjectÁöÑÂÆû‰æã„ÄÇÊâÄÊúâÂØπÊù°‰ª∂ÈòüÂàóÁöÑÊìç‰ΩúÈÉΩÊòØÈÄöËøáË∞ÉÁî®ConditionObjectÂØπÂ§ñÊèê‰æõÁöÑAPIÊù•ÂÆåÊàêÁöÑ„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-LockSupport]]></title>
    <url>%2Fposts%2F2c562869.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ LockSupportÊòØÁî®Êù•ÂàõÂª∫ÈîÅÂíåÂÖ∂‰ªñÂêåÊ≠•Á±ªÁöÑÂü∫Êú¨Á∫øÁ®ãÈòªÂ°ûÂéüËØ≠„ÄÇ ÊñπÊ≥ïÂàóË°® 12345678910111213141516// ËøîÂõûÊèê‰æõÁªôÊúÄËøë‰∏ÄÊ¨°Â∞öÊú™Ëß£Èô§ÈòªÂ°ûÁöÑ park ÊñπÊ≥ïË∞ÉÁî®ÁöÑ blocker ÂØπË±°ÔºåÂ¶ÇÊûúËØ•Ë∞ÉÁî®‰∏çÂèóÈòªÂ°ûÔºåÂàôËøîÂõû null„ÄÇstatic Object getBlocker(Thread t)// ‰∏∫‰∫ÜÁ∫øÁ®ãË∞ÉÂ∫¶ÔºåÁ¶ÅÁî®ÂΩìÂâçÁ∫øÁ®ãÔºåÈô§ÈùûËÆ∏ÂèØÂèØÁî®„ÄÇstatic void park()// ‰∏∫‰∫ÜÁ∫øÁ®ãË∞ÉÂ∫¶ÔºåÂú®ËÆ∏ÂèØÂèØÁî®‰πãÂâçÁ¶ÅÁî®ÂΩìÂâçÁ∫øÁ®ã„ÄÇstatic void park(Object blocker)// ‰∏∫‰∫ÜÁ∫øÁ®ãË∞ÉÂ∫¶Á¶ÅÁî®ÂΩìÂâçÁ∫øÁ®ãÔºåÊúÄÂ§öÁ≠âÂæÖÊåáÂÆöÁöÑÁ≠âÂæÖÊó∂Èó¥ÔºåÈô§ÈùûËÆ∏ÂèØÂèØÁî®„ÄÇstatic void parkNanos(long nanos)// ‰∏∫‰∫ÜÁ∫øÁ®ãË∞ÉÂ∫¶ÔºåÂú®ËÆ∏ÂèØÂèØÁî®ÂâçÁ¶ÅÁî®ÂΩìÂâçÁ∫øÁ®ãÔºåÂπ∂ÊúÄÂ§öÁ≠âÂæÖÊåáÂÆöÁöÑÁ≠âÂæÖÊó∂Èó¥„ÄÇstatic void parkNanos(Object blocker, long nanos)// ‰∏∫‰∫ÜÁ∫øÁ®ãË∞ÉÂ∫¶ÔºåÂú®ÊåáÂÆöÁöÑÊó∂ÈôêÂâçÁ¶ÅÁî®ÂΩìÂâçÁ∫øÁ®ãÔºåÈô§ÈùûËÆ∏ÂèØÂèØÁî®„ÄÇstatic void parkUntil(long deadline)// ‰∏∫‰∫ÜÁ∫øÁ®ãË∞ÉÂ∫¶ÔºåÂú®ÊåáÂÆöÁöÑÊó∂ÈôêÂâçÁ¶ÅÁî®ÂΩìÂâçÁ∫øÁ®ãÔºåÈô§ÈùûËÆ∏ÂèØÂèØÁî®„ÄÇstatic void parkUntil(Object blocker, long deadline)// Â¶ÇÊûúÁªôÂÆöÁ∫øÁ®ãÁöÑËÆ∏ÂèØÂ∞ö‰∏çÂèØÁî®ÔºåÂàô‰ΩøÂÖ∂ÂèØÁî®„ÄÇstatic void unpark(Thread thread) ÂéüÁêÜ LockSupport‰∏≠ÁöÑpark() Âíå unpark() ÁöÑ‰ΩúÁî®ÂàÜÂà´ÊòØÈòªÂ°ûÁ∫øÁ®ãÂíåËß£Èô§ÈòªÂ°ûÁ∫øÁ®ãÔºåËÄå‰∏îpark()Âíåunpark()‰∏ç‰ºöÈÅáÂà∞Thread.suspend Âíå Thread.resumeÊâÄÂèØËÉΩÂºïÂèëÁöÑÊ≠ªÈîÅ ÈóÆÈ¢ò„ÄÇ Âõ†‰∏∫park() Âíå unpark()ÊúâËÆ∏ÂèØÁöÑÂ≠òÂú®Ôºåunpark()‰∏∫Á∫øÁ®ãÊèê‰æõ‚ÄúËÆ∏ÂèØ(permit)‚ÄùÔºåÁ∫øÁ®ãË∞ÉÁî®park()ÂàôÁ≠âÂæÖ‚ÄúËÆ∏ÂèØ‚Äù ÔºõË∞ÉÁî® park() ÁöÑÁ∫øÁ®ãÂíåÂè¶‰∏Ä‰∏™ËØïÂõæÂ∞ÜÂÖ∂ unpark() ÁöÑÁ∫øÁ®ã‰πãÈó¥ÁöÑÁ´û‰∫âÂ∞Ü‰øùÊåÅÊ¥ªÊÄß„ÄÇ Ëøô‰∏™ÊúâÁÇπÂÉè‰ø°Âè∑ÈáèÔºåÂèØÊòØËøô‰∏™‚ÄúËÆ∏ÂèØ‚ÄùÊòØ‰∏çËÉΩÂè†Âä†ÁöÑÔºå‚ÄúËÆ∏ÂèØ‚ÄùÊòØ‰∏ÄÊ¨°ÊÄßÁöÑ„ÄÇ ÊØîÂ¶ÇÔºöÁ∫øÁ®ãBËøûÁª≠Ë∞ÉÁî®‰∫Ü‰∏âÊ¨°unparkÂáΩÊï∞ÔºåÂΩìÁ∫øÁ®ãAË∞ÉÁî®parkÂáΩÊï∞Â∞±‰ΩøÁî®ÊéâËøô‰∏™‚ÄúËÆ∏ÂèØ‚ÄùÔºåÂÅáËÆæÁ∫øÁ®ãAÂÜçÊ¨°Ë∞ÉÁî®parkÔºåÂàôËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅ„ÄÇ Ê≥®ÊÑè„ÄÇunparkÂáΩÊï∞ËÉΩÂ§üÂÖà‰∫éparkË∞ÉÁî®„ÄÇÊØîÊñπÁ∫øÁ®ãBË∞ÉÁî®unparkÂáΩÊï∞ÔºåÁªôÁ∫øÁ®ãAÂèë‰∫Ü‰∏Ä‰∏™‚ÄúËÆ∏ÂèØ‚ÄùÔºåÈÇ£‰πàÂΩìÁ∫øÁ®ãAË∞ÉÁî®parkÊó∂„ÄÇÂÆÉÂèëÁé∞Â∑≤ÁªèÊúâ‚ÄúËÆ∏ÂèØ‚Äù‰∫Ü„ÄÇÈÇ£‰πàÂÆÉ‰ºöÁ´ãÂç≥ÂÜçÁªßÁª≠ÊâßË°å„ÄÇ ‰ª£Á†ÅÁ§∫‰æã1 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package main.java.com.study.lock.lockSupport;import java.util.concurrent.locks.LockSupport;/** * @author: whb * @description: LockSupportÊµãËØïÁ±ª */public class LockSupportDemoOne &#123; public static void main(String args[]) &#123; Thread thread = Thread.currentThread(); ThreadParkService service = new ThreadParkService(thread); System.out.println(Thread.currentThread().getName() + " start1"); service.start(); try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName() + " center"); LockSupport.park(thread); System.out.println("end"); &#125;&#125;class ThreadParkService extends Thread &#123; private Thread thread; public ThreadParkService(Thread thread) &#123; this.thread = thread; &#125; @Override public void run() &#123; try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName() + " wakup before"); LockSupport.unpark(thread);//Ëß£ÈîÅÂêéÁ∫øÁ®ã2Á´ãÈ©¨Â∞±ÂèØ‰ª•ÊâßË°å‰∫Ü„ÄÇ try &#123; System.out.println("Ëß£ÈîÅÂêé‰ºëÊÅØ‰∏âÁßíÂì¶"); Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName() + " wakup after"); &#125;&#125; ÊâßË°åÁªìÊûú1 123456main start1 Thread-0 wakup before Ëß£ÈîÅÂêé‰ºëÊÅØ‰∏âÁßíÂì¶ main center end Thread-0 wakup after ÁªìÊûúËØ¥Êòé1 ‰∏ªÁ∫øÁ®ãmainÂÖàÊâìÂç∞‰∫ÜËá™Â∑±ÁöÑ‰∏úË•øÔºå‰∏ªÁ∫øÁ®ãÂà∞‰∫ÜparkÊó∂Ë¢´ÈòªÂ°û‰∫Ü„ÄÇÁ∫øÁ®ã1ÂºÇÊ≠•ÊâßË°åÊâìÂç∞‰∫Ü wakup beforemain centerÊâìÂç∞Âú®‚ÄúËß£ÈîÅÂêé‰ºëÊÅØ3sÂì¶‚ÄùËØ¥ÊòéÁ∫øÁ®ã1‰∏≠ÁöÑunparkÂÖà‰∏éparkÊâßË°å„ÄÇÁ∫øÁ®ã1ÊâßË°å‰∫Üunpark‰∫ÜÔºåËøô‰∏™Êó∂ÂÄô‰∏ªÁ∫øÁ®ã‰∏≠ÁöÑparkÁ´ãÈ©¨Ë¢´Âî§ÈÜíÔºåÂºÄÂßãÊâßË°å‰∫Üend„ÄÇÁÑ∂ÂêéÁ∫øÁ®ã1Á≠âÂæÖ‰∫Ü3sÂêéÊâßË°å‰∫Üwakup after„ÄÇ ÊÄªÁªì1 unparkÔºåÂèØ‰ª•Âú®park‰πãÂâçÊâßË°å„ÄÇÂÆÉ‰ª¨‰∏ÄÂØπ‰∏Ä,‰∏çÁÆ°‰ªÄ‰πàÊó∂ÂÄôparkÂè™Ë¶ÅÊúâunparkËøá‰∏ÄÊ¨°Â∞±Â•Ω‰∫Ü„ÄÇparkË¢´ÈòªÂ°ûÂêéÔºåunparkÊâßË°åÂêéparkÁ´ãÂç≥Ë¢´Âî§ÈÜí„ÄÇ‰∏éwait‰∏énotify‰∏çÂêåÔºånotifyÂî§ÈÜíwaitÂêéÔºåËøòÂøÖÈ°ªÁ≠âÂæÖnotify‰ª£Á†ÅÂùó‰∏≠ÁöÑ‰ª£Á†ÅÊâßË°åÂÆåÊØïÂêéwaitÊâçËÉΩÊâßË°å„ÄÇ ‰ª£Á†ÅÁ§∫‰æã2 1234567891011121314151617181920212223242526272829303132333435363738394041424344package main.java.com.study.lock.lockSupport;import java.util.concurrent.locks.LockSupport;/** * @author: whb * @description: LockSupportÊµãËØïÁ§∫‰æã */public class LockSupportDemoTwo &#123; public static void main(String args[]) &#123; Thread thread = Thread.currentThread(); ThreadParkService2 service2 = new ThreadParkService2(thread); System.out.println(Thread.currentThread().getName() + " start2"); service2.start(); System.out.println(" ÊºÇ‰∫ÆÁöÑÂàÜÂâ≤Á∫ø---"); ThreadParkService service = new ThreadParkService(service2); System.out.println(Thread.currentThread().getName() + " start1"); service.start(); &#125;&#125;class ThreadParkService2 extends Thread &#123; private Thread thread; public ThreadParkService2(Thread thread) &#123; this.thread = thread; &#125; @Override public void run() &#123; System.out.println(Thread.currentThread().getName() + "-Á∫øÁ®ã2ÂºÄÂßãpark before"); //ÈòªÂ°ûÂΩìÂâçÊâßË°åÁöÑÁ∫øÁ®ãÔºå‰∏çËÉΩÈòªÂ°ûÂÖ∂‰ªñÁ∫øÁ®ãÔºåÁúãÊ∫êÁ†ÅÂì¶„ÄÇÈáåÈù¢ÈòªÂ°ûÊó∂Âπ∂‰∏çÈúÄË¶Å‰ªª‰Ωï‰º†ÂèÇ„ÄÇ LockSupport.park(this); //ËøôÈáåÂπ∂‰∏ç‰ºöÈòªÂ°ûthreadÁ∫øÁ®ãÔºåÈòªÂ°ûÁöÑËøòÊòØÂΩìÂâçÁ∫øÁ®ã„ÄÇthreadÂè™ÊòØÂÅö‰∏Ä‰∏™Ê†áËÆ∞Êñπ‰æøË¢´ÈîÅÁöÑÂØπË±°„ÄÇ //LockSupport.park(thread); System.out.println(Thread.currentThread().getName() + "-Á∫øÁ®ã2park after"); &#125;&#125; ÊâßË°åÁªìÊûú2 12345678main start2 ÊºÇ‰∫ÆÁöÑÂàÜÂâ≤Á∫ø‚Äî Thread-0-Á∫øÁ®ã2ÂºÄÂßãpark before main start1 Thread-1 wakup before Ëß£ÈîÅÂêé‰ºëÊÅØ‰∏âÁßíÂì¶ Thread-0-Á∫øÁ®ã2park after Thread-1 wakup after ÁªìÊûúËØ¥Êòé2 ÂÖ∂ÂÆûÁúãÁªìÊûúÂ∞±ÊòØÁ∫øÁ®ã2ÈòªÂ°û‰∫ÜÔºåÁ∫øÁ®ã1Âî§ÈÜí‰∫ÜÁ∫øÁ®ã2.Â∞±Ëøô‰πàÁÆÄÂçï„ÄÇ ÊÄªÁªì park()‰∏épark(Object obj)Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü park()ÊòØÂèØ‰ª•‰∏çÈúÄË¶ÅÂèÇÊï∞ÁöÑÂì¶ÔºåÂ∞±ÊòØËØ¥Âä†ÈîÅÊó∂Ôºå‰∏çÈúÄË¶ÅÊåáÂÆöÂØπË±°„ÄÇÈÇ£‰πàÂÆÉÊòØÊÄé‰πàÂä†ÈîÅÁöÑÂë¢ÔºüÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456public static void park(Object blocker) &#123; Thread t = Thread.currentThread(); setBlocker(t, blocker);//ËÆ∞ÂΩïÂΩìÂâçÁ∫øÁ®ãÁ≠âÂæÖÁöÑÂØπË±°ÔºàÈòªÂ°ûÂØπË±°ÔºâÔºõ UNSAFE.park(false, 0L);//ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºõ setBlocker(t, null);//ÂΩìÂâçÁ∫øÁ®ãÁ≠âÂæÖÂØπË±°ÁΩÆ‰∏∫null„ÄÇ&#125; ÂèØ‰ª•ÁúãÂá∫Êù•ÔºåÈòªÂ°ûÁöÑÊó∂ÂÄôUNSAFE.park(false, 0L);Ê†πÊú¨‰∏çÈúÄË¶ÅÂ§ñÈù¢ÁöÑÂÖ•ÂèÇÊï∞„ÄÇ ÈÇ£‰πàsetBlockerÊòØÁî®Êù•Âπ≤ÂêóÁöÑÂë¢Ôºü ÂÆÉÊòØÁî®Êù•ÂÅöÁõëÊéßÁî®ÁöÑÔºåÂΩìÂâçË¢´ÈòªÂ°ûÁöÑÂØπË±°ÊòØÈÇ£‰∏™ÔºåÂèØ‰ª•ÈÄöËøáLockSupport‰∏≠ÁöÑget‰πãÁ±ªÁöÑÊñπÊ≥ïÊù•Ëé∑ÂèñÂΩìÂâçË¢´ÈòªÂ°ûÁöÑÂØπË±°„ÄÇ UNSAFE.park(false, 0L);ÈîÅ‰ΩèÁöÑÊòØÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑÁ∫øÁ®ã„ÄÇ ‰ª£Á†ÅÁ§∫‰æã2‰∏≠Á∫øÁ®ã2Êúâ‰∏Ä‰∏™ÂèÇÊï∞ÔºåÊää‰∏ªÁ∫øÁ®ã‰º†ËøáÂéª‰∫ÜÔºå ÊÉ≥Áî®Á∫øÁ®ã2Êù•ÈòªÂ°û‰∏ªÁ∫øÁ®ã„ÄÇ main‰∏≠Ôºö 123Thread thread = Thread.currentThread(); ThreadParkService2 service2 = new ThreadParkService2(thread); ‚Ä¶ Á∫øÁ®ã2‰∏≠Ôºö 1LockSupport.park(thread); ËøôÊ†∑ÊòØ‰∏çË°åÁöÑÔºåÂâçÈù¢ËØ¥ËøáparkÈòªÂ°ûÁöÑÊòØÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑÁ∫øÁ®ãÔºåÂíåÂ§ñÈù¢‰º†ÈÄíËøõÊù•ÁöÑÂÄºÊó†ÂÖ≥„ÄÇÊâÄ‰ª•ËøôÈáåË¢´ÈòªÂ°ûÁöÑËøòÊòØÁ∫øÁ®ã2„ÄÇ unparkÈúÄË¶ÅÂ∏¶‰∏äÂèÇÊï∞ÔºåËøôÊ†∑ÊâçÁü•ÈÅìËß£ÈîÅÈÇ£‰∏™Á∫øÁ®ã„ÄÇ LockSupport.park ÈîÅ‰ΩèÁöÑÊòØThread.currentThread()ÂΩìÂâçÁ∫øÁ®ã„ÄÇ Thread.currentThread()‰∏éthis Á±ªÁªßÊâø‰∫ÜThreadÁ±ªÂêéÔºåÂèØ‰ª•‰ΩøÁî®this.getName();Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÁöÑÂêçÁß∞Ôºå‰ΩÜÊòØThread.currentThread().getName()‰πüËé∑ÂèñÁ∫øÁ®ãÂêçÁß∞„ÄÇÈÇ£‰πàÂÆÉ‰ª¨Êúâ‰ªÄ‰πàÂå∫Âà´Âë¢Ôºü ÁªßÊâø‰∫ÜThreadÁ±ªÂêé‰ΩøÁî®this.getName()Ëé∑ÂèñÁöÑÂΩìÂâçÂØπË±°ÁöÑÁ∫øÁ®ãÂêçÁß∞ÔºåËÄåThread.currentThread().getName()Ëé∑ÂèñÁöÑÊòØÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÁöÑÂêçÁß∞„ÄÇ parkÂíåwaitÁöÑÂå∫Âà´ unparkÂèØ‰ª•ÂÖà‰∫éparkÊâßË°åÔºånotify‰∏çËÉΩÂÖà‰∫éwaitÊâßË°åÔºå‰∏çÁÑ∂Â∞±‰∏çËÉΩÂî§ÈÜí‰∫Ü„ÄÇ unparkÈúÄË¶ÅÊåáÂÆöÂî§ÈÜíÁöÑÁ∫øÁ®ãÔºåËÄånotifyÊòØÈöèÊú∫Âî§ÈÜí‰∏Ä‰∏™wait„ÄÇ unparkËß£ÈîÅÂêéparkÁ´ãÂç≥ÂèØ‰ª•ÊâßË°åÔºånotifyËß£ÈîÅÂêéwaitÈúÄË¶ÅÁ≠âÂæÖnotifyÊâÄÂú®ÁöÑsynchronized‰ª£Á†ÅÂùóÊâßË°åÂÆåÊØïÂêéwaitÊâçËÉΩÁªßÁª≠ÊâßË°å„ÄÇ waitÂøÖÈ°ªÂú®SynchronizerÈáåÈù¢ÊâçËÉΩÊúâÊïàÔºåunparkÂàô‰∏çÁî®„ÄÇ waitÊòØÂØπË±°ÈîÅÔºåparkÂàôÊòØÁ∫øÁ®ãÈîÅ„ÄÇ Â∫îÁî®Á§∫‰æã 123456789101112131415161718192021222324252627282930313233343536373839package main.java.com.study.lock.lockSupport;import java.util.concurrent.locks.LockSupport;/** * @author: whb * @description: ÈòªÂ°ûÂéüËØ≠ÊµãËØï */public class LockSupportTest &#123; /** * ‰∏ªÁ∫øÁ®ã */ private static Thread mainThread; public static void main(String[] args) &#123; ThreadA ta = new ThreadA("ta"); //Ëé∑Âèñ‰∏ªÁ∫øÁ®ã mainThread = Thread.currentThread(); System.out.println(Thread.currentThread().getName() + " start ta"); //ÂêØÂä®Á∫øÁ®ãta ta.start(); System.out.println(Thread.currentThread().getName() + " block"); //‰∏ªÁ∫øÁ®ãÈòªÂ°û LockSupport.park(mainThread); System.out.println(Thread.currentThread().getName() + " continue"); &#125; static class ThreadA extends Thread &#123; public ThreadA(String name) &#123; super(name); &#125; @Override public void run() &#123; System.out.println(Thread.currentThread().getName() + " wakeup others."); LockSupport.unpark(mainThread); &#125; &#125;&#125; ÊâßË°åÁªìÊûúÔºö]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-CountDownLatch]]></title>
    <url>%2Fposts%2Fbbc8910e.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ CountDownLatch(Èó≠ÈîÅ)ÊòØ‰∏Ä‰∏™ÂæàÊúâÁî®ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÂà©Áî®ÂÆÉÊàë‰ª¨ÂèØ‰ª•Êã¶Êà™‰∏Ä‰∏™ÊàñÂ§ö‰∏™Á∫øÁ®ã‰ΩøÂÖ∂Âú®Êüê‰∏™Êù°‰ª∂ÊàêÁÜüÂêéÂÜçÊâßË°å„ÄÇ ÂÆÉÁöÑÂÜÖÈÉ®Êèê‰æõ‰∫Ü‰∏Ä‰∏™ËÆ°Êï∞Âô®ÔºåÂú®ÊûÑÈÄ†Èó≠ÈîÅÊó∂ÂøÖÈ°ªÊåáÂÆöËÆ°Êï∞Âô®ÁöÑÂàùÂßãÂÄºÔºå‰∏îËÆ°Êï∞Âô®ÁöÑÂàùÂßãÂÄºÂøÖÈ°ªÂ§ß‰∫é0„ÄÇ Âè¶Â§ñÂÆÉËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™countDownÊñπÊ≥ïÊù•Êìç‰ΩúËÆ°Êï∞Âô®ÁöÑÂÄºÔºåÊØèË∞ÉÁî®‰∏ÄÊ¨°countDownÊñπÊ≥ïËÆ°Êï∞Âô®ÈÉΩ‰ºöÂáè1ÔºåÁõ¥Âà∞ËÆ°Êï∞Âô®ÁöÑÂÄºÂáè‰∏∫0Êó∂Â∞±‰ª£Ë°®Êù°‰ª∂Â∑≤ÊàêÁÜüÔºåÊâÄÊúâÂõ†Ë∞ÉÁî®awaitÊñπÊ≥ïËÄåÈòªÂ°ûÁöÑÁ∫øÁ®ãÈÉΩ‰ºöË¢´Âî§ÈÜí„ÄÇ ËøôÂ∞±ÊòØCountDownLatchÁöÑÂÜÖÈÉ®Êú∫Âà∂ÔºåÁúãËµ∑Êù•ÂæàÁÆÄÂçïÔºåÊó†ÈùûÂ∞±ÊòØÈòªÂ°û‰∏ÄÈÉ®ÂàÜÁ∫øÁ®ãËÆ©ÂÖ∂Âú®ËææÂà∞Êüê‰∏™Êù°‰ª∂‰πãÂêéÂÜçÊâßË°å„ÄÇ‰ΩÜÊòØCountDownLatchÁöÑÂ∫îÁî®Âú∫ÊôØÂç¥ÊØîËæÉÂπøÊ≥õÔºåÂè™Ë¶Å‰Ω†ËÑëÊ¥ûÂ§üÂ§ßÂà©Áî®ÂÆÉÂ∞±ÂèØ‰ª•Áé©Âá∫ÂêÑÁßçËä±Ê†∑„ÄÇÊúÄÂ∏∏ËßÅÁöÑ‰∏Ä‰∏™Â∫îÁî®Âú∫ÊôØÊòØÂºÄÂêØÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÊâßË°åÊüê‰∏™‰ªªÂä°ÔºåÁ≠âÂà∞ÊâÄÊúâ‰ªªÂä°ÈÉΩÊâßË°åÂÆåÂÜçÁªüËÆ°Ê±áÊÄªÁªìÊûú„ÄÇ‰∏ãÂõæÂä®ÊÄÅÊºîÁ§∫‰∫ÜÈó≠ÈîÅÈòªÂ°ûÁ∫øÁ®ãÁöÑÊï¥‰∏™ËøáÁ®ã„ÄÇ ‰∏äÂõæÊºîÁ§∫‰∫ÜÊúâ5‰∏™Á∫øÁ®ãÂõ†Ë∞ÉÁî®awaitÊñπÊ≥ïËÄåË¢´ÈòªÂ°ûÔºåÂÆÉ‰ª¨ÈúÄË¶ÅÁ≠âÂæÖËÆ°Êï∞Âô®ÁöÑÂÄºÂáè‰∏∫0ÊâçËÉΩÁªßÁª≠ÊâßË°å„ÄÇËÆ°Êï∞Âô®ÁöÑÂàùÂßãÂÄºÂú®ÊûÑÈÄ†Èó≠ÈîÅÊó∂Ë¢´ÊåáÂÆöÔºåÂêéÈù¢ÈöèÁùÄÊØèÊ¨°countDownÊñπÊ≥ïÁöÑË∞ÉÁî®ËÄåÂáè1„ÄÇ ÊûÑÈÄ†Âô® 12345//ÊûÑÈÄ†Âô®public CountDownLatch(int count) &#123; if (count &lt; 0) throw new IllegalArgumentException("count &lt; 0"); this.sync = new Sync(count);&#125; CountDownLatchÂè™Êúâ‰∏Ä‰∏™Â∏¶ÂèÇÊûÑÈÄ†Âô®ÔºåÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™Â§ß‰∫é0ÁöÑÂÄº‰Ωú‰∏∫ËÆ°Êï∞Âô®ÂàùÂßãÂÄºÔºåÂê¶Âàô‰ºöÊä•Èîô„ÄÇÂèØ‰ª•ÁúãÂà∞Âú®ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠Âè™ÊòØÂéªnew‰∫Ü‰∏Ä‰∏™SyncÂØπË±°Âπ∂ËµãÂÄºÁªôÊàêÂëòÂèòÈáèsync„ÄÇÂíåÂÖ∂‰ªñÂêåÊ≠•Â∑•ÂÖ∑Á±ª‰∏ÄÊ†∑ÔºåCountDownLatchÁöÑÂÆûÁé∞‰æùËµñ‰∫éAQSÔºåÂÆÉÊòØAQSÂÖ±‰∫´Ê®°Âºè‰∏ãÁöÑ‰∏Ä‰∏™Â∫îÁî®„ÄÇCountDownLatchÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÂÜÖÈÉ®Á±ªSyncÂπ∂Áî®ÂÆÉÂéªÁªßÊâøAQSÔºåËøôÊ†∑Â∞±ËÉΩ‰ΩøÁî®AQSÊèê‰æõÁöÑÂ§ßÈÉ®ÂàÜÊñπÊ≥ï‰∫Ü„ÄÇ ‰∏ãÈù¢Êù•Áúã‰∏Ä‰∏ãSyncÂÜÖÈÉ®Á±ªÁöÑ‰ª£Á†Å„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839//ÂêåÊ≠•Âô®private static final class Sync extends AbstractQueuedSynchronizer &#123; //ÊûÑÈÄ†Âô® Sync(int count) &#123; setState(count); &#125; //Ëé∑ÂèñÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅ int getCount() &#123; return getState(); &#125; //Â∞ùËØïËé∑ÂèñÈîÅ //ËøîÂõûË¥üÊï∞ÔºöË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÂ§±Ë¥• //ËøîÂõûÈõ∂ÂÄºÔºöË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÊàêÂäü, ‰ΩÜÊòØÂêéÁªßÁ∫øÁ®ã‰∏çËÉΩÂÜçËé∑Âèñ‰∫Ü //ËøîÂõûÊ≠£Êï∞ÔºöË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÊàêÂäü, Âπ∂‰∏îÂêéÁªßÁ∫øÁ®ãÂêåÊ†∑ÂèØ‰ª•Ëé∑ÂèñÊàêÂäü protected int tryAcquireShared(int acquires) &#123; return (getState() == 0) ? 1 : -1; &#125; //Â∞ùËØïÈáäÊîæÈîÅ protected boolean tryReleaseShared(int releases) &#123; for (;;) &#123; //Ëé∑ÂèñÂêåÊ≠•Áä∂ÊÄÅ int c = getState(); //Â¶ÇÊûúÂêåÊ≠•Áä∂ÊÄÅ‰∏∫0, Âàô‰∏çËÉΩÂÜçÈáäÊîæ‰∫Ü if (c == 0) &#123; return false; &#125; //Âê¶ÂàôÁöÑËØùÂ∞±Â∞ÜÂêåÊ≠•Áä∂ÊÄÅÂáè1 int nextc = c-1; //‰ΩøÁî®CASÊñπÂºèÊõ¥Êñ∞ÂêåÊ≠•Áä∂ÊÄÅ if (compareAndSetState(c, nextc)) &#123; return nextc == 0; &#125; &#125; &#125;&#125; ÂèØ‰ª•ÁúãÂà∞SyncÁöÑÊûÑÈÄ†ÊñπÊ≥ï‰ºöÂ∞ÜÂêåÊ≠•Áä∂ÊÄÅÁöÑÂÄºËÆæÁΩÆ‰∏∫‰º†ÂÖ•ÁöÑÂèÇÊï∞ÂÄº„ÄÇ‰πãÂêéÊØèÊ¨°Ë∞ÉÁî®countDownÊñπÊ≥ïÈÉΩ‰ºöÂ∞ÜÂêåÊ≠•Áä∂ÊÄÅÁöÑÂÄºÂáè1ÔºåËøô‰πüÂ∞±ÊòØËÆ°Êï∞Âô®ÁöÑÂÆûÁé∞ÂéüÁêÜ„ÄÇ Âú®Âπ≥Êó∂‰ΩøÁî®CountDownLatchÂ∑•ÂÖ∑Á±ªÊó∂ÊúÄÂ∏∏Áî®ÁöÑ‰∏§‰∏™ÊñπÊ≥ïÂ∞±ÊòØawaitÊñπÊ≥ïÂíåcountDownÊñπÊ≥ï„ÄÇË∞ÉÁî®awaitÊñπÊ≥ï‰ºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÁõ¥Âà∞ËÆ°Êï∞Âô®‰∏∫0ÔºåË∞ÉÁî®countDownÊñπÊ≥ï‰ºöÂ∞ÜËÆ°Êï∞Âô®ÁöÑÂÄºÂáè1Áõ¥Âà∞Âáè‰∏∫0„ÄÇ ÈòªÂ°ûÁ∫øÁ®ãawait 123456789101112131415161718//ÂØºËá¥ÂΩìÂâçÁ∫øÁ®ãÁ≠âÂæÖ, Áõ¥Âà∞stateÂáèÂ∞ëÂà∞0, ÊàñËÄÖÁ∫øÁ®ãË¢´ÊâìÊñ≠public void await() throws InterruptedException &#123; //‰ª•ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÊñπÂºèËé∑Âèñ sync.acquireSharedInterruptibly(1);&#125;//‰ª•ÂèØ‰∏≠Êñ≠Ê®°ÂºèËé∑ÂèñÈîÅ(ÂÖ±‰∫´Ê®°Âºè)public final void acquireSharedInterruptibly(int arg) throws InterruptedException &#123; //È¶ñÂÖàÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏≠Êñ≠, Â¶ÇÊûúÊòØÂàôÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; //1.Â∞ùËØïÂéªËé∑ÂèñÈîÅ if (tryAcquireShared(arg) &lt; 0) &#123; //2. Â¶ÇÊûúËé∑ÂèñÂ§±Ë¥•ÂàôËøõ‰∫∫ËØ•ÊñπÊ≥ï doAcquireSharedInterruptibly(arg); &#125;&#125; ÂΩìÁ∫øÁ®ãË∞ÉÁî®awaitÊñπÊ≥ïÊó∂ÂÖ∂ÂÆûÊòØË∞ÉÁî®Âà∞‰∫ÜAQSÁöÑacquireSharedInterruptiblyÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÊòØ‰ª•ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑÊñπÂºèÊù•Ëé∑ÂèñÈîÅÁöÑ„ÄÇÂú®acquireSharedInterruptiblyÊñπÊ≥ïÈ¶ñÂÖà‰ºöÂéªË∞ÉÁî®tryAcquireSharedÊñπÊ≥ïÂ∞ùËØïËé∑ÂèñÈîÅ„ÄÇSyncÈáåÈù¢ÈáçÂÜôÁöÑtryAcquireSharedÊñπÊ≥ïÁöÑÈÄªËæëÔºåÊñπÊ≥ïÁöÑÂÆûÁé∞ÈÄªËæëÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂà§Êñ≠ÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅÊòØÂê¶‰∏∫0ÔºåÂ¶ÇÊûú‰∏∫0ÂàôËøîÂõû1Ë°®ÊòéÂèØ‰ª•Ëé∑ÂèñÈîÅÔºåÂê¶ÂàôËøîÂõû-1Ë°®Á§∫‰∏çËÉΩËé∑ÂèñÈîÅ„ÄÇÂ¶ÇÊûútryAcquireSharedÊñπÊ≥ïËøîÂõû1ÂàôÁ∫øÁ®ãËÉΩÂ§ü‰∏çÂøÖÁ≠âÂæÖËÄåÁªßÁª≠ÊâßË°åÔºåÂ¶ÇÊûúËøîÂõû-1ÈÇ£‰πàÂêéÁª≠Â∞±‰ºöÂéªË∞ÉÁî®doAcquireSharedInterruptiblyÊñπÊ≥ïËÆ©Á∫øÁ®ãËøõÂÖ•Âà∞ÂêåÊ≠•ÈòüÂàóÈáåÈù¢Á≠âÂæÖ„ÄÇËøôÂ∞±ÊòØË∞ÉÁî®awaitÊñπÊ≥ï‰ºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÁöÑÂéüÁêÜ„ÄÇ Âî§ÈÜíÁ∫øÁ®ãcountDown 123456789101112131415//ÂáèÂ∞ëstateÁöÑÊñπÊ≥ïpublic void countDown() &#123; sync.releaseShared(1);&#125;//ÈáäÊîæÈîÅÁöÑÊìç‰Ωú(ÂÖ±‰∫´Ê®°Âºè)public final boolean releaseShared(int arg) &#123; //1.Â∞ùËØïÂéªÈáäÊîæÈîÅ if (tryReleaseShared(arg)) &#123; //2.Â¶ÇÊûúÈáäÊîæÊàêÂäüÂ∞±Âî§ÈÜíÂÖ∂‰ªñÁ∫øÁ®ã doReleaseShared(); return true; &#125; return false;&#125; countDownÊñπÊ≥ïÈáåÈù¢Ë∞ÉÁî®‰∫ÜreleaseSharedÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÂêåÊ†∑ÊòØAQSÈáåÈù¢ÁöÑÊñπÊ≥ï„ÄÇreleaseSharedÊñπÊ≥ïÈáåÈù¢È¶ñÂÖàÊòØË∞ÉÁî®tryReleaseSharedÊñπÊ≥ïÂ∞ùËØïÈáäÊîæÈîÅÔºåtryReleaseSharedÊñπÊ≥ïÂú®AQSÈáåÈù¢ÊòØ‰∏Ä‰∏™ÊäΩË±°ÊñπÊ≥ïÔºåÂÆÉÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÈÄªËæëÂú®Â≠êÁ±ªSyncÁ±ªÈáåÈù¢ÔºåÂú®‰∏äÈù¢Ë¥¥Âá∫ÁöÑSyncÁ±ª‰ª£Á†ÅÈáåÂèØ‰ª•ÊâæÂà∞ËØ•ÊñπÊ≥ï„ÄÇtryReleaseSharedÊñπÊ≥ïÂ¶ÇÊûúËøîÂõûtrueË°®Á§∫ÈáäÊîæÊàêÂäüÔºåËøîÂõûfalseË°®Á§∫ÈáäÊîæÂ§±Ë¥•ÔºåÂè™ÊúâÂΩìÂ∞ÜÂêåÊ≠•Áä∂ÊÄÅÂáè1ÂêéËØ•ÂêåÊ≠•Áä∂ÊÄÅÊÅ∞Â•Ω‰∏∫0Êó∂Êâç‰ºöËøîÂõûtrueÔºåÂÖ∂‰ªñÊÉÖÂÜµÈÉΩÊòØËøîÂõûfalse„ÄÇÈÇ£‰πàÂΩìtryReleaseSharedËøîÂõûtrue‰πãÂêéÂ∞±‰ºöÈ©¨‰∏äË∞ÉÁî®doReleaseSharedÊñπÊ≥ïÂéªÂî§ÈÜíÂêåÊ≠•ÈòüÂàóÁöÑÊâÄÊúâÁ∫øÁ®ã„ÄÇËøôÊ†∑Â∞±Ëß£Èáä‰∫Ü‰∏∫‰ªÄ‰πàÊúÄÂêé‰∏ÄÊ¨°Ë∞ÉÁî®countDownÊñπÊ≥ïÂ∞ÜËÆ°Êï∞Âô®Âáè‰∏∫0ÂêéÂ∞±‰ºöÂî§ÈÜíÊâÄÊúâË¢´ÈòªÂ°ûÁöÑÁ∫øÁ®ã„ÄÇ ÊÄªÁªì CountDownLatchÊòØÈÄöËøá‚ÄúÂÖ±‰∫´ÈîÅ‚ÄùÂÆûÁé∞ÁöÑ„ÄÇÂú®ÂàõÂª∫CountDownLatch‰∏≠Êó∂Ôºå‰ºö‰º†ÈÄí‰∏Ä‰∏™intÁ±ªÂûãÂèÇÊï∞countÔºåËØ•ÂèÇÊï∞ÊòØ‚ÄúÈîÅËÆ°Êï∞Âô®‚ÄùÁöÑÂàùÂßãÁä∂ÊÄÅÔºåË°®Á§∫ËØ•‚ÄúÂÖ±‰∫´ÈîÅ‚ÄùÊúÄÂ§öËÉΩË¢´count‰∏™Á∫øÁ®ãÂêåÊó∂Ëé∑Âèñ„ÄÇÂΩìÊüêÁ∫øÁ®ãË∞ÉÁî®ËØ•CountDownLatchÂØπË±°ÁöÑawait()ÊñπÊ≥ïÊó∂ÔºåËØ•Á∫øÁ®ã‰ºöÁ≠âÂæÖ‚ÄúÂÖ±‰∫´ÈîÅ‚ÄùÂèØÁî®Êó∂ÔºåÊâçËÉΩËé∑Âèñ‚ÄúÂÖ±‰∫´ÈîÅ‚ÄùËøõËÄåÁªßÁª≠ËøêË°å„ÄÇËÄå‚ÄúÂÖ±‰∫´ÈîÅ‚ÄùÂèØÁî®ÁöÑÊù°‰ª∂ÔºåÂ∞±ÊòØ‚ÄúÈîÅËÆ°Êï∞Âô®‚ÄùÁöÑÂÄº‰∏∫0ÔºÅËÄå‚ÄúÈîÅËÆ°Êï∞Âô®‚ÄùÁöÑÂàùÂßãÂÄº‰∏∫countÔºåÊØèÂΩì‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®ËØ•CountDownLatchÂØπË±°ÁöÑcountDown()ÊñπÊ≥ïÊó∂ÔºåÊâçÂ∞Ü‚ÄúÈîÅËÆ°Êï∞Âô®‚Äù-1ÔºõÈÄöËøáËøôÁßçÊñπÂºèÔºåÂøÖÈ°ªÊúâcount‰∏™Á∫øÁ®ãË∞ÉÁî®countDown()‰πãÂêéÔºå‚ÄúÈîÅËÆ°Êï∞Âô®‚ÄùÊâç‰∏∫0ÔºåËÄåÂâçÈù¢ÊèêÂà∞ÁöÑÁ≠âÂæÖÁ∫øÁ®ãÊâçËÉΩÁªßÁª≠ËøêË°åÔºÅ Â∫îÁî®Á§∫‰æã Âú®Áé©Ê¨¢‰πêÊñóÂú∞‰∏ªÊó∂ÂøÖÈ°ªÁ≠âÂæÖ‰∏â‰∏™Áé©ÂÆ∂ÈÉΩÂà∞ÈΩêÊâçÂèØ‰ª•ËøõË°åÂèëÁâå„ÄÇ 123456789101112131415161718192021222324252627public class Player extends Thread &#123; private static int count = 1; private final int id = count++; private CountDownLatch latch; public Player(CountDownLatch latch) &#123; this.latch = latch; &#125; @Override public void run() &#123; System.out.println("„ÄêÁé©ÂÆ∂" + id + "„ÄëÂ∑≤ÂÖ•Âú∫"); latch.countDown(); &#125; public static void main(String[] args) throws InterruptedException &#123; CountDownLatch latch = new CountDownLatch(3); System.out.println("ÁâåÂ±ÄÂºÄÂßã, Á≠âÂæÖÁé©ÂÆ∂ÂÖ•Âú∫..."); new Player(latch).start(); new Player(latch).start(); new Player(latch).start(); latch.await(); System.out.println("Áé©ÂÆ∂Â∑≤Âà∞ÈΩê, ÂºÄÂßãÂèëÁâå..."); &#125; &#125; ËøêË°åÁªìÊûúÊòæÁ§∫ÂèëÁâåÊìç‰Ωú‰∏ÄÂÆöÊòØÂú®ÊâÄÊúâÁé©ÂÆ∂ÈÉΩÂÖ•Âú∫ÂêéÊâçËøõË°å„ÄÇÂ∞Ülatch.await()Ê≥®ÈáäÊéâÔºåÂØπÊØî‰∏ãÁúãÁúãÁªìÊûú„ÄÇ ÂèØ‰ª•ÁúãÂà∞Âú®Ê≥®ÈáäÊéâlatch.await()ËøôË°å‰πãÂêéÔºåÂ∞±‰∏çËÉΩ‰øùËØÅÂú®ÊâÄÊúâÁé©ÂÆ∂ÂÖ•Âú∫ÂêéÊâçÂºÄÂßãÂèëÁâå‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-Semaphore]]></title>
    <url>%2Fposts%2F44092bd5.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ Semaphore(‰ø°Âè∑Èáè)ÊòØAQSÂÖ±‰∫´Ê®°ÂºèÁöÑ‰∏Ä‰∏™Â∫îÁî®ÔºåÂèØ‰ª•ÂÖÅËÆ∏Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂØπÂÖ±‰∫´ËµÑÊ∫êËøõË°åÊìç‰ΩúÔºåÂπ∂‰∏îÂèØ‰ª•ÊúâÊïàÁöÑÊéßÂà∂Âπ∂ÂèëÊï∞ÔºåÂà©Áî®ÂÆÉÂèØ‰ª•ÂæàÂ•ΩÁöÑÂÆûÁé∞ÊµÅÈáèÊéßÂà∂„ÄÇ SemaphoreÊèê‰æõ‰∫Ü‰∏Ä‰∏™ËÆ∏ÂèØËØÅÁöÑÊ¶ÇÂøµÔºåÂèØ‰ª•ÊääËøô‰∏™ËÆ∏ÂèØËØÅÁúã‰ΩúËΩ¶Á•®ÔºåÂè™ÊúâÊàêÂäüËé∑ÂèñËΩ¶Á•®ÁöÑ‰∫∫ÊâçËÉΩÂ§ü‰∏äËΩ¶ÔºåÂπ∂‰∏îËΩ¶Á•®ÊòØÊúâÊï∞ÈáèÁöÑÔºå‰∏çÂèØËÉΩÊØ´Êó†ÈôêÂà∂ÁöÑÂèë‰∏ãÂéªÔºåËøôÊ†∑Â∞±‰ºöÂØºËá¥ËΩ¶ËæÜË∂ÖËΩΩ„ÄÇÊâÄ‰ª•ÂΩìËΩ¶Á•®ÂèëÂÆåÁöÑÊó∂ÂÄô(ËΩ¶ËæÜÊª°ËΩΩ)ÔºåÂÖ∂‰ªñ‰∫∫Â∞±Âè™ËÉΩÁ≠â‰∏ã‰∏ÄË∂üËΩ¶„ÄÇÂ¶ÇÊûú‰∏≠ÈÄîÊúâ‰∫∫‰∏ãËΩ¶ÔºåÈÇ£‰πà‰ªñÁöÑ‰ΩçÁΩÆÂ∞Ü‰ºöÁ©∫Èó≤Âá∫Êù•ÔºåÂõ†Ê≠§Â¶ÇÊûúËøôÊó∂ÂÖ∂‰ªñ‰∫∫ÊÉ≥Ë¶Å‰∏äËΩ¶ÁöÑËØùÂ∞±ÂèàÂèØ‰ª•Ëé∑ÂæóËΩ¶Á•®‰∫Ü„ÄÇ ÊûÑÈÄ†Âô® 123456789//ÊûÑÈÄ†Âô®1public Semaphore(int permits) &#123; sync = new NonfairSync(permits);&#125;//ÊûÑÈÄ†Âô®2public Semaphore(int permits, boolean fair) &#123; sync = fair ? new FairSync(permits) : new NonfairSync(permits);&#125; SemaphoreÊèê‰æõ‰∫Ü‰∏§‰∏™Â∏¶ÂèÇÊûÑÈÄ†Âô®ÔºåÊ≤°ÊúâÊèê‰æõÊó†ÂèÇÊûÑÈÄ†Âô®„ÄÇËøô‰∏§‰∏™ÊûÑÈÄ†Âô®ÈÉΩÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™ÂàùÂßãÁöÑËÆ∏ÂèØËØÅÊï∞ÈáèÔºå‰ΩøÁî®ÊûÑÈÄ†Âô®1ÊûÑÈÄ†Âá∫Êù•ÁöÑ‰ø°Âè∑ÈáèÂú®Ëé∑ÂèñËÆ∏ÂèØËØÅÊó∂‰ºöÈááÁî®ÈùûÂÖ¨Âπ≥ÊñπÂºèËé∑ÂèñÔºå‰ΩøÁî®ÊûÑÈÄ†Âô®2ÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ÊåáÂÆöËé∑ÂèñËÆ∏ÂèØËØÅÁöÑÊñπÂºè(ÂÖ¨Âπ≥orÈùûÂÖ¨Âπ≥)„ÄÇSemaphore‰∏ªË¶ÅÂØπÂ§ñÊèê‰æõ‰∫Ü‰∏§Á±ªAPIÔºåËé∑ÂèñËÆ∏ÂèØËØÅÂíåÈáäÊîæËÆ∏ÂèØËØÅÔºåÈªòËÆ§ÁöÑÊòØËé∑ÂèñÂíåÈáäÊîæ‰∏Ä‰∏™ËÆ∏ÂèØËØÅÔºå‰πüÂèØ‰ª•‰º†ÂÖ•ÂèÇÊï∞Êù•ÂêåÊó∂Ëé∑ÂèñÂíåÈáäÊîæÂ§ö‰∏™ËÆ∏ÂèØËØÅ„ÄÇ Ëé∑ÂèñËÆ∏ÂèØËØÅ 12345678910111213141516171819//Ëé∑Âèñ‰∏Ä‰∏™ËÆ∏ÂèØËØÅ(ÂìçÂ∫î‰∏≠Êñ≠)public void acquire() throws InterruptedException &#123; sync.acquireSharedInterruptibly(1);&#125;//Ëé∑Âèñ‰∏Ä‰∏™ËÆ∏ÂèØËØÅ(‰∏çÂìçÂ∫î‰∏≠Êñ≠)public void acquireUninterruptibly() &#123; sync.acquireShared(1);&#125;//Â∞ùËØïËé∑ÂèñËÆ∏ÂèØËØÅ(ÈùûÂÖ¨Âπ≥Ëé∑Âèñ)public boolean tryAcquire() &#123; return sync.nonfairTryAcquireShared(1) &gt;= 0;&#125;//Â∞ùËØïËé∑ÂèñËÆ∏ÂèØËØÅ(ÂÆöÊó∂Ëé∑Âèñ)public boolean tryAcquire(long timeout, TimeUnit unit) throws InterruptedException &#123; return sync.tryAcquireSharedNanos(1, unit.toNanos(timeout));&#125; ‰∏äÈù¢ÁöÑAPIÊòØSemaphoreÊèê‰æõÁöÑÈªòËÆ§Ëé∑ÂèñËÆ∏ÂèØËØÅÊìç‰Ωú„ÄÇÊØèÊ¨°Âè™Ëé∑Âèñ‰∏Ä‰∏™ËÆ∏ÂèØËØÅ„ÄÇÈô§‰∫ÜÁõ¥Êé•Ëé∑ÂèñËøòÊèê‰æõ‰∫ÜÂ∞ùËØïËé∑ÂèñÔºåÁõ¥Êé•Ëé∑ÂèñÊìç‰ΩúÂú®Â§±Ë¥•‰πãÂêéÂèØËÉΩ‰ºöÈòªÂ°ûÁ∫øÁ®ãÔºåËÄåÂ∞ùËØïËé∑ÂèñÂàô‰∏ç‰ºö„ÄÇÂè¶Â§ñËøòÈúÄÊ≥®ÊÑèÁöÑÊòØtryAcquireÊñπÊ≥ïÊòØ‰ΩøÁî®ÈùûÂÖ¨Âπ≥ÊñπÂºèÂ∞ùËØïËé∑ÂèñÁöÑ„ÄÇÂπ≥Êó∂ÊØîËæÉÂ∏∏Áî®Âà∞ÁöÑÊòØacquireÊñπÊ≥ïÂéªËé∑ÂèñËÆ∏ÂèØËØÅ„ÄÇacquireÊñπÊ≥ïÈáåÈù¢Áõ¥Êé•Â∞±ÊòØË∞ÉÁî®sync.acquireSharedInterruptibly(1)ÔºåËøô‰∏™ÊñπÊ≥ïÊòØAQSÈáåÈù¢ÁöÑÊñπÊ≥ïÔºå‰∏ãÈù¢ÂÜçÊù•ÂõûÈ°æ‰∏Ä‰∏ãËøô‰∏™ÊñπÊ≥ï„ÄÇ 123456789101112//‰ª•ÂèØ‰∏≠Êñ≠Ê®°ÂºèËé∑ÂèñÈîÅ(ÂÖ±‰∫´Ê®°Âºè)public final void acquireSharedInterruptibly(int arg) throws InterruptedException &#123; //È¶ñÂÖàÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏≠Êñ≠, Â¶ÇÊûúÊòØÂàôÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; //1.Â∞ùËØïÂéªËé∑ÂèñÈîÅÔºåËé∑ÂèñÊàêÂäüÁõ¥Êé•ËøîÂõû if (tryAcquireShared(arg) &lt; 0) &#123; //2. Â¶ÇÊûúËé∑ÂèñÂ§±Ë¥•ÂàôËøõÂÖ•ËØ•ÊñπÊ≥ï doAcquireSharedInterruptibly(arg); &#125;&#125; acquireSharedInterruptiblyÊñπÊ≥ïÈ¶ñÂÖàÂ∞±ÊòØÂéªË∞ÉÁî®tryAcquireSharedÊñπÊ≥ïÂéªÂ∞ùËØïËé∑ÂèñÔºåtryAcquireSharedÂú®AQSÈáåÈù¢ÊòØÊäΩË±°ÊñπÊ≥ïÔºåFairSyncÂíåNonfairSyncËøô‰∏§‰∏™Ê¥æÁîüÁ±ªÂÆûÁé∞‰∫ÜËØ•ÊñπÊ≥ïÁöÑÈÄªËæë„ÄÇFairSyncÂÆûÁé∞ÁöÑÊòØÂÖ¨Âπ≥Ëé∑ÂèñÁöÑÈÄªËæëÔºåËÄåNonfairSyncÂÆûÁé∞ÁöÑÈùûÂÖ¨Âπ≥Ëé∑ÂèñÁöÑÈÄªËæë„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859abstract static class Sync extends AbstractQueuedSynchronizer &#123; //ÈùûÂÖ¨Âπ≥ÊñπÂºèÂ∞ùËØïËé∑Âèñ final int nonfairTryAcquireShared(int acquires) &#123; for (;;) &#123; //Ëé∑ÂèñÂèØÁî®ËÆ∏ÂèØËØÅ int available = getState(); //Ëé∑ÂèñÂâ©‰ΩôËÆ∏ÂèØËØÅ int remaining = available - acquires; //1.Â¶ÇÊûúremainingÂ∞è‰∫é0ÂàôÁõ¥Êé•ËøîÂõûremaining //2.Â¶ÇÊûúremainingÂ§ß‰∫é0ÂàôÂÖàÊõ¥Êñ∞ÂêåÊ≠•Áä∂ÊÄÅÂÜçËøîÂõûremaining if (remaining &lt; 0 || compareAndSetState(available, remaining)) &#123; return remaining; &#125; &#125; &#125;&#125;//ÈùûÂÖ¨Âπ≥ÂêåÊ≠•Âô®static final class NonfairSync extends Sync &#123; private static final long serialVersionUID = -2694183684443567898L; NonfairSync(int permits) &#123; super(permits); &#125; //Â∞ùËØïËé∑ÂèñËÆ∏ÂèØËØÅ protected int tryAcquireShared(int acquires) &#123; return nonfairTryAcquireShared(acquires); &#125;&#125;//ÂÖ¨Âπ≥ÂêåÊ≠•Âô®static final class FairSync extends Sync &#123; private static final long serialVersionUID = 2014338818796000944L; FairSync(int permits) &#123; super(permits); &#125; //Â∞ùËØïËé∑ÂèñËÆ∏ÂèØËØÅ protected int tryAcquireShared(int acquires) &#123; for (;;) &#123; //Âà§Êñ≠ÂêåÊ≠•ÈòüÂàóÂâçÈù¢ÊúâÊ≤°Êúâ‰∫∫ÊéíÈòü if (hasQueuedPredecessors()) &#123; //Â¶ÇÊûúÊúâÁöÑËØùÂ∞±Áõ¥Êé•ËøîÂõû-1ÔºåË°®Á§∫Â∞ùËØïËé∑ÂèñÂ§±Ë¥• return -1; &#125; //Ëé∑ÂèñÂèØÁî®ËÆ∏ÂèØËØÅ int available = getState(); //Ëé∑ÂèñÂâ©‰ΩôËÆ∏ÂèØËØÅ int remaining = available - acquires; //1.Â¶ÇÊûúremainingÂ∞è‰∫é0ÂàôÁõ¥Êé•ËøîÂõûremaining //2.Â¶ÇÊûúremainingÂ§ß‰∫é0ÂàôÂÖàÊõ¥Êñ∞ÂêåÊ≠•Áä∂ÊÄÅÂÜçËøîÂõûremaining if (remaining &lt; 0 || compareAndSetState(available, remaining)) &#123; return remaining; &#125; &#125; &#125;&#125; NonfairSyncÁöÑtryAcquireSharedÊñπÊ≥ïÁõ¥Êé•Ë∞ÉÁî®ÁöÑÊòØnonfairTryAcquireSharedÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÊòØÂú®Áà∂Á±ªSyncÈáåÈù¢ÁöÑ„ÄÇÈùûÂÖ¨Âπ≥Ëé∑ÂèñÈîÅÁöÑÈÄªËæëÊòØÂÖàÂèñÂá∫ÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅ(ÂêåÊ≠•Áä∂ÊÄÅË°®Á§∫ËÆ∏ÂèØËØÅ‰∏™Êï∞)ÔºåÂ∞ÜÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅÂáèÂéª‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåÂ¶ÇÊûúÁªìÊûú‰∏çÂ∞è‰∫é0ÁöÑËØùËØÅÊòéËøòÊúâÂèØÁî®ÁöÑËÆ∏ÂèØËØÅÔºåÈÇ£‰πàÂ∞±Áõ¥Êé•‰ΩøÁî®CASÊìç‰ΩúÊõ¥Êñ∞ÂêåÊ≠•Áä∂ÊÄÅÁöÑÂÄºÔºåÊúÄÂêé‰∏çÁÆ°ÁªìÊûúÊòØÂê¶Â∞è‰∫é0ÈÉΩ‰ºöËøîÂõûËØ•ÁªìÊûúÂÄº„ÄÇËøôÈáåË¶Å‰∫ÜËß£tryAcquireSharedÊñπÊ≥ïËøîÂõûÂÄºÁöÑÂê´‰πâÔºåËøîÂõûË¥üÊï∞Ë°®Á§∫Ëé∑ÂèñÂ§±Ë¥•ÔºåÈõ∂Ë°®Á§∫ÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÊàêÂäü‰ΩÜÂêéÁª≠Á∫øÁ®ã‰∏çËÉΩÂÜçËé∑ÂèñÔºåÊ≠£Êï∞Ë°®Á§∫ÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÊàêÂäüÂπ∂‰∏îÂêéÁª≠Á∫øÁ®ã‰πüËÉΩÂ§üËé∑Âèñ„ÄÇÂÜçÊù•ÁúãÁúãacquireSharedInterruptiblyÊñπÊ≥ïÁöÑ‰ª£Á†Å„ÄÇ 123456789101112131415//‰ª•ÂèØ‰∏≠Êñ≠Ê®°ÂºèËé∑ÂèñÈîÅ(ÂÖ±‰∫´Ê®°Âºè)public final void acquireSharedInterruptibly(int arg) throws InterruptedException &#123; //È¶ñÂÖàÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏≠Êñ≠, Â¶ÇÊûúÊòØÂàôÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; //1.Â∞ùËØïÂéªËé∑ÂèñÈîÅ //Ë¥üÊï∞ÔºöË°®Á§∫Ëé∑ÂèñÂ§±Ë¥• //Èõ∂ÂÄºÔºöË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÊàêÂäü, ‰ΩÜÊòØÂêéÁªßÁ∫øÁ®ã‰∏çËÉΩÂÜçËé∑Âèñ‰∫Ü //Ê≠£Êï∞ÔºöË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÊàêÂäü, Âπ∂‰∏îÂêéÁªßÁ∫øÁ®ãÂêåÊ†∑ÂèØ‰ª•Ëé∑ÂèñÊàêÂäü if (tryAcquireShared(arg) &lt; 0) &#123; //2. Â¶ÇÊûúËé∑ÂèñÂ§±Ë¥•ÂàôËøõ‰∫∫ËØ•ÊñπÊ≥ï doAcquireSharedInterruptibly(arg); &#125;&#125; Â¶ÇÊûúËøîÂõûÁöÑremainingÂ∞è‰∫é0ÁöÑËØùÂ∞±‰ª£Ë°®Ëé∑ÂèñÂ§±Ë¥•ÔºåÂõ†Ê≠§tryAcquireShared(arg) &lt; 0Â∞±‰∏∫trueÔºåÊâÄ‰ª•Êé•‰∏ãÊù•Â∞±‰ºöË∞ÉÁî®doAcquireSharedInterruptiblyÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÊòØAQSÁöÑÊñπÊ≥ïÔºåÂÆÉ‰ºöÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÊàêÁªìÁÇπÊîæÂÖ•ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ®ÔºåÂπ∂‰∏îÊúâÂèØËÉΩÊåÇËµ∑Á∫øÁ®ã„ÄÇËøô‰πüÊòØÂΩìremainingÂ∞è‰∫é0Êó∂Á∫øÁ®ã‰ºöÊéíÈòüÈòªÂ°ûÁöÑÂéüÂõ†„ÄÇËÄåÂ¶ÇÊûúËøîÂõûÁöÑremaining&gt;=0ÁöÑËØùÂ∞±‰ª£Ë°®ÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÊàêÂäüÔºåÂõ†Ê≠§tryAcquireShared(arg) &lt; 0Â∞±‰∏∫flaseÔºåÊâÄ‰ª•Â∞±‰∏ç‰ºöÂÜçÂéªË∞ÉÁî®doAcquireSharedInterruptiblyÊñπÊ≥ïÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ã‰∫Ü„ÄÇ‰ª•‰∏äÊòØÈùûÂÖ¨Âπ≥Ëé∑ÂèñÁöÑÊï¥‰∏™ÈÄªËæëÔºåËÄåÂÖ¨Âπ≥Ëé∑ÂèñÊó∂‰ªÖ‰ªÖÊòØÂú®Ê≠§‰πãÂâçÂÖàÂéªË∞ÉÁî®hasQueuedPredecessorsÊñπÊ≥ïÂà§Êñ≠ÂêåÊ≠•ÈòüÂàóÊòØÂê¶Êúâ‰∫∫Âú®ÊéíÈòüÔºåÂ¶ÇÊûúÊúâÁöÑËØùÂ∞±Áõ¥Êé•return -1Ë°®Á§∫Ëé∑ÂèñÂ§±Ë¥•ÔºåÂê¶ÂàôÊâçÁªßÁª≠ÊâßË°å‰∏ãÈù¢ÂíåÈùûÂÖ¨Âπ≥Ëé∑Âèñ‰∏ÄÊ†∑ÁöÑÊ≠•È™§„ÄÇ ÈáäÊîæËÆ∏ÂèØ 1234//ÈáäÊîæ‰∏Ä‰∏™ËÆ∏ÂèØËØÅpublic void release() &#123; sync.releaseShared(1);&#125; Ë∞ÉÁî®releaseÊñπÊ≥ïÊòØÈáäÊîæ‰∏Ä‰∏™ËÆ∏ÂèØËØÅÔºåÂÆÉÁöÑÊìç‰ΩúÂæàÁÆÄÂçïÔºåÂ∞±Ë∞ÉÁî®‰∫ÜAQSÁöÑreleaseSharedÊñπÊ≥ïÔºå‰∏ãÈù¢Êù•ÁúãÁúãËøô‰∏™ÊñπÊ≥ï„ÄÇ 12345678910//ÈáäÊîæÈîÅÁöÑÊìç‰Ωú(ÂÖ±‰∫´Ê®°Âºè)public final boolean releaseShared(int arg) &#123; //1.Â∞ùËØïÂéªÈáäÊîæÈîÅ if (tryReleaseShared(arg)) &#123; //2.Â¶ÇÊûúÈáäÊîæÊàêÂäüÂ∞±Âî§ÈÜíÂÖ∂‰ªñÁ∫øÁ®ã doReleaseShared(); return true; &#125; return false;&#125; AQSÁöÑreleaseSharedÊñπÊ≥ïÈ¶ñÂÖàË∞ÉÁî®tryReleaseSharedÊñπÊ≥ïÂ∞ùËØïÈáäÊîæÈîÅÔºåËøô‰∏™ÊñπÊ≥ïÁöÑÂÆûÁé∞ÈÄªËæëÂú®Â≠êÁ±ªSyncÈáåÈù¢„ÄÇSemaphoreÈáçÂÜô‰∫ÜtryReleaseShared()ÔºåÂÆÉÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910111213protected final boolean tryReleaseShared(int releases) &#123; for (;;) &#123; // Ëé∑Âèñ‚ÄúÂèØ‰ª•Ëé∑ÂæóÁöÑ‰ø°Âè∑ÈáèÁöÑËÆ∏ÂèØÊï∞‚Äù int current = getState(); // Ëé∑Âèñ‚ÄúÈáäÊîæreleases‰∏™‰ø°Âè∑ÈáèËÆ∏ÂèØ‰πãÂêéÔºåÂâ©‰ΩôÁöÑ‰ø°Âè∑ÈáèËÆ∏ÂèØÊï∞‚Äù int next = current + releases; if (next &lt; current) // overflow throw new Error("Maximum permit count exceeded"); // ËÆæÁΩÆ‚ÄúÂèØ‰ª•Ëé∑ÂæóÁöÑ‰ø°Âè∑ÈáèÁöÑËÆ∏ÂèØÊï∞‚Äù‰∏∫next„ÄÇ if (compareAndSetState(current, next)) return true; &#125;&#125; tryReleaseSharedÊñπÊ≥ïÈáåÈù¢ÈááÁî®forÂæ™ÁéØËøõË°åËá™ÊóãÔºåÈ¶ñÂÖàËé∑ÂèñÂêåÊ≠•Áä∂ÊÄÅÔºåÂ∞ÜÂêåÊ≠•Áä∂ÊÄÅÂä†‰∏ä‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåÁÑ∂Âêé‰ª•CASÊñπÂºèÊõ¥Êñ∞ÂêåÊ≠•Áä∂ÊÄÅÔºåÊõ¥Êñ∞ÊàêÂäüÂ∞±ËøîÂõûtrueÂπ∂Ë∑≥Âá∫ÊñπÊ≥ïÔºåÂê¶ÂàôÂ∞±ÁªßÁª≠Âæ™ÁéØÁõ¥Âà∞ÊàêÂäü‰∏∫Ê≠¢„ÄÇ Â¶ÇÊûútryReleaseShared()Â∞ùËØïÈáäÊîæÂÖ±‰∫´ÈîÅÂ§±Ë¥•ÔºåÂàô‰ºöË∞ÉÁî®doReleaseShared()ÂéªÈáäÊîæÂÖ±‰∫´ÈîÅ„ÄÇdoReleaseShared()ÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526private void doReleaseShared() &#123; for (;;) &#123; // Ëé∑ÂèñÂêåÊ≠•ÈòüÂàóÁöÑÂ§¥ËäÇÁÇπ Node h = head; // Â¶ÇÊûúÂ§¥ËäÇÁÇπ‰∏ç‰∏∫nullÔºåÂπ∂‰∏îÂ§¥ËäÇÁÇπ‰∏çÁ≠â‰∫étailËäÇÁÇπ„ÄÇ if (h != null &amp;&amp; h != tail) &#123; // Ëé∑ÂèñÂ§¥ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ int ws = h.waitStatus; // Â¶ÇÊûúÂ§¥ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÊòØSIGNALÁä∂ÊÄÅÔºåÂàôÊÑèÂë≥ÁùÄ‚ÄúÂ§¥ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÊâÄÂØπÂ∫îÁöÑÁ∫øÁ®ã‚ÄùÈúÄË¶ÅË¢´unparkÂî§ÈÜí„ÄÇ if (ws == Node.SIGNAL) &#123; // ËÆæÁΩÆ‚ÄúÂ§¥ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÁä∂ÊÄÅ‚Äù‰∏∫Á©∫Áä∂ÊÄÅ„ÄÇÂ§±Ë¥•ÁöÑËØùÔºåÂàôÁªßÁª≠Âæ™ÁéØ„ÄÇ if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0)) continue; // Âî§ÈÜí‚ÄúÂ§¥ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÊâÄÂØπÂ∫îÁöÑÁ∫øÁ®ã‚Äù„ÄÇ unparkSuccessor(h); &#125; // Â¶ÇÊûúÂ§¥ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÊòØÁ©∫Áä∂ÊÄÅÔºåÂàôËÆæÁΩÆ‚ÄúÊñá‰ª∂ÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÊâÄÊã•ÊúâÁöÑÂÖ±‰∫´ÈîÅ‚Äù‰∏∫ÂÖ∂ÂÆÉÁ∫øÁ®ãËé∑ÂèñÈîÅÁöÑÁ©∫Áä∂ÊÄÅ„ÄÇ else if (ws == 0 &amp;&amp; !compareAndSetWaitStatus(h, 0, Node.PROPAGATE)) continue; // loop on failed CAS &#125; // Â¶ÇÊûúÂ§¥ËäÇÁÇπÂèëÁîüÂèòÂåñÔºåÂàôÁªßÁª≠Âæ™ÁéØ„ÄÇÂê¶ÂàôÔºåÈÄÄÂá∫Âæ™ÁéØ„ÄÇ if (h == head) // loop if head changed break; &#125;&#125; doReleaseShared()‰ºöÈáäÊîæ‚ÄúÂÖ±‰∫´ÈîÅ‚Äù„ÄÇÂÆÉ‰ºö‰ªéÂâçÂæÄÂêéÁöÑÈÅçÂéÜÂêåÊ≠•ÈòüÂàóÔºå‰æùÊ¨°‚ÄúÂî§ÈÜí‚ÄùÁÑ∂Âêé‚ÄúÊâßË°å‚ÄùÈòüÂàó‰∏≠ÊØè‰∏™ËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ãÔºõÊúÄÁªàÁöÑÁõÆÁöÑÊòØËÆ©Ëøô‰∫õÁ∫øÁ®ãÈáäÊîæÂÆÉ‰ª¨ÊâÄÊåÅÊúâÁöÑ‰ø°Âè∑Èáè„ÄÇ Â∫îÁî®Á§∫‰æã Âà©Áî®SemaphoreÂÆûÁé∞Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†„ÄÇ ËøûÊé•Ê±†‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118package main.java.com.study.lock.semaphore;import java.util.concurrent.Semaphore;import java.util.concurrent.TimeUnit;/** * @author: whb * @description: ËøûÊé•Ê±† */public class ConnectPool &#123; /** * ËøûÊé•Ê±†Â§ßÂ∞è */ private int size; /** * ËøûÊé•ÈõÜÂêà */ private Connect[] connects; /** * ËøûÊé•Áä∂ÊÄÅÊ†áÂøó */ private boolean[] connectFlag; /** * Ââ©‰ΩôÂèØÁî®ËøûÊé•Êï∞ */ private volatile int available; /** * ‰ø°Âè∑Èáè */ private Semaphore semaphore; public ConnectPool(int size) &#123; this.size = size; this.available = size; semaphore = new Semaphore(size, true); connects = new Connect[size]; connectFlag = new boolean[size]; initConnects(); &#125; /** * ÂàùÂßãÂåñËøûÊé• */ private void initConnects() &#123; //ÁîüÊàêÊåáÂÆöÊï∞ÈáèÁöÑËøûÊé• for (int i = 0; i &lt; this.size; i++) &#123; connects[i] = new Connect(); &#125; &#125; /** * Ëé∑ÂèñËøûÊé• */ private synchronized Connect getConnect() &#123; for (int i = 0; i &lt; connectFlag.length; i++) &#123; //ÈÅçÂéÜÈõÜÂêàÊâæÂà∞Êú™‰ΩøÁî®ÁöÑËøûÊé• if (!connectFlag[i]) &#123; //Â∞ÜËøûÊé•ËÆæÁΩÆ‰∏∫‰ΩøÁî®‰∏≠ connectFlag[i] = true; //ÂèØÁî®ËøûÊé•Êï∞Âáè‰∏Ä available--; System.out.println("„Äê" + Thread.currentThread().getName() + "„ÄëÂ∑≤Ëé∑ÂèñËøûÊé•ÔºåÂâ©‰ΩôÂèØÁî®ËøûÊé•Ôºö" + available); //ËøîÂõûËøûÊé• return connects[i]; &#125; &#125; return null; &#125; /** * ÊâìÂºÄÈìæÊé• * * @return */ public Connect openConnect() throws InterruptedException &#123; //Ëé∑ÂèñËÆ∏ÂèØ semaphore.acquire(); //Ëé∑ÂèñËøûÊé• return getConnect(); &#125; /** * ÈáäÊîæËøûÊé• */ public synchronized void release(Connect connect) &#123; for (int i = 0; i &lt; this.size; i++) &#123; if (connect == connects[i]) &#123; //Â∞ÜËøûÊé•ËÆæÁΩÆ‰∏∫Êú™‰ΩøÁî® connectFlag[i] = false; //ÂèØÁî®ËøûÊé•Âä†‰∏Ä available++; System.out.println("„Äê" + Thread.currentThread().getName() + "„ÄëÂ∑≤ÈáäÊîæËøûÊé•ÔºåÂâ©‰ΩôÂèØÁî®ËøûÊé•Ôºö" + available); //ÈáäÊîæËÆ∏ÂèØ semaphore.release(); &#125; &#125; &#125;&#125;class Connect &#123; private static int count = 1; private int id = count++; public Connect() &#123; //Ê®°ÊãüÊâìÂºÄ‰∏Ä‰∏™ËøûÊé•ÂæàËÄóË¥πËµÑÊ∫êÔºåÈúÄË¶ÅÁ≠âÂæÖ1Áßí try &#123; TimeUnit.MILLISECONDS.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println("ËøûÊé•#" + id + "#Â∑≤‰∏éÊï∞ÊçÆÂ∫ìÂª∫Á´ãÈÄöÈÅìÔºÅ"); &#125; @Override public String toString() &#123; return "„Äê" + id + "„Äë"; &#125;&#125; ÊµãËØï‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627package main.java.com.study.lock.semaphore;/** * @author: whb * @description: ÊµãËØïËøûÊé•Ê±† */public class TestConnectPool extends Thread &#123; private static ConnectPool pool = new ConnectPool(3); @Override public void run() &#123; try &#123; Connect connect = pool.openConnect(); Thread.sleep(100); pool.release(connect); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; new TestConnectPool().start(); &#125; &#125;&#125; ÊâßË°åÁªìÊûúÔºö]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-CyclicBarrier]]></title>
    <url>%2Fposts%2F3a683baa.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÁªèÂ∏∏‰ºöÈÅáÂà∞ËøôÊ†∑ÁöÑÊÉÖÊôØÔºåÂú®ËøõË°åÊüê‰∏™Ê¥ªÂä®ÂâçÈúÄË¶ÅÁ≠âÂæÖ‰∫∫ÂÖ®ÈÉ®ÈÉΩÈΩê‰∫ÜÊâçÂºÄÂßã„ÄÇ‰æãÂ¶ÇÂêÉÈ•≠Êó∂Ë¶ÅÁ≠âÂÖ®ÂÆ∂‰∫∫ÈÉΩ‰∏äÂ∫ß‰∫ÜÊâçÂä®Á≠∑Â≠êÔºåÊóÖÊ∏∏Êó∂Ë¶ÅÁ≠âÂÖ®ÈÉ®‰∫∫ÈÉΩÂà∞ÈΩê‰∫ÜÊâçÂá∫ÂèëÔºåÊØîËµõÊó∂Ë¶ÅÁ≠âËøêÂä®ÂëòÈÉΩ‰∏äÂú∫ÂêéÊâçÂºÄÂßã„ÄÇÂú®J.U.CÂåÖ‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂêåÊ≠•Â∑•ÂÖ∑Á±ªËÉΩÂ§üÂæàÂ•ΩÁöÑÊ®°ÊãüËøôÁ±ªÂú∫ÊôØÔºåÂÆÉÂ∞±ÊòØCyclicBarrierÁ±ª„ÄÇÂà©Áî®CyclicBarrierÁ±ªÂèØ‰ª•ÂÆûÁé∞‰∏ÄÁªÑÁ∫øÁ®ãÁõ∏‰∫íÁ≠âÂæÖÔºåÂΩìÊâÄÊúâÁ∫øÁ®ãÈÉΩÂà∞ËææÊüê‰∏™Â±èÈöúÁÇπÂêéÂÜçËøõË°åÂêéÁª≠ÁöÑÊìç‰Ωú„ÄÇ‰∏ãÂõæÊºîÁ§∫‰∫ÜËøô‰∏ÄËøáÁ®ã„ÄÇ ÊàêÂëòÂèòÈáè Âú®CyclicBarrierÁ±ªÁöÑÂÜÖÈÉ®Êúâ‰∏Ä‰∏™ËÆ°Êï∞Âô®ÔºåÊØè‰∏™Á∫øÁ®ãÂú®Âà∞ËææÂ±èÈöúÁÇπÁöÑÊó∂ÂÄôÈÉΩ‰ºöË∞ÉÁî®awaitÊñπÊ≥ïÂ∞ÜËá™Â∑±ÈòªÂ°ûÔºåÊ≠§Êó∂ËÆ°Êï∞Âô®‰ºöÂáè1ÔºåÂΩìËÆ°Êï∞Âô®Âáè‰∏∫0ÁöÑÊó∂ÂÄôÊâÄÊúâÂõ†Ë∞ÉÁî®awaitÊñπÊ≥ïËÄåË¢´ÈòªÂ°ûÁöÑÁ∫øÁ®ãÂ∞ÜË¢´Âî§ÈÜí„ÄÇËøôÂ∞±ÊòØÂÆûÁé∞‰∏ÄÁªÑÁ∫øÁ®ãÁõ∏‰∫íÁ≠âÂæÖÁöÑÂéüÁêÜÔºå‰∏ãÈù¢Áúã‰∏ãCyclicBarrierÊúâÂì™‰∫õÊàêÂëòÂèòÈáè„ÄÇ 1234567891011121314151617//ÂêåÊ≠•Êìç‰ΩúÈîÅprivate final ReentrantLock lock = new ReentrantLock();//Á∫øÁ®ãÊã¶Êà™Âô®private final Condition trip = lock.newCondition();//ÊØèÊ¨°Êã¶Êà™ÁöÑÁ∫øÁ®ãÊï∞private final int parties;//Êç¢‰ª£ÂâçÊâßË°åÁöÑ‰ªªÂä°private final Runnable barrierCommand;//Ë°®Á§∫Ê†ÖÊ†èÁöÑÂΩìÂâç‰ª£private Generation generation = new Generation();//ËÆ°Êï∞Âô®private int count;//ÈùôÊÄÅÂÜÖÈÉ®Á±ªGenerationprivate static class Generation &#123; boolean broken = false;&#125; CyclicBarrierÂÜÖÈÉ®ÊòØÈÄöËøáÊù°‰ª∂ÈòüÂàótripÊù•ÂØπÁ∫øÁ®ãËøõË°åÈòªÂ°ûÁöÑÔºåÂπ∂‰∏îÂÖ∂ÂÜÖÈÉ®Áª¥Êä§‰∫Ü‰∏§‰∏™intÂûãÁöÑÂèòÈáèpartiesÂíåcount„ÄÇ partiesË°®Á§∫ÊØèÊ¨°Êã¶Êà™ÁöÑÁ∫øÁ®ãÊï∞ÔºåËØ•ÂÄºÂú®ÊûÑÈÄ†Êó∂ËøõË°åËµãÂÄº„ÄÇ countÊòØÂÜÖÈÉ®ËÆ°Êï∞Âô®ÔºåÂÆÉÁöÑÂàùÂßãÂÄºÂíåpartiesÁõ∏ÂêåÔºå‰ª•ÂêéÈöèÁùÄÊØèÊ¨°awaitÊñπÊ≥ïÁöÑË∞ÉÁî®ËÄåÂáè1ÔºåÁõ¥Âà∞Âáè‰∏∫0Â∞±Â∞ÜÊâÄÊúâÁ∫øÁ®ãÂî§ÈÜí„ÄÇ CyclicBarrierÊúâ‰∏Ä‰∏™ÈùôÊÄÅÂÜÖÈÉ®Á±ªGenerationÔºåËØ•Á±ªÁöÑÂØπË±°‰ª£Ë°®Ê†ÖÊ†èÁöÑÂΩìÂâç‰ª£ÔºåÂ∞±ÂÉèÁé©Ê∏∏ÊàèÊó∂‰ª£Ë°®ÁöÑÊú¨Â±ÄÊ∏∏ÊàèÔºåÂà©Áî®ÂÆÉÂèØ‰ª•ÂÆûÁé∞Âæ™ÁéØÁ≠âÂæÖ„ÄÇ barrierCommandË°®Á§∫Êç¢‰ª£ÂâçÊâßË°åÁöÑ‰ªªÂä°ÔºåÂΩìcountÂáè‰∏∫0Êó∂Ë°®Á§∫Êú¨Â±ÄÊ∏∏ÊàèÁªìÊùüÔºåÈúÄË¶ÅËΩ¨Âà∞‰∏ã‰∏ÄÂ±Ä„ÄÇÂú®ËΩ¨Âà∞‰∏ã‰∏ÄÂ±ÄÊ∏∏Êàè‰πãÂâç‰ºöÂ∞ÜÊâÄÊúâÈòªÂ°ûÁöÑÁ∫øÁ®ãÂî§ÈÜíÔºåÂú®Âî§ÈÜíÊâÄÊúâÁ∫øÁ®ã‰πãÂâç‰Ω†ÂèØ‰ª•ÈÄöËøáÊåáÂÆöbarrierCommandÊù•ÊâßË°åËá™Â∑±ÁöÑ‰ªªÂä°„ÄÇ ÊûÑÈÄ†Âô® 123456789101112131415//ÊûÑÈÄ†Âô®1public CyclicBarrier(int parties, Runnable barrierAction) &#123; if (parties &lt;= 0) throw new IllegalArgumentException(); // partiesË°®Á§∫‚ÄúÂøÖÈ°ªÂêåÊó∂Âà∞ËææbarrierÁöÑÁ∫øÁ®ã‰∏™Êï∞‚Äù„ÄÇ this.parties = parties; // countË°®Á§∫‚ÄúÂ§ÑÂú®Á≠âÂæÖÁä∂ÊÄÅÁöÑÁ∫øÁ®ã‰∏™Êï∞‚Äù„ÄÇ this.count = parties; // barrierCommandË°®Á§∫‚Äúparties‰∏™Á∫øÁ®ãÂà∞ËææbarrierÊó∂Ôºå‰ºöÊâßË°åÁöÑÂä®‰Ωú‚Äù„ÄÇ this.barrierCommand = barrierAction;&#125;//ÊûÑÈÄ†Âô®2public CyclicBarrier(int parties) &#123; this(parties, null);&#125; CyclicBarrierÊúâ‰∏§‰∏™ÊûÑÈÄ†Âô®ÔºåÂÖ∂‰∏≠ÊûÑÈÄ†Âô®1ÊòØÂÆÉÁöÑÊ†∏ÂøÉÊûÑÈÄ†Âô®ÔºåÂú®ËøôÈáåÂèØ‰ª•ÊåáÂÆöË¶ÅÊã¶Êà™ÁöÑÁ∫øÁ®ãÊï∞‰ª•ÂèäÁªìÊùüÊó∂Ë¶ÅÊâßË°åÁöÑ‰ªªÂä°ÔºåËøòÂèØ‰ª•ÁúãÂà∞ËÆ°Êï∞Âô®countÁöÑÂàùÂßãÂÄºË¢´ËÆæÁΩÆ‰∏∫parties„ÄÇ Á≠âÂæÖÊñπÊ≥ï 12345678910111213//ÈùûÂÆöÊó∂Á≠âÂæÖpublic int await() throws InterruptedException, BrokenBarrierException &#123; try &#123; return dowait(false, 0L); &#125; catch (TimeoutException toe) &#123; throw new Error(toe); &#125;&#125;//ÂÆöÊó∂Á≠âÂæÖpublic int await(long timeout, TimeUnit unit) throws InterruptedException, BrokenBarrierException, TimeoutException &#123; return dowait(true, unit.toNanos(timeout));&#125; ‰∏çÁÆ°ÊòØÂÆöÊó∂Á≠âÂæÖËøòÊòØÈùûÂÆöÊó∂Á≠âÂæÖÔºåÂÆÉ‰ª¨ÈÉΩË∞ÉÁî®‰∫ÜdowaitÊñπÊ≥ïÔºåÂè™‰∏çËøáÊòØ‰º†ÂÖ•ÁöÑÂèÇÊï∞‰∏çÂêåËÄåÂ∑≤„ÄÇ‰∏ãÈù¢Áúã‰∏ãdowaitÊñπÊ≥ïÈÉΩÂÅö‰∫Ü‰∫õ‰ªÄ‰πà„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081//Ê†∏ÂøÉÁ≠âÂæÖÊñπÊ≥ïprivate int dowait(boolean timed, long nanos) throws InterruptedException, BrokenBarrierException, TimeoutException &#123; final ReentrantLock lock = this.lock; //Ëé∑ÂèñÁã¨Âç†ÈîÅ lock.lock(); try &#123; //‰øùÂ≠òÂΩìÂâçÁöÑgeneration final Generation g = generation; //Ê£ÄÊü•ÂΩìÂâçÊ†ÖÊ†èÊòØÂê¶Ë¢´ÊâìÁøª if (g.broken) &#123; throw new BrokenBarrierException(); &#125; //Ê£ÄÊü•ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Ë¢´‰∏≠Êñ≠ if (Thread.interrupted()) &#123; //Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãË¢´‰∏≠Êñ≠‰ºöÂÅö‰ª•‰∏ã‰∏â‰ª∂‰∫ã //1.ÊâìÁøªÂΩìÂâçÊ†ÖÊ†è //2.Âî§ÈÜíÊã¶Êà™ÁöÑÊâÄÊúâÁ∫øÁ®ã //3.ÊäõÂá∫‰∏≠Êñ≠ÂºÇÂ∏∏ breakBarrier(); throw new InterruptedException(); &#125; //ÊØèÊ¨°ÈÉΩÂ∞ÜËÆ°Êï∞Âô®ÁöÑÂÄºÂáè1 int index = --count; //ËÆ°Êï∞Âô®ÁöÑÂÄºÂáè‰∏∫0ÂàôÈúÄÂî§ÈÜíÊâÄÊúâÁ∫øÁ®ãÂπ∂ËΩ¨Êç¢Âà∞‰∏ã‰∏Ä‰ª£ if (index == 0) &#123; boolean ranAction = false; try &#123; //Âî§ÈÜíÊâÄÊúâÁ∫øÁ®ãÂâçÂÖàÊâßË°åÊåáÂÆöÁöÑ‰ªªÂä° final Runnable command = barrierCommand; if (command != null) &#123; command.run(); &#125; ranAction = true; //Âî§ÈÜíÊâÄÊúâÁ∫øÁ®ãÂπ∂ËΩ¨Âà∞‰∏ã‰∏Ä‰ª£ nextGeneration(); return 0; &#125; finally &#123; //Á°Æ‰øùÂú®‰ªªÂä°Êú™ÊàêÂäüÊâßË°åÊó∂ËÉΩÂ∞ÜÊâÄÊúâÁ∫øÁ®ãÂî§ÈÜí if (!ranAction) &#123; breakBarrier(); &#125; &#125; &#125; //ÂΩìÂâçÁ∫øÁ®ã‰∏ÄÁõ¥ÈòªÂ°ûÔºåÁõ¥Âà∞‚ÄúÊúâparties‰∏™Á∫øÁ®ãÂà∞Ëææbarrier‚Äù Êàñ ‚ÄúÂΩìÂâçÁ∫øÁ®ãË¢´‰∏≠Êñ≠‚Äù Êàñ ‚ÄúË∂ÖÊó∂‚ÄùËøô3ËÄÖ‰πã‰∏ÄÂèëÁîüÔºåÂΩìÂâçÁ∫øÁ®ãÊâçÁªßÁª≠ÊâßË°å„ÄÇ for (;;) &#123; try &#123; //Ê†πÊçÆ‰º†ÂÖ•ÁöÑÂèÇÊï∞Êù•ÂÜ≥ÂÆöÊòØÂÆöÊó∂Á≠âÂæÖËøòÊòØÈùûÂÆöÊó∂Á≠âÂæÖ if (!timed) &#123; trip.await(); &#125;else if (nanos &gt; 0L) &#123; nanos = trip.awaitNanos(nanos); &#125; &#125; catch (InterruptedException ie) &#123; //Ëã•ÂΩìÂâçÁ∫øÁ®ãÂú®Á≠âÂæÖÊúüÈó¥Ë¢´‰∏≠Êñ≠ÂàôÊâìÁøªÊ†ÖÊ†èÂî§ÈÜíÂÖ∂‰ªñÁ∫øÁ®ã if (g == generation &amp;&amp; ! g.broken) &#123; breakBarrier(); throw ie; &#125; else &#123; //Ëã•Âú®ÊçïËé∑‰∏≠Êñ≠ÂºÇÂ∏∏ÂâçÂ∑≤ÁªèÂÆåÊàêÂú®Ê†ÖÊ†è‰∏äÁöÑÁ≠âÂæÖ, ÂàôÁõ¥Êé•Ë∞ÉÁî®‰∏≠Êñ≠Êìç‰Ωú Thread.currentThread().interrupt(); &#125; &#125; //Â¶ÇÊûúÁ∫øÁ®ãÂõ†‰∏∫ÊâìÁøªÊ†ÖÊ†èÊìç‰ΩúËÄåË¢´Âî§ÈÜíÂàôÊäõÂá∫ÂºÇÂ∏∏ if (g.broken) &#123; throw new BrokenBarrierException(); &#125; //Â¶ÇÊûúÁ∫øÁ®ãÂõ†‰∏∫Êç¢‰ª£Êìç‰ΩúËÄåË¢´Âî§ÈÜíÂàôËøîÂõûËÆ°Êï∞Âô®ÁöÑÂÄº if (g != generation) &#123; return index; &#125; //Â¶ÇÊûúÁ∫øÁ®ãÂõ†‰∏∫Êó∂Èó¥Âà∞‰∫ÜËÄåË¢´Âî§ÈÜíÂàôÊâìÁøªÊ†ÖÊ†èÂπ∂ÊäõÂá∫ÂºÇÂ∏∏ if (timed &amp;&amp; nanos &lt;= 0L) &#123; breakBarrier(); throw new TimeoutException(); &#125; &#125; &#125; finally &#123; lock.unlock(); &#125;&#125; Âú®dowaitÊñπÊ≥ï‰∏≠ÊØèÊ¨°ÈÉΩÂ∞ÜcountÂáè1ÔºåÂáèÂÆåÂêéÁ´ãÈ©¨ËøõË°åÂà§Êñ≠ÁúãÁúãÊòØÂê¶Á≠â‰∫é0ÔºåÂ¶ÇÊûúÁ≠â‰∫é0ÁöÑËØùÂ∞±‰ºöÂÖàÂéªÊâßË°å‰πãÂâçÊåáÂÆöÂ•ΩÁöÑ‰ªªÂä°ÔºåÊâßË°åÂÆå‰πãÂêéÂÜçË∞ÉÁî®nextGenerationÊñπÊ≥ïÂ∞ÜÊ†ÖÊ†èËΩ¨Âà∞‰∏ã‰∏Ä‰ª£ÔºåÂú®ËØ•ÊñπÊ≥ï‰∏≠‰ºöÂ∞ÜÊâÄÊúâÁ∫øÁ®ãÂî§ÈÜíÔºåÂ∞ÜËÆ°Êï∞Âô®ÁöÑÂÄºÈáçÊñ∞ËÆæ‰∏∫partiesÔºåÊúÄÂêé‰ºöÈáçÊñ∞ËÆæÁΩÆÊ†ÖÊ†è‰ª£Ê¨°ÔºåÂú®ÊâßË°åÂÆånextGenerationÊñπÊ≥ï‰πãÂêéÂ∞±ÊÑèÂë≥ÁùÄÊ∏∏ÊàèËøõÂÖ•‰∏ã‰∏ÄÂ±Ä„ÄÇÂ¶ÇÊûúËÆ°Êï∞Âô®Ê≠§Êó∂Ëøò‰∏çÁ≠â‰∫é0ÁöÑËØùÂ∞±ËøõÂÖ•forÂæ™ÁéØÔºåÊ†πÊçÆÂèÇÊï∞Êù•ÂÜ≥ÂÆöÊòØË∞ÉÁî®trip.awaitNanos(nanos)ËøòÊòØtrip.await()ÊñπÊ≥ïÔºåËøô‰∏§ÊñπÊ≥ïÂØπÂ∫îÁùÄÂÆöÊó∂ÂíåÈùûÂÆöÊó∂Á≠âÂæÖ„ÄÇÂ¶ÇÊûúÂú®Á≠âÂæÖËøáÁ®ã‰∏≠ÂΩìÂâçÁ∫øÁ®ãË¢´‰∏≠Êñ≠Â∞±‰ºöÊâßË°åbreakBarrierÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÂè´ÂÅöÊâìÁ†¥Ê†ÖÊ†èÔºåÊÑèÂë≥ÁùÄÊ∏∏ÊàèÂú®‰∏≠ÈÄîË¢´ÊéêÊñ≠ÔºåËÆæÁΩÆgenerationÁöÑbrokenÁä∂ÊÄÅ‰∏∫trueÂπ∂Âî§ÈÜíÊâÄÊúâÁ∫øÁ®ã„ÄÇÂêåÊó∂Ëøô‰πüËØ¥ÊòéÂú®Á≠âÂæÖËøáÁ®ã‰∏≠Êúâ‰∏Ä‰∏™Á∫øÁ®ãË¢´‰∏≠Êñ≠Êï¥ÁõòÊ∏∏ÊàèÂ∞±ÁªìÊùüÔºåÊâÄÊúâ‰πãÂâçË¢´ÈòªÂ°ûÁöÑÁ∫øÁ®ãÈÉΩ‰ºöË¢´Âî§ÈÜí„ÄÇÁ∫øÁ®ãÈÜíÊù•Âêé‰ºöÊâßË°å‰∏ãÈù¢‰∏â‰∏™Âà§Êñ≠ÔºåÁúãÁúãÊòØÂê¶Âõ†‰∏∫Ë∞ÉÁî®breakBarrierÊñπÊ≥ïËÄåË¢´Âî§ÈÜíÔºåÂ¶ÇÊûúÊòØÂàôÊäõÂá∫ÂºÇÂ∏∏ÔºõÁúãÁúãÊòØÂê¶ÊòØÊ≠£Â∏∏ÁöÑÊç¢‰ª£Êìç‰ΩúËÄåË¢´Âî§ÈÜíÔºåÂ¶ÇÊûúÊòØÂàôËøîÂõûËÆ°Êï∞Âô®ÁöÑÂÄºÔºõÁúãÁúãÊòØÂê¶Âõ†‰∏∫Ë∂ÖÊó∂ËÄåË¢´Âî§ÈÜíÔºåÂ¶ÇÊûúÊòØÁöÑËØùÂ∞±Ë∞ÉÁî®breakBarrierÊâìÁ†¥Ê†ÖÊ†èÂπ∂ÊäõÂá∫ÂºÇÂ∏∏„ÄÇËøôÈáåËøòÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúÂÖ∂‰∏≠Êúâ‰∏Ä‰∏™Á∫øÁ®ãÂõ†‰∏∫Á≠âÂæÖË∂ÖÊó∂ËÄåÈÄÄÂá∫ÔºåÈÇ£‰πàÊï¥ÁõòÊ∏∏Êàè‰πü‰ºöÁªìÊùüÔºåÂÖ∂‰ªñÁ∫øÁ®ãÈÉΩ‰ºöË¢´Âî§ÈÜí„ÄÇ‰∏ãÈù¢Ë¥¥Âá∫nextGenerationÊñπÊ≥ïÂíåbreakBarrierÊñπÊ≥ïÁöÑÂÖ∑‰Ωì‰ª£Á†Å„ÄÇ 12345678910111213141516171819//ÂàáÊç¢Ê†ÖÊ†èÂà∞‰∏ã‰∏Ä‰ª£private void nextGeneration() &#123; //Âî§ÈÜíÊù°‰ª∂ÈòüÂàóÊâÄÊúâÁ∫øÁ®ã trip.signalAll(); //ËÆæÁΩÆËÆ°Êï∞Âô®ÁöÑÂÄº‰∏∫ÈúÄË¶ÅÊã¶Êà™ÁöÑÁ∫øÁ®ãÊï∞ count = parties; //ÈáçÊñ∞ËÆæÁΩÆÊ†ÖÊ†è‰ª£Ê¨° generation = new Generation();&#125;//ÊâìÁøªÂΩìÂâçÊ†ÖÊ†èprivate void breakBarrier() &#123; //Â∞ÜÂΩìÂâçÊ†ÖÊ†èÁä∂ÊÄÅËÆæÁΩÆ‰∏∫ÊâìÁøª generation.broken = true; //ËÆæÁΩÆËÆ°Êï∞Âô®ÁöÑÂÄº‰∏∫ÈúÄË¶ÅÊã¶Êà™ÁöÑÁ∫øÁ®ãÊï∞ count = parties; //Âî§ÈÜíÊâÄÊúâÁ∫øÁ®ã trip.signalAll();&#125; Â∫îÁî®Á§∫‰æã ËµõÈ©¨:ÈÄöËøáÂú®ÊéßÂà∂Âè∞‰∏çÂÅúÁöÑÊâìÂç∞ÂêÑËµõÈ©¨ÁöÑÂΩìÂâçËΩ®ËøπÔºå‰ª•ËææÂà∞Âä®ÊÄÅÊòæÁ§∫ÁöÑÊïàÊûú„ÄÇÊï¥Âú∫ÊØîËµõÊúâÂ§ö‰∏™ËΩÆÊ¨°ÔºåÊØè‰∏ÄËΩÆÊ¨°ÂêÑ‰∏™ËµõÈ©¨ÈÉΩ‰ºöÈöèÊú∫Ëµ∞‰∏äÂá†Ê≠•ÁÑ∂ÂêéË∞ÉÁî®awaitÊñπÊ≥ïËøõË°åÁ≠âÂæÖÔºåÂΩìÊâÄÊúâËµõÈ©¨Ëµ∞ÂÆå‰∏ÄËΩÆÁöÑÊó∂ÂÄôÂ∞Ü‰ºöÊâßË°å‰ªªÂä°Â∞ÜÊâÄÊúâËµõÈ©¨ÁöÑÂΩìÂâçËΩ®ËøπÊâìÂç∞Âà∞ÊéßÂà∂Âè∞‰∏ä„ÄÇËøôÊ†∑ÊØè‰∏ÄËΩÆ‰∏ãÊù•ÂêÑËµõÈ©¨ÁöÑËΩ®ËøπÈÉΩÂú®‰∏çÂÅúÁöÑÂ¢ûÈïøÔºåÂΩìÂÖ∂‰∏≠Êüê‰∏™ËµõÈ©¨ÁöÑËΩ®ËøπÊúÄÂÖàÂ¢ûÈïøÂà∞ÊåáÂÆöÁöÑÂÄºÁöÑÊó∂ÂÄôÂ∞Ü‰ºöÁªìÊùüÊï¥Âú∫ÊØîËµõÔºåËØ•ËµõÈ©¨Êàê‰∏∫Êï¥Âú∫ÊØîËµõÁöÑËÉúÂà©ËÄÖÔºÅÁ®ãÂ∫èÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283class Horse implements Runnable &#123; private static int counter = 0; private final int id = counter++; private int strides = 0; private static Random rand = new Random(47); private static CyclicBarrier barrier; public Horse(CyclicBarrier b) &#123; barrier = b; &#125; @Override public void run() &#123; try &#123; while(!Thread.interrupted()) &#123; synchronized(this) &#123; //ËµõÈ©¨ÊØèÊ¨°ÈöèÊú∫Ë∑ëÂá†Ê≠• strides += rand.nextInt(3); &#125; barrier.await(); &#125; &#125; catch(Exception e) &#123; e.printStackTrace(); &#125; &#125; public String tracks() &#123; StringBuilder s = new StringBuilder(); for(int i = 0; i &lt; getStrides(); i++) &#123; s.append("*"); &#125; s.append(id); return s.toString(); &#125; public synchronized int getStrides() &#123; return strides; &#125; public String toString() &#123; return "Horse " + id + " "; &#125; &#125;public class HorseRace implements Runnable &#123; private static final int FINISH_LINE = 75; private static List&lt;Horse&gt; horses = new ArrayList&lt;Horse&gt;(); private static ExecutorService exec = Executors.newCachedThreadPool(); @Override public void run() &#123; StringBuilder s = new StringBuilder(); //ÊâìÂç∞ËµõÈÅìËæπÁïå for(int i = 0; i &lt; FINISH_LINE; i++) &#123; s.append("="); &#125; System.out.println(s); //ÊâìÂç∞ËµõÈ©¨ËΩ®Ëøπ for(Horse horse : horses) &#123; System.out.println(horse.tracks()); &#125; //Âà§Êñ≠ÊòØÂê¶ÁªìÊùü for(Horse horse : horses) &#123; if(horse.getStrides() &gt;= FINISH_LINE) &#123; System.out.println(horse + "won!"); exec.shutdownNow(); return; &#125; &#125; //‰ºëÊÅØÊåáÂÆöÊó∂Èó¥ÂÜçÂà∞‰∏ã‰∏ÄËΩÆ try &#123; TimeUnit.MILLISECONDS.sleep(200); &#125; catch(InterruptedException e) &#123; System.out.println("barrier-action sleep interrupted"); &#125; &#125; public static void main(String[] args) &#123; CyclicBarrier barrier = new CyclicBarrier(7, new HorseRace()); for(int i = 0; i &lt; 7; i++) &#123; Horse horse = new Horse(barrier); horses.add(horse); exec.execute(horse); &#125; &#125; &#125; Á®ãÂ∫èÁöÑËøêË°åÁªìÊûúÂ¶Ç‰∏ãÔºö]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2Fposts%2F4a17b156.html</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new "My New Post" More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-AQSÊ∫êÁ†ÅÂàÜÊûê‰πãÊù°‰ª∂ÈòüÂàó]]></title>
    <url>%2Fposts%2F68b8bf54.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ ÈÄöËøá‰πãÂâçÁöÑÂàÜÊûêÔºåÊ∑±ÂÖ•‰∫ÜËß£‰∫ÜAbstractQueuedSynchronizerÁöÑÂÜÖÈÉ®ÁªìÊûÑÂíå‰∏Ä‰∫õËÆæËÆ°ÁêÜÂøµÔºåÁü•ÈÅì‰∫ÜAbstractQueuedSynchronizerÂÜÖÈÉ®Áª¥Êä§‰∫Ü‰∏Ä‰∏™ÂêåÊ≠•Áä∂ÊÄÅÂíå‰∏§‰∏™ÊéíÈòüÂå∫ÔºåËøô‰∏§‰∏™ÊéíÈòüÂå∫ÂàÜÂà´ÊòØÂêåÊ≠•ÈòüÂàóÂíåÊù°‰ª∂ÈòüÂàó„ÄÇ ÊãøATMÊú∫ÂèñÊ¨æ‰∏æ‰æãÔºåATMÊú∫Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ÂêåÊ≠•ÈòüÂàóÊòØ‰∏ªË¶ÅÁöÑÊéíÈòüÂå∫ÔºåÂ¶ÇÊûúATMÊú∫Ê≤°ÂºÄÊîæÔºåÊâÄÊúâÊÉ≥Ë¶ÅËøõÂÖ•‰∫∫ÈÉΩÂæóÂú®ËøôÈáåÊéíÈòü„ÄÇËÄåÊù°‰ª∂ÈòüÂàó‰∏ªË¶ÅÊòØ‰∏∫Êù°‰ª∂Á≠âÂæÖËÆæÁΩÆÁöÑÔºåÊÉ≥Ë±°‰∏Ä‰∏ãÂ¶ÇÊûú‰∏Ä‰∏™‰∫∫ÈÄöËøáÊéíÈòüÁªà‰∫éÊàêÂäüËé∑ÂèñÈîÅËøõÂÖ•‰∫ÜATMÊú∫Ôºå‰ΩÜÂú®ÂèñÊ¨æ‰πãÂâçÂèëÁé∞Ëá™Â∑±Ê≤°Â∏¶Èì∂Ë°åÂç°ÔºåÁ¢∞Âà∞ËøôÁßçÊÉÖÂÜµËôΩÁÑ∂ÂæàÊó†Â•àÔºå‰ΩÜÊòØÂÆÉ‰πüÂøÖÈ°ªÊé•ÂèóËøô‰∏™‰∫ãÂÆûÔºåËøôÊó∂ÂÆÉÂè™Â•Ω‰πñ‰πñÁöÑÂá∫ÂéªÂÖàÂáÜÂ§áÂ•ΩÈì∂Ë°åÂç°(ËøõÂÖ•Êù°‰ª∂ÈòüÂàóÁ≠âÂæÖ)ÔºåÂΩìÁÑ∂Âú®Âá∫Âéª‰πãÂâçËøòÂæóÊääÈîÅÁªôÈáäÊîæ‰∫ÜÂ•ΩËÆ©ÂÖ∂‰ªñ‰∫∫ËÉΩÂ§üËøõÊù•ÔºåÂú®ÂáÜÂ§áÂ•Ω‰∫ÜÈì∂Ë°åÂç°(Êù°‰ª∂Êª°Ë∂≥)‰πãÂêéÂÆÉÂèàÂæóÈáçÊñ∞ÂõûÂà∞ÂêåÊ≠•ÈòüÂàó‰∏≠ÂéªÊéíÈòü„ÄÇÂΩìÁÑ∂ËøõÂÖ•ÊàøÈó¥ÁöÑ‰∫∫Âπ∂‰∏çÈÉΩÊòØÂõ†‰∏∫Ê≤°Â∏¶Èì∂Ë°åÂç°ÔºåÂèØËÉΩËøòÊúâÂÖ∂‰ªñ‰∏Ä‰∫õÂéüÂõ†ÂøÖÈ°ª‰∏≠Êñ≠Êìç‰ΩúÂÖàÂéªÊù°‰ª∂ÈòüÂàó‰∏≠ÂéªÊéíÈòüÔºåÊâÄ‰ª•Êù°‰ª∂ÈòüÂàóÂèØ‰ª•ÊúâÂ§ö‰∏™Ôºå‰æù‰∏çÂêåÁöÑÁ≠âÂæÖÊù°‰ª∂ËÄåËÆæÁΩÆ‰∏çÂêåÁöÑÊù°‰ª∂ÈòüÂàó„ÄÇ ÂêåÊ≠•ÈòüÂàóÂíåÊù°‰ª∂ÈòüÂàóÁöÑÂå∫Âà´Ôºö ÂêåÊ≠•ÈòüÂàóÁöÑÂ§¥ÁªìÁÇπ‰∏∫headÔºåËÄåÊù°‰ª∂ÈòüÂàóÁöÑÂ§¥ÁªìÁÇπ‰∏∫firstWaiter; ÂêåÊ≠•ÈòüÂàóÁöÑÂ∞æÁªìÁÇπ‰∏∫tailÔºåËÄåÊù°‰ª∂ÈòüÂàóÁöÑÂ∞æÁªìÁÇπ‰∏∫lastWaiter; ÂêåÊ≠•ÈòüÂàóÁöÑÂ§¥ÁªìÁÇπÊ≤°ÊúâÂíå‰ªª‰ΩïÁ∫øÁ®ãÁªëÂÆöÔºåËÄåÊù°‰ª∂ÈòüÂàóÁöÑfirstWaiterÁªëÂÆö‰∫ÜÁ∫øÁ®ã„ÄÇ ÂêåÊ≠•ÈòüÂàóÊòØ‰∏ÄÊù°ÂèåÂêëÈìæË°®ÔºåËÄåÊù°‰ª∂ÈòüÂàóÊòØ‰∏ÄÊù°ÂçïÂêëÈìæË°®„ÄÇ ConditionÊé•Âè£ÂÆö‰πâ‰∫ÜÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúÔºåAbstractQueuedSynchronizerÂÜÖÈÉ®ÁöÑConditionObjectÁ±ªÂÆûÁé∞‰∫ÜConditionÊé•Âè£Ôºå‰∏ãÈù¢ÁúãÁúãConditionÊé•Âè£ÈÉΩÂÆö‰πâ‰∫ÜÂì™‰∫õÊìç‰Ωú„ÄÇ 123456789101112131415161718192021222324public interface Condition &#123; //ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑÊù°‰ª∂Á≠âÂæÖ void await() throws InterruptedException; //‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑÊù°‰ª∂Á≠âÂæÖ void awaitUninterruptibly(); //ËÆæÁΩÆÁõ∏ÂØπÊó∂Èó¥ÁöÑÊù°‰ª∂Á≠âÂæÖ(‰∏çËøõË°åËá™Êóã) long awaitNanos(long nanosTimeout) throws InterruptedException; //ËÆæÁΩÆÁõ∏ÂØπÊó∂Èó¥ÁöÑÊù°‰ª∂Á≠âÂæÖ(ËøõË°åËá™Êóã) boolean await(long time, TimeUnit unit) throws InterruptedException; //ËÆæÁΩÆÁªùÂØπÊó∂Èó¥ÁöÑÊù°‰ª∂Á≠âÂæÖ boolean awaitUntil(Date deadline) throws InterruptedException; //Âî§ÈÜíÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÂ§¥ÁªìÁÇπ void signal(); //Âî§ÈÜíÊù°‰ª∂ÈòüÂàóÁöÑÊâÄÊúâÁªìÁÇπ void signalAll(); &#125; ConditionÊé•Âè£ËôΩÁÑ∂ÂÆö‰πâ‰∫ÜËøô‰πàÂ§öÊñπÊ≥ïÔºå‰ΩÜÊÄªÂÖ±Â∞±ÂàÜ‰∏∫‰∏§Á±ªÔºå‰ª•awaitÂºÄÂ§¥ÁöÑÊòØÁ∫øÁ®ãËøõÂÖ•Êù°‰ª∂ÈòüÂàóÁ≠âÂæÖÁöÑÊñπÊ≥ïÔºå‰ª•signalÂºÄÂ§¥ÁöÑÊòØÂ∞ÜÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÁ∫øÁ®ã‚ÄúÂî§ÈÜí‚ÄùÁöÑÊñπÊ≥ï„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåË∞ÉÁî®signalÊñπÊ≥ïÂèØËÉΩÂî§ÈÜíÁ∫øÁ®ã‰πüÂèØËÉΩ‰∏ç‰ºöÂî§ÈÜíÁ∫øÁ®ãÔºå‰ªÄ‰πàÊó∂ÂÄô‰ºöÂî§ÈÜíÁ∫øÁ®ãËøôÂæóÁúãÊÉÖÂÜµÔºå‰ΩÜÊòØË∞ÉÁî®signalÊñπÊ≥ï‰∏ÄÂÆö‰ºöÂ∞ÜÁ∫øÁ®ã‰ªéÊù°‰ª∂ÈòüÂàó‰∏≠ÁßªÂà∞ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ®„ÄÇ awaitÊñπÊ≥ïÂàÜ‰∏∫5ÁßçÔºåÂàÜÂà´ÊòØÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Á≠âÂæÖÔºå‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Á≠âÂæÖÔºåËÆæÁΩÆÁõ∏ÂØπÊó∂Èó¥‰∏çËá™ÊóãÁ≠âÂæÖÔºåËÆæÁΩÆÁõ∏ÂØπÊó∂Èó¥Ëá™ÊóãÁ≠âÂæÖÔºåËÆæÁΩÆÁªùÂØπÊó∂Èó¥Á≠âÂæÖÔºõ signalÊñπÊ≥ïÂè™Êúâ2ÁßçÔºåÂàÜÂà´ÊòØÂè™Âî§ÈÜíÊù°‰ª∂ÈòüÂàóÂ§¥ÁªìÁÇπÂíåÂî§ÈÜíÊù°‰ª∂ÈòüÂàóÊâÄÊúâÁªìÁÇπÁöÑÊìç‰Ωú„ÄÇÂêå‰∏ÄÁ±ªÁöÑÊñπÊ≥ïÂü∫Êú¨‰∏äÊòØÁõ∏ÈÄöÁöÑ„ÄÇ ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑÊù°‰ª∂Á≠âÂæÖ 123456789101112131415161718192021222324252627282930313233343536//ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑÊù°‰ª∂Á≠âÂæÖpublic final void await() throws InterruptedException &#123; //Â¶ÇÊûúÁ∫øÁ®ãË¢´‰∏≠Êñ≠ÂàôÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÁß§ÁªìÁÇπÊ∑ªÂä†Âà∞Êù°‰ª∂ÈòüÂàóÂ∞æÈÉ® Node node = addConditionWaiter(); //Âú®ËøõÂÖ•Êù°‰ª∂Á≠âÂæÖ‰πãÂâçÂÖàÂÆåÂÖ®ÈáäÊîæÈîÅ int savedState = fullyRelease(node); int interruptMode = 0; //Á∫øÁ®ã‰∏ÄÁõ¥Âú®whileÂæ™ÁéØÈáåËøõË°åÊù°‰ª∂Á≠âÂæÖÔºåÁõ¥Âà∞Á∫øÁ®ãË¢´Âî§ÈÜíÊàñËÄÖÁ∫øÁ®ãË¢´‰∏≠Êñ≠Âπ∂‰∏îËøõÂÖ•ÂêåÊ≠•ÈòüÂàó‰∏≠ while (!isOnSyncQueue(node)) &#123; //ËøõË°åÊù°‰ª∂Á≠âÂæÖÁöÑÁ∫øÁ®ãÈÉΩÂú®ËøôÈáåË¢´ÊåÇËµ∑, Á∫øÁ®ãË¢´Âî§ÈÜíÁöÑÊÉÖÂÜµÊúâ‰ª•‰∏ãÂá†ÁßçÔºö //1.ÂêåÊ≠•ÈòüÂàóÁöÑÂâçÈ©±ÁªìÁÇπÂ∑≤ÂèñÊ∂à //2.ËÆæÁΩÆÂêåÊ≠•ÈòüÂàóÁöÑÂâçÈ©±ÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫SIGNALÂ§±Ë¥• //3.ÂâçÈ©±ÁªìÁÇπÈáäÊîæÈîÅÂêéÂî§ÈÜíÂΩìÂâçÁªìÁÇπ LockSupport.park(this); //ÂΩìÂâçÁ∫øÁ®ãÈÜíÊù•ÂêéÁ´ãÈ©¨Ê£ÄÊü•ÊòØÂê¶Ë¢´‰∏≠Êñ≠, Â¶ÇÊûúÊòØÂàô‰ª£Ë°®ÁªìÁÇπÂèñÊ∂àÊù°‰ª∂Á≠âÂæÖ, Ê≠§Êó∂ÈúÄË¶ÅÂ∞ÜÁªìÁÇπÁßªÂá∫Êù°‰ª∂ÈòüÂàó if ((interruptMode = checkInterruptWhileWaiting(node)) != 0) &#123; break; &#125; &#125; //Á∫øÁ®ãÈÜíÊù•ÂêéÂ∞±‰ºö‰ª•Áã¨Âç†Ê®°ÂºèËé∑ÂèñÈîÅÔºåÂ¶ÇÊûúËé∑ÂèñÊó∂ÂèëÁîü‰∫Ü‰∏≠Êñ≠ÔºåÂ¶ÇÊûúÂú®Ë∞ÉÁî®await()ÊñπÊ≥ïÊó∂Ë¢´‰∏≠Êñ≠ÔºåÂàô‰æùÁÑ∂ÊòØTHROW_IE if (acquireQueued(node, savedState) &amp;&amp; interruptMode != THROW_IE) &#123; interruptMode = REINTERRUPT; &#125; //ËøôÊ≠•Êìç‰Ωú‰∏ªË¶Å‰∏∫Èò≤Ê≠¢Á∫øÁ®ãÂú®signal‰πãÂâç‰∏≠Êñ≠ËÄåÂØºËá¥Ê≤°‰∏éÊù°‰ª∂ÈòüÂàóÊñ≠ÁªùËÅîÁ≥ª if (node.nextWaiter != null) &#123; unlinkCancelledWaiters(); &#125; //Ê†πÊçÆ‰∏≠Êñ≠Ê®°ÂºèËøõË°åÂìçÂ∫îÁöÑ‰∏≠Êñ≠Â§ÑÁêÜ if (interruptMode != 0) &#123; reportInterruptAfterWait(interruptMode); &#125;&#125; ‰∏äËø∞‰ª£Á†ÅÊï¥‰∏™ÊµÅÁ®ãÊÄªÁªìÂ¶Ç‰∏ãÔºö Á¨¨‰∏ÄÊ≠•ÔºöÈ¶ñÂÖàÂà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶‰∏≠Êñ≠ÔºåÂ¶ÇÊûúË¢´‰∏≠Êñ≠ÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏ÔºåÂ¶ÇÊûúÊ≤°ÊúâË¢´‰∏≠Êñ≠ÔºåÂàôÁªßÁª≠‰∏ãÈù¢ÁöÑÊµÅÁ®ã„ÄÇ Á¨¨‰∫åÊ≠•ÔºöÈÄöËøáË∞ÉÁî®addConditionWaiter()Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂ∞ÅË£ÖÊàêNodeËäÇÁÇπÂ≠òÊîæÂà∞ConditionÈòüÂàóÁöÑÂ∞æÈÉ®„ÄÇ Á¨¨‰∏âÊ≠•ÔºöÂõ†‰∏∫ÂΩìÂâçÁ∫øÁ®ãÂ∑≤ÁªèËé∑Âèñ‰∫ÜÈîÅÔºåÊâÄ‰ª•Ë∞ÉÁî®awaitÈúÄË¶ÅÈáäÊîæËµÑÊ∫êÔºåÊâÄ‰ª•ÈÄöËøáË∞ÉÁî®fullyRelease()ÈáäÊîæËµÑÊ∫êÔºå‰πüÂ∞±ÊòØÈáäÊîæÈîÅÔºåÂõ†‰∏∫Ëøô‰∏™ÈîÅÊòØÁã¨Âç†ÈîÅÂπ∂‰∏îÂèØ‰ª•ÈáçÂÖ•ÔºåÊâÄ‰ª•Ë¶ÅÂÖ®ÈÉ®ÊääËµÑÊ∫êÈáäÊîæÔºå‰ªéfullyÂ≠óÈù¢‰∏ä‰πüÂèØ‰ª•ÁêÜËß£„ÄÇ Á¨¨ÂõõÊ≠•ÔºöÈÄöËøáwhileÂæ™ÁéØÂà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Âú®ÂêåÊ≠•ÈòüÂàó‰∏äÔºåÂ¶ÇÊûúÊ≤°ÊúâÂú®ÂêåÊ≠•ÈòüÂàó‰∏äÔºåÂàôÈúÄË¶ÅÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºåÁÑ∂ÂêéË∞ÉÁî®checkInterruptWaiting()ÊñπÊ≥ïÂà§Êñ≠ÊòØÂê¶Ë¢´‰∏≠Êñ≠ËøáÔºåÂ¶ÇÊûúË¢´‰∏≠Êñ≠ËøáÔºåÂàôË∑≥Âá∫whileÂæ™ÁéØ„ÄÇ Á¨¨‰∫îÊ≠•ÔºöÈÄöËøáË∞ÉÁî®acquireQueued()ÊñπÊ≥ïËé∑ÂèñËµÑÊ∫êÔºåÂ¶ÇÊûúÂú®Ë∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ïÊó∂Ë¢´‰∏≠Êñ≠ÔºåÂàô‰∏≠Êñ≠Á±ªÂûãÂèòÊàêREINTERRUPT(Á®çÂêéÂ§ÑÁêÜ‰∏≠Êñ≠)ÔºåËøô‰∏™ÊñπÊ≥ïËøîÂõûÂÄºÂè™ÊòØËÆ∞ÂΩïÊòØÂê¶Ë¢´‰∏≠Êñ≠ËøáÔºåÂπ∂‰∏ç‰ºöÂìçÂ∫î‰∏≠Êñ≠„ÄÇ Á¨¨ÂÖ≠Ê≠•ÔºöÂ¶ÇÊûúÊòØÂõ†‰∏∫‰∏≠Êñ≠ÔºåÊ≠§Êó∂waitStatus=0,‰ΩÜÊòØÊ≠§Êó∂ÂÆÉ‰ªçÂú®Êù°‰ª∂ÈòüÂàó‰∏≠ÔºåÊâÄ‰ª•ÈúÄË¶Å‰ªéÊù°‰ª∂ÈòüÂàó‰∏≠Ê∏ÖÈô§„ÄÇ Á¨¨‰∏ÉÊ≠•ÔºöÂ¶ÇÊûúË¢´‰∏≠Êñ≠ÔºåÂàôË∞ÉÁî®reportInterruptAfterWait()ÊñπÊ≥ïÂ§ÑÁêÜ‰∏çÂêåÁöÑ‰∏≠Êñ≠Á±ªÂûã„ÄÇ Á¨¨‰∏ÄÊ≠•ÔºöÂ∞ÜÁ∫øÁ®ãÊ∑ªÂä†Âà∞Êù°‰ª∂ÈòüÂàó 1234567891011121314151617private Node addConditionWaiter() &#123; //Ëé∑ÂèñÊù°‰ª∂ÈòüÂàóÂ∞æÁªìÁÇπ Node t = lastWaiter; // Â¶ÇÊûúÂ∞æÁªìÁÇπË¢´ÂèñÊ∂àÔºåÂàô‰ªéÊù°‰ª∂ÈòüÂàó‰∏≠Ê∏ÖÈô§ if (t != null &amp;&amp; t.waitStatus != Node.CONDITION) &#123; unlinkCancelledWaiters(); t = lastWaiter; &#125; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÊàêNodeÁªìÁÇπÔºåÂπ∂‰∏îwaitStatusÁä∂ÊÄÅÊòØCONDITION„ÄÇ Node node = new Node(Thread.currentThread(), Node.CONDITION); if (t == null) firstWaiter = node; else t.nextWaiter = node; lastWaiter = node; return node;&#125; Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂ∞ÅË£ÖÊàêNodeËäÇÁÇπÔºåÁÑ∂ÂêéÂä†ÂÖ•Âà∞ConditionÁöÑÂ∞æÈÉ®ÔºåÂú®Âä†ÂÖ•‰πãÂâçÈúÄË¶ÅÊ£ÄÊü•‰ª•‰∏ãÂ∞æÈÉ®ËäÇÁÇπtÊòØÂê¶ËøòÂú®Á≠âÂæÖConditionÊù°‰ª∂ÔºåÂ¶ÇÊûúË¢´signalÊàñËÄÖË¢´‰∏≠Êñ≠ÔºåÂàôË∞ÉÁî®Ê∏ÖÈô§ÊñπÊ≥ïÂ∞ÜÂ∞æËäÇÁÇπ‰ªéConditionÈòüÂàó‰∏≠Ê∏ÖÈô§Êéâ„ÄÇ Á¨¨‰∫åÊ≠•ÔºöÂÆåÂÖ®Â∞ÜÈîÅÈáäÊîæ 1234567891011121314151617181920212223//ÂÆåÂÖ®ÈáäÊîæÈîÅfinal int fullyRelease(Node node) &#123; //Âà§Êñ≠ËµÑÊ∫êÊòØÂê¶ÈáäÊîæÊàêÂäü boolean failed = true; try &#123; //Ëé∑ÂèñÂΩìÂâçÁöÑÂêåÊ≠•Áä∂ÊÄÅ int savedState = getState(); //‰ΩøÁî®ÂΩìÂâçÁöÑÂêåÊ≠•Áä∂ÊÄÅÂéªÈáäÊîæÈîÅ if (release(savedState)) &#123; failed = false; //Â¶ÇÊûúÈáäÊîæÈîÅÊàêÂäüÂ∞±ËøîÂõûÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅ return savedState; &#125; else &#123; //Â¶ÇÊûúÈáäÊîæÈîÅÂ§±Ë¥•Â∞±ÊäõÂá∫ËøêË°åÊó∂ÂºÇÂ∏∏ throw new IllegalMonitorStateException(); &#125; &#125; finally &#123; //‰øùËØÅÊ≤°ÊúâÊàêÂäüÈáäÊîæÈîÅÂ∞±Â∞ÜËØ•ÁªìÁÇπËÆæÁΩÆ‰∏∫ÂèñÊ∂àÁä∂ÊÄÅ if (failed) &#123; node.waitStatus = Node.CANCELLED; &#125; &#125;&#125; Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÊàêÁªìÁÇπÊ∑ªÂä†Âà∞Êù°‰ª∂ÈòüÂàóÂ∞æÈÉ®ÂêéÔºåÁ¥ßÊé•ÁùÄÂ∞±Ë∞ÉÁî®fullyReleaseÊñπÊ≥ïÈáäÊîæÈîÅ„ÄÇÊ≥®ÊÑèÔºåÊñπÊ≥ïÂêç‰∏∫fullyRelease‰πüÂ∞±ËøôÊ≠•Êìç‰Ωú‰ºöÂÆåÂÖ®ÁöÑÈáäÊîæÈîÅÔºåÂõ†‰∏∫ÈîÅÊòØÂèØÈáçÂÖ•ÁöÑÔºåÊâÄ‰ª•Âú®ËøõË°åÊù°‰ª∂Á≠âÂæÖÂâçÈúÄË¶ÅÂ∞ÜÈîÅÂÖ®ÈÉ®ÈáäÊîæ‰∫ÜÔºå‰∏çÁÑ∂ÁöÑËØùÂà´‰∫∫Â∞±Ëé∑Âèñ‰∏ç‰∫ÜÈîÅ‰∫Ü„ÄÇÂ¶ÇÊûúÈáäÊîæÈîÅÂ§±Ë¥•ÁöÑËØùÂ∞±‰ºöÊäõÂá∫‰∏Ä‰∏™ËøêË°åÊó∂ÂºÇÂ∏∏ÔºåÂ¶ÇÊûúÊàêÂäüÈáäÊîæ‰∫ÜÈîÅÁöÑËØùÂ∞±ËøîÂõû‰πãÂâçÁöÑÂêåÊ≠•Áä∂ÊÄÅ„ÄÇ Á¨¨‰∏âÊ≠•ÔºöËøõË°åÊù°‰ª∂Á≠âÂæÖ 1234567891011121314151617181920212223242526272829303132333435363738//Á∫øÁ®ã‰∏ÄÁõ¥Âú®whileÂæ™ÁéØÈáåËøõË°åÊù°‰ª∂Á≠âÂæÖwhile (!isOnSyncQueue(node)) &#123; //ËøõË°åÊù°‰ª∂Á≠âÂæÖÁöÑÁ∫øÁ®ãÈÉΩÂú®ËøôÈáåË¢´ÊåÇËµ∑, Á∫øÁ®ãË¢´Âî§ÈÜíÁöÑÊÉÖÂÜµÊúâ‰ª•‰∏ãÂá†ÁßçÔºö //1.ÂêåÊ≠•ÈòüÂàóÁöÑÂâçÈ©±ÁªìÁÇπÂ∑≤ÂèñÊ∂à //2.ËÆæÁΩÆÂêåÊ≠•ÈòüÂàóÁöÑÂâçÈ©±ÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫SIGNALÂ§±Ë¥• //3.ÂâçÈ©±ÁªìÁÇπÈáäÊîæÈîÅÂêéÂî§ÈÜíÂΩìÂâçÁªìÁÇπ LockSupport.park(this); //ÂΩìÂâçÁ∫øÁ®ãÈÜíÊù•ÂêéÁ´ãÈ©¨Ê£ÄÊü•ÊòØÂê¶Ë¢´‰∏≠Êñ≠, Â¶ÇÊûúÊòØÂàô‰ª£Ë°®ÁªìÁÇπÂèñÊ∂àÊù°‰ª∂Á≠âÂæÖ, Ê≠§Êó∂ÈúÄË¶ÅÂ∞ÜÁªìÁÇπÁßªÂá∫Êù°‰ª∂ÈòüÂàó if ((interruptMode = checkInterruptWhileWaiting(node)) != 0) &#123; break; &#125;&#125;//Ê£ÄÊü•Êù°‰ª∂Á≠âÂæÖÊó∂ÁöÑÁ∫øÁ®ã‰∏≠Êñ≠ÊÉÖÂÜµprivate static final int REINTERRUPT = 1;private static final int THROW_IE = -1;private int checkInterruptWhileWaiting(Node node) &#123; //‰∏≠Êñ≠ËØ∑Ê±ÇÂú®signalÊìç‰Ωú‰πãÂâçÔºöTHROW_IE //‰∏≠Êñ≠ËØ∑Ê±ÇÂú®signalÊìç‰Ωú‰πãÂêéÔºöREINTERRUPT //ÊúüÈó¥Ê≤°ÊúâÊî∂Âà∞‰ªª‰Ωï‰∏≠Êñ≠ËØ∑Ê±ÇÔºö0 return Thread.interrupted() ? (transferAfterCancelledWait(node) ? THROW_IE : REINTERRUPT) : 0;&#125;//Â∞ÜÂèñÊ∂àÊù°‰ª∂Á≠âÂæÖÁöÑÁªìÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàó‰∏≠final boolean transferAfterCancelledWait(Node node) &#123; //Â¶ÇÊûúËøôÊ≠•CASÊìç‰ΩúÊàêÂäüÁöÑËØùÂ∞±Ë°®Êòé‰∏≠Êñ≠ÂèëÁîüÂú®signalÊñπÊ≥ï‰πãÂâç if (compareAndSetWaitStatus(node, Node.CONDITION, 0)) &#123; //Áä∂ÊÄÅ‰øÆÊîπÊàêÂäüÂêéÂ∞±Â∞ÜËØ•ÁªìÁÇπÊîæÂÖ•ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ® enq(node); return true; &#125; //Âà∞ËøôÈáåË°®ÊòéCASÊìç‰ΩúÂ§±Ë¥•, ËØ¥Êòé‰∏≠Êñ≠ÂèëÁîüÂú®signalÊñπÊ≥ï‰πãÂêé while (!isOnSyncQueue(node)) &#123; //Â¶ÇÊûúsinalÊñπÊ≥ïËøòÊ≤°ÊúâÂ∞ÜÁªìÁÇπËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàó, Â∞±ÈÄöËøáËá™ÊóãÁ≠âÂæÖ‰∏Ä‰∏ã Thread.yield(); &#125; return false;&#125; Âú®‰ª•‰∏ä‰∏§‰∏™Êìç‰ΩúÂÆåÊàê‰∫Ü‰πãÂêéÂ∞±‰ºöËøõÂÖ•whileÂæ™ÁéØÔºåÂèØ‰ª•ÁúãÂà∞whileÂæ™ÁéØÈáåÈù¢È¶ñÂÖàË∞ÉÁî®LockSupport.park(this)Â∞ÜÁ∫øÁ®ãÊåÇËµ∑‰∫ÜÔºåÊâÄ‰ª•Á∫øÁ®ãÂ∞±‰ºö‰∏ÄÁõ¥Âú®ËøôÈáåÈòªÂ°û„ÄÇÂú®Ë∞ÉÁî®signalÊñπÊ≥ïÂêé‰ªÖ‰ªÖÂè™ÊòØÂ∞ÜÁªìÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàó‰∏≠ÂéªÔºåËá≥‰∫é‰ºö‰∏ç‰ºöÂî§ÈÜíÁ∫øÁ®ãÈúÄË¶ÅÁúãÊÉÖÂÜµ„ÄÇÂ¶ÇÊûúËΩ¨ÁßªÁªìÁÇπÊó∂ÂèëÁé∞ÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑÂâçÈ©±ÁªìÁÇπÂ∑≤ÂèñÊ∂àÔºåÊàñËÄÖÊòØÊõ¥Êñ∞ÂâçÈ©±ÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫SIGNALÂ§±Ë¥•ÔºåËøô‰∏§ÁßçÊÉÖÂÜµÈÉΩ‰ºöÁ´ãÂç≥Âî§ÈÜíÁ∫øÁ®ãÔºåÂê¶ÂàôÁöÑËØùÂú®signalÊñπÊ≥ïÁªìÊùüÊó∂Â∞±‰∏ç‰ºöÂéªÂî§ÈÜíÂ∑≤Âú®ÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑÁ∫øÁ®ãÔºåËÄåÊòØÁ≠âÂà∞ÂÆÉÁöÑÂâçÈ©±ÁªìÁÇπÊù•Âî§ÈÜí„ÄÇÂΩìÁÑ∂ÔºåÁ∫øÁ®ãÈòªÂ°ûÂú®ËøôÈáåÈô§‰∫ÜÂèØ‰ª•Ë∞ÉÁî®signalÊñπÊ≥ïÂî§ÈÜí‰πãÂ§ñÔºåÁ∫øÁ®ãËøòÂèØ‰ª•ÂìçÂ∫î‰∏≠Êñ≠ÔºåÂ¶ÇÊûúÁ∫øÁ®ãÂú®ËøôÈáåÊî∂Âà∞‰∏≠Êñ≠ËØ∑Ê±ÇÂ∞±‰ºöÁªßÁª≠ÂæÄ‰∏ãÊâßË°å„ÄÇÂèØ‰ª•ÁúãÂà∞Á∫øÁ®ãÈÜíÊù•Âêé‰ºöÈ©¨‰∏äÊ£ÄÊü•ÊòØÂê¶ÊòØÁî±‰∫é‰∏≠Êñ≠Âî§ÈÜíÁöÑËøòÊòØÈÄöËøásignalÊñπÊ≥ïÂî§ÈÜíÁöÑÔºåÂ¶ÇÊûúÊòØÂõ†‰∏∫‰∏≠Êñ≠Âî§ÈÜíÁöÑÂêåÊ†∑‰ºöÂ∞ÜËøô‰∏™ÁªìÁÇπËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàó‰∏≠ÂéªÔºåÂè™‰∏çËøáÊòØÈÄöËøáË∞ÉÁî®transferAfterCancelledWaitÊñπÊ≥ïÊù•ÂÆûÁé∞ÁöÑ„ÄÇÊúÄÂêéÊâßË°åÂÆåËøô‰∏ÄÊ≠•‰πãÂêéÂ∞±‰ºöËøîÂõû‰∏≠Êñ≠ÊÉÖÂÜµÂπ∂Ë∑≥Âá∫whileÂæ™ÁéØ„ÄÇ Á¨¨ÂõõÊ≠•ÔºöÁªìÁÇπÁßªÂá∫Êù°‰ª∂ÈòüÂàó 1234567891011121314151617181920212223//Á∫øÁ®ãÈÜíÊù•ÂêéÂ∞±‰ºö‰ª•Áã¨Âç†Ê®°ÂºèËé∑ÂèñÈîÅif (acquireQueued(node, savedState) &amp;&amp; interruptMode != THROW_IE) &#123; interruptMode = REINTERRUPT;&#125;//ËøôÊ≠•Êìç‰Ωú‰∏ªË¶Å‰∏∫Èò≤Ê≠¢Á∫øÁ®ãÂú®signal‰πãÂâç‰∏≠Êñ≠ËÄåÂØºËá¥Ê≤°‰∏éÊù°‰ª∂ÈòüÂàóÊñ≠ÁªùËÅîÁ≥ªif (node.nextWaiter != null) &#123; unlinkCancelledWaiters();&#125;//Ê†πÊçÆ‰∏≠Êñ≠Ê®°ÂºèËøõË°åÂìçÂ∫îÁöÑ‰∏≠Êñ≠Â§ÑÁêÜif (interruptMode != 0) &#123; reportInterruptAfterWait(interruptMode);&#125;//ÁªìÊùüÊù°‰ª∂Á≠âÂæÖÂêéÊ†πÊçÆ‰∏≠Êñ≠ÊÉÖÂÜµÂÅöÂá∫Áõ∏Â∫îÂ§ÑÁêÜprivate void reportInterruptAfterWait(int interruptMode) throws InterruptedException &#123; //Â¶ÇÊûú‰∏≠Êñ≠Ê®°ÂºèÊòØTHROW_IEÂ∞±ÊäõÂá∫ÂºÇÂ∏∏ if (interruptMode == THROW_IE) &#123; throw new InterruptedException(); //Â¶ÇÊûú‰∏≠Êñ≠Ê®°ÂºèÊòØREINTERRUPTÂ∞±Ëá™Â∑±ÊåÇËµ∑ &#125; else if (interruptMode == REINTERRUPT) &#123; selfInterrupt(); &#125;&#125; ÂΩìÁ∫øÁ®ãÁªàÊ≠¢‰∫ÜwhileÂæ™ÁéØ‰πüÂ∞±ÊòØÊù°‰ª∂Á≠âÂæÖÂêéÔºåÂ∞±‰ºöÂõûÂà∞ÂêåÊ≠•ÈòüÂàó‰∏≠„ÄÇ‰∏çÁÆ°ÊòØÂõ†‰∏∫Ë∞ÉÁî®signalÊñπÊ≥ïÂõûÂéªÁöÑËøòÊòØÂõ†‰∏∫Á∫øÁ®ã‰∏≠Êñ≠ÂØºËá¥ÁöÑÔºåÁªìÁÇπÊúÄÁªàÈÉΩ‰ºöÂú®ÂêåÊ≠•ÈòüÂàó‰∏≠„ÄÇËøôÊó∂Â∞±‰ºöË∞ÉÁî®acquireQueuedÊñπÊ≥ïÊâßË°åÂú®ÂêåÊ≠•ÈòüÂàó‰∏≠Ëé∑ÂèñÈîÅÁöÑÊìç‰Ωú„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÁªìÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóÂá∫Êù•ÂêéÂèàÊòØ‰πñ‰πñÁöÑËµ∞Áã¨Âç†Ê®°Âºè‰∏ãËé∑ÂèñÈîÅÁöÑÈÇ£‰∏ÄÂ•óÔºåÁ≠âËøô‰∏™ÁªìÁÇπÂÜçÊ¨°Ëé∑ÂæóÈîÅ‰πãÂêéÔºåÂ∞±‰ºöË∞ÉÁî®reportInterruptAfterWaitÊñπÊ≥ïÊù•Ê†πÊçÆËøôÊúüÈó¥ÁöÑ‰∏≠Êñ≠ÊÉÖÂÜµÂÅöÂá∫Áõ∏Â∫îÁöÑÂìçÂ∫î„ÄÇÂ¶ÇÊûú‰∏≠Êñ≠ÂèëÁîüÂú®signalÊñπÊ≥ï‰πãÂâçÔºåinterruptModeÂ∞±‰∏∫THROW_IEÔºåÂÜçÊ¨°Ëé∑ÂæóÈîÅÂêéÂ∞±ÊäõÂá∫ÂºÇÂ∏∏ÔºõÂ¶ÇÊûú‰∏≠Êñ≠ÂèëÁîüÂú®signalÊñπÊ≥ï‰πãÂêéÔºåinterruptModeÂ∞±‰∏∫REINTERRUPTÔºåÂÜçÊ¨°Ëé∑ÂæóÈîÅÂêéÂ∞±ÈáçÊñ∞‰∏≠Êñ≠„ÄÇ ‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑÊù°‰ª∂Á≠âÂæÖ 1234567891011121314151617181920212223//‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑÊù°‰ª∂Á≠âÂæÖpublic final void awaitUninterruptibly() &#123; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÊ∑ªÂä†Âà∞Êù°‰ª∂ÈòüÂàóÂ∞æÈÉ® Node node = addConditionWaiter(); //ÂÆåÂÖ®ÈáäÊîæÈîÅÂπ∂ËøîÂõûÂΩìÂâçÂêåÊ≠•Áä∂ÊÄÅ int savedState = fullyRelease(node); boolean interrupted = false; //ÁªìÁÇπ‰∏ÄÁõ¥Âú®whileÂæ™ÁéØÈáåËøõË°åÊù°‰ª∂Á≠âÂæÖ while (!isOnSyncQueue(node)) &#123; //Êù°‰ª∂ÈòüÂàó‰∏≠ÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩÂú®ËøôÈáåË¢´ÊåÇËµ∑ LockSupport.park(this); //Á∫øÁ®ãÈÜíÊù•ÂèëÁé∞‰∏≠Êñ≠Âπ∂‰∏ç‰ºöÈ©¨‰∏äÂéªÂìçÂ∫î if (Thread.interrupted()) &#123; interrupted = true; &#125; &#125; if (acquireQueued(node, savedState) || interrupted) &#123; //Âú®ËøôÈáåÂìçÂ∫îÊâÄÊúâ‰∏≠Êñ≠ËØ∑Ê±Ç, Êª°Ë∂≥‰ª•‰∏ã‰∏§‰∏™Êù°‰ª∂‰πã‰∏ÄÂ∞±‰ºöÂ∞ÜËá™Â∑±ÊåÇËµ∑ //1.Á∫øÁ®ãÂú®Êù°‰ª∂Á≠âÂæÖÊó∂Êî∂Âà∞‰∏≠Êñ≠ËØ∑Ê±Ç //2.Á∫øÁ®ãÂú®acquireQueuedÊñπÊ≥ïÈáåÊî∂Âà∞‰∏≠Êñ≠ËØ∑Ê±Ç selfInterrupt(); &#125;&#125; ËÆæÁΩÆÁõ∏ÂØπÊó∂Èó¥ÁöÑÊù°‰ª∂Á≠âÂæÖ(‰∏çËøõË°åËá™Êóã) 123456789101112131415161718192021222324252627282930313233343536373839404142434445//ËÆæÁΩÆÂÆöÊó∂Êù°‰ª∂Á≠âÂæÖ(Áõ∏ÂØπÊó∂Èó¥), ‰∏çËøõË°åËá™ÊóãÁ≠âÂæÖpublic final long awaitNanos(long nanosTimeout) throws InterruptedException &#123; //Â¶ÇÊûúÁ∫øÁ®ãË¢´‰∏≠Êñ≠ÂàôÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÊ∑ªÂä†Âà∞Êù°‰ª∂ÈòüÂàóÂ∞æÈÉ® Node node = addConditionWaiter(); //Âú®ËøõÂÖ•Êù°‰ª∂Á≠âÂæÖ‰πãÂâçÂÖàÂÆåÂÖ®ÈáäÊîæÈîÅ int savedState = fullyRelease(node); long lastTime = System.nanoTime(); int interruptMode = 0; while (!isOnSyncQueue(node)) &#123; //Âà§Êñ≠Ë∂ÖÊó∂Êó∂Èó¥ÊòØÂê¶Áî®ÂÆå‰∫Ü if (nanosTimeout &lt;= 0L) &#123; //Â¶ÇÊûúÂ∑≤Ë∂ÖÊó∂Â∞±ÈúÄË¶ÅÊâßË°åÂèñÊ∂àÊù°‰ª∂Á≠âÂæÖÊìç‰Ωú transferAfterCancelledWait(node); break; &#125; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÊåÇËµ∑‰∏ÄÊÆµÊó∂Èó¥, Á∫øÁ®ãÂú®ËøôÊúüÈó¥ÂèØËÉΩË¢´Âî§ÈÜí, ‰πüÂèØËÉΩËá™Â∑±ÈÜíÊù• LockSupport.parkNanos(this, nanosTimeout); //Á∫øÁ®ãÈÜíÊù•ÂêéÂÖàÊ£ÄÊü•‰∏≠Êñ≠‰ø°ÊÅØ if ((interruptMode = checkInterruptWhileWaiting(node)) != 0) &#123; break; &#125; long now = System.nanoTime(); //Ë∂ÖÊó∂Êó∂Èó¥ÊØèÊ¨°ÂáèÂéªÊù°‰ª∂Á≠âÂæÖÁöÑÊó∂Èó¥ nanosTimeout -= now - lastTime; lastTime = now; &#125; //Á∫øÁ®ãÈÜíÊù•ÂêéÂ∞±‰ºö‰ª•Áã¨Âç†Ê®°ÂºèËé∑ÂèñÈîÅ if (acquireQueued(node, savedState) &amp;&amp; interruptMode != THROW_IE) &#123; interruptMode = REINTERRUPT; &#125; //Áî±‰∫étransferAfterCancelledWaitÊñπÊ≥ïÊ≤°ÊúâÊäänextWaiterÁΩÆÁ©∫, ÊâÄÊúâËøôÈáåË¶ÅÂÜçÊ∏ÖÁêÜ‰∏ÄÈÅç if (node.nextWaiter != null) &#123; unlinkCancelledWaiters(); &#125; //Ê†πÊçÆ‰∏≠Êñ≠Ê®°ÂºèËøõË°åÂìçÂ∫îÁöÑ‰∏≠Êñ≠Â§ÑÁêÜ if (interruptMode != 0) &#123; reportInterruptAfterWait(interruptMode); &#125; //ËøîÂõûÂâ©‰ΩôÊó∂Èó¥ return nanosTimeout - (System.nanoTime() - lastTime);&#125; ËÆæÁΩÆÁõ∏ÂØπÊó∂Èó¥ÁöÑÊù°‰ª∂Á≠âÂæÖ(ËøõË°åËá™Êóã) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849//ËÆæÁΩÆÂÆöÊó∂Êù°‰ª∂Á≠âÂæÖ(Áõ∏ÂØπÊó∂Èó¥), ËøõË°åËá™ÊóãÁ≠âÂæÖpublic final boolean await(long time, TimeUnit unit) throws InterruptedException &#123; if (unit == null) &#123; throw new NullPointerException(); &#125; //Ëé∑ÂèñË∂ÖÊó∂Êó∂Èó¥ÁöÑÊØ´ÁßíÊï∞ long nanosTimeout = unit.toNanos(time); //Â¶ÇÊûúÁ∫øÁ®ãË¢´‰∏≠Êñ≠ÂàôÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÊ∑ªÂä†Êù°‰ª∂ÈòüÂàóÂ∞æÈÉ® Node node = addConditionWaiter(); //Âú®ËøõÂÖ•Êù°‰ª∂Á≠âÂæÖ‰πãÂâçÂÖàÂÆåÂÖ®ÈáäÊîæÈîÅ int savedState = fullyRelease(node); //Ëé∑ÂèñÂΩìÂâçÊó∂Èó¥ÁöÑÊØ´ÁßíÊï∞ long lastTime = System.nanoTime(); boolean timedout = false; int interruptMode = 0; while (!isOnSyncQueue(node)) &#123; //Â¶ÇÊûúË∂ÖÊó∂Â∞±ÈúÄË¶ÅÊâßË°åÂèñÊ∂àÊù°‰ª∂Á≠âÂæÖÊìç‰Ωú if (nanosTimeout &lt;= 0L) &#123; timedout = transferAfterCancelledWait(node); break; &#125; //Â¶ÇÊûúË∂ÖÊó∂Êó∂Èó¥Â§ß‰∫éËá™ÊóãÊó∂Èó¥, Â∞±Â∞ÜÁ∫øÁ®ãÊåÇËµ∑‰∏ÄÊÆµÊó∂Èó¥ if (nanosTimeout &gt;= spinForTimeoutThreshold) &#123; LockSupport.parkNanos(this, nanosTimeout); &#125; //Á∫øÁ®ãÈÜíÊù•ÂêéÂÖàÊ£ÄÊü•‰∏≠Êñ≠‰ø°ÊÅØ if ((interruptMode = checkInterruptWhileWaiting(node)) != 0) &#123; break; &#125; long now = System.nanoTime(); //Ë∂ÖÊó∂Êó∂Èó¥ÊØèÊ¨°ÂáèÂéªÊù°‰ª∂Á≠âÂæÖÁöÑÊó∂Èó¥ nanosTimeout -= now - lastTime; lastTime = now; &#125; //Á∫øÁ®ãÈÜíÊù•ÂêéÂ∞±‰ºö‰ª•Áã¨Âç†Ê®°ÂºèËé∑ÂèñÈîÅ if (acquireQueued(node, savedState) &amp;&amp; interruptMode != THROW_IE) &#123; interruptMode = REINTERRUPT; &#125; //Áî±‰∫étransferAfterCancelledWaitÊñπÊ≥ïÊ≤°ÊúâÊäänextWaiterÁΩÆÁ©∫, ÊâÄÊúâËøôÈáåË¶ÅÂÜçÊ∏ÖÁêÜ‰∏ÄÈÅç if (node.nextWaiter != null) &#123; unlinkCancelledWaiters(); &#125; //Ê†πÊçÆ‰∏≠Êñ≠Ê®°ÂºèËøõË°åÂìçÂ∫îÁöÑ‰∏≠Êñ≠Â§ÑÁêÜ if (interruptMode != 0) &#123; reportInterruptAfterWait(interruptMode); &#125; //ËøîÂõûÊòØÂê¶Ë∂ÖÊó∂Ê†áÂøó return !timedout;&#125; ËÆæÁΩÆÁªùÂØπÊó∂Èó¥ÁöÑÊù°‰ª∂Á≠âÂæÖ 1234567891011121314151617181920212223242526272829303132333435363738394041//ËÆæÁΩÆÂÆöÊó∂Êù°‰ª∂Á≠âÂæÖ(ÁªùÂØπÊó∂Èó¥)public final boolean awaitUntil(Date deadline) throws InterruptedException &#123; if (deadline == null) &#123; throw new NullPointerException(); &#125; //Ëé∑ÂèñÁªùÂØπÊó∂Èó¥ÁöÑÊØ´ÁßíÊï∞ long abstime = deadline.getTime(); //Â¶ÇÊûúÁ∫øÁ®ãË¢´‰∏≠Êñ≠ÂàôÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÊ∑ªÂä†Âà∞Êù°‰ª∂ÈòüÂàóÂ∞æÈÉ® Node node = addConditionWaiter(); //Âú®ËøõÂÖ•Êù°‰ª∂Á≠âÂæÖ‰πãÂâçÂÖàÂÆåÂÖ®ÈáäÊîæÈîÅ int savedState = fullyRelease(node); boolean timedout = false; int interruptMode = 0; while (!isOnSyncQueue(node)) &#123; //Â¶ÇÊûúË∂ÖÊó∂Â∞±ÈúÄË¶ÅÊâßË°åÂèñÊ∂àÊù°‰ª∂Á≠âÂæÖÊìç‰Ωú if (System.currentTimeMillis() &gt; abstime) &#123; timedout = transferAfterCancelledWait(node); break; &#125; //Â∞ÜÁ∫øÁ®ãÊåÇËµ∑‰∏ÄÊÆµÊó∂Èó¥, ÊúüÈó¥Á∫øÁ®ãÂèØËÉΩË¢´Âî§ÈÜí, ‰πüÂèØËÉΩÂà∞‰∫ÜÁÇπËá™Â∑±ÈÜíÊù• LockSupport.parkUntil(this, abstime); //Á∫øÁ®ãÈÜíÊù•ÂêéÂÖàÊ£ÄÊü•‰∏≠Êñ≠‰ø°ÊÅØ if ((interruptMode = checkInterruptWhileWaiting(node)) != 0) &#123; break; &#125; &#125; //Á∫øÁ®ãÈÜíÊù•ÂêéÂ∞±‰ºö‰ª•Áã¨Âç†Ê®°ÂºèËé∑ÂèñÈîÅ if (acquireQueued(node, savedState) &amp;&amp; interruptMode != THROW_IE) &#123; interruptMode = REINTERRUPT; &#125; //Áî±‰∫étransferAfterCancelledWaitÊñπÊ≥ïÊ≤°ÊúâÊäänextWaiterÁΩÆÁ©∫, ÊâÄÊúâËøôÈáåË¶ÅÂÜçÊ∏ÖÁêÜ‰∏ÄÈÅç if (node.nextWaiter != null) &#123; unlinkCancelledWaiters(); &#125; //Ê†πÊçÆ‰∏≠Êñ≠Ê®°ÂºèËøõË°åÂìçÂ∫îÁöÑ‰∏≠Êñ≠Â§ÑÁêÜ if (interruptMode != 0) &#123; reportInterruptAfterWait(interruptMode); &#125; //ËøîÂõûÊòØÂê¶Ë∂ÖÊó∂Ê†áÂøó return !timedout;&#125; Âî§ÈÜíÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÂ§¥ÁªìÁÇπ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//Âî§ÈÜíÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™ÁªìÁÇπpublic final void signal() &#123; //Âà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Áã¨Âç†Ê®°ÂºèÊåÅÊúâÈîÅÔºåÂ¶ÇÊûú‰∏çÊòØÂàôÊäõÂá∫ÂºÇÂ∏∏ if (!isHeldExclusively()) &#123; throw new IllegalMonitorStateException(); &#125; //Ëé∑ÂèñÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÁªìÁÇπ Node first = firstWaiter; //Â¶ÇÊûúÊù°‰ª∂ÈòüÂàó‰∏≠ÊúâÊéíÈòüËÄÖ if (first != null) &#123; //Âî§ÈÜíÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÂ§¥ÁªìÁÇπ doSignal(first); &#125;&#125;//Âî§ÈÜíÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÂ§¥ÁªìÁÇπprivate void doSignal(Node first) &#123; do &#123; //1.Â∞ÜfirstWaiterÂºïÁî®ÂêëÂêéÁßªÂä®‰∏Ä‰Ωç if ( (firstWaiter = first.nextWaiter) == null) &#123; lastWaiter = null; &#125; //2.Â∞ÜÂ§¥ÁªìÁÇπÁöÑÂêéÁªßÁªìÁÇπÂºïÁî®ÁΩÆÁ©∫ first.nextWaiter = null; //3.Â∞ÜÂ§¥ÁªìÁÇπËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàó, ËΩ¨ÁßªÂÆåÊàêÂêéÊúâÂèØËÉΩÂî§ÈÜíÁ∫øÁ®ã //4.Â¶ÇÊûútransferForSignalÊìç‰ΩúÂ§±Ë¥•Â∞±ÂéªÂî§ÈÜí‰∏ã‰∏Ä‰∏™ÁªìÁÇπ &#125; while (!transferForSignal(first) &amp;&amp; (first = firstWaiter) != null);&#125;//Â∞ÜÊåáÂÆöÁªìÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàó‰∏≠final boolean transferForSignal(Node node) &#123; //Â∞ÜÁ≠âÂæÖÁä∂ÊÄÅ‰ªéCONDITIONËÆæÁΩÆ‰∏∫0 if (!compareAndSetWaitStatus(node, Node.CONDITION, 0)) &#123; //Â¶ÇÊûúÊõ¥Êñ∞Áä∂ÊÄÅÁöÑÊìç‰ΩúÂ§±Ë¥•Â∞±Áõ¥Êé•ËøîÂõûfalse //ÂèØËÉΩÊòØtransferAfterCancelledWaitÊñπÊ≥ïÂÖàÂ∞ÜÁä∂ÊÄÅÊîπÂèò‰∫Ü, ÂØºËá¥ËøôÊ≠•CASÊìç‰ΩúÂ§±Ë¥• return false; &#125; //Â∞ÜËØ•ÁªìÁÇπÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ®ÔºåËøîÂõûÂâçÈ©±ÁªìÁÇπ Node p = enq(node); int ws = p.waitStatus; if (ws &gt; 0 || !compareAndSetWaitStatus(p, ws, Node.SIGNAL)) &#123; //Âá∫Áé∞‰ª•‰∏ãÊÉÖÂÜµÂ∞±‰ºöÂî§ÈÜíÂΩìÂâçÁ∫øÁ®ã //1.ÂâçÈ©±ÁªìÁÇπÊòØÂèñÊ∂àÁä∂ÊÄÅ //2.Êõ¥Êñ∞ÂâçÈ©±ÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫SIGNALÊìç‰ΩúÂ§±Ë¥• LockSupport.unpark(node.thread); &#125; return true;&#125; ÂèØ‰ª•ÁúãÂà∞signalÊñπÊ≥ïÊúÄÁªàÁöÑÊ†∏ÂøÉÂ∞±ÊòØÂéªË∞ÉÁî®transferForSignalÊñπÊ≥ïÔºåÂú®transferForSignalÊñπÊ≥ï‰∏≠È¶ñÂÖà‰ºöÁî®CASÊìç‰ΩúÂ∞ÜÁªìÁÇπÁöÑÁä∂ÊÄÅ‰ªéCONDITIONËÆæÁΩÆ‰∏∫0ÔºåÁÑ∂ÂêéÂÜçË∞ÉÁî®enqÊñπÊ≥ïÂ∞ÜËØ•ÁªìÁÇπÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ®„ÄÇÊàë‰ª¨ÂÜçÁúãÂà∞Êé•‰∏ãÊù•ÁöÑifÂà§Êñ≠ËØ≠Âè•ÔºåËøô‰∏™Âà§Êñ≠ËØ≠Âè•‰∏ªË¶ÅÊòØÁî®Êù•Âà§Êñ≠‰ªÄ‰πàÊó∂ÂÄô‰ºöÂéªÂî§ÈÜíÁ∫øÁ®ãÔºåÂá∫Áé∞Ëøô‰∏§ÁßçÊÉÖÂÜµÂ∞±‰ºöÁ´ãÂç≥Âî§ÈÜíÁ∫øÁ®ãÔºå‰∏ÄÁßçÊòØÂΩìÂèëÁé∞ÂâçÈ©±ÁªìÁÇπÁöÑÁä∂ÊÄÅÊòØÂèñÊ∂àÁä∂ÊÄÅÊó∂ÔºåËøòÊúâ‰∏ÄÁßçÊòØÊõ¥Êñ∞ÂâçÈ©±ÁªìÁÇπÁöÑÁä∂ÊÄÅÂ§±Ë¥•Êó∂„ÄÇËøô‰∏§ÁßçÊÉÖÂÜµÈÉΩ‰ºöÈ©¨‰∏äÂéªÂî§ÈÜíÁ∫øÁ®ãÔºåÂê¶ÂàôÁöÑËØùÂ∞±‰ªÖ‰ªÖÂè™ÊòØÂ∞ÜÁªìÁÇπ‰ªéÊù°‰ª∂ÈòüÂàó‰∏≠ËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàó‰∏≠Â∞±ÂÆå‰∫ÜÔºåËÄå‰∏ç‰ºöÁ´ãÈ©¨ÂéªÂî§ÈÜíÁªìÁÇπ‰∏≠ÁöÑÁ∫øÁ®ã„ÄÇsignalAllÊñπÊ≥ï‰πüÂ§ßËá¥Á±ª‰ººÔºåÂè™‰∏çËøáÂÆÉÊòØÂéªÂæ™ÁéØÈÅçÂéÜÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÊâÄÊúâÁªìÁÇπÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨ËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàóÔºåËΩ¨ÁßªÁªìÁÇπÁöÑÊñπÊ≥ï‰πüËøòÊòØË∞ÉÁî®transferForSignalÊñπÊ≥ï„ÄÇ Âî§ÈÜíÊù°‰ª∂ÈòüÂàóÁöÑÊâÄÊúâÁªìÁÇπ 1234567891011121314151617181920212223242526272829//Âî§ÈÜíÊù°‰ª∂ÈòüÂàóÂêéÈù¢ÁöÑÂÖ®ÈÉ®ÁªìÁÇπpublic final void signalAll() &#123; //Âà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶ÊåÅÊúâÈîÅ if (!isHeldExclusively()) &#123; throw new IllegalMonitorStateException(); &#125; //Ëé∑ÂèñÊù°‰ª∂ÈòüÂàóÂ§¥ÁªìÁÇπ Node first = firstWaiter; if (first != null) &#123; //Âî§ÈÜíÊù°‰ª∂ÈòüÂàóÁöÑÊâÄÊúâÁªìÁÇπ doSignalAll(first); &#125;&#125;//Âî§ÈÜíÊù°‰ª∂ÈòüÂàóÁöÑÊâÄÊúâÁªìÁÇπprivate void doSignalAll(Node first) &#123; //ÂÖàÊääÂ§¥ÁªìÁÇπÂíåÂ∞æÁªìÁÇπÁöÑÂºïÁî®ÁΩÆÁ©∫ lastWaiter = firstWaiter = null; do &#123; //ÂÖàËé∑ÂèñÂêéÁªßÁªìÁÇπÁöÑÂºïÁî® Node next = first.nextWaiter; //ÊääÂç≥Â∞ÜËΩ¨ÁßªÁöÑÁªìÁÇπÁöÑÂêéÁªßÂºïÁî®ÁΩÆÁ©∫ first.nextWaiter = null; //Â∞ÜÁªìÁÇπ‰ªéÊù°‰ª∂ÈòüÂàóËΩ¨ÁßªÂà∞ÂêåÊ≠•ÈòüÂàó transferForSignal(first); //Â∞ÜÂºïÁî®ÊåáÂêë‰∏ã‰∏Ä‰∏™ÁªìÁÇπ first = next; &#125; while (first != null);&#125;]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-AQSÊ∫êÁ†ÅÂàÜÊûê‰πãÁã¨Âç†Ê®°Âºè]]></title>
    <url>%2Fposts%2Ff8b27f2e.html</url>
    <content type="text"><![CDATA[AQS‰∏∫Âú®Áã¨Âç†Ê®°Âºè‰∏ãËé∑ÂèñÈîÅÂàÜÂà´Êèê‰æõ‰∏âÁßçËé∑ÂèñÊñπÂºèÔºö ‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑Âèñ; ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑Âèñ; ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥Ëé∑Âèñ„ÄÇ Ëøô‰∏âÁßçÊñπÂºèÊï¥‰ΩìÊ≠•È™§Â§ßËá¥ÊòØÁõ∏ÂêåÁöÑÔºåÂè™ÊúâÂ∞ëÈÉ®ÂàÜ‰∏çÂêåÁöÑÂú∞ÊñπÔºö Á¨¨‰∏ÄÁßçÂú®Ëé∑ÂèñÊó∂‰ºöÂøΩÁï•‰∏≠Êñ≠; ËÄåÁ¨¨‰∫åÁßçÂàôÊòØËé∑ÂèñÊó∂ÂìçÂ∫î‰∏≠Êñ≠; Á¨¨‰∏âÁßçÊòØËé∑ÂèñÊó∂ÔºåÂ¶ÇÊûúË∂ÖÊó∂ÂàôÁ´ãÂç≥ËøîÂõû„ÄÇ ‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑ÂèñÈîÅ 123456//‰∏çÂìçÂ∫î‰∏≠Êñ≠ÊñπÂºèËé∑Âèñ(Áã¨Âç†Ê®°Âºè)public final void acquire(int arg) &#123; if (!tryAcquire(arg) &amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg)) &#123; selfInterrupt(); &#125;&#125; acquireÊñπÊ≥ïÊòØËé∑ÂèñÈîÅÁöÑÂü∫Á°ÄÔºåËøô‰∏™ÊñπÊ≥ï‰ºöÂøΩÁï•‰∏≠Êñ≠ÔºåÊÑèÊÄùÊòØËØ¥Â¶ÇÊûúËäÇÁÇπÂØπÂ∫îÁöÑÁ∫øÁ®ã‰∏≠Êñ≠ÔºåÂàôacquire()ÊñπÊ≥ï‰ºöÂøΩÁï•ÔºåÂè™Êúâ‰ªéÂêåÊ≠•ÈòüÂàó‰∏≠ËøîÂõûtrueÊâçÊúÄÁªàË∞ÉÁî®selfInterruptÊñπÊ≥ïÂìçÂ∫î‰∏≠Êñ≠„ÄÇ‰ª£Á†ÅÂæàÁÆÄÂçïÔºå‰ΩÜÊòØÂÆÉÊåâÁÖßÈ°∫Â∫èÊâßË°å‰∫Ü‰∏ãÂõæÊâÄÁ§∫ÁöÑ4‰∏™Ê≠•È™§„ÄÇ Á¨¨‰∏ÄÊ≠•Ôºö!tryAcquire(arg) Â∞ùËØïËé∑ÂèñËµÑÊ∫êstate 1234//Â∞ùËØïËé∑ÂèñÈîÅÔºàÁã¨Âç†Ê®°ÂºèÔºâprotected boolean tryAcquire(int arg) &#123; throw new UnsupportedOperationException();&#125; ËøôÊó∂ÂÄôÊù•‰∫Ü‰∏Ä‰∏™‰∫∫Ôºå‰ªñÈ¶ñÂÖàÂ∞ùËØïÁùÄÂéªÊï≤‰∫ÜÊï≤Èó®ÔºåÂ¶ÇÊûúÂèëÁé∞Èó®Ê≤°ÈîÅ(tryAcquire(arg)=true)ÔºåÈÇ£Â∞±Áõ¥Êé•ËøõÂéª‰∫Ü„ÄÇÂ¶ÇÊûúÂèëÁé∞Èó®ÈîÅ‰∫Ü(tryAcquire(arg)=false)ÔºåÂ∞±ÊâßË°å‰∏ã‰∏ÄÊ≠•„ÄÇËøô‰∏™tryAcquireÊñπÊ≥ïÂÜ≥ÂÆö‰∫Ü‰ªÄ‰πàÊó∂ÂÄôÈîÅÊòØÂºÄÁùÄÁöÑÔºå‰ªÄ‰πàÊó∂ÂÄôÈîÅÊòØÂÖ≥Èó≠ÁöÑ„ÄÇËøô‰∏™ÊñπÊ≥ïÂøÖÈ°ªË¶ÅËÆ©Â≠êÁ±ªÂéªË¶ÜÁõñÔºåÈáçÂÜôÈáåÈù¢ÁöÑÂà§Êñ≠ÈÄªËæë„ÄÇ Á¨¨‰∫åÊ≠•ÔºöaddWaiter(Node.EXCLUSIVE) Ëé∑ÂèñËµÑÊ∫êÂ§±Ë¥•ÔºåÂàôÂ∞ÅË£ÖÊàêNodeÁªìÁÇπÂä†ÂÖ•Âà∞ÂêåÊ≠•ÈòüÂàó‰∏≠„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445//Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÊàêÁªìÁÇπÂπ∂Ê∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ®private Node addWaiter(Node mode) &#123; //ÊåáÂÆöÊåÅÊúâÈîÅÁöÑÊ®°Âºè Node node = new Node(Thread.currentThread(), mode); //Ëé∑ÂèñÂêåÊ≠•ÈòüÂàóÂ∞æÁªìÁÇπÂºïÁî® Node pred = tail; //Â¶ÇÊûúÂ∞æÁªìÁÇπ‰∏ç‰∏∫Á©∫, Ë°®ÊòéÂêåÊ≠•ÈòüÂàóÂ∑≤Â≠òÂú®ÁªìÁÇπ if (pred != null) &#123; //1.ÊåáÂêëÂΩìÂâçÂ∞æÁªìÁÇπ node.prev = pred; //2.ËÆæÁΩÆÂΩìÂâçÁªìÁÇπ‰∏∫Â∞æÁªìÁÇπÔºàÁî±‰∫éÊòØÂ§öÁ∫øÁ®ãÔºåÂèØËÉΩÂπ∂Âèë‰øÆÊîπÂ∞æÁªìÁÇπÔºåÊâÄ‰ª•ÈÄöËøáCAS‰øÆÊîπÔºâ if (compareAndSetTail(pred, node)) &#123; //3.Â∞ÜÊóßÁöÑÂ∞æÁªìÁÇπÁöÑÂêéÁªßÊåáÂêëÊñ∞ÁöÑÂ∞æÁªìÁÇπ pred.next = node; return node; &#125; &#125; //Âê¶ÂàôË°®ÊòéÂêåÊ≠•ÈòüÂàóÊòØÁ©∫ÁöÑÔºåËøòÊ≤°ÊúâËøõË°åÂàùÂßãÂåñ enq(node); return node;&#125;//ÁªìÁÇπÂÖ•ÈòüÊìç‰Ωúprivate Node enq(final Node node) &#123; for (;;) &#123; //Ëé∑ÂèñÂêåÊ≠•ÈòüÂàóÂ∞æÁªìÁÇπÂºïÁî® Node t = tail; //Â¶ÇÊûúÂ∞æÁªìÁÇπ‰∏∫Á©∫ËØ¥ÊòéÂêåÊ≠•ÈòüÂàóËøòÊ≤°ÊúâÂàùÂßãÂåñ if (t == null) &#123; //ÂàùÂßãÂåñÂêåÊ≠•ÈòüÂàóÔºàË∞ÉÁî®Êó†ÂèÇÊûÑÈÄ†Âô®ÂàõÂª∫‰∏Ä‰∏™ÁªìÁÇπÔºåÁÑ∂ÂêéÈÄöËøáCASËÆæÁΩÆheadÁªìÁÇπÔºåÂ¶ÇÊûúÊàêÂäüÂàôÂ∞ÜÂ§¥ÁªìÁÇπheadËµãÂÄºÁªôtailÁªìÁÇπÔºâ if (compareAndSetHead(new Node())) &#123; tail = head; &#125; &#125; else &#123; //1.ÊåáÂêëÂΩìÂâçÂ∞æÁªìÁÇπ node.prev = t; //2.ËÆæÁΩÆÂΩìÂâçÁªìÁÇπ‰∏∫Â∞æÁªìÁÇπ if (compareAndSetTail(t, node)) &#123; //3.Â∞ÜÊóßÁöÑÂ∞æÁªìÁÇπÁöÑÂêéÁªßÊåáÂêëÊñ∞ÁöÑÂ∞æÁªìÁÇπ t.next = node; return t; &#125; &#125; &#125;&#125; ÊâßË°åÂà∞Ëøô‰∏ÄÊ≠•Ë°®ÊòéÁ¨¨‰∏ÄÊ¨°Ëé∑ÂèñÈîÅÂ§±Ë¥•ÔºåÈÇ£‰πàËøô‰∏™‰∫∫Â∞±ÁªôËá™Â∑±È¢Ü‰∫ÜÂùóÂè∑Á†ÅÁâåËøõÂÖ•ÊéíÈòüÂå∫ÂéªÊéíÈòü‰∫ÜÔºåÂú®È¢ÜÂè∑Á†ÅÁâåÁöÑÊó∂ÂÄô‰ºöÂ£∞ÊòéËá™Â∑±ÊÉ≥Ë¶Å‰ª•‰ªÄ‰πàÊ†∑ÁöÑÊñπÂºèÊù•Âç†Áî®ÊàøÈó¥(Áã¨Âç†Ê®°ÂºèorÂÖ±‰∫´Ê®°Âºè)„ÄÇÊ≥®ÊÑèÔºåËøôÊó∂ÂÄô‰ªñÂπ∂Ê≤°ÊúâÂùê‰∏ãÊù•‰ºëÊÅØ(Â∞ÜËá™Â∑±ÊåÇËµ∑)„ÄÇ Á¨¨‰∏âÊ≠•ÔºöacquireQueued(addWaiter(Node.EXCLUSIVE), arg) Âú®ÂêåÊ≠•ÈòüÂàó‰∏≠Ëé∑ÂèñËµÑÊ∫ê„ÄÇÂÖ∂ÂÆûËøô‰∏™ÊñπÊ≥ïÈùûÂ∏∏ÁöÑÂ•ΩÁêÜËß£ÔºåÂâçÈù¢Â∑≤ÁªèÂ∞ùËØïËé∑ÂèñËµÑÊ∫êÔºå‰ΩÜÊòØÂ§±Ë¥•‰∫ÜÔºåÂπ∂‰∏îÂä†Âà∞‰∫ÜÂêåÊ≠•ÈòüÂàó‰∏≠ÔºåÂú®Á≠âÂæÖ‰∏≠ÂèØ‰ª•Âà§Êñ≠Ëá™Â∑±ÊòØÂê¶ÂèØ‰ª•‰ºëÊÅØ‰ª•‰∏ãÔºåÂ¶ÇÊûúÂèØ‰ª•‰ºëÊÅØÔºåÈÇ£Â∞±Á≠âÂæÖÁùÄÂÖ∂‰ªñÁ∫øÁ®ãÂî§ÈÜíËá™Â∑±ÔºåÂú®ÁªßÁª≠Ëé∑ÂèñËµÑÊ∫êÔºåÁõ¥Âà∞ÊàêÂäüÊâçËøîÂõû„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667//‰ª•‰∏çÂèØ‰∏≠Êñ≠ÊñπÂºèËé∑ÂèñÈîÅ(Áã¨Âç†Ê®°Âºè)final boolean acquireQueued(final Node node, int arg) &#123; boolean failed = true; try &#123; //Âà§Êñ≠ÊòØÂê¶‰∏≠Êñ≠ÁöÑÊ†áËÆ∞ boolean interrupted = false; //Ëá™Êóã for (;;) &#123; //Ëé∑ÂèñÁªôÂÆöÁªìÁÇπÁöÑÂâçÈ©±ÁªìÁÇπÁöÑÂºïÁî® final Node p = node.predecessor(); //Â¶ÇÊûúÂΩìÂâçÁªìÁÇπÁöÑÂâçÈ©±ÁªìÁÇπÊòØÂ§¥ÁªìÁÇπheadÔºåÂ∞±Â∞ùËØïÂéªËé∑ÂèñÈîÅ if (p == head &amp;&amp; tryAcquire(arg)) &#123; //ËØ¥ÊòéËé∑ÂèñÊàêÂäüÔºåÂ∞ÜÁªôÂÆöÁªìÁÇπËÆæÁΩÆ‰∏∫headÁªìÁÇπ setHead(node); //‰∏∫‰∫ÜÂ∏ÆÂä©ÂûÉÂúæÊî∂ÈõÜ, Â∞Ü‰∏ä‰∏Ä‰∏™headÁªìÁÇπÁöÑÂêéÁªßÊ∏ÖÁ©∫ p.next = null; //ËÆæÁΩÆËé∑ÂèñÊàêÂäüÁä∂ÊÄÅ failed = false; //ËøîÂõû‰∏≠Êñ≠ÁöÑÁä∂ÊÄÅ, Êï¥‰∏™Âæ™ÁéØÊâßË°åÂà∞ËøôÈáåÊâçÊòØÂá∫Âè£ return interrupted; &#125; //Âê¶ÂàôËØ¥ÊòéÈîÅÁöÑÁä∂ÊÄÅËøòÊòØ‰∏çÂèØËé∑Âèñ, ËøôÊó∂Âà§Êñ≠ÊòØÂê¶ÂèØ‰ª•ÊåÇËµ∑ÂΩìÂâçÁ∫øÁ®ã //Á¨¨‰∏Ä‰∏™Êù°‰ª∂ÔºöÂ¶ÇÊûúËé∑ÂèñÈîÅÂ§±Ë¥•ÔºåÂà§Êñ≠ÊòØÂê¶Â∫îËØ•‰ºëÊÅØ //Á¨¨‰∫å‰∏™Êù°‰ª∂ÔºöÁ¨¨‰∏Ä‰∏™Êù°‰ª∂‰∏∫trueÔºåËØ¥ÊòéËá™Â∑±ÂèØ‰ª•‰ºëÊÅØ‰∫ÜÂàôË∞ÉÁî®parkÊñπÊ≥ï‰ºëÊÅØ //Â¶ÇÊûúÂà§Êñ≠ÁªìÊûú‰∏∫ÁúüÂàôÊåÇËµ∑ÂΩìÂâçÁ∫øÁ®ã, Âê¶ÂàôÁªßÁª≠Âæ™ÁéØ, Âú®ËøôÊúüÈó¥Á∫øÁ®ã‰∏çÂìçÂ∫î‰∏≠Êñ≠ if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) &#123; interrupted = true; &#125; &#125; &#125; finally &#123; //Âú®ÊúÄÂêéÁ°Æ‰øùÂ¶ÇÊûúËé∑ÂèñÂ§±Ë¥•Â∞±ÂèñÊ∂àËé∑Âèñ if (failed) &#123; cancelAcquire(node); &#125; &#125;&#125;//Âà§Êñ≠ÊòØÂê¶ÂèØ‰ª•Â∞ÜÂΩìÂâçÁªìÁÇπÊåÇËµ∑private static boolean shouldParkAfterFailedAcquire(Node pred, Node node) &#123; //Ëé∑ÂèñÂâçÈ©±ÁªìÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅ int ws = pred.waitStatus; //Â¶ÇÊûúÂâçÈ©±ÁªìÁÇπÁä∂ÊÄÅ‰∏∫SIGNAL, Ë°®ÊòéÂâçÈ©±ÁªìÁÇπ‰ºöÂî§ÈÜíÂΩìÂâçÁªìÁÇπ, ÊâÄ‰ª•ÂΩìÂâçÁªìÁÇπÂèØ‰ª•ÂÆâÂøÉÁöÑÊåÇËµ∑‰∫Ü if (ws == Node.SIGNAL) &#123; return true; &#125; //ËäÇÁÇπÁä∂ÊÄÅÂè™ÊúâCANCEL(-1)Êó∂ÊâçÂ§ß‰∫é0ÔºåËØ¥ÊòéËøô‰∏™ËäÇÁÇπÂèñÊ∂à‰∫Ü„ÄÇÈÇ£Â∞±ÈúÄË¶ÅÊääÂèñÊ∂àÁöÑËäÇÁÇπ‰ªéÂêåÊ≠•ÈòüÂàó‰∏≠ÁßªÈô§Êéâ if (ws &gt; 0) &#123; //‰∏ãÈù¢ÁöÑÊìç‰ΩúÊòØÊ∏ÖÁêÜÂêåÊ≠•ÈòüÂàó‰∏≠ÊâÄÊúâÂ∑≤ÂèñÊ∂àÁöÑÂâçÈ©±ÁªìÁÇπ do &#123; node.prev = pred = pred.prev; &#125; while (pred.waitStatus &gt; 0); pred.next = node; &#125; else &#123; //Âà∞ËøôÈáåË°®Á§∫ÂâçÈ©±ÁªìÁÇπÁä∂ÊÄÅ‰∏çÊòØSIGNAL‰πü‰∏çÊòØCANCEL, ÂæàÂèØËÉΩËøòÊòØÁ≠â‰∫é0, ËøôÊ†∑ÁöÑËØùÂâçÈ©±ÁªìÁÇπÂ∞±‰∏ç‰ºöÂéªÂî§ÈÜíÂΩìÂâçÁªìÁÇπ‰∫Ü //ÊâÄ‰ª•ÂΩìÂâçÁªìÁÇπÂøÖÈ°ªË¶ÅÁ°Æ‰øùÂâçÈ©±ÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫SIGNALÊâçËÉΩÂÆâÂøÉÁöÑÊåÇËµ∑Ëá™Â∑± compareAndSetWaitStatus(pred, ws, Node.SIGNAL); &#125; return false;&#125;//ÊåÇËµ∑ÂΩìÂâçÁ∫øÁ®ãprivate final boolean parkAndCheckInterrupt() &#123; //ÊåÇËµ∑ÂΩìÂâçÁ∫øÁ®ã LockSupport.park(this); //ËøîÂõûÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Ë¢´‰∏≠Êñ≠Ëøá return Thread.interrupted();&#125; È¢ÜÂÆåÂè∑Á†ÅÁâåËøõÂÖ•ÊéíÈòüÂå∫ÂêéÂ∞±‰ºöÁ´ãÈ©¨ÊâßË°åËøô‰∏™ÊñπÊ≥ïÔºåÂΩì‰∏Ä‰∏™ÁªìÁÇπÈ¶ñÊ¨°ËøõÂÖ•ÊéíÈòüÂå∫ÂêéÊúâ‰∏§ÁßçÊÉÖÂÜµÔºå‰∏ÄÁßçÊòØÂèëÁé∞‰ªñÂâçÈù¢ÁöÑÈÇ£‰∏™‰∫∫Â∑≤ÁªèÁ¶ªÂºÄÂ∫ß‰ΩçËøõÂÖ•ÊàøÈó¥‰∫ÜÔºåÈÇ£‰ªñÂ∞±‰∏çÂùê‰∏ãÊù•‰ºëÊÅØ‰∫ÜÔºå‰ºöÂÜçÊ¨°ÂéªÊï≤‰∏ÄÊï≤Èó®ÁúãÁúãÈÇ£Â∞èÂ≠êÊúâÊ≤°ÊúâÂÆå‰∫ã„ÄÇÂ¶ÇÊûúÈáåÈù¢ÁöÑ‰∫∫ÂàöÂ•ΩÂÆå‰∫ãÂá∫Êù•‰∫ÜÔºåÈÉΩ‰∏çÁî®‰ªñÂè´Ëá™Â∑±Â∞±Áõ¥Êé•ÂÜ≤ËøõÂéª‰∫Ü„ÄÇÂê¶ÂàôÔºåÂ∞±Ë¶ÅËÄÉËôëÂùê‰∏ãÊù•‰ºëÊÅØ‰∏Ä‰ºöÂÑø‰∫ÜÔºå‰ΩÜÊòØ‰ªñËøòÊòØ‰∏çÊîæÂøÉÔºåÂ¶ÇÊûú‰ªñÂùê‰∏ãÊù•Áù°ÁùÄÂêéÊ≤°‰∫∫ÊèêÈÜí‰ªñÊÄé‰πàÂäûÔºü‰ªñÂ∞±Âú®ÂâçÈù¢ÈÇ£‰∫∫ÁöÑÂ∫ß‰Ωç‰∏äÁïô‰∏Ä‰∏™Â∞èÁ∫∏Êù°ÔºåÂ•ΩËÆ©‰ªéÈáåÈù¢Âá∫Êù•ÁöÑ‰∫∫ÁúãÂà∞Á∫∏Êù°ÂêéËÉΩÂ§üÂî§ÈÜí‰ªñ„ÄÇËøòÊúâ‰∏ÄÁßçÊÉÖÂÜµÊòØÔºåÂΩì‰ªñËøõÂÖ•ÊéíÈòüÂå∫ÂêéÂèëÁé∞ÂâçÈù¢ËøòÊúâÂ•ΩÂá†‰∏™‰∫∫Âú®Â∫ß‰Ωç‰∏äÊéíÈòüÂë¢ÔºåÈÇ£‰ªñÂ∞±ÂèØ‰ª•ÂÆâÂøÉÁöÑÂùê‰∏ãÊù•Âí™‰∏Ä‰ºöÂÑø‰∫ÜÔºå‰ΩÜÂú®Ê≠§‰πãÂâç‰ªñËøòÊòØ‰ºöÂú®ÂâçÈù¢ÈÇ£‰∫∫(Ê≠§Êó∂Â∑≤ÁªèÁù°ÁùÄ‰∫Ü)ÁöÑÂ∫ß‰Ωç‰∏äÁïô‰∏Ä‰∏™Á∫∏Êù°ÔºåÂ•ΩËÆ©Ëøô‰∏™‰∫∫Âú®Ëµ∞‰πãÂâçËÉΩÂ§üÂéªÂî§ÈÜíËá™Â∑±„ÄÇÂΩì‰∏ÄÂàá‰∫ãÊÉÖÂäûÂ¶•‰∫Ü‰πãÂêéÔºå‰ªñÂ∞±ÂÆâÂÆâÂøÉÂøÉÁöÑÁù°Ëßâ‰∫ÜÔºåÊ≥®ÊÑèÔºåÊàë‰ª¨ÁúãÂà∞Êï¥‰∏™forÂæ™ÁéØÂ∞±Âè™Êúâ‰∏Ä‰∏™Âá∫Âè£ÔºåÈÇ£Â∞±ÊòØÁ≠âÁ∫øÁ®ãÊàêÂäüÁöÑËé∑ÂèñÂà∞ÈîÅ‰πãÂêéÊâçËÉΩÂá∫ÂéªÔºåÂú®Ê≤°ÊúâËé∑ÂèñÂà∞ÈîÅ‰πãÂâçÂ∞±‰∏ÄÁõ¥ÊòØÊåÇÂú®forÂæ™ÁéØÁöÑparkAndCheckInterrupt()ÊñπÊ≥ïÈáåÂ§¥„ÄÇÁ∫øÁ®ãË¢´Âî§ÈÜíÂêé‰πüÊòØ‰ªéËøô‰∏™Âú∞ÊñπÁªßÁª≠ÊâßË°åforÂæ™ÁéØ„ÄÇ Á¨¨ÂõõÊ≠•ÔºöselfInterrupt() 1234//ÂΩìÂâçÁ∫øÁ®ãÂ∞ÜËá™Â∑±‰∏≠Êñ≠private static void selfInterrupt() &#123; Thread.currentThread().interrupt();&#125; Áî±‰∫é‰∏äÈù¢Êï¥‰∏™Á∫øÁ®ã‰∏ÄÁõ¥ÊòØÊåÇÂú®forÂæ™ÁéØÁöÑparkAndCheckInterrupt()ÊñπÊ≥ïÈáåÂ§¥ÔºåÊ≤°ÊúâÊàêÂäüËé∑ÂèñÂà∞ÈîÅ‰πãÂâç‰∏çÂìçÂ∫î‰ªª‰ΩïÂΩ¢ÂºèÁöÑÁ∫øÁ®ã‰∏≠Êñ≠ÔºåÂè™ÊúâÂΩìÁ∫øÁ®ãÊàêÂäüËé∑ÂèñÂà∞ÈîÅÂπ∂‰ªéforÂæ™ÁéØÂá∫Êù•ÂêéÔºå‰ªñÊâç‰ºöÊü•ÁúãÂú®ËøôÊúüÈó¥ÊòØÂê¶Êúâ‰∫∫Ë¶ÅÊ±Ç‰∏≠Êñ≠Á∫øÁ®ãÔºåÂ¶ÇÊûúÊòØÁöÑËØùÂÜçÂéªË∞ÉÁî®selfInterrupt()ÊñπÊ≥ïÂ∞ÜËá™Â∑±ÊåÇËµ∑„ÄÇ ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑ÂèñÈîÅ 123456789 public final void acquireInterruptibly(int arg) throws InterruptedException &#123; //È¶ñÂÖàÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏≠Êñ≠ËøáÔºåÂ¶ÇÊûúË¢´‰∏≠Êñ≠ÂàôÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) throw new InterruptedException(); //Â¶ÇÊûúÊ≤°ÊúâË¢´‰∏≠Êñ≠ËøáÔºåÂàôÂ∞ùËØïËé∑ÂèñËµÑÊ∫ê if (!tryAcquire(arg)) //ËØ¥ÊòéËé∑ÂèñËµÑÊ∫êÂ§±Ë¥•ÔºåÂàôÈúÄË¶ÅÂä†ÂÖ•Âà∞ÂêåÊ≠•ÈòüÂàóÔºåÂú®ÂêåÊ≠•ÈòüÂàó‰∏≠Ëé∑ÂèñËµÑÊ∫ê doAcquireInterruptibly(arg);&#125; 1234567891011121314151617181920212223242526272829//‰ª•ÂèØ‰∏≠Êñ≠Ê®°ÂºèËé∑ÂèñÈîÅ(Áã¨Âç†Ê®°Âºè)private void doAcquireInterruptibly(int arg) throws InterruptedException &#123; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÊàêÁªìÁÇπÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàó‰∏≠ final Node node = addWaiter(Node.EXCLUSIVE); boolean failed = true; try &#123; for (;;) &#123; //Ëé∑ÂèñÂΩìÂâçÁªìÁÇπÁöÑÂâçÈ©±ÁªìÁÇπ final Node p = node.predecessor(); //Â¶ÇÊûúpÊòØheadÁªìÁÇπ, ÈÇ£‰πàÂΩìÂâçÁ∫øÁ®ãÂ∞±ÂÜçÊ¨°Â∞ùËØïËé∑ÂèñÈîÅ if (p == head &amp;&amp; tryAcquire(arg)) &#123; setHead(node); p.next = null; // help GC failed = false; //Ëé∑ÂèñÈîÅÊàêÂäüÂêéËøîÂõû return; &#125; //Â¶ÇÊûúÊª°Ë∂≥Êù°‰ª∂Â∞±ÊåÇËµ∑ÂΩìÂâçÁ∫øÁ®ã, Ê≠§Êó∂ÂìçÂ∫î‰∏≠Êñ≠Âπ∂ÊäõÂá∫ÂºÇÂ∏∏ if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) &#123; //Á∫øÁ®ãË¢´Âî§ÈÜíÂêéÂ¶ÇÊûúÂèëÁé∞‰∏≠Êñ≠ËØ∑Ê±ÇÂ∞±ÊäõÂá∫ÂºÇÂ∏∏ throw new InterruptedException(); &#125; &#125; &#125; finally &#123; if (failed) &#123; cancelAcquire(node); &#125; &#125;&#125; ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÊñπÂºèÂíå‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÊñπÂºèËé∑ÂèñÈîÅÊµÅÁ®ã‰∏äÂ§ßËá¥‰∏äÊòØÁõ∏ÂêåÁöÑ„ÄÇÂîØ‰∏ÄÁöÑ‰∏ÄÁÇπÂå∫Âà´Â∞±ÊòØÁ∫øÁ®ã‰ªéparkAndCheckInterruptÊñπÊ≥ï‰∏≠ÈÜíÊù•Âêé‰ºöÊ£ÄÊü•Á∫øÁ®ãÊòØÂê¶‰∏≠Êñ≠ÔºåÂ¶ÇÊûúÊòØÁöÑËØùÂ∞±ÊäõÂá∫InterruptedExceptionÂºÇÂ∏∏ÔºåËÄå‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑ÂèñÈîÅÊòØÂú®Êî∂Âà∞‰∏≠Êñ≠ËØ∑Ê±ÇÂêéÂè™ÊòØËÆæÁΩÆ‰∏Ä‰∏ã‰∏≠Êñ≠Áä∂ÊÄÅÔºåÂπ∂‰∏ç‰ºöÁ´ãÈ©¨ÁªìÊùüÂΩìÂâçËé∑ÂèñÈîÅÁöÑÊñπÊ≥ïÔºå‰∏ÄÁõ¥Âà∞ÁªìÁÇπÊàêÂäüËé∑ÂèñÂà∞ÈîÅ‰πãÂêéÊâç‰ºöÊ†πÊçÆ‰∏≠Êñ≠Áä∂ÊÄÅÂÜ≥ÂÆöÊòØÂê¶Â∞ÜËá™Â∑±ÊåÇËµ∑„ÄÇ ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥Ëé∑ÂèñÈîÅ 12345678public final boolean tryAcquireNanos(int arg, long nanosTimeout) throws InterruptedException &#123; ////Âà§Êñ≠ÊòØÂê¶Ë¢´‰∏≠Êñ≠ËøáÔºåÂ¶ÇÊûú‰∏≠Êñ≠ËøáÁõ¥Êé•ÊäõÂºÇÂ∏∏ if (Thread.interrupted()) throw new InterruptedException(); ////Â∞ùËØïËé∑ÂèñËµÑÊ∫êÔºåÂ¶ÇÊûúÂ§±Ë¥•Ê∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàó‰∏≠Ôºå‰ªéÂêåÊ≠•ÈòüÂàó‰∏≠Ëé∑ÂèñËµÑÊ∫ê return tryAcquire(arg) || doAcquireNanos(arg, nanosTimeout);&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445//‰ª•ÈôêÂÆöË∂ÖÊó∂Êó∂Èó¥Ëé∑ÂèñÈîÅ(Áã¨Âç†Ê®°Âºè)private boolean doAcquireNanos(int arg, long nanosTimeout) throws InterruptedException &#123; //Ëé∑ÂèñÁ≥ªÁªüÂΩìÂâçÊó∂Èó¥ long lastTime = System.nanoTime(); //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÊàêÁªìÁÇπÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàó‰∏≠ final Node node = addWaiter(Node.EXCLUSIVE); boolean failed = true; try &#123; for (;;) &#123; //Ëé∑ÂèñÂΩìÂâçÁªìÁÇπÁöÑÂâçÈ©±ÁªìÁÇπ final Node p = node.predecessor(); //Â¶ÇÊûúÂâçÈ©±ÊòØheadÁªìÁÇπ, ÈÇ£‰πàÂΩìÂâçÁ∫øÁ®ãÂ∞±ÂÜçÊ¨°Â∞ùËØïËé∑ÂèñÈîÅ if (p == head &amp;&amp; tryAcquire(arg)) &#123; //Êõ¥Êñ∞headÁªìÁÇπ setHead(node); p.next = null; failed = false; return true; &#125; //Ë∂ÖÊó∂Êó∂Èó¥Áî®ÂÆå‰∫ÜÂ∞±Áõ¥Êé•ÈÄÄÂá∫Âæ™ÁéØ if (nanosTimeout &lt;= 0) &#123; return false; &#125; //Â¶ÇÊûúË∂ÖÊó∂Êó∂Èó¥Â§ß‰∫éËá™ÊóãÊó∂Èó¥, ÈÇ£‰πàÁ≠âÂà§Êñ≠ÂèØ‰ª•ÊåÇËµ∑Á∫øÁ®ã‰πãÂêéÂ∞±‰ºöÂ∞ÜÁ∫øÁ®ãÊåÇËµ∑‰∏ÄÊÆµÊó∂Èó¥ if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; nanosTimeout &gt; spinForTimeoutThreshold) &#123; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÊåÇËµ∑‰∏ÄÊÆµÊó∂Èó¥, ‰πãÂêéÂÜçËá™Â∑±ÈÜíÊù• LockSupport.parkNanos(this, nanosTimeout); &#125; //Ëé∑ÂèñÁ≥ªÁªüÂΩìÂâçÊó∂Èó¥ long now = System.nanoTime(); //Ë∂ÖÊó∂Êó∂Èó¥ÊØèÊ¨°ÈÉΩÂáèÂéªËé∑ÂèñÈîÅÁöÑÊó∂Èó¥Èó¥Èöî nanosTimeout -= now - lastTime; //ÂÜçÊ¨°Êõ¥Êñ∞lastTime lastTime = now; //Âú®Ëé∑ÂèñÈîÅÁöÑÊúüÈó¥Êî∂Âà∞‰∏≠Êñ≠ËØ∑Ê±ÇÂ∞±ÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; &#125; &#125; finally &#123; if (failed) &#123; cancelAcquire(node); &#125; &#125;&#125; ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥Ëé∑ÂèñÈ¶ñÂÖà‰ºöÂéªËé∑Âèñ‰∏Ä‰∏ãÈîÅÔºåÁ¨¨‰∏ÄÊ¨°Ëé∑ÂèñÈîÅÂ§±Ë¥•Âêé‰ºöÊ†πÊçÆÊÉÖÂÜµÔºåÂ¶ÇÊûú‰º†ÂÖ•ÁöÑË∂ÖÊó∂Êó∂Èó¥Â§ß‰∫éËá™ÊóãÊó∂Èó¥ÈÇ£‰πàÂ∞±‰ºöÂ∞ÜÁ∫øÁ®ãÊåÇËµ∑‰∏ÄÊÆµÊó∂Èó¥ÔºåÂê¶ÂàôÁöÑËØùÂ∞±‰ºöËøõË°åËá™ÊóãÔºåÊØèÊ¨°Ëé∑ÂèñÈîÅ‰πãÂêéÈÉΩ‰ºöÂ∞ÜË∂ÖÊó∂Êó∂Èó¥ÂáèÂéªËé∑Âèñ‰∏ÄÊ¨°ÈîÅÊâÄÁî®ÁöÑÊó∂Èó¥„ÄÇ‰∏ÄÁõ¥Âà∞Ë∂ÖÊó∂Êó∂Èó¥Â∞è‰∫é0‰πüÂ∞±ËØ¥ÊòéË∂ÖÊó∂Êó∂Èó¥Áî®ÂÆå‰∫ÜÔºåÈÇ£‰πàËøôÊó∂Â∞±‰ºöÁªìÊùüËé∑ÂèñÈîÅÁöÑÊìç‰ΩúÁÑ∂ÂêéËøîÂõûËé∑ÂèñÂ§±Ë¥•Ê†áÂøó„ÄÇÊ≥®ÊÑèÂú®‰ª•Ë∂ÖÊó∂Êó∂Èó¥Ëé∑ÂèñÈîÅÁöÑËøáÁ®ã‰∏≠ÊòØÂèØ‰ª•ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ËØ∑Ê±ÇÁöÑ„ÄÇ Áã¨Âç†Ê®°Âºè‰∏ãÈáäÊîæÈîÅ 1234567891011121314151617181920212223242526272829303132333435363738394041//ÈáäÊîæÈîÅÁöÑÊìç‰Ωú(Áã¨Âç†Ê®°Âºè)public final boolean release(int arg) &#123; //Â∞ùËØïÈáäÊîæÔºàËØ•ÊñπÊ≥ïÈúÄË¶ÅÂ≠êÁ±ªÂéªÂÆûÁé∞Ôºâ if (tryRelease(arg)) &#123; //Â∞ùËØïÊàêÂäüÔºåËé∑ÂèñheadÁªìÁÇπ Node h = head; //Â¶ÇÊûúheadÁªìÁÇπ‰∏ç‰∏∫Á©∫Âπ∂‰∏îÁ≠âÂæÖÁä∂ÊÄÅ‰∏çÁ≠â‰∫é0Â∞±ÂéªÂî§ÈÜíÂêéÁªßÁªìÁÇπ if (h != null &amp;&amp; h.waitStatus != 0) &#123; //Âî§ÈÜíÂêéÁªßÁªìÁÇπ unparkSuccessor(h); &#125; return true; &#125; return false;&#125;//Âî§ÈÜíÂêéÁªßÁªìÁÇπprivate void unparkSuccessor(Node node) &#123; //Ëé∑ÂèñÁªôÂÆöÁªìÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅ int ws = node.waitStatus; //Â¶ÇÊûúÁä∂ÊÄÅÂ∞è‰∫é0ÔºåÈÄöËøáCASÂ∞ÜÁä∂ÊÄÅÊõ¥Êñ∞‰∏∫0ÔºåÂõ†‰∏∫Ê≠§Êó∂ÁªôÂÆöÁöÑÁªìÁÇπÈáäÊîæËµÑÊ∫ê if (ws &lt; 0) &#123; compareAndSetWaitStatus(node, ws, 0); &#125; //Ëé∑ÂèñÁªôÂÆöÁªìÁÇπÁöÑÂêéÁªßÁªìÁÇπÔºåÂç≥‰∏ã‰∏Ä‰∏™ÈúÄË¶ÅË¢´Âî§ÈÜíÁöÑÁªìÁÇπ Node s = node.next; //ÂêéÁªßÁªìÁÇπ‰∏∫Á©∫ÊàñËÄÖÁ≠âÂæÖÁä∂ÊÄÅ‰∏∫ÂèñÊ∂àÁä∂ÊÄÅ if (s == null || s.waitStatus &gt; 0) &#123; s = null; //‰ªéÂêéÂêëÂâçÈÅçÂéÜÈòüÂàóÊâæÂà∞Á¨¨‰∏Ä‰∏™‰∏çÊòØÂèñÊ∂àÁä∂ÊÄÅÁöÑÁªìÁÇπ for (Node t = tail; t != null &amp;&amp; t != node; t = t.prev) &#123; if (t.waitStatus &lt;= 0) &#123; s = t; &#125; &#125; &#125; //Âî§ÈÜíÁªôÂÆöÁªìÁÇπÂêéÈù¢È¶ñ‰∏™‰∏çÊòØÂèñÊ∂àÁä∂ÊÄÅÁöÑÁªìÁÇπ if (s != null) &#123; LockSupport.unpark(s.thread); &#125;&#125; Á∫øÁ®ãÊåÅÊúâÈîÅËøõÂÖ•ÊàøÈó¥ÂêéÂ∞±‰ºöÂéªÂäûËá™Â∑±ÁöÑ‰∫ãÊÉÖÔºåÁ≠â‰∫ãÊÉÖÂäûÂÆåÂêéÂÆÉÂ∞±‰ºöÈáäÊîæÈîÅÂπ∂Á¶ªÂºÄÊàøÈó¥„ÄÇÈÄöËøátryReleaseÊñπÊ≥ïÂèØ‰ª•Êã®Âä®ÂØÜÁ†ÅÈîÅËøõË°åËß£ÈîÅÔºåtryReleaseÊñπÊ≥ïÊòØÈúÄË¶ÅËÆ©Â≠êÁ±ªÂéªË¶ÜÁõñÁöÑÔºå‰∏çÂêåÁöÑÂ≠êÁ±ªÂÆûÁé∞ÁöÑËßÑÂàô‰∏ç‰∏ÄÊ†∑Ôºå‰πüÂ∞±ÊòØËØ¥‰∏çÂêåÁöÑÂ≠êÁ±ªËÆæÁΩÆÁöÑÂØÜÁ†Å‰∏ç‰∏ÄÊ†∑„ÄÇ ÂÉèÂú®ReentrantLockÂΩì‰∏≠ÔºåÊàøÈó¥ÈáåÈù¢ÁöÑ‰∫∫ÊØèË∞ÉÁî®tryReleaseÊñπÊ≥ï‰∏ÄÊ¨°ÔºåstateÂ∞±Âáè1ÔºåÁõ¥Âà∞stateÂáèÂà∞0ÁöÑÊó∂ÂÄôÂØÜÁ†ÅÈîÅÂ∞±ÂºÄ‰∫Ü„ÄÇËøô‰∏™ËøáÁ®ãÂ∞±ÂÉèÂú®‰∏çÂÅúÁöÑËΩ¨Âä®ÂØÜÁ†ÅÈîÅÁöÑËΩ¨ËΩÆÔºåËÄåÊØèÊ¨°ËΩ¨Âä®ËΩ¨ËΩÆÊï∞Â≠óÂè™ÊòØÂáèÂ∞ë1„ÄÇ CountDownLatchÂíåËøô‰∏™‰πüÊúâÁÇπÁ±ª‰ººÔºåÂè™‰∏çËøáÂÆÉ‰∏çÊòØ‰∏Ä‰∏™‰∫∫Âú®ËΩ¨ÔºåËÄåÊòØÂ§ö‰∏™‰∫∫ÊØè‰∫∫ÈÉΩÂéªËΩ¨‰∏Ä‰∏ãÔºåÈõÜ‰∏≠Â§ßÂÆ∂ÁöÑÂäõÈáèÊääÈîÅÁªôÂºÄ‰∫Ü„ÄÇ Á∫øÁ®ãÂá∫‰∫ÜÊàøÈó¥ÂêéÂÆÉ‰ºöÊâæÂà∞Ëá™Â∑±ÂéüÂÖàÁöÑÂ∫ß‰ΩçÔºå‰πüÂ∞±ÊòØÊâæÂà∞headÁªìÁÇπ„ÄÇÁúãÁúãÂ∫ß‰Ωç‰∏äÊúâÊ≤°Êúâ‰∫∫ÁªôÂÆÉÁïô‰∫ÜÂ∞èÁ∫∏Êù°ÔºåÂ¶ÇÊûúÊúâÁöÑËØùÂÆÉÂ∞±Áü•ÈÅìÊúâ‰∫∫Áù°ÁùÄ‰∫ÜÈúÄË¶ÅËÆ©ÂÆÉÂ∏ÆÂøôÂî§ÈÜíÔºåÈÇ£‰πàÂÆÉÂ∞±‰ºöÂéªÂî§ÈÜíÈÇ£‰∏™Á∫øÁ®ã„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÁöÑËØùÂ∞±Ë°®ÊòéÂêåÊ≠•ÈòüÂàó‰∏≠ÊöÇÊó∂ËøòÊ≤°Êúâ‰∫∫Âú®Á≠âÂæÖÔºå‰πüÊ≤°Êúâ‰∫∫ÈúÄË¶ÅÂÆÉÂî§ÈÜíÔºåÊâÄ‰ª•ÂÆÉÂ∞±ÂèØ‰ª•ÂÆâÂøÉÁöÑÁ¶ªÂéª‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-AQSÊ∫êÁ†ÅÂàÜÊûê‰πãÂÖ±‰∫´Ê®°Âºè]]></title>
    <url>%2Fposts%2Fedbda32.html</url>
    <content type="text"><![CDATA[AQS‰∏∫Âú®ÂÖ±‰∫´Ê®°Âºè‰∏ãËé∑ÂèñÈîÅÂàÜÂà´Êèê‰æõ‰∏âÁßçËé∑ÂèñÊñπÂºèÔºö ‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑Âèñ; ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑Âèñ; ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥Ëé∑Âèñ„ÄÇ Ëøô‰∏âÁßçÊñπÂºèÊï¥‰ΩìÊ≠•È™§Â§ßËá¥ÊòØÁõ∏ÂêåÁöÑÔºåÂè™ÊúâÂ∞ëÈÉ®ÂàÜ‰∏çÂêåÁöÑÂú∞ÊñπÔºö Á¨¨‰∏ÄÁßçÊñπÂºèÔºåÂ¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÂú®Ëé∑ÂèñËµÑÊ∫êÊó∂Ë¢´‰∏≠Êñ≠‰∫ÜÔºåÂÆÉ‰ºöÂøΩÁï•Ëøô‰∏™‰∏≠Êñ≠ÔºåÂΩìËé∑ÂèñËµÑÊ∫êËøîÂõûÂêéÊâçÂØπ‰∏≠Êñ≠ËøõË°åÂ§ÑÁêÜ; Á¨¨‰∫åÁßçÊñπÂºèÂàô‰∏çÂêåÔºåÂ¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñËµÑÊ∫êÊó∂Ë¢´‰∏≠Êñ≠ÔºåÂÆÉ‰ºöÊäõÂá∫‰∏≠Êñ≠ÂºÇÂ∏∏; Á¨¨‰∏âÁßçÊñπÂºèÂú®‰∏≠Êñ≠ÁöÑÂü∫Á°Ä‰∏äÊ∑ªÂä†‰∫ÜË∂ÖÊó∂ËøîÂõûÁöÑÂäüËÉΩ„ÄÇ ‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑËé∑Âèñ 12345678910111213141516//‰ª•‰∏çÂèØ‰∏≠Êñ≠Ê®°ÂºèËé∑ÂèñÈîÅ(ÂÖ±‰∫´Ê®°Âºè)public final void acquireShared(int arg) &#123; //1.Â∞ùËØïÂéªËé∑ÂèñÈîÅÔºåÂ¶ÇÊûúËé∑ÂèñÊàêÂäüÔºåÂàôÊµÅÁ®ãÁªìÊùü if (tryAcquireShared(arg) &lt; 0) &#123; //2.Â¶ÇÊûúËé∑ÂèñÂ§±Ë¥•Â∞±ËøõÂÖ•Ëøô‰∏™ÊñπÊ≥ïÔºöÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÊàêNodeÁªìÁÇπÊîæÂÖ•Âà∞ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ®Âπ∂ÊåâÁÖßÊù°‰ª∂Âà§Êñ≠ÊòØÂê¶ÊåÇËµ∑ÔºåÁ≠âÂæÖË¢´Âî§ÈÜí doAcquireShared(arg); &#125;&#125;//Â∞ùËØïÂéªËé∑ÂèñÈîÅ(ÂÖ±‰∫´Ê®°ÂºèÔºåËØ•ÊñπÊ≥ïÈúÄË¶ÅÂ≠êÁ±ªÂéªÂÆûÁé∞ÔºåËøîÂõûÂÄºÈúÄË¶ÅÈÅµÂæ™‰ª•‰∏ã‰∏â‰∏™ÂÆö‰πâ)//Ë¥üÊï∞ÔºöË°®Á§∫Ëé∑ÂèñÂ§±Ë¥•//Èõ∂ÂÄºÔºöË°®Á§∫ÂΩìÂâçÁªìÁÇπËé∑ÂèñÊàêÂäü, ‰ΩÜÊòØÂêéÁªßÁªìÁÇπ‰∏çËÉΩÂÜçËé∑Âèñ‰∫Ü//Ê≠£Êï∞ÔºöË°®Á§∫ÂΩìÂâçÁªìÁÇπËé∑ÂèñÊàêÂäü, Âπ∂‰∏îÂêéÁªßÁªìÁÇπÂêåÊ†∑ÂèØ‰ª•Ëé∑ÂèñÊàêÂäüprotected int tryAcquireShared(int arg) &#123; throw new UnsupportedOperationException();&#125; Ë∞ÉÁî®acquireSharedÊñπÊ≥ïÊòØ‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑ÂèñÈîÅÁöÑÊñπÂºè„ÄÇÂú®ËØ•ÊñπÊ≥ï‰∏≠ÔºåÈ¶ñÂÖàË∞ÉÁî®tryAcquireSharedÂéªÂ∞ùËØïËé∑ÂèñÈîÅÔºåtryAcquireSharedÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™Ëé∑ÂèñÈîÅÁöÑÁä∂ÊÄÅÔºåËøôÈáåAQSËßÑÂÆö‰∫ÜËøîÂõûÁä∂ÊÄÅËã•ÊòØË¥üÊï∞‰ª£Ë°®ÂΩìÂâçÁªìÁÇπËé∑ÂèñÈîÅÂ§±Ë¥•ÔºåËã•ÊòØ0‰ª£Ë°®ÂΩìÂâçÁªìÁÇπËé∑ÂèñÈîÅÊàêÂäüÔºå‰ΩÜÂêéÁªßÁªìÁÇπ‰∏çËÉΩÂÜçËé∑Âèñ‰∫ÜÔºåËã•ÊòØÊ≠£Êï∞Âàô‰ª£Ë°®ÂΩìÂâçÁªìÁÇπËé∑ÂèñÈîÅÊàêÂäüÔºåÂπ∂‰∏îËøô‰∏™ÈîÅÂêéÁª≠ÁªìÁÇπ‰πüÂêåÊ†∑ÂèØ‰ª•Ëé∑ÂèñÊàêÂäü„ÄÇÂ≠êÁ±ªÂú®ÂÆûÁé∞tryAcquireSharedÊñπÊ≥ïËé∑ÂèñÈîÅÁöÑÈÄªËæëÊó∂ÔºåËøîÂõûÂÄºÈúÄË¶ÅÈÅµÂÆàËøô‰∏™Á∫¶ÂÆö„ÄÇÂ¶ÇÊûúË∞ÉÁî®tryAcquireSharedÁöÑËøîÂõûÂÄºÂ∞è‰∫é0ÔºåÂ∞±‰ª£Ë°®ËøôÊ¨°Â∞ùËØïËé∑ÂèñÈîÅÂ§±Ë¥•‰∫ÜÔºåÊé•‰∏ãÊù•Â∞±Ë∞ÉÁî®doAcquireSharedÊñπÊ≥ïÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÊ∑ªÂä†ËøõÂêåÊ≠•ÈòüÂàó„ÄÇ‰∏ãÈù¢Áúã‰∏ãdoAcquireSharedÊñπÊ≥ï„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344//Âú®ÂêåÊ≠•ÈòüÂàó‰∏≠Ëé∑Âèñ(ÂÖ±‰∫´Ê®°Âºè)private void doAcquireShared(int arg) &#123; //Â∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÊàêSHAREDÂÖ±‰∫´Ê®°ÂºèÁöÑÁªìÁÇπÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàó‰∏≠ final Node node = addWaiter(Node.SHARED); //ÊòØÂê¶Ëé∑ÂèñÂ§±Ë¥• boolean failed = true; try &#123; //ÊòØÂê¶‰∏≠Êñ≠ boolean interrupted = false; //Ëá™ÊóãÔºåÂà§Êñ≠‰ªÄ‰πàÊó∂ÂÄôËÉΩÂ§üÂ∞ùËØïËé∑ÂèñËµÑÊ∫êÔºå‰ªÄ‰πàÊó∂ÂÄôËÉΩÂ§üÊåÇËµ∑ for (;;) &#123; //Ëé∑ÂèñÂΩìÂâçÁªìÁÇπÁöÑÂâçÈ©±ÁªìÁÇπ final Node p = node.predecessor(); //Â¶ÇÊûúÂâçÈ©±ÁªìÁÇπ‰∏∫headÁªìÁÇπÂ∞±ÂÜçÊ¨°Â∞ùËØïÂéªËé∑ÂèñÈîÅ if (p == head) &#123; //ÂÜçÊ¨°Â∞ùËØïÂéªËé∑ÂèñÈîÅÂπ∂ËøîÂõûËé∑ÂèñÁä∂ÊÄÅ //r &lt; 0, Ë°®Á§∫Ëé∑ÂèñÂ§±Ë¥• //r = 0, Ë°®Á§∫ÂΩìÂâçÁªìÁÇπËé∑ÂèñÊàêÂäü, ‰ΩÜÊòØÂêéÁªßÁªìÁÇπ‰∏çËÉΩÂÜçËé∑Âèñ‰∫Ü //r &gt; 0, Ë°®Á§∫ÂΩìÂâçÁªìÁÇπËé∑ÂèñÊàêÂäü, Âπ∂‰∏îÂêéÁªßÁªìÁÇπÂêåÊ†∑ÂèØ‰ª•Ëé∑ÂèñÊàêÂäü int r = tryAcquireShared(arg); if (r &gt;= 0) &#123; //Âà∞ËøôÈáåËØ¥ÊòéÂΩìÂâçÁªìÁÇπÂ∑≤ÁªèËé∑ÂèñÈîÅÊàêÂäü‰∫Ü, Ê≠§Êó∂ÂÆÉ‰ºöÂ∞ÜÈîÅÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ‰º†Êí≠ÁªôÂêéÁªßÁªìÁÇπ setHeadAndPropagate(node, r); //Â∏ÆÂä©ÂûÉÂúæÂõûÊî∂ p.next = null; //Â¶ÇÊûúÂú®Á∫øÁ®ãÈòªÂ°ûÊúüÈó¥Êî∂Âà∞‰∏≠Êñ≠ËØ∑Ê±Ç, Â∞±Âú®Ëøô‰∏ÄÊ≠•ÂìçÂ∫îËØ•ËØ∑Ê±Ç if (interrupted) &#123; selfInterrupt(); &#125; failed = false; return; &#125; &#125; //ÊØèÊ¨°Ëé∑ÂèñÈîÅÂ§±Ë¥•ÂêéÈÉΩ‰ºöÂà§Êñ≠ÊòØÂê¶ÂèØ‰ª•Â∞ÜÁ∫øÁ®ãÊåÇËµ∑, Â¶ÇÊûúÂèØ‰ª•ÁöÑËØùÂ∞±‰ºöÂú®parkAndCheckInterruptÊñπÊ≥ïÈáåÂ∞ÜÁ∫øÁ®ãÊåÇËµ∑ if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) &#123; interrupted = true; &#125; &#125; &#125; finally &#123; if (failed) &#123; cancelAcquire(node); &#125; &#125;&#125; ËøõÂÖ•doAcquireSharedÊñπÊ≥ïÈ¶ñÂÖàÊòØË∞ÉÁî®addWaiterÊñπÊ≥ïÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÂåÖË£ÖÊàêÁªìÁÇπÊîæÂà∞ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ®„ÄÇËøô‰∏™Ê∑ªÂä†ÁªìÁÇπÁöÑËøáÁ®ãË∑üÁã¨Âç†Ê®°ÂºèÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ÁªìÁÇπËøõÂÖ•ÂêåÊ≠•ÈòüÂàóÂêéÔºåÂ¶ÇÊûúÂÆÉÂèëÁé∞Âú®ÂÆÉÂâçÈù¢ÁöÑÁªìÁÇπÂ∞±ÊòØheadÁªìÁÇπÔºåÂõ†‰∏∫headÁªìÁÇπÁöÑÁ∫øÁ®ãÂ∑≤ÁªèËé∑ÂèñÈîÅËøõÂÖ•ÊàøÈó¥ÈáåÈù¢‰∫ÜÔºåÈÇ£‰πà‰∏ã‰∏Ä‰∏™Ëé∑ÂèñÈîÅÁöÑÁªìÁÇπÂ∞±ËΩÆÂà∞Ëá™Â∑±‰∫ÜÔºåÊâÄ‰ª•ÂΩìÂâçÁªìÁÇπÂÖà‰∏ç‰ºöÂ∞ÜËá™Â∑±ÊåÇËµ∑ÔºåËÄåÊòØÂÜç‰∏ÄÊ¨°ÂéªÂ∞ùËØïËé∑ÂèñÈîÅÔºåÂ¶ÇÊûúÂâçÈù¢ÈÇ£‰∫∫ÂàöÂ•ΩÈáäÊîæÈîÅÁ¶ªÂºÄ‰∫ÜÔºåÈÇ£‰πàÂΩìÂâçÁªìÁÇπÂ∞±ËÉΩÊàêÂäüËé∑ÂæóÈîÅÔºåÂ¶ÇÊûúÂâçÈù¢ÈÇ£‰∫∫ËøòÊ≤°ÊúâÈáäÊîæÈîÅÔºåÈÇ£‰πàÂ∞±‰ºöË∞ÉÁî®shouldParkAfterFailedAcquireÊñπÊ≥ïÔºåÂú®Ëøô‰∏™ÊñπÊ≥ïÈáåÈù¢‰ºöÂ∞ÜheadÁªìÁÇπÁöÑÁä∂ÊÄÅÊîπ‰∏∫SIGNALÔºåÂè™Êúâ‰øùËØÅÂâçÈù¢ÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫SIGNALÔºåÂΩìÂâçÁªìÁÇπÊâçËÉΩÊîæÂøÉÁöÑÂ∞ÜËá™Â∑±ÊåÇËµ∑ÔºåÊâÄÊúâÁ∫øÁ®ãÈÉΩ‰ºöÂú®parkAndCheckInterruptÊñπÊ≥ïÈáåÈù¢Ë¢´ÊåÇËµ∑„ÄÇÂ¶ÇÊûúÂΩìÂâçÁªìÁÇπÊÅ∞Â∑ßÊàêÂäüÁöÑËé∑Âèñ‰∫ÜÈîÅÔºåÈÇ£‰πàÊé•‰∏ãÊù•Â∞±‰ºöË∞ÉÁî®setHeadAndPropagateÊñπÊ≥ïÂ∞ÜËá™Â∑±ËÆæÁΩÆ‰∏∫headÁªìÁÇπÔºåÂπ∂‰∏îÂî§ÈÜíÂêéÈù¢ÂêåÊ†∑ÊòØÂÖ±‰∫´Ê®°ÂºèÁöÑÁªìÁÇπ„ÄÇ‰∏ãÈù¢Áúã‰∏ãsetHeadAndPropagateÊñπÊ≥ïÂÖ∑‰ΩìÁöÑÊìç‰Ωú„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051//ËÆæÁΩÆheadÁªìÁÇπÂπ∂‰º†Êí≠ÈîÅÁöÑÁä∂ÊÄÅ(ÂÖ±‰∫´Ê®°Âºè)private void setHeadAndPropagate(Node node, int propagate) &#123; //Ëé∑ÂèñÂΩìÂâçÁöÑÂ§¥ÁªìÁÇπ Node h = head; //Â∞ÜÁªôÂÆöÁöÑÊàêÂäüËé∑ÂèñËµÑÊ∫êÁöÑÁªìÁÇπËÆæÁΩÆ‰∏∫headÁªìÁÇπ setHead(node); //Êúâ5‰∏™Êù°‰ª∂Ôºö //Á¨¨‰∏Ä‰∏™Êù°‰ª∂Ôºöpropagate&gt;0:Ëøô‰∏™ÂÄºÊòØÈÄöËøáË∞ÉÁî®tryAcquireShared()Ëé∑ÂèñÁöÑÔºåË°®Á§∫Ââ©‰ΩôÁöÑËµÑÊ∫êÔºå‰∏äÈù¢ËØ¥‰∫Üstate&gt;0Ë°®Á§∫Ëé∑ÂèñËµÑÊ∫êÊàêÂäüÔºå‰∏îËøòÊúâÂâ©‰ΩôÁöÑËµÑÊ∫ê„ÄÇ //Á¨¨‰∫å‰∏™Êù°‰ª∂Ôºöh==nullÔºöË°®Á§∫ËÄÅÁöÑÂ§¥ÁªìÁÇπheadÁöÑÂºïÁî®‰∏∫null„ÄÇ //Á¨¨‰∏â‰∏™Êù°‰ª∂Ôºöh.waitStatus&lt;0ÔºöËÄÅÁöÑÂ§¥ÁªìÁÇπheadÁöÑËäÇÁÇπÁä∂ÊÄÅÔºåÊúâ‰∏§ÁßçÂèñÂÄºÂèØËÉΩÔºöSIGNAL(-1)ÂíåPROPAGATE(-3)„ÄÇ //Á¨¨Âõõ‰∏™Êù°‰ª∂Ôºö(h=head)==null //Á¨¨‰∫î‰∏™Êù°‰ª∂Ôºöh.waitStatus&lt;0ÔºöÊñ∞ËÆæÁΩÆÁöÑÂ§¥ÁªìÁÇπheadÁöÑËäÇÁÇπÁä∂ÊÄÅÔºåÊúâ‰∏§ÁßçÂèñÂÄºÂèØËÉΩÔºöSIGNAL(-1)ÂíåPROPAGATE(-3)„ÄÇ if (propagate &gt; 0 || h == null || h.waitStatus &lt; 0 || (h = head) == null || h.waitStatus &lt; 0) &#123; //Ëé∑ÂèñÁªôÂÆöÁªìÁÇπÁöÑÂêéÁªßÁªìÁÇπ Node s = node.next; //Â¶ÇÊûúÁªôÂÆöÁªìÁÇπÁöÑÂêéÁªßÁªìÁÇπ‰∏∫Á©∫, ÊàñËÄÖÂÆÉÁöÑÁä∂ÊÄÅÊòØÂÖ±‰∫´Áä∂ÊÄÅ if (s == null || s.isShared()) &#123; //Âî§ÈÜíÂêéÁªßÁªìÁÇπ doReleaseShared(); &#125; &#125;&#125;//ÈáäÊîæÈîÅÁöÑÊìç‰Ωú(ÂÖ±‰∫´Ê®°Âºè)private void doReleaseShared() &#123; for (;;) &#123; //Ëé∑ÂèñÂêåÊ≠•ÈòüÂàóÁöÑheadÁªìÁÇπ Node h = head; if (h != null &amp;&amp; h != tail) &#123; //Ëé∑ÂèñheadÁªìÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅ int ws = h.waitStatus; //Â¶ÇÊûúheadÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫SIGNAL, Ë°®ÊòéÂêéÈù¢Êúâ‰∫∫Âú®ÊéíÈòü if (ws == Node.SIGNAL) &#123; //ÂÖàÊääheadÁªìÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅÊõ¥Êñ∞‰∏∫0 if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0)) &#123; continue; &#125; //ÂÜçÂéªÂî§ÈÜíÂêéÁªßÁªìÁÇπ unparkSuccessor(h); //Â¶ÇÊûúheadÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫0, Ë°®ÊòéÊ≠§Êó∂ÂêéÈù¢Ê≤°‰∫∫Âú®ÊéíÈòü, Â∞±Âè™ÊòØÂ∞ÜheadÁä∂ÊÄÅ‰øÆÊîπ‰∏∫PROPAGATE &#125;else if (ws == 0 &amp;&amp; !compareAndSetWaitStatus(h, 0, Node.PROPAGATE)) &#123; continue; &#125; &#125; //Âè™Êúâ‰øùËØÅÊúüÈó¥headÁªìÁÇπÊ≤°Ë¢´‰øÆÊîπËøáÊâçËÉΩË∑≥Âá∫Âæ™ÁéØ if (h == head) &#123; break; &#125; &#125;&#125; Ë∞ÉÁî®setHeadAndPropagateÊñπÊ≥ïÈ¶ñÂÖàÂ∞ÜËá™Â∑±ËÆæÁΩÆÊàêheadÁªìÁÇπÔºåÁÑ∂ÂêéÂÜçÊ†πÊçÆ‰º†ÂÖ•ÁöÑtryAcquireSharedÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊù•ÂÜ≥ÂÆöÊòØÂê¶Ë¶ÅÂéªÂî§ÈÜíÂêéÁªßÁªìÁÇπ„ÄÇÂâçÈù¢Â∑≤ÁªèËÆ≤Âà∞ÂΩìËøîÂõûÂÄºÂ§ß‰∫é0Â∞±Ë°®ÊòéÂΩìÂâçÁªìÁÇπÊàêÂäüËé∑Âèñ‰∫ÜÈîÅÔºåÂπ∂‰∏îÂêéÈù¢ÁöÑÁªìÁÇπ‰πüÂèØ‰ª•ÊàêÂäüËé∑ÂèñÈîÅ„ÄÇËøôÊó∂ÂΩìÂâçÁªìÁÇπÂ∞±ÈúÄË¶ÅÂéªÂî§ÈÜíÂêéÈù¢ÂêåÊ†∑ÊòØÂÖ±‰∫´Ê®°ÂºèÁöÑÁªìÁÇπÔºåÊ≥®ÊÑèÔºåÊØèÊ¨°Âî§ÈÜí‰ªÖ‰ªÖÂè™ÊòØÂî§ÈÜíÂêé‰∏Ä‰∏™ÁªìÁÇπÔºåÂ¶ÇÊûúÂêé‰∏Ä‰∏™ÁªìÁÇπ‰∏çÊòØÂÖ±‰∫´Ê®°ÂºèÁöÑËØùÔºåÂΩìÂâçÁªìÁÇπÂ∞±Áõ¥Êé•ËøõÂÖ•ÊàøÈó¥ËÄå‰∏ç‰ºöÂÜçÂéªÂî§ÈÜíÊõ¥ÂêéÈù¢ÁöÑÁªìÁÇπ‰∫Ü„ÄÇÂÖ±‰∫´Ê®°Âºè‰∏ãÂî§ÈÜíÂêéÁªßÁªìÁÇπÁöÑÊìç‰ΩúÊòØÂú®doReleaseSharedÊñπÊ≥ïËøõË°åÁöÑÔºåÂÖ±‰∫´Ê®°ÂºèÂíåÁã¨Âç†Ê®°ÂºèÁöÑÂî§ÈÜíÊìç‰ΩúÂü∫Êú¨‰πüÊòØÁõ∏ÂêåÁöÑÔºåÈÉΩÊòØÂéªÊâæÂà∞Ëá™Â∑±Â∫ß‰Ωç‰∏äÁöÑÁâåÂ≠ê(Á≠âÂæÖÁä∂ÊÄÅ)ÔºåÂ¶ÇÊûúÁâåÂ≠ê‰∏ä‰∏∫SIGNALË°®ÊòéÂêéÈù¢Êúâ‰∫∫ÈúÄË¶ÅËÆ©ÂÆÉÂ∏ÆÂøôÂî§ÈÜíÔºåÂ¶ÇÊûúÁâåÂ≠ê‰∏ä‰∏∫0ÂàôË°®ÊòéÈòüÂàóÊ≠§Êó∂Âπ∂Ê≤°Êúâ‰∫∫Âú®ÊéíÈòü„ÄÇÂú®Áã¨Âç†Ê®°Âºè‰∏ãÊòØÂ¶ÇÊûúÂèëÁé∞Ê≤°‰∫∫Âú®ÊéíÈòüÂ∞±Áõ¥Êé•Á¶ªÂºÄÈòüÂàó‰∫ÜÔºåËÄåÂú®ÂÖ±‰∫´Ê®°Âºè‰∏ãÂ¶ÇÊûúÂèëÁé∞ÈòüÂàóÂêéÈù¢Ê≤°‰∫∫Âú®ÊéíÈòüÔºåÂΩìÂâçÁªìÁÇπÂú®Á¶ªÂºÄÂâç‰ªçÁÑ∂‰ºöÁïô‰∏™Â∞èÁ∫∏Êù°(Â∞ÜÁ≠âÂæÖÁä∂ÊÄÅËÆæÁΩÆ‰∏∫PROPAGATE)ÂëäËØâÂêéÊù•ÁöÑ‰∫∫Ëøô‰∏™ÈîÅÁöÑÂèØËé∑ÂèñÁä∂ÊÄÅ„ÄÇÈÇ£‰πàÂêéÈù¢Êù•ÁöÑ‰∫∫Âú®Â∞ùËØïËé∑ÂèñÈîÅÁöÑÊó∂ÂÄôÂèØ‰ª•Ê†πÊçÆËøô‰∏™Áä∂ÊÄÅÊù•Âà§Êñ≠ÊòØÂê¶Áõ¥Êé•Ëé∑ÂèñÈîÅ„ÄÇ ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑ÂèñÈîÅ 123456789101112131415161718192021222324252627282930313233343536373839404142//‰ª•ÂèØ‰∏≠Êñ≠Ê®°ÂºèËé∑ÂèñÈîÅ(ÂÖ±‰∫´Ê®°Âºè)public final void acquireSharedInterruptibly(int arg) throws InterruptedException &#123; //È¶ñÂÖàÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏≠Êñ≠, Â¶ÇÊûúÊòØÂàôÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; //1.Â∞ùËØïÂéªËé∑ÂèñÈîÅ if (tryAcquireShared(arg) &lt; 0) &#123; //2. Â¶ÇÊûúËé∑ÂèñÂ§±Ë¥•ÂàôËøõ‰∫∫ËØ•ÊñπÊ≥ï doAcquireSharedInterruptibly(arg); &#125;&#125;//‰ª•ÂèØ‰∏≠Êñ≠Ê®°ÂºèËé∑Âèñ(ÂÖ±‰∫´Ê®°Âºè)private void doAcquireSharedInterruptibly(int arg) throws InterruptedException &#123; //Â∞ÜÂΩìÂâçÁªìÁÇπÊèíÂÖ•ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ® final Node node = addWaiter(Node.SHARED); boolean failed = true; try &#123; for (;;) &#123; //Ëé∑ÂèñÂΩìÂâçÁªìÁÇπÁöÑÂâçÈ©±ÁªìÁÇπ final Node p = node.predecessor(); if (p == head) &#123; int r = tryAcquireShared(arg); if (r &gt;= 0) &#123; setHeadAndPropagate(node, r); p.next = null; failed = false; return; &#125; &#125; if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) &#123; //Â¶ÇÊûúÁ∫øÁ®ãÂú®ÈòªÂ°ûËøáÁ®ã‰∏≠Êî∂Âà∞Ëøá‰∏≠Êñ≠ËØ∑Ê±Ç, ÈÇ£‰πàÂ∞±‰ºöÁ´ãÈ©¨Âú®ËøôÈáåÊäõÂá∫ÂºÇÂ∏∏ throw new InterruptedException(); &#125; &#125; &#125; finally &#123; if (failed) &#123; cancelAcquire(node); &#125; &#125;&#125; ÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑ÂèñÈîÅÁöÑÊñπÂºèÂíå‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑ÂèñÈîÅÁöÑÊñπÂºèÂú®ÊµÅÁ®ã‰∏äÂü∫Êú¨ÊòØÁõ∏ÂêåÁöÑÔºåÂîØ‰∏ÄÁöÑÂå∫Âà´Â∞±ÊòØÂú®Âì™ÈáåÂìçÂ∫îÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠ËØ∑Ê±Ç„ÄÇÂú®‰∏çÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑ÂèñÈîÅÊó∂ÔºåÁ∫øÁ®ã‰ªéparkAndCheckInterruptÊñπÊ≥ï‰∏≠Ë¢´Âî§ÈÜíÔºåÂî§ÈÜíÂêéÂ∞±Á´ãÈ©¨ËøîÂõûÊòØÂê¶Êî∂Âà∞‰∏≠Êñ≠ËØ∑Ê±ÇÔºåÂç≥‰ΩøÊòØÊî∂Âà∞‰∫Ü‰∏≠Êñ≠ËØ∑Ê±Ç‰πü‰ºöÁªßÁª≠Ëá™ÊóãÁõ¥Âà∞Ëé∑ÂèñÈîÅÂêéÊâçÂìçÂ∫î‰∏≠Êñ≠ËØ∑Ê±ÇÂ∞ÜËá™Â∑±ÁªôÊåÇËµ∑„ÄÇËÄåÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠Ëé∑ÂèñÈîÅ‰ºöÂú®Á∫øÁ®ãË¢´Âî§ÈÜíÂêéÁ´ãÈ©¨ÂìçÂ∫î‰∏≠Êñ≠ËØ∑Ê±ÇÔºåÂ¶ÇÊûúÂú®ÈòªÂ°ûËøáÁ®ã‰∏≠Êî∂Âà∞‰∫ÜÁ∫øÁ®ã‰∏≠Êñ≠Â∞±‰ºöÁ´ãÈ©¨ÊäõÂá∫InterruptedExceptionÂºÇÂ∏∏„ÄÇ ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥Ëé∑ÂèñÈîÅ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253//‰ª•ÈôêÂÆöË∂ÖÊó∂Êó∂Èó¥Ëé∑ÂèñÈîÅ(ÂÖ±‰∫´Ê®°Âºè)public final boolean tryAcquireSharedNanos(int arg, long nanosTimeout) throws InterruptedException &#123; if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; //1.Ë∞ÉÁî®tryAcquireSharedÂ∞ùËØïÂéªËé∑ÂèñÈîÅ //2.Â¶ÇÊûúËé∑ÂèñÂ§±Ë¥•Â∞±Ë∞ÉÁî®doAcquireSharedNanos return tryAcquireShared(arg) &gt;= 0 || doAcquireSharedNanos(arg, nanosTimeout);&#125;//‰ª•ÈôêÂÆöË∂ÖÊó∂Êó∂Èó¥Ëé∑ÂèñÈîÅ(ÂÖ±‰∫´Ê®°Âºè)private boolean doAcquireSharedNanos(int arg, long nanosTimeout) throws InterruptedException &#123; long lastTime = System.nanoTime(); final Node node = addWaiter(Node.SHARED); boolean failed = true; try &#123; for (;;) &#123; //Ëé∑ÂèñÂΩìÂâçÁªìÁÇπÁöÑÂâçÈ©±ÁªìÁÇπ final Node p = node.predecessor(); if (p == head) &#123; int r = tryAcquireShared(arg); if (r &gt;= 0) &#123; setHeadAndPropagate(node, r); p.next = null; failed = false; return true; &#125; &#125; //Â¶ÇÊûúË∂ÖÊó∂Êó∂Èó¥Áî®ÂÆå‰∫ÜÂ∞±ÁªìÊùüËé∑Âèñ, Âπ∂ËøîÂõûÂ§±Ë¥•‰ø°ÊÅØ if (nanosTimeout &lt;= 0) &#123; return false; &#125; //1.Ê£ÄÊü•ÊòØÂê¶Êª°Ë∂≥Â∞ÜÁ∫øÁ®ãÊåÇËµ∑Ë¶ÅÊ±Ç(‰øùËØÅÂâçÈ©±ÁªìÁÇπÁä∂ÊÄÅ‰∏∫SIGNAL) //2.Ê£ÄÊü•Ë∂ÖÊó∂Êó∂Èó¥ÊòØÂê¶Â§ß‰∫éËá™ÊóãÊó∂Èó¥ if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; nanosTimeout &gt; spinForTimeoutThreshold) &#123; //Ëã•Êª°Ë∂≥‰∏äÈù¢‰∏§‰∏™Êù°‰ª∂Â∞±Â∞ÜÂΩìÂâçÁ∫øÁ®ãÊåÇËµ∑‰∏ÄÊÆµÊó∂Èó¥ LockSupport.parkNanos(this, nanosTimeout); &#125; long now = System.nanoTime(); //Ë∂ÖÊó∂Êó∂Èó¥ÊØèÊ¨°ÂáèÂéªËé∑ÂèñÈîÅÁöÑÊó∂Èó¥ nanosTimeout -= now - lastTime; lastTime = now; //Â¶ÇÊûúÂú®ÈòªÂ°ûÊó∂Êî∂Âà∞‰∏≠Êñ≠ËØ∑Ê±ÇÂ∞±Á´ãÈ©¨ÊäõÂá∫ÂºÇÂ∏∏ if (Thread.interrupted()) &#123; throw new InterruptedException(); &#125; &#125; &#125; finally &#123; if (failed) &#123; cancelAcquire(node); &#125; &#125;&#125; ÊµÅÁ®ãÂêåÂâçÈù¢‰∏§ÁßçËé∑ÂèñÈîÅÁöÑÊñπÂºèÔºå‰∏ªË¶ÅÊòØÁêÜËß£Ë∂ÖÊó∂ÁöÑÊú∫Âà∂ÊòØÊÄéÊ†∑ÁöÑ„ÄÇÂ¶ÇÊûúÁ¨¨‰∏ÄÊ¨°Ëé∑ÂèñÈîÅÂ§±Ë¥•‰ºöË∞ÉÁî®doAcquireSharedNanosÊñπÊ≥ïÂπ∂‰º†ÂÖ•Ë∂ÖÊó∂Êó∂Èó¥ÔºåËøõÂÖ•ÊñπÊ≥ïÂêé‰ºöÊ†πÊçÆÊÉÖÂÜµÂÜçÊ¨°ÂéªËé∑ÂèñÈîÅÔºåÂ¶ÇÊûúÂÜçÊ¨°Ëé∑ÂèñÂ§±Ë¥•Â∞±Ë¶ÅËÄÉËôëÂ∞ÜÁ∫øÁ®ãÊåÇËµ∑‰∫Ü„ÄÇËøôÊó∂‰ºöÂà§Êñ≠Ë∂ÖÊó∂Êó∂Èó¥ÊòØÂê¶Â§ß‰∫éËá™ÊóãÊó∂Èó¥ÔºåÂ¶ÇÊûúÊòØÁöÑËØùÂ∞±‰ºöÂ∞ÜÁ∫øÁ®ãÊåÇËµ∑‰∏ÄÊÆµÊó∂Èó¥ÔºåÂê¶ÂàôÂ∞±ÁªßÁª≠Â∞ùËØïËé∑ÂèñÔºåÊØèÊ¨°Ëé∑ÂèñÈîÅ‰πãÂêéÈÉΩ‰ºöÂ∞ÜË∂ÖÊó∂Êó∂Èó¥ÂáèÂéªËé∑ÂèñÈîÅÁöÑÊó∂Èó¥Ôºå‰∏ÄÁõ¥ËøôÊ†∑Âæ™ÁéØÁõ¥Âà∞Ë∂ÖÊó∂Êó∂Èó¥Áî®Â∞ΩÔºåÂ¶ÇÊûúËøòÊ≤°ÊúâËé∑ÂèñÂà∞ÈîÅÁöÑËØùÂ∞±‰ºöÁªìÊùüËé∑ÂèñÂπ∂ËøîÂõûËé∑ÂèñÂ§±Ë¥•Ê†áËØÜ„ÄÇÂú®Êï¥‰∏™ÊúüÈó¥Á∫øÁ®ãÊòØÂìçÂ∫îÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑ„ÄÇ ÂÖ±‰∫´Ê®°Âºè‰∏ãÈáäÊîæÈîÅ 1234567891011121314151617181920212223242526272829303132333435363738394041424344//ÈáäÊîæÈîÅÁöÑÊìç‰Ωú(ÂÖ±‰∫´Ê®°Âºè)public final boolean releaseShared(int arg) &#123; //1.Â∞ùËØïÂéªÈáäÊîæÈîÅ if (tryReleaseShared(arg)) &#123; //2.Â¶ÇÊûúÈáäÊîæÊàêÂäüÂ∞±Âî§ÈÜíÂÖ∂‰ªñÁ∫øÁ®ã doReleaseShared(); return true; &#125; return false;&#125;//Â∞ùËØïÂéªÈáäÊîæÈîÅ(ÂÖ±‰∫´Ê®°Âºè)protected boolean tryReleaseShared(int arg) &#123; throw new UnsupportedOperationException();&#125;//ÈáäÊîæÈîÅÁöÑÊìç‰Ωú(ÂÖ±‰∫´Ê®°Âºè)private void doReleaseShared() &#123; for (;;) &#123; //Ëé∑ÂèñÂêåÊ≠•ÈòüÂàóÁöÑheadÁªìÁÇπ Node h = head; //Âà§Êñ≠ÈòüÂàó‰∏≠ÊòØÂê¶ÊúâÁªìÁÇπ if (h != null &amp;&amp; h != tail) &#123; //Ëé∑ÂèñheadÁªìÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅ int ws = h.waitStatus; //Â¶ÇÊûúheadÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫SIGNAL, Ë°®ÊòéÂêéÈù¢Êúâ‰∫∫Âú®ÊéíÈòü if (ws == Node.SIGNAL) &#123; //ÂÖàÊääheadÁªìÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅÊõ¥Êñ∞‰∏∫0ÔºàÊúâ‰∏§‰∏™Âú∞ÊñπË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ïÔºâ if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0)) &#123; continue; &#125; //ÂÜçÂéªÂî§ÈÜíÂêéÁªßÁªìÁÇπ unparkSuccessor(h); //Â¶ÇÊûúheadÁªìÁÇπÁöÑÁä∂ÊÄÅ‰∏∫0, Ë°®ÊòéÊ≠§Êó∂ÂêéÈù¢Ê≤°‰∫∫Âú®ÊéíÈòü, Â∞±Âè™ÊòØÂ∞ÜheadÁä∂ÊÄÅ‰øÆÊîπ‰∏∫PROPAGATE &#125;else if (ws == 0 &amp;&amp; !compareAndSetWaitStatus(h, 0, Node.PROPAGATE)) &#123; continue; &#125; &#125; //Âè™Êúâ‰øùËØÅÊúüÈó¥headÁªìÁÇπÊ≤°Ë¢´‰øÆÊîπËøáÊâçËÉΩË∑≥Âá∫Âæ™ÁéØ if (h == head) &#123; break; &#125; &#125;&#125; Á∫øÁ®ãÂú®ÊàøÈó¥ÂäûÂÆå‰∫ã‰πãÂêéÂ∞±‰ºöË∞ÉÁî®releaseSharedÊñπÊ≥ïÈáäÊîæÈîÅÔºåÈ¶ñÂÖàË∞ÉÁî®tryReleaseSharedÊñπÊ≥ïÂ∞ùËØïÈáäÊîæÈîÅÔºåËØ•ÊñπÊ≥ïÁöÑÂà§Êñ≠ÈÄªËæëÁî±Â≠êÁ±ªÂÆûÁé∞„ÄÇÂ¶ÇÊûúÈáäÊîæÊàêÂäüÂ∞±Ë∞ÉÁî®doReleaseSharedÊñπÊ≥ïÂéªÂî§ÈÜíÂêéÁªßÁªìÁÇπ„ÄÇËµ∞Âá∫ÊàøÈó¥ÂêéÂÆÉ‰ºöÊâæÂà∞ÂéüÂÖàÁöÑÂ∫ß‰Ωç(headÁªìÁÇπ)ÔºåÁúãÁúãÂ∫ß‰Ωç‰∏äÊòØÂê¶Êúâ‰∫∫Áïô‰∫ÜÂ∞èÁ∫∏Êù°(Áä∂ÊÄÅ‰∏∫SIGNAL)ÔºåÂ¶ÇÊûúÊúâÂ∞±ÂéªÂî§ÈÜíÂêéÁªßÁªìÁÇπ„ÄÇÂ¶ÇÊûúÊ≤°Êúâ(Áä∂ÊÄÅ‰∏∫0)Â∞±‰ª£Ë°®ÈòüÂàóÊ≤°‰∫∫Âú®ÊéíÈòüÔºåÈÇ£‰πàÂú®Á¶ªÂºÄ‰πãÂâçÂÆÉËøòË¶ÅÂÅöÊúÄÂêé‰∏Ä‰ª∂‰∫ãÊÉÖÔºåÂ∞±ÊòØÂú®Ëá™Â∑±Â∫ß‰Ωç‰∏äÁïô‰∏ãÂ∞èÁ∫∏Êù°(Áä∂ÊÄÅËÆæÁΩÆ‰∏∫PROPAGATE)ÔºåÂëäËØâÂêéÈù¢ÁöÑ‰∫∫ÈîÅÁöÑËé∑ÂèñÁä∂ÊÄÅÔºåÊï¥‰∏™ÈáäÊîæÈîÅÁöÑËøáÁ®ãÂíåÁã¨Âç†Ê®°ÂºèÂîØ‰∏ÄÁöÑÂå∫Âà´Â∞±ÊòØÂú®ËøôÊúÄÂêé‰∏ÄÊ≠•Êìç‰Ωú„ÄÇ &lt;font color=&quot;red&quot;&gt;PSÔºö&lt;/font&gt;‰∏äÈù¢ËØ¥‰∫ÜdoReleaseShared()ÁöÑ‰ª£Á†ÅÊµÅÁ®ãÔºåËøô‰∏™ÊñπÊ≥ïÊúâ‰∏§Â§ÑÂú∞ÊñπË∞ÉÁî®Ôºö Á¨¨‰∏ÄÂ§ÑË∞ÉÁî®ÁöÑÂú∞ÊñπÔºöÂàöÂàöÈáäÊîæËµÑÊ∫êÁöÑËÄÅÁöÑheadË∞ÉÁî®ÔºåÂú®‰ª£Á†Å‰∏≠Â∞±ÊòØreleaseShared()ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®„ÄÇ Á¨¨‰∫åÂ§ÑË∞ÉÁî®ÁöÑÂú∞ÊñπÔºöÂàöÂàöËÆæÁΩÆÊñ∞ÁöÑÂ§¥ÁªìÁÇπheadË∞ÉÁî®ÔºåÂú®‰ª£Á†Å‰∏≠Â∞±ÊòØsetHeadAndPropagate()ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®„ÄÇ ‰∏äÈù¢ÁöÑÊñπÊ≥ïÁúãÂà∞headËäÇÁÇπÁöÑÁä∂ÊÄÅË¶Å‰πàÊòØSIGNAL(SIGNAL‚Äî‚Äî&gt;0),Ë¶Å‰πàÊòØ0(0‚Äî‚Äî&gt;PROPAGATE)ÔºåËøô‰∫õÁä∂ÊÄÅÊÄéÊ†∑Êù•ÁöÑÔºü Áä∂ÊÄÅ‰∏∫SIGNALÁöÑÁî±Êù•ÔºöÂ§¥ÁªìÁÇπÁöÑÂêéÁªßËäÇÁÇπË¢´ÊåÇËµ∑‰∫ÜÔºåÊåÇËµ∑ÁöÑÂêåÊó∂‰ºöÂ∞ÜÂÆÉÁöÑÂâçÈ©±ËäÇÁÇπÁä∂ÊÄÅÁΩÆ‰∏∫SIGNALÔºå‰ª•‰æø‰∫éË¢´Âî§ÈÜí„ÄÇ Áä∂ÊÄÅ‰∏∫0ÁöÑÁî±Êù•ÔºöËøô‰∏™Áä∂ÊÄÅÊòØÈªòËÆ§Áä∂ÊÄÅÔºåÂêéÁªßËäÇÁÇπÊ≤°ÊúâË¢´ÊåÇËµ∑Â∞±Â∞ùËØïËé∑ÂèñËµÑÊ∫êÊàêÂäü‰∫ÜÔºåÊ≠§Êó∂Âπ∂Ê≤°ÊúâË∞ÉÁî®Âà§Êñ≠ÊåÇËµ∑ÁöÑÊñπÊ≥ïÔºåÊâÄ‰ª•Â§¥ÁªìÁÇπÁöÑÁä∂ÊÄÅÊ≤°ÊúâÂèòÂåñ„ÄÇ Á¨¨‰∏Ä‰∏™ÂàÜÊûêÁöÑÈáçÁÇπÔºöÂ¶ÇÊûúÂè™ÊúâÂàöÂàöÈáäÊîæËµÑÊ∫êÁöÑËÄÅÁöÑheadË∞ÉÁî®‰∫ÜÊ≠§ÊñπÊ≥ïÔºåËøô‰∏™Êó∂ÂÄôÊ≤°ÊúâÁ´û‰∫âÔºåÂ¶ÇÊûúÂ§¥ÁªìÁÇπheadÁöÑwaitStatusÁ≠â‰∫éSIGNALÔºåÂàôÈ¶ñÂÖàÂ∞ÜSIGNAL‚Äî‚Äî&gt;0,Â¶ÇÊûúÊàêÂäüÂàôË∞ÉÁî®unparkSuccessor()ÊñπÊ≥ïÂî§ÈÜí‰∏ã‰∏Ä‰∏™ËäÇÁÇπ„ÄÇÂ¶ÇÊûúÂ§¥ÁªìÁÇπheadÁöÑwaitStatusÁ≠â‰∫é0ÔºåÂàôÂ∞Ü0‚Äî‚Äî&gt;PROPAGATE,‰∏çÊàêÂäüÂàôÁªßÁª≠Âæ™ÁéØ„ÄÇ Á¨¨‰∫å‰∏™ÂàÜÊûêÁöÑÈáçÁÇπÔºöÂ¶ÇÊûúÂàöÂàöÈáäÊîæËµÑÊ∫êÁöÑËÄÅheadÔºåÂíåÂàöËé∑ÂèñËµÑÊ∫êËÆæÁΩÆÊñ∞ÁöÑÂ§¥ÁªìÁÇπÁöÑheadÂêåÊó∂Ë∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ïÔºåÈÇ£‰πà‰∏§ËÄÖËé∑ÂèñÁöÑheadÂèØËÉΩÊúâÊâÄ‰∏çÂêåÔºåÂâçËÄÖËÄÅheadËé∑ÂèñÁöÑhÂèØËÉΩÊòØËá™Â∑±Ôºå‰πüÂèØËÉΩÊòØÊñ∞ÁöÑheadÔºåÂêéËÄÖÊñ∞headËé∑ÂèñÁöÑh‰∏ÄÂÆöÊòØËá™Â∑±„ÄÇ‰ΩÜÊòØ‰∏çÁÆ°headËé∑ÂèñÁöÑÊòØËÄÅÁöÑÔºåËøòÊòØÊñ∞ÁöÑÔºåÈÉΩËÉΩÂ§üÈ°∫Âà©ÁöÑÂî§ÈÜí‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºåÂè™‰∏çËøáÂèØËÉΩÂ§öÂî§ÈÜí‰∏ÄÊ¨°ËÄåÂ∑≤ÔºåËøôÂπ∂‰∏çÂΩ±ÂìçÁªìÊûú„ÄÇ Á¨¨‰∏â‰∏™ÂàÜÊûêÁöÑÈáçÁÇπÔºöÊúÄÂêé‰∏∫‰ªÄ‰πà‰ºöÂà§Êñ≠h==headÔºüÂ¶ÇÊûúÂ§¥ÁªìÁÇπheadÂèëÁîüÂèòÂåñÔºåÂèØËÉΩÂÖ∂‰ªñÁ∫øÁ®ãËé∑Âèñ‰∫ÜËµÑÊ∫êÊääheadÊîπÂèò‰∫ÜÔºå‰∏∫‰∫Ü‰ΩøËá™Â∑±ÁöÑÂî§ÈÜíÂä®‰Ωú‰º†ÈÄíÔºåÂøÖÈ°ªÈáçËØï„ÄÇ ÂÖ∂ÂÆûdoReleaseShared()ÊñπÊ≥ïÂ∞±ÊòØËÉΩÂ§ü‰øùËØÅÂî§ÈÜí‰∏ãÈù¢ÁöÑËäÇÁÇπÔºåÂπ∂‰∏îËÉΩÂ§ü‰º†ÈÄí‰∏ãÂéª„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂπ∂Âèë-AQSÊ∫êÁ†ÅÂàÜÊûê‰πãÊ¶ÇË¶ÅÂàÜÊûê]]></title>
    <url>%2Fposts%2F115e562c.html</url>
    <content type="text"><![CDATA[AbstractQueuedSynchronizerÊòØÂÅö‰ªÄ‰πàÁöÑ java.util.concurrentËøô‰∏™ÂåÖ‰∏ãÊúâÂæàÂ§öÁ±ªÔºåÊØîÂ¶ÇReentrantLock„ÄÅCountDownLatch„ÄÅCyclicBarrrier„ÄÅSemaphoreÁ≠âÔºåÂÆÉ‰ª¨ÁöÑÂÆûÁé∞‰∏≠ÈÉΩÊúâ‰∏Ä‰∏™ÂÜÖÈÉ®Á±ªSyncÔºåËøô‰∏™Á±ªÁªßÊâø‰∫ÜAbstractQueuedSynchronizerÔºàÁÆÄÁß∞AQSÔºâÔºåÊâÄÊúâÁöÑÈîÅÊú∫Âà∂ÁöÑÂÆûÁé∞ÈÉΩ‰æùËµñ‰∫éSyncÂÜÖÈÉ®Á±ªÔºå‰πüÂèØ‰ª•ËØ¥Ëøô‰∫õÁ±ªÁöÑÂÆûÁé∞Â∞±ÊòØ‰æùËµñ‰∫éAQS„ÄÇ ÈÇ£‰πàAQSÂÜÖÈÉ®Âà∞Â∫ïÂÆûÁé∞‰∫Ü‰ªÄ‰πà‰ª•Ëá≥‰∫éËøô‰∫õÁ±ªÈÉΩË¶Å‰æùËµñ‰∫éÂÆÉÂë¢ÔºüÂèØ‰ª•ËøôÊ†∑ËØ¥ÔºåAQS‰∏∫Ëøô‰∫õÁ±ªÊèê‰æõ‰∫ÜÂü∫Á°ÄËÆæÊñΩÔºå‰πüÂ∞±ÊòØÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÂØÜÁ†ÅÈîÅÔºåËøô‰∫õÁ±ªÊã•Êúâ‰∫ÜÂØÜÁ†ÅÈîÅ‰πãÂêéÂèØ‰ª•Ëá™Â∑±Êù•ËÆæÁΩÆÂØÜÁ†ÅÈîÅÁöÑÂØÜÁ†Å„ÄÇÊ≠§Â§ñÔºåAQSËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÊéíÈòüÂå∫ÔºåÂπ∂‰∏îÊèê‰æõ‰∫Ü‰∏Ä‰∏™Á∫øÁ®ãËÆ≠ÂØºÂëòÔºåÊàë‰ª¨Áü•ÈÅìÁ∫øÁ®ãÂ∞±ÂÉè‰∏Ä‰∏™ÂéüÂßãÁöÑÈáéËõÆ‰∫∫ÔºåÂÆÉ‰∏çÊáÇÂæóËÆ≤Á§ºË≤åÔºåÂÆÉÂè™‰ºöÊ®™ÂÜ≤Áõ¥ÊíûÔºåÊâÄ‰ª•‰Ω†Âæó‰∏ÄÊ≠•‰∏ÄÊ≠•ÂéªÊïôÂÆÉÔºåÂëäËØâÂÆÉ‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶ÅÂéªÊéíÈòü‰∫ÜÔºåË¶ÅÂà∞Âì™ÈáåÂéªÊéíÈòüÔºåÊéíÈòüÂâçË¶ÅÂÅö‰∫õ‰ªÄ‰πàÔºåÊéíÈòüÂêéË¶ÅÂÅö‰∫õ‰ªÄ‰πà„ÄÇËøô‰∫õÊïôÂåñÂ∑•‰ΩúÂÖ®ÈÉ®ÈÉΩÁî±AQSÂ∏Æ‰Ω†ÂÆåÊàê‰∫ÜÔºå‰ªéÂÆÉËøôÈáåÊïôÂåñÂá∫Êù•ÁöÑÁ∫øÁ®ãÈÉΩÂèòÁöÑÈùûÂ∏∏ÊñáÊòéÊáÇÁ§ºË≤åÔºå‰∏çÂÜçÊòØÂéüÂßãÁöÑÈáéËõÆ‰∫∫ÔºåÊâÄ‰ª•‰ª•ÂêéÊàë‰ª¨Âè™ÈúÄË¶ÅÂíåËøô‰∫õÊñáÊòéÁöÑÁ∫øÁ®ãÊâì‰∫§ÈÅìÂ∞±Ë°å‰∫ÜÔºåÂçÉ‰∏á‰∏çË¶ÅÂíåÂéüÂßãÁ∫øÁ®ãÊúâËøáÂ§öÁöÑÊé•Ëß¶ÔºÅ ‰∏∫‰ΩïËØ¥AQSÊèê‰æõ‰∫Ü‰∏ÄÊääÂØÜÁ†ÅÈîÅ 1234567891011121314151617181920212223//ÂêåÊ≠•ÈòüÂàóÁöÑÂ§¥ÁªìÁÇπprivate transient volatile Node head; //ÂêåÊ≠•ÈòüÂàóÁöÑÂ∞æÁªìÁÇπprivate transient volatile Node tail;//ÂêåÊ≠•Áä∂ÊÄÅprivate volatile int state;//Ëé∑ÂèñÂêåÊ≠•Áä∂ÊÄÅprotected final int getState() &#123; return state;&#125;//ËÆæÁΩÆÂêåÊ≠•Áä∂ÊÄÅprotected final void setState(int newState) &#123; state = newState;&#125;//‰ª•CASÊñπÂºèËÆæÁΩÆÂêåÊ≠•Áä∂ÊÄÅprotected final boolean compareAndSetState(int expect, int update) &#123; return unsafe.compareAndSwapInt(this, stateOffset, expect, update);&#125; ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂàóÂá∫‰∫ÜAQSÁöÑÊâÄÊúâÊàêÂëòÂèòÈáèÔºåÂèØ‰ª•ÁúãÂà∞AQSÁöÑÊàêÂëòÂèòÈáèÂè™Êúâ‰∏â‰∏™ÔºåÂàÜÂà´ÊòØÂêåÊ≠•ÈòüÂàóÂ§¥ÁªìÁÇπÂºïÁî®ÔºåÂêåÊ≠•ÈòüÂàóÂ∞æÁªìÁÇπÂºïÁî®‰ª•ÂèäÂêåÊ≠•Áä∂ÊÄÅ„ÄÇ Ê≥®ÊÑèÔºåËøô‰∏â‰∏™ÊàêÂëòÂèòÈáèÈÉΩ‰ΩøÁî®‰∫ÜvolatileÂÖ≥ÈîÆÂ≠óËøõË°å‰øÆÈ•∞ÔºåËøôÂ∞±Á°Æ‰øù‰∫ÜÂ§ö‰∏™Á∫øÁ®ãÂØπÂÆÉÁöÑ‰øÆÊîπÈÉΩÊòØÂÜÖÂ≠òÂèØËßÅÁöÑ„ÄÇ Êï¥‰∏™Á±ªÁöÑÊ†∏ÂøÉÂ∞±ÊòØËøô‰∏™ÂêåÊ≠•Áä∂ÊÄÅÔºåÂèØ‰ª•ÁúãÂà∞ÂêåÊ≠•Áä∂ÊÄÅÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™intÂûãÁöÑÂèòÈáèÔºåÂ§ßÂÆ∂ÂèØ‰ª•ÊääËøô‰∏™ÂêåÊ≠•Áä∂ÊÄÅÁúãÊàê‰∏Ä‰∏™ÂØÜÁ†ÅÈîÅÔºåËÄå‰∏îËøòÊòØ‰ªéÊàøÈó¥ÈáåÈù¢ÈîÅËµ∑Êù•ÁöÑÂØÜÁ†ÅÈîÅÔºåstateÂÖ∑‰ΩìÁöÑÂÄºÂ∞±Áõ∏ÂΩì‰∫éÂØÜÁ†ÅÊéßÂà∂ÁùÄÂØÜÁ†ÅÈîÅÁöÑÂºÄÂêà„ÄÇ ÂΩìÁÑ∂Ëøô‰∏™ÈîÅÁöÑÂØÜÁ†ÅÊòØÂ§öÂ∞ëÂ∞±Áî±ÂêÑ‰∏™Â≠êÁ±ªÊù•ËßÑÂÆö‰∫ÜÔºå‰æãÂ¶ÇÂú®ReentrantLock‰∏≠ÔºåstateÁ≠â‰∫é0Ë°®Á§∫ÈîÅÊòØÂºÄÁöÑÔºåstateÂ§ß‰∫é0Ë°®Á§∫ÈîÅÊòØÈîÅÁùÄÁöÑÔºåËÄåÂú®Semaphore‰∏≠ÔºåstateÂ§ß‰∫é0Ë°®Á§∫ÈîÅÊòØÂºÄÁöÑÔºåstateÁ≠â‰∫é0Ë°®Á§∫ÈîÅÊòØÈîÅÁùÄÁöÑ„ÄÇ AQSÁöÑÊéíÈòüÂå∫ÊòØÊÄéÊ†∑ÂÆûÁé∞ÁöÑ AQSÂÜÖÈÉ®ÂÖ∂ÂÆûÊúâ‰∏§‰∏™ÊéíÈòüÂå∫Ôºå‰∏Ä‰∏™ÊòØÂêåÊ≠•ÈòüÂàóÔºå‰∏Ä‰∏™ÊòØÊù°‰ª∂ÈòüÂàó„ÄÇ‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºåÂêåÊ≠•ÈòüÂàóÂè™Êúâ‰∏ÄÊù°ÔºåËÄåÊù°‰ª∂ÈòüÂàóÂèØ‰ª•ÊúâÂ§öÊù°„ÄÇÂêåÊ≠•ÈòüÂàóÁöÑÁªìÁÇπÂàÜÂà´ÊåÅÊúâÂâçÂêéÁªìÁÇπÁöÑÂºïÁî®ÔºåËÄåÊù°‰ª∂ÈòüÂàóÁöÑÁªìÁÇπÂè™Êúâ‰∏Ä‰∏™ÊåáÂêëÂêéÁªßÁªìÁÇπÁöÑÂºïÁî®„ÄÇÂõæ‰∏≠TË°®Á§∫Á∫øÁ®ãÔºåÊØè‰∏™ÁªìÁÇπÂåÖÂê´‰∏Ä‰∏™Á∫øÁ®ãÔºåÁ∫øÁ®ãÂú®Ëé∑ÂèñÈîÅÂ§±Ë¥•ÂêéÈ¶ñÂÖàËøõÂÖ•ÂêåÊ≠•ÈòüÂàóÊéíÈòüÔºåËÄåÊÉ≥Ë¶ÅËøõÂÖ•Êù°‰ª∂ÈòüÂàóËØ•Á∫øÁ®ãÂøÖÈ°ªÊåÅÊúâÈîÅÊâçË°å„ÄÇÊé•‰∏ãÊù•ÁúãÁúãÈòüÂàó‰∏≠ÊØè‰∏™ÁªìÁÇπÁöÑÁªìÊûÑ„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172//ÂêåÊ≠•ÈòüÂàóÁöÑÁªìÁÇπstatic final class Node &#123; static final Node SHARED = new Node(); //Ë°®Á§∫ÂΩìÂâçÁ∫øÁ®ã‰ª•ÂÖ±‰∫´Ê®°ÂºèÊåÅÊúâÈîÅ static final Node EXCLUSIVE = null; //Ë°®Á§∫ÂΩìÂâçÁ∫øÁ®ã‰ª•Áã¨Âç†Ê®°ÂºèÊåÅÊúâÈîÅ static final int CANCELLED = 1; //Ë°®Á§∫ÂΩìÂâçÁªìÁÇπÂ∑≤ÁªèÂèñÊ∂àËé∑ÂèñÈîÅ static final int SIGNAL = -1; //Ë°®Á§∫ÂêéÁªßÁªìÁÇπÁöÑÁ∫øÁ®ãÈúÄË¶ÅËøêË°å static final int CONDITION = -2; //Ë°®Á§∫ÂΩìÂâçÁªìÁÇπÂú®Êù°‰ª∂ÈòüÂàó‰∏≠ÊéíÈòü static final int PROPAGATE = -3; //Ë°®Á§∫ÂêéÁªßÁªìÁÇπÂèØ‰ª•Áõ¥Êé•Ëé∑ÂèñÈîÅ(PROPAGATE‰∏∫‰∏ã‰∏Ä‰∏™acquireSharedÊó†Êù°‰ª∂‰º†Êí≠ÁöÑÁä∂ÊÄÅÔºåÁî®‰∫éÂÖ±‰∫´Ê®°Âºè) volatile int waitStatus; //Ë°®Á§∫ÂΩìÂâçÁªìÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅÔºàÈªòËÆ§ÂÄº‰∏∫0Ôºâ volatile Node prev; //Ë°®Á§∫ÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑÂâçÈ©±ÁªìÁÇπ volatile Node next; //Ë°®Á§∫ÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑÂêéÁªßÁªìÁÇπ volatile Thread thread; //ÂΩìÂâçÁªìÁÇπÊåÅÊúâÁöÑÁ∫øÁ®ãÂºïÁî® Node nextWaiter; //Ë°®Á§∫Êù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÂêéÁªßÁªìÁÇπ /** * ÂΩìÂâçÁªìÁÇπÁä∂ÊÄÅÊòØÂê¶ÊòØÂÖ±‰∫´Ê®°Âºè */ final boolean isShared() &#123; return nextWaiter == SHARED; &#125; /** * ËøîÂõûÂΩìÂâçÁªìÁÇπÁöÑÂâçÈ©±ÁªìÁÇπ */ final Node predecessor() throws NullPointerException &#123; Node p = prev; if (p == null) &#123; throw new NullPointerException(); &#125; else &#123; return p; &#125; &#125; /** * Á©∫ÊûÑÈÄ†ÂáΩÊï∞Ôºö‰∏ªË¶ÅÁî®‰∫éÂàùÂßãÂåñÂ§¥ÁªìÁÇπ(head)ÊàñËÄÖÂàõÂª∫ÂÖ±‰∫´Ê®°Âºè */ Node() &#123;&#125; /** * ÈªòËÆ§Áî®Ëøô‰∏™ÊûÑÈÄ†Âô®Ôºà‰∏ªË¶ÅÁî®‰∫éÊääËäÇÁÇπÊ∑ªÂä†Âà∞ÈòüÂàó‰∏≠Ôºâ * * @param thread ÂΩìÂâçÁ∫øÁ®ã * @param mode ÁªìÁÇπÊ®°Âºè */ Node(Thread thread, Node mode) &#123; //Ê≥®ÊÑèÊåÅÊúâÊ®°ÂºèÊòØËµãÂÄºÁªônextWaiter this.nextWaiter = mode; this.thread = thread; &#125; /** * Âè™Âú®Êù°‰ª∂ÈòüÂàó‰∏≠Áî®Âà∞ * * @param thread ÂΩìÂâçÁ∫øÁ®ã * @param waitStatus ÁªìÁÇπÁä∂ÊÄÅ */ Node(Thread thread, int waitStatus) &#123; this.waitStatus = waitStatus; this.thread = thread; &#125;&#125; Node‰ª£Ë°®ÂêåÊ≠•ÈòüÂàóÂíåÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑ‰∏Ä‰∏™ÁªìÁÇπÔºåÂÆÉÊòØAQSÁöÑÂÜÖÈÉ®Á±ª„ÄÇNodeÊúâÂæàÂ§öÂ±ûÊÄßÔºåÊØîÂ¶ÇÊåÅÊúâÊ®°ÂºèÔºåÁ≠âÂæÖÁä∂ÊÄÅÔºåÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑÂâçÈ©±ÂíåÂêéÁªßÔºå‰ª•ÂèäÊù°‰ª∂ÈòüÂàó‰∏≠ÁöÑÂêéÁªßÂºïÁî®Á≠âÁ≠â„ÄÇÂèØ‰ª•ÊääÂêåÊ≠•ÈòüÂàóÂíåÊù°‰ª∂ÈòüÂàóÁúãÊàêÊòØÊéíÈòüÂå∫ÔºåÊØè‰∏™ÁªìÁÇπÁúãÊàêÊòØÊéíÈòüÂå∫ÁöÑÂ∫ß‰ΩçÔºåÂ∞ÜÁ∫øÁ®ãÁúãÊàêÊòØÊéíÈòüÁöÑÂÆ¢‰∫∫„ÄÇÂÆ¢‰∫∫ÂàöÊù•Êó∂‰ºöÂÖàÂéªÊï≤Êï≤Èó®ÔºåÁúãÁúãÈîÅÊúâÊ≤°ÊúâÂºÄÔºåÂ¶ÇÊûúÈîÅÊ≤°ÂºÄÂÆÉÂ∞±‰ºöÂéªÊéíÈòüÂå∫È¢ÜÂèñ‰∏Ä‰∏™Âè∑Á†ÅÁâåÔºåÂ£∞ÊòéËá™Â∑±ÊÉ≥Ë¶Å‰ª•‰ªÄ‰πàÊ†∑ÁöÑÊñπÂºèÊù•ÊåÅÊúâÈîÅÔºåÊúÄÂêéÂÜçÂà∞ÈòüÂàóÁöÑÊú´Â∞æËøõË°åÊéíÈòü„ÄÇ ÊÄéÊ†∑ÁêÜËß£Áã¨Âç†Ê®°ÂºèÂíåÂÖ±‰∫´Ê®°Âºè ÂâçÈù¢ËÆ≤Âà∞ÊØè‰∏™ÂÆ¢‰∫∫Âú®ÊéíÈòüÂâç‰ºöÈ¢ÜÂèñ‰∏Ä‰∏™Âè∑Á†ÅÁâåÔºåÂ£∞ÊòéËá™Â∑±ÊÉ≥Ë¶Å‰ª•‰ªÄ‰πàÊ†∑ÁöÑÊñπÂºèÊù•Âç†ÊúâÈîÅÔºåÂç†ÊúâÈîÅÁöÑÊñπÂºèÂàÜ‰∏∫Áã¨Âç†Ê®°ÂºèÂíåÂÖ±‰∫´Ê®°ÂºèÔºåÈÇ£‰πàÊÄéÊ†∑Êù•ÁêÜËß£Áã¨Âç†Ê®°ÂºèÂíåÂÖ±‰∫´Ê®°ÂºèÂë¢ÔºüÊâì‰∏™ÊØîÊñπÔºåÂ§ßÂÆ∂ËÅîÊÉ≥‰∏Ä‰∏ãÂéªÈ£üÂ†ÇÂêÉÈ•≠ÔºåÊ≠£Â•ΩÊúâ‰∏Ä‰∏™Ê°åÂ≠êÁ©∫ÁùÄÔºåÁã¨Âç†Ê®°ÂºèÁöÑ‰∫∫ÊØîËæÉÈú∏ÈÅìÔºåËÄÅÂ≠êË¶Å‰πàÂ∞±‰∏çÂùêÔºåÂùê‰∏ãÊù•Â∞±‰∏çÂÖÅËÆ∏Âà´‰∫∫ÂùêÔºåËá™Â∑±‰∏Ä‰∏™‰∫∫Áã¨Ëá™Âç†Áî®Êï¥‰∏™Ê°åÂ≠ê„ÄÇÂÖ±‰∫´Ê®°ÂºèÁöÑ‰∫∫Â∞±Ê≤°ÈÇ£‰πàËÆ≤Á©∂‰∫ÜÔºåÂΩìÂÆÉÂèëÁé∞Ëøô‰∏™Ê°åÂ≠êÂèØ‰ª•Áî®ÔºåËá™Â∑±Âùê‰∏ãËøò‰∏çÁÆóÔºåËøòÂæóÁÉ≠ÂøÉÁöÑÈóÆ‰∏ãÂêéÈù¢ÁöÑ‰∫∫‰ªã‰∏ç‰ªãÊÑè‰∏ÄËµ∑ÔºåÂ¶ÇÊûúÂêéÈù¢ÁöÑ‰∫∫‰∏ç‰ªãÊÑè‰∏ÄËµ∑ÈÇ£Â∞±‰∏çÁî®ÂÜçÊéíÈòü‰∫ÜÔºå ÂΩìÁÑ∂Â¶ÇÊûúÂêéÈù¢ÁöÑ‰∫∫‰ªãÊÑèÈÇ£Â∞±Âè™Â•ΩÁïôÂú®ÈòüÂàóÈáåÁªßÁª≠ÊéíÈòü‰∫Ü„ÄÇ ÊÄéÊ†∑ÁêÜËß£ÁªìÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅ ÊØè‰∏™ÁªìÁÇπÈÉΩÊúâ‰∏Ä‰∏™Á≠âÂæÖÁä∂ÊÄÅÔºåËøô‰∏™Á≠âÂæÖÁä∂ÊÄÅÂàÜ‰∏∫CANCELLEDÔºåSIGNALÔºåCONDITIONÔºåPROPAGATEÂõõÁßçÁä∂ÊÄÅ„ÄÇÂèØ‰ª•Â∞ÜËøô‰∏™Á≠âÂæÖÁä∂ÊÄÅÁúã‰ΩúÊòØÊåÇÂú®Â∫ß‰ΩçÊóÅËæπÁöÑÁâåÂ≠êÔºåÊ†áËØÜÂΩìÂâçÂ∫ß‰Ωç‰∏äÁöÑ‰∫∫ÁöÑÁ≠âÂæÖÁä∂ÊÄÅ„ÄÇËøô‰∏™ÁâåÂ≠êÁöÑÁä∂ÊÄÅ‰∏ç‰ªÖËá™Â∑±ÂèØ‰ª•‰øÆÊîπÔºåÂÖ∂‰ªñ‰∫∫‰πüÂèØ‰ª•‰øÆÊîπ„ÄÇ‰æãÂ¶ÇÂΩìËøô‰∏™Á∫øÁ®ãÂú®ÊéíÈòüËøáÁ®ã‰∏≠Â∑≤ÁªèÊâìÁÆóÊîæÂºÉ‰∫ÜÔºåÂÆÉÂ∞±‰ºöÂ∞ÜËá™Â∑±Â∫ß‰Ωç‰∏äÁöÑÁâåÂ≠êËÆæÁΩÆ‰∏∫CANCELLEDÔºåËøôÊ†∑ÂÖ∂‰ªñ‰∫∫ÁúãÂà∞‰∫ÜÂ∞±ÂèØ‰ª•Â∞ÜÂÆÉÊ∏ÖÁêÜÂá∫ÈòüÂàó„ÄÇËøòÊúâ‰∏ÄÁßçÊÉÖÂÜµÊòØÔºåÂΩìÁ∫øÁ®ãÂú®Â∫ß‰Ωç‰∏äË¶ÅÁù°ÁùÄ‰πãÂâçÔºåÂÆÉÊÄïËá™Â∑±Áù°Ëøá‰∫ÜÂ§¥ÔºåÂ∞±‰ºöÂ∞ÜÂâçÈù¢‰ΩçÁΩÆ‰∏äÁöÑÁâåÂ≠êÊîπ‰∏∫SIGNALÔºåÂõ†‰∏∫ÊØè‰∏™‰∫∫Âú®Á¶ªÂºÄÈòüÂàóÂâçÈÉΩ‰ºöÂõûÂà∞Ëá™Â∑±Â∫ß‰Ωç‰∏äÁúã‰∏ÄÁúºÔºåÂ¶ÇÊûúÁúãÂà∞ÁâåÂ≠ê‰∏äÁä∂ÊÄÅ‰∏∫SIGNALÔºåÂÆÉÂ∞±‰ºöÂéªÂî§ÈÜí‰∏ã‰∏Ä‰∏™‰∫∫„ÄÇÂè™Êúâ‰øùËØÅÂâçÈù¢‰ΩçÁΩÆ‰∏äÁöÑÁâåÂ≠ê‰∏∫SIGNALÔºåÂΩìÂâçÁ∫øÁ®ãÊâç‰ºöÂÆâÂøÉÁöÑÁù°Âéª„ÄÇCONDITIONÁä∂ÊÄÅË°®Á§∫ËØ•Á∫øÁ®ãÂú®Êù°‰ª∂ÈòüÂàó‰∏≠ÊéíÈòüÔºåPROPAGATEÁä∂ÊÄÅÊèêÈÜíÂêéÈù¢Êù•ÁöÑÁ∫øÁ®ãÂèØ‰ª•Áõ¥Êé•Ëé∑ÂèñÈîÅÔºåËøô‰∏™Áä∂ÊÄÅÂè™Âú®ÂÖ±‰∫´Ê®°ÂºèÁî®Âà∞„ÄÇ ÁªìÁÇπËøõÂÖ•ÂêåÊ≠•ÈòüÂàóÊó∂‰ºöËøõË°åÂì™‰∫õÊìç‰Ωú 123456789101112131415161718192021222324//ÁªìÁÇπÂÖ•ÈòüÊìç‰Ωú, ËøîÂõûÂâç‰∏Ä‰∏™ÁªìÁÇπprivate Node enq(final Node node) &#123; for (;;) &#123; //Ëé∑ÂèñÂêåÊ≠•ÈòüÂàóÂ∞æÁªìÁÇπÂºïÁî® Node t = tail; //Â¶ÇÊûúÂ∞æÁªìÁÇπ‰∏∫Á©∫ËØ¥ÊòéÂêåÊ≠•ÈòüÂàóËøòÊ≤°ÊúâÂàùÂßãÂåñ if (t == null) &#123; //ÂàùÂßãÂåñÂêåÊ≠•ÈòüÂàó if (compareAndSetHead(new Node())) &#123; tail = head; &#125; &#125; else &#123; //1.ÊåáÂêëÂΩìÂâçÂ∞æÁªìÁÇπ node.prev = t; //2.ËÆæÁΩÆÂΩìÂâçÁªìÁÇπ‰∏∫Â∞æÁªìÁÇπ if (compareAndSetTail(t, node)) &#123; //3.Â∞ÜÊóßÁöÑÂ∞æÁªìÁÇπÁöÑÂêéÁªßÊåáÂêëÊñ∞ÁöÑÂ∞æÁªìÁÇπ t.next = node; //forÂæ™ÁéØÂîØ‰∏ÄÁöÑÂá∫Âè£ return t; &#125; &#125; &#125;&#125; Ê≥®ÊÑèÔºåÂÖ•ÈòüÊìç‰Ωú‰ΩøÁî®‰∏Ä‰∏™Ê≠ªÂæ™ÁéØÔºåÂè™ÊúâÊàêÂäüÂ∞ÜÁªìÁÇπÊ∑ªÂä†Âà∞ÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ®Êâç‰ºöËøîÂõûÔºåËøîÂõûÁªìÊûúÊòØÂêåÊ≠•ÈòüÂàóÂéüÂÖàÁöÑÂ∞æÁªìÁÇπ„ÄÇ‰∏ãÂõæÊºîÁ§∫‰∫ÜÊï¥‰∏™Êìç‰ΩúËøáÁ®ã„ÄÇ Ê∑ªÂä†Â∞æÁªìÁÇπÁöÑÈ°∫Â∫èÔºåÂàÜ‰∏∫‰∏âÊ≠•ÔºöÊåáÂêëÂ∞æÁªìÁÇπÔºåCASÊõ¥ÊîπÂ∞æÁªìÁÇπÔºåÂ∞ÜÊóßÂ∞æÁªìÁÇπÁöÑÂêéÁªßÊåáÂêëÂΩìÂâçÁªìÁÇπ„ÄÇÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠Ëøô‰∏âÊ≠•Êìç‰Ωú‰∏ç‰∏ÄÂÆöËÉΩ‰øùËØÅÂÆåÊàêÔºåÊâÄ‰ª•Âú®Ê∏ÖÁ©∫ÂêåÊ≠•ÈòüÂàóÊâÄÊúâÂ∑≤ÂèñÊ∂àÁöÑÁªìÁÇπËøô‰∏ÄÊìç‰Ωú‰∏≠Ôºå‰∏∫‰∫ÜÂØªÊâæÈùûÂèñÊ∂àÁä∂ÊÄÅÁöÑÁªìÁÇπÔºå‰∏çÊòØ‰ªéÂâçÂêëÂêéÈÅçÂéÜËÄåÊòØ‰ªéÂêéÂêëÂâçÈÅçÂéÜÁöÑ„ÄÇËøòÊúâÂ∞±ÊòØÊØè‰∏™ÁªìÁÇπËøõÂÖ•ÈòüÂàó‰∏≠Êó∂ÂÆÉÁöÑÁ≠âÂæÖÁä∂ÊÄÅÊòØ‰∏∫0ÔºåÂè™ÊúâÂêéÁªßÁªìÁÇπÁöÑÁ∫øÁ®ãÈúÄË¶ÅÊåÇËµ∑Êó∂Êâç‰ºöÂ∞ÜÂâçÈù¢ÁªìÁÇπÁöÑÁ≠âÂæÖÁä∂ÊÄÅÊîπ‰∏∫SIGNAL„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Áî±ÂâîÈô§Intellij‰∏≠MybatisÁöÑMapperËá™Âä®Ê≥®ÂÖ•Ë≠¶ÂëäÂºïÂÖ•ÂØπÊ≥®Ëß£ÁöÑÂ≠¶‰π†]]></title>
    <url>%2Fposts%2F8b9fb30a.html</url>
    <content type="text"><![CDATA[Ëµ∑Ê∫ê Áõ∏‰ø°‰ΩøÁî®MybatisÁöÑÂ∞è‰ºô‰ª¨‰∏ÄÂÆöÁªèÂ∏∏ÁºñÂÜôÁ±ª‰ººÂ¶Ç‰∏ãÁöÑ‰ª£Á†ÅÔºö ÂèØ‰ª•ÁúãÂà∞ userMapper ‰∏ãÊúâ‰∏™Á∫¢Ëâ≤Ë≠¶Âëä„ÄÇËôΩÁÑ∂‰ª£Á†ÅÊú¨Ë∫´Âπ∂Ê≤°ÊúâÈóÆÈ¢òÔºåËÉΩÊ≠£Â∏∏ËøêË°åÔºå‰ΩÜÊúâ‰∏™Ë≠¶ÂëäÊÄªÂΩíÊúâÁÇπÊÅ∂ÂøÉ„ÄÇÂÖàÁúã‰∏ãË≠¶Âëä‰ø°ÊÅØÔºö Spring team recommends: &quot;Always use constructor based dependency injection in your beans. Always use assertions for mandatory dependencies.&quot; ÂéüÂõ† ‰ºóÊâÄÂë®Áü•ÔºåIDEAÊòØÈùûÂ∏∏Êô∫ËÉΩÁöÑÔºåÂÆÉÂèØ‰ª•ÁêÜËß£SpringÁöÑ‰∏ä‰∏ãÊñá„ÄÇÁÑ∂ËÄå UserMapper Ëøô‰∏™Êé•Âè£ÊòØMybatisÁöÑÔºåIDEAÁêÜËß£‰∏ç‰∫Ü„ÄÇ ËÄå @Autowired Ê≥®Ëß£ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãË¶ÅÊ±Ç‰æùËµñÂØπË±°Ôºà‰πüÂ∞±ÊòØ userMapper ÔºâÂøÖÈ°ªÂ≠òÂú®„ÄÇËÄåIDEAËÆ§‰∏∫Ëøô‰∏™ÂØπË±°ÁöÑÂÆû‰æã/‰ª£ÁêÜÊòØ‰∏™nullÔºåÊâÄ‰ª•Â∞±ÂèãÂ•ΩÂú∞Áªô‰∏™ÊèêÁ§∫„ÄÇÊåâÁÖßÊèêÁ§∫‰øÆÊîπÂ¶Ç‰∏ãÔºö 123456private final UserMapper userMapper;@Autowiredpublic UserServiceImpl(UserMapper userMapper) &#123; this.userMapper = userMapper;&#125; Ê≠§Êó∂‰ªçÁÑ∂Â≠òÂú®‰∏Ä‰∏™ÈóÆÈ¢òÔºö 1Could not autowire. Ëá™Âä®Ê≥®ÂÖ• beanÔºå springÂ∏ÆÂä©Êàë‰ª¨ÂÆåÊàê‰∫ÜÔºå‰ΩÜÊòØÂêåÊó∂SpringÊèê‰æõ‰∫Ü‰∏Ä‰∫õÊ≥®Ëß£Êù•ÊòæÂºèÁöÑÊ≥®Êòébean‰πãÈó¥ÁöÑÂºïÁî®ÂÖ≥Á≥ªÔºåÂÖ∂‰∏≠ÊúÄ‰∏∫ÁÜüÁü•ÁöÑËá™ÁÑ∂ÊòØ@Controller,@Service,@Repository,@ComponentÁ≠â„ÄÇ ËøôÈáåÂÖ∂ÂÆûÁªôUserMapperÊé•Âè£Âä†‰∏ä@Repository,@ComponentÂ∞±ÂèØ‰ª•Ëß£ÂÜ≥ÔºåÈÇ£‰πà‰ªñ‰ª¨‰πãÈó¥Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü Âå∫Âà´ Spring‰∏ç‰ΩÜÊîØÊåÅËá™Â∑±ÂÆö‰πâÁöÑ@AutowiredÊ≥®Ëß£ÔºåËøòÊîØÊåÅÂá†‰∏™Áî±JSR-250ËßÑËåÉÂÆö‰πâÁöÑÊ≥®Ëß£ÔºåÂÆÉ‰ª¨ÂàÜÂà´ÊòØ@Resource„ÄÅ@PostConstruct‰ª•Âèä@PreDestroy„ÄÇ @ResourceÁöÑ‰ΩúÁî®Áõ∏ÂΩì‰∫é@AutowiredÔºåÂè™‰∏çËøá@AutowiredÊåâbyTypeËá™Âä®Ê≥®ÂÖ•ÔºåËÄå@ResourceÈªòËÆ§Êåâ byNameËá™Âä®Ê≥®ÂÖ•ÁΩ¢‰∫Ü„ÄÇ@ResourceÊúâ‰∏§‰∏™Â±ûÊÄßÊòØÊØîËæÉÈáçË¶ÅÁöÑÔºåÂàÜÊòØnameÂíåtypeÔºåSpringÂ∞Ü@ResourceÊ≥®Ëß£ÁöÑnameÂ±ûÊÄßËß£Êûê‰∏∫beanÁöÑÂêçÂ≠óÔºåËÄåtypeÂ±ûÊÄßÂàôËß£Êûê‰∏∫beanÁöÑÁ±ªÂûã„ÄÇÊâÄ‰ª•Â¶ÇÊûú‰ΩøÁî®nameÂ±ûÊÄßÔºåÂàô‰ΩøÁî®byNameÁöÑËá™Âä®Ê≥®ÂÖ•Á≠ñÁï•ÔºåËÄå‰ΩøÁî®typeÂ±ûÊÄßÊó∂Âàô‰ΩøÁî®byTypeËá™Âä®Ê≥®ÂÖ•Á≠ñÁï•„ÄÇÂ¶ÇÊûúÊó¢‰∏çÊåáÂÆöname‰πü‰∏çÊåáÂÆötypeÂ±ûÊÄßÔºåËøôÊó∂Â∞ÜÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂‰ΩøÁî®byNameËá™Âä®Ê≥®ÂÖ•Á≠ñÁï•„ÄÇ @ResourceË£ÖÈÖçÈ°∫Â∫è Â¶ÇÊûúÂêåÊó∂ÊåáÂÆö‰∫ÜnameÂíåtypeÔºåÂàô‰ªéSpring‰∏ä‰∏ãÊñá‰∏≠ÊâæÂà∞ÂîØ‰∏ÄÂåπÈÖçÁöÑbeanËøõË°åË£ÖÈÖçÔºåÊâæ‰∏çÂà∞ÂàôÊäõÂá∫ÂºÇÂ∏∏ Â¶ÇÊûúÊåáÂÆö‰∫ÜnameÔºåÂàô‰ªé‰∏ä‰∏ãÊñá‰∏≠Êü•ÊâæÂêçÁß∞ÔºàidÔºâÂåπÈÖçÁöÑbeanËøõË°åË£ÖÈÖçÔºåÊâæ‰∏çÂà∞ÂàôÊäõÂá∫ÂºÇÂ∏∏ Â¶ÇÊûúÊåáÂÆö‰∫ÜtypeÔºåÂàô‰ªé‰∏ä‰∏ãÊñá‰∏≠ÊâæÂà∞Á±ªÂûãÂåπÈÖçÁöÑÂîØ‰∏ÄbeanËøõË°åË£ÖÈÖçÔºåÊâæ‰∏çÂà∞ÊàñËÄÖÊâæÂà∞Â§ö‰∏™ÔºåÈÉΩ‰ºöÊäõÂá∫ÂºÇÂ∏∏ Â¶ÇÊûúÊó¢Ê≤°ÊúâÊåáÂÆönameÔºåÂèàÊ≤°ÊúâÊåáÂÆötypeÔºåÂàôËá™Âä®ÊåâÁÖßbyNameÊñπÂºèËøõË°åË£ÖÈÖçÔºõÂ¶ÇÊûúÊ≤°ÊúâÂåπÈÖçÔºåÂàôÂõûÈÄÄ‰∏∫‰∏Ä‰∏™ÂéüÂßãÁ±ªÂûãËøõË°åÂåπÈÖçÔºåÂ¶ÇÊûúÂåπÈÖçÂàôËá™Âä®Ë£ÖÈÖçÔºõ @Autowired ‰∏é@ResourceÁöÑÂå∫Âà´ 1„ÄÅ@Autowired‰∏é@ResourceÈÉΩÂèØ‰ª•Áî®Êù•Ë£ÖÈÖçbean. ÈÉΩÂèØ‰ª•ÂÜôÂú®Â≠óÊÆµ‰∏ä,ÊàñÂÜôÂú®setterÊñπÊ≥ï‰∏ä„ÄÇ 2„ÄÅ@AutowiredÈªòËÆ§ÊåâÁ±ªÂûãË£ÖÈÖçÔºàËøô‰∏™Ê≥®Ëß£ÊòØÂ±û‰∫éspringÁöÑÔºâÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂøÖÈ°ªË¶ÅÊ±Ç‰æùËµñÂØπË±°ÂøÖÈ°ªÂ≠òÂú®ÔºåÂ¶ÇÊûúË¶ÅÂÖÅËÆ∏nullÂÄºÔºåÂèØ‰ª•ËÆæÁΩÆÂÆÉÁöÑrequiredÂ±ûÊÄß‰∏∫falseÔºåÂ¶ÇÔºö@Autowired(required=false) ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥‰ΩøÁî®ÂêçÁß∞Ë£ÖÈÖçÂèØ‰ª•ÁªìÂêà@QualifierÊ≥®Ëß£ËøõË°å‰ΩøÁî®ÔºåÂ¶Ç‰∏ãÔºö 12@Autowired()@Qualifier("baseDao")privateBaseDao baseDao; 3„ÄÅ@ResourceÔºàËøô‰∏™Ê≥®Ëß£Â±û‰∫éJ2EEÁöÑÔºâÔºåÈªòËÆ§ÊåâÁÖßÂêçÁß∞ËøõË°åË£ÖÈÖçÔºåÂêçÁß∞ÂèØ‰ª•ÈÄöËøánameÂ±ûÊÄßËøõË°åÊåáÂÆöÔºåÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆönameÂ±ûÊÄßÔºåÂΩìÊ≥®Ëß£ÂÜôÂú®Â≠óÊÆµ‰∏äÊó∂ÔºåÈªòËÆ§ÂèñÂ≠óÊÆµÂêçËøõË°åË£ÖÈÖçÊü•ÊâæÔºåÂ¶ÇÊûúÊ≥®Ëß£ÂÜôÂú®setterÊñπÊ≥ï‰∏äÈªòËÆ§ÂèñÂ±ûÊÄßÂêçËøõË°åË£ÖÈÖç„ÄÇÂΩìÊâæ‰∏çÂà∞‰∏éÂêçÁß∞ÂåπÈÖçÁöÑbeanÊó∂ÊâçÊåâÁÖßÁ±ªÂûãËøõË°åË£ÖÈÖç„ÄÇ‰ΩÜÊòØÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúnameÂ±ûÊÄß‰∏ÄÊó¶ÊåáÂÆöÔºåÂ∞±Âè™‰ºöÊåâÁÖßÂêçÁß∞ËøõË°åË£ÖÈÖç„ÄÇ 12@Resource(name="baseDao")privateBaseDao baseDao; Êé®Ëçê‰ΩøÁî®Ôºö@ResourceÊ≥®Ëß£Âú®Â≠óÊÆµ‰∏äÔºåËøôÊ†∑Â∞±‰∏çÁî®ÂÜôsetterÊñπÊ≥ï‰∫ÜÔºåÂπ∂‰∏îËøô‰∏™Ê≥®Ëß£ÊòØÂ±û‰∫éJ2EEÁöÑÔºåÂáèÂ∞ë‰∫Ü‰∏éspringÁöÑËÄ¶Âêà„ÄÇËøôÊ†∑‰ª£Á†ÅÁúãËµ∑Â∞±ÊØîËæÉ‰ºòÈõÖ„ÄÇ Spring @QualifierÊ≥®Ëß£ @AutowiredÊòØÊ†πÊçÆÁ±ªÂûãËøõË°åËá™Âä®Ë£ÖÈÖçÁöÑ„ÄÇÂ¶ÇÊûúÂΩìSpring‰∏ä‰∏ãÊñá‰∏≠Â≠òÂú®‰∏çÊ≠¢‰∏Ä‰∏™UserDaoÁ±ªÂûãÁöÑbeanÊó∂ÔºåÂ∞±‰ºöÊäõÂá∫BeanCreationExceptionÂºÇÂ∏∏;Â¶ÇÊûúSpring‰∏ä‰∏ãÊñá‰∏≠‰∏çÂ≠òÂú®UserDaoÁ±ªÂûãÁöÑbeanÔºå‰πü‰ºöÊäõÂá∫BeanCreationExceptionÂºÇÂ∏∏„ÄÇÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®@QualifierÈÖçÂêà@AutowiredÊù•Ëß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢ò„ÄÇÂ¶Ç‰∏ãÔºö ÂèØËÉΩÂ≠òÂú®Â§ö‰∏™UserDaoÂÆû‰æã 123@Autowired @Qualifier("userServiceImpl") public IUserService userService; ÊàñËÄÖ 1234@Autowired public void setUserDao(@Qualifier("userDao") UserDao userDao) &#123; this.userDao = userDao; &#125; ËøôÊ†∑Spring‰ºöÊâæÂà∞id‰∏∫userServiceImplÂíåuserDaoÁöÑbeanËøõË°åË£ÖÈÖç„ÄÇ ÂèØËÉΩ‰∏çÂ≠òÂú®UserDaoÂÆû‰æã 12@Autowired(required = false) public IUserService userService ÊÄªÁªì @Autowired ÈªòËÆ§ÊåâtypeÊ≥®ÂÖ• @Qualifier(&quot;baseDao&quot;) ‰∏ÄËà¨‰Ωú‰∏∫@Autowired()ÁöÑ‰øÆÈ•∞Áî® @Resource(name=&quot;baseDao&quot;) ÈªòËÆ§ÊåânameÊ≥®ÂÖ•ÔºåÂèØ‰ª•ÈÄöËøánameÂíåtypeÂ±ûÊÄßËøõË°åÈÄâÊã©ÊÄßÊ≥®ÂÖ• ‰∏ÄËà¨@AutowiredÂíå@Qualifier‰∏ÄËµ∑Áî®Ôºå@ResourceÂçïÁã¨Áî®„ÄÇÂΩìÁÑ∂Ê≤°ÊúâÂÜ≤Á™ÅÁöÑËØù@Autowired‰πüÂèØ‰ª•ÂçïÁã¨Áî®„ÄÇ Â∏∏Áî®Ê≥®Ëß£ Â£∞ÊòéBeanÁöÑÊ≥®Ëß£ 1234//ÂÆö‰πâÊéßÂà∂Â±ÇBean,Â¶ÇAction@Controller@Controller("BeanÁöÑÂêçÁß∞") 1234//ÂÆö‰πâ‰∏öÂä°ÈÄªËæëÂ±ÇBean@Service @Service("BeanÁöÑÂêçÁß∞") 1234//ÂÆö‰πâDAOÂ±Ç/Êï∞ÊçÆËÆøÈóÆÂ±ÇBean@Repository @Repository("BeanÁöÑÂêçÁß∞") 12//ÂÆö‰πâBean, ‰∏çÂ•ΩÂΩíÁ±ªÊó∂‰ΩøÁî®.@Component Ëá™Âä®Ë£ÖÈÖçBean 12//ÈªòËÆ§ÊåâÁ±ªÂûãÂåπÈÖç,Ëá™Âä®Ë£ÖÈÖç(SrpingÊèê‰æõÁöÑ)ÔºåÂèØ‰ª•ÂÜôÂú®ÊàêÂëòÂ±ûÊÄß‰∏ä,ÊàñÂÜôÂú®setterÊñπÊ≥ï‰∏ä@Autowired 12//‰∏ÄÂÆöË¶ÅÊâæÂà∞ÂåπÈÖçÁöÑBeanÔºåÂê¶ÂàôÊäõÂºÇÂ∏∏„ÄÇ ÈªòËÆ§ÂÄºÂ∞±ÊòØtrue@Autowired(required=true) 123//ÊåâÂêçÁß∞Ë£ÖÈÖçBean,‰∏é@AutowiredÁªÑÂêà‰ΩøÁî®ÔºåËß£ÂÜ≥ÊåâÁ±ªÂûãÂåπÈÖçÊâæÂà∞Â§ö‰∏™BeanÈóÆÈ¢ò„ÄÇ@Autowired@Qualifier("beanÁöÑÂêçÂ≠ó") 123456//JSR-250Êèê‰æõÁöÑ,ÈªòËÆ§ÊåâÂêçÁß∞Ë£ÖÈÖç,ÂΩìÊâæ‰∏çÂà∞ÂêçÁß∞ÂåπÈÖçÁöÑbeanÂÜçÊåâÁ±ªÂûãË£ÖÈÖç.ÂèØ‰ª•ÂÜôÂú®ÊàêÂëòÂ±ûÊÄß‰∏ä,ÊàñÂÜôÂú®setterÊñπÊ≥ï‰∏ä@Resource //ÂèØ‰ª•ÈÄöËøá@Resource(name="beanName") ÊåáÂÆöË¢´Ê≥®ÂÖ•ÁöÑbeanÁöÑÂêçÁß∞, Ë¶ÅÊòØÊú™ÊåáÂÆönameÂ±ûÊÄß, ÈªòËÆ§‰ΩøÁî®ÊàêÂëòÂ±ûÊÄßÁöÑÂèòÈáèÂêç,‰∏ÄËà¨‰∏çÁî®ÂÜônameÂ±ûÊÄß.@Resource(name="beanName") 12//ÊòØJSR-330Êèê‰æõÁöÑ,ÊåâÁ±ªÂûãË£ÖÈÖçÔºåÂäüËÉΩÊØî@AutowiredÂ∞ëÔºåÊ≤°Êúâ‰ΩøÁî®ÁöÑÂøÖË¶Å„ÄÇ@Inject JavaÈÖçÁΩÆÁ±ª @Configuration Â£∞ÊòéÂΩìÂâçÁ±ª‰∏∫ÈÖçÁΩÆÁ±ªÔºåÁõ∏ÂΩì‰∫éxmlÂΩ¢ÂºèÁöÑSpringÈÖçÁΩÆÔºàÁ±ª‰∏äÔºâ @Bean Ê≥®Ëß£Âú®ÊñπÊ≥ï‰∏äÔºåÂ£∞ÊòéÂΩìÂâçÊñπÊ≥ïÁöÑËøîÂõûÂÄº‰∏∫‰∏Ä‰∏™beanÔºåÊõø‰ª£xml‰∏≠ÁöÑÊñπÂºèÔºàÊñπÊ≥ï‰∏äÔºâ @Configuration Â£∞ÊòéÂΩìÂâçÁ±ª‰∏∫ÈÖçÁΩÆÁ±ªÔºåÂÖ∂‰∏≠ÂÜÖÈÉ®ÁªÑÂêà‰∫Ü@ComponentÊ≥®Ëß£ÔºåË°®ÊòéËøô‰∏™Á±ªÊòØ‰∏Ä‰∏™beanÔºàÁ±ª‰∏äÔºâ @ComponentScan Áî®‰∫éÂØπComponentËøõË°åÊâ´ÊèèÔºåÁõ∏ÂΩì‰∫éxml‰∏≠ÁöÑÔºàÁ±ª‰∏äÔºâ @WishlyConfiguration ‰∏∫@Configuration‰∏é@ComponentScanÁöÑÁªÑÂêàÊ≥®Ëß£ÔºåÂèØ‰ª•Êõø‰ª£Ëøô‰∏§‰∏™Ê≥®Ëß£ ÂàáÈù¢ÔºàAOPÔºâ SpringÊîØÊåÅAspectJÁöÑÊ≥®Ëß£ÂºèÂàáÈù¢ÁºñÁ®ã„ÄÇ @Aspect Â£∞Êòé‰∏Ä‰∏™ÂàáÈù¢ÔºàÁ±ª‰∏äÔºâ ‰ΩøÁî®@After„ÄÅ@Before„ÄÅ@AroundÂÆö‰πâÂª∫Ë®ÄÔºàadviceÔºâÔºåÂèØÁõ¥Êé•Â∞ÜÊã¶Êà™ËßÑÂàôÔºàÂàáÁÇπÔºâ‰Ωú‰∏∫ÂèÇÊï∞„ÄÇ @After Âú®ÊñπÊ≥ïÊâßË°å‰πãÂêéÊâßË°åÔºàÊñπÊ≥ï‰∏äÔºâ @Before Âú®ÊñπÊ≥ïÊâßË°å‰πãÂâçÊâßË°åÔºàÊñπÊ≥ï‰∏äÔºâ @Around Âú®ÊñπÊ≥ïÊâßË°å‰πãÂâç‰∏é‰πãÂêéÊâßË°åÔºàÊñπÊ≥ï‰∏äÔºâ @PointCut Â£∞ÊòéÂàáÁÇπ Âú®javaÈÖçÁΩÆÁ±ª‰∏≠‰ΩøÁî®@EnableAspectJAutoProxyÊ≥®Ëß£ÂºÄÂêØSpringÂØπAspectJ‰ª£ÁêÜÁöÑÊîØÊåÅÔºàÁ±ª‰∏äÔºâ ÂÆö‰πâBeanÁöÑ‰ΩúÁî®ÂüüÂíåÁîüÂëΩËøáÁ®ã 1234567891011121314//ËÆæÁΩÆSpringÂÆπÂô®Â¶Ç‰ΩïÊñ∞Âª∫BeanÂÆû‰æãÔºàÊñπÊ≥ï‰∏äÔºåÂæóÊúâ@BeanÔºâ@Scope("prototype")ÂÖ∂ËÆæÁΩÆÁ±ªÂûãÂåÖÊã¨ÔºöSingleton ÔºàÂçï‰æã,‰∏Ä‰∏™SpringÂÆπÂô®‰∏≠Âè™Êúâ‰∏Ä‰∏™beanÂÆû‰æãÔºåÈªòËÆ§Ê®°ÂºèÔºâ,Protetype ÔºàÊØèÊ¨°Ë∞ÉÁî®Êñ∞Âª∫‰∏Ä‰∏™beanÔºâ,Request ÔºàwebÈ°πÁõÆ‰∏≠ÔºåÁªôÊØè‰∏™http requestÊñ∞Âª∫‰∏Ä‰∏™beanÔºâ,Session ÔºàwebÈ°πÁõÆ‰∏≠ÔºåÁªôÊØè‰∏™http sessionÊñ∞Âª∫‰∏Ä‰∏™beanÔºâ,GlobalSessionÔºàÁªôÊØè‰∏Ä‰∏™ global http sessionÊñ∞Âª∫‰∏Ä‰∏™BeanÂÆû‰æãÔºâ 12//Áõ∏ÂΩì‰∫éinit-method,‰ΩøÁî®Âú®ÊñπÊ≥ï‰∏äÔºåÂΩìBeanÂàùÂßãÂåñÊó∂ÊâßË°å„ÄÇ@PostConstruct 12//Áõ∏ÂΩì‰∫édestory-methodÔºå‰ΩøÁî®Âú®ÊñπÊ≥ï‰∏äÔºåÂΩìBeanÈîÄÊØÅÊó∂ÊâßË°å„ÄÇ@PreDestroy Â£∞ÊòéÂºè‰∫ãÂä° 1@Transactional @Value @Value ‰∏∫Â±ûÊÄßÊ≥®ÂÖ•ÂÄºÔºàÂ±ûÊÄß‰∏äÔºâÊîØÊåÅÂ¶Ç‰∏ãÊñπÂºèÁöÑÊ≥®ÂÖ•Ôºö Ê≥®ÂÖ•ÊôÆÈÄöÂ≠óÁ¨¶ 12@Value("Tom")String name; Ê≥®ÂÖ•Êìç‰ΩúÁ≥ªÁªüÂ±ûÊÄß 12@Value("#&#123;systemProperties['os.name']&#125;")String osName; Ê≥®ÂÖ•Ë°®ËææÂºèÁªìÊûú 12@Value("#&#123;T(java.lang.Math).random() * 100&#125;")String randomNumber; Ê≥®ÂÖ•ÂÖ∂‰ªñbeanÂ±ûÊÄß 12@Value("#&#123;demoClass.name&#125;")String name; Ê≥®ÂÖ•Êñá‰ª∂ËµÑÊ∫ê 12@Value("classpath:com/springboot/study/hello/test.txt")String resourceFile; Ê≥®ÂÖ•ÁΩëÁ´ôËµÑÊ∫ê 12@Value("http://www.baiduc.om")Resource url; Ê≥®ÂÖ•ÈÖçÁΩÆÊñá‰ª∂ 12@Value("$&#123;book.name&#125;")String bookName; ÁéØÂ¢ÉÂàáÊç¢ @Profile ÈÄöËøáËÆæÂÆöEnvironmentÁöÑActiveProfilesÊù•ËÆæÂÆöÂΩìÂâçcontextÈúÄË¶Å‰ΩøÁî®ÁöÑÈÖçÁΩÆÁéØÂ¢É„ÄÇÔºàÁ±ªÊàñÊñπÊ≥ï‰∏äÔºâ @Conditional Spring4‰∏≠ÂèØ‰ª•‰ΩøÁî®Ê≠§Ê≥®Ëß£ÂÆö‰πâÊù°‰ª∂ÂåñÁöÑbeanÔºåÈÄöËøáÂÆûÁé∞ConditionÊé•Âè£ÔºåÂπ∂ÈáçÂÜômatchesÊñπÊ≥ïÔºå‰ªéËÄåÂÜ≥ÂÆöËØ•beanÊòØÂê¶Ë¢´ÂÆû‰æãÂåñ„ÄÇÔºàÊñπÊ≥ï‰∏äÔºâ ÂºÇÊ≠• @EnableAsync ÈÖçÁΩÆÁ±ª‰∏≠ÔºåÈÄöËøáÊ≠§Ê≥®Ëß£ÂºÄÂêØÂØπÂºÇÊ≠•‰ªªÂä°ÁöÑÊîØÊåÅÔºåÂèô‰∫ãÊÄßAsyncConfigurerÊé•Âè£ÔºàÁ±ª‰∏äÔºâ @Async Âú®ÂÆûÈôÖÊâßË°åÁöÑbeanÊñπÊ≥ï‰ΩøÁî®ËØ•Ê≥®Ëß£Êù•Áî≥ÊòéÂÖ∂ÊòØ‰∏Ä‰∏™ÂºÇÊ≠•‰ªªÂä°ÔºàÊñπÊ≥ï‰∏äÊàñÁ±ª‰∏äÊâÄÊúâÁöÑÊñπÊ≥ïÈÉΩÂ∞ÜÂºÇÊ≠•ÔºåÈúÄË¶Å@EnableAsyncÂºÄÂêØÂºÇÊ≠•‰ªªÂä°Ôºâ ÂÆöÊó∂‰ªªÂä° @EnableScheduling Âú®ÈÖçÁΩÆÁ±ª‰∏ä‰ΩøÁî®ÔºåÂºÄÂêØËÆ°Âàí‰ªªÂä°ÁöÑÊîØÊåÅÔºàÁ±ª‰∏äÔºâ @Scheduled Êù•Áî≥ÊòéËøôÊòØ‰∏Ä‰∏™‰ªªÂä°ÔºåÂåÖÊã¨cron,fixDelay,fixRateÁ≠âÁ±ªÂûãÔºàÊñπÊ≥ï‰∏äÔºåÈúÄÂÖàÂºÄÂêØËÆ°Âàí‰ªªÂä°ÁöÑÊîØÊåÅÔºâ @Enable* Ëøô‰∫õÊ≥®Ëß£‰∏ªË¶ÅÁî®Êù•ÂºÄÂêØÂØπxxxÁöÑÊîØÊåÅ„ÄÇ @EnableAspectJAutoProxy ÂºÄÂêØÂØπAspectJËá™Âä®‰ª£ÁêÜÁöÑÊîØÊåÅ @EnableAsync ÂºÄÂêØÂºÇÊ≠•ÊñπÊ≥ïÁöÑÊîØÊåÅ @EnableScheduling ÂºÄÂêØËÆ°Âàí‰ªªÂä°ÁöÑÊîØÊåÅ @EnableWebMvc ÂºÄÂêØWeb MVCÁöÑÈÖçÁΩÆÊîØÊåÅ @EnableConfigurationProperties ÂºÄÂêØÂØπ@ConfigurationPropertiesÊ≥®Ëß£ÈÖçÁΩÆBeanÁöÑÊîØÊåÅ @EnableJpaRepositories ÂºÄÂêØÂØπSpringData JPA RepositoryÁöÑÊîØÊåÅ @EnableTransactionManagement ÂºÄÂêØÊ≥®Ëß£Âºè‰∫ãÂä°ÁöÑÊîØÊåÅ @EnableCaching ÂºÄÂêØÊ≥®Ëß£ÂºèÁöÑÁºìÂ≠òÊîØÊåÅ ÊµãËØï @RunWith ËøêË°åÂô®ÔºåSpring‰∏≠ÈÄöÂ∏∏Áî®‰∫éÂØπJUnitÁöÑÊîØÊåÅ 1@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration Áî®Êù•Âä†ËΩΩÈÖçÁΩÆApplicationContextÔºåÂÖ∂‰∏≠classesÂ±ûÊÄßÁî®Êù•Âä†ËΩΩÈÖçÁΩÆÁ±ª 1@ContextConfiguration(classes=&#123;Test.class&#125;) SpringMVC @EnableWebMvc Âú®ÈÖçÁΩÆÁ±ª‰∏≠ÂºÄÂêØWeb MVCÁöÑÈÖçÁΩÆÊîØÊåÅÔºåÂ¶Ç‰∏Ä‰∫õViewResolverÊàñËÄÖMessageConverterÁ≠âÔºåËã•Êó†Ê≠§Âè•ÔºåÈáçÂÜôWebMvcConfigurerAdapterÊñπÊ≥ïÔºàÁî®‰∫éÂØπSpringMVCÁöÑÈÖçÁΩÆÔºâ„ÄÇ @Controller Â£∞ÊòéËØ•Á±ª‰∏∫SpringMVC‰∏≠ÁöÑController @RequestMapping Áî®‰∫éÊò†Â∞ÑWebËØ∑Ê±ÇÔºåÂåÖÊã¨ËÆøÈóÆË∑ØÂæÑÂíåÂèÇÊï∞ÔºàÁ±ªÊàñÊñπÊ≥ï‰∏äÔºâ @ResponseBody ÊîØÊåÅÂ∞ÜËøîÂõûÂÄºÊîæÂú®responseÂÜÖÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™È°µÈù¢ÔºåÈÄöÂ∏∏Áî®Êà∑ËøîÂõûjsonÊï∞ÊçÆÔºàËøîÂõûÂÄºÊóÅÊàñÊñπÊ≥ï‰∏äÔºâ @RequestBody ÂÖÅËÆ∏requestÁöÑÂèÇÊï∞Âú®request‰Ωì‰∏≠ÔºåËÄå‰∏çÊòØÁõ¥Êé•ËøûÊé•Âú®Âú∞ÂùÄÂêéÈù¢„ÄÇÔºàÊîæÂú®ÂèÇÊï∞ÂâçÔºâ @PathVariable Áî®‰∫éÊé•Êî∂Ë∑ØÂæÑÂèÇÊï∞ÔºåÊØîÂ¶Ç@RequestMapping(‚Äú/hello/{name}‚Äù)Áî≥ÊòéÁöÑË∑ØÂæÑÔºåÂ∞ÜÊ≥®Ëß£ÊîæÂú®ÂèÇÊï∞ÂâçÔºåÂç≥ÂèØËé∑ÂèñËØ•ÂÄºÔºåÈÄöÂ∏∏‰Ωú‰∏∫RestfulÁöÑÊé•Âè£ÂÆûÁé∞ÊñπÊ≥ï„ÄÇ @RestController ËØ•Ê≥®Ëß£‰∏∫‰∏Ä‰∏™ÁªÑÂêàÊ≥®Ëß£ÔºåÁõ∏ÂΩì‰∫é@ControllerÂíå@ResponseBodyÁöÑÁªÑÂêàÔºåÊ≥®Ëß£Âú®Á±ª‰∏äÔºåÊÑèÂë≥ÁùÄÔºåËØ•ControllerÁöÑÊâÄÊúâÊñπÊ≥ïÈÉΩÈªòËÆ§Âä†‰∏ä‰∫Ü@ResponseBody„ÄÇ @ControllerAdvice ÈÄöËøáËØ•Ê≥®Ëß£ÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÂØπ‰∫éÊéßÂà∂Âô®ÁöÑÂÖ®Â±ÄÈÖçÁΩÆÊîæÁΩÆÂú®Âêå‰∏Ä‰∏™‰ΩçÁΩÆÔºåÊ≥®Ëß£‰∫Ü@ControllerÁöÑÁ±ªÁöÑÊñπÊ≥ïÂèØ‰ΩøÁî®@ExceptionHandler„ÄÅ@InitBinder„ÄÅ@ModelAttributeÊ≥®Ëß£Âà∞ÊñπÊ≥ï‰∏äÔºåËøôÂØπÊâÄÊúâÊ≥®Ëß£‰∫Ü @RequestMappingÁöÑÊéßÂà∂Âô®ÂÜÖÁöÑÊñπÊ≥ïÊúâÊïà„ÄÇ @ExceptionHandler Áî®‰∫éÂÖ®Â±ÄÂ§ÑÁêÜÊéßÂà∂Âô®ÈáåÁöÑÂºÇÂ∏∏ @InitBinder Áî®Êù•ËÆæÁΩÆWebDataBinderÔºåWebDataBinderÁî®Êù•Ëá™Âä®ÁªëÂÆöÂâçÂè∞ËØ∑Ê±ÇÂèÇÊï∞Âà∞Model‰∏≠„ÄÇ @ModelAttribute Êú¨Êù•ÁöÑ‰ΩúÁî®ÊòØÁªëÂÆöÈîÆÂÄºÂØπÂà∞ModelÈáåÔºåÂú®@ControllerAdvice‰∏≠ÊòØËÆ©ÂÖ®Â±ÄÁöÑ@RequestMappingÈÉΩËÉΩËé∑ÂæóÂú®Ê≠§Â§ÑËÆæÁΩÆÁöÑÈîÆÂÄºÂØπ„ÄÇ ‰∏∫‰ªÄ‰πàÂª∫ËÆÆÊûÑÈÄ†Âô®Ê≥®ÂÖ• ÊûÑÈÄ†Âô®Ê≥®ÂÖ•‰∏éÂüüÊ≥®ÂÖ• ÁÉ≠Èó®ÊñáÁ´† Why field injection is evil ÁªôÂá∫ÊÄªÁªìÔºö Field injection: less code to write; unsafe code; more complicated to test; Constructor injection: safe code; more code to write (see the hint to Lombok); easy to test; Spring ÁöÑÂçöÂÆ¢‰∏äÊåáÂá∫ Setter injection versus constructor injection and the use of @Required Ëß£ÂÜ≥ÊñπÊ°à ‰π¶ÂΩíÊ≠£‰º†ÔºåËØ¥‰∏ãÂ¶Ç‰ΩïÂâîÈô§Intellij‰∏≠MybatisÁöÑMapperËá™Âä®Ê≥®ÂÖ•Ë≠¶Âëä„ÄÇ ÊñπÊ≥ï1Ôºö‰∏∫ @Autowired Ê≥®Ëß£ËÆæÁΩÆrequired = false ‰ΩøÁî® @Autowired Ê≥®Ëß£Êó∂ÔºåËã•Â∏åÊúõÂÖÅËÆ∏nullÂÄºÔºåÂèØËÆæÁΩÆrequired = falseÔºåÂÉèËøôÊ†∑Ôºö 12@Autowired(required = false)private UserMapper userMapper; ËøôÊ†∑Â∞±‰∏ç‰ºöÊúâË≠¶Âëä‰∫Ü„ÄÇÂéüÂõ†ÂæàÂ•ΩÁêÜËß£ÔºöIDEAËÆ§‰∏∫userMapperÊòØ‰∏™nullÔºåÁªô‰∫ÜË≠¶ÂëäÔºõÂä†‰∏ärequired = falseÂêéÔºå‰ΩøÁî® @Autowired Ê≥®Ëß£‰∏çÂÜçÂéªÊ†°È™åuserMapperÊòØÂê¶Â≠òÂú®‰∫Ü„ÄÇ‰πüÂ∞±‰∏ç‰ºöÊúâË≠¶Âëä‰∫Ü„ÄÇ ÊñπÊ≥ï2ÔºöÁî® @Resource ÊõøÊç¢ @Autowired 12@Resourceprivate UserMapper userMapper; ÊñπÊ≥ï3ÔºöÂú®MapperÊé•Âè£‰∏äÂä†‰∏ä@RepositoryÊ≥®Ëß£ 123@Repositorypublic interface UserMapper extends Mapper&lt;User&gt; &#123;&#125; ËøôÊ†∑‰πüËÉΩËÆ©‰Ω†ÁöÑ 12@Autowiredprivate UserMapper userMapper; ‰∏çÂÜçÊä•Èîô„ÄÇÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰Ω†Áî®@ComponentÊõøÊç¢@Repository‰πüÊòØÂèØ‰ª•ÁöÑ„ÄÇÂéüÁêÜÂ§ßËá¥ÔºöIDEA‰∏çÊòØËÆ§‰∏∫ userMapper ÊòØ‰∏™nullÂòõ‚Ä¶Âä†‰∏™@RepositoryÊ≥®Ëß£È™ó‰∏Ä‰∏ãIDEAÂ∞±OK‰∫Ü‚Ä¶‚Ä¶ ÊñπÊ≥ï4ÔºöÁî®Lombok 123456@Service@RequiredArgsConstructor(onConstructor = @__(@Autowired))public class TestService &#123; private final UserMapper userMapper; ...&#125; LombokÁîüÊàêÁöÑ‰ª£Á†ÅÊòØËøôÊ†∑ÁöÑÔºö 123456789@Servicepublic class TestService &#123; private final UserMapper userMapper; @Autowired public TestService(final UserMapper userMapper) &#123; this.userMapper = userMapper; &#125; ...&#125; ‰ΩÜÂ¶ÇÊûúËá™Â∑±ÊâãÂÜôÊàêLombokÁîüÊàêÁöÑ‰ª£Á†ÅÔºåIDEA‰æùÁÑ∂‰ºöÁªô‰Ω†Êä•Ë≠¶Âëä „ÄÇÊàëÁåúÔºåÂ∫îËØ•ÊòØIDEAÁöÑLombokÊèí‰ª∂ÊääIDEAÊêûÊáµÈÄº‰∫Ü‚Ä¶ÊâÄ‰ª•‰∏çÊèêÁ§∫‰∫Ü‚Ä¶ ÊñπÊ≥ï5ÔºöÊääIDEAÁöÑË≠¶ÂëäÂÖ≥Èó≠Êéâ ‰∏™‰∫∫Ê≤°ËØïËøá„ÄÇ ÊñπÊ≥ï6ÔºöÂÆâË£Ömybatis plugin ÊçÆËØ¥ÂÆâË£Ömybatis pluginÂèØ‰ª•Ëß£ÂÜ≥ËØ•ÈóÆÈ¢ò„ÄÇ]]></content>
      <categories>
        <category>Spring</category>
        <category>IDEA</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>IDEA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰øÆÊîπGitHubÈ°πÁõÆËØ≠Ë®ÄÊòæÁ§∫ÈóÆÈ¢ò]]></title>
    <url>%2Fposts%2F559b1d56.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ ÂΩìÊàë‰ª¨‰∏ä‰º†È°πÁõÆÂà∞GitHub‰∏äÔºåÊúâÊó∂ÂÄôÈ°πÁõÆÊòæÁ§∫ÁöÑËØ≠Ë®ÄÂπ∂ÈùûÊòØÊàë‰ª¨Ëá™Â∑±È°πÁõÆÊâÄÁ§∫ÁöÑËØ≠Ë®ÄÔºåËøôÂ∞±ÂØºËá¥Êàë‰ª¨Âú®Âø´ÈÄüÊ£ÄÁ¥¢Ôºå ÊàñËÄÖÂ§ñÈÉ®ËÆøÈóÆËÄÖËÆøÈóÆÊó∂‰∏çËÉΩÂ§üÊêúÁ¥¢Âà∞Êàë‰ª¨ÁöÑÈ°πÁõÆÔºåÊâÄ‰ª•ÔºåÊ≠§Êó∂Â∞±ÂæàÊúâÂøÖË¶Å‰øÆÊîπ‰∏ãËØ≠Ë®Ä„ÄÇ ‰øÆÊîπGitHubËØ≠Ë®Ä 1„ÄÅÂú®Êú¨Âú∞È°πÁõÆ‰∏≠ÊàñËÄÖGitHubÈ°πÁõÆ‰∏≠Êñ∞Âª∫‰∏Ä‰∏™ .gitattributesÁöÑÊñá‰ª∂ÔºåËæìÂÖ•‰ª•‰∏ãÂÜÖÂÆπÔºö 12345*.yml linguist-language=Java *.html linguist-language=Java *.js linguist-language=Java *.xml linguist-language=Java*.css linguist-language=Java ÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂÅáÂ¶ÇÊàë‰ª¨ÁöÑÈ°πÁõÆ‰∏≠ÊúâÂæàÂ§öÁöÑËØ∏Â¶Ç.html„ÄÅ.jsÁ≠âÊñá‰ª∂ÔºåÂú®GitHub‰∏ä‰ºöÊòæÁ§∫‰∏∫HTML„ÄÅJavaScriptÔºå ÊâÄ‰ª•.gitattributesÊñá‰ª∂ÂÜÖÂÆπÁöÑÊÑèÊÄùÂ∞±ÊòØÂ∞ÜÂøΩÁï•.xx‰ªÄ‰πà‰ªÄ‰πàÊñá‰ª∂ÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂ËØ≠Ë®ÄÊõ¥Êîπ‰∏∫JavaÔºåÂ¶ÇÊûú‰Ω†ÁöÑÈ°πÁõÆ ÊòØÂÖ∂‰ªñËØ≠Ë®ÄÔºåËØ∏Â¶ÇC++Á≠âÂ∞±Â∞ÜJava‰øÆÊîπ‰∏∫C++Á≠â„ÄÇ ÂΩìÁÑ∂‰∫ÜÔºåËøôÊ†∑‰øÆÊîπ‰πüËÆ∏Ëøò‰∏çËÉΩÂ∞Ü‰Ω†ÁöÑÈ°πÁõÆËØ≠Ë®Ä‰øÆÊîπÊàêÂäüÔºåÊâÄ‰ª•‰Ω†ÈúÄË¶ÅÂéªÊü•ËØ¢‰Ω†È°πÁõÆ‰∏≠ÊâÄÊúâÂ∞ΩÂèØËÉΩÁöÑÂêéÁºÄÂêçÊñá‰ª∂ ÂΩ±ÂìçËØ≠Ë®ÄÁöÑÊÉÖÂÜµËÄÉËôëÔºåË¶ÅÊ†πÊçÆGitHubÁªô‰Ω†ÂΩìÂâçÈ°πÁõÆËÆæÂÆöÁöÑÊòØ‰ªÄ‰πàËØ≠Ë®ÄÔºåÂ∞±‰ªé‰ªÄ‰πàËØ≠Ë®ÄÂéªËÄÉËôëÂ∞±Â•Ω‰∫Ü„ÄÇ ÊâÄ‰ª•Âú®.gitattributesÊñá‰ª∂‰∏≠Ê∑ªÂä†Â§ö‰∏Ä‰∫õÂ±ûÊÄßÂ∞±Ëß£ÂÜ≥‰∫Ü„ÄÇÂ¶Ç‰∏ãÔºö 123456789*.md linguist-language=Java *.yml linguist-language=Java *.html linguist-language=Java *.js linguist-language=Java *.xml linguist-language=Java*.css linguist-language=Java *.sql linguist-language=Java*.uml linguist-language=Java *.cmd linguist-language=Java]]></content>
      <categories>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux-ÊúçÂä°Âô®Áä∂ÊÄÅ„ÄÅÊÄßËÉΩÁõ∏ÂÖ≥ÂëΩ‰ª§]]></title>
    <url>%2Fposts%2Fc91a35ad.html</url>
    <content type="text"><![CDATA[ÊúçÂä°Âô®Áä∂ÊÄÅÂàÜÊûê Êü•ÁúãCPUÁöÑ‰ø°ÊÅØ Êü•ÁúãÁâ©ÁêÜCPU‰∏™Êï∞ Êü•ÁúãÊØè‰∏™Áâ©ÁêÜCPUÁöÑÊ†∏Êï∞ ÈÄªËæëCPUÁöÑ‰∏™Êï∞ ÈÄªËæëCPU = Áâ©ÁêÜCPU‰∏™Êï∞*Ê†∏Êï∞ Êü•ÁúãÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ totalÔºöÂÜÖÂ≠òÊÄªÊï∞ userÔºöÂ∑≤‰ΩøÁî®ÂÜÖÂ≠òÊï∞ freeÔºöÁ©∫Èó≤ÂÜÖÂ≠òÊï∞ sharedÔºöÂ§öËøõÁ®ãÂÖ±‰∫´ÂÜÖÂ≠òÊï∞ buffersÔºöÁºìÂÜ≤ÂÜÖÂ≠òÊï∞ cachedÔºöÁºìÂ≠òÂÜÖÂ≠òÊï∞ ÂèØÁî®ÂÜÖÂ≠ò = free+buffers+cached Â∑≤Áî®ÂÜÖÂ≠ò = used-buffers-cached swap ‰∫§Êç¢ÂÜÖÂ≠òÊï∞ÔºåÊ≠§È°πÂèØÂà§Êñ≠ÂÜÖÂ≠òÊòØÂê¶Â§üÁî®ÁöÑÊ†áÂáÜ Êü•ÁúãÁ°¨ÁõòÂèäÂàÜÂå∫‰ø°ÊÅØ Ê£ÄÊü•Êñá‰ª∂Á≥ªÁªüÁöÑÁ£ÅÁõòÁ©∫Èó¥Âç†Áî®ÊÉÖÂÜµ ÊúçÂä°Âô®ÊÄßËÉΩÂàÜÊûê Êü•ÁúãÁ°¨ÁõòI/OÊÄßËÉΩ Êü•ÁúãÊúçÂä°Âô®ÁöÑÂπ≥ÂùáË¥üËΩΩ ÁõëÊéßÊúçÂä°Âô®ÁöÑÊï¥‰ΩìÊÄßËÉΩ proces r:Á≠âÂæÖËøêË°åÁöÑËøõÁ®ãÊï∞ b:Èùû‰∏≠Êñ≠Áù°Áú†Áä∂ÊÄÅÁöÑËøõÁ®ãÊï∞ w:Ë¢´‰∫§Êç¢Âá∫ÂéªÁöÑÂèØËøêË°åËøõÁ®ãÊï∞ memory swpd:ËôöÊãüÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ fres:Á©∫Èó≤ÁöÑÂÜÖÂ≠ò buff:Áî®‰ΩúÁºìÂ≠òÁöÑÂÜÖÂ≠òÊï∞ÔºàÂçï‰Ωç:KBÔºâ swap si:‰ªéÁ£ÅÁõò‰∫§Êç¢Âà∞ÂÜÖÂ≠òÁöÑ‰∫§Êç¢È°µÊï∞Èáè so:‰ªéÂÜÖÂ≠ò‰∫§Êç¢Âà∞Á£ÅÁõòÁöÑ‰∫§Êç¢È°µÊï∞ÈáèÔºàÂçï‰Ωç:kb/ÁßíÔºâ io bi:ÂèëÈÄÅÂà∞ÂùóËÆæÂ§áÁöÑÂùóÊï∞ bo:‰ªéÂùóËÆæÂ§áÊé•Êî∂Âà∞ÁöÑÂùóÊï∞ÔºàÂçï‰Ωç:Âùó/ÁßíÔºâ system in:ÊØèÁßíÁöÑ‰∏≠Êñ≠Êï∞ÔºåÂåÖÊã¨Êó∂Èíü‰∏≠Êñ≠ cs:ÊØèÁßíÁöÑÁéØÂ¢ÉÔºà‰∏ä‰∏ãÊñáÔºâÂàáÊç¢Êï∞ cpu us:CPU‰ΩøÁî®Êó∂Èó¥ sy:CPUÁ≥ªÁªü‰ΩøÁî®Êó∂Èó¥ id:Èó≤ÁΩÆÊó∂Èó¥ÔºàÂçï‰Ωç:ÁôæÂàÜÊØîÔºâ Ê†áÂáÜÊÉÖÂÜµ‰∏ã:rÂ∞è‰∫é5,bÁ∫¶‰∏∫0 Â¶ÇÊûúuser + sys Â∞è‰∫é70 Ë°®Á§∫Á≥ªÁªüÊÄßËÉΩËæÉÂ•ΩÔºõÂ¶ÇÊûúÂ§ß‰∫éÁ≠â‰∫é85‰ª•‰∏äÔºåË°®Á§∫ÊÄßËÉΩÊØîËæÉÁ≥üÁ≥ï Êü•ÁúãLinuxÊúçÂä°Âô®ÁöÑÂÖ∂‰ªñÂèÇÊï∞ Êü•ÁúãÁ≥ªÁªüÂÜÖÊ†∏ÁöÑÁâàÊú¨Âè∑]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLËßÑËåÉ]]></title>
    <url>%2Fposts%2F33a2a570.html</url>
    <content type="text"><![CDATA[Êï∞ÊçÆÂ∫ìÂëΩÂêçËßÑËåÉ ÊâÄÊúâÊï∞ÊçÆÂ∫ìÂØπË±°ÂêçÁß∞ÂøÖÈ°ª‰ΩøÁî®Â∞èÂÜôÂ≠óÊØçÂπ∂Áî®‰∏ãÂàíÁ∫øÂàÜÂâ≤„ÄÇ ÊâÄÊúâÊï∞ÊçÆÂ∫ìÂØπË±°ÂêçÁß∞Á¶ÅÊ≠¢‰ΩøÁî® MySQL ‰øùÁïôÂÖ≥ÈîÆÂ≠óÔºàÂ¶ÇÊûúË°®Âêç‰∏≠ÂåÖÂê´ÂÖ≥ÈîÆÂ≠óÊü•ËØ¢Êó∂ÔºåÈúÄË¶ÅÂ∞ÜÂÖ∂Áî®ÂçïÂºïÂè∑Êã¨Ëµ∑Êù•Ôºâ„ÄÇ Êï∞ÊçÆÂ∫ìÂØπË±°ÁöÑÂëΩÂêçË¶ÅËÉΩÂÅöÂà∞ËßÅÂêçËØÜÊÑèÔºåÂπ∂‰∏îÊúÄÂêé‰∏çË¶ÅË∂ÖËøá32 ‰∏™Â≠óÁ¨¶„ÄÇ ‰∏¥Êó∂Â∫ìË°®ÂøÖÈ°ª‰ª• tmp_ ‰∏∫ÂâçÁºÄÂπ∂‰ª•Êó•Êúü‰∏∫ÂêéÁºÄÔºåÂ§á‰ªΩË°®ÂøÖÈ°ª‰ª• bak_ ‰∏∫ÂâçÁºÄÂπ∂‰ª•Êó•Êúü ( Êó∂Èó¥Êà≥ ) ‰∏∫ÂêéÁºÄ„ÄÇ ÊâÄÊúâÂ≠òÂÇ®Áõ∏ÂêåÊï∞ÊçÆÁöÑÂàóÂêçÂíåÂàóÁ±ªÂûãÂøÖÈ°ª‰∏ÄËá¥Ôºà‰∏ÄËà¨‰Ωú‰∏∫ÂÖ≥ËÅîÂàóÔºåÂ¶ÇÊûúÊü•ËØ¢Êó∂ÂÖ≥ËÅîÂàóÁ±ªÂûã‰∏ç‰∏ÄËá¥‰ºöËá™Âä®ËøõË°åÊï∞ÊçÆÁ±ªÂûãÈöêÂºèËΩ¨Êç¢Ôºå‰ºöÈÄ†ÊàêÂàó‰∏äÁöÑÁ¥¢ÂºïÂ§±ÊïàÔºåÂØºËá¥Êü•ËØ¢ÊïàÁéáÈôç‰ΩéÔºâ„ÄÇ Êï∞ÊçÆÂ∫ìÂü∫Êú¨ËÆæËÆ°ËßÑËåÉ Ê≤°ÊúâÁâπÊÆäË¶ÅÊ±ÇÔºàÂç≥ InnoDB Êó†Ê≥ïÊª°Ë∂≥ÁöÑÂäüËÉΩÂ¶ÇÔºöÂàóÂ≠òÂÇ®ÔºåÂ≠òÂÇ®Á©∫Èó¥Êï∞ÊçÆÁ≠âÔºâÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâÄÊúâË°®ÂøÖÈ°ª‰ΩøÁî® InnoDB Â≠òÂÇ®ÂºïÊìéÔºàMySQL5.5 ‰πãÂâçÈªòËÆ§‰ΩøÁî® MyisamÔºå5.6 ‰ª•ÂêéÈªòËÆ§ÁöÑ‰∏∫ InnoDBÔºâInnoDB ÊîØÊåÅ‰∫ãÂä°ÔºåÊîØÊåÅË°åÁ∫ßÈîÅÔºåÊõ¥Â•ΩÁöÑÊÅ¢Â§çÊÄßÔºåÈ´òÂπ∂Âèë‰∏ãÊÄßËÉΩÊõ¥Â•Ω„ÄÇ Êï∞ÊçÆÂ∫ìÂíåË°®ÁöÑÂ≠óÁ¨¶ÈõÜÁªü‰∏Ä‰ΩøÁî® UTF8ÔºåÂÖºÂÆπÊÄßÊõ¥Â•Ω„ÄÇÁªü‰∏ÄÂ≠óÁ¨¶ÈõÜÂèØ‰ª•ÈÅøÂÖçÁî±‰∫éÂ≠óÁ¨¶ÈõÜËΩ¨Êç¢‰∫ßÁîüÁöÑ‰π±Á†ÅÔºå‰∏çÂêåÁöÑÂ≠óÁ¨¶ÈõÜËøõË°åÊØîËæÉÂâçÈúÄË¶ÅËøõË°åËΩ¨Êç¢‰ºöÈÄ†ÊàêÁ¥¢ÂºïÂ§±Êïà„ÄÇ ÊâÄÊúâË°®ÂíåÂ≠óÊÆµÈÉΩÈúÄË¶ÅÊ∑ªÂä†Ê≥®ÈáäÔºå‰ΩøÁî® comment ‰ªéÂè•Ê∑ªÂä†Ë°®ÂíåÂàóÁöÑÂ§áÊ≥® ‰ªé‰∏ÄÂºÄÂßãÂ∞±ËøõË°åÊï∞ÊçÆÂ≠óÂÖ∏ÁöÑÁª¥Êä§„ÄÇ Â∞ΩÈáèÊéßÂà∂ÂçïË°®Êï∞ÊçÆÈáèÁöÑÂ§ßÂ∞èÔºåÂª∫ËÆÆÊéßÂà∂Âú®500‰∏á‰ª•ÂÜÖÔºå500‰∏áÂπ∂‰∏çÊòØ MySQL Êï∞ÊçÆÂ∫ìÁöÑÈôêÂà∂ÔºåËøáÂ§ß‰ºöÈÄ†Êàê‰øÆÊîπË°®ÁªìÊûÑ„ÄÅÂ§á‰ªΩ„ÄÅÊÅ¢Â§çÈÉΩ‰ºöÊúâÂæàÂ§ßÁöÑÈóÆÈ¢òÔºåÂèØ‰ª•Áî®ÂéÜÂè≤Êï∞ÊçÆÂΩíÊ°£ÔºàÂ∫îÁî®‰∫éÊó•ÂøóÊï∞ÊçÆÔºâÔºåÂàÜÂ∫ìÂàÜË°®ÔºàÂ∫îÁî®‰∫é‰∏öÂä°Êï∞ÊçÆÔºâÁ≠âÊâãÊÆµÊù•ÊéßÂà∂Êï∞ÊçÆÈáèÂ§ßÂ∞è„ÄÇ Ë∞®ÊÖé‰ΩøÁî® MySQL ÂàÜÂå∫Ë°®„ÄÇÂàÜÂå∫Ë°®Âú®Áâ©ÁêÜ‰∏äË°®Áé∞‰∏∫Â§ö‰∏™Êñá‰ª∂ÔºåÂú®ÈÄªËæë‰∏äË°®Áé∞‰∏∫‰∏Ä‰∏™Ë°®„ÄÇË∞®ÊÖéÈÄâÊã©ÂàÜÂå∫ÈîÆÔºåË∑®ÂàÜÂå∫Êü•ËØ¢ÊïàÁéáÂèØËÉΩÊõ¥‰ΩéÔºåÂª∫ËÆÆÈááÁî®Áâ©ÁêÜÂàÜË°®ÁöÑÊñπÂºèÁÆ°ÁêÜÂ§ßÊï∞ÊçÆ„ÄÇ Â∞ΩÈáèÂÅöÂà∞ÂÜ∑ÁÉ≠Êï∞ÊçÆÂàÜÁ¶ªÔºåÂáèÂ∞èË°®ÁöÑÂÆΩÂ∫¶„ÄÇMySQL ÈôêÂà∂ÊØè‰∏™Ë°®ÊúÄÂ§öÂ≠òÂÇ® 4096 ÂàóÔºåÂπ∂‰∏îÊØè‰∏ÄË°åÊï∞ÊçÆÁöÑÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá 65535 Â≠óËäÇ„ÄÇÂáèÂ∞ëÁ£ÅÁõò IOÔºå‰øùËØÅÁÉ≠Êï∞ÊçÆÁöÑÂÜÖÂ≠òÁºìÂ≠òÂëΩ‰∏≠ÁéáÔºàË°®Ë∂äÂÆΩÔºåÊääË°®Ë£ÖËΩΩËøõÂÜÖÂ≠òÁºìÂÜ≤Ê±†Êó∂ÊâÄÂç†Áî®ÁöÑÂÜÖÂ≠ò‰πüÂ∞±Ë∂äÂ§ß,‰πü‰ºöÊ∂àËÄóÊõ¥Â§öÁöÑ IOÔºâ Êõ¥ÊúâÊïàÁöÑÂà©Áî®ÁºìÂ≠òÔºåÈÅøÂÖçËØªÂÖ•Êó†Áî®ÁöÑÂÜ∑Êï∞ÊçÆÔºõÁªèÂ∏∏‰∏ÄËµ∑‰ΩøÁî®ÁöÑÂàóÊîæÂà∞‰∏Ä‰∏™Ë°®‰∏≠ÔºàÈÅøÂÖçÊõ¥Â§öÁöÑÂÖ≥ËÅîÊìç‰ΩúÔºâ Á¶ÅÊ≠¢Âú®Êï∞ÊçÆÂ∫ì‰∏≠Â≠òÂÇ®ÂõæÁâáÔºåÊñá‰ª∂Á≠âÂ§ßÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆ„ÄÇÈÄöÂ∏∏Êñá‰ª∂ÂæàÂ§ßÔºå‰ºöÁü≠Êó∂Èó¥ÂÜÖÈÄ†ÊàêÊï∞ÊçÆÈáèÂø´ÈÄüÂ¢ûÈïøÔºåÊï∞ÊçÆÂ∫ìËøõË°åÊï∞ÊçÆÂ∫ìËØªÂèñÊó∂ÔºåÈÄöÂ∏∏‰ºöËøõË°åÂ§ßÈáèÁöÑÈöèÊú∫ IO Êìç‰ΩúÔºåÊñá‰ª∂ÂæàÂ§ßÊó∂ÔºåIO Êìç‰ΩúÂæàËÄóÊó∂„ÄÇÈÄöÂ∏∏Â≠òÂÇ®‰∫éÊñá‰ª∂ÊúçÂä°Âô®ÔºåÊï∞ÊçÆÂ∫ìÂè™Â≠òÂÇ®Êñá‰ª∂Âú∞ÂùÄ‰ø°ÊÅØ„ÄÇ Á¶ÅÊ≠¢Âú®Á∫ø‰∏äÂÅöÊï∞ÊçÆÂ∫ìÂéãÂäõÊµãËØï„ÄÇ Á¶ÅÊ≠¢‰ªéÂºÄÂèëÁéØÂ¢ÉÔºåÊµãËØïÁéØÂ¢ÉÁõ¥Êé•ËøûÊé•Áîü‰∫ßÁéØÂ¢ÉÊï∞ÊçÆÂ∫ì„ÄÇ Êï∞ÊçÆÂ∫ìÂ≠óÊÆµËÆæËÆ°ËßÑËåÉ ‰ºòÂÖàÈÄâÊã©Á¨¶ÂêàÂ≠òÂÇ®ÈúÄË¶ÅÁöÑÊúÄÂ∞èÁöÑÊï∞ÊçÆÁ±ªÂûã ÂàóÁöÑÂ≠óÊÆµË∂äÂ§ßÔºåÂª∫Á´ãÁ¥¢ÂºïÊó∂ÊâÄÈúÄË¶ÅÁöÑÁ©∫Èó¥‰πüÂ∞±Ë∂äÂ§ßÔºåËøôÊ†∑‰∏ÄÈ°µ‰∏≠ÊâÄËÉΩÂ≠òÂÇ®ÁöÑÁ¥¢ÂºïËäÇÁÇπÁöÑÊï∞Èáè‰πüÂ∞±Ë∂äÂ∞ëÔºåÂú®ÈÅçÂéÜÊó∂ÊâÄÈúÄË¶ÅÁöÑIOÊ¨°Êï∞‰πüÂ∞±Ë∂äÂ§öÔºåÁ¥¢ÂºïÁöÑÊÄßËÉΩ‰πüÂ∞±Ë∂äÂ∑Æ„ÄÇ Â∞ÜÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢ÊàêÊï∞Â≠óÁ±ªÂûãÂ≠òÂÇ®ÔºåÂ¶ÇÔºöÂ∞ÜIPÂú∞ÂùÄËΩ¨Êç¢ÊàêÊï¥ÂΩ¢Êï∞ÊçÆ„ÄÇ MySQL Êèê‰æõ‰∫Ü‰∏§‰∏™ÊñπÊ≥ïÊù•Â§ÑÁêÜ IP Âú∞ÂùÄ inet_aton ÊääipËΩ¨‰∏∫Êó†Á¨¶Âè∑Êï¥Âûã(4-8‰Ωç) inet_ntoa ÊääÊï¥ÂûãÁöÑipËΩ¨‰∏∫Âú∞ÂùÄ ÊèíÂÖ•Êï∞ÊçÆÂâçÔºåÂÖàÁî® inet_aton Êää IP Âú∞ÂùÄËΩ¨‰∏∫Êï¥ÂûãÔºåÂèØ‰ª•ËäÇÁúÅÁ©∫Èó¥„ÄÇÊòæÁ§∫Êï∞ÊçÆÊó∂Ôºå‰ΩøÁî® inet_ntoa ÊääÊï¥ÂûãÁöÑ IP Âú∞ÂùÄËΩ¨‰∏∫Âú∞ÂùÄÊòæÁ§∫Âç≥ÂèØ„ÄÇ ÂØπ‰∫éÈùûË¥üÂûãÁöÑÊï∞ÊçÆÔºàÂ¶ÇËá™Â¢û ID„ÄÅÊï¥Âûã IPÔºâÊù•ËØ¥ÔºåË¶Å‰ºòÂÖà‰ΩøÁî®Êó†Á¨¶Âè∑Êï¥ÂûãÊù•Â≠òÂÇ®,Âõ†‰∏∫Êó†Á¨¶Âè∑Áõ∏ÂØπ‰∫éÊúâÁ¨¶Âè∑ÂèØ‰ª•Â§öÂá∫‰∏ÄÂÄçÁöÑÂ≠òÂÇ®Á©∫Èó¥„ÄÇ SIGNED INT -2147483648~2147483647 UNSIGNED INT 0~4294967295 VARCHAR(N) ‰∏≠ÁöÑ N ‰ª£Ë°®ÁöÑÊòØÂ≠óÁ¨¶Êï∞ÔºåËÄå‰∏çÊòØÂ≠óËäÇÊï∞„ÄÇ‰ΩøÁî® UTF8 Â≠òÂÇ® 255 ‰∏™Ê±âÂ≠ó Varchar(255)=765 ‰∏™Â≠óËäÇ„ÄÇËøáÂ§ßÁöÑÈïøÂ∫¶‰ºöÊ∂àËÄóÊõ¥Â§öÁöÑÂÜÖÂ≠ò„ÄÇ ÈÅøÂÖç‰ΩøÁî® TEXT„ÄÅBLOB Êï∞ÊçÆÁ±ªÂûã ÊúÄÂ∏∏ËßÅÁöÑTEXTÁ±ªÂûãÂèØ‰ª•Â≠òÂÇ®64kÁöÑÊï∞ÊçÆÔºåÂª∫ËÆÆÊää BLOB ÊàñÊòØTEXTÂàóÂàÜÁ¶ªÂà∞ÂçïÁã¨ÁöÑÊâ©Â±ïË°®‰∏≠„ÄÇ MySQL ÂÜÖÂ≠ò‰∏¥Êó∂Ë°®‰∏çÊîØÊåÅ TEXT„ÄÅBLOB ËøôÊ†∑ÁöÑÂ§ßÊï∞ÊçÆÁ±ªÂûãÔºåÂ¶ÇÊûúÊü•ËØ¢‰∏≠ÂåÖÂê´ËøôÊ†∑ÁöÑÊï∞ÊçÆÔºåÂú®ÊéíÂ∫èÁ≠âÊìç‰ΩúÊó∂ÔºåÂ∞±‰∏çËÉΩ‰ΩøÁî®ÂÜÖÂ≠ò‰∏¥Êó∂Ë°®ÔºåÂøÖÈ°ª‰ΩøÁî®Á£ÅÁõò‰∏¥Êó∂Ë°®ËøõË°å„ÄÇ ËÄå‰∏îÂØπ‰∫éËøôÁßçÊï∞ÊçÆÔºåMySQL ËøòÊòØË¶ÅËøõË°å‰∫åÊ¨°Êü•ËØ¢Ôºå‰ºö‰Ωø SQL ÊÄßËÉΩÂèòÂæóÂæàÂ∑ÆÔºå‰ΩÜÊòØ‰∏çÊòØËØ¥‰∏ÄÂÆö‰∏çËÉΩ‰ΩøÁî®ËøôÊ†∑ÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇ Â¶ÇÊûú‰∏ÄÂÆöË¶Å‰ΩøÁî®ÔºåÂª∫ËÆÆÊää BLOB ÊàñÊòØ TEXT ÂàóÂàÜÁ¶ªÂà∞ÂçïÁã¨ÁöÑÊâ©Â±ïË°®‰∏≠ÔºåÊü•ËØ¢Êó∂‰∏ÄÂÆö‰∏çË¶Å‰ΩøÁî® select * ËÄåÂè™ÈúÄË¶ÅÂèñÂá∫ÂøÖË¶ÅÁöÑÂàóÔºå‰∏çÈúÄË¶Å TEXT ÂàóÁöÑÊï∞ÊçÆÊó∂‰∏çË¶ÅÂØπËØ•ÂàóËøõË°åÊü•ËØ¢„ÄÇ TEXT Êàñ BLOB Á±ªÂûãÂè™ËÉΩ‰ΩøÁî®ÂâçÁºÄÁ¥¢Âºï,Âõ†‰∏∫ MySQL ÂØπÁ¥¢ÂºïÂ≠óÊÆµÈïøÂ∫¶ÊòØÊúâÈôêÂà∂ÁöÑÔºåÊâÄ‰ª• TEXT Á±ªÂûãÂè™ËÉΩ‰ΩøÁî®ÂâçÁºÄÁ¥¢ÂºïÔºåÂπ∂‰∏î TEXT Âàó‰∏äÊòØ‰∏çËÉΩÊúâÈªòËÆ§ÂÄºÁöÑ„ÄÇ ÈÅøÂÖç‰ΩøÁî® ENUM Á±ªÂûã ‰øÆÊîπ ENUM ÂÄºÈúÄË¶Å‰ΩøÁî® ALTER ËØ≠Âè• ENUM Á±ªÂûãÁöÑ ORDER BY Êìç‰ΩúÊïàÁéá‰ΩéÔºåÈúÄË¶ÅÈ¢ùÂ§ñÊìç‰Ωú Á¶ÅÊ≠¢‰ΩøÁî®Êï∞ÂÄº‰Ωú‰∏∫ ENUM ÁöÑÊûö‰∏æÂÄº Â∞ΩÂèØËÉΩÊääÊâÄÊúâÂàóÂÆö‰πâ‰∏∫ NOT NULL Á¥¢Âºï NULL ÂàóÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÁ©∫Èó¥Êù•‰øùÂ≠òÔºåÊâÄ‰ª•Ë¶ÅÂç†Áî®Êõ¥Â§öÁöÑÁ©∫Èó¥„ÄÇËøõË°åÊØîËæÉÂíåËÆ°ÁÆóÊó∂Ë¶ÅÂØπ NULL ÂÄºÂÅöÁâπÂà´ÁöÑÂ§ÑÁêÜ„ÄÇ ‰ΩøÁî® TIMESTAMPÔºà4 ‰∏™Â≠óËäÇÔºâÊàñ DATETIME Á±ªÂûãÔºà8 ‰∏™Â≠óËäÇÔºâÂ≠òÂÇ®Êó∂Èó¥ TIMESTAMP Â≠òÂÇ®ÁöÑÊó∂Èó¥ËåÉÂõ¥ 1970-01-01 00:00:01 ~ 2038-01-19-03:14:07„ÄÇ TIMESTAMP Âç†Áî® 4 Â≠óËäÇÂíå INT Áõ∏ÂêåÔºå‰ΩÜÊØî INT ÂèØËØªÊÄßÈ´òÔºåË∂ÖÂá∫ TIMESTAMP ÂèñÂÄºËåÉÂõ¥ÁöÑ‰ΩøÁî® DATETIME Á±ªÂûãÂ≠òÂÇ®„ÄÇ ÁªèÂ∏∏‰ºöÊúâ‰∫∫Áî®Â≠óÁ¨¶‰∏≤Â≠òÂÇ®Êó•ÊúüÂûãÁöÑÊï∞ÊçÆÔºà‰∏çÊ≠£Á°ÆÁöÑÂÅöÊ≥ïÔºâÔºö Áº∫ÁÇπ 1ÔºöÊó†Ê≥ïÁî®Êó•ÊúüÂáΩÊï∞ËøõË°åËÆ°ÁÆóÂíåÊØîËæÉ„ÄÇ Áº∫ÁÇπ 2ÔºöÁî®Â≠óÁ¨¶‰∏≤Â≠òÂÇ®Êó•ÊúüË¶ÅÂç†Áî®Êõ¥Â§öÁöÑÁ©∫Èó¥„ÄÇ ÂêåË¥¢Âä°Áõ∏ÂÖ≥ÁöÑÈáëÈ¢ùÁ±ªÊï∞ÊçÆÂøÖÈ°ª‰ΩøÁî® decimal Á±ªÂûã ÈùûÁ≤æÂáÜÊµÆÁÇπÔºöfloatÔºådouble Á≤æÂáÜÊµÆÁÇπÔºödecimal Decimal Á±ªÂûã‰∏∫Á≤æÂáÜÊµÆÁÇπÊï∞ÔºåÂú®ËÆ°ÁÆóÊó∂‰∏ç‰ºö‰∏¢Â§±Á≤æÂ∫¶„ÄÇÂç†Áî®Á©∫Èó¥Áî±ÂÆö‰πâÁöÑÂÆΩÂ∫¶ÂÜ≥ÂÆöÔºåÊØè 4 ‰∏™Â≠óËäÇÂèØ‰ª•Â≠òÂÇ® 9 ‰ΩçÊï∞Â≠óÔºåÂπ∂‰∏îÂ∞èÊï∞ÁÇπË¶ÅÂç†Áî®‰∏Ä‰∏™Â≠óËäÇ„ÄÇÂèØÁî®‰∫éÂ≠òÂÇ®ÊØî bigint Êõ¥Â§ßÁöÑÊï¥ÂûãÊï∞ÊçÆ„ÄÇ Á¥¢ÂºïËÆæËÆ°ËßÑËåÉ ÈôêÂà∂ÊØèÂº†Ë°®‰∏äÁöÑÁ¥¢ÂºïÊï∞ÈáèÔºåÂª∫ËÆÆÂçïÂº†Ë°®Á¥¢Âºï‰∏çË∂ÖËøá 5 ‰∏™ Á¥¢ÂºïÂπ∂‰∏çÊòØË∂äÂ§öË∂äÂ•ΩÔºÅÁ¥¢ÂºïÂèØ‰ª•ÊèêÈ´òÊïàÁéáÂêåÊ†∑‰πüÂèØ‰ª•Èôç‰ΩéÊïàÁéáÔºõÁ¥¢ÂºïÂèØ‰ª•Â¢ûÂä†Êü•ËØ¢ÊïàÁéáÔºå‰ΩÜÂêåÊ†∑‰πü‰ºöÈôç‰ΩéÊèíÂÖ•ÂíåÊõ¥Êñ∞ÁöÑÊïàÁéáÔºåÁîöËá≥Êúâ‰∫õÊÉÖÂÜµ‰∏ã‰ºöÈôç‰ΩéÊü•ËØ¢ÊïàÁéá„ÄÇÂõ†‰∏∫ MySQL ‰ºòÂåñÂô®Âú®ÈÄâÊã©Â¶Ç‰Ωï‰ºòÂåñÊü•ËØ¢Êó∂Ôºå‰ºöÊ†πÊçÆÁªü‰∏Ä‰ø°ÊÅØÔºåÂØπÊØè‰∏Ä‰∏™ÂèØ‰ª•Áî®Âà∞ÁöÑÁ¥¢ÂºïÊù•ËøõË°åËØÑ‰º∞Ôºå‰ª•ÁîüÊàêÂá∫‰∏Ä‰∏™ÊúÄÂ•ΩÁöÑÊâßË°åËÆ°ÂàíÔºåÂ¶ÇÊûúÂêåÊó∂ÊúâÂæàÂ§ö‰∏™Á¥¢ÂºïÈÉΩÂèØ‰ª•Áî®‰∫éÊü•ËØ¢ÔºåÂ∞±‰ºöÂ¢ûÂä† MySQL ‰ºòÂåñÂô®ÁîüÊàêÊâßË°åËÆ°ÂàíÁöÑÊó∂Èó¥ÔºåÂêåÊ†∑‰ºöÈôç‰ΩéÊü•ËØ¢ÊÄßËÉΩ„ÄÇ Á¶ÅÊ≠¢ÁªôË°®‰∏≠ÁöÑÊØè‰∏ÄÂàóÈÉΩÂª∫Á´ãÂçïÁã¨ÁöÑÁ¥¢Âºï 5.6ÁâàÊú¨‰πãÂâçÔºå‰∏Ä‰∏™ SQL Âè™ËÉΩ‰ΩøÁî®Âà∞‰∏Ä‰∏™Ë°®‰∏≠ÁöÑ‰∏Ä‰∏™Á¥¢ÂºïÔºå5.6 ‰ª•ÂêéÔºåËôΩÁÑ∂Êúâ‰∫ÜÂêàÂπ∂Á¥¢ÂºïÁöÑ‰ºòÂåñÊñπÂºèÔºå‰ΩÜÊòØËøòÊòØËøúËøúÊ≤°Êúâ‰ΩøÁî®‰∏Ä‰∏™ËÅîÂêàÁ¥¢ÂºïÁöÑÊü•ËØ¢ÊñπÂºèÂ•Ω ÊØè‰∏™ InnoDB Ë°®ÂøÖÈ°ªÊúâ‰∏™‰∏ªÈîÆ InnoDB ÊòØ‰∏ÄÁßçÁ¥¢ÂºïÁªÑÁªáË°®ÔºöÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÁöÑÈÄªËæëÈ°∫Â∫èÂíåÁ¥¢ÂºïÁöÑÈ°∫Â∫èÊòØÁõ∏ÂêåÁöÑ„ÄÇÊØè‰∏™Ë°®ÈÉΩÂèØ‰ª•ÊúâÂ§ö‰∏™Á¥¢ÂºïÔºå‰ΩÜÊòØË°®ÁöÑÂ≠òÂÇ®È°∫Â∫èÂè™ËÉΩÊúâ‰∏ÄÁßç InnoDBÊòØÊåâÁÖß‰∏ªÈîÆÁ¥¢ÂºïÁöÑÈ°∫Â∫èÊù•ÁªÑÁªáË°®ÁöÑ„ÄÇ ‰∏çË¶Å‰ΩøÁî®Êõ¥Êñ∞È¢ëÁπÅÁöÑÂàó‰Ωú‰∏∫‰∏ªÈîÆÔºå‰∏çÈÄÇÁî®Â§öÂàó‰∏ªÈîÆÔºàÁõ∏ÂΩì‰∫éËÅîÂêàÁ¥¢ÂºïÔºâ ‰∏çË¶Å‰ΩøÁî® UUID„ÄÅMD5„ÄÅHASH„ÄÅÂ≠óÁ¨¶‰∏≤Âàó‰Ωú‰∏∫‰∏ªÈîÆÔºàÊó†Ê≥ï‰øùËØÅÊï∞ÊçÆÁöÑÈ°∫Â∫èÂ¢ûÈïøÔºâ„ÄÇ‰∏ªÈîÆÂª∫ËÆÆ‰ΩøÁî®Ëá™Â¢û ID ÂÄº„ÄÇ Â¶Ç‰ΩïÈÄâÊã©Á¥¢ÂºïÂàóÁöÑÈ°∫Â∫è Âª∫Á´ãÁ¥¢ÂºïÁöÑÁõÆÁöÑÊòØÂ∏åÊúõÈÄöËøáÁ¥¢ÂºïËøõË°åÊï∞ÊçÆÊü•ÊâæÔºåÂáèÂ∞ëÈöèÊú∫ IOÔºåÂ¢ûÂä†Êü•ËØ¢ÊÄßËÉΩ ÔºåÁ¥¢ÂºïËÉΩËøáÊª§Âá∫Ë∂äÂ∞ëÁöÑÊï∞ÊçÆÔºåÂàô‰ªéÁ£ÅÁõò‰∏≠ËØªÂÖ•ÁöÑÊï∞ÊçÆ‰πüÂ∞±Ë∂äÂ∞ë„ÄÇ Âå∫ÂàÜÂ∫¶ÊúÄÈ´òÁöÑÊîæÂú®ËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÂ∑¶‰æßÔºàÂå∫ÂàÜÂ∫¶ = Âàó‰∏≠‰∏çÂêåÂÄºÁöÑÊï∞Èáè / ÂàóÁöÑÊÄªË°åÊï∞Ôºâ„ÄÇ Â∞ΩÈáèÊääÂ≠óÊÆµÈïøÂ∫¶Â∞èÁöÑÂàóÊîæÂú®ËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÂ∑¶‰æßÔºàÂõ†‰∏∫Â≠óÊÆµÈïøÂ∫¶Ë∂äÂ∞èÔºå‰∏ÄÈ°µËÉΩÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÈáèË∂äÂ§ßÔºåIO ÊÄßËÉΩ‰πüÂ∞±Ë∂äÂ•ΩÔºâ„ÄÇ ‰ΩøÁî®ÊúÄÈ¢ëÁπÅÁöÑÂàóÊîæÂà∞ËÅîÂêàÁ¥¢ÂºïÁöÑÂ∑¶‰æßÔºàËøôÊ†∑ÂèØ‰ª•ÊØîËæÉÂ∞ëÁöÑÂª∫Á´ã‰∏Ä‰∫õÁ¥¢ÂºïÔºâ„ÄÇ ÈÅøÂÖçÂª∫Á´ãÂÜó‰ΩôÁ¥¢ÂºïÂíåÈáçÂ§çÁ¥¢Âºï Âõ†‰∏∫ËøôÊ†∑‰ºöÂ¢ûÂä†Êü•ËØ¢‰ºòÂåñÂô®ÁîüÊàêÊâßË°åËÆ°ÂàíÁöÑÊó∂Èó¥„ÄÇ ÈáçÂ§çÁ¥¢ÂºïÁ§∫‰æãÔºöprimary key(id)„ÄÅindex(id)„ÄÅunique index(id) ÂÜó‰ΩôÁ¥¢ÂºïÁ§∫‰æãÔºöindex(a,b,c)„ÄÅindex(a,b)„ÄÅindex(a) ‰ºòÂÖàËÄÉËôëË¶ÜÁõñÁ¥¢Âºï ÂØπ‰∫éÈ¢ëÁπÅÁöÑÊü•ËØ¢‰ºòÂÖàËÄÉËôë‰ΩøÁî®Ë¶ÜÁõñÁ¥¢Âºï„ÄÇ Ë¶ÜÁõñÁ¥¢ÂºïÔºöÂ∞±ÊòØÂåÖÂê´‰∫ÜÊâÄÊúâÊü•ËØ¢Â≠óÊÆµ(where,select,ordery by,group byÂåÖÂê´ÁöÑÂ≠óÊÆµ)ÁöÑÁ¥¢Âºï Ë¶ÜÁõñÁ¥¢ÂºïÁöÑÂ•ΩÂ§ÑÔºö ÈÅøÂÖç InnoDB Ë°®ËøõË°åÁ¥¢ÂºïÁöÑ‰∫åÊ¨°Êü•ËØ¢„ÄÇInnoDB ÊòØ‰ª•ËÅöÈõÜÁ¥¢ÂºïÁöÑÈ°∫Â∫èÊù•Â≠òÂÇ®ÁöÑÔºåÂØπ‰∫é InnoDB Êù•ËØ¥Ôºå‰∫åÁ∫ßÁ¥¢ÂºïÂú®Âè∂Â≠êËäÇÁÇπ‰∏≠ÊâÄ‰øùÂ≠òÁöÑÊòØË°åÁöÑ‰∏ªÈîÆ‰ø°ÊÅØÔºåÂ¶ÇÊûúÊòØÁî®‰∫åÁ∫ßÁ¥¢ÂºïÊü•ËØ¢Êï∞ÊçÆÁöÑËØùÔºåÂú®Êü•ÊâæÂà∞Áõ∏Â∫îÁöÑÈîÆÂÄºÂêéÔºåËøòË¶ÅÈÄöËøá‰∏ªÈîÆËøõË°å‰∫åÊ¨°Êü•ËØ¢ÊâçËÉΩËé∑ÂèñÊàë‰ª¨ÁúüÂÆûÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆ„ÄÇËÄåÂú®Ë¶ÜÁõñÁ¥¢Âºï‰∏≠Ôºå‰∫åÁ∫ßÁ¥¢ÂºïÁöÑÈîÆÂÄº‰∏≠ÂèØ‰ª•Ëé∑ÂèñÊâÄÊúâÁöÑÊï∞ÊçÆÔºåÈÅøÂÖç‰∫ÜÂØπ‰∏ªÈîÆÁöÑ‰∫åÊ¨°Êü•ËØ¢ ÔºåÂáèÂ∞ë‰∫Ü IO Êìç‰ΩúÔºåÊèêÂçá‰∫ÜÊü•ËØ¢ÊïàÁéá„ÄÇ ÂèØ‰ª•ÊääÈöèÊú∫ IO ÂèòÊàêÈ°∫Â∫è IO Âä†Âø´Êü•ËØ¢ÊïàÁéá„ÄÇÁî±‰∫éË¶ÜÁõñÁ¥¢ÂºïÊòØÊåâÈîÆÂÄºÁöÑÈ°∫Â∫èÂ≠òÂÇ®ÁöÑÔºåÂØπ‰∫é IO ÂØÜÈõÜÂûãÁöÑËåÉÂõ¥Êü•ÊâæÊù•ËØ¥ÔºåÂØπÊØîÈöèÊú∫‰ªéÁ£ÅÁõòËØªÂèñÊØè‰∏ÄË°åÁöÑÊï∞ÊçÆ IO Ë¶ÅÂ∞ëÁöÑÂ§öÔºåÂõ†Ê≠§Âà©Áî®Ë¶ÜÁõñÁ¥¢ÂºïÂú®ËÆøÈóÆÊó∂‰πüÂèØ‰ª•ÊääÁ£ÅÁõòÁöÑÈöèÊú∫ËØªÂèñÁöÑ IO ËΩ¨ÂèòÊàêÁ¥¢ÂºïÊü•ÊâæÁöÑÈ°∫Â∫è IO„ÄÇ Êï∞ÊçÆÂ∫ì SQL ÂºÄÂèëËßÑËåÉ Âª∫ËÆÆ‰ΩøÁî®È¢ÑÁºñËØëËØ≠Âè•ËøõË°åÊï∞ÊçÆÂ∫ìÊìç‰Ωú È¢ÑÁºñËØëËØ≠Âè•ÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®Ëøô‰∫õËÆ°ÂàíÔºåÂáèÂ∞ë SQL ÁºñËØëÊâÄÈúÄË¶ÅÁöÑÊó∂Èó¥ÔºåËøòÂèØ‰ª•Ëß£ÂÜ≥Âä®ÊÄÅ SQL ÊâÄÂ∏¶Êù•ÁöÑ SQL Ê≥®ÂÖ•ÁöÑÈóÆÈ¢òÔºå Âè™‰º†ÂèÇÊï∞ÔºåÊØî‰º†ÈÄí SQL ËØ≠Âè•Êõ¥È´òÊïà Áõ∏ÂêåËØ≠Âè•ÂèØ‰ª•‰∏ÄÊ¨°Ëß£ÊûêÔºåÂ§öÊ¨°‰ΩøÁî®ÔºåÊèêÈ´òÂ§ÑÁêÜÊïàÁéá„ÄÇ ÈÅøÂÖçÊï∞ÊçÆÁ±ªÂûãÁöÑÈöêÂºèËΩ¨Êç¢ ÈöêÂºèËΩ¨Êç¢‰ºöÂØºËá¥Á¥¢ÂºïÂ§±Êïà„ÄÇÂ¶ÇÔºöselect name,phone from customer where id = '111'; ÂÖÖÂàÜÂà©Áî®Ë°®‰∏äÂ∑≤ÁªèÂ≠òÂú®ÁöÑÁ¥¢Âºï ÈÅøÂÖç‰ΩøÁî®Âèå % Âè∑ÁöÑÊü•ËØ¢Êù°‰ª∂„ÄÇÂ¶Ça like '%123%'ÔºåÔºàÂ¶ÇÊûúÊó†ÂâçÁΩÆ %ÔºåÂè™ÊúâÂêéÁΩÆ %ÔºåÊòØÂèØ‰ª•Áî®Âà∞Âàó‰∏äÁöÑÁ¥¢ÂºïÁöÑÔºâ ‰ΩøÁî® left join Êàñ not exists Êù•‰ºòÂåñ not in Êìç‰Ωú,Âõ†‰∏∫ not in ‰πüÈÄöÂ∏∏‰ºö‰ΩøÁî®Á¥¢ÂºïÂ§±Êïà„ÄÇ Êï∞ÊçÆÂ∫ìËÆæËÆ°Êó∂ÔºåÂ∫îËØ•Ë¶ÅÂØπ‰ª•ÂêéÊâ©Â±ïËøõË°åËÄÉËôë Á®ãÂ∫èËøûÊé•‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ì‰ΩøÁî®‰∏çÂêåÁöÑË¥¶Âè∑ÔºåËøõÂà∂Ë∑®Â∫ìÊü•ËØ¢ Á¶ÅÊ≠¢‰ΩøÁî® SELECT * ÂøÖÈ°ª‰ΩøÁî® SELECT &lt;Â≠óÊÆµÂàóË°®&gt; Êü•ËØ¢ Ê∂àËÄóÊõ¥Â§öÁöÑ CPU Âíå IO ‰ª•ÁΩëÁªúÂ∏¶ÂÆΩËµÑÊ∫ê Êó†Ê≥ï‰ΩøÁî®Ë¶ÜÁõñÁ¥¢Âºï ÂèØÂáèÂ∞ëË°®ÁªìÊûÑÂèòÊõ¥Â∏¶Êù•ÁöÑÂΩ±Âìç Á¶ÅÊ≠¢‰ΩøÁî®‰∏çÂê´Â≠óÊÆµÂàóË°®ÁöÑ INSERT ËØ≠Âè• Â¶ÇÔºöinsert into values ('a','b','c'); Â∫î‰ΩøÁî®Ôºöinsert into t(c1,c2,c3) values ('a','b','c'); ÈÅøÂÖç‰ΩøÁî®Â≠êÊü•ËØ¢ÔºåÂèØ‰ª•ÊääÂ≠êÊü•ËØ¢‰ºòÂåñ‰∏∫ JOIN Êìç‰Ωú ÈÄöÂ∏∏Â≠êÊü•ËØ¢Âú® in Â≠êÂè•‰∏≠Ôºå‰∏îÂ≠êÊü•ËØ¢‰∏≠‰∏∫ÁÆÄÂçï SQL ( ‰∏çÂåÖÂê´ union„ÄÅgroup by„ÄÅorder by„ÄÅlimit ‰ªéÂè• ) Êó∂ÔºåÊâçÂèØ‰ª•ÊääÂ≠êÊü•ËØ¢ËΩ¨Âåñ‰∏∫ÂÖ≥ËÅîÊü•ËØ¢ËøõË°å‰ºòÂåñ„ÄÇ Â≠êÊü•ËØ¢ÊÄßËÉΩÂ∑ÆÁöÑÂéüÂõ†Ôºö Â≠êÊü•ËØ¢ÁöÑÁªìÊûúÈõÜÊó†Ê≥ï‰ΩøÁî®Á¥¢ÂºïÔºåÈÄöÂ∏∏Â≠êÊü•ËØ¢ÁöÑÁªìÊûúÈõÜ‰ºöË¢´Â≠òÂÇ®Âà∞‰∏¥Êó∂Ë°®‰∏≠Ôºå‰∏çËÆ∫ÊòØÂÜÖÂ≠ò‰∏¥Êó∂Ë°®ËøòÊòØÁ£ÅÁõò‰∏¥Êó∂Ë°®ÈÉΩ‰∏ç‰ºöÂ≠òÂú®Á¥¢ÂºïÔºåÊâÄ‰ª•Êü•ËØ¢ÊÄßËÉΩ‰ºöÂèóÂà∞‰∏ÄÂÆöÁöÑÂΩ±Âìç„ÄÇ ÁâπÂà´ÊòØÂØπ‰∫éËøîÂõûÁªìÊûúÈõÜÊØîËæÉÂ§ßÁöÑÂ≠êÊü•ËØ¢ÔºåÂÖ∂ÂØπÊü•ËØ¢ÊÄßËÉΩÁöÑÂΩ±Âìç‰πüÂ∞±Ë∂äÂ§ß„ÄÇ Áî±‰∫éÂ≠êÊü•ËØ¢‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑ‰∏¥Êó∂Ë°®‰πüÊ≤°ÊúâÁ¥¢ÂºïÔºåÊâÄ‰ª•‰ºöÊ∂àËÄóËøáÂ§öÁöÑ CPU Âíå IO ËµÑÊ∫êÔºå‰∫ßÁîüÂ§ßÈáèÁöÑÊÖ¢Êü•ËØ¢„ÄÇ ÈÅøÂÖç‰ΩøÁî® JOIN ÂÖ≥ËÅîÂ§™Â§öÁöÑË°® ÂØπ‰∫é MySQL Êù•ËØ¥ÔºåÊòØÂ≠òÂú®ÂÖ≥ËÅîÁºìÂ≠òÁöÑÔºåÁºìÂ≠òÁöÑÂ§ßÂ∞èÂèØ‰ª•Áî± join_buffer_size ÂèÇÊï∞ËøõË°åËÆæÁΩÆ„ÄÇ Âú® MySQL ‰∏≠ÔºåÂØπ‰∫éÂêå‰∏Ä‰∏™ SQL Â§öÂÖ≥ËÅîÔºàjoinÔºâ‰∏Ä‰∏™Ë°®ÔºåÂ∞±‰ºöÂ§öÂàÜÈÖç‰∏Ä‰∏™ÂÖ≥ËÅîÁºìÂ≠òÔºåÂ¶ÇÊûúÂú®‰∏Ä‰∏™ SQL ‰∏≠ÂÖ≥ËÅîÁöÑË°®Ë∂äÂ§öÔºåÊâÄÂç†Áî®ÁöÑÂÜÖÂ≠ò‰πüÂ∞±Ë∂äÂ§ß„ÄÇ Â¶ÇÊûúÁ®ãÂ∫è‰∏≠Â§ßÈáèÁöÑ‰ΩøÁî®‰∫ÜÂ§öË°®ÂÖ≥ËÅîÁöÑÊìç‰ΩúÔºåÂêåÊó∂ join_buffer_size ËÆæÁΩÆÁöÑ‰πü‰∏çÂêàÁêÜÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ∞±ÂÆπÊòìÈÄ†ÊàêÊúçÂä°Âô®ÂÜÖÂ≠òÊ∫¢Âá∫ÁöÑÊÉÖÂÜµÔºåÂ∞±‰ºöÂΩ±ÂìçÂà∞ÊúçÂä°Âô®Êï∞ÊçÆÂ∫ìÊÄßËÉΩÁöÑÁ®≥ÂÆöÊÄß„ÄÇ ÂêåÊó∂ÂØπ‰∫éÂÖ≥ËÅîÊìç‰ΩúÊù•ËØ¥Ôºå‰ºö‰∫ßÁîü‰∏¥Êó∂Ë°®Êìç‰ΩúÔºåÂΩ±ÂìçÊü•ËØ¢ÊïàÁéá MySQL ÊúÄÂ§öÂÖÅËÆ∏ÂÖ≥ËÅî 61 ‰∏™Ë°®ÔºåÂª∫ËÆÆ‰∏çË∂ÖËøá 5 ‰∏™„ÄÇ ÂáèÂ∞ëÂêåÊï∞ÊçÆÂ∫ìÁöÑ‰∫§‰∫íÊ¨°Êï∞ Êï∞ÊçÆÂ∫ìÊõ¥ÈÄÇÂêàÂ§ÑÁêÜÊâπÈáèÊìç‰Ωú ÂêàÂπ∂Â§ö‰∏™Áõ∏ÂêåÁöÑÊìç‰ΩúÂà∞‰∏ÄËµ∑ÔºåÂèØ‰ª•ÊèêÈ´òÂ§ÑÁêÜÊïàÁéá ÂØπÂ∫îÂêå‰∏ÄÂàóËøõË°å or Âà§Êñ≠Êó∂Ôºå‰ΩøÁî® in ‰ª£Êõø or In ÁöÑÂÄº‰∏çË¶ÅË∂ÖËøá 500 ‰∏™Ôºå in Êìç‰ΩúÂèØ‰ª•Êõ¥ÊúâÊïàÁöÑÂà©Áî®Á¥¢ÂºïÔºåor Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÂæàÂ∞ëËÉΩÂà©Áî®Âà∞Á¥¢Âºï„ÄÇ Á¶ÅÊ≠¢‰ΩøÁî® order by rand() ËøõË°åÈöèÊú∫ÊéíÂ∫è ‰ºöÊääË°®‰∏≠ÊâÄÊúâÁ¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆË£ÖËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁÑ∂ÂêéÂú®ÂÜÖÂ≠ò‰∏≠ÂØπÊâÄÊúâÊï∞ÊçÆÊ†πÊçÆÈöèÊú∫ÁîüÊàêÁöÑÂÄºËøõË°åÊéíÂ∫èÔºåÂπ∂‰∏îÂèØËÉΩ‰ºöÂØπÊØè‰∏ÄË°åÈÉΩÁîüÊàê‰∏Ä‰∏™ÈöèÊú∫ÂÄºÔºåÂ¶ÇÊûúÊª°Ë∂≥Êù°‰ª∂ÁöÑÊï∞ÊçÆÈõÜÈùûÂ∏∏Â§ßÔºåÂ∞±‰ºöÊ∂àËÄóÂ§ßÈáèÁöÑ CPU Âíå IO ÂèäÂÜÖÂ≠òËµÑÊ∫ê„ÄÇ Êé®ËçêÂú®Á®ãÂ∫è‰∏≠Ëé∑Âèñ‰∏Ä‰∏™ÈöèÊú∫ÂÄºÔºåÁÑ∂Âêé‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Ëé∑ÂèñÊï∞ÊçÆÁöÑÊñπÂºè„ÄÇ WHERE‰ªéÂè•‰∏≠Á¶ÅÊ≠¢ÂØπÂàóËøõË°åÂáΩÊï∞ËΩ¨Êç¢ÂíåËÆ°ÁÆó ÂØπÂàóËøõË°åÂáΩÊï∞ËΩ¨Êç¢ÊàñËÆ°ÁÆóÊó∂‰ºöÂØºËá¥Êó†Ê≥ï‰ΩøÁî®Á¥¢Âºï„ÄÇ Âú®ÊòéÊòæ‰∏ç‰ºöÊúâÈáçÂ§çÂÄºÊó∂‰ΩøÁî® UNION ALL ËÄå‰∏çÊòØ UNION UNION ‰ºöÊää‰∏§‰∏™ÁªìÊûúÈõÜÁöÑÊâÄÊúâÊï∞ÊçÆÊîæÂà∞‰∏¥Êó∂Ë°®‰∏≠ÂêéÂÜçËøõË°åÂéªÈáçÊìç‰Ωú„ÄÇ UNION ALL ‰∏ç‰ºöÂÜçÂØπÁªìÊûúÈõÜËøõË°åÂéªÈáçÊìç‰Ωú„ÄÇ ÊãÜÂàÜÂ§çÊùÇÁöÑÂ§ß SQL ‰∏∫Â§ö‰∏™Â∞è SQL Â§ß SQLÔºöÈÄªËæë‰∏äÊØîËæÉÂ§çÊùÇÔºåÈúÄË¶ÅÂç†Áî®Â§ßÈáè CPU ËøõË°åËÆ°ÁÆóÁöÑSQL „ÄÇ MySQLÔºö‰∏Ä‰∏™ SQL Âè™ËÉΩ‰ΩøÁî®‰∏Ä‰∏™ CPU ËøõË°åËÆ°ÁÆó„ÄÇ SQL ÊãÜÂàÜÂêéÂèØ‰ª•ÈÄöËøáÂπ∂Ë°åÊâßË°åÊù•ÊèêÈ´òÂ§ÑÁêÜÊïàÁéá„ÄÇ]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OOMÂ∏∏ËßÅÂéüÂõ†ÂèäËß£ÂÜ≥]]></title>
    <url>%2Fposts%2Fa5594ffa.html</url>
    <content type="text"><![CDATA[Java heap space ÂΩìÂ†ÜÂÜÖÂ≠òÔºàHeap SpaceÔºâÊ≤°ÊúâË∂≥Â§üÁ©∫Èó¥Â≠òÊîæÊñ∞ÂàõÂª∫ÁöÑÂØπË±°Êó∂ÔºåÂ∞±‰ºöÊäõÂá∫ java.lang.OutOfMemoryError:Javaheap space ÈîôËØØÔºàÊ†πÊçÆÂÆûÈôÖÁîü‰∫ßÁªèÈ™åÔºåÂèØ‰ª•ÂØπÁ®ãÂ∫èÊó•Âøó‰∏≠ÁöÑ OutOfMemoryError ÈÖçÁΩÆÂÖ≥ÈîÆÂ≠óÂëäË≠¶Ôºå‰∏ÄÁªèÂèëÁé∞ÔºåÁ´ãÂç≥Â§ÑÁêÜÔºâ„ÄÇ ÂéüÂõ†ÂàÜÊûê Javaheap space ÈîôËØØ‰∫ßÁîüÁöÑÂ∏∏ËßÅÂéüÂõ†ÂèØ‰ª•ÂàÜ‰∏∫‰ª•‰∏ãÂá†Á±ªÔºö 1„ÄÅËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™Ë∂ÖÂ§ßÂØπË±°ÔºåÈÄöÂ∏∏ÊòØ‰∏Ä‰∏™Â§ßÊï∞ÁªÑ„ÄÇ 2„ÄÅË∂ÖÂá∫È¢ÑÊúüÁöÑËÆøÈóÆÈáè/Êï∞ÊçÆÈáèÔºåÈÄöÂ∏∏ÊòØ‰∏äÊ∏∏Á≥ªÁªüËØ∑Ê±ÇÊµÅÈáèÈ£ôÂçáÔºåÂ∏∏ËßÅ‰∫éÂêÑÁ±ª‰øÉÈîÄ/ÁßíÊùÄÊ¥ªÂä®ÔºåÂèØ‰ª•ÁªìÂêà‰∏öÂä°ÊµÅÈáèÊåáÊ†áÊéíÊü•ÊòØÂê¶ÊúâÂ∞ñÁä∂Â≥∞ÂÄº„ÄÇ 3„ÄÅËøáÂ∫¶‰ΩøÁî®ÁªàÁªìÂô®ÔºàFinalizerÔºâÔºåËØ•ÂØπË±°Ê≤°ÊúâÁ´ãÂç≥Ë¢´ GC„ÄÇ 4„ÄÅÂÜÖÂ≠òÊ≥ÑÊºèÔºàMemory LeakÔºâÔºåÂ§ßÈáèÂØπË±°ÂºïÁî®Ê≤°ÊúâÈáäÊîæÔºåJVM Êó†Ê≥ïÂØπÂÖ∂Ëá™Âä®ÂõûÊî∂ÔºåÂ∏∏ËßÅ‰∫é‰ΩøÁî®‰∫Ü File Á≠âËµÑÊ∫êÊ≤°ÊúâÂõûÊî∂„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à ÈíàÂØπÂ§ßÈÉ®ÂàÜÊÉÖÂÜµÔºåÈÄöÂ∏∏Âè™ÈúÄË¶ÅÈÄöËøá -Xmx ÂèÇÊï∞Ë∞ÉÈ´ò JVM Â†ÜÂÜÖÂ≠òÁ©∫Èó¥Âç≥ÂèØ„ÄÇÂ¶ÇÊûú‰ªçÁÑ∂Ê≤°ÊúâËß£ÂÜ≥ÔºåÂèØ‰ª•ÂèÇËÄÉ‰ª•‰∏ãÊÉÖÂÜµÂÅöËøõ‰∏ÄÊ≠•Â§ÑÁêÜÔºö 1„ÄÅÂ¶ÇÊûúÊòØË∂ÖÂ§ßÂØπË±°ÔºåÂèØ‰ª•Ê£ÄÊü•ÂÖ∂ÂêàÁêÜÊÄßÔºåÊØîÂ¶ÇÊòØÂê¶‰∏ÄÊ¨°ÊÄßÊü•ËØ¢‰∫ÜÊï∞ÊçÆÂ∫ìÂÖ®ÈÉ®ÁªìÊûúÔºåËÄåÊ≤°ÊúâÂÅöÁªìÊûúÊï∞ÈôêÂà∂„ÄÇ 2„ÄÅÂ¶ÇÊûúÊòØ‰∏öÂä°Â≥∞ÂÄºÂéãÂäõÔºåÂèØ‰ª•ËÄÉËôëÂ¢ûÂä†Êú∫Âô®ËµÑÊ∫êÔºåÊàñËÄÖÂÅöÈôêÊµÅÈôçÁ∫ß„ÄÇ 3„ÄÅÂ¶ÇÊûúÊòØÂÜÖÂ≠òÊ≥ÑÊºèÔºåÈúÄË¶ÅÊâæÂà∞ÊåÅÊúâÁöÑÂØπË±°Ôºå‰øÆÊîπ‰ª£Á†ÅËÆæËÆ°ÔºåÊØîÂ¶ÇÂÖ≥Èó≠Ê≤°ÊúâÈáäÊîæÁöÑËøûÊé•„ÄÇ GC overhead limit exceeded ÂΩì Java ËøõÁ®ãËä±Ë¥π 98% ‰ª•‰∏äÁöÑÊó∂Èó¥ÊâßË°å GCÔºå‰ΩÜÂè™ÊÅ¢Â§ç‰∫Ü‰∏çÂà∞ 2% ÁöÑÂÜÖÂ≠òÔºå‰∏îËØ•Âä®‰ΩúËøûÁª≠ÈáçÂ§ç‰∫Ü 5 Ê¨°ÔºåÂ∞±‰ºöÊäõÂá∫ java.lang.OutOfMemoryError:GC overhead limit exceededÈîôËØØ„ÄÇÁÆÄÂçïÂú∞ËØ¥ÔºåÂ∞±ÊòØÂ∫îÁî®Á®ãÂ∫èÂ∑≤ÁªèÂü∫Êú¨ËÄóÂ∞Ω‰∫ÜÊâÄÊúâÂèØÁî®ÂÜÖÂ≠òÔºå GC ‰πüÊó†Ê≥ïÂõûÊî∂„ÄÇ Ê≠§Á±ªÈóÆÈ¢òÁöÑÂéüÂõ†‰∏éËß£ÂÜ≥ÊñπÊ°àË∑ü Javaheap space ÈùûÂ∏∏Á±ª‰ººÔºåÂèØ‰ª•ÂèÇËÄÉ„ÄÇ Permgen space ËØ•ÈîôËØØË°®Á§∫Ê∞∏‰πÖ‰ª£ÔºàPermanent GenerationÔºâÂ∑≤Áî®Êª°ÔºåÈÄöÂ∏∏ÊòØÂõ†‰∏∫Âä†ËΩΩÁöÑ class Êï∞ÁõÆÂ§™Â§öÊàñ‰ΩìÁßØÂ§™Â§ß„ÄÇ ÂéüÂõ†ÂàÜÊûê Ê∞∏‰πÖ‰ª£Â≠òÂÇ®ÂØπË±°‰∏ªË¶ÅÂåÖÊã¨‰ª•‰∏ãÂá†Á±ªÔºö 1„ÄÅÂä†ËΩΩ/ÁºìÂ≠òÂà∞ÂÜÖÂ≠ò‰∏≠ÁöÑ class ÂÆö‰πâÔºåÂåÖÊã¨Á±ªÁöÑÂêçÁß∞ÔºåÂ≠óÊÆµÔºåÊñπÊ≥ïÂíåÂ≠óËäÇÁ†ÅÔºõ 2„ÄÅÂ∏∏ÈáèÊ±†Ôºõ 3„ÄÅÂØπË±°Êï∞ÁªÑ/Á±ªÂûãÊï∞ÁªÑÊâÄÂÖ≥ËÅîÁöÑ classÔºõ 4„ÄÅJIT ÁºñËØëÂô®‰ºòÂåñÂêéÁöÑ class ‰ø°ÊÅØ„ÄÇ PermGen ÁöÑ‰ΩøÁî®Èáè‰∏éÂä†ËΩΩÂà∞ÂÜÖÂ≠òÁöÑ class ÁöÑÊï∞Èáè/Â§ßÂ∞èÊ≠£Áõ∏ÂÖ≥„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à Ê†πÊçÆ Permgen space Êä•ÈîôÁöÑÊó∂Êú∫ÔºåÂèØ‰ª•ÈááÁî®‰∏çÂêåÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂ¶Ç‰∏ãÔºö 1„ÄÅÁ®ãÂ∫èÂêØÂä®Êä•ÈîôÔºå‰øÆÊîπ -XX:MaxPermSize ÂêØÂä®ÂèÇÊï∞ÔºåË∞ÉÂ§ßÊ∞∏‰πÖ‰ª£Á©∫Èó¥„ÄÇ 2„ÄÅÂ∫îÁî®ÈáçÊñ∞ÈÉ®ÁΩ≤Êó∂Êä•ÈîôÔºåÂæàÂèØËÉΩÊòØÊ≤°ÊúâÂ∫îÁî®Ê≤°ÊúâÈáçÂêØÔºåÂØºËá¥Âä†ËΩΩ‰∫ÜÂ§ö‰ªΩ class ‰ø°ÊÅØÔºåÂè™ÈúÄÈáçÂêØ JVM Âç≥ÂèØËß£ÂÜ≥„ÄÇ 3„ÄÅËøêË°åÊó∂Êä•ÈîôÔºåÂ∫îÁî®Á®ãÂ∫èÂèØËÉΩ‰ºöÂä®ÊÄÅÂàõÂª∫Â§ßÈáè classÔºåËÄåËøô‰∫õ class ÁöÑÁîüÂëΩÂë®ÊúüÂæàÁü≠ÊöÇÔºå‰ΩÜÊòØ JVM ÈªòËÆ§‰∏ç‰ºöÂç∏ËΩΩ classÔºåÂèØ‰ª•ËÆæÁΩÆ -XX:+CMSClassUnloadingEnabled Âíå -XX:+UseConcMarkSweepGCËøô‰∏§‰∏™ÂèÇÊï∞ÂÖÅËÆ∏ JVM Âç∏ËΩΩ class„ÄÇ Â¶ÇÊûú‰∏äËø∞ÊñπÊ≥ïÊó†Ê≥ïËß£ÂÜ≥ÔºåÂèØ‰ª•ÈÄöËøá jmap ÂëΩ‰ª§ dump ÂÜÖÂ≠òÂØπË±° jmap-dump:format=b,file=dump.hprof&lt;process-id&gt;ÔºåÁÑ∂ÂêéÂà©Áî® Eclipse MAT https://www.eclipse.org/mat ÂäüËÉΩÈÄê‰∏ÄÂàÜÊûêÂºÄÈîÄÊúÄÂ§ßÁöÑ classloader ÂíåÈáçÂ§ç class„ÄÇ Metaspace JDK 1.8 ‰ΩøÁî® Metaspace ÊõøÊç¢‰∫ÜÊ∞∏‰πÖ‰ª£ÔºàPermanent GenerationÔºâÔºåËØ•ÈîôËØØË°®Á§∫ Metaspace Â∑≤Ë¢´Áî®Êª°ÔºåÈÄöÂ∏∏ÊòØÂõ†‰∏∫Âä†ËΩΩÁöÑ class Êï∞ÁõÆÂ§™Â§öÊàñ‰ΩìÁßØÂ§™Â§ß„ÄÇ Ê≠§Á±ªÈóÆÈ¢òÁöÑÂéüÂõ†‰∏éËß£ÂÜ≥ÊñπÊ≥ïË∑ü Permgenspace ÈùûÂ∏∏Á±ª‰ººÔºåÂèØ‰ª•ÂèÇËÄÉ„ÄÇÈúÄË¶ÅÁâπÂà´Ê≥®ÊÑèÁöÑÊòØË∞ÉÊï¥ Metaspace Á©∫Èó¥Â§ßÂ∞èÁöÑÂêØÂä®ÂèÇÊï∞‰∏∫ -XX:MaxMetaspaceSize„ÄÇ Unable to create new native thread ÊØè‰∏™ Java Á∫øÁ®ãÈÉΩÈúÄË¶ÅÂç†Áî®‰∏ÄÂÆöÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂΩì JVM ÂêëÂ∫ïÂ±ÇÊìç‰ΩúÁ≥ªÁªüËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ native Á∫øÁ®ãÊó∂ÔºåÂ¶ÇÊûúÊ≤°ÊúâË∂≥Â§üÁöÑËµÑÊ∫êÂàÜÈÖçÂ∞±‰ºöÊä•Ê≠§Á±ªÈîôËØØ„ÄÇ ÂéüÂõ†ÂàÜÊûê JVM Âêë OS ËØ∑Ê±ÇÂàõÂª∫ native Á∫øÁ®ãÂ§±Ë¥•ÔºåÂ∞±‰ºöÊäõÂá∫ Unableto create new native threadÔºåÂ∏∏ËßÅÁöÑÂéüÂõ†ÂåÖÊã¨‰ª•‰∏ãÂá†Á±ªÔºö 1„ÄÅÁ∫øÁ®ãÊï∞Ë∂ÖËøáÊìç‰ΩúÁ≥ªÁªüÊúÄÂ§ßÁ∫øÁ®ãÊï∞ ulimit ÈôêÂà∂Ôºõ 2„ÄÅÁ∫øÁ®ãÊï∞Ë∂ÖËøá kernel.pid_maxÔºàÂè™ËÉΩÈáçÂêØÔºâÔºõ 3„ÄÅnative ÂÜÖÂ≠ò‰∏çË∂≥Ôºõ ËØ•ÈóÆÈ¢òÂèëÁîüÁöÑÂ∏∏ËßÅËøáÁ®ã‰∏ªË¶ÅÂåÖÊã¨‰ª•‰∏ãÂá†Ê≠•Ôºö 1„ÄÅJVM ÂÜÖÈÉ®ÁöÑÂ∫îÁî®Á®ãÂ∫èËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ Java Á∫øÁ®ãÔºõ 2„ÄÅJVM native ÊñπÊ≥ï‰ª£ÁêÜ‰∫ÜËØ•Ê¨°ËØ∑Ê±ÇÔºåÂπ∂ÂêëÊìç‰ΩúÁ≥ªÁªüËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™ native Á∫øÁ®ãÔºõ 3„ÄÅÊìç‰ΩúÁ≥ªÁªüÂ∞ùËØïÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ native Á∫øÁ®ãÔºåÂπ∂‰∏∫ÂÖ∂ÂàÜÈÖçÂÜÖÂ≠òÔºõ 4„ÄÅÂ¶ÇÊûúÊìç‰ΩúÁ≥ªÁªüÁöÑËôöÊãüÂÜÖÂ≠òÂ∑≤ËÄóÂ∞ΩÔºåÊàñÊòØÂèóÂà∞ 32 ‰ΩçËøõÁ®ãÁöÑÂú∞ÂùÄÁ©∫Èó¥ÈôêÂà∂ÔºåÊìç‰ΩúÁ≥ªÁªüÂ∞±‰ºöÊãíÁªùÊú¨Ê¨° native ÂÜÖÂ≠òÂàÜÈÖçÔºõ 5„ÄÅJVM Â∞ÜÊäõÂá∫ java.lang.OutOfMemoryError:Unable to create new native thread ÈîôËØØ„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à 1„ÄÅÂçáÁ∫ßÈÖçÁΩÆÔºå‰∏∫Êú∫Âô®Êèê‰æõÊõ¥Â§öÁöÑÂÜÖÂ≠òÔºõ 2„ÄÅÈôç‰Ωé Java Heap Space Â§ßÂ∞èÔºõ 3„ÄÅ‰øÆÂ§çÂ∫îÁî®Á®ãÂ∫èÁöÑÁ∫øÁ®ãÊ≥ÑÊºèÈóÆÈ¢òÔºõ 4„ÄÅÈôêÂà∂Á∫øÁ®ãÊ±†Â§ßÂ∞èÔºõ 5„ÄÅ‰ΩøÁî® -Xss ÂèÇÊï∞ÂáèÂ∞ëÁ∫øÁ®ãÊ†àÁöÑÂ§ßÂ∞èÔºõ 6„ÄÅË∞ÉÈ´ò OS Â±ÇÈù¢ÁöÑÁ∫øÁ®ãÊúÄÂ§ßÊï∞ÔºöÊâßË°å ulimia-a Êü•ÁúãÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÈôêÂà∂Ôºå‰ΩøÁî® ulimit-u xxx Ë∞ÉÊï¥ÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÈôêÂà∂„ÄÇ ulimit -a .... ÁúÅÁï•ÈÉ®ÂàÜÂÜÖÂÆπ ..... max user processes (-u) 16384 Out of swap space? ËØ•ÈîôËØØË°®Á§∫ÊâÄÊúâÂèØÁî®ÁöÑËôöÊãüÂÜÖÂ≠òÂ∑≤Ë¢´ËÄóÂ∞Ω„ÄÇËôöÊãüÂÜÖÂ≠òÔºàVirtual MemoryÔºâÁî±Áâ©ÁêÜÂÜÖÂ≠òÔºàPhysical MemoryÔºâÂíå‰∫§Êç¢Á©∫Èó¥ÔºàSwap SpaceÔºâ‰∏§ÈÉ®ÂàÜÁªÑÊàê„ÄÇÂΩìËøêË°åÊó∂Á®ãÂ∫èËØ∑Ê±ÇÁöÑËôöÊãüÂÜÖÂ≠òÊ∫¢Âá∫Êó∂Â∞±‰ºöÊä• Outof swap space?ÈîôËØØ„ÄÇ ÂéüÂõ†ÂàÜÊûê ËØ•ÈîôËØØÂá∫Áé∞ÁöÑÂ∏∏ËßÅÂéüÂõ†ÂåÖÊã¨‰ª•‰∏ãÂá†Á±ªÔºö 1„ÄÅÂú∞ÂùÄÁ©∫Èó¥‰∏çË∂≥Ôºõ 2„ÄÅÁâ©ÁêÜÂÜÖÂ≠òÂ∑≤ËÄóÂÖâÔºõ 3„ÄÅÂ∫îÁî®Á®ãÂ∫èÁöÑÊú¨Âú∞ÂÜÖÂ≠òÊ≥ÑÊºèÔºànative leakÔºâÔºå‰æãÂ¶Ç‰∏çÊñ≠Áî≥ËØ∑Êú¨Âú∞ÂÜÖÂ≠òÔºåÂç¥‰∏çÈáäÊîæ„ÄÇ 4„ÄÅÊâßË°å jmap-histo:live&lt;pid&gt; ÂëΩ‰ª§ÔºåÂº∫Âà∂ÊâßË°å Full GCÔºõÂ¶ÇÊûúÂá†Ê¨°ÊâßË°åÂêéÂÜÖÂ≠òÊòéÊòæ‰∏ãÈôçÔºåÂàôÂü∫Êú¨Á°ÆËÆ§‰∏∫ Direct ByteBuffer ÈóÆÈ¢ò„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à 1„ÄÅÂçáÁ∫ßÂú∞ÂùÄÁ©∫Èó¥‰∏∫ 64 bitÔºõ 2„ÄÅ‰ΩøÁî® Arthas Ê£ÄÊü•ÊòØÂê¶‰∏∫ Inflater/Deflater Ëß£ÂéãÁº©ÈóÆÈ¢òÔºåÂ¶ÇÊûúÊòØÔºåÂàôÊòæÂºèË∞ÉÁî® end ÊñπÊ≥ï„ÄÇ 3„ÄÅDirect ByteBuffer ÈóÆÈ¢òÂèØ‰ª•ÈÄöËøáÂêØÂä®ÂèÇÊï∞ -XX:MaxDirectMemorySize Ë∞É‰ΩéÈòàÂÄº„ÄÇ 4„ÄÅÂçáÁ∫ßÊúçÂä°Âô®ÈÖçÁΩÆ/ÈöîÁ¶ªÈÉ®ÁΩ≤ÔºåÈÅøÂÖç‰∫âÁî®„ÄÇ Kill process or sacrifice child Êúâ‰∏ÄÁßçÂÜÖÊ†∏‰Ωú‰∏öÔºàKernel JobÔºâÂêç‰∏∫ Out of Memory KillerÔºåÂÆÉ‰ºöÂú®ÂèØÁî®ÂÜÖÂ≠òÊûÅ‰ΩéÁöÑÊÉÖÂÜµ‰∏ã‚ÄúÊùÄÊ≠ª‚ÄùÔºàkillÔºâÊüê‰∫õËøõÁ®ã„ÄÇOOM Killer ‰ºöÂØπÊâÄÊúâËøõÁ®ãËøõË°åÊâìÂàÜÔºåÁÑ∂ÂêéÂ∞ÜËØÑÂàÜËæÉ‰ΩéÁöÑËøõÁ®ã‚ÄúÊùÄÊ≠ª‚ÄùÔºåÂÖ∑‰ΩìÁöÑËØÑÂàÜËßÑÂàôÂèØ‰ª•ÂèÇËÄÉ Surviving the Linux OOM Killer„ÄÇ ‰∏çÂêå‰∫éÂÖ∂‰ªñÁöÑ OOM ÈîôËØØÔºå Killprocessorsacrifice child ÈîôËØØ‰∏çÊòØÁî± JVM Â±ÇÈù¢Ëß¶ÂèëÁöÑÔºåËÄåÊòØÁî±Êìç‰ΩúÁ≥ªÁªüÂ±ÇÈù¢Ëß¶ÂèëÁöÑ„ÄÇ ÂéüÂõ†ÂàÜÊûê ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåLinux ÂÜÖÊ†∏ÂÖÅËÆ∏ËøõÁ®ãÁî≥ËØ∑ÁöÑÂÜÖÂ≠òÊÄªÈáèÂ§ß‰∫éÁ≥ªÁªüÂèØÁî®ÂÜÖÂ≠òÔºåÈÄöËøáËøôÁßç‚ÄúÈîôÂ≥∞Â§çÁî®‚ÄùÁöÑÊñπÂºèÂèØ‰ª•Êõ¥ÊúâÊïàÁöÑÂà©Áî®Á≥ªÁªüËµÑÊ∫ê„ÄÇ ÁÑ∂ËÄåÔºåËøôÁßçÊñπÂºè‰πü‰ºöÊó†ÂèØÈÅøÂÖçÂú∞Â∏¶Êù•‰∏ÄÂÆöÁöÑ‚ÄúË∂ÖÂçñ‚ÄùÈ£éÈô©„ÄÇ‰æãÂ¶ÇÊüê‰∫õËøõÁ®ãÊåÅÁª≠Âç†Áî®Á≥ªÁªüÂÜÖÂ≠òÔºåÁÑ∂ÂêéÂØºËá¥ÂÖ∂‰ªñËøõÁ®ãÊ≤°ÊúâÂèØÁî®ÂÜÖÂ≠ò„ÄÇÊ≠§Êó∂ÔºåÁ≥ªÁªüÂ∞ÜËá™Âä®ÊøÄÊ¥ª OOM KillerÔºåÂØªÊâæËØÑÂàÜ‰ΩéÁöÑËøõÁ®ãÔºåÂπ∂Â∞ÜÂÖ∂‚ÄúÊùÄÊ≠ª‚ÄùÔºåÈáäÊîæÂÜÖÂ≠òËµÑÊ∫ê„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à 1„ÄÅÂçáÁ∫ßÊúçÂä°Âô®ÈÖçÁΩÆ/ÈöîÁ¶ªÈÉ®ÁΩ≤ÔºåÈÅøÂÖç‰∫âÁî®„ÄÇ 2„ÄÅOOM Killer Ë∞É‰ºò„ÄÇ Requested array size exceeds VM limit JVM ÈôêÂà∂‰∫ÜÊï∞ÁªÑÁöÑÊúÄÂ§ßÈïøÂ∫¶ÔºåËØ•ÈîôËØØË°®Á§∫Á®ãÂ∫èËØ∑Ê±ÇÂàõÂª∫ÁöÑÊï∞ÁªÑË∂ÖËøáÊúÄÂ§ßÈïøÂ∫¶ÈôêÂà∂„ÄÇ JVM Âú®‰∏∫Êï∞ÁªÑÂàÜÈÖçÂÜÖÂ≠òÂâçÔºå‰ºöÊ£ÄÊü•Ë¶ÅÂàÜÈÖçÁöÑÊï∞ÊçÆÁªìÊûÑÂú®Á≥ªÁªü‰∏≠ÊòØÂê¶ÂèØÂØªÂùÄÔºåÈÄöÂ∏∏‰∏∫ Integer.MAX_VALUE-2„ÄÇ Ê≠§Á±ªÈóÆÈ¢òÊØîËæÉÁΩïËßÅÔºåÈÄöÂ∏∏ÈúÄË¶ÅÊ£ÄÊü•‰ª£Á†ÅÔºåÁ°ÆËÆ§‰∏öÂä°ÊòØÂê¶ÈúÄË¶ÅÂàõÂª∫Â¶ÇÊ≠§Â§ßÁöÑÊï∞ÁªÑÔºåÊòØÂê¶ÂèØ‰ª•ÊãÜÂàÜ‰∏∫Â§ö‰∏™ÂùóÔºåÂàÜÊâπÊâßË°å„ÄÇ Direct buffer memory Java ÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫èÈÄöËøá Direct ByteBuffer Áõ¥Êé•ËÆøÈóÆÂ†ÜÂ§ñÂÜÖÂ≠òÔºåËÆ∏Â§öÈ´òÊÄßËÉΩÁ®ãÂ∫èÈÄöËøá Direct ByteBuffer ÁªìÂêàÂÜÖÂ≠òÊò†Â∞ÑÊñá‰ª∂ÔºàMemory Mapped FileÔºâÂÆûÁé∞È´òÈÄü IO„ÄÇ ÂéüÂõ†ÂàÜÊûê Direct ByteBuffer ÁöÑÈªòËÆ§Â§ßÂ∞è‰∏∫ 64 MBÔºå‰∏ÄÊó¶‰ΩøÁî®Ë∂ÖÂá∫ÈôêÂà∂ÔºåÂ∞±‰ºöÊäõÂá∫ Directbuffer memory ÈîôËØØ„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à 1„ÄÅJava Âè™ËÉΩÈÄöËøá ByteBuffer.allocateDirect ÊñπÊ≥ï‰ΩøÁî® Direct ByteBufferÔºåÂõ†Ê≠§ÔºåÂèØ‰ª•ÈÄöËøá Arthas Á≠âÂú®Á∫øËØäÊñ≠Â∑•ÂÖ∑Êã¶Êà™ËØ•ÊñπÊ≥ïËøõË°åÊéíÊü•„ÄÇ 2„ÄÅÊ£ÄÊü•ÊòØÂê¶Áõ¥Êé•ÊàñÈó¥Êé•‰ΩøÁî®‰∫Ü NIOÔºåÂ¶Ç nettyÔºåjetty Á≠â„ÄÇ 3„ÄÅÈÄöËøáÂêØÂä®ÂèÇÊï∞ -XX:MaxDirectMemorySize Ë∞ÉÊï¥ Direct ByteBuffer ÁöÑ‰∏äÈôêÂÄº„ÄÇ 4„ÄÅÊ£ÄÊü• JVM ÂèÇÊï∞ÊòØÂê¶Êúâ -XX:+DisableExplicitGC ÈÄâÈ°πÔºåÂ¶ÇÊûúÊúâÂ∞±ÂéªÊéâÔºåÂõ†‰∏∫ËØ•ÂèÇÊï∞‰ºö‰Ωø System.gc() Â§±Êïà„ÄÇ 5„ÄÅÊ£ÄÊü•Â†ÜÂ§ñÂÜÖÂ≠ò‰ΩøÁî®‰ª£Á†ÅÔºåÁ°ÆËÆ§ÊòØÂê¶Â≠òÂú®ÂÜÖÂ≠òÊ≥ÑÊºèÔºõÊàñËÄÖÈÄöËøáÂèçÂ∞ÑË∞ÉÁî® sun.misc.Cleaner ÁöÑ clean() ÊñπÊ≥ïÊù•‰∏ªÂä®ÈáäÊîæË¢´ Direct ByteBuffer ÊåÅÊúâÁöÑÂÜÖÂ≠òÁ©∫Èó¥„ÄÇ 6„ÄÅÂÜÖÂ≠òÂÆπÈáèÁ°ÆÂÆû‰∏çË∂≥ÔºåÂçáÁ∫ßÈÖçÁΩÆ„ÄÇ Tomcat‰∏≠java.lang.OutOfMemoryError: Java heap spaceÂºÇÂ∏∏Â§ÑÁêÜ ÂéüÂõ†ÂàÜÊûê Heap sizeÔºöJVMÂ†ÜÁöÑËÆæÁΩÆÊòØÊåájavaÁ®ãÂ∫èËøêË°åËøáÁ®ã‰∏≠JVMÂèØ‰ª•Ë∞ÉÈÖç‰ΩøÁî®ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÁöÑËÆæÁΩÆ„ÄÇJVMÂú®ÂêØÂä®ÁöÑÊó∂ÂÄô‰ºöËá™Âä®ËÆæÁΩÆHeap sizeÁöÑÂÄºÔºå ÂÖ∂ÂàùÂßãÁ©∫Èó¥(Âç≥-Xms)ÊòØÁâ©ÁêÜÂÜÖÂ≠òÁöÑ1/64ÔºåÊúÄÂ§ßÁ©∫Èó¥(-Xmx)ÊòØÁâ©ÁêÜÂÜÖÂ≠òÁöÑ1/4„ÄÇ ÂèØ‰ª•Âà©Áî®JVMÊèê‰æõÁöÑ-Xmn -Xms -XmxÁ≠âÈÄâÈ°πËøõË°åËÆæÁΩÆ„ÄÇHeap size ÁöÑÂ§ßÂ∞èÊòØYoung Generation ÂíåTenured Generaion‰πãÂíå„ÄÇ ÊèêÁ§∫ÔºöÂú®JVM‰∏≠Â¶ÇÊûú98ÔºÖÁöÑÊó∂Èó¥ÊòØÁî®‰∫éGC‰∏îÂèØÁî®ÁöÑHeap size ‰∏çË∂≥2ÔºÖÁöÑÊó∂ÂÄôÂ∞ÜÊäõÂá∫Ê≠§ÂºÇÂ∏∏‰ø°ÊÅØ„ÄÇ Heap Size ÊúÄÂ§ß‰∏çË¶ÅË∂ÖËøáÂèØÁî®Áâ©ÁêÜÂÜÖÂ≠òÁöÑ80ÔºÖÔºå‰∏ÄËà¨ÁöÑË¶ÅÂ∞Ü-XmsÂíå-XmxÈÄâÈ°πËÆæÁΩÆ‰∏∫Áõ∏ÂêåÔºåËÄå-Xmn‰∏∫1/4ÁöÑ-XmxÂÄº„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à ÊâãÂä®ËÆæÁΩÆHeap sizeÔºå‰øÆÊîπTOMCAT_HOME/bin/catalina.sh Âú® 1‚Äúecho &quot;Using CATALINA_BASE: $CATALINA_BASE&quot;‚Äù ‰∏äÈù¢Âä†ÂÖ•‰ª•‰∏ãË°åÔºö 1JAVA_OPTS=&quot;-server -Xms800m -Xmx800m -XX:MaxNewSize=256m&quot; Tomcat‰∏≠java.lang.OutOfMemoryError: PermGen spaceÂºÇÂ∏∏Â§ÑÁêÜ ÂéüÂõ†ÂàÜÊûê PermGen spaceÁöÑÂÖ®Áß∞ÊòØPermanent Generation space,ÊòØÊåáÂÜÖÂ≠òÁöÑÊ∞∏‰πÖ‰øùÂ≠òÂå∫Âüü, ËøôÂùóÂÜÖÂ≠ò‰∏ªË¶ÅÊòØË¢´JVMÂ≠òÊîæClassÂíåMeta‰ø°ÊÅØÁöÑ,ClassÂú®Ë¢´LoaderÊó∂Â∞±‰ºöË¢´ÊîæÂà∞PermGen space‰∏≠, ÂÆÉÂíåÂ≠òÊîæÁ±ªÂÆû‰æã(Instance)ÁöÑHeapÂå∫Âüü‰∏çÂêå,GC(Garbage Collection)‰∏ç‰ºöÂú®‰∏ªÁ®ãÂ∫èËøêË°åÊúüÂØπ PermGen spaceËøõË°åÊ∏ÖÁêÜÔºåÊâÄ‰ª•Â¶ÇÊûú‰Ω†ÁöÑÂ∫îÁî®‰∏≠ÊúâÂæàÂ§öCLASSÁöÑËØù,Â∞±ÂæàÂèØËÉΩÂá∫Áé∞PermGen spaceÈîôËØØ, ËøôÁßçÈîôËØØÂ∏∏ËßÅÂú®webÊúçÂä°Âô®ÂØπJSPËøõË°åpre compileÁöÑÊó∂ÂÄô„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑWEB APP‰∏ãÈÉΩÁî®‰∫ÜÂ§ßÈáèÁöÑÁ¨¨‰∏âÊñπjar, ÂÖ∂Â§ßÂ∞è Ë∂ÖËøá‰∫ÜjvmÈªòËÆ§ÁöÑÂ§ßÂ∞è(4M)ÈÇ£‰πàÂ∞±‰ºö‰∫ßÁîüÊ≠§ÈîôËØØ‰ø°ÊÅØ‰∫Ü„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à ÊâãÂä®ËÆæÁΩÆMaxPermSizeÂ§ßÂ∞è ‰øÆÊîπTOMCAT_HOME/bin/catalina.sh,Âú® 1‚Äúecho &quot;Using CATALINA_BASE: $CATALINA_BASE&quot;‚Äù ‰∏äÈù¢Âä†ÂÖ•‰ª•‰∏ãË°åÔºö 1JAVA_OPTS=&quot;-server -XX:PermSize=64M -XX:MaxPermSize=128m Âª∫ËÆÆÔºöÂ∞ÜÁõ∏ÂêåÁöÑÁ¨¨‰∏âÊñπjarÊñá‰ª∂ÁßªÁΩÆÂà∞tomcat/shared/libÁõÆÂΩï‰∏ãÔºåËøôÊ†∑ÂèØ‰ª•ËææÂà∞ÂáèÂ∞ëjar ÊñáÊ°£ÈáçÂ§çÂç†Áî®ÂÜÖÂ≠òÁöÑÁõÆÁöÑ„ÄÇ]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java - Èù¢ËØïÈ¢òÊÄªÁªì]]></title>
    <url>%2Fposts%2F382a766.html</url>
    <content type="text"><![CDATA[JavaÈáåÈù¢ÊâÄÊúâÁöÑ‰∏çÂèòÁöÑÂ±ûÊÄßÈúÄË¶ÅÁî®final‰øÆÈ•∞Âêó Á≠îÔºöÊ≤°ÂøÖË¶Å„ÄÇ‰Ω†ÂèØ‰ª•ÂÆûÁé∞Áõ∏ÂêåÁöÑÂäüËÉΩÈÄöËøá‰ª•‰∏ãÊìç‰ΩúÔºö ËÆæ‰∏∫ÈùûfinalÁöÑprivate ÂèòÈáèÔºå‰∏îÂè™ÊúâÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÊâçËÉΩ‰øÆÊîπ„ÄÇ‰∏çËÆæsetÊñπÊ≥ïÔºåÂ¶ÇÊûúÊòØ‰∏Ä‰∏™ÂèØÂèòÂØπË±°Ôºå‰∏çË¶ÅÊ≥ÑÈú≤‰ªª‰ΩïÊåáÂêëËøô‰∏™ÂØπË±°ÁöÑÂºïÁî®„ÄÇ ËÆæÁΩÆ‰∏Ä‰∏™ÂºïÁî®ÂèòÈáè‰∏∫final Âè™ËÉΩÁ°Æ‰øùËøô‰∏™ÂèòÈáè‰∏ç‰ºöË¢´Ëµã‰∫à‰∏Ä‰∏™‰∏çÂêåÁöÑÂºïÁî®Ôºå‰ΩÜÊòØ‰Ω†‰ªçÁÑ∂ÂèØ‰ª•ÊîπÂèòÂºïÁî®ÂèòÈáèÁöÑÂ±ûÊÄßÂÄº„ÄÇ StringÁöÑsubString()ÂÆûÁé∞ÂéüÁêÜ Á≠îÔºösubstringÂèñÂéüÊù•stringÁöÑ‰∏ÄÈÉ®ÂàÜÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°„ÄÇËøô‰∏™ÈóÆÈ¢ò‰∏ªË¶ÅÊÉ≥ÈóÆsubstringÂèØËÉΩÂØºËá¥ÁöÑÂÜÖÂ≠òÊ≥ÑÈú≤È£éÈô©„ÄÇ Áõ¥Âà∞Java1.7Ôºå substring Êã•ÊúâÂéüÊù•ÁöÑÂ≠óÁ¨¶Êï∞ÁªÑÁöÑÂºïÁî®ÔºåËøôÊÑèÂë≥ÁùÄÂç≥‰ΩøÊòØ‰∫îÂ≠óÁ¨¶Ëøô‰πàÂ∞èÁöÑÂ≠óÁ¨¶‰∏≤Ôºå‰πüÂèØËÉΩ‰ºöÂØºËá¥‰∏Ä‰∏™1GBÂ≠óÁ¨¶Êï∞ÁªÑÊó†Ê≥ïË¢´ÂûÉÂúæÂõûÊî∂ÔºåÂõ†‰∏∫Êúâ‰∏Ä‰∏™Âº∫ÂºïÁî®„ÄÇ Ëøô‰∏™ÈóÆÈ¢òÂú®Java1.7‰∏≠Â∑≤ÁªèË¢´‰øÆÂ§çÔºåÂéüÊù•ÁöÑÂ≠óÁ¨¶Êï∞ÁªÑ‰∏ç‰ºöË¢´ÂºïÁî®Ôºå‰ΩÜÊòØ‰ºöÂØºËá¥ÂàõÂª∫substringËÄóÊó∂‰ºöÊúâÁÇπÈïøÔºå‰ª•ÂâçÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(1), Java 7‰πãÂêéÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(n)„ÄÇ Java‰∏≠Â¶Ç‰ΩïÂ§ÑÁêÜÂÜôÂ≠òÂÇ®ËøáÁ®ãÊàñËÄÖËØªÂ≠òÂÇ®ËøáÁ®ãÊó∂ÈÅáÂà∞ÁöÑÈîôËØØ Á≠îÔºö ‰∏Ä‰∏™Â≠òÂÇ®ËøáÁ®ãÂ∫îËØ•Âú®Êìç‰ΩúÈîôËØØÊó∂ËøîÂõûÈîôËØØÁ†ÅÔºå‰ΩÜÊòØÂ¶ÇÊûúÂ≠òÂÇ®ËøáÁ®ãÊú¨Ë∫´Âá∫ÈóÆÈ¢òÔºåÊçïËé∑ SQLException ÊòØÂîØ‰∏ÄÈÄâÊã©„ÄÇ Â∑•ÂéÇÊ®°ÂºèÂíåÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÊúâ‰ªÄ‰πàÂå∫Âà´ Á≠îÔºöÊäΩË±°Â∑•Âú∫Ê®°ÂºèÊèê‰æõ‰∏Ä‰∏™Â§öÂ±ÇÁ∫ßÁöÑÊäΩË±°„ÄÇËÄÉËôë‰∏çÂêåÁöÑÂ∑•ÂéÇÁªßÊâøËá™Âêå‰∏Ä‰∏™ÊäΩË±°Â∑•ÂéÇÔºå‰ª£Ë°®Âü∫‰∫éÂ∑•ÂéÇÁöÑ‰∏çÂêåÂØπË±°ÁªìÊûÑÁöÑÂàõÂª∫Ôºå‰æãÂ¶ÇÔºå AutomobileFactory,UserFactory,RoleFactoryÁ≠âÈÉΩÁªßÊâøËá™ AbstractFactory„ÄÇÊØè‰∏Ä‰∏™Áã¨Á´ãÁöÑÂ∑•ÂéÇ‰ª£Ë°®ÈÇ£ÁßçÁ±ªÂûãÁâ©‰ΩìÁöÑÂàõÈÄ†Âô®„ÄÇ ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Â∑•ÂéÇÊ®°ÂºèÂíåÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÁöÑUMLÂõæÔºö ‰ªÄ‰πàÊó∂ÂÄôÈáçÂÜô hashCode()Âíå equals()ÊñπÊ≥ï Á≠îÔºöÂΩìÈúÄË¶ÅÈÄöËøá‰∏öÂä°ÈÄªËæëÊ†°È™å‰∏§‰∏™ÂØπË±°ÊòØÂê¶Áõ∏Á≠âÔºåËÄå‰∏çÊòØÈÄöËøá‰∏§‰∏™ÂØπË±°ÊòØÂê¶ÊâßË°åÂêå‰∏ÄÂú∞ÂùÄ„ÄÇ‰æãÂ¶Ç‰∏§‰∏™ÂëòÂ∑•ÂØπË±°Âú® emp_id Áõ∏Á≠âÁöÑÊó∂ÂÄôÁõ∏Á≠âÔºåÂç≥‰ΩøÂÆÉ‰ª¨ÊòØÈÄöËøá‰∏çÂêåÁöÑ‰ª£Á†ÅÂàõÂª∫Âá∫Êù•ÁöÑ‰∏§‰∏™‰∏çÂêåÂØπË±°„ÄÇ Âè¶Â§ñÔºåÂ¶ÇÊûú‰Ω†‰ΩøÁî®‰∏Ä‰∏™ÂØπË±°‰Ωú‰∏∫ HashMapÁöÑkeyÔºå‰Ω†ÂøÖÈ°ªÈáçÂÜôËøô‰∏§‰∏™ÊñπÊ≥ï„ÄÇ ‰Ωú‰∏∫java equals-hashcodeÁ∫¶ÊùüÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂΩì‰Ω†ÈáçÂÜôequalsÁöÑÊó∂ÂÄôÔºåÂøÖÈ°ªÈáçÂÜôhashcode. Âê¶Âàô‰Ω†‰∏çËÉΩÂú®SetÔºåMapËøôÊ†∑ÁöÑÁ±ªÈáåÈù¢‰ΩøÁî®ÔºåÂõ†‰∏∫‰ªñ‰ª¨ÈÄöËøáequals()ÊñπÊ≥ïÊù•‰øùËØÅÈÄªËæëÊ≠£Á°ÆÊÄß„ÄÇ ÂèåÂºïÂè∑Áõ¥Êé•ÂàõÂª∫Â≠óÁ¨¶‰∏≤Âíå‰ΩøÁî®new()ÂàõÂª∫Â≠óÁ¨¶‰∏≤Êúâ‰ªÄ‰πàÂå∫Âà´ Á≠î: ‰ΩøÁî®new()ÂàõÂª∫StringÂØπË±°ÔºåÂÆû‰æãË¢´ÂàõÂª∫Âú®Â†Ü‰∏≠, ‰∏ç‰ºöË¢´Ê∑ªÂä†Âà∞StringÂ∏∏ÈáèÊ±†‰∏≠ÔºåÂΩìÈÄöËøáÂ≠óÈù¢ÈáèÂàõÂª∫Êó∂Ôºå‰ºöË¢´ÊîæÂà∞Â†Ü‰∏≠ÁöÑÊ∞∏‰πÖÂå∫ÁöÑStringÂ∏∏ÈáèÊ±†‰∏≠„ÄÇ Stringstr = newString(&quot;Test&quot;) ‰∏ç‰ºöÊäästrÊîæÂà∞StringÂ∏∏ÈáèÊ±†‰∏≠ÔºåÈúÄË¶ÅË∞ÉÁî®String.intern()ÊñπÊ≥ïÔºåÊâç‰ºöÊääÂÆÉÊîæÂà∞StringÂ∏∏ÈáèÊ±†‰∏≠„ÄÇ ÂΩì‰ΩøÁî®StringÂ≠óÈù¢ÈáèÂàõÂª∫StringÂØπË±°Êó∂ÔºåÂ¶ÇÈÄöËøáString s = &quot;Test&quot;, java‰ºöËá™Âä®ÊîæÂÖ•StringÂ∏∏ÈáèÊ±†‰∏≠„ÄÇ Âè¶Â§ñÔºåÂ¶ÇÊûúÊää&quot;Test&quot;ËøôÊ†∑ÁöÑStringÂ≠óÈù¢Èáè‰º†ËøõÂéªÔºå‰πü‰ºöÂàõÂª∫Âè¶Â§ñ‰∏Ä‰∏™ÂØπË±°:&quot;Test&quot; Âú®StringÂ∏∏ÈáèÊ±†„ÄÇ ‰ªÄ‰πàÊòØ‰∏çÂèØÂèòÂØπË±°ÔºåÂ¶Ç‰ΩïÂÜô‰∏Ä‰∏™‰∏çÂèØÂèòÁ±ª Á≠îÔºö‰∏çÂèØÂèòÂØπË±°ÊòØÊåáJavaÁ±ªÁöÑÂØπË±°‰∏ÄÂçïË¢´ÂàõÂª∫Ôºå‰∏çËÉΩË¢´‰øÆÊîπ„ÄÇ‰ªª‰Ωï‰∏çÂèØÂèòÂØπË±°ÂØπË±°ÁöÑ‰øÆÊîπÂú®ÂàõÂª∫Êó∂ÂÄôÂ∞±Â∑≤ÁªèÂÆåÊàêÔºå‰æãÂ¶ÇÔºåJava‰∏≠StringÊòØ‰∏çÂèØÂèòÁöÑ„ÄÇ Â§ßÂ§öÊï∞‰∏çÂèØÂèòÁ±ªÊòØfinalÁöÑ, ËøôÊ†∑ÂèØ‰ª•Èò≤Ê≠¢Âõ†Â≠êÁ±ªÈáçÂÜôÊñπÊ≥ïËÄåÂØºËá¥‰∏çÂèØÂèòÂ§±Êïà„ÄÇ ‰Ω†‰πüÂèØ‰ª•ÂÆûÁé∞Áõ∏ÂêåÁöÑÂäüËÉΩÈÄöËøáËÆ©ÊàêÂëòÈùûfinal‰ΩÜÊòØprivateÔºå‰∏îÈô§‰∫ÜÊûÑÈÄ†ÊñπÊ≥ï‰ªª‰ΩïÂÖ∂‰ªñÊñπÊ≥ïÊó†Ê≥ï‰øÆÊîπ„ÄÇ Âè¶Â§ñÔºåË¶ÅÁ°Æ‰øùÊ≤°ÊúâÊö¥Èú≤‰∏çÂèØÂèòÂØπË±°ÁöÑÂÜÖÈÉ®ÔºåÂ∞§ÂÖ∂ÊòØÂÆÉÂåÖÂê´ÂèØÂèòÊàêÂëòÁöÑÊó∂ÂÄô„ÄÇ ÂêåÊó∂ÔºåÂΩì‰Ω†‰ªéÂÆ¢Êà∑Á´ØÊé•Êî∂Âà∞ÂèØÂèòÁöÑÂØπË±°Êó∂Ôºå‰æãÂ¶Ç java.util.Date, ‰ΩøÁî®clone() ÊñπÊ≥ï Êù•Ëé∑Âèñ‰∏Ä‰∏™Áã¨Á´ãÁöÑÊã∑Ë¥ùÔºåÈò≤Ê≠¢ÊÅ∂ÊÑè‰øÆÊîπÂèØÂèòÂØπË±°Â∏¶Êù•ÁöÑÈ£éÈô©„ÄÇ Áõ∏ÂêåÁöÑ‰ºòÂåñÈúÄË¶ÅÂú®ËøîÂõû‰∏Ä‰∏™ÂèØÂèòÊàêÂëòÊó∂ÊâßË°å„ÄÇËøîÂõûÂè¶‰∏Ä‰∏™Áã¨Á´ãÊã∑Ë¥ùÁªôÂÆ¢Êà∑Á´ØÔºõ‰∏çË¶ÅËøîÂõûÂèØÂèòÂØπË±°ÁöÑÂéüÂßãÂºïÁî®„ÄÇ]]></content>
      <categories>
        <category>Èù¢ËØïÈ¢ò</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Èù¢ËØïÈ¢ò</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java - ÈîÅÊú∫Âà∂]]></title>
    <url>%2Fposts%2Fdd749e64.html</url>
    <content type="text"><![CDATA[ÂÖ¨Âπ≥ÈîÅ/ÈùûÂÖ¨Âπ≥ÈîÅ ÂÖ¨Âπ≥ÈîÅ ÊòØÊåáÂ§ö‰∏™Á∫øÁ®ãÊåâÁÖßÁî≥ËØ∑ÈîÅÁöÑÈ°∫Â∫èÊù•Ëé∑ÂèñÈîÅ„ÄÇ ÈùûÂÖ¨Âπ≥ÈîÅ ÊòØÊåáÂ§ö‰∏™Á∫øÁ®ãËé∑ÂèñÈîÅÁöÑÈ°∫Â∫èÂπ∂‰∏çÊòØÊåâÁÖßÁî≥ËØ∑ÈîÅÁöÑÈ°∫Â∫èÔºåÊúâÂèØËÉΩÂêéÁî≥ËØ∑ÁöÑÁ∫øÁ®ãÊØîÂÖàÁî≥ËØ∑ÁöÑÁ∫øÁ®ã‰ºòÂÖàËé∑ÂèñÈîÅ„ÄÇÊúâÂèØËÉΩÔºå‰ºöÈÄ†Êàê‰ºòÂÖàÁ∫ßÂèçËΩ¨ÊàñËÄÖÈ••È•øÁé∞Ë±°„ÄÇ ÂØπ‰∫éJava ReentrantLockËÄåË®ÄÔºåÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ÊåáÂÆöËØ•ÈîÅÊòØÂê¶ÊòØÂÖ¨Âπ≥ÈîÅÔºåÈªòËÆ§ÊòØÈùûÂÖ¨Âπ≥ÈîÅ„ÄÇÈùûÂÖ¨Âπ≥ÈîÅÁöÑ‰ºòÁÇπÂú®‰∫éÂêûÂêêÈáèÊØîÂÖ¨Âπ≥ÈîÅÂ§ß„ÄÇ ÂØπ‰∫éSynchronizedËÄåË®ÄÔºå‰πüÊòØ‰∏ÄÁßçÈùûÂÖ¨Âπ≥ÈîÅ„ÄÇÁî±‰∫éÂÖ∂Âπ∂‰∏çÂÉèReentrantLockÊòØÈÄöËøáAQSÁöÑÊù•ÂÆûÁé∞Á∫øÁ®ãË∞ÉÂ∫¶ÔºåÊâÄ‰ª•Âπ∂Ê≤°Êúâ‰ªª‰ΩïÂäûÊ≥ï‰ΩøÂÖ∂ÂèòÊàêÂÖ¨Âπ≥ÈîÅ„ÄÇ ÂèØÈáçÂÖ•ÈîÅ/‰∏çÂèØÈáçÂÖ•ÈîÅ ÂèØÈáçÂÖ•ÈîÅ Âπø‰πâ‰∏äÁöÑÂèØÈáçÂÖ•ÈîÅÊåáÁöÑÊòØÂèØÈáçÂ§çÂèØÈÄíÂΩíË∞ÉÁî®ÁöÑÈîÅÔºåÂú®Â§ñÂ±Ç‰ΩøÁî®ÈîÅ‰πãÂêéÔºåÂú®ÂÜÖÂ±Ç‰ªçÁÑ∂ÂèØ‰ª•‰ΩøÁî®ÔºåÂπ∂‰∏î‰∏çÂèëÁîüÊ≠ªÈîÅÔºàÂâçÊèêÂæóÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÊàñËÄÖclassÔºâÔºåËøôÊ†∑ÁöÑÈîÅÂ∞±Âè´ÂÅöÂèØÈáçÂÖ•ÈîÅ„ÄÇReentrantLockÂíåsynchronizedÈÉΩÊòØÂèØÈáçÂÖ•ÈîÅ„ÄÇ 1234567synchronized void setA() throws Exception&#123; Thread.sleep(1000); setB();&#125;synchronized void setB() throws Exception&#123; Thread.sleep(1000);&#125; ‰∏çÂèØÈáçÂÖ•ÈîÅ ‰∏çÂèØÈáçÂÖ•ÈîÅÔºå‰∏éÂèØÈáçÂÖ•ÈîÅÁõ∏ÂèçÔºå‰∏çÂèØÈÄíÂΩíË∞ÉÁî®ÔºåÈÄíÂΩíË∞ÉÁî®Â∞±ÂèëÁîüÊ≠ªÈîÅ„ÄÇ‰∏ãÈù¢Áúã‰∏Ä‰∏™‰ΩøÁî®Ëá™ÊóãÈîÅÊ®°Êãü‰∏çÂèØÈáçÂÖ•ÈîÅÁöÑ‰æãÂ≠êÔºö 123456789101112131415161718192021222324252627282930313233package main.java.com.study.lock;import java.util.concurrent.atomic.AtomicReference;/** * @author: whb * @description: Ëá™ÊóãÈîÅÊ®°Êãü‰∏çÂèØÈáçÂÖ•ÈîÅ */public class UnReentrantLock &#123; private AtomicReference&lt;Thread&gt; owner = new AtomicReference&lt;&gt;(); /** * Âä†ÈîÅ */ public void lock() &#123; Thread current = Thread.currentThread(); //ÁªèÂÖ∏ÁöÑËá™ÊóãËØ≠Ê≥ï for (; ; ) &#123; if (!owner.compareAndSet(null, current)) &#123; return; &#125; &#125; &#125; /** * Ëß£ÈîÅ */ public void unlock() &#123; Thread current = Thread.currentThread(); owner.compareAndSet(current, null); &#125;&#125; ‰ª£Á†Å‰πüÊØîËæÉÁÆÄÂçïÔºå‰ΩøÁî®ÂéüÂ≠êÂºïÁî®Êù•Â≠òÊîæÁ∫øÁ®ãÔºåÂêå‰∏ÄÁ∫øÁ®ã‰∏§Ê¨°Ë∞ÉÁî®lock()ÊñπÊ≥ïÔºåÂ¶ÇÊûú‰∏çÊâßË°åunlock()ÈáäÊîæÈîÅÁöÑËØùÔºåÁ¨¨‰∫åÊ¨°Ë∞ÉÁî®Ëá™ÊóãÁöÑÊó∂ÂÄôÂ∞±‰ºö‰∫ßÁîüÊ≠ªÈîÅÔºåËøô‰∏™ÈîÅÂ∞±‰∏çÊòØÂèØÈáçÂÖ•ÁöÑÔºåËÄåÂÆûÈôÖ‰∏äÂêå‰∏Ä‰∏™Á∫øÁ®ã‰∏çÂøÖÊØèÊ¨°ÈÉΩÂéªÈáäÊîæÈîÅÂÜçÊù•Ëé∑ÂèñÈîÅÔºåËøôÊ†∑ÁöÑË∞ÉÂ∫¶ÂàáÊç¢ÊòØÂæàËÄóËµÑÊ∫êÁöÑ„ÄÇ ÊääÂÆÉÂèòÊàêÂèØÈáçÂÖ•ÈîÅ 1234567891011121314151617181920212223242526272829303132333435363738394041424344package main.java.com.study.lock;import java.util.concurrent.atomic.AtomicReference;/** * @author: whb * @description: Ëá™ÊóãÈîÅÊ®°ÊãüÂèØÈáçÂÖ•ÈîÅ */public class ReentrantLock &#123; private AtomicReference&lt;Thread&gt; owner = new AtomicReference&lt;&gt;(); //ËÆ∞ÂΩïÈáçÂÖ•Ê¨°Êï∞ private volatile int state = 0; /** * Âä†ÈîÅ */ public void lock() &#123; Thread current = Thread.currentThread(); if (current == owner.get()) &#123; state++; return; &#125; for (; ; ) &#123; if (!owner.compareAndSet(null, current)) &#123; return; &#125; &#125; &#125; /** * ÈáäÊîæÈîÅ */ public void unlock() &#123; Thread current = Thread.currentThread(); if (current == owner.get()) &#123; if (state != 0) &#123; state--; &#125; else &#123; owner.compareAndSet(current, null); &#125; &#125; &#125;&#125; Âú®ÊâßË°åÊØèÊ¨°Êìç‰Ωú‰πãÂâçÔºåÂà§Êñ≠ÂΩìÂâçÈîÅÊåÅÊúâËÄÖÊòØÂê¶ÊòØÂΩìÂâçÂØπË±°ÔºåÈááÁî®stateËÆ°Êï∞Ôºå‰∏çÁî®ÊØèÊ¨°ÂéªÈáäÊîæÈîÅ„ÄÇ J.U.CÂåÖ‰∏≠ReentrantLock‰∏≠ÂèØÈáçÂÖ•ÈîÅÂÆûÁé∞ÔºåÁúã‰∏ãÈùûÂÖ¨Âπ≥ÈîÅÁöÑÈîÅËé∑ÂèñÂÆûÁé∞Ôºö 123456789101112131415161718final boolean nonfairTryAcquire(int acquires) &#123; final Thread current = Thread.currentThread(); int c = getState(); if (c == 0) &#123; if (compareAndSetState(0, acquires)) &#123; setExclusiveOwnerThread(current); return true; &#125; &#125; else if (current == getExclusiveOwnerThread()) &#123; int nextc = c + acquires; if (nextc &lt; 0) // overflow throw new Error("Maximum lock count exceeded"); setState(nextc); return true; &#125; return false;&#125; Âú®AQS‰∏≠Áª¥Êä§‰∫Ü‰∏Ä‰∏™private volatile int stateÊù•ËÆ°Êï∞ÈáçÂÖ•Ê¨°Êï∞ÔºåÈÅøÂÖç‰∫ÜÈ¢ëÁπÅÁöÑÊåÅÊúâÈáäÊîæÊìç‰ΩúÔºåËøôÊ†∑Êó¢ÊèêÂçá‰∫ÜÊïàÁéáÔºåÂèàÈÅøÂÖç‰∫ÜÊ≠ªÈîÅ„ÄÇ Áã¨Âç†ÈîÅ/ÂÖ±‰∫´ÈîÅ Áã¨Âç†ÈîÅ ËØ•ÈîÅÊØè‰∏ÄÊ¨°Âè™ËÉΩË¢´‰∏Ä‰∏™Á∫øÁ®ãÊâÄÊåÅÊúâ„ÄÇ ÂÖ±‰∫´ÈîÅ ËØ•ÈîÅÂèØË¢´Â§ö‰∏™Á∫øÁ®ãÂÖ±ÊúâÔºåÂÖ∏ÂûãÁöÑÂ∞±ÊòØReentrantReadWriteLockÈáåÁöÑËØªÈîÅÔºåÂÆÉÁöÑËØªÈîÅÊòØÂèØ‰ª•Ë¢´ÂÖ±‰∫´ÁöÑÔºå‰ΩÜÊòØÂÆÉÁöÑÂÜôÈîÅÁ°ÆÊØèÊ¨°Âè™ËÉΩË¢´Áã¨Âç†„ÄÇ Âè¶Â§ñËØªÈîÅÁöÑÂÖ±‰∫´ÂèØ‰øùËØÅÂπ∂ÂèëËØªÊòØÈùûÂ∏∏È´òÊïàÁöÑÔºå‰ΩÜÊòØËØªÂÜôÂíåÂÜôÂÜôÔºåÂÜôËØªÈÉΩÊòØ‰∫íÊñ•ÁöÑ„ÄÇ Áã¨Âç†ÈîÅ‰∏éÂÖ±‰∫´ÈîÅ‰πüÊòØÈÄöËøáAQSÊù•ÂÆûÁé∞ÁöÑÔºåÈÄöËøáÂÆûÁé∞‰∏çÂêåÁöÑÊñπÊ≥ïÔºåÊù•ÂÆûÁé∞Áã¨Âç†ÊàñËÄÖÂÖ±‰∫´„ÄÇÂØπ‰∫éSynchronizedËÄåË®ÄÔºåÂΩìÁÑ∂ÊòØÁã¨Âç†ÈîÅ„ÄÇ ‰∫íÊñ•ÈîÅ/ËØªÂÜôÈîÅ ‰∫íÊñ•ÈîÅ Âú®ËÆøÈóÆÂÖ±‰∫´ËµÑÊ∫ê‰πãÂâçËøõË°åÂä†ÈîÅÊìç‰ΩúÔºåÂú®ËÆøÈóÆÂÆåÊàê‰πãÂêéËøõË°åËß£ÈîÅÊìç‰Ωú„ÄÇÂä†ÈîÅÂêéÔºå‰ªª‰ΩïÂÖ∂‰ªñËØïÂõæÂÜçÊ¨°Âä†ÈîÅÁöÑÁ∫øÁ®ã‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ÂΩìÂâçËøõÁ®ãËß£ÈîÅ„ÄÇÂ¶ÇÊûúËß£ÈîÅÊó∂Êúâ‰∏Ä‰∏™‰ª•‰∏äÁöÑÁ∫øÁ®ãÈòªÂ°ûÔºåÈÇ£‰πàÊâÄÊúâËØ•ÈîÅ‰∏äÁöÑÁ∫øÁ®ãÈÉΩË¢´ÂèòÊàêÂ∞±Áª™Áä∂ÊÄÅÔºå Á¨¨‰∏Ä‰∏™Âèò‰∏∫Â∞±Áª™Áä∂ÊÄÅÁöÑÁ∫øÁ®ãÂèàÊâßË°åÂä†ÈîÅÊìç‰ΩúÔºåÈÇ£‰πàÂÖ∂‰ªñÁöÑÁ∫øÁ®ãÂèà‰ºöËøõÂÖ•Á≠âÂæÖ„ÄÇÂú®ËøôÁßçÊñπÂºè‰∏ãÔºåÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩÂ§üËÆøÈóÆË¢´‰∫íÊñ•ÈîÅ‰øùÊä§ÁöÑËµÑÊ∫ê„ÄÇ ËØªÂÜôÈîÅ ËØªÂÜôÈîÅÊó¢ÊòØ‰∫íÊñ•ÈîÅÔºåÂèàÊòØÂÖ±‰∫´ÈîÅÔºåreadÊ®°ÂºèÊòØÂÖ±‰∫´ÔºåwriteÊòØ‰∫íÊñ•(ÊéíÂÆÉÈîÅ)ÁöÑ„ÄÇËØªÂÜôÈîÅÂú®Java‰∏≠ÁöÑÂÖ∑‰ΩìÂÆûÁé∞Â∞±ÊòØReadWriteLock„ÄÇ ËØªÂÜôÈîÅÊúâ‰∏âÁßçÁä∂ÊÄÅÔºöËØªÂä†ÈîÅÁä∂ÊÄÅ„ÄÅÂÜôÂä†ÈîÅÁä∂ÊÄÅÂíå‰∏çÂä†ÈîÅÁä∂ÊÄÅ„ÄÇ ‰∏ÄÊ¨°Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•Âç†ÊúâÂÜôÊ®°ÂºèÁöÑËØªÂÜôÈîÅÔºå‰ΩÜÊòØÂ§ö‰∏™Á∫øÁ®ãÂèØ‰ª•ÂêåÊó∂Âç†ÊúâËØªÊ®°ÂºèÁöÑËØªÂÜôÈîÅ„ÄÇ Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•Âç†ÊúâÂÜôÁä∂ÊÄÅÁöÑÈîÅÔºå‰ΩÜÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂Âç†ÊúâËØªÁä∂ÊÄÅÈîÅÔºåËøô‰πüÊòØÂÆÉÂèØ‰ª•ÂÆûÁé∞È´òÂπ∂ÂèëÁöÑÂéüÂõ†„ÄÇÂΩìÂÖ∂Â§Ñ‰∫éÂÜôÁä∂ÊÄÅÈîÅ‰∏ãÔºå‰ªª‰ΩïÊÉ≥Ë¶ÅÂ∞ùËØïËé∑ÂæóÈîÅÁöÑÁ∫øÁ®ãÈÉΩ‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ÂÜôÁä∂ÊÄÅÈîÅË¢´ÈáäÊîæÔºõÂ¶ÇÊûúÊòØÂ§Ñ‰∫éËØªÁä∂ÊÄÅÈîÅ‰∏ãÔºåÂÖÅËÆ∏ÂÖ∂ÂÆÉÁ∫øÁ®ãËé∑ÂæóÂÆÉÁöÑËØªÁä∂ÊÄÅÈîÅÔºå‰ΩÜÊòØ‰∏çÂÖÅËÆ∏Ëé∑ÂæóÂÆÉÁöÑÂÜôÁä∂ÊÄÅÈîÅÔºåÁõ¥Âà∞ÊâÄÊúâÁ∫øÁ®ãÁöÑËØªÁä∂ÊÄÅÈîÅË¢´ÈáäÊîæÔºõ‰∏∫‰∫ÜÈÅøÂÖçÊÉ≥Ë¶ÅÂ∞ùËØïÂÜôÊìç‰ΩúÁöÑÁ∫øÁ®ã‰∏ÄÁõ¥Âæó‰∏çÂà∞ÂÜôÁä∂ÊÄÅÈîÅÔºåÂΩìËØªÂÜôÈîÅÊÑüÁü•Âà∞ÊúâÁ∫øÁ®ãÊÉ≥Ë¶ÅËé∑ÂæóÂÜôÁä∂ÊÄÅÈîÅÊó∂Ôºå‰æø‰ºöÈòªÂ°ûÂÖ∂ÂêéÊâÄÊúâÊÉ≥Ë¶ÅËé∑ÂæóËØªÁä∂ÊÄÅÈîÅÁöÑÁ∫øÁ®ã„ÄÇÊâÄ‰ª•ËØªÂÜôÈîÅÈùûÂ∏∏ÈÄÇÂêàËµÑÊ∫êÁöÑËØªÊìç‰ΩúËøúÂ§ö‰∫éÂÜôÊìç‰ΩúÁöÑÊÉÖÂÜµ„ÄÇ ÊÇ≤ËßÇÈîÅ/‰πêËßÇÈîÅ ÊÇ≤ËßÇÈîÅ ÊÄªÊòØÂÅáËÆæÊúÄÂùèÁöÑÊÉÖÂÜµÔºåÊØèÊ¨°ÂéªÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩËÆ§‰∏∫Âà´‰∫∫‰ºö‰øÆÊîπÔºåÊâÄ‰ª•ÊØèÊ¨°Âú®ÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩ‰ºö‰∏äÈîÅÔºåËøôÊ†∑Âà´‰∫∫ÊÉ≥ÊãøËøô‰∏™Êï∞ÊçÆÂ∞±‰ºöÈòªÂ°ûÁõ¥Âà∞ÂÆÉÊãøÂà∞ÈîÅÔºàÂÖ±‰∫´ËµÑÊ∫êÊØèÊ¨°Âè™Áªô‰∏Ä‰∏™Á∫øÁ®ã‰ΩøÁî®ÔºåÂÖ∂ÂÆÉÁ∫øÁ®ãÈòªÂ°ûÔºåÁî®ÂÆåÂêéÂÜçÊääËµÑÊ∫êËΩ¨ËÆ©ÁªôÂÖ∂ÂÆÉÁ∫øÁ®ãÔºâ„ÄÇ‰º†ÁªüÁöÑÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÈáåËæπÂ∞±Áî®Âà∞‰∫ÜÂæàÂ§öËøôÁßçÈîÅÊú∫Âà∂ÔºåÊØîÂ¶ÇË°åÈîÅÔºåË°®ÈîÅÁ≠âÔºåËØªÈîÅÔºåÂÜôÈîÅÁ≠âÔºåÈÉΩÊòØÂú®ÂÅöÊìç‰Ωú‰πãÂâçÂÖà‰∏äÈîÅ„ÄÇJava‰∏≠synchronizedÂíåReentrantLockÁ≠âÁã¨Âç†ÈîÅÂ∞±ÊòØÊÇ≤ËßÇÈîÅÊÄùÊÉ≥ÁöÑÂÆûÁé∞„ÄÇ ‰πêËßÇÈîÅ ÊÄªÊòØÂÅáËÆæÊúÄÂ•ΩÁöÑÊÉÖÂÜµÔºåÊØèÊ¨°ÂéªÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩËÆ§‰∏∫Âà´‰∫∫‰∏ç‰ºö‰øÆÊîπÔºåÊâÄ‰ª•‰∏ç‰ºö‰∏äÈîÅÔºå‰ΩÜÊòØÂú®Êõ¥Êñ∞ÁöÑÊó∂ÂÄô‰ºöÂà§Êñ≠‰∏Ä‰∏ãÂú®Ê≠§ÊúüÈó¥Âà´‰∫∫ÊúâÊ≤°ÊúâÂéªÊõ¥Êñ∞Ëøô‰∏™Êï∞ÊçÆÔºåÂèØ‰ª•‰ΩøÁî®ÁâàÊú¨Âè∑Êú∫Âà∂ÂíåCASÁÆóÊ≥ïÂÆûÁé∞„ÄÇ‰πêËßÇÈîÅÈÄÇÁî®‰∫éÂ§öËØªÁöÑÂ∫îÁî®Á±ªÂûãÔºåËøôÊ†∑ÂèØ‰ª•ÊèêÈ´òÂêûÂêêÈáèÔºåÂÉèÊï∞ÊçÆÂ∫ìÊèê‰æõÁöÑÁ±ª‰ºº‰∫éwrite_conditionÊú∫Âà∂ÔºåÂÖ∂ÂÆûÈÉΩÊòØÊèê‰æõÁöÑ‰πêËßÇÈîÅ„ÄÇÂú®Java‰∏≠java.util.concurrent.atomicÂåÖ‰∏ãÈù¢ÁöÑÂéüÂ≠êÂèòÈáèÁ±ªÂ∞±ÊòØ‰ΩøÁî®‰∫Ü‰πêËßÇÈîÅÁöÑ‰∏ÄÁßçÂÆûÁé∞ÊñπÂºèCASÂÆûÁé∞ÁöÑ„ÄÇ ÂàÜÊÆµÈîÅ ÂàÜÊÆµÈîÅÂÖ∂ÂÆûÊòØ‰∏ÄÁßçÈîÅÁöÑËÆæËÆ°ÔºåÂπ∂‰∏çÊòØÂÖ∑‰ΩìÁöÑ‰∏ÄÁßçÈîÅÔºåÂØπ‰∫éConcurrentHashMapËÄåË®ÄÔºåÂÖ∂Âπ∂ÂèëÁöÑÂÆûÁé∞Â∞±ÊòØÈÄöËøáÂàÜÊÆµÈîÅÁöÑÂΩ¢ÂºèÊù•ÂÆûÁé∞È´òÊïàÁöÑÂπ∂ÂèëÊìç‰Ωú„ÄÇ Âπ∂ÂèëÂÆπÂô®Á±ªÁöÑÂä†ÈîÅÊú∫Âà∂ÊòØÂü∫‰∫éÁ≤íÂ∫¶Êõ¥Â∞èÁöÑÂàÜÊÆµÈîÅÔºåÂàÜÊÆµÈîÅ‰πüÊòØÊèêÂçáÂ§öÂπ∂ÂèëÁ®ãÂ∫èÊÄßËÉΩÁöÑÈáçË¶ÅÊâãÊÆµ‰πã‰∏Ä„ÄÇ Âú®Âπ∂ÂèëÁ®ãÂ∫è‰∏≠Ôºå‰∏≤Ë°åÊìç‰ΩúÊòØ‰ºöÈôç‰ΩéÂèØ‰º∏Áº©ÊÄßÔºåÂπ∂‰∏î‰∏ä‰∏ãÊñáÂàáÊç¢‰πü‰ºöÂáè‰ΩéÊÄßËÉΩ„ÄÇÂú®ÈîÅ‰∏äÂèëÁîüÁ´û‰∫âÊó∂Â∞ÜÂØºËá¥Ëøô‰∏§ÁßçÈóÆÈ¢òÔºå‰ΩøÁî®Áã¨Âç†ÈîÅÊó∂‰øùÊä§ÂèóÈôêËµÑÊ∫êÁöÑÊó∂ÂÄôÔºåÂü∫Êú¨‰∏äÊòØÈááÁî®‰∏≤Ë°åÊñπÂºè‚Äî-ÊØèÊ¨°Âè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩËÆøÈóÆÂÆÉ„ÄÇÊâÄ‰ª•ÂØπ‰∫éÂèØ‰º∏Áº©ÊÄßÊù•ËØ¥ÊúÄÂ§ßÁöÑÂ®ÅËÉÅÂ∞±ÊòØÁã¨Âç†ÈîÅ„ÄÇ ‰∏âÁßçÊñπÂºèÈôç‰ΩéÈîÅÁöÑÁ´û‰∫âÁ®ãÂ∫¶Ôºö 1„ÄÅÂáèÂ∞ëÈîÅÁöÑÊåÅÊúâÊó∂Èó¥ 2„ÄÅÈôç‰ΩéÈîÅÁöÑËØ∑Ê±ÇÈ¢ëÁéá 3„ÄÅ‰ΩøÁî®Â∏¶ÊúâÂçèË∞ÉÊú∫Âà∂ÁöÑÁã¨Âç†ÈîÅÔºåËøô‰∫õÊú∫Âà∂ÂÖÅËÆ∏Êõ¥È´òÁöÑÂπ∂ Êó†ÈîÅ/ÂÅèÂêëÈîÅ/ËΩªÈáèÁ∫ßÈîÅ/ÈáçÈáèÁ∫ßÈîÅ ÈîÅÁöÑÂõõÁßçÁä∂ÊÄÅ Êó†ÈîÅÁä∂ÊÄÅÔºõ ÂÅèÂêëÈîÅÁä∂ÊÄÅÔºõ ËΩªÈáèÁ∫ßÈîÅÁä∂ÊÄÅÔºõ ÈáçÈáèÁ∫ßÈîÅÁä∂ÊÄÅÔºõ ËøôÂõõÁßçÁä∂ÊÄÅÈÉΩ‰∏çÊòØJavaËØ≠Ë®Ä‰∏≠ÁöÑÈîÅÔºåËÄåÊòØJvm‰∏∫‰∫ÜÊèêÈ´òÈîÅÁöÑËé∑Âèñ‰∏éÈáäÊîæÊïàÁéáËÄåÂÅöÁöÑ‰ºòÂåñ(‰ΩøÁî®synchronizedÊó∂)„ÄÇÈîÅÁöÑÁä∂ÊÄÅÊòØÈÄöËøáÂØπË±°ÁõëËßÜÂô®Âú®ÂØπË±°Â§¥‰∏≠ÁöÑÂ≠óÊÆµÊù•Ë°®ÊòéÁöÑ„ÄÇÂõõÁßçÁä∂ÊÄÅ‰ºöÈöèÁùÄÁ´û‰∫âÁöÑÊÉÖÂÜµÈÄêÊ∏êÂçáÁ∫ßÔºåËÄå‰∏îÊòØ‰∏çÂèØÈÄÜÁöÑËøáÁ®ãÔºåÂç≥‰∏çÂèØÈôçÁ∫ß„ÄÇ JavaÂØπË±°Â§¥ ‰ª•HotspotËôöÊãüÊú∫‰∏∫‰æãÔºåHotspotÁöÑÂØπË±°Â§¥‰∏ªË¶ÅÂåÖÊã¨‰∏§ÈÉ®ÂàÜÊï∞ÊçÆÔºöMark WordÔºàÊ†áËÆ∞Â≠óÊÆµÔºâ„ÄÅKlass PointerÔºàÁ±ªÂûãÊåáÈíàÔºâ„ÄÇ **Mark WordÔºö**ÈªòËÆ§Â≠òÂÇ®ÂØπË±°ÁöÑHashCodeÔºåÂàÜ‰ª£Âπ¥ÈæÑÂíåÈîÅÊ†áÂøó‰Ωç‰ø°ÊÅØ„ÄÇËøô‰∫õ‰ø°ÊÅØÈÉΩÊòØ‰∏éÂØπË±°Ëá™Ë∫´ÂÆö‰πâÊó†ÂÖ≥ÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•Mark WordË¢´ËÆæËÆ°Êàê‰∏Ä‰∏™ÈùûÂõ∫ÂÆöÁöÑÊï∞ÊçÆÁªìÊûÑ‰ª•‰æøÂú®ÊûÅÂ∞èÁöÑÁ©∫Èó¥ÂÜÖÂ≠òÂ≠òÂÇ®Â∞ΩÈáèÂ§öÁöÑÊï∞ÊçÆ„ÄÇÂÆÉ‰ºöÊ†πÊçÆÂØπË±°ÁöÑÁä∂ÊÄÅÂ§çÁî®Ëá™Â∑±ÁöÑÂ≠òÂÇ®Á©∫Èó¥Ôºå‰πüÂ∞±ÊòØËØ¥Âú®ËøêË°åÊúüÈó¥Mark WordÈáåÂ≠òÂÇ®ÁöÑÊï∞ÊçÆ‰ºöÈöèÁùÄÈîÅÊ†áÂøó‰ΩçÁöÑÂèòÂåñËÄåÂèòÂåñ„ÄÇ **Klass PointÔºö**ÂØπË±°ÊåáÂêëÂÆÉÁöÑÁ±ªÂÖÉÊï∞ÊçÆÁöÑÊåáÈíàÔºåËôöÊãüÊú∫ÈÄöËøáËøô‰∏™ÊåáÈíàÊù•Á°ÆÂÆöËøô‰∏™ÂØπË±°ÊòØÂì™‰∏™Á±ªÁöÑÂÆû‰æã„ÄÇ Monitor MonitorÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™ÂêåÊ≠•Â∑•ÂÖ∑Êàñ‰∏ÄÁßçÂêåÊ≠•Êú∫Âà∂ÔºåÈÄöÂ∏∏Ë¢´ÊèèËø∞‰∏∫‰∏Ä‰∏™ÂØπË±°„ÄÇÊØè‰∏Ä‰∏™JavaÂØπË±°Â∞±Êúâ‰∏ÄÊääÁúã‰∏çËßÅÁöÑÈîÅÔºåÁß∞‰∏∫ÂÜÖÈÉ®ÈîÅÊàñËÄÖMonitorÈîÅ„ÄÇ MonitorÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™ÂèØÁî®monitor recordÂàóË°®ÔºåÂêåÊó∂ËøòÊúâ‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑÂèØÁî®ÂàóË°®„ÄÇÊØè‰∏Ä‰∏™Ë¢´ÈîÅ‰ΩèÁöÑÂØπË±°ÈÉΩ‰ºöÂíå‰∏Ä‰∏™monitorÂÖ≥ËÅîÔºåÂêåÊó∂monitor‰∏≠Êúâ‰∏Ä‰∏™OwnerÂ≠óÊÆµÂ≠òÊîæÊã•ÊúâËØ•ÈîÅÁöÑÁ∫øÁ®ãÁöÑÂîØ‰∏ÄÊ†áËØÜÔºåË°®Á§∫ËØ•ÈîÅË¢´Ëøô‰∏™Á∫øÁ®ãÂç†Áî®„ÄÇ synchronizedÈÄöËøáMonitorÊù•ÂÆûÁé∞Á∫øÁ®ãÂêåÊ≠•ÔºåMonitorÊòØ‰æùËµñ‰∫éÂ∫ïÂ±ÇÁöÑÊìç‰ΩúÁ≥ªÁªüÁöÑMutex LockÔºà‰∫íÊñ•ÈîÅÔºâÊù•ÂÆûÁé∞ÁöÑÁ∫øÁ®ãÂêåÊ≠•„ÄÇ‚ÄúÈòªÂ°ûÊàñÂî§ÈÜí‰∏Ä‰∏™JavaÁ∫øÁ®ãÈúÄË¶ÅÊìç‰ΩúÁ≥ªÁªüÂàáÊç¢CPUÁä∂ÊÄÅÊù•ÂÆåÊàêÔºåËøôÁßçÁä∂ÊÄÅËΩ¨Êç¢ÈúÄË¶ÅËÄóË¥πÂ§ÑÁêÜÂô®Êó∂Èó¥„ÄÇÂ¶ÇÊûúÂêåÊ≠•‰ª£Á†ÅÂùó‰∏≠ÁöÑÂÜÖÂÆπËøá‰∫éÁÆÄÂçïÔºåÁä∂ÊÄÅËΩ¨Êç¢Ê∂àËÄóÁöÑÊó∂Èó¥ÊúâÂèØËÉΩÊØîÁî®Êà∑‰ª£Á†ÅÊâßË°åÁöÑÊó∂Èó¥ËøòË¶ÅÈïø‚Äù„ÄÇËøôÁßçÊñπÂºèÂ∞±ÊòØsynchronizedÊúÄÂàùÂÆûÁé∞ÂêåÊ≠•ÁöÑÊñπÂºèÔºåËøôÂ∞±ÊòØJDK 6‰πãÂâçsynchronizedÊïàÁéá‰ΩéÁöÑÂéüÂõ†„ÄÇËøôÁßç‰æùËµñ‰∫éÊìç‰ΩúÁ≥ªÁªüMutex LockÊâÄÂÆûÁé∞ÁöÑÈîÅÊàë‰ª¨Áß∞‰πã‰∏∫‚ÄúÈáçÈáèÁ∫ßÈîÅ‚ÄùÔºåJDK 6‰∏≠‰∏∫‰∫ÜÂáèÂ∞ëËé∑ÂæóÈîÅÂíåÈáäÊîæÈîÅÂ∏¶Êù•ÁöÑÊÄßËÉΩÊ∂àËÄóÔºåÂºïÂÖ•‰∫Ü‚ÄúÂÅèÂêëÈîÅ‚ÄùÂíå‚ÄúËΩªÈáèÁ∫ßÈîÅ‚Äù„ÄÇ ÊâÄ‰ª•ÁõÆÂâçÈîÅ‰∏ÄÂÖ±Êúâ4ÁßçÁä∂ÊÄÅÔºåÁ∫ßÂà´‰ªé‰ΩéÂà∞È´ò‰æùÊ¨°ÊòØÔºöÊó†ÈîÅ„ÄÅÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅÂíåÈáçÈáèÁ∫ßÈîÅ„ÄÇÈîÅÁä∂ÊÄÅÂè™ËÉΩÂçáÁ∫ß‰∏çËÉΩÈôçÁ∫ß„ÄÇ ‰∏ãÈù¢ÁªôÂá∫ÂõõÁßçÈîÅÁä∂ÊÄÅÂØπÂ∫îÁöÑÁöÑMark WordÂÜÖÂÆπÔºåÁÑ∂ÂêéÂÜçÂàÜÂà´ËÆ≤Ëß£ÂõõÁßçÈîÅÁä∂ÊÄÅÁöÑÊÄùË∑Ø‰ª•ÂèäÁâπÁÇπÔºö Êó†ÈîÅ Êó†ÈîÅÊ≤°ÊúâÂØπËµÑÊ∫êËøõË°åÈîÅÂÆöÔºåÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩËÉΩËÆøÈóÆÂπ∂‰øÆÊîπÂêå‰∏Ä‰∏™ËµÑÊ∫êÔºå‰ΩÜÂêåÊó∂Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩ‰øÆÊîπÊàêÂäü„ÄÇÁâπÁÇπÂ∞±ÊòØ‰øÆÊîπÊìç‰ΩúÂú®Âæ™ÁéØÂÜÖËøõË°åÔºåÁ∫øÁ®ã‰ºö‰∏çÊñ≠ÁöÑÂ∞ùËØï‰øÆÊîπÂÖ±‰∫´ËµÑÊ∫ê„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂÜ≤Á™ÅÂ∞±‰øÆÊîπÊàêÂäüÂπ∂ÈÄÄÂá∫ÔºåÂê¶ÂàôÂ∞±‰ºöÁªßÁª≠Âæ™ÁéØÂ∞ùËØï„ÄÇÂ¶ÇÊûúÊúâÂ§ö‰∏™Á∫øÁ®ã‰øÆÊîπÂêå‰∏Ä‰∏™ÂÄºÔºåÂøÖÂÆö‰ºöÊúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩ‰øÆÊîπÊàêÂäüÔºåËÄåÂÖ∂‰ªñ‰øÆÊîπÂ§±Ë¥•ÁöÑÁ∫øÁ®ã‰ºö‰∏çÊñ≠ÈáçËØïÁõ¥Âà∞‰øÆÊîπÊàêÂäü„ÄÇ‰∏äÈù¢Êàë‰ª¨‰ªãÁªçÁöÑCASÂéüÁêÜÂèäÂ∫îÁî®Âç≥ÊòØÊó†ÈîÅÁöÑÂÆûÁé∞„ÄÇÊó†ÈîÅÊó†Ê≥ïÂÖ®Èù¢‰ª£ÊõøÊúâÈîÅÔºå‰ΩÜÊó†ÈîÅÂú®Êüê‰∫õÂú∫Âêà‰∏ãÁöÑÊÄßËÉΩÊòØÈùûÂ∏∏È´òÁöÑ„ÄÇ ÂÅèÂêëÈîÅ ÂÅèÂêëÈîÅÊòØÊåá‰∏ÄÊÆµÂêåÊ≠•‰ª£Á†Å‰∏ÄÁõ¥Ë¢´‰∏Ä‰∏™Á∫øÁ®ãÊâÄËÆøÈóÆÔºåÈÇ£‰πàËØ•Á∫øÁ®ã‰ºöËá™Âä®Ëé∑ÂèñÈîÅÔºåÈôç‰ΩéËé∑ÂèñÈîÅÁöÑ‰ª£‰ª∑„ÄÇ Âú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÈîÅÊÄªÊòØÁî±Âêå‰∏ÄÁ∫øÁ®ãÂ§öÊ¨°Ëé∑ÂæóÔºå‰∏çÂ≠òÂú®Â§öÁ∫øÁ®ãÁ´û‰∫âÔºåÊâÄ‰ª•Âá∫Áé∞‰∫ÜÂÅèÂêëÈîÅ„ÄÇÂÖ∂ÁõÆÊ†áÂ∞±ÊòØÂú®Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åÂêåÊ≠•‰ª£Á†ÅÂùóÊó∂ËÉΩÂ§üÊèêÈ´òÊÄßËÉΩ„ÄÇ ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÂêåÊ≠•‰ª£Á†ÅÂùóÂπ∂Ëé∑ÂèñÈîÅÊó∂Ôºå‰ºöÂú®Mark WordÈáåÂ≠òÂÇ®ÈîÅÂÅèÂêëÁöÑÁ∫øÁ®ãID„ÄÇÂú®Á∫øÁ®ãËøõÂÖ•ÂíåÈÄÄÂá∫ÂêåÊ≠•ÂùóÊó∂‰∏çÂÜçÈÄöËøáCASÊìç‰ΩúÊù•Âä†ÈîÅÂíåËß£ÈîÅÔºåËÄåÊòØÊ£ÄÊµãMark WordÈáåÊòØÂê¶Â≠òÂÇ®ÁùÄÊåáÂêëÂΩìÂâçÁ∫øÁ®ãÁöÑÂÅèÂêëÈîÅ„ÄÇÂºïÂÖ•ÂÅèÂêëÈîÅÊòØ‰∏∫‰∫ÜÂú®Êó†Â§öÁ∫øÁ®ãÁ´û‰∫âÁöÑÊÉÖÂÜµ‰∏ãÂ∞ΩÈáèÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑËΩªÈáèÁ∫ßÈîÅÊâßË°åË∑ØÂæÑÔºåÂõ†‰∏∫ËΩªÈáèÁ∫ßÈîÅÁöÑËé∑ÂèñÂèäÈáäÊîæ‰æùËµñÂ§öÊ¨°CASÂéüÂ≠êÊåá‰ª§ÔºåËÄåÂÅèÂêëÈîÅÂè™ÈúÄË¶ÅÂú®ÁΩÆÊç¢ThreadIDÁöÑÊó∂ÂÄô‰æùËµñ‰∏ÄÊ¨°CASÂéüÂ≠êÊåá‰ª§Âç≥ÂèØ„ÄÇ ÂÅèÂêëÈîÅÂè™ÊúâÈÅáÂà∞ÂÖ∂‰ªñÁ∫øÁ®ãÂ∞ùËØïÁ´û‰∫âÂÅèÂêëÈîÅÊó∂ÔºåÊåÅÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãÊâç‰ºöÈáäÊîæÈîÅÔºåÁ∫øÁ®ã‰∏ç‰ºö‰∏ªÂä®ÈáäÊîæÂÅèÂêëÈîÅ„ÄÇÂÅèÂêëÈîÅÁöÑÊí§ÈîÄÔºåÈúÄË¶ÅÁ≠âÂæÖÂÖ®Â±ÄÂÆâÂÖ®ÁÇπÔºàÂú®Ëøô‰∏™Êó∂Èó¥ÁÇπ‰∏äÊ≤°ÊúâÂ≠óËäÇÁ†ÅÊ≠£Âú®ÊâßË°åÔºâÔºåÂÆÉ‰ºöÈ¶ñÂÖàÊöÇÂÅúÊã•ÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãÔºåÂà§Êñ≠ÈîÅÂØπË±°ÊòØÂê¶Â§Ñ‰∫éË¢´ÈîÅÂÆöÁä∂ÊÄÅ„ÄÇÊí§ÈîÄÂÅèÂêëÈîÅÂêéÊÅ¢Â§çÂà∞Êó†ÈîÅÔºàÊ†áÂøó‰Ωç‰∏∫‚Äú01‚ÄùÔºâÊàñËΩªÈáèÁ∫ßÈîÅÔºàÊ†áÂøó‰Ωç‰∏∫‚Äú00‚ÄùÔºâÁöÑÁä∂ÊÄÅ„ÄÇ ÂÅèÂêëÈîÅÂú®JDK 6Âèä‰ª•ÂêéÁöÑJVMÈáåÊòØÈªòËÆ§ÂêØÁî®ÁöÑ„ÄÇÂèØ‰ª•ÈÄöËøáJVMÂèÇÊï∞ÂÖ≥Èó≠ÂÅèÂêëÈîÅÔºö-XX:-UseBiasedLocking=falseÔºåÂÖ≥Èó≠‰πãÂêéÁ®ãÂ∫èÈªòËÆ§‰ºöËøõÂÖ•ËΩªÈáèÁ∫ßÈîÅÁä∂ÊÄÅ„ÄÇ ËΩªÈáèÁ∫ßÈîÅ ÊòØÊåáÂΩìÈîÅÊòØÂÅèÂêëÈîÅÁöÑÊó∂ÂÄôÔºåË¢´Âè¶Â§ñÁöÑÁ∫øÁ®ãÊâÄËÆøÈóÆÔºåÂÅèÂêëÈîÅÂ∞±‰ºöÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºåÂÖ∂‰ªñÁ∫øÁ®ã‰ºöÈÄöËøáËá™ÊóãÁöÑÂΩ¢ÂºèÂ∞ùËØïËé∑ÂèñÈîÅÔºå‰∏ç‰ºöÈòªÂ°ûÔºå‰ªéËÄåÊèêÈ´òÊÄßËÉΩ„ÄÇ Âú®‰ª£Á†ÅËøõÂÖ•ÂêåÊ≠•ÂùóÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÂêåÊ≠•ÂØπË±°ÈîÅÁä∂ÊÄÅ‰∏∫Êó†ÈîÅÁä∂ÊÄÅÔºàÈîÅÊ†áÂøó‰Ωç‰∏∫‚Äú01‚ÄùÁä∂ÊÄÅÔºåÊòØÂê¶‰∏∫ÂÅèÂêëÈîÅ‰∏∫‚Äú0‚ÄùÔºâÔºåËôöÊãüÊú∫È¶ñÂÖàÂ∞ÜÂú®ÂΩìÂâçÁ∫øÁ®ãÁöÑÊ†àÂ∏ß‰∏≠Âª∫Á´ã‰∏Ä‰∏™Âêç‰∏∫ÈîÅËÆ∞ÂΩïÔºàLock RecordÔºâÁöÑÁ©∫Èó¥ÔºåÁî®‰∫éÂ≠òÂÇ®ÈîÅÂØπË±°ÁõÆÂâçÁöÑMark WordÁöÑÊã∑Ë¥ùÔºåÁÑ∂ÂêéÊã∑Ë¥ùÂØπË±°Â§¥‰∏≠ÁöÑMark WordÂ§çÂà∂Âà∞ÈîÅËÆ∞ÂΩï‰∏≠„ÄÇ Êã∑Ë¥ùÊàêÂäüÂêéÔºåËôöÊãüÊú∫Â∞Ü‰ΩøÁî®CASÊìç‰ΩúÂ∞ùËØïÂ∞ÜÂØπË±°ÁöÑMark WordÊõ¥Êñ∞‰∏∫ÊåáÂêëLock RecordÁöÑÊåáÈíàÔºåÂπ∂Â∞ÜLock RecordÈáåÁöÑownerÊåáÈíàÊåáÂêëÂØπË±°ÁöÑMark Word„ÄÇ Â¶ÇÊûúËøô‰∏™Êõ¥Êñ∞Âä®‰ΩúÊàêÂäü‰∫ÜÔºåÈÇ£‰πàËøô‰∏™Á∫øÁ®ãÂ∞±Êã•Êúâ‰∫ÜËØ•ÂØπË±°ÁöÑÈîÅÔºåÂπ∂‰∏îÂØπË±°Mark WordÁöÑÈîÅÊ†áÂøó‰ΩçËÆæÁΩÆ‰∏∫‚Äú00‚ÄùÔºåË°®Á§∫Ê≠§ÂØπË±°Â§Ñ‰∫éËΩªÈáèÁ∫ßÈîÅÂÆöÁä∂ÊÄÅ„ÄÇ Â¶ÇÊûúËΩªÈáèÁ∫ßÈîÅÁöÑÊõ¥Êñ∞Êìç‰ΩúÂ§±Ë¥•‰∫ÜÔºåËôöÊãüÊú∫È¶ñÂÖà‰ºöÊ£ÄÊü•ÂØπË±°ÁöÑMark WordÊòØÂê¶ÊåáÂêëÂΩìÂâçÁ∫øÁ®ãÁöÑÊ†àÂ∏ßÔºåÂ¶ÇÊûúÊòØÂ∞±ËØ¥ÊòéÂΩìÂâçÁ∫øÁ®ãÂ∑≤ÁªèÊã•Êúâ‰∫ÜËøô‰∏™ÂØπË±°ÁöÑÈîÅÔºåÈÇ£Â∞±ÂèØ‰ª•Áõ¥Êé•ËøõÂÖ•ÂêåÊ≠•ÂùóÁªßÁª≠ÊâßË°åÔºåÂê¶ÂàôËØ¥ÊòéÂ§ö‰∏™Á∫øÁ®ãÁ´û‰∫âÈîÅ„ÄÇ Ëã•ÂΩìÂâçÂè™Êúâ‰∏Ä‰∏™Á≠âÂæÖÁ∫øÁ®ãÔºåÂàôËØ•Á∫øÁ®ãÈÄöËøáËá™ÊóãËøõË°åÁ≠âÂæÖ„ÄÇ‰ΩÜÊòØÂΩìËá™ÊóãË∂ÖËøá‰∏ÄÂÆöÁöÑÊ¨°Êï∞ÔºåÊàñËÄÖ‰∏Ä‰∏™Á∫øÁ®ãÂú®ÊåÅÊúâÈîÅÔºå‰∏Ä‰∏™Âú®Ëá™ÊóãÔºåÂèàÊúâÁ¨¨‰∏â‰∏™Êù•ËÆøÊó∂ÔºåËΩªÈáèÁ∫ßÈîÅÂçáÁ∫ß‰∏∫ÈáçÈáèÁ∫ßÈîÅ„ÄÇ ÈáçÈáèÁ∫ßÈîÅ ÂçáÁ∫ß‰∏∫ÈáçÈáèÁ∫ßÈîÅÊó∂ÔºåÈîÅÊ†áÂøóÁöÑÁä∂ÊÄÅÂÄºÂèò‰∏∫‚Äú10‚ÄùÔºåÊ≠§Êó∂Mark Word‰∏≠Â≠òÂÇ®ÁöÑÊòØÊåáÂêëÈáçÈáèÁ∫ßÈîÅÁöÑÊåáÈíàÔºåÊ≠§Êó∂Á≠âÂæÖÈîÅÁöÑÁ∫øÁ®ãÈÉΩ‰ºöËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅ„ÄÇ Ëá™ÊóãÈîÅ CASÁÆóÊ≥ï Êàë‰ª¨Áü•ÈÅìCASÁÆóÊ≥ïÊòØ‰πêËßÇÈîÅÁöÑ‰∏ÄÁßçÂÆûÁé∞ÊñπÂºèÔºåCASÁÆóÊ≥ï‰∏≠ÂèàÊ∂âÂèäÂà∞Ëá™ÊóãÈîÅÔºåÂÖàÂõûÈ°æ‰∏ãCASÁÆóÊ≥ïÔºö CASÊòØËã±ÊñáÂçïËØçCompare and SwapÔºàÊØîËæÉÂπ∂‰∫§Êç¢ÔºâÔºåÊòØ‰∏ÄÁßçÊúâÂêçÁöÑÊó†ÈîÅÁÆóÊ≥ï„ÄÇÊó†ÈîÅÁºñÁ®ãÔºåÂç≥‰∏ç‰ΩøÁî®ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÂÆûÁé∞Â§öÁ∫øÁ®ã‰πãÈó¥ÁöÑÂèòÈáèÂêåÊ≠•Ôºå‰πüÂ∞±ÊòØÂú®Ê≤°ÊúâÁ∫øÁ®ãË¢´ÈòªÂ°ûÁöÑÊÉÖÂÜµ‰∏ãÂÆûÁé∞ÂèòÈáèÁöÑÂêåÊ≠•ÔºåÊâÄ‰ª•‰πüÂè´ÈùûÈòªÂ°ûÂêåÊ≠•ÔºàNon-blocking SynchronizationÔºâ„ÄÇCASÁÆóÊ≥ïÊ∂âÂèäÂà∞‰∏â‰∏™Êìç‰ΩúÊï∞ ÈúÄË¶ÅËØªÂÜôÁöÑÂÜÖÂ≠òÂÄº V ËøõË°åÊØîËæÉÁöÑÂÄº A ÊãüÂÜôÂÖ•ÁöÑÊñ∞ÂÄº B Êõ¥Êñ∞‰∏Ä‰∏™ÂèòÈáèÁöÑÊó∂ÂÄôÔºåÂè™ÊúâÂΩìÂèòÈáèÁöÑÈ¢ÑÊúüÂÄºAÂíåÂÜÖÂ≠òÂú∞ÂùÄVÂΩì‰∏≠ÁöÑÂÆûÈôÖÂÄºÁõ∏ÂêåÊó∂ÔºåÊâç‰ºöÂ∞ÜÂÜÖÂ≠òÂú∞ÂùÄVÂØπÂ∫îÁöÑÂÄº‰øÆÊîπ‰∏∫BÔºåÂê¶Âàô‰∏ç‰ºöÊâßË°å‰ªª‰ΩïÊìç‰Ωú„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊòØ‰∏Ä‰∏™Ëá™ÊóãÊìç‰ΩúÔºåÂç≥‰∏çÊñ≠ÁöÑÈáçËØï„ÄÇ CASÂ≠òÂú®ÁöÑÈóÆÈ¢ò ABAÈóÆÈ¢ò„ÄÇCASÈúÄË¶ÅÂú®Êìç‰ΩúÂÄºÁöÑÊó∂ÂÄôÊ£ÄÊü•ÂÜÖÂ≠òÂÄºÊòØÂê¶ÂèëÁîüÂèòÂåñÔºåÊ≤°ÊúâÂèëÁîüÂèòÂåñÊâç‰ºöÊõ¥Êñ∞ÂÜÖÂ≠òÂÄº„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÂÜÖÂ≠òÂÄºÂéüÊù•ÊòØAÔºåÂêéÊù•ÂèòÊàê‰∫ÜBÔºåÁÑ∂ÂêéÂèàÂèòÊàê‰∫ÜAÔºåÈÇ£‰πàCASËøõË°åÊ£ÄÊü•Êó∂‰ºöÂèëÁé∞ÂÄºÊ≤°ÊúâÂèëÁîüÂèòÂåñÔºå‰ΩÜÊòØÂÆûÈôÖ‰∏äÊòØÊúâÂèòÂåñÁöÑ„ÄÇABAÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊÄùË∑ØÂ∞±ÊòØÂú®ÂèòÈáèÂâçÈù¢Ê∑ªÂä†ÁâàÊú¨Âè∑ÔºåÊØèÊ¨°ÂèòÈáèÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÈÉΩÊääÁâàÊú¨Âè∑Âä†‰∏ÄÔºåËøôÊ†∑ÂèòÂåñËøáÁ®ãÂ∞±‰ªé‚ÄúAÔºçBÔºçA‚ÄùÂèòÊàê‰∫Ü‚Äú1AÔºç2BÔºç3A‚Äù„ÄÇ JDK‰ªé1.5ÂºÄÂßãÊèê‰æõ‰∫ÜAtomicStampedReferenceÁ±ªÊù•Ëß£ÂÜ≥ABAÈóÆÈ¢òÔºåÂÖ∑‰ΩìÊìç‰ΩúÂ∞ÅË£ÖÂú®compareAndSet()‰∏≠„ÄÇcompareAndSet()È¶ñÂÖàÊ£ÄÊü•ÂΩìÂâçÂºïÁî®ÂíåÂΩìÂâçÊ†áÂøó‰∏éÈ¢ÑÊúüÂºïÁî®ÂíåÈ¢ÑÊúüÊ†áÂøóÊòØÂê¶Áõ∏Á≠âÔºåÂ¶ÇÊûúÈÉΩÁõ∏Á≠âÔºåÂàô‰ª•ÂéüÂ≠êÊñπÂºèÂ∞ÜÂºïÁî®ÂÄºÂíåÊ†áÂøóÁöÑÂÄºËÆæÁΩÆ‰∏∫ÁªôÂÆöÁöÑÊõ¥Êñ∞ÂÄº„ÄÇ Âæ™ÁéØÊó∂Èó¥ÈïøÂºÄÈîÄÂ§ß„ÄÇCASÊìç‰ΩúÂ¶ÇÊûúÈïøÊó∂Èó¥‰∏çÊàêÂäüÔºå‰ºöÂØºËá¥ÂÖ∂‰∏ÄÁõ¥Ëá™ÊóãÔºåÁªôCPUÂ∏¶Êù•ÈùûÂ∏∏Â§ßÁöÑÂºÄÈîÄ„ÄÇ Âè™ËÉΩ‰øùËØÅ‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÁöÑÂéüÂ≠êÊìç‰Ωú„ÄÇÂØπ‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÊâßË°åÊìç‰ΩúÊó∂ÔºåCASËÉΩÂ§ü‰øùËØÅÂéüÂ≠êÊìç‰ΩúÔºå‰ΩÜÊòØÂØπÂ§ö‰∏™ÂÖ±‰∫´ÂèòÈáèÊìç‰ΩúÊó∂ÔºåCASÊòØÊó†Ê≥ï‰øùËØÅÊìç‰ΩúÁöÑÂéüÂ≠êÊÄßÁöÑ„ÄÇ Java‰ªé1.5ÂºÄÂßãJDKÊèê‰æõ‰∫ÜAtomicReferenceÁ±ªÊù•‰øùËØÅÂºïÁî®ÂØπË±°‰πãÈó¥ÁöÑÂéüÂ≠êÊÄßÔºåÂèØ‰ª•ÊääÂ§ö‰∏™ÂèòÈáèÊîæÂú®‰∏Ä‰∏™ÂØπË±°ÈáåÊù•ËøõË°åCASÊìç‰Ωú„ÄÇ Ëá™ÊóãÈîÅ Âú®‰ªãÁªçËá™ÊóãÈîÅÂâçÔºåÊàë‰ª¨ÈúÄË¶Å‰ªãÁªç‰∏Ä‰∫õÂâçÊèêÁü•ËØÜÊù•Â∏ÆÂä©Â§ßÂÆ∂ÊòéÁôΩËá™ÊóãÈîÅÁöÑÊ¶ÇÂøµ„ÄÇ ÈòªÂ°ûÊàñÂî§ÈÜí‰∏Ä‰∏™JavaÁ∫øÁ®ãÈúÄË¶ÅÊìç‰ΩúÁ≥ªÁªüÂàáÊç¢CPUÁä∂ÊÄÅÊù•ÂÆåÊàêÔºåËøôÁßçÁä∂ÊÄÅËΩ¨Êç¢ÈúÄË¶ÅËÄóË¥πÂ§ÑÁêÜÂô®Êó∂Èó¥„ÄÇÂ¶ÇÊûúÂêåÊ≠•‰ª£Á†ÅÂùó‰∏≠ÁöÑÂÜÖÂÆπËøá‰∫éÁÆÄÂçïÔºåÁä∂ÊÄÅËΩ¨Êç¢Ê∂àËÄóÁöÑÊó∂Èó¥ÊúâÂèØËÉΩÊØîÁî®Êà∑‰ª£Á†ÅÊâßË°åÁöÑÊó∂Èó¥ËøòË¶ÅÈïø„ÄÇ Âú®ËÆ∏Â§öÂú∫ÊôØ‰∏≠ÔºåÂêåÊ≠•ËµÑÊ∫êÁöÑÈîÅÂÆöÊó∂Èó¥ÂæàÁü≠Ôºå‰∏∫‰∫ÜËøô‰∏ÄÂ∞èÊÆµÊó∂Èó¥ÂéªÂàáÊç¢Á∫øÁ®ãÔºåÁ∫øÁ®ãÊåÇËµ∑ÂíåÊÅ¢Â§çÁé∞Âú∫ÁöÑËä±Ë¥πÂèØËÉΩ‰ºöËÆ©Á≥ªÁªüÂæó‰∏çÂÅøÂ§±„ÄÇÂ¶ÇÊûúÁâ©ÁêÜÊú∫Âô®ÊúâÂ§ö‰∏™Â§ÑÁêÜÂô®ÔºåËÉΩÂ§üËÆ©‰∏§‰∏™Êàñ‰ª•‰∏äÁöÑÁ∫øÁ®ãÂêåÊó∂Âπ∂Ë°åÊâßË°åÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ËÆ©ÂêéÈù¢ÈÇ£‰∏™ËØ∑Ê±ÇÈîÅÁöÑÁ∫øÁ®ã‰∏çÊîæÂºÉCPUÁöÑÊâßË°åÊó∂Èó¥ÔºåÁúãÁúãÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÊòØÂê¶ÂæàÂø´Â∞±‰ºöÈáäÊîæÈîÅ„ÄÇ ËÄå‰∏∫‰∫ÜËÆ©ÂΩìÂâçÁ∫øÁ®ã‚ÄúÁ®çÁ≠â‰∏Ä‰∏ã‚ÄùÔºåÊàë‰ª¨ÈúÄËÆ©ÂΩìÂâçÁ∫øÁ®ãËøõË°åËá™ÊóãÔºåÂ¶ÇÊûúÂú®Ëá™ÊóãÂÆåÊàêÂêéÂâçÈù¢ÈîÅÂÆöÂêåÊ≠•ËµÑÊ∫êÁöÑÁ∫øÁ®ãÂ∑≤ÁªèÈáäÊîæ‰∫ÜÈîÅÔºåÈÇ£‰πàÂΩìÂâçÁ∫øÁ®ãÂ∞±ÂèØ‰ª•‰∏çÂøÖÈòªÂ°ûËÄåÊòØÁõ¥Êé•Ëé∑ÂèñÂêåÊ≠•ËµÑÊ∫êÔºå‰ªéËÄåÈÅøÂÖçÂàáÊç¢Á∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇËøôÂ∞±ÊòØËá™ÊóãÈîÅ„ÄÇ 1234567891011121314public class SpinLock &#123; private AtomicReference&lt;Thread&gt; cas = new AtomicReference&lt;Thread&gt;(); public void lock() &#123; Thread current = Thread.currentThread(); // Âà©Áî®CAS while (!cas.compareAndSet(null, current)) &#123; // DO nothing &#125; &#125; public void unlock() &#123; Thread current = Thread.currentThread(); cas.compareAndSet(current, null); &#125;&#125; lockÔºà)ÊñπÊ≥ïÂà©Áî®ÁöÑCASÔºåÂΩìÁ¨¨‰∏Ä‰∏™Á∫øÁ®ãAËé∑ÂèñÈîÅÁöÑÊó∂ÂÄôÔºåËÉΩÂ§üÊàêÂäüËé∑ÂèñÂà∞Ôºå‰∏ç‰ºöËøõÂÖ•whileÂæ™ÁéØÔºåÂ¶ÇÊûúÊ≠§Êó∂Á∫øÁ®ãAÊ≤°ÊúâÈáäÊîæÈîÅÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ãBÂèàÊù•Ëé∑ÂèñÈîÅÔºåÊ≠§Êó∂Áî±‰∫é‰∏çÊª°Ë∂≥CASÔºåÊâÄ‰ª•Â∞±‰ºöËøõÂÖ•whileÂæ™ÁéØÔºå‰∏çÊñ≠Âà§Êñ≠ÊòØÂê¶Êª°Ë∂≥CASÔºåÁõ¥Âà∞AÁ∫øÁ®ãË∞ÉÁî®unlockÊñπÊ≥ïÈáäÊîæ‰∫ÜËØ•ÈîÅ„ÄÇ Ëá™ÊóãÈîÅÁöÑÁº∫Èô∑ Â¶ÇÊûúÊüê‰∏™Á∫øÁ®ãÊåÅÊúâÈîÅÁöÑÊó∂Èó¥ËøáÈïøÔºåÂ∞±‰ºöÂØºËá¥ÂÖ∂ÂÆÉÁ≠âÂæÖËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ãËøõÂÖ•Âæ™ÁéØÁ≠âÂæÖÔºåÊ∂àËÄóCPU„ÄÇ‰ΩøÁî®‰∏çÂΩì‰ºöÈÄ†ÊàêCPU‰ΩøÁî®ÁéáÊûÅÈ´ò„ÄÇÊâÄ‰ª•ÔºåËá™ÊóãÁ≠âÂæÖÁöÑÊó∂Èó¥ÂøÖÈ°ªË¶ÅÊúâ‰∏ÄÂÆöÁöÑÈôêÂ∫¶ÔºåÂ¶ÇÊûúËá™ÊóãË∂ÖËøá‰∫ÜÈôêÂÆöÊ¨°Êï∞ÔºàÈªòËÆ§ÊòØ10Ê¨°ÔºåÂèØ‰ª•‰ΩøÁî®-XX:PreBlockSpinÊù•Êõ¥ÊîπÔºâÊ≤°ÊúâÊàêÂäüËé∑ÂæóÈîÅÔºåÂ∞±Â∫îÂΩìÊåÇËµ∑Á∫øÁ®ã„ÄÇ ‰∏äÈù¢JavaÂÆûÁé∞ÁöÑËá™ÊóãÈîÅ‰∏çÊòØÂÖ¨Âπ≥ÁöÑÔºåÂç≥Êó†Ê≥ïÊª°Ë∂≥Á≠âÂæÖÊó∂Èó¥ÊúÄÈïøÁöÑÁ∫øÁ®ã‰ºòÂÖàËé∑ÂèñÈîÅ„ÄÇ‰∏çÂÖ¨Âπ≥ÁöÑÈîÅÂ∞±‰ºöÂ≠òÂú®‚ÄúÁ∫øÁ®ãÈ••È•ø‚ÄùÈóÆÈ¢ò„ÄÇ Ëá™ÊóãÈîÅÁöÑ‰ºòÁÇπ Ëá™ÊóãÈîÅ‰∏ç‰ºö‰ΩøÁ∫øÁ®ãÁä∂ÊÄÅÂèëÁîüÂàáÊç¢Ôºå‰∏ÄÁõ¥Â§Ñ‰∫éÁî®Êà∑ÊÄÅÔºåÂç≥Á∫øÁ®ã‰∏ÄÁõ¥ÈÉΩÊòØactiveÁöÑÔºõ‰∏ç‰ºö‰ΩøÁ∫øÁ®ãËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÔºåÂáèÂ∞ë‰∫Ü‰∏çÂøÖË¶ÅÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåÊâßË°åÈÄüÂ∫¶Âø´ ÈùûËá™ÊóãÈîÅÂú®Ëé∑Âèñ‰∏çÂà∞ÈîÅÁöÑÊó∂ÂÄô‰ºöËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÔºå‰ªéËÄåËøõÂÖ•ÂÜÖÊ†∏ÊÄÅÔºåÂΩìËé∑ÂèñÂà∞ÈîÅÁöÑÊó∂ÂÄôÈúÄË¶Å‰ªéÂÜÖÊ†∏ÊÄÅÊÅ¢Â§çÔºåÈúÄË¶ÅÁ∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢„ÄÇ ÔºàÁ∫øÁ®ãË¢´ÈòªÂ°ûÂêé‰æøËøõÂÖ•ÂÜÖÊ†∏ÔºàLinuxÔºâË∞ÉÂ∫¶Áä∂ÊÄÅÔºåËøô‰∏™‰ºöÂØºËá¥Á≥ªÁªüÂú®Áî®Êà∑ÊÄÅ‰∏éÂÜÖÊ†∏ÊÄÅ‰πãÈó¥Êù•ÂõûÂàáÊç¢Ôºå‰∏•ÈáçÂΩ±ÂìçÈîÅÁöÑÊÄßËÉΩÔºâ ÈÄÇÂ∫îÊÄßËá™ÊóãÈîÅ Ëá™ÊóãÈîÅÂú®JDK1.4.2‰∏≠ÂºïÂÖ•Ôºå‰ΩøÁî®-XX:+UseSpinningÊù•ÂºÄÂêØ„ÄÇJDK 6‰∏≠Âèò‰∏∫ÈªòËÆ§ÂºÄÂêØÔºåÂπ∂‰∏îÂºïÂÖ•‰∫ÜËá™ÈÄÇÂ∫îÁöÑËá™ÊóãÈîÅÔºàÈÄÇÂ∫îÊÄßËá™ÊóãÈîÅÔºâ„ÄÇ Ëá™ÈÄÇÂ∫îÊÑèÂë≥ÁùÄËá™ÊóãÁöÑÊó∂Èó¥ÔºàÊ¨°Êï∞Ôºâ‰∏çÂÜçÂõ∫ÂÆöÔºåËÄåÊòØÁî±Ââç‰∏ÄÊ¨°Âú®Âêå‰∏Ä‰∏™ÈîÅ‰∏äÁöÑËá™ÊóãÊó∂Èó¥ÂèäÈîÅÁöÑÊã•ÊúâËÄÖÁöÑÁä∂ÊÄÅÊù•ÂÜ≥ÂÆö„ÄÇÂ¶ÇÊûúÂú®Âêå‰∏Ä‰∏™ÈîÅÂØπË±°‰∏äÔºåËá™ÊóãÁ≠âÂæÖÂàöÂàöÊàêÂäüËé∑ÂæóËøáÈîÅÔºåÂπ∂‰∏îÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÊ≠£Âú®ËøêË°å‰∏≠ÔºåÈÇ£‰πàËôöÊãüÊú∫Â∞±‰ºöËÆ§‰∏∫ËøôÊ¨°Ëá™Êóã‰πüÊòØÂæàÊúâÂèØËÉΩÂÜçÊ¨°ÊàêÂäüÔºåËøõËÄåÂÆÉÂ∞ÜÂÖÅËÆ∏Ëá™ÊóãÁ≠âÂæÖÊåÅÁª≠Áõ∏ÂØπÊõ¥ÈïøÁöÑÊó∂Èó¥„ÄÇÂ¶ÇÊûúÂØπ‰∫éÊüê‰∏™ÈîÅÔºåËá™ÊóãÂæàÂ∞ëÊàêÂäüËé∑ÂæóËøáÔºåÈÇ£Âú®‰ª•ÂêéÂ∞ùËØïËé∑ÂèñËøô‰∏™ÈîÅÊó∂Â∞ÜÂèØËÉΩÁúÅÁï•ÊéâËá™ÊóãËøáÁ®ãÔºåÁõ¥Êé•ÈòªÂ°ûÁ∫øÁ®ãÔºåÈÅøÂÖçÊµ™Ë¥πÂ§ÑÁêÜÂô®ËµÑÊ∫ê„ÄÇ Âú®Ëá™ÊóãÈîÅ‰∏≠ Âè¶Êúâ‰∏âÁßçÂ∏∏ËßÅÁöÑÈîÅÂΩ¢Âºè:TicketLock„ÄÅCLHlockÂíåMCSlock„ÄÇ]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÊÄßËÉΩ‰ºòÂåñ]]></title>
    <url>%2Fposts%2F18d8d4e.html</url>
    <content type="text"><![CDATA[Âï¶Âï¶Âï¶Âï¶Âï¶Âï¶Âï¶Âï¶Âï¶]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java - LongAdder]]></title>
    <url>%2Fposts%2Fd182cfa5.html</url>
    <content type="text"><![CDATA[CASÊúâÊ≤°ÊúâÈóÆÈ¢òÂë¢ÔºüËÇØÂÆöÊòØÊúâÁöÑ„ÄÇÊØîÂ¶ÇËØ¥Â§ßÈáèÁöÑÁ∫øÁ®ãÂêåÊó∂Âπ∂Âèë‰øÆÊîπ‰∏Ä‰∏™AtomicLongÔºåÂèØËÉΩÊúâÂæàÂ§öÁ∫øÁ®ã‰ºö‰∏çÂÅúÁöÑËá™ÊóãÔºåËøõÂÖ•‰∏Ä‰∏™Êó†ÈôêÈáçÂ§çÁöÑÂæ™ÁéØ‰∏≠„ÄÇ Ëøô‰∫õÁ∫øÁ®ã‰∏çÂÅúÂú∞Ëé∑ÂèñÂÄºÔºåÁÑ∂ÂêéÂèëËµ∑CASÊìç‰ΩúÔºå‰ΩÜÊòØÂèëÁé∞Ëøô‰∏™ÂÄºË¢´Âà´‰∫∫ÊîπËøá‰∫ÜÔºå‰∫éÊòØÂÜçÊ¨°ËøõÂÖ•‰∏ã‰∏Ä‰∏™Âæ™ÁéØÔºåËé∑ÂèñÂÄºÔºåÂèëËµ∑CASÊìç‰ΩúÂèàÂ§±Ë¥•‰∫ÜÔºåÂÜçÊ¨°ËøõÂÖ•‰∏ã‰∏Ä‰∏™Âæ™ÁéØ„ÄÇ Âú®Â§ßÈáèÁ∫øÁ®ãÈ´òÂπ∂ÂèëÊõ¥Êñ∞AtomicLongÁöÑÊó∂ÂÄôÔºåËøôÁßçÈóÆÈ¢òÂèØËÉΩ‰ºöÊØîËæÉÊòéÊòæÔºåÂØºËá¥Â§ßÈáèÁ∫øÁ®ãÁ©∫Âæ™ÁéØÔºåËá™ÊóãËΩ¨ÔºåÊÄßËÉΩÂíåÊïàÁéáÈÉΩ‰∏çÊòØÁâπÂà´Â•Ω„ÄÇ ‰∫éÊòØÔºåJava 8Êé®Âá∫‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÔºåLongAdderÔºåÂú®AtomicLongÁöÑÂü∫Á°Ä‰∏äËøõË°å‰∫ÜÁÉ≠ÁÇπÂàÜÁ¶ªÔºåÁÉ≠ÁÇπÂàÜÁ¶ªÁ±ª‰ºº‰∫éÊúâÈîÅÊìç‰Ωú‰∏≠ÁöÑÂáèÂ∞èÈîÅÁ≤íÂ∫¶ÔºåÂ∞ùËØï‰ΩøÁî®ÂàÜÊÆµCAS‰ª•ÂèäËá™Âä®ÂàÜÊÆµËøÅÁßªÁöÑÊñπÂºèÊù•Â§ßÂπÖÂ∫¶ÊèêÂçáÂ§öÁ∫øÁ®ãÈ´òÂπ∂ÂèëÊâßË°åCASÊìç‰ΩúÁöÑÊÄßËÉΩÔºÅÂú®Êó†ÈîÅ‰∏≠Ôºå‰πüÂèØ‰ª•Áî®Á±ª‰ººÁöÑÊñπÂºèÊù•Â¢ûÂä†CASÁöÑÊàêÂäüÁéáÔºå‰ªéËÄåÊèêÈ´òÊÄßËÉΩ„ÄÇ LongAdderÂéüÁêÜÂ¶Ç‰∏ãÂõæÔºö AtomicLongÁöÑÂÆûÁé∞ÊñπÂºèÊòØÂÜÖÈÉ®Êúâ‰∏™value ÂèòÈáèÔºåÂΩìÂ§öÁ∫øÁ®ãÂπ∂ÂèëËá™Â¢ûÔºåËá™ÂáèÊó∂ÔºåÂùáÈÄöËøáCAS Êåá‰ª§‰ªéÊú∫Âô®Êåá‰ª§Á∫ßÂà´Êìç‰Ωú‰øùËØÅÂπ∂ÂèëÁöÑÂéüÂ≠êÊÄß„ÄÇÂîØ‰∏Ä‰ºöÂà∂Á∫¶AtomicLongÈ´òÊïàÁöÑÂéüÂõ†ÊòØÈ´òÂπ∂ÂèëÔºåÈ´òÂπ∂ÂèëÊÑèÂë≥ÁùÄCASÁöÑÂ§±Ë¥•Âá†ÁéáÊõ¥È´òÔºå ÈáçËØïÊ¨°Êï∞Êõ¥Â§öÔºåË∂äÂ§öÁ∫øÁ®ãÈáçËØïÔºåCASÂ§±Ë¥•Âá†ÁéáÂèàË∂äÈ´òÔºåÂèòÊàêÊÅ∂ÊÄßÂæ™ÁéØÔºåAtomicLongÊïàÁéáÈôç‰Ωé„ÄÇ Âú®LongAdderÁöÑÂ∫ïÂ±ÇÂÆûÁé∞‰∏≠ÔºåÈ¶ñÂÖàÊúâ‰∏Ä‰∏™baseÂÄºÔºåÂàöÂºÄÂßãÂ§öÁ∫øÁ®ãÊù•‰∏çÂÅúÁöÑÁ¥ØÂä†Êï∞ÂÄºÔºåÈÉΩÊòØÂØπbaseËøõË°åÁ¥ØÂä†ÁöÑÔºåÊØîÂ¶ÇÂàöÂºÄÂßãÁ¥ØÂä†Êàê‰∫Übase = 5„ÄÇ Êé•ÁùÄÂ¶ÇÊûúÂèëÁé∞Âπ∂ÂèëÊõ¥Êñ∞ÁöÑÁ∫øÁ®ãÊï∞ÈáèËøáÂ§öÔºåÂ∞±‰ºöÂºÄÂßãÊñΩË°åÂàÜÊÆµCASÁöÑÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØÂÜÖÈÉ®‰ºöÊêû‰∏Ä‰∏™CellÊï∞ÁªÑÔºåÊØè‰∏™Êï∞ÁªÑÊòØ‰∏Ä‰∏™Êï∞ÂÄºÂàÜÊÆµ„ÄÇ ËøôÊó∂ÔºåËÆ©Â§ßÈáèÁöÑÁ∫øÁ®ãÂàÜÂà´ÂéªÂØπ‰∏çÂêåCellÂÜÖÈÉ®ÁöÑvalueÂÄºËøõË°åCASÁ¥ØÂä†Êìç‰ΩúÔºåËøôÊ†∑Â∞±ÊääCASËÆ°ÁÆóÂéãÂäõÂàÜÊï£Âà∞‰∫Ü‰∏çÂêåÁöÑCellÂàÜÊÆµÊï∞ÂÄº‰∏≠‰∫ÜÔºÅ ËøôÊ†∑Â∞±ÂèØ‰ª•Â§ßÂπÖÂ∫¶ÁöÑÈôç‰ΩéÂ§öÁ∫øÁ®ãÂπ∂ÂèëÊõ¥Êñ∞Âêå‰∏Ä‰∏™Êï∞ÂÄºÊó∂Âá∫Áé∞ÁöÑÊó†ÈôêÂæ™ÁéØÁöÑÈóÆÈ¢òÔºåÂ§ßÂπÖÂ∫¶ÊèêÂçá‰∫ÜÂ§öÁ∫øÁ®ãÂπ∂ÂèëÊõ¥Êñ∞Êï∞ÂÄºÁöÑÊÄßËÉΩÂíåÊïàÁéáÔºÅ ËÄå‰∏î‰ªñÂÜÖÈÉ®ÂÆûÁé∞‰∫ÜËá™Âä®ÂàÜÊÆµËøÅÁßªÁöÑÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØÂ¶ÇÊûúÊüê‰∏™CellÁöÑvalueÊâßË°åCASÂ§±Ë¥•‰∫ÜÔºåÈÇ£‰πàÂ∞±‰ºöËá™Âä®ÂéªÊâæÂè¶Â§ñ‰∏Ä‰∏™CellÂàÜÊÆµÂÜÖÁöÑvalueÂÄºËøõË°åCASÊìç‰Ωú„ÄÇ ËøôÊ†∑‰πüËß£ÂÜ≥‰∫ÜÁ∫øÁ®ãÁ©∫ÊóãËΩ¨„ÄÅËá™Êóã‰∏çÂÅúÁ≠âÂæÖÊâßË°åCASÊìç‰ΩúÁöÑÈóÆÈ¢òÔºåËÆ©‰∏Ä‰∏™Á∫øÁ®ãËøáÊù•ÊâßË°åCASÊó∂ÂèØ‰ª•Â∞ΩÂø´ÁöÑÂÆåÊàêËøô‰∏™Êìç‰Ωú„ÄÇ ÊúÄÂêéÔºåÂ¶ÇÊûú‰Ω†Ë¶Å‰ªéLongAdder‰∏≠Ëé∑ÂèñÂΩìÂâçÁ¥ØÂä†ÁöÑÊÄªÂÄºÔºåÂ∞±‰ºöÊääbaseÂÄºÂíåÊâÄÊúâCellÂàÜÊÆµÊï∞ÂÄºÂä†Ëµ∑Êù•ËøîÂõûÁªô‰Ω†„ÄÇLongAdderÊòØ‰∏ÄÁßç‰ª•Á©∫Èó¥Êç¢Êó∂Èó¥ÁöÑÁ≠ñÁï•„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>J.U.C</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>J.U.C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL-Á¥¢ÂºïÁªìÊûÑ]]></title>
    <url>%2Fposts%2F3bf347e4.html</url>
    <content type="text"><![CDATA[BTreeÁ¥¢Âºï BTreeÔºàÂ§öË∑ØÊêúÁ¥¢Ê†ëÔºåÂπ∂‰∏çÊòØ‰∫åÂèâÁöÑÔºâÊòØ‰∏ÄÁßçÂ∏∏ËßÅÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ ‰∏çÈÄÇÂêàÔºö ÂçïÂàóÁ¥¢ÂºïÁöÑÂàó‰∏çËÉΩÂåÖÂê´nullÁöÑËÆ∞ÂΩïÔºåÂ§çÂêàÁ¥¢ÂºïÁöÑÂêÑ‰∏™Âàó‰∏çËÉΩÂåÖÂê´ÂêåÊó∂‰∏∫nullÁöÑËÆ∞ÂΩïÔºåÂê¶Âàô‰ºöÂÖ®Ë°®Êâ´ÊèèÔºõÁ¥¢ÂºïÂ§±ÊïàÂæàÂ§öÊó∂ÂÄôÊòØÂõ†‰∏∫ËøôÂàóÊúânullÔºåÁ©∫ÂÄº ‰∏çÈÄÇÂêàÈîÆÂÄºËæÉÂ∞ëÁöÑÂàóÔºàÈáçÂ§çÊï∞ÊçÆËæÉÂ§öÁöÑÂàóÔºâÔºõÂÅáÂ¶Ç‰Ω†Âª∫Á´ã‰∫ÜÔºå‰ºöÂèëÁîü‰ªÄ‰πàÊÉÖÂÜµÂë¢ÔºüÊü•ËØ¢ÂèçËÄå‰ºöÂèòÊÖ¢ ÂâçÂØºÊ®°Á≥äÊü•ËØ¢‰∏çËÉΩÂà©Áî®Á¥¢Âºï(like '%XX'ÊàñËÄÖlike '%XX%')ÔºåËØ•Á±ªsqlËØ≠Âè•ÂØºËá¥Á¥¢ÂºïÂ§±Êïà HashÊï£ÂàóÁ¥¢Âºï HashÊï£ÂàóÁ¥¢ÂºïÊòØÊ†πÊçÆHASHÁÆóÊ≥ïÊù•ÊûÑÂª∫ÁöÑÁ¥¢Âºï„ÄÇ ÈÄÇÂêàÔºö Á≤æÁ°ÆÊü•ÊâæÈùûÂ∏∏Âø´ÔºàÂåÖÊã¨= &lt;&gt; ÂíåinÔºâÔºåÂÖ∂Ê£ÄÁ¥¢ÊïàÁéáÈùûÂ∏∏È´òÔºåÁ¥¢ÂºïÁöÑÊ£ÄÁ¥¢ÂèØ‰ª•‰∏ÄÊ¨°ÂÆö‰ΩçÔºå‰∏çÂÉèBTree Á¥¢ÂºïÈúÄË¶Å‰ªéÊ†πËäÇÁÇπÂà∞ÊûùËäÇÁÇπÔºåÊâÄ‰ª• Hash Á¥¢ÂºïÁöÑÊü•ËØ¢ÊïàÁéáË¶ÅËøúÈ´ò‰∫é B-Tree Á¥¢Âºï„ÄÇ ‰∏çÈÄÇÂêàÔºö ‰∏çÈÄÇÂêàÊ®°Á≥äÊü•ËØ¢ÂíåËåÉÂõ¥Êü•ËØ¢ÔºàÂåÖÊã¨likeÔºå&gt;Ôºå&lt;Ôºåbetween‚Ä¶‚Ä¶andÁ≠âÔºâÔºåÁî±‰∫é Hash Á¥¢ÂºïÊØîËæÉÁöÑÊòØËøõË°å Hash ËøêÁÆó‰πãÂêéÁöÑ Hash ÂÄºÔºåÊâÄ‰ª•ÂÆÉÂè™ËÉΩÁî®‰∫éÁ≠âÂÄºÁöÑËøáÊª§Ôºå‰∏çËÉΩÁî®‰∫éÂü∫‰∫éËåÉÂõ¥ÁöÑËøáÊª§ÔºåÂõ†‰∏∫ÁªèËøáÁõ∏Â∫îÁöÑ Hash ÁÆóÊ≥ïÂ§ÑÁêÜ‰πãÂêéÁöÑ Hash ÂÄºÁöÑÂ§ßÂ∞èÂÖ≥Á≥ªÔºåÂπ∂‰∏çËÉΩ‰øùËØÅÂíåHashËøêÁÆóÂâçÂÆåÂÖ®‰∏ÄÊ†∑Ôºõ ‰∏çÈÄÇÂêàÊéíÂ∫èÔºåÊï∞ÊçÆÂ∫ìÊó†Ê≥ïÂà©Áî®Á¥¢ÂºïÁöÑÊï∞ÊçÆÊù•ÊèêÂçáÊéíÂ∫èÊÄßËÉΩÔºåÂêåÊ†∑ÊòØÂõ†‰∏∫HashÂÄºÁöÑÂ§ßÂ∞è‰∏çÁ°ÆÂÆöÔºõ Â§çÂêàÁ¥¢Âºï‰∏çËÉΩÂà©Áî®ÈÉ®ÂàÜÁ¥¢ÂºïÂ≠óÊÆµÊü•ËØ¢ÔºåHash Á¥¢ÂºïÂú®ËÆ°ÁÆó Hash ÂÄºÁöÑÊó∂ÂÄôÊòØÁªÑÂêàÁ¥¢ÂºïÈîÆÂêàÂπ∂ÂêéÂÜç‰∏ÄËµ∑ËÆ°ÁÆó Hash ÂÄºÔºåËÄå‰∏çÊòØÂçïÁã¨ËÆ°ÁÆó Hash ÂÄºÔºåÊâÄ‰ª•ÈÄöËøáÁªÑÂêàÁ¥¢ÂºïÁöÑÂâçÈù¢‰∏Ä‰∏™ÊàñÂá†‰∏™Á¥¢ÂºïÈîÆËøõË°åÊü•ËØ¢ÁöÑÊó∂ÂÄôÔºåHash Á¥¢Âºï‰πüÊó†Ê≥ïË¢´Âà©Áî®„ÄÇ ÂêåÊ†∑‰∏çÈÄÇÂêàÈîÆÂÄºËæÉÂ∞ëÁöÑÂàóÔºàÈáçÂ§çÂÄºËæÉÂ§öÁöÑÂàóÔºâÔºõ Bitmap‰ΩçÂõæÁ¥¢Âºï Â∞±ÊòØÁî®‰ΩçÂõæË°®Á§∫ÁöÑÁ¥¢ÂºïÔºåÂØπÂàóÁöÑÊØè‰∏™ÈîÆÂÄºÂª∫Á´ã‰∏Ä‰∏™‰ΩçÂõæ„ÄÇÁõ∏ÂØπ‰∫éBTreeÁ¥¢ÂºïÔºåÂç†Áî®ÁöÑÁ©∫Èó¥ÈùûÂ∏∏Â∞èÔºåÂàõÂª∫Âíå‰ΩøÁî®ÈùûÂ∏∏Âø´„ÄÇ‰ΩçÂõæÁ¥¢ÂºïÁî±‰∫éÂè™Â≠òÂÇ®ÈîÆÂÄºÁöÑËµ∑Ê≠¢RowidÂíå‰ΩçÂõæ,Âç†Áî®ÁöÑÁ©∫Èó¥ÈùûÂ∏∏Â∞ë„ÄÇ ÈÄÇÂêà ÈÄÇÂêàÂÜ≥Á≠ñÊîØÊåÅÁ≥ªÁªüÔºõ ÂΩìselect count(XX) Êó∂,ÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆÁ¥¢Âºï‰∏≠‰∏Ä‰∏™‰ΩçÂõæÂ∞±Âø´ÈÄüÂæóÂá∫ÁªüËÆ°Êï∞ÊçÆÔºõ ÂΩìÊ†πÊçÆÈîÆÂÄºÂÅöandÔºåorÊàñ in(x,y,..)Êü•ËØ¢Êó∂ÔºåÁõ¥Êé•Áî®Á¥¢ÂºïÁöÑ‰ΩçÂõæËøõË°åÊàñËøêÁÆó,Âø´ÈÄüÂæóÂá∫ÁªìÊûúË°åÊï∞ÊçÆ„ÄÇ ‰∏çÈÄÇÂêà ‰∏çÈÄÇÂêàÈîÆÂÄºËæÉÂ§öÁöÑÂàóÔºàÈáçÂ§çÂÄºËæÉÂ∞ëÁöÑÂàóÔºâÔºõ ‰∏çÈÄÇÂêàupdate„ÄÅinsert„ÄÅdeleteÈ¢ëÁπÅÁöÑÂàóÔºå‰ª£‰ª∑ÂæàÈ´ò„ÄÇÂà∞Â∫ïÊòØ‰ªÄ‰πà‰ª£‰ª∑Âë¢Ôºüupdate,insert,deleteÁöÑÊó∂ÂÄô‰ºöÈîÅ‰ΩèÈîÆÂÄº‰∏ÄÊ†∑ÁöÑË°å„ÄÇ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IDEA‰ΩøÁî®FindBugsÊèí‰ª∂]]></title>
    <url>%2Fposts%2F570da5f6.html</url>
    <content type="text"><![CDATA[‰∏ãËΩΩÂÆâË£Ö Âú®Idea‰∏≠ÔºåÊâìÂºÄ&quot;File&quot;--&gt;&quot;Settings&quot;ÔºåÊàñËÄÖ‰ΩøÁî®Âø´Êç∑ÈîÆ&quot;Ctrl+Alt+S&quot;ÊâìÂºÄËÆæÁΩÆÁ™óÂè£Ôºö Âú®ËÆæÁΩÆÁ™óÂè£ÊâæÂà∞** plugins **Ê†áÁ≠æÈ°µÔºåÁÑ∂ÂêéÁÇπÂáª‰∏ãÊñπÁöÑ ** Browse Repositories **Ôºö Âú®Êñ∞ÊâìÂºÄÁöÑBrowse RepositoriesÁ™óÂè£ÊêúÁ¥¢findbugsÔºåÁÑ∂ÂêéÁÇπÂáªInstallËøõË°åÂÆâË£ÖÔºå Âõ†‰∏∫ÊàëÂ∑≤ÁªèÂÆâË£ÖËøá‰∫ÜÔºåÊâÄ‰ª•‰∏çÂÜçÊòæÁ§∫installÊåâÈíÆÔºö ‰ΩøÁî®FindBugs ÁÆÄÂçïËØ¥ÊòéÔºö Èº†Ê†áÁßªÂä®Âà∞Âè≥ËæπÁöÑÊâÄÊúâÂõæÊ†áÔºåÁúãÁúãÊØè‰∏™ÂõæÊ†áÈÉΩÊòØ‰ªÄ‰πàÊÑèÊÄù„ÄÇÂ§ßÊ¶ÇËØ¥‰∏Ä‰∏ãÔºö Á¨¨‰∏ÄÁ´ñÂàóÁöÑÁ∫¢Ëâ≤ÂõæÊ†áÊòØÂàÜÊûêÂΩìÂâçÁöÑËøô‰∏™Êñá‰ª∂„ÄÇ ‰∏ãÈù¢ÊòØÂàÜÊûêÊòØÊüê‰∏Ä‰∏™Á±ªÔºåÈº†Ê†áÊâÄÂú®ÁöÑÈÇ£‰∏™Á±ª„ÄÇ ÂÜçÂæÄ‰∏ãÊòØÊüê‰∏™ÂåÖÔºåÊüê‰∏™Ê®°ÂùóÔºåÊï¥‰∏™È°πÁõÆÔºåÊâÄÊúâ‰øÆÊîπËøáÁöÑÊñá‰ª∂ÔºåÁ≠âÁ≠â„ÄÇ Á¨¨‰∫åÁ´ñÂàóÂàôÊòØÊéßÂà∂ÂàÜÊûêÁªìÊûúÁöÑÂ±ïÁ§∫ÊÉÖÂÜµ„ÄÇ ‰∏ãÈù¢Â∞±Êï¥‰∏™ÂÆûÈôÖÊâæÂà∞ÁöÑ‰ª£Á†ÅÁöÑÈóÆÈ¢òÔºåÂçïÁã¨ÂàÜÊûêÊüê‰∏™serviceÊñá‰ª∂ÔºåÁúã‰ª£Á†ÅÈáåÈù¢ÁöÑÈóÆÈ¢ò„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö Find BugsÁöÑÊÑèÊÄùÊòØËØ¥‰ª£Á†ÅÈáåÈù¢ÊääSimpleDateFormatÂ£∞Êòé‰∏∫ÈùôÊÄÅÂ±ûÊÄßÔºå‰ΩÜÊòØSimpleDateFormatÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑ„ÄÇ Âú®Â§öÁ∫øÁ®ã‰ΩøÁî®ÁöÑÊó∂ÂÄôÔºåÂèØËÉΩÂ∞±‰ºöÊúâÊÑèÊÉ≥‰∏çÂà∞ÁöÑÈóÆÈ¢ò„ÄÇÊâÄ‰ª•Â∞±ÊâæÂà∞‰∏™ÈóÆÈ¢òÂï¶„ÄÇ Ê†πÊçÆÊèêÁ§∫ËøõË°å‰øÆÊîπÔºåÂ¶Ç‰∏ãÔºö Âú®‰∏äÂõæ‰∏≠ÁúãÂà∞‰ª£Á†ÅÈáåÊúâÂæàÂ§öÈªÑËâ≤ÊèêÁ§∫ÔºåÂº∫Ëø´ÁóáÁöÑ‰∫∫ÁúãÁùÄÂæà‰∏çÁàΩÔºåÈÇ£ÊÄé‰πàÊää‰ª£Á†ÅÈáåÈù¢Ëøô‰∫õÈªÑËâ≤ÁöÑÊèêÁ§∫ÁªôÂÖ≥ÊéâÂë¢Ôºü ÁÇπËøô‰∏™ ** √ó ** Â∞±‰ª•Âï¶Ôºå‰ª£Á†ÅÂ∞±ÊÅ¢Â§çÊàêÂéüÊù•ÁöÑÊ†∑Â≠êÂï¶„ÄÇ Â∏∏ËßÅÁöÑÈîôËØØ‰ø°ÊÅØ Bad practice ‰ª£Á†Å‰∏≠ÁöÑ‰∏Ä‰∫õÂùè‰π†ÊÉØ Class names should start with an upper case letter ‰∏ªË¶ÅÂåÖÊã¨Á±ªÂêçÁöÑÂëΩÂêçÔºå‰ª•Â§ßÂÜôÂ≠óÊØçÂºÄÂ§¥„ÄÇ Method names should start with a lower case letter ÊñπÊ≥ïÂêç‰ª•Â∞èÂÜôÂ≠óÊØçÂºÄÂ§¥„ÄÇ Field names should start with a lower case letter Â≠óÊÆµÂêç‰ª•Â∞èÂÜôÂ≠óÊØçÂºÄÂ§¥„ÄÇ equals()method does not check for null argument equals()ÊñπÊ≥ïÂ∫îËØ•Ê£ÄÊü•ÈùûÁ©∫„ÄÇ Class defines equals() and uses Object.hashCode() ‰∏Ä‰∏™Á±ªË¶ÜÂÜô‰∫ÜequalsÊñπÊ≥ïÔºåÊ≤°ÊúâË¶ÜÂÜôhashCodeÊñπÊ≥ïÔºå‰ΩøÁî®‰∫ÜObjectÂØπË±°ÁöÑhashCodeÊñπÊ≥ï„ÄÇ Method ignores exceptional return value ÊñπÊ≥ïÂøΩÁï•ËøîÂõûÂÄºÁöÑÂºÇÂ∏∏‰ø°ÊÅØ„ÄÇ Equals method should not assume anything about the type of its argument equals(Object o)ÊñπÊ≥ï‰∏çËÉΩÂØπÂèÇÊï∞oÁöÑÁ±ªÂûãÂÅö‰ªª‰ΩïÁöÑÂÅáËÆæ„ÄÇÊØîËæÉÊ≠§ÂØπË±°‰∏éÊåáÂÆöÁöÑÂØπË±°„ÄÇÂΩì‰∏î‰ªÖÂΩìËØ•ÂèÇÊï∞‰∏ç‰∏∫ nullÔºåÂπ∂‰∏îÊòØË°®Á§∫‰∏éÊ≠§ÂØπË±°Áõ∏ÂêåÁöÑÁ±ªÂûãÁöÑÂØπË±°Êó∂ÔºåÁªìÊûúÊâç‰∏∫ true„ÄÇ Comparison of String objects using == or != Áî®==ÊàñËÄÖÔºÅ=ÂéªÊØîËæÉStringÁ±ªÂûãÁöÑÂØπË±°„ÄÇ Method might ignore exception ÊñπÊ≥ïÂèØËÉΩÂøΩÁï•ÂºÇÂ∏∏„ÄÇ Method invokes System.exit() Âú®ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®System.exit(‚Ä¶)ËØ≠Âè•ÔºåËÄÉËôëÁî®RuntimeExceptionÊù•‰ª£Êõø„ÄÇ Method ignores result of InputStream.read() InputStream.readÊñπÊ≥ïÂøΩÁï•ËøîÂõûÁöÑÂ§ö‰∏™Â≠óÁ¨¶ÔºåÂ¶ÇÊûúÂØπÁªìÊûúÊ≤°ÊúâÊ£ÄÊü•Â∞±Ê≤°Ê≥ïÊ≠£Á°ÆÂ§ÑÁêÜÁî®Êà∑ËØªÂèñÂ∞ëÈáèÂ≠óÁ¨¶ËØ∑Ê±ÇÁöÑÊÉÖÂÜµ„ÄÇ Dodgy code Á≥üÁ≥ïÁöÑ‰ª£Á†Å Switch statement found where default case is missing SwitchÊ≤°ÊúâÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊâßË°åÁöÑcaseËØ≠Âè•„ÄÇ Switch statement found where one case falls through to the next case SwitchËØ≠Âè•‰∏≠‰∏Ä‰∏™ÂàÜÊîØÊâßË°åÂêéÂèàÊâßË°å‰∫Ü‰∏ã‰∏Ä‰∏™ÂàÜÊîØ„ÄÇÈÄöÂ∏∏caseÂêéÈù¢Ë¶ÅË∑übreak ÊàñËÄÖreturnËØ≠Âè•Êù•Ë∑≥Âá∫„ÄÇ Dead store to local variable ËØ•Êåá‰ª§‰∏∫Â±ÄÈÉ®ÂèòÈáèËµãÂÄºÔºå‰ΩÜÂú®ÂÖ∂ÂêéÁöÑÊ≤°ÊúâÂØπÂ•πÂÅö‰ªª‰Ωï‰ΩøÁî®„ÄÇÈÄöÂ∏∏ÔºåËøôË°®Êòé‰∏Ä‰∏™ÈîôËØØÔºåÂõ†‰∏∫ÂÄº‰ªéÊú™‰ΩøÁî®Ëøá„ÄÇ Write to static field from instance method Âú®ÂÆû‰æãÊñπÊ≥ïÂÜôÂÖ•ÈùôÊÄÅÂ≠óÊÆµ„ÄÇ Redundant nullcheck of value known to be non-null ÊñπÊ≥ï‰∏≠ÂØπ‰∏ç‰∏∫Á©∫ÁöÑÂÄºËøõË°å‰∏∫Á©∫ÁöÑÂà§Êñ≠„ÄÇ Method uses the same code for two branches Ê≠§ÊñπÊ≥ï‰ΩøÁî®Áõ∏ÂêåÁöÑ‰ª£Á†ÅÔºå‰ª•ÂÆûÁé∞‰∏§‰∏™ÊúâÊù°‰ª∂ÁöÑÂàÜÊîØ„ÄÇÊ£ÄÊü•‰ª•Á°Æ‰øùËøôÊòØ‰∏çÊòØ‰∏Ä‰∏™ÁºñÁ†ÅÈîôËØØ„ÄÇ Exception is caught when Exception is not thrown Âú®try/catchÂùó‰∏≠ÊçïËé∑ÂºÇÂ∏∏Ôºå‰ΩÜÊòØÂºÇÂ∏∏Ê≤°ÊúâÂú®tryËØ≠Âè•‰∏≠ÊäõÂá∫ËÄåRuntimeExceptionÂèàÊ≤°ÊúâÊòéÁ°ÆÁöÑË¢´ÊçïËé∑„ÄÇ Integral division result cast to double or float Êï¥ÂΩ¢Êï∞Èô§Ê≥ïÂº∫Âà∂ËΩ¨Êç¢‰∏∫doubleÊàñËÄÖfloatÁ±ªÂûã„ÄÇ Possible null pointer dereference due to return value of called method ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊ≤°ÊúâËøõË°åÊòØÂê¶‰∏∫Á©∫ÁöÑÊ£ÄÊü•Â∞±ÈáçÊñ∞ËµãÂÄºÔºåËøôÊ†∑ÂèØËÉΩ‰ºöÂá∫Áé∞Á©∫ÊåáÈíàÂºÇÂ∏∏„ÄÇ Useless object created ÂØπË±°ÂàõÂª∫‰∫ÜÂπ∂Ê≤°ÊúâÁî®„ÄÇ Unread public/protected field Ê≤°ÊúâÁî®Âà∞ÁöÑÂ≠óÊÆµ„ÄÇ Internationalization ÂÖ≥‰∫é‰ª£Á†ÅÂõΩÈôÖÂåñÁõ∏ÂÖ≥ÊñπÈù¢ÁöÑ Consider using Locale parameterized version of invoked method ‰ΩøÁî®Âπ≥Âè∞ÈªòËÆ§ÁöÑÁºñÁ†ÅÊ†ºÂºèÂØπÂ≠óÁ¨¶‰∏≤ËøõË°åÂ§ßÂ∞èÂÜôËΩ¨Êç¢ÔºåËøôÂèØËÉΩÂØºËá¥ÂõΩÈôÖÂ≠óÁ¨¶ÁöÑËΩ¨Êç¢‰∏çÂΩì„ÄÇ‰ΩøÁî®‰ª•‰∏ãÊñπÂºèÂØπÂ≠óÁ¨¶ËøõË°åËΩ¨Êç¢ ** Performance ** ÂÖ≥‰∫é‰ª£Á†ÅÊÄßËÉΩÁõ∏ÂÖ≥ÊñπÈù¢ÁöÑ Boxing/unboxing to parse a primitive Á±ªÂûãËΩ¨Êç¢ ÊØîÂ¶ÇÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢Êàêint Â∫îËØ•‰ΩøÁî®Integer.parseInt(‚Äú‚Äù) ‰ª£ÊõøInteger.valueOf(‚Äú‚Äù) Method concatenates string using + in aloop ÊØèÊ¨°Âæ™ÁéØÈáåÁöÑÂ≠óÁ¨¶‰∏≤+ËøûÊé•ÔºåÈÉΩ‰ºöÊñ∞‰∫ßÁîü‰∏Ä‰∏™stringÂØπË±°ÔºåÂú®java‰∏≠ÔºåÊñ∞Âª∫‰∏Ä‰∏™ÂØπË±°ÁöÑ‰ª£‰ª∑ÊòØÂæàÊòÇË¥µÁöÑÔºåÁâπÂà´ÊòØÂú®Âæ™ÁéØËØ≠Âè•‰∏≠ÔºåÊïàÁéáËæÉ‰Ωé Ëß£ÂÜ≥ÂäûÊ≥ïÔºö‰ΩøÁî®StringBufferÊàñËÄÖStringBuilderÈáçÁî®ÂØπË±°„ÄÇ Private method is never called ÁßÅÊúâÊñπÊ≥ïÊ≤°ÊúâË¢´Ë∞ÉÁî® Explicit garbage collection;extremely dubious except in benchmarking code Âú®‰ª£Á†Å‰∏≠ÊòæÂºèÁöÑË∞ÉÁî®ÂûÉÂúæÂõûÊî∂ÂëΩÂêçÔºåËøôÊ†∑ÂÅöÂπ∂‰∏çËÉΩËµ∑‰ΩúÁî®„ÄÇÂú®ËøáÂéªÔºåÊúâ‰∫∫Âú®ÂÖ≥Èó≠Êìç‰ΩúÊàñËÄÖfinalizeÊñπÊ≥ï‰∏≠Ë∞ÉÁî®ÂûÉÂúæÂõûÊî∂ÊñπÊ≥ïÂØºËá¥‰∫ÜÂæàÂ§öÁöÑÊÄßËÉΩÊµ™Ë¥π„ÄÇËøôÊ†∑Â§ßËßÑÊ®°ÂõûÊî∂ÂØπË±°Êó∂‰ºöÈÄ†ÊàêÂ§ÑÁêÜÂô®ËøêË°åÁºìÊÖ¢„ÄÇ Unread field:should this field be static? Ê≤°ÊúâÁî®Âà∞ÁöÑstatic Â≠óÊÆµ should be a static inner class Ê≠§ÂÜÖÈÉ®Á±ªÂ∫îËØ•‰ΩøÁî®static‰øÆÈ•∞ ** Experimental ** Method may fail to clean up stream or resource on checked exception ËøôÁßçÊñπÊ≥ïÂèØËÉΩÊó†Ê≥ïÊ∏ÖÈô§ÔºàÂÖ≥Èó≠ÔºåÂ§ÑÁΩÆÔºâ‰∏Ä‰∏™ÊµÅÔºåÊï∞ÊçÆÂ∫ìÂØπË±°ÔºåÊàñÂÖ∂‰ªñËµÑÊ∫êÈúÄË¶Å‰∏Ä‰∏™ÊòéÁ°ÆÁöÑÊ∏ÖÁêÜË°åÂä® Ëß£ÂÜ≥ÊñπÊ≥ïÔºöÊµÅÁöÑÂÖ≥Èó≠ÈÉΩÂÜôÂú®finallyÈáåÈù¢ Malicious code vulnerability ÂÖ≥‰∫éÊÅ∂ÊÑèÁ†¥Âùè‰ª£Á†ÅÁõ∏ÂÖ≥ÊñπÈù¢ÁöÑ May expose internal representation by incorporating reference to mutable object Ê≠§‰ª£Á†ÅÊääÂ§ñÈÉ®ÂèØÂèòÂØπË±°ÂºïÁî®Â≠òÂÇ®Âà∞ÂØπË±°ÁöÑÂÜÖÈÉ®Ë°®Á§∫„ÄÇÂ¶ÇÊûúÂÆû‰æãÂèóÂà∞‰∏ç‰ø°‰ªªÁöÑ‰ª£Á†ÅÁöÑËÆøÈóÆÂíåÊ≤°ÊúâÊ£ÄÊü•ÁöÑÂèòÂåñÂç±ÂèäÂØπË±°ÂíåÈáçË¶ÅÂ±ûÊÄßÁöÑÂÆâÂÖ®„ÄÇÂ≠òÂÇ®‰∏Ä‰∏™ÂØπË±°ÁöÑÂâØÊú¨ÔºåÂú®ÂæàÂ§öÊÉÖÂÜµ‰∏ãÊòØÊõ¥Â•ΩÁöÑÂäûÊ≥ï„ÄÇ Field isn‚Äôt final but should be Ê≠§Â≠óÊÆµÂâçÂ∫îËØ•Âä†final Field isn‚Äôt final and can‚Äôt be protected from malicious code Ê≠§Â≠óÊÆµÂâçÂ∫îËØ•Âä†final Field should be package protected ‰∏Ä‰∏™ÈùôÊÄÅÂ≠óÊÆµÊòØÂèØ‰ª•Ë¢´ÊÅ∂ÊÑè‰ª£Á†ÅÊàñÂÖ∂‰ªñÁöÑÂåÖËÆøÈóÆ‰øÆÊîπ„ÄÇÂèØ‰ª•ÊääËøôÁßçÁ±ªÂûãÁöÑÂ≠óÊÆµÂ£∞Êòé‰∏∫finalÁ±ªÂûãÁöÑ‰ª•Èò≤Ê≠¢ËøôÁßçÈîôËØØ„ÄÇ Multithreaded correctness ÂÖ≥‰∫éÂ§öÁ∫øÁ®ã‰ª£Á†ÅÊ≠£Á°ÆÊÄßÁõ∏ÂÖ≥ÊñπÈù¢ÁöÑ Static DateFormat DateFormat Âú®Â§öÁ∫øÁ®ã‰∏≠Êú¨Ë∫´Â∞±ÊòØ‰∏çÂÆâÂÖ®ÁöÑÔºåÂ¶ÇÊûúÂú®Á∫øÁ®ãËåÉÂõ¥‰∏≠ÂÖ±‰∫´‰∏Ä‰∏™DateFormatÁöÑÂÆû‰æãËÄå‰∏ç‰ΩøÁî®‰∏Ä‰∏™ÂêåÊ≠•ÁöÑÊñπÊ≥ïÂú®Â∫îÁî®‰∏≠Â∞±‰ºöÂá∫Áé∞‰∏Ä‰∫õÂ•áÊÄ™ÁöÑË°å‰∏∫„ÄÇ Call to static DateFormat DateFormatsÂ§öÁ∫øÁ®ã‰ΩøÁî®Êú¨‰∫ãÂ∞±ÊòØ‰∏çÂÆâÂÖ®ÁöÑ,ÊîπËøõÊñπÊ≥ïÔºöÈúÄË¶ÅÂàõÂª∫Â§öÂÆû‰æãÊàñÁ∫øÁ®ãÂêåÊ≠• Correctness ÂÖ≥‰∫é‰ª£Á†ÅÊ≠£Á°ÆÊÄßÁõ∏ÂÖ≥ÊñπÈù¢ÁöÑ Nullcheck of value previously dereferenced Ê≠§‰ª£Á†Å‰πãÂâçÂ∫üÂºÉnullÂÄºÊ£ÄÊü•„ÄÇËß£ÂÜ≥ÂäûÊ≥ï ËøõË°ånullÊ£ÄÊü• Possible null pointer dereference ÂèØËÉΩ‰∏∫null Null pointer dereference ÂØπË±°Ëµã‰∏∫nullÂÄºÂêé Ê≤°ÊúâË¢´ÈáçÊñ∞ËµãÂÄº Possible null pointer dereference in method on exception path Âú®ÂºÇÂ∏∏nullÂÄºÂ§ÑÁêÜÂàÜÊîØË∞ÉÁî®ÁöÑÊñπÊ≥ï‰∏äÔºåÂèØËÉΩÂ≠òÂú®ÂØπË±°ÂéªÈô§ÂºïÁî®Êìç‰Ωú value is null and guaranteed to be dereferenced on exception path exceptionÂàÜÊîØ‰∏äÔºåÂ≠òÂú®ÂºïÁî®‰∏Ä‰∏™nullÂØπË±°ÁöÑÊñπÊ≥ïÔºåÂºïÂèëÁ©∫ÊåáÈíàÂºÇÂ∏∏„ÄÇ Self comparison of value with itself ÊñπÊ≥ï‰∏≠ÂØπ‰∏Ä‰∏™Â±ÄÈÉ®ÂèòÈáèËá™Ë∫´ËøõË°åÊØîËæÉËøêÁÆóÔºåÂπ∂ÂèØËØ¥ÊòéÈîôËØØÊàñÈÄªËæëÈîôËØØ„ÄÇËØ∑Á°Æ‰øùÊÇ®ÊòØÊØîËæÉÊ≠£Á°ÆÁöÑ‰∫ãÊÉÖ„ÄÇ An apparent infinite recursive loop ÊòéÊòæÁöÑÊó†ÈôêËø≠‰ª£Âæ™ÁéØ,Â∞ÜÂØºËá¥Â†ÜÊ†àÊ∫¢Âá∫.]]></content>
      <categories>
        <category>IDEA</category>
        <category>Êèí‰ª∂</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
        <tag>Êèí‰ª∂</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-Ë¥£‰ªªÈìæÊ®°Âºè]]></title>
    <url>%2Fposts%2Fb6c1490f.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ Ë¥£‰ªªÈìæÊ®°ÂºèÔºàChain of ResponsibilityÔºâ ÊòØË°å‰∏∫ÂûãËÆæËÆ°Ê®°Âºè‰πã‰∏ÄÔºåÂÖ∂Â∞ÜÈìæ‰∏≠ÊØè‰∏Ä‰∏™ËäÇÁÇπÁúã‰ΩúÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÊØè‰∏™ËäÇÁÇπÂ§ÑÁêÜÁöÑËØ∑Ê±ÇÂùá‰∏çÂêåÔºå‰ªéËÄåÈÅøÂÖç‰∫ÜËØ∑Ê±ÇÁöÑÂèëÈÄÅËÄÖÂíåÊé•Êî∂ËÄÖ‰πãÈó¥ÁöÑËÄ¶ÂêàÂÖ≥Á≥ªÔºå‰∏îÂÜÖÈÉ®Ëá™Âä®Áª¥Êä§‰∏Ä‰∏™‰∏ã‰∏ÄËäÇÁÇπÂØπË±°„ÄÇÂΩì‰∏Ä‰∏™ËØ∑Ê±Ç‰ªéÈìæÂºèÁöÑÈ¶ñÁ´ØÂèëÂá∫Êó∂Ôºå‰ºöÊ≤øÁùÄÈìæÁöÑË∑ØÂæÑ‰æùÊ¨°‰º†ÈÄíÁªôÊØè‰∏Ä‰∏™ËäÇÁÇπÂØπË±°ÔºåÁõ¥Ëá≥ÊúâÂØπË±°Â§ÑÁêÜËøô‰∏™ËØ∑Ê±Ç‰∏∫Ê≠¢„ÄÇ ‰∏ªË¶Å‰ΩúÁî® Ë¥£‰ªªÈìæÊ®°Âºè Ëß£ËÄ¶‰∫ÜËØ∑Ê±Ç‰∏éÂ§ÑÁêÜÔºåÂÆ¢Êà∑Âè™ÈúÄÂ∞ÜËØ∑Ê±ÇÂèëÈÄÅÂà∞Èìæ‰∏äÂç≥ÂèØÔºåÊó†ÈúÄÂÖ≥ÂøÉËØ∑Ê±ÇÁöÑÂÖ∑‰ΩìÂÜÖÂÆπÂíåÂ§ÑÁêÜÁªÜËäÇÔºåËØ∑Ê±Ç‰ºöËá™Âä®ËøõË°å‰º†ÈÄíÁõ¥Ëá≥ÊúâËäÇÁÇπÂØπË±°ËøõË°åÂ§ÑÁêÜ„ÄÇ UMLÁ±ªÂõæ ËßíËâ≤ HandlerÔºàÊäΩË±°Â§ÑÁêÜËÄÖÔºâÔºöÂÆÉÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÊé•Âè£Ôºå‰∏ÄËà¨ËÆæËÆ°‰∏∫ÊäΩË±°Á±ªÔºåÁî±‰∫é‰∏çÂêåÁöÑÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖÂ§ÑÁêÜËØ∑Ê±ÇÁöÑÊñπÂºè‰∏çÂêåÔºåÂõ†Ê≠§Âú®ÂÖ∂‰∏≠ÂÆö‰πâ‰∫ÜÊäΩË±°ËØ∑Ê±ÇÂ§ÑÁêÜÊñπÊ≥ï„ÄÇÂõ†‰∏∫ÊØè‰∏Ä‰∏™Â§ÑÁêÜËÄÖÁöÑ‰∏ãÂÆ∂ËøòÊòØ‰∏Ä‰∏™Â§ÑÁêÜËÄÖÔºåÂõ†Ê≠§Âú®ÊäΩË±°Â§ÑÁêÜËÄÖ‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÊäΩË±°Â§ÑÁêÜËÄÖÁ±ªÂûãÁöÑÂØπË±°Ôºå‰Ωú‰∏∫ÂÖ∂ÂØπ‰∏ãÂÆ∂ÁöÑÂºïÁî®„ÄÇÈÄöËøáËØ•ÂºïÁî®ÔºåÂ§ÑÁêÜËÄÖÂèØ‰ª•ËøûÊàê‰∏ÄÊù°Èìæ„ÄÇ ConcreteHandlerÔºàÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖÔºâÔºöÂÆÉÊòØÊäΩË±°Â§ÑÁêÜËÄÖÁöÑÂ≠êÁ±ªÔºåÂèØ‰ª•Â§ÑÁêÜÁî®Êà∑ËØ∑Ê±ÇÔºåÂú®ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖÁ±ª‰∏≠ÂÆûÁé∞‰∫ÜÊäΩË±°Â§ÑÁêÜËÄÖ‰∏≠ÂÆö‰πâÁöÑÊäΩË±°ËØ∑Ê±ÇÂ§ÑÁêÜÊñπÊ≥ïÔºåÂú®Â§ÑÁêÜËØ∑Ê±Ç‰πãÂâçÈúÄË¶ÅËøõË°åÂà§Êñ≠ÔºåÁúãÊòØÂê¶ÊúâÁõ∏Â∫îÁöÑÂ§ÑÁêÜÊùÉÈôêÔºåÂ¶ÇÊûúÂèØ‰ª•Â§ÑÁêÜËØ∑Ê±ÇÂ∞±Â§ÑÁêÜÂÆÉÔºåÂê¶ÂàôÂ∞ÜËØ∑Ê±ÇËΩ¨ÂèëÁªôÂêéÁªßËÄÖÔºõÂú®ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ‰∏≠ÂèØ‰ª•ËÆøÈóÆÈìæ‰∏≠‰∏ã‰∏Ä‰∏™ÂØπË±°Ôºå‰ª•‰æøËØ∑Ê±ÇÁöÑËΩ¨Âèë„ÄÇ Ê®°Âºè‰ºòÁÇπ ÂØπË±°‰ªÖÈúÄÁü•ÈÅìËØ•ËØ∑Ê±Ç‰ºöË¢´Â§ÑÁêÜÂç≥ÂèØÔºå‰∏îÈìæ‰∏≠ÁöÑÂØπË±°‰∏çÈúÄË¶ÅÁü•ÈÅìÈìæÁöÑÁªìÊûÑÔºåÁî±ÂÆ¢Êà∑Á´ØË¥üË¥£ÈìæÁöÑÂàõÂª∫ÔºåÈôç‰Ωé‰∫ÜÁ≥ªÁªüÁöÑËÄ¶ÂêàÂ∫¶„ÄÇ ËØ∑Ê±ÇÂ§ÑÁêÜÂØπË±°‰ªÖÈúÄÁª¥ÊåÅ‰∏Ä‰∏™ÊåáÂêëÂÖ∂ÂêéÁªßËÄÖÁöÑÂºïÁî®ÔºåËÄå‰∏çÈúÄË¶ÅÁª¥ÊåÅÂÆÉÂØπÊâÄÊúâÁöÑÂÄôÈÄâÂ§ÑÁêÜËÄÖÁöÑÂºïÁî®ÔºåÂèØÁÆÄÂåñÂØπË±°ÁöÑÁõ∏‰∫íËøûÊé•„ÄÇ ÈìæË∑ØÁªìÊûÑÁÅµÊ¥ªÔºåÂèØ‰ª•ÈÄöËøáÊîπÂèòÈìæË∑ØÁªìÊûÑÂä®ÊÄÅÂú∞Êñ∞Â¢ûÊàñÂà†ÂáèË¥£‰ªª„ÄÇ Êñ∞Â¢û‰∏Ä‰∏™Êñ∞ÁöÑÂÖ∑‰ΩìËØ∑Ê±ÇÂ§ÑÁêÜËÄÖÊó∂Êó†È°ª‰øÆÊîπÂéüÊúâ‰ª£Á†ÅÔºåÂè™ÈúÄË¶ÅÂú®ÂÆ¢Êà∑Á´ØÈáçÊñ∞Âª∫ÈìæÂç≥ÂèØÔºåÁ¨¶Âêà &quot;ÂºÄÈó≠ÂéüÂàô&quot;„ÄÇ Ê®°ÂºèÁº∫ÁÇπ ‰∏Ä‰∏™ËØ∑Ê±ÇÂèØËÉΩÂõ†ËÅåË¥£ÈìæÊ≤°ÊúâË¢´Ê≠£Á°ÆÈÖçÁΩÆËÄåÂæó‰∏çÂà∞Â§ÑÁêÜ„ÄÇ ÂØπ‰∫éÊØîËæÉÈïøÁöÑËÅåË¥£ÈìæÔºåËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÂèØËÉΩÊ∂âÂèäÂà∞Â§ö‰∏™Â§ÑÁêÜÂØπË±°ÔºåÁ≥ªÁªüÊÄßËÉΩÂ∞ÜÂèóÂà∞‰∏ÄÂÆöÂΩ±ÂìçÔºå‰∏î‰∏çÊñπ‰æøË∞ÉËØï„ÄÇ Â¶ÇÊûúËäÇÁÇπÂØπË±°Â≠òÂú®Âæ™ÁéØÂºïÁî®Êó∂Ôºå‰ºöÈÄ†ÊàêÊ≠ªÂæ™ÁéØÔºåÂØºËá¥Á≥ªÁªüÂ¥©Ê∫É„ÄÇ ÈÄÇÁî®Âú∫ÊôØ ÊúâÂ§ö‰∏™ÂØπË±°ÂèØ‰ª•Â§ÑÁêÜÂêå‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÂÖ∑‰ΩìÂì™‰∏™ÂØπË±°Â§ÑÁêÜËØ•ËØ∑Ê±ÇÂæÖËøêË°åÊó∂ÂàªÂÜçÁ°ÆÂÆöÔºåÂÆ¢Êà∑Á´ØÂè™ÈúÄÂ∞ÜËØ∑Ê±ÇÊèê‰∫§Âà∞Èìæ‰∏äÔºåËÄåÊó†È°ªÂÖ≥ÂøÉËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÂØπË±°ÊòØË∞Å‰ª•ÂèäÂÆÉÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÁöÑ„ÄÇ Âú®‰∏çÊòéÁ°ÆÊåáÂÆöÊé•Êî∂ËÄÖÁöÑÊÉÖÂÜµ‰∏ãÔºåÂêëÂ§ö‰∏™ÂØπË±°‰∏≠ÁöÑ‰∏Ä‰∏™Êèê‰∫§‰∏Ä‰∏™ËØ∑Ê±Ç„ÄÇ ÂèØÂä®ÊÄÅÊåáÂÆö‰∏ÄÁªÑÂØπË±°Â§ÑÁêÜËØ∑Ê±ÇÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•Âä®ÊÄÅÂàõÂª∫ËÅåË¥£ÈìæÊù•Â§ÑÁêÜËØ∑Ê±ÇÔºåËøòÂèØ‰ª•ÊîπÂèòÈìæ‰∏≠Â§ÑÁêÜËÄÖ‰πãÈó¥ÁöÑÂÖàÂêéÊ¨°Â∫è„ÄÇ ‰ΩøÁî®Ê≠•È™§ ÂÆö‰πâÊäΩË±°Â§ÑÁêÜËÄÖ 123456789101112131415161718192021222324252627package main.java.com.study.designPatterns.chain.common;/** * @author: whb * @description: ÂÆö‰πâÊäΩË±°Â§ÑÁêÜËÄÖ--ËÅåË¥£ÁöÑÊé•Âè£Ôºå‰πüÂ∞±ÊòØÂ§ÑÁêÜËØ∑Ê±ÇÁöÑÊé•Âè£ */public abstract class Handler &#123; /** * ÊåÅÊúâÂêéÁªßÁöÑËÅåË¥£ÂØπË±° */ protected Handler successor; /** * ËÆæÁΩÆÂêéÁªßÁöÑËÅåË¥£ÂØπË±° * * @param successor ÂêéÁªßÁöÑËÅåË¥£ÂØπË±° */ public void setSuccessor(Handler successor) &#123; this.successor = successor; &#125; /** * Á§∫ÊÑèÂ§ÑÁêÜËØ∑Ê±ÇÁöÑÊñπÊ≥ïÔºåËôΩÁÑ∂Ëøô‰∏™Á§∫ÊÑèÊñπÊ≥ïÊòØÊ≤°Êúâ‰º†ÂÖ•ÂèÇÊï∞Ôºå * ‰ΩÜÂÆûÈôÖÊòØÂèØ‰ª•‰º†ÂÖ•ÂèÇÊï∞ÁöÑÔºåÊ†πÊçÆÂÖ∑‰ΩìÈúÄË¶ÅÊù•ÈÄâÊã©ÊòØÂê¶‰º†ÈÄíÂèÇÊï∞ */ public abstract void handleRequest();&#125; ÂÆö‰πâÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package main.java.com.study.designPatterns.chain.common;/** * @author: whb * @description: ÂÆö‰πâÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ--ÂÖ∑‰ΩìÁöÑËÅåË¥£ÂØπË±°ÔºåÁî®Êù•Â§ÑÁêÜËØ∑Ê±Ç */public class ConcreteHandler1 extends Handler &#123; @Override public void handleRequest() &#123; //Ê†πÊçÆÊüê‰∫õÊù°‰ª∂Êù•Âà§Êñ≠ÊòØÂê¶Â±û‰∫éËá™Â∑±Â§ÑÁêÜÁöÑËÅåË¥£ËåÉÂõ¥ //Âà§Êñ≠Êù°‰ª∂ÊØîÂ¶ÇÔºö‰ªéÂ§ñÈÉ®‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåÊàñËÄÖËøôÈáå‰∏ªÂä®ÂéªËé∑ÂèñÁöÑÂ§ñÈÉ®Êï∞ÊçÆÔºå //Â¶Ç‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Ëé∑ÂèñÁ≠âÔºå‰∏ãÈù¢ËøôÂè•ËØùÂè™ÊòØ‰∏™Á§∫ÊÑè boolean someCondition = false; if (someCondition) &#123; //Â¶ÇÊûúÂ±û‰∫éËá™Â∑±Â§ÑÁêÜÁöÑËÅåË¥£ËåÉÂõ¥ÔºåÂ∞±Âú®ËøôÈáåÂ§ÑÁêÜËØ∑Ê±Ç //ÂÖ∑‰ΩìÁöÑÂ§ÑÁêÜ‰ª£Á†Å System.out.println("ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ1 Â§ÑÁêÜËØ∑Ê±Ç..."); &#125; else &#123; //Â¶ÇÊûú‰∏çÂ±û‰∫éËá™Â∑±Â§ÑÁêÜÁöÑËÅåË¥£ËåÉÂõ¥ÔºåÈÇ£Â∞±Âà§Êñ≠ÊòØÂê¶ËøòÊúâÂêéÁªßÁöÑËÅåË¥£ÂØπË±° //Â¶ÇÊûúÊúâÔºåÂ∞±ËΩ¨ÂèëËØ∑Ê±ÇÁªôÂêéÁªßÁöÑËÅåË¥£ÂØπË±° //Â¶ÇÊûúÊ≤°ÊúâÔºå‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºåËá™ÁÑ∂ÁªìÊùü if (this.successor != null) &#123; this.successor.handleRequest(); &#125; &#125; &#125;&#125;package main.java.com.study.designPatterns.chain.common;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ2 */public class ConcreteHandler2 extends Handler &#123; @Override public void handleRequest() &#123; //Ê†πÊçÆÊüê‰∫õÊù°‰ª∂Êù•Âà§Êñ≠ÊòØÂê¶Â±û‰∫éËá™Â∑±Â§ÑÁêÜÁöÑËÅåË¥£ËåÉÂõ¥ //Âà§Êñ≠Êù°‰ª∂ÊØîÂ¶ÇÔºö‰ªéÂ§ñÈÉ®‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåÊàñËÄÖËøôÈáå‰∏ªÂä®ÂéªËé∑ÂèñÁöÑÂ§ñÈÉ®Êï∞ÊçÆÔºå //Â¶Ç‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Ëé∑ÂèñÁ≠âÔºå‰∏ãÈù¢ËøôÂè•ËØùÂè™ÊòØ‰∏™Á§∫ÊÑè boolean someCondition = true; if (someCondition) &#123; //Â¶ÇÊûúÂ±û‰∫éËá™Â∑±Â§ÑÁêÜÁöÑËÅåË¥£ËåÉÂõ¥ÔºåÂ∞±Âú®ËøôÈáåÂ§ÑÁêÜËØ∑Ê±Ç //ÂÖ∑‰ΩìÁöÑÂ§ÑÁêÜ‰ª£Á†Å System.out.println("ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ2 Â§ÑÁêÜËØ∑Ê±Ç..."); &#125; else &#123; //Â¶ÇÊûú‰∏çÂ±û‰∫éËá™Â∑±Â§ÑÁêÜÁöÑËÅåË¥£ËåÉÂõ¥ÔºåÈÇ£Â∞±Âà§Êñ≠ÊòØÂê¶ËøòÊúâÂêéÁªßÁöÑËÅåË¥£ÂØπË±° //Â¶ÇÊûúÊúâÔºåÂ∞±ËΩ¨ÂèëËØ∑Ê±ÇÁªôÂêéÁªßÁöÑËÅåË¥£ÂØπË±° //Â¶ÇÊûúÊ≤°ÊúâÔºå‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºåËá™ÁÑ∂ÁªìÊùü if (this.successor != null) &#123; this.successor.handleRequest(); &#125; &#125; &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® 1234567891011121314151617package main.java.com.study.designPatterns.chain.common;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class Client &#123; public static void main(String[] args) &#123; //ÂÖàË¶ÅÁªÑË£ÖËÅåË¥£Èìæ Handler h1 = new ConcreteHandler1(); Handler h2 = new ConcreteHandler2(); h1.setSuccessor(h2); //ÁÑ∂ÂêéÊèê‰∫§ËØ∑Ê±Ç h1.handleRequest(); &#125;&#125; Ê®°ÂºèÁ§∫‰æã ËÉåÊôØ ÂæàÂ§öÂÖ¨Âè∏ÈÉΩÊúâËøôÊ†∑ÁöÑÁ¶èÂà©ÔºåÂ∞±ÊòØÈ°πÁõÆÁªÑÊàñËÄÖÊòØÈÉ®Èó®ÂèØ‰ª•ÂêëÂÖ¨Âè∏Áî≥ËØ∑‰∏Ä‰∫õËÅöÈ§êË¥πÁî®ÔºåÁî®‰∫éÁªÑÁªáÈ°πÁõÆÁªÑÊàêÂëòÊàñËÄÖÊòØÈÉ®Èó®ÊàêÂëòËøõË°åËÅöÈ§êÊ¥ªÂä®Ôºå‰ª•Â¢ûËøõ‰∫∫Âëò‰πãÈó¥ÁöÑÊÉÖÊÑüÔºåÊõ¥ÊúâÂà©‰∫éÂ∑•‰Ωú‰∏≠ÁöÑÁõ∏‰∫íÂêà‰Ωú„ÄÇ Áî≥ËØ∑ËÅöÈ§êË¥πÁî®ÁöÑÂ§ßËá¥ÊµÅÁ®ã‰∏ÄËà¨ÊòØÔºöÁî±Áî≥ËØ∑‰∫∫ÂÖàÂ°´ÂÜôÁî≥ËØ∑ÂçïÔºåÁÑ∂Âêé‰∫§ÁªôÈ¢ÜÂØºÂÆ°Êü•ÔºåÂ¶ÇÊûúÁî≥ËØ∑ÊâπÂáÜ‰∏ãÊù•‰∫ÜÔºåÈ¢ÜÂØº‰ºöÈÄöÁü•Áî≥ËØ∑‰∫∫ÂÆ°ÊâπÈÄöËøáÔºåÁÑ∂ÂêéÁî≥ËØ∑‰∫∫ÂéªË¥¢Âä°Ê†∏È¢ÜË¥πÁî®ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊ†∏ÂáÜÔºåÈ¢ÜÂØº‰ºöÈÄöÁü•Áî≥ËØ∑‰∫∫ÂÆ°ÊâπÊú™ÈÄöËøáÔºåÊ≠§‰∫ã‰πüÂ∞±Ê≠§‰ΩúÁΩ¢‰∫Ü„ÄÇ ‰∏çÂêåÁ∫ßÂà´ÁöÑÈ¢ÜÂØºÔºåÂØπ‰∫éÂÆ°ÊâπÁöÑÈ¢ùÂ∫¶ÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåÊØîÂ¶ÇÔºöÈ°πÁõÆÁªèÁêÜÂè™ËÉΩÂÆ°Êâπ500ÂÖÉ‰ª•ÂÜÖÁöÑÁî≥ËØ∑ÔºõÈÉ®Èó®ÁªèÁêÜËÉΩÂÆ°Êâπ1000ÂÖÉ‰ª•ÂÜÖÁöÑÁî≥ËØ∑ÔºõËÄåÊÄªÁªèÁêÜÂèØ‰ª•ÂÆ°Ê†∏‰ªªÊÑèÈ¢ùÂ∫¶ÁöÑÁî≥ËØ∑„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÂΩìÊüê‰∫∫ÊèêÂá∫ËÅöÈ§êË¥πÁî®Áî≥ËØ∑ÁöÑËØ∑Ê±ÇÂêéÔºåËØ•ËØ∑Ê±Ç‰ºöÁî±È°πÁõÆÁªèÁêÜ„ÄÅÈÉ®Èó®ÁªèÁêÜ„ÄÅÊÄªÁªèÁêÜ‰πã‰∏≠ÁöÑÊüê‰∏Ä‰ΩçÈ¢ÜÂØºÊù•ËøõË°åÁõ∏Â∫îÁöÑÂ§ÑÁêÜÔºå‰ΩÜÊòØÊèêÂá∫Áî≥ËØ∑ÁöÑ‰∫∫Âπ∂‰∏çÁü•ÈÅìÊúÄÁªà‰ºöÁî±Ë∞ÅÊù•Â§ÑÁêÜ‰ªñÁöÑËØ∑Ê±ÇÔºå‰∏ÄËà¨Áî≥ËØ∑‰∫∫ÊòØÊääËá™Â∑±ÁöÑÁî≥ËØ∑Êèê‰∫§ÁªôÈ°πÁõÆÁªèÁêÜÔºåÊàñËÆ∏ÊúÄÂêéÊòØÁî±ÊÄªÁªèÁêÜÊù•Â§ÑÁêÜ‰ªñÁöÑËØ∑Ê±ÇÔºå‰ΩÜÊòØÁî≥ËØ∑‰∫∫Âπ∂‰∏çÁü•ÈÅìÂ∫îËØ•Áî±ÊÄªÁªèÁêÜÊù•Â§ÑÁêÜ‰ªñÁöÑÁî≥ËØ∑ËØ∑Ê±Ç„ÄÇ ÂàÜÊûê ÂΩìÊüê‰∫∫ÊèêÂá∫ËÅöÈ§êË¥πÁî®Áî≥ËØ∑ÁöÑËØ∑Ê±ÇÂêéÔºåËØ•ËØ∑Ê±Ç‰ºöÂú®È°πÁõÆÁªèÁêÜ-ÈÉ®Èó®ÁªèÁêÜ-ÊÄªÁªèÁêÜËøôÊ†∑‰∏ÄÊù°È¢ÜÂØºÂ§ÑÁêÜÈìæ‰∏äËøõË°å‰º†ÈÄíÔºåÂèëÂá∫ËØ∑Ê±ÇÁöÑ‰∫∫Âπ∂‰∏çÁü•ÈÅìË∞Å‰ºöÊù•Â§ÑÁêÜ‰ªñÁöÑËØ∑Ê±ÇÔºåÊØè‰∏™È¢ÜÂØº‰ºöÊ†πÊçÆËá™Â∑±ÁöÑËÅåË¥£ËåÉÂõ¥ÔºåÊù•Âà§Êñ≠ÊòØÂ§ÑÁêÜËØ∑Ê±ÇËøòÊòØÊääËØ∑Ê±Ç‰∫§ÁªôÊõ¥È´òÁ∫ßÁöÑÈ¢ÜÂØºÔºåÂè™Ë¶ÅÊúâÈ¢ÜÂØºÂ§ÑÁêÜ‰∫ÜÔºå‰º†ÈÄíÂ∞±ÁªìÊùü‰∫Ü„ÄÇ ÈúÄË¶ÅÊääÊØè‰ΩçÈ¢ÜÂØºÁöÑÂ§ÑÁêÜÁã¨Á´ãÂá∫Êù•ÔºåÂÆûÁé∞ÊàêÂçïÁã¨ÁöÑËÅåË¥£Â§ÑÁêÜÂØπË±°ÔºåÁÑ∂Âêé‰∏∫ÂÆÉ‰ª¨Êèê‰æõ‰∏Ä‰∏™ÂÖ¨ÂÖ±ÁöÑ„ÄÅÊäΩË±°ÁöÑÁà∂ËÅåË¥£ÂØπË±°ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âú®ÂÆ¢Êà∑Á´ØÊù•Âä®ÊÄÅÁöÑÁªÑÂêàËÅåË¥£ÈìæÔºåÂÆûÁé∞‰∏çÂêåÁöÑÂäüËÉΩË¶ÅÊ±Ç‰∫Ü„ÄÇ ÂÖ∑‰Ωì‰ª£Á†Å ÂÆö‰πâÊäΩË±°Â§ÑÁêÜËÄÖ 123456789101112131415161718192021222324252627282930package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÊäΩË±°Â§ÑÁêÜËÄÖÁ±ªÔºåÂÆö‰πâËÅåË¥£ÂØπË±° */public abstract class Handler &#123; /** * ÊåÅÊúâ‰∏ã‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÂØπË±° */ protected Handler successor = null; /** * ËÆæÁΩÆ‰∏ã‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÂØπË±° * * @param successor ‰∏ã‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÂØπË±° */ public void setSuccessor(Handler successor) &#123; this.successor = successor; &#125; /** * Â§ÑÁêÜËÅöÈ§êË¥πÁî®ÁöÑÁî≥ËØ∑ * * @param user Áî≥ËØ∑‰∫∫ * @param fee Áî≥ËØ∑ÁöÑÈí±Êï∞ * @return ÊàêÂäüÊàñÂ§±Ë¥•ÁöÑÂÖ∑‰ΩìÈÄöÁü• */ public abstract String handleFeeRequest(String user, double fee);&#125; ÂÆö‰πâÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ È°πÁõÆÁªèÁêÜÔºö 1234567891011121314151617181920212223242526272829package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ--È°πÁõÆÁªèÁêÜ */public class ProjectManager extends Handler &#123; @Override public String handleFeeRequest(String user, double fee) &#123; String str = ""; //È°πÁõÆÁªèÁêÜÁöÑÊùÉÈôêÊØîËæÉÂ∞èÔºåÂè™ËÉΩÂú®500‰ª•ÂÜÖ if (fee &lt; 500) &#123; //‰∏∫‰∫ÜÊµãËØïÔºåÁÆÄÂçïÁÇπÔºåÂè™ÂêåÊÑèÂ∞èÊùéÁöÑ if ("Â∞èÊùé".equals(user)) &#123; str = "È°πÁõÆÁªèÁêÜÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; else &#123; //ÂÖ∂ÂÆÉ‰∫∫‰∏ÄÂæã‰∏çÂêåÊÑè str = "È°πÁõÆÁªèÁêÜ‰∏çÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; return str; &#125; else &#123; //Ë∂ÖËøá500ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return successor.handleFeeRequest(user, fee); &#125; &#125; return str; &#125;&#125; ÈÉ®Èó®ÁªèÁêÜÔºö 1234567891011121314151617181920212223242526272829package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ--ÈÉ®Èó®ÁªèÁêÜ */public class DepManager extends Handler &#123; @Override public String handleFeeRequest(String user, double fee) &#123; String str = ""; //ÈÉ®Èó®ÁªèÁêÜÁöÑÊùÉÈôêÂè™ËÉΩÂú®1000‰ª•ÂÜÖ if (fee &lt; 1000) &#123; //‰∏∫‰∫ÜÊµãËØïÔºåÁÆÄÂçïÁÇπÔºåÂè™ÂêåÊÑèÂ∞èÊùéÁî≥ËØ∑ÁöÑ if ("Â∞èÊùé".equals(user)) &#123; str = "ÈÉ®Èó®ÁªèÁêÜÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; else &#123; //ÂÖ∂ÂÆÉ‰∫∫‰∏ÄÂæã‰∏çÂêåÊÑè str = "ÈÉ®Èó®ÁªèÁêÜ‰∏çÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; return str; &#125; else &#123; //Ë∂ÖËøá1000ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return this.successor.handleFeeRequest(user, fee); &#125; &#125; return str; &#125;&#125; ÊÄªÁªèÁêÜÔºö 1234567891011121314151617181920212223242526272829package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ--ÊÄªÁªèÁêÜ */public class GeneralManager extends Handler &#123; @Override public String handleFeeRequest(String user, double fee) &#123; String str = ""; //ÊÄªÁªèÁêÜÁöÑÊùÉÈôêÂæàÂ§ßÔºåÂè™Ë¶ÅËØ∑Ê±ÇÂà∞‰∫ÜËøôÈáåÔºå‰ªñÈÉΩÂèØ‰ª•Â§ÑÁêÜ if (fee &gt;= 1000) &#123; //‰∏∫‰∫ÜÊµãËØïÔºåÁÆÄÂçïÁÇπÔºåÂè™ÂêåÊÑèÂ∞èÊùéÁöÑ if ("Â∞èÊùé".equals(user)) &#123; str = "ÊÄªÁªèÁêÜÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; else &#123; //ÂÖ∂ÂÆÉ‰∫∫‰∏ÄÂæã‰∏çÂêåÊÑè str = "ÊÄªÁªèÁêÜ‰∏çÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; return str; &#125; else &#123; //Â¶ÇÊûúËøòÊúâÂêéÁªßÁöÑÂ§ÑÁêÜÂØπË±°ÔºåÁªßÁª≠‰º†ÈÄí if (this.successor != null) &#123; return successor.handleFeeRequest(user, fee); &#125; &#125; return str; &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® 1234567891011121314151617181920212223242526272829303132package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÊµãËØïÁ±ª */public class Client &#123; public static void main(String[] args) &#123; //ÂÖàË¶ÅÁªÑË£ÖËÅåË¥£Èìæ Handler h1 = new GeneralManager(); Handler h2 = new DepManager(); Handler h3 = new ProjectManager(); h3.setSuccessor(h2); h2.setSuccessor(h1); //ÂºÄÂßãÊµãËØï String ret1 = h3.handleFeeRequest("Â∞èÊùé", 300); System.out.println("the ret1=" + ret1); String ret2 = h3.handleFeeRequest("Â∞èÂº†", 300); System.out.println("the ret2=" + ret2); String ret3 = h3.handleFeeRequest("Â∞èÊùé", 600); System.out.println("the ret3=" + ret3); String ret4 = h3.handleFeeRequest("Â∞èÂº†", 600); System.out.println("the ret4=" + ret4); String ret5 = h3.handleFeeRequest("Â∞èÊùé", 1200); System.out.println("the ret5=" + ret5); String ret6 = h3.handleFeeRequest("Â∞èÂº†", 1200); System.out.println("the ret6=" + ret6); &#125;&#125; ÊãìÂ±ï-Â§ÑÁêÜÂ§öÁßçËØ∑Ê±Ç ‰∏äÈù¢ÁöÑÁ§∫‰æãÊòØÂêå‰∏Ä‰∏™ËÅåË¥£ÈìæÂ§ÑÁêÜ‰∏ÄÁßçËØ∑Ê±ÇÁöÑÊÉÖÂÜµÔºåÁé∞Âú®ÊúâËøôÊ†∑ÁöÑÈúÄÊ±ÇÔºåËøòÊòØË¥πÁî®Áî≥ËØ∑ÁöÑÂäüËÉΩÔºåËøôÊ¨°ÊòØÁî≥ËØ∑È¢ÑÊîØÂ∑ÆÊóÖË¥πÔºåÂÅáËÆæËøòÊòØÂêå‰∏ÄÊµÅÁ®ãÔºå‰πüÂ∞±ÊòØÁªÑÂêàÂêå‰∏Ä‰∏™ËÅåË¥£ÈìæÔºå‰ªéÈ°πÁõÆÁªèÁêÜ-‰º†ÈÄíÁªôÈÉ®Èó®ÁªèÁêÜ-‰º†ÈÄíÁªôÊÄªÁªèÁêÜÔºåËôΩÁÑ∂ÊµÅÁ®ãÁõ∏ÂêåÔºå‰ΩÜÊòØÊØè‰∏™Â§ÑÁêÜÁ±ªÈúÄË¶ÅÂ§ÑÁêÜ‰∏§ÁßçËØ∑Ê±ÇÔºåÂÆÉ‰ª¨ÁöÑÂÖ∑‰Ωì‰∏öÂä°ÈÄªËæëÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ ÁÆÄÂçïÁöÑÂ§ÑÁêÜÊñπÂºè ÁÆÄÂçïÂ§ÑÁêÜÊñπÂºèÂ∞±ÊòØ‰∏∫ÊØèÁßç‰∏öÂä°ÂçïÁã¨ÂÆö‰πâ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÁÑ∂ÂêéÂÆ¢Êà∑Á´ØÊ†πÊçÆ‰∏çÂêåÁöÑÈúÄË¶ÅË∞ÉÁî®‰∏çÂêåÁöÑÊñπÊ≥ï„ÄÇ Áõ¥Êé•ÊîπÈÄ†‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºåËøôÈáåÊïÖÊÑèÊää‰∏§‰∏™ÊñπÊ≥ïÂÅöÁöÑÊúâ‰∫õ‰∏ç‰∏ÄÊ†∑Ôºå‰∏Ä‰∏™ÊòØËøîÂõûStringÁ±ªÂûãÁöÑÂÄºÔºå‰∏Ä‰∏™ÊòØËøîÂõûbooleanÁ±ªÂûãÁöÑÂÄºÔºõ‰∏Ä‰∏™ËøîÂõûÂà∞ÂÆ¢Êà∑Á´ØÂÜçËæìÂá∫‰ø°ÊÅØÔºå‰∏Ä‰∏™ÊòØÁõ¥Êé•Âú®ËÅåË¥£Â§ÑÁêÜÈáåÈù¢Â∞±ËæìÂá∫‰ø°ÊÅØ„ÄÇ È¶ñÂÖàÊòØÊîπÈÄ†ËÅåË¥£ÂØπË±°ÁöÑÊé•Âè£ÔºåÊ∑ªÂä†‰∏äÊñ∞ÁöÑ‰∏öÂä°ÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930313233343536373839package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÊäΩË±°Â§ÑÁêÜËÄÖÁ±ªÔºåÂÆö‰πâËÅåË¥£ÂØπË±° */public abstract class Handler &#123; /** * ÊåÅÊúâ‰∏ã‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÂØπË±° */ protected Handler successor = null; /** * ËÆæÁΩÆ‰∏ã‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÂØπË±° * * @param successor ‰∏ã‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÂØπË±° */ public void setSuccessor(Handler successor) &#123; this.successor = successor; &#125; /** * Â§ÑÁêÜËÅöÈ§êË¥πÁî®ÁöÑÁî≥ËØ∑ * * @param user Áî≥ËØ∑‰∫∫ * @param fee Áî≥ËØ∑ÁöÑÈí±Êï∞ * @return ÊàêÂäüÊàñÂ§±Ë¥•ÁöÑÂÖ∑‰ΩìÈÄöÁü• */ public abstract String handleFeeRequest(String user, double fee); /** * Â§ÑÁêÜÈ¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®ÁöÑÁî≥ËØ∑ * * @param user Áî≥ËØ∑‰∫∫ * @param requestFee Áî≥ËØ∑ÁöÑÈí±Êï∞ * @return ÊòØÂê¶ÂêåÊÑè */ public abstract boolean handlePreFeeRequest(String user, double requestFee);&#125; ËÅåË¥£ÁöÑÊé•Âè£ÂèëÁîü‰∫ÜÊîπÂèòÔºåÂØπÂ∫îÁöÑÂ§ÑÁêÜÁ±ª‰πüË¶ÅÊîπÂèòÔºåËøôÂá†‰∏™Â§ÑÁêÜÁ±ªÊòØÁ±ª‰ººÁöÑÔºåÂéüÊúâÁöÑÂäüËÉΩ‰∏çÂèòÔºåÁÑ∂ÂêéÂú®Êñ∞ÁöÑÂÆûÁé∞ÊñπÊ≥ïÈáåÈù¢ÔºåÂêåÊ†∑Âà§Êñ≠‰∏Ä‰∏ãÊòØÂê¶Â±û‰∫éËá™Â∑±Â§ÑÁêÜÁöÑËåÉÂõ¥ÔºåÂ¶ÇÊûúÂ±û‰∫éËá™Â∑±Â§ÑÁêÜÁöÑËåÉÂõ¥ÈÇ£Â∞±Â§ÑÁêÜÔºåÂê¶ÂàôÂ∞±‰º†ÈÄíÂà∞‰∏ã‰∏Ä‰∏™Â§ÑÁêÜ„ÄÇ È°πÁõÆÁªèÁêÜÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ--È°πÁõÆÁªèÁêÜ */public class ProjectManager extends Handler &#123; @Override public String handleFeeRequest(String user, double fee) &#123; String str = ""; //È°πÁõÆÁªèÁêÜÁöÑÊùÉÈôêÊØîËæÉÂ∞èÔºåÂè™ËÉΩÂú®500‰ª•ÂÜÖ if (fee &lt; 500) &#123; //‰∏∫‰∫ÜÊµãËØïÔºåÁÆÄÂçïÁÇπÔºåÂè™ÂêåÊÑèÂ∞èÊùéÁöÑ if ("Â∞èÊùé".equals(user)) &#123; str = "È°πÁõÆÁªèÁêÜÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; else &#123; //ÂÖ∂ÂÆÉ‰∫∫‰∏ÄÂæã‰∏çÂêåÊÑè str = "È°πÁõÆÁªèÁêÜ‰∏çÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; return str; &#125; else &#123; //Ë∂ÖËøá500ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return successor.handleFeeRequest(user, fee); &#125; &#125; return str; &#125; @Override public boolean handlePreFeeRequest(String user, double requestNum) &#123; //È°πÁõÆÁªèÁêÜÁöÑÊùÉÈôêÊØîËæÉÂ∞èÔºåÂè™ËÉΩÂú®5000‰ª•ÂÜÖ if (requestNum &lt; 5000) &#123; //Â∑•‰ΩúÈúÄË¶ÅÂòõÔºåÁªüÁªüÂêåÊÑè System.out.println("È°πÁõÆÁªèÁêÜÂêåÊÑè" + user + "È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®" + requestNum + "ÂÖÉÁöÑËØ∑Ê±Ç"); return true; &#125; else &#123; //Ë∂ÖËøá5000ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return this.successor.handlePreFeeRequest(user, requestNum); &#125; &#125; return false; &#125;&#125; ÈÉ®Èó®ÁªèÁêÜÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ--ÈÉ®Èó®ÁªèÁêÜ */public class DepManager extends Handler &#123; @Override public String handleFeeRequest(String user, double fee) &#123; String str = ""; //ÈÉ®Èó®ÁªèÁêÜÁöÑÊùÉÈôêÂè™ËÉΩÂú®1000‰ª•ÂÜÖ if (fee &lt; 1000) &#123; //‰∏∫‰∫ÜÊµãËØïÔºåÁÆÄÂçïÁÇπÔºåÂè™ÂêåÊÑèÂ∞èÊùéÁî≥ËØ∑ÁöÑ if ("Â∞èÊùé".equals(user)) &#123; str = "ÈÉ®Èó®ÁªèÁêÜÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; else &#123; //ÂÖ∂ÂÆÉ‰∫∫‰∏ÄÂæã‰∏çÂêåÊÑè str = "ÈÉ®Èó®ÁªèÁêÜ‰∏çÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; return str; &#125; else &#123; //Ë∂ÖËøá1000ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return this.successor.handleFeeRequest(user, fee); &#125; &#125; return str; &#125; @Override public boolean handlePreFeeRequest(String user, double requestFee) &#123; //ÈÉ®Èó®ÁªèÁêÜÁöÑÊùÉÈôê20000‰ª•ÂÜÖ if (requestFee &lt; 20000) &#123; //Â∑•‰ΩúÈúÄË¶ÅÂòõÔºåÁªüÁªüÂêåÊÑè System.out.println("ÈÉ®Èó®ÁªèÁêÜÂêåÊÑè" + user + "È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®" + requestFee + "ÂÖÉÁöÑËØ∑Ê±Ç"); return true; &#125; else &#123; //Ë∂ÖËøá20000ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return this.successor.handlePreFeeRequest(user, requestFee); &#125; &#125; return false; &#125;&#125; ÊÄªÁªèÁêÜÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ§ÑÁêÜËÄÖ--ÊÄªÁªèÁêÜ */public class GeneralManager extends Handler &#123; @Override public String handleFeeRequest(String user, double fee) &#123; String str = ""; //ÊÄªÁªèÁêÜÁöÑÊùÉÈôêÂæàÂ§ßÔºåÂè™Ë¶ÅËØ∑Ê±ÇÂà∞‰∫ÜËøôÈáåÔºå‰ªñÈÉΩÂèØ‰ª•Â§ÑÁêÜ if (fee &gt;= 1000) &#123; //‰∏∫‰∫ÜÊµãËØïÔºåÁÆÄÂçïÁÇπÔºåÂè™ÂêåÊÑèÂ∞èÊùéÁöÑ if ("Â∞èÊùé".equals(user)) &#123; str = "ÊÄªÁªèÁêÜÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; else &#123; //ÂÖ∂ÂÆÉ‰∫∫‰∏ÄÂæã‰∏çÂêåÊÑè str = "ÊÄªÁªèÁêÜ‰∏çÂêåÊÑè" + user + "ËÅöÈ§êË¥πÁî®" + fee + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; return str; &#125; else &#123; //Â¶ÇÊûúËøòÊúâÂêéÁªßÁöÑÂ§ÑÁêÜÂØπË±°ÔºåÁªßÁª≠‰º†ÈÄí if (this.successor != null) &#123; return successor.handleFeeRequest(user, fee); &#125; &#125; return str; &#125; @Override public boolean handlePreFeeRequest(String user, double requestFee) &#123; //ÊÄªÁªèÁêÜÁöÑÊùÉÈôê50000‰ª•ÂÜÖ if (requestFee &lt; 50000) &#123; //Â∑•‰ΩúÈúÄË¶ÅÂòõÔºåÁªüÁªüÂêåÊÑè System.out.println("ÊÄªÁªèÁêÜÂêåÊÑè" + user + "È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®" + requestFee + "ÂÖÉÁöÑËØ∑Ê±Ç"); return true; &#125; else &#123; //Â¶ÇÊûúËøòÊúâÂêéÁªßÁöÑÂ§ÑÁêÜÂØπË±°ÔºåÁªßÁª≠‰º†ÈÄí if (this.successor != null) &#123; return this.successor.handlePreFeeRequest(user, requestFee); &#125; &#125; return false; &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® 12345678910111213141516171819202122232425262728293031323334353637package main.java.com.study.designPatterns.chain.demoTwo;/** * @author: whb * @description: ÊµãËØïÁ±ª */public class Client &#123; public static void main(String[] args) &#123; //ÂÖàË¶ÅÁªÑË£ÖËÅåË¥£Èìæ Handler h1 = new GeneralManager(); Handler h2 = new DepManager(); Handler h3 = new ProjectManager(); h3.setSuccessor(h2); h2.setSuccessor(h1); //ÂºÄÂßãÊµãËØïÁî≥ËØ∑ËÅöÈ§êË¥πÁî® String ret1 = h3.handleFeeRequest("Â∞èÊùé", 300); System.out.println("the ret1=" + ret1); String ret2 = h3.handleFeeRequest("Â∞èÂº†", 300); System.out.println("the ret2=" + ret2); String ret3 = h3.handleFeeRequest("Â∞èÊùé", 600); System.out.println("the ret3=" + ret3); String ret4 = h3.handleFeeRequest("Â∞èÂº†", 600); System.out.println("the ret4=" + ret4); String ret5 = h3.handleFeeRequest("Â∞èÊùé", 1200); System.out.println("the ret5=" + ret5); String ret6 = h3.handleFeeRequest("Â∞èÂº†", 1200); System.out.println("the ret6=" + ret6); //ÂºÄÂßãÊµãËØïÁî≥ËØ∑Â∑ÆÊóÖË¥πÁî® h3.handlePreFeeRequest("Â∞èÂº†", 3000); h3.handlePreFeeRequest("Â∞èÂº†", 6000); h3.handlePreFeeRequest("Â∞èÂº†", 32000); &#125;&#125; ÈÄöÁî®ËØ∑Ê±ÇÂ§ÑÁêÜÊñπÂºè ÁÆÄÂçïÂ§ÑÁêÜÊñπÂºèÂÆûÁé∞Ëµ∑Êù•ÂæàÂÆπÊòìÔºå‰ΩÜÊòØÊúâ‰∏Ä‰∏™ÊòéÊòæÁöÑÈóÆÈ¢òÂ∞±ÊòØÂè™Ë¶ÅÂ¢ûÂä†‰∏Ä‰∏™‰∏öÂä°ÔºåÂ∞±ÈúÄË¶Å‰øÆÊîπËÅåË¥£ÁöÑÊé•Âè£ÔºåËøôÊòØÂæà‰∏çÁÅµÊ¥ªÁöÑÔºåJavaÂºÄÂèë‰∏≠ÂæàÂº∫Ë∞ÉÈù¢ÂêëÊé•Âè£ÁºñÁ®ãÔºåÂõ†Ê≠§Êé•Âè£Â∫îËØ•Áõ∏ÂØπ‰øùÊåÅÁ®≥ÂÆöÔºåÊé•Âè£‰∏ÄÊîπÔºåÈúÄË¶Å‰øÆÊîπÁöÑÂú∞ÊñπÂ∞±Â§™Â§ö‰∫ÜÔºåÈ¢ëÁπÅ‰øÆÊîπÊé•Âè£ÁªùÂØπ‰∏çÊòØ‰∏™Â•Ω‰∏ªÊÑè„ÄÇÊâÄ‰ª•ÊîπÈÄ†Â¶Ç‰∏ãÔºö È¶ñÂÖàÂÆö‰πâ‰∏ÄÂ•óÈÄöÁî®ÁöÑË∞ÉÁî®Ê°ÜÊû∂ÔºåÁî®‰∏Ä‰∏™ÈÄöÁî®ÁöÑËØ∑Ê±ÇÂØπË±°Êù•Â∞ÅË£ÖËØ∑Ê±Ç‰º†ÈÄíÁöÑÂèÇÊï∞Ôºõ ÁÑ∂ÂêéÂÆö‰πâ‰∏Ä‰∏™ÈÄöÁî®ÁöÑË∞ÉÁî®ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ï‰∏çÂéªÂå∫ÂàÜÂÖ∑‰Ωì‰∏öÂä°ÔºåÊâÄÊúâÁöÑ‰∏öÂä°ÈÉΩÊòØËøô‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂú®ÈÄöÁî®ÁöÑËØ∑Ê±ÇÂØπË±°ÈáåÈù¢‰ºöÊúâ‰∏Ä‰∏™‰∏öÂä°ÁöÑÊ†áËÆ∞ËøõË°å‰∏öÂä°Âå∫ÂàÜÔºõ Âà∞‰∫ÜËÅåË¥£ÂØπË±°ÈáåÈù¢ÔºåÊÑøÊÑèÂ§ÑÁêÜÂ∞±Ë∑üÂéüÊù•‰∏ÄÊ†∑ÁöÑÂ§ÑÁêÜÊñπÂºèÔºåÂ¶ÇÊûú‰∏çÊÑøÊÑèÂ§ÑÁêÜÔºåÂ∞±‰º†ÈÄíÂà∞‰∏ã‰∏Ä‰∏™Â§ÑÁêÜÂØπË±°Â∞±Â•Ω‰∫Ü„ÄÇ ÂØπ‰∫éËøîÂõûÂÄº‰πüÂèØ‰ª•Êù•‰∏™ÈÄöÁî®ÁöÑÔºåÊúÄÁÆÄÂçïÁöÑÂ∞±ÊòØ‰ΩøÁî®ObjectÁ±ªÂûã„ÄÇ ÂÖ∑‰Ωì‰ª£Á†Å ÈÄöÁî®ÁöÑËØ∑Ê±ÇÂØπË±°ÁöÑÂÆö‰πâ 12345678910111213141516171819202122232425package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÈÄöÁî®ÁöÑËØ∑Ê±ÇÂØπË±° */public class RequestModel &#123; /** * Ë°®Á§∫ÂÖ∑‰ΩìÁöÑ‰∏öÂä°Á±ªÂûã */ private String type; /** * ÈÄöËøáÊûÑÈÄ†ÊñπÊ≥ïÊääÂÖ∑‰ΩìÁöÑ‰∏öÂä°Á±ªÂûã‰º†ÈÄíËøõÊù• * * @param type ÂÖ∑‰ΩìÁöÑ‰∏öÂä°Á±ªÂûã */ public RequestModel(String type) &#123; this.type = type; &#125; public String getType() &#123; return type; &#125;&#125; Ê≠§Êó∂ÁöÑÈÄöÁî®ËÅåË¥£Â§ÑÁêÜÂØπË±°ÔºåÂú®ËøôÈáåË¶ÅÂÆûÁé∞‰∏Ä‰∏™ÈÄöÁî®ÁöÑË∞ÉÁî®Ê°ÜÊû∂ 1234567891011121314151617181920212223242526272829303132333435363738package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÈÄöÁî®ËÅåË¥£Â§ÑÁêÜÂØπË±°ÔºåÂú®ËøôÈáåË¶ÅÂÆûÁé∞‰∏Ä‰∏™ÈÄöÁî®ÁöÑË∞ÉÁî®Ê°ÜÊû∂ */public abstract class Handler &#123; /** * ÊåÅÊúâ‰∏ã‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÂØπË±° */ protected Handler successor = null; /** * ËÆæÁΩÆ‰∏ã‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÂØπË±° * * @param successor ‰∏ã‰∏Ä‰∏™Â§ÑÁêÜËØ∑Ê±ÇÁöÑÂØπË±° */ public void setSuccessor(Handler successor) &#123; this.successor = successor; &#125; /** * ÈÄöÁî®ÁöÑËØ∑Ê±ÇÂ§ÑÁêÜÊñπÊ≥ï * * @param rm ÈÄöÁî®ÁöÑËØ∑Ê±ÇÂØπË±° * @return Â§ÑÁêÜÂêéÈúÄË¶ÅËøîÂõûÁöÑÂØπË±° */ public Object handleRequest(RequestModel rm) &#123; if (successor != null) &#123; //Ëøô‰∏™ÊòØÈªòËÆ§ÁöÑÂÆûÁé∞ÔºåÂ¶ÇÊûúÂ≠êÁ±ª‰∏çÊÑøÊÑèÂ§ÑÁêÜËøô‰∏™ËØ∑Ê±ÇÔºå //ÈÇ£Â∞±‰º†ÈÄíÂà∞‰∏ã‰∏Ä‰∏™ËÅåË¥£ÂØπË±°ÂéªÂ§ÑÁêÜ return this.successor.handleRequest(rm); &#125; else &#123; System.out.println("Ê≤°ÊúâÂêéÁª≠Â§ÑÁêÜÊàñËÄÖÊöÇÊó∂‰∏çÊîØÊåÅËøôÊ†∑ÁöÑÂäüËÉΩÂ§ÑÁêÜ"); return false; &#125; &#125;&#125; Áé∞Âú®Êù•Âä†‰∏äÁ¨¨‰∏Ä‰∏™‰∏öÂä°ÔºåÂ∞±ÊòØ‚ÄúËÅöÈ§êË¥πÁî®Áî≥ËØ∑‚ÄùÁöÑÂ§ÑÁêÜÔºå‰∏∫‰∫ÜÊèèËø∞ÂÖ∑‰ΩìÁöÑ‰∏öÂä°Êï∞ÊçÆÔºåÈúÄË¶ÅÊâ©Â±ïÈÄöÁî®ÁöÑËØ∑Ê±ÇÂØπË±°ÔºåÊää‰∏öÂä°Êï∞ÊçÆÂ∞ÅË£ÖËøõÂéªÔºåÂè¶Â§ñÂÆö‰πâ‰∏Ä‰∏™ËØ∑Ê±ÇÂØπË±° 1234567891011121314151617181920212223242526272829303132333435363738394041package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÂÖ∑‰ΩìÁöÑ‰∏öÂä°ËØ∑Ê±ÇÂØπË±°--ËÅöÈ§êË¥πÁî®Áî≥ËØ∑ */public class FeeRequestModel extends RequestModel &#123; /** * Á∫¶ÂÆöÂÖ∑‰ΩìÁöÑ‰∏öÂä°Á±ªÂûã */ public final static String FEE_TYPE = "fee"; public FeeRequestModel() &#123; super(FEE_TYPE); &#125; /** * Áî≥ËØ∑‰∫∫ */ private String user; /** * Áî≥ËØ∑ÈáëÈ¢ù */ private double fee; public String getUser() &#123; return user; &#125; public void setUser(String user) &#123; this.user = user; &#125; public double getFee() &#123; return fee; &#125; public void setFee(double fee) &#123; this.fee = fee; &#125;&#125; Êé•‰∏ãÊù•ËØ•ÂÆûÁé∞ËÅåË¥£ÂØπË±°ÁöÑÂ§ÑÁêÜ‰∫ÜÔºåÈ¶ñÂÖàË¶ÅË¶ÜÁõñÁà∂Á±ªÁöÑÈÄöÁî®‰∏öÂä°Â§ÑÁêÜÊñπÊ≥ïÔºåÁÑ∂ÂêéÂú®ÈáåÈù¢Â§ÑÁêÜËá™Â∑±ÊÉ≥Ë¶ÅÂÆûÁé∞ÁöÑ‰∏öÂä°Ôºå‰∏çÊÉ≥Â§ÑÁêÜÁöÑÂ∞±ËÆ©Áà∂Á±ªÂéªÂ§ÑÁêÜÔºåÁà∂Á±ª‰ºöÈªòËÆ§ÁöÑ‰º†ÈÄíÁªô‰∏ã‰∏Ä‰∏™Â§ÑÁêÜÂØπË±°„ÄÇ È°πÁõÆÁªèÁêÜÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÂÖ∑‰ΩìÁöÑËÅåË¥£ÂØπË±°--È°πÁõÆÁªèÁêÜ */public class ProjectManager extends Handler &#123; @Override public Object handleRequest(RequestModel rm) &#123; if (FeeRequestModel.FEE_TYPE.equals(rm.getType())) &#123; //Ë°®Á§∫ËÅöÈ§êË¥πÁî®Áî≥ËØ∑ return handleFeeRequest(rm); &#125; else &#123; //ÂÖ∂ÂÆÉÁöÑÈ°πÁõÆÁªèÁêÜÊöÇÊó∂‰∏çÊÉ≥Â§ÑÁêÜ return super.handleRequest(rm); &#125; &#125; /** * ËÅöÈ§êË¥πÁî®Â§ÑÁêÜ * * @param rm * @return */ private Object handleFeeRequest(RequestModel rm) &#123; //ÂÖàÊääÈÄöÁî®ÁöÑÂØπË±°ÈÄ†ÂûãÂõûÊù• FeeRequestModel frm = (FeeRequestModel) rm; String str = ""; //È°πÁõÆÁªèÁêÜÁöÑÊùÉÈôêÊØîËæÉÂ∞èÔºåÂè™ËÉΩÂú®500‰ª•ÂÜÖ if (frm.getFee() &lt; 500) &#123; //‰∏∫‰∫ÜÊµãËØïÔºåÁÆÄÂçïÁÇπÔºåÂè™ÂêåÊÑèÂ∞èÊùéÁöÑ if ("Â∞èÊùé".equals(frm.getUser())) &#123; str = "È°πÁõÆÁªèÁêÜÂêåÊÑè" + frm.getUser() + "ËÅöÈ§êË¥πÁî®" + frm.getFee() + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; else &#123; //ÂÖ∂ÂÆÉ‰∫∫‰∏ÄÂæã‰∏çÂêåÊÑè str = "È°πÁõÆÁªèÁêÜ‰∏çÂêåÊÑè" + frm.getUser() + "ËÅöÈ§êË¥πÁî®" + frm.getFee() + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; return str; &#125; else &#123; //Ë∂ÖËøá500ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return successor.handleRequest(rm); &#125; &#125; return str; &#125;&#125; ÈÉ®Èó®ÁªèÁêÜÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÈÉ®Èó®ÁªèÁêÜ */public class DeptManager extends Handler &#123; @Override public Object handleRequest(RequestModel rm) &#123; if (FeeRequestModel.FEE_TYPE.equals(rm.getType())) &#123; //Ë°®Á§∫ËÅöÈ§êË¥πÁî®Áî≥ËØ∑ return handleFeeRequest(rm); &#125; else &#123; //ÂÖ∂ÂÆÉÁöÑÈÉ®Èó®ÁªèÁêÜÊöÇÊó∂‰∏çÊÉ≥Â§ÑÁêÜ return super.handleRequest(rm); &#125; &#125; /** * ËÅöÈ§êË¥πÁî®Â§ÑÁêÜ * * @param rm * @return */ private Object handleFeeRequest(RequestModel rm) &#123; //ÂÖàÊääÈÄöÁî®ÁöÑÂØπË±°ÈÄ†ÂûãÂõûÊù• FeeRequestModel frm = (FeeRequestModel) rm; String str = ""; //ÈÉ®Èó®ÁªèÁêÜÁöÑÊùÉÈôêÂè™ËÉΩÂú®1000‰ª•ÂÜÖ if (frm.getFee() &lt; 1000) &#123; //‰∏∫‰∫ÜÊµãËØïÔºåÁÆÄÂçïÁÇπÔºåÂè™ÂêåÊÑèÂ∞èÊùéÁöÑ if ("Â∞èÊùé".equals(frm.getUser())) &#123; str = "ÈÉ®Èó®ÁªèÁêÜÂêåÊÑè" + frm.getUser() + "ËÅöÈ§êË¥πÁî®" + frm.getFee() + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; else &#123; //ÂÖ∂ÂÆÉ‰∫∫‰∏ÄÂæã‰∏çÂêåÊÑè str = "ÈÉ®Èó®ÁªèÁêÜ‰∏çÂêåÊÑè" + frm.getUser() + "ËÅöÈ§êË¥πÁî®" + frm.getFee() + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; return str; &#125; else &#123; //Ë∂ÖËøá1000ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return successor.handleRequest(rm); &#125; &#125; return str; &#125;&#125; ÊÄªÁªèÁêÜÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÊÄªÁªèÁêÜ */public class GeneralManager extends Handler &#123; @Override public Object handleRequest(RequestModel rm) &#123; if (FeeRequestModel.FEE_TYPE.equals(rm.getType())) &#123; //Ë°®Á§∫ËÅöÈ§êË¥πÁî®Áî≥ËØ∑ return handleFeeRequest(rm); &#125; else &#123; //ÂÖ∂ÂÆÉÁöÑÊÄªÁªèÁêÜÊöÇÊó∂‰∏çÊÉ≥Â§ÑÁêÜ return super.handleRequest(rm); &#125; &#125; /** * ËÅöÈ§êË¥πÁî®Â§ÑÁêÜ * * @param rm * @return */ private Object handleFeeRequest(RequestModel rm) &#123; //ÂÖàÊääÈÄöÁî®ÁöÑÂØπË±°ÈÄ†ÂûãÂõûÊù• FeeRequestModel frm = (FeeRequestModel) rm; String str = ""; //ÊÄªÁªèÁêÜÁöÑÊùÉÈôêÂæàÂ§ßÔºåÂè™Ë¶ÅËØ∑Ê±ÇÂà∞‰∫ÜËøôÈáåÔºå‰ªñÈÉΩÂèØ‰ª•Â§ÑÁêÜ if (frm.getFee() &gt;= 1000) &#123; //‰∏∫‰∫ÜÊµãËØïÔºåÁÆÄÂçïÁÇπÔºåÂè™ÂêåÊÑèÂ∞èÊùéÁöÑ if ("Â∞èÊùé".equals(frm.getUser())) &#123; str = "ÊÄªÁªèÁêÜÂêåÊÑè" + frm.getUser() + "ËÅöÈ§êË¥πÁî®" + frm.getFee() + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; else &#123; //ÂÖ∂ÂÆÉ‰∫∫‰∏ÄÂæã‰∏çÂêåÊÑè str = "ÊÄªÁªèÁêÜ‰∏çÂêåÊÑè" + frm.getUser() + "ËÅöÈ§êË¥πÁî®" + frm.getFee() + "ÂÖÉÁöÑËØ∑Ê±Ç"; &#125; return str; &#125; else &#123; //Â¶ÇÊûúËøòÊúâÂêéÁªßÁöÑÂ§ÑÁêÜÂØπË±°ÔºåÁªßÁª≠‰º†ÈÄí if (this.successor != null) &#123; return successor.handleRequest(rm); &#125; &#125; return str; &#125;&#125; ÂØπ‰∫éÂÆ¢Êà∑Á´ØÔºåÂîØ‰∏ÄÁöÑÈ∫ªÁÉ¶ÊòØÈúÄË¶ÅÁü•ÈÅìÊØè‰∏™‰∏öÂä°ÂØπÂ∫îÁöÑÂÖ∑‰ΩìÁöÑËØ∑Ê±ÇÂØπË±°ÔºåÂõ†‰∏∫Ë¶ÅÂ∞ÅË£Ö‰∏öÂä°Êï∞ÊçÆËøõÂéª. 123456789101112131415161718192021222324252627282930313233343536package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class Client &#123; public static void main(String[] args) &#123; //ÂÖàË¶ÅÁªÑË£ÖËÅåË¥£Èìæ Handler h1 = new GeneralManager(); Handler h2 = new DeptManager(); Handler h3 = new ProjectManager(); h3.setSuccessor(h2); h2.setSuccessor(h1); //ÂºÄÂßãÊµãËØïÁî≥ËØ∑ËÅöÈ§êË¥πÁî® FeeRequestModel frm = new FeeRequestModel(); frm.setFee(300); frm.setUser("Â∞èÊùé"); //Ë∞ÉÁî®Â§ÑÁêÜ String ret1 = (String) h3.handleRequest(frm); System.out.println("ret1=" + ret1); //ÈáçÊñ∞ËÆæÁΩÆÁî≥ËØ∑ÈáëÈ¢ùÔºåÂÜçË∞ÉÁî®Â§ÑÁêÜ frm.setFee(800); h3.handleRequest(frm); String ret2 = (String) h3.handleRequest(frm); System.out.println("ret2=" + ret2); //ÈáçÊñ∞ËÆæÁΩÆÁî≥ËØ∑ÈáëÈ¢ùÔºåÂÜçË∞ÉÁî®Â§ÑÁêÜ frm.setFee(1600); h3.handleRequest(frm); String ret3 = (String) h3.handleRequest(frm); System.out.println("ret3=" + ret3); &#125;&#125; Êé•‰∏ãÊù•ÁúãÁúãÂ¶Ç‰ΩïÂú®‰∏çÊîπÂä®Áé∞ÊúâÁöÑÊ°ÜÊû∂ÁöÑÂâçÊèê‰∏ãÔºåÊâ©Â±ïÊñ∞ÁöÑ‰∏öÂä°ÔºåËøôÊ†∑ÊâçËÉΩËØ¥ÊòéËøôÁßçËÆæËÆ°ÁöÑÁÅµÊ¥ªÊÄß„ÄÇ ÂÅáÂ¶ÇÂ∞±ÊòØË¶ÅÂÆûÁé∞‰∏äÈù¢Á§∫‰æãËøáÁöÑÂè¶Â§ñ‰∏Ä‰∏™ÂäüËÉΩ‚ÄúÈ¢ÑÊîØÂ∑ÆÊóÖË¥πÁî≥ËØ∑‚Äù„ÄÇË¶ÅÊÉ≥Êâ©Â±ïÊñ∞ÁöÑ‰∏öÂä°ÔºåÁ¨¨‰∏ÄÊ≠•Â∞±ÊòØÊñ∞Âª∫‰∏Ä‰∏™Â∞ÅË£Ö‰∏öÂä°Êï∞ÊçÆÁöÑÂØπË±° 1234567891011121314151617181920212223242526272829303132333435363738394041package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®ËØ∑Ê±ÇÂØπË±° */public class PreFeeRequestModel extends RequestModel &#123; /** * Á∫¶ÂÆöÂÖ∑‰ΩìÁöÑ‰∏öÂä°Á±ªÂûã */ public final static String FEE_TYPE = "preFee"; public PreFeeRequestModel() &#123; super(FEE_TYPE); &#125; /** * Áî≥ËØ∑‰∫∫ */ private String user; /** * Áî≥ËØ∑ÈáëÈ¢ù */ private double fee; public String getUser() &#123; return user; &#125; public void setUser(String user) &#123; this.user = user; &#125; public double getFee() &#123; return fee; &#125; public void setFee(double fee) &#123; this.fee = fee; &#125;&#125; ÂØπ‰∫éÂÖ∑‰ΩìËøõË°åËÅåË¥£Â§ÑÁêÜÁöÑÁ±ªÔºåÊØîËæÉÂ•ΩÁöÑÊñπÂºèÂ∞±ÊòØÊâ©Â±ïÂá∫Â≠êÁ±ªÊù•ÔºåÁÑ∂ÂêéÂú®Â≠êÁ±ªÈáåÈù¢ÂÆûÁé∞Êñ∞Âä†ÂÖ•ÁöÑ‰∏öÂä°ÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•Áõ¥Êé•Âú®ÂéüÊù•ÁöÑÂØπË±°‰∏äÊîπ„ÄÇËøôÈáåÈááÁî®Êâ©Â±ïÂá∫Â≠êÁ±ªÁöÑÊñπÂºè„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÂÆûÁé∞‰∏∫È°πÁõÆÁªèÁêÜÂ¢ûÂä†È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®Áî≥ËØ∑Â§ÑÁêÜÁöÑÂäüËÉΩÁöÑÂ≠êÂØπË±°Ôºå * Áé∞Âú®ÁöÑÈ°πÁõÆÁªèÁêÜÊó¢ÂèØ‰ª•Â§ÑÁêÜËÅöÈ§êË¥πÁî®Áî≥ËØ∑ÔºåÂèàÂèØ‰ª•Â§ÑÁêÜÈ¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®Áî≥ËØ∑ */public class ProjectManager2 extends ProjectManager &#123; @Override public Object handleRequest(RequestModel rm) &#123; if (PreFeeRequestModel.FEE_TYPE.equals(rm.getType())) &#123; //Ë°®Á§∫È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®Áî≥ËØ∑ return handlePreFeeRequest(rm); &#125; else &#123; //ÂÖ∂ÂÆÉÁöÑËÆ©Áà∂Á±ªÂéªÂ§ÑÁêÜ return super.handleRequest(rm); &#125; &#125; /** * È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî® * * @param rm * @return */ private Object handlePreFeeRequest(RequestModel rm) &#123; //ÂÖàÊääÈÄöÁî®ÁöÑÂØπË±°ÈÄ†ÂûãÂõûÊù• PreFeeRequestModel frm = (PreFeeRequestModel) rm; //È°πÁõÆÁªèÁêÜÁöÑÊùÉÈôêÊØîËæÉÂ∞èÔºåÂè™ËÉΩÂú®5000‰ª•ÂÜÖ if (frm.getFee() &lt; 5000) &#123; //Â∑•‰ΩúÈúÄË¶ÅÂòõÔºåÁªüÁªüÂêåÊÑè System.out.println("È°πÁõÆÁªèÁêÜÂêåÊÑè" + frm.getUser() + "È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®" + frm.getFee() + "ÂÖÉÁöÑËØ∑Ê±Ç"); return true; &#125; else &#123; //Ë∂ÖËøá5000ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return this.successor.handleRequest(rm); &#125; &#125; return false; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÂÆûÁé∞‰∏∫ÈÉ®Èó®ÁªèÁêÜÂ¢ûÂä†È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®Áî≥ËØ∑Â§ÑÁêÜÁöÑÂäüËÉΩÁöÑÂ≠êÂØπË±°Ôºå * Áé∞Âú®ÁöÑÈÉ®Èó®ÁªèÁêÜÊó¢ÂèØ‰ª•Â§ÑÁêÜËÅöÈ§êË¥πÁî®Áî≥ËØ∑ÔºåÂèàÂèØ‰ª•Â§ÑÁêÜÈ¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®Áî≥ËØ∑ */public class DeptManager2 extends ProjectManager &#123; @Override public Object handleRequest(RequestModel rm) &#123; if (PreFeeRequestModel.FEE_TYPE.equals(rm.getType())) &#123; //Ë°®Á§∫È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®Áî≥ËØ∑ return handlePreFeeRequest(rm); &#125; else &#123; //ÂÖ∂ÂÆÉÁöÑËÆ©Áà∂Á±ªÂéªÂ§ÑÁêÜ return super.handleRequest(rm); &#125; &#125; /** * È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî® * * @param rm * @return */ private Object handlePreFeeRequest(RequestModel rm) &#123; //ÂÖàÊääÈÄöÁî®ÁöÑÂØπË±°ÈÄ†ÂûãÂõûÊù• PreFeeRequestModel frm = (PreFeeRequestModel) rm; //ÈÉ®Èó®ÁªèÁêÜÁöÑÊùÉÈôêÂú®20000‰ª•ÂÜÖ if (frm.getFee() &lt; 20000) &#123; //Â∑•‰ΩúÈúÄË¶ÅÂòõÔºåÁªüÁªüÂêåÊÑè System.out.println("ÈÉ®Èó®ÁªèÁêÜÂêåÊÑè" + frm.getUser() + "È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®" + frm.getFee() + "ÂÖÉÁöÑËØ∑Ê±Ç"); return true; &#125; else &#123; //Ë∂ÖËøá20000ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return this.successor.handleRequest(rm); &#125; &#125; return false; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÂÆûÁé∞‰∏∫ÊÄªÁªèÁêÜÂ¢ûÂä†È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®Áî≥ËØ∑Â§ÑÁêÜÁöÑÂäüËÉΩÁöÑÂ≠êÂØπË±°Ôºå * Áé∞Âú®ÁöÑÊÄªÁªèÁêÜÊó¢ÂèØ‰ª•Â§ÑÁêÜËÅöÈ§êË¥πÁî®Áî≥ËØ∑ÔºåÂèàÂèØ‰ª•Â§ÑÁêÜÈ¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®Áî≥ËØ∑ */public class GeneralManager2 extends ProjectManager &#123; @Override public Object handleRequest(RequestModel rm) &#123; if (PreFeeRequestModel.FEE_TYPE.equals(rm.getType())) &#123; //Ë°®Á§∫È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®Áî≥ËØ∑ return handlePreFeeRequest(rm); &#125; else &#123; //ÂÖ∂ÂÆÉÁöÑËÆ©Áà∂Á±ªÂéªÂ§ÑÁêÜ return super.handleRequest(rm); &#125; &#125; /** * È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî® * * @param rm * @return */ private Object handlePreFeeRequest(RequestModel rm) &#123; //ÂÖàÊääÈÄöÁî®ÁöÑÂØπË±°ÈÄ†ÂûãÂõûÊù• PreFeeRequestModel frm = (PreFeeRequestModel) rm; //ÊÄªÁªèÁêÜÁöÑÊùÉÈôêÂú®20000‰ª•ÂÜÖ if (frm.getFee() &gt;= 20000) &#123; //Â∑•‰ΩúÈúÄË¶ÅÂòõÔºåÁªüÁªüÂêåÊÑè System.out.println("ÊÄªÁªèÁêÜÂêåÊÑè" + frm.getUser() + "È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî®" + frm.getFee() + "ÂÖÉÁöÑËØ∑Ê±Ç"); return true; &#125; else &#123; //Â¶ÇÊûúËøòÊúâÂêéÁª≠ÔºåÁªßÁª≠‰º†ÈÄíÁªôÁ∫ßÂà´Êõ¥È´òÁöÑ‰∫∫Â§ÑÁêÜ if (this.successor != null) &#123; return this.successor.handleRequest(rm); &#125; &#125; return false; &#125;&#125; Ê≠§Êó∂ÁöÑÊµãËØïÁ±ª 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849package main.java.com.study.designPatterns.chain.demoTwo.upgrade;/** * @author: whb * @description: ÊãìÂ±ïÂêéÁöÑÊµãËØïÁ±ª */public class Client2 &#123; public static void main(String[] args) &#123; //ÂÖàË¶ÅÁªÑË£ÖËÅåË¥£Èìæ Handler h1 = new GeneralManager2(); Handler h2 = new DeptManager2(); Handler h3 = new ProjectManager2(); h3.setSuccessor(h2); h2.setSuccessor(h1); //ÂºÄÂßãÊµãËØïÁî≥ËØ∑ËÅöÈ§êË¥πÁî® FeeRequestModel frm = new FeeRequestModel(); frm.setFee(300); frm.setUser("Â∞èÊùé"); //Ë∞ÉÁî®Â§ÑÁêÜ String ret1 = (String) h3.handleRequest(frm); System.out.println("ret1=" + ret1); //ÈáçÊñ∞ËÆæÁΩÆÁî≥ËØ∑ÈáëÈ¢ùÔºåÂÜçË∞ÉÁî®Â§ÑÁêÜ frm.setFee(800); h3.handleRequest(frm); String ret2 = (String) h3.handleRequest(frm); System.out.println("ret2=" + ret2); //ÈáçÊñ∞ËÆæÁΩÆÁî≥ËØ∑ÈáëÈ¢ùÔºåÂÜçË∞ÉÁî®Â§ÑÁêÜ frm.setFee(1600); h3.handleRequest(frm); String ret3 = (String) h3.handleRequest(frm); System.out.println("ret3=" + ret3); //ÂºÄÂßãÊµãËØïÁî≥ËØ∑È¢ÑÊîØÂ∑ÆÊóÖË¥πÁî® PreFeeRequestModel pfrm = new PreFeeRequestModel(); pfrm.setFee(3000); pfrm.setUser("Â∞èÂº†"); //Ë∞ÉÁî®Â§ÑÁêÜ h3.handleRequest(pfrm); //ÈáçÊñ∞ËÆæÁΩÆÁî≥ËØ∑ÈáëÈ¢ùÔºåÂÜçË∞ÉÁî®Â§ÑÁêÜ pfrm.setFee(6000); h3.handleRequest(pfrm); //ÈáçÊñ∞ËÆæÁΩÆÁî≥ËØ∑ÈáëÈ¢ùÔºåÂÜçË∞ÉÁî®Â§ÑÁêÜ pfrm.setFee(36000); h3.handleRequest(pfrm); &#125;&#125; ÊÄªÁªì ËøôÁßçËÆæËÆ°ÊñπÂºèÁöÑÂ•ΩÂ§ÑÔºåÁõ∏ÂΩìÁöÑÈÄöÁî®ÂíåÁÅµÊ¥ªÔºåÊúâ‰∫ÜÊñ∞‰∏öÂä°ÔºåÂè™ÈúÄË¶ÅÊ∑ªÂä†ÂÆûÁé∞Êñ∞ÂäüËÉΩÁöÑÂØπË±°Â∞±ÂèØ‰ª•‰∫ÜÔºå‰ΩÜÊòØÂ∏¶Êù•ÁöÑÁº∫Èô∑Â∞±ÊòØÂèØËÉΩ‰ºöÈÄ†ÊàêÂØπË±°Â±ÇÊ¨°ËøáÂ§öÔºåÊàñËÄÖÂá∫Áé∞ËæÉÂ§öÁöÑÁªÜÁ≤íÂ∫¶ÁöÑÂØπË±°ÔºåÊûÅÁ´ØÊÉÖÂÜµ‰∏ãÔºåÊØèÊ¨°Â∞±Êâ©Â±ï‰∏Ä‰∏™ÊñπÊ≥ïÔºå‰ºöÂá∫Áé∞Â§ßÈáèÂè™Â§ÑÁêÜ‰∏Ä‰∏™ÂäüËÉΩÁöÑÁªÜÁ≤íÂ∫¶ÂØπË±°„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-ÈÄÇÈÖçÂô®Ê®°Âºè]]></title>
    <url>%2Fposts%2F210c1e9b.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ Â∞Ü‰∏Ä‰∏™Êé•Âè£ËΩ¨Êç¢ÊàêÂÆ¢Êà∑Â∏åÊúõÁöÑÂè¶‰∏Ä‰∏™Êé•Âè£Ôºå‰ΩøÊé•Âè£‰∏çÂÖºÂÆπÁöÑÈÇ£‰∫õÁ±ªÂèØ‰ª•‰∏ÄËµ∑Â∑•‰ΩúÔºåÂÖ∂Âà´Âêç‰∏∫ÂåÖË£ÖÂô®(Wrapper)„ÄÇ ÈÄÇÈÖçÂô®Ê®°ÂºèÊó¢ÂèØ‰ª•‰Ωú‰∏∫Á±ªÁªìÊûÑÂûãÊ®°ÂºèÔºå‰πüÂèØ‰ª•‰Ωú‰∏∫ÂØπË±°ÁªìÊûÑÂûãÊ®°Âºè„ÄÇ ‰∏ªË¶Å‰ΩúÁî® Êèê‰æõ‰∏Ä‰∏™ËΩ¨Êç¢Âô®ÔºàÈÄÇÈÖçÂô®ÔºâÔºåÂ∞ÜÂΩìÂâçÁ≥ªÁªüÂ≠òÂú®ÁöÑ‰∏Ä‰∏™ÂØπË±°ËΩ¨Âåñ‰∏∫ÂÆ¢Êà∑Á´ØËÉΩÂ§üËÆøÈóÆÁöÑÊé•Âè£ÂØπË±°„ÄÇ Ê®°ÂºèÂàÜÁ±ª Ê†πÊçÆÈÄÇÈÖçÂô®Á±ª‰∏éÈÄÇÈÖçËÄÖÁ±ªÁöÑÂÖ≥Á≥ª‰∏çÂêåÔºåÈÄÇÈÖçÂô®Ê®°ÂºèÂèØÂàÜ‰∏∫ÂØπË±°ÈÄÇÈÖçÂô®ÂíåÁ±ªÈÄÇÈÖçÂô®‰∏§Áßç„ÄÇ Âú®ÂØπË±°ÈÄÇÈÖçÂô®Ê®°Âºè‰∏≠ÔºåÈÄÇÈÖçÂô®‰∏éÈÄÇÈÖçËÄÖ‰πãÈó¥ÊòØÂÖ≥ËÅîÂÖ≥Á≥ªÔºõ Âú®Á±ªÈÄÇÈÖçÂô®Ê®°Âºè‰∏≠ÔºåÈÄÇÈÖçÂô®‰∏éÈÄÇÈÖçËÄÖ‰πãÈó¥ÊòØÁªßÊâøÔºàÊàñÂÆûÁé∞ÔºâÂÖ≥Á≥ª„ÄÇ Ê®°ÂºèËßíËâ≤ TargetÔºàÁõÆÊ†áÊäΩË±°Á±ªÔºâÔºöÁõÆÊ†áÊäΩË±°Á±ªÂÆö‰πâÂÆ¢Êà∑ÊâÄÈúÄÊé•Âè£ÔºåÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÊàñÊé•Âè£Ôºå‰πüÂèØ‰ª•ÊòØÂÖ∑‰ΩìÁ±ª„ÄÇ AdapteeÔºàÈÄÇÈÖçËÄÖÁ±ªÔºâÔºöÈÄÇÈÖçËÄÖÂç≥Ë¢´ÈÄÇÈÖçÁöÑËßíËâ≤ÔºåÂÆÉÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑÊé•Âè£ÔºåËøô‰∏™Êé•Âè£ÈúÄË¶ÅÈÄÇÈÖçÔºåÈÄÇÈÖçËÄÖÁ±ª‰∏ÄËà¨ÊòØ‰∏Ä‰∏™ÂÖ∑‰ΩìÁ±ªÔºåÂåÖÂê´‰∫ÜÂÆ¢Êà∑Â∏åÊúõ‰ΩøÁî®ÁöÑ‰∏öÂä°ÊñπÊ≥ïÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÂèØËÉΩÊ≤°ÊúâÈÄÇÈÖçËÄÖÁ±ªÁöÑÊ∫ê‰ª£Á†Å„ÄÇ AdapterÔºàÈÄÇÈÖçÂô®Á±ªÔºâÔºöÈÄÇÈÖçÂô®ÂèØ‰ª•Ë∞ÉÁî®Âè¶‰∏Ä‰∏™Êé•Âè£Ôºå‰Ωú‰∏∫‰∏Ä‰∏™ËΩ¨Êç¢Âô®ÔºåÂØπAdapteeÂíåTargetËøõË°åÈÄÇÈÖçÔºåÈÄÇÈÖçÂô®Á±ªÊòØÈÄÇÈÖçÂô®Ê®°ÂºèÁöÑÊ†∏ÂøÉÔºåÂú®ÂØπË±°ÈÄÇÈÖçÂô®‰∏≠ÔºåÂÆÉÈÄöËøáÁªßÊâøTargetÂπ∂ÂÖ≥ËÅî‰∏Ä‰∏™AdapteeÂØπË±°‰Ωø‰∫åËÄÖ‰∫ßÁîüËÅîÁ≥ª„ÄÇ ‰∏âÁßçËßíËâ≤‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ãÔºö ÂÅáËÆæÂΩìÂâçÁ≥ªÁªü‰∏≠ÔºåÂÆ¢Êà∑Á´ØÈúÄË¶ÅËÆøÈóÆÁöÑÊòØ Target Êé•Âè£Ôºå‰ΩÜ Target Êé•Âè£Ê≤°Êúâ‰∏Ä‰∏™ÂÆû‰æãÁ¨¶ÂêàÈúÄÊ±ÇÔºåËÄå Adaptee ÂÆû‰æãÁ¨¶ÂêàÈúÄÊ±ÇÔºõ‰ΩÜÊòØÂÆ¢Êà∑Á´ØÊó†Ê≥ïÁõ¥Êé•‰ΩøÁî® AdapteeÔºàÊé•Âè£‰∏çÂÖºÂÆπÔºâÔºõÂõ†Ê≠§ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™ÈÄÇÈÖçÂô®ÔºàAdapterÔºâÊù•ËøõË°å‰∏≠ËΩ¨ÔºåËÆ© Adaptee ËÉΩËΩ¨Âåñ‰∏∫ Target Êé•Âè£ÂΩ¢ÂºèÔºõ Ê®°ÂºèËß£Êûê Á±ªÈÄÇÈÖçÂô® ÂéüÁêÜ ÈÄöËøáÁªßÊâøÊù•ÂÆûÁé∞ÈÄÇÈÖçÂô®ÂäüËÉΩ„ÄÇ ÂÖ∑‰ΩìÂÅöÊ≥ï ËÆ© Adapter ÂÆûÁé∞ Target Êé•Âè£ÔºåÂπ∂‰∏îÁªßÊâø AdapteeÔºåËøôÊ†∑ Adapter Â∞±ÂÖ∑Â§á Target Âíå Adaptee ÁöÑÁâπÊÄßÔºåÂ∞±ÂèØ‰ª•Â∞Ü‰∏§ËÄÖËøõË°åËΩ¨ÂåñÔºõ UMLÁ±ªÂõæ ‰ΩøÁî®Ê≠•È™§ ÂàõÂª∫TargetÊé•Âè£ 123456789101112package main.java.com.study.designPatterns.adapter.classAdapter.demoOne;/** * @author: whb * @description: ÁõÆÊ†áÁ±ª */public interface Target &#123; /** * ËøôÊòØÊ∫êÁ±ªAdapteeeÊ≤°ÊúâÁöÑÊñπÊ≥ï */ public void request();&#125; ÂàõÂª∫Ê∫êÁ±ªÔºàAdapteeÔºâ 1234567891011121314package main.java.com.study.designPatterns.adapter.classAdapter.demoOne;/** * @author: whb * @description: Ê∫êÁ±ª */public class Adaptee &#123; /** * ÈúÄË¶ÅÈÄÇÈÖçÁöÑÊé•Âè£ */ public void specificRequest() &#123; System.out.println("ÈúÄË¶ÅÈÄÇÈÖçÁöÑÊé•Âè£..."); &#125;&#125; ÂàõÂª∫ÈÄÇÈÖçÂô®Á±ªÔºàAdapterÔºâ 123456789101112131415161718package main.java.com.study.designPatterns.adapter.classAdapter.demoOne;/** * @author: whb * @description: ÈÄÇÈÖçÂô®AdapterÁªßÊâøËá™AdapteeÔºåÂêåÊó∂ÂèàÂÆûÁé∞‰∫ÜÁõÆÊ†á(Target)Êé•Âè£„ÄÇ */public class Adapter extends Adaptee implements Target &#123; /** * ÁõÆÊ†áÊé•Âè£Ë¶ÅÊ±ÇË∞ÉÁî®request()Ëøô‰∏™ÊñπÊ≥ïÂêçÔºå‰ΩÜÊ∫êÁ±ªAdapteeÊ≤°ÊúâÊñπÊ≥ïrequest()Ôºå * Âõ†Ê≠§ÈÄÇÈÖçÂô®Ë°•ÂÖÖ‰∏äËøô‰∏™ÊñπÊ≥ïÂêç„ÄÇ * ‰ΩÜÂÆûÈôÖ‰∏ärequest()Âè™ÊòØË∞ÉÁî®Ê∫êÁ±ªAdapteeÁöÑspecificRequest()ÊñπÊ≥ïÁöÑÂÜÖÂÆπÔºå * ÊâÄ‰ª•ÈÄÇÈÖçÂô®Âè™ÊòØÂ∞ÜspecificRequest()ÊñπÊ≥ï‰Ωú‰∫Ü‰∏ÄÂ±ÇÂ∞ÅË£ÖÔºåÂ∞ÅË£ÖÊàêTargetÂèØ‰ª•Ë∞ÉÁî®ÁöÑrequest()ËÄåÂ∑≤„ÄÇ */ @Override public void request() &#123; this.specificRequest(); &#125;&#125; ÂÆö‰πâÂÖ∑‰Ωì‰ΩøÁî®ÁõÆÊ†áÁ±ª 123456789101112package main.java.com.study.designPatterns.adapter.classAdapter.demoOne;/** * @author: whb * @description: ÊµãËØïÁ±ªÈÄÇÈÖçÂô® */public class TestClassAdapter &#123; public static void main(String[] args) &#123; Target mAdapter = new Adapter(); mAdapter.request(); &#125;&#125; ÂØπË±°ÈÄÇÈÖçÂô® ÂéüÁêÜ ÈÄöËøáÁªÑÂêàÊù•ÂÆûÁé∞ÈÄÇÈÖçÂô®ÂäüËÉΩ„ÄÇ ÂÖ∑‰ΩìÂÅöÊ≥ï ËÆ© Adapter ÂÆûÁé∞ Target Êé•Âè£ÔºåÁÑ∂ÂêéÂÜÖÈÉ®ÊåÅÊúâ Adaptee ÂÆû‰æãÔºåÁÑ∂ÂêéÂÜç Target Êé•Âè£ËßÑÂÆöÁöÑÊñπÊ≥ïÂÜÖËΩ¨Êç¢ Adaptee „ÄÇ UMLÁ±ªÂõæ ‰ΩøÁî®Ê≠•È™§ ÂàõÂª∫TargetÊé•Âè£ 123456789101112package main.java.com.study.designPatterns.adapter.objectAdapter.demoOne;/** * @author: whb * @description: ÁõÆÊ†áÁ±ª */public interface Target &#123; /** * ËøôÊòØÊ∫êÁ±ªAdapteeeÊ≤°ÊúâÁöÑÊñπÊ≥ï */ void request();&#125; ÂàõÂª∫Ê∫êÁ±ªÔºàAdapteeÔºâ 1234567891011121314package main.java.com.study.designPatterns.adapter.objectAdapter.demoOne;/** * @author: whb * @description: Ê∫êÁ±ª */public class Adaptee &#123; /** * ÈúÄË¶ÅÈÄÇÈÖçÁöÑÊé•Âè£ */ public void specificRequest() &#123; System.out.println("ÈúÄË¶ÅÈÄÇÈÖçÁöÑÊé•Âè£..."); &#125;&#125; ÂàõÂª∫ÈÄÇÈÖçÂô®Á±ªÔºàAdapterÔºâ 12345678910111213141516171819202122232425package main.java.com.study.designPatterns.adapter.objectAdapter.demoOne;/** * @author: whb * @description: ÈÄÇÈÖçÂô®Á±ªÔºàAdapterÔºâÔºà‰∏çÈÄÇÁî®ÁªßÊâøËÄåÊòØÂßîÊ¥æÔºâ */public class Adapter implements Target &#123; /** * Áõ¥Êé•ÂÖ≥ËÅîË¢´ÈÄÇÈÖçÁ±ª */ private Adaptee adaptee; /** * ÂèØ‰ª•ÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞‰º†ÂÖ•ÂÖ∑‰ΩìÈúÄË¶ÅÈÄÇÈÖçÁöÑË¢´ÈÄÇÈÖçÁ±ªÂØπË±° */ public Adapter(Adaptee adaptee) &#123; this.adaptee = adaptee; &#125; @Override public void request() &#123; //ËøôÈáå‰ΩøÁî®ÂßîÊâòÁöÑÊñπÂºèÂÆåÊàêÈÄÇÈÖç this.adaptee.specificRequest(); &#125;&#125; ÂÆö‰πâÂÖ∑‰Ωì‰ΩøÁî®ÁõÆÊ†áÁ±ª 1234567891011121314package main.java.com.study.designPatterns.adapter.objectAdapter.demoOne;/** * @author: whb * @description: ÊµãËØïÂØπË±°ÈÄÇÈÖç */public class TestObjectAdapter &#123; public static void main(String[] args) &#123; //ÈúÄË¶ÅÂÖàÂàõÂª∫‰∏Ä‰∏™Ë¢´ÈÄÇÈÖçÁ±ªÁöÑÂØπË±°‰Ωú‰∏∫ÂèÇÊï∞ Target mAdapter = new Adapter(new Adaptee()); mAdapter.request(); &#125;&#125; ‰ºòÁº∫ÁÇπ ÈÄÇÈÖçÂô®Ê®°Âºè ‰ºòÁÇπ Â∞ÜÁõÆÊ†áÁ±ªÂíåÈÄÇÈÖçËÄÖÁ±ªËß£ËÄ¶ÔºåÈÄöËøáÂºïÂÖ•‰∏Ä‰∏™ÈÄÇÈÖçÂô®Á±ªÊù•ÈáçÁî®Áé∞ÊúâÁöÑÈÄÇÈÖçËÄÖÁ±ªÔºåÊó†È°ª‰øÆÊîπÂéüÊúâÁªìÊûÑ„ÄÇ Â¢ûÂä†‰∫ÜÁ±ªÁöÑÈÄèÊòéÊÄßÂíåÂ§çÁî®ÊÄßÔºåÂ∞ÜÂÖ∑‰ΩìÁöÑ‰∏öÂä°ÂÆûÁé∞ËøáÁ®ãÂ∞ÅË£ÖÂú®ÈÄÇÈÖçËÄÖÁ±ª‰∏≠ÔºåÂØπ‰∫éÂÆ¢Êà∑Á´ØÁ±ªËÄåË®ÄÊòØÈÄèÊòéÁöÑÔºåËÄå‰∏îÊèêÈ´ò‰∫ÜÈÄÇÈÖçËÄÖÁöÑÂ§çÁî®ÊÄßÔºåÂêå‰∏Ä‰∏™ÈÄÇÈÖçËÄÖÁ±ªÂèØ‰ª•Âú®Â§ö‰∏™‰∏çÂêåÁöÑÁ≥ªÁªü‰∏≠Â§çÁî®„ÄÇ ÁÅµÊ¥ªÊÄßÂíåÊâ©Â±ïÊÄßÈÉΩÈùûÂ∏∏Â•ΩÔºåÈÄöËøá‰ΩøÁî®ÈÖçÁΩÆÊñá‰ª∂ÔºåÂèØ‰ª•ÂæàÊñπ‰æøÂú∞Êõ¥Êç¢ÈÄÇÈÖçÂô®Ôºå‰πüÂèØ‰ª•Âú®‰∏ç‰øÆÊîπÂéüÊúâ‰ª£Á†ÅÁöÑÂü∫Á°Ä‰∏äÂ¢ûÂä†Êñ∞ÁöÑÈÄÇÈÖçÂô®Á±ªÔºåÂÆåÂÖ®Á¨¶Âêà‚ÄúÂºÄÈó≠ÂéüÂàô‚Äù„ÄÇ Áº∫ÁÇπ ËøáÂ§öÁöÑ‰ΩøÁî®ÈÄÇÈÖçÂô®Ôºå‰ºöËÆ©Á≥ªÁªüÈùûÂ∏∏Èõ∂‰π±Ôºå‰∏çÊòìÊï¥‰ΩìËøõË°åÊääÊè°„ÄÇ Á±ªÁöÑÈÄÇÈÖçÂô®Ê®°Âºè ‰ºòÁÇπ Áî±‰∫éÈÄÇÈÖçÂô®Á±ªÊòØÈÄÇÈÖçËÄÖÁ±ªÁöÑÂ≠êÁ±ªÔºåÂõ†Ê≠§ÂèØ‰ª•Âú®ÈÄÇÈÖçÂô®Á±ª‰∏≠ÁΩÆÊç¢‰∏Ä‰∫õÈÄÇÈÖçËÄÖÁöÑÊñπÊ≥ïÔºå‰ΩøÂæóÈÄÇÈÖçÂô®ÁöÑÁÅµÊ¥ªÊÄßÊõ¥Âº∫„ÄÇ Áº∫ÁÇπ ÂØπ‰∫éJavaÁ≠â‰∏çÊîØÊåÅÂ§öÈáçÁ±ªÁªßÊâøÁöÑËØ≠Ë®ÄÔºå‰∏ÄÊ¨°ÊúÄÂ§öÂè™ËÉΩÈÄÇÈÖç‰∏Ä‰∏™ÈÄÇÈÖçËÄÖÁ±ªÔºå‰∏çËÉΩÂêåÊó∂ÈÄÇÈÖçÂ§ö‰∏™ÈÄÇÈÖçËÄÖÔºõ ÈÄÇÈÖçËÄÖÁ±ª‰∏çËÉΩ‰∏∫ÊúÄÁªàÁ±ªÔºåÂ¶ÇÂú®Java‰∏≠‰∏çËÉΩ‰∏∫finalÁ±ªÔºõ Âú®JavaÁ≠âËØ≠Ë®Ä‰∏≠ÔºåÁ±ªÈÄÇÈÖçÂô®Ê®°Âºè‰∏≠ÁöÑÁõÆÊ†áÊäΩË±°Á±ªÂè™ËÉΩ‰∏∫Êé•Âè£Ôºå‰∏çËÉΩ‰∏∫Á±ªÔºåÂÖ∂‰ΩøÁî®Êúâ‰∏ÄÂÆöÁöÑÂ±ÄÈôêÊÄß„ÄÇ ÂØπË±°ÁöÑÈÄÇÈÖçÂô®Ê®°Âºè ‰ºòÁÇπ ‰∏Ä‰∏™ÂØπË±°ÈÄÇÈÖçÂô®ÂèØ‰ª•ÊääÂ§ö‰∏™‰∏çÂêåÁöÑÈÄÇÈÖçËÄÖÈÄÇÈÖçÂà∞Âêå‰∏Ä‰∏™ÁõÆÊ†áÔºõ ÂèØ‰ª•ÈÄÇÈÖç‰∏Ä‰∏™ÈÄÇÈÖçËÄÖÁöÑÂ≠êÁ±ªÔºåÁî±‰∫éÈÄÇÈÖçÂô®ÂíåÈÄÇÈÖçËÄÖ‰πãÈó¥ÊòØÂÖ≥ËÅîÂÖ≥Á≥ªÔºåÊ†πÊçÆ‚ÄúÈáåÊ∞è‰ª£Êç¢ÂéüÂàô‚ÄùÔºåÈÄÇÈÖçËÄÖÁöÑÂ≠êÁ±ª‰πüÂèØÈÄöËøáËØ•ÈÄÇÈÖçÂô®ËøõË°åÈÄÇÈÖç„ÄÇ Áº∫ÁÇπ ‰∏éÁ±ªÈÄÇÈÖçÂô®Ê®°ÂºèÁõ∏ÊØîÔºåË¶ÅÂú®ÈÄÇÈÖçÂô®‰∏≠ÁΩÆÊç¢ÈÄÇÈÖçËÄÖÁ±ªÁöÑÊüê‰∫õÊñπÊ≥ïÊØîËæÉÈ∫ªÁÉ¶„ÄÇÂ¶ÇÊûú‰∏ÄÂÆöË¶ÅÁΩÆÊç¢ÊéâÈÄÇÈÖçËÄÖÁ±ªÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊñπÊ≥ïÔºåÂèØ‰ª•ÂÖàÂÅö‰∏Ä‰∏™ÈÄÇÈÖçËÄÖÁ±ªÁöÑÂ≠êÁ±ªÔºåÂ∞ÜÈÄÇÈÖçËÄÖÁ±ªÁöÑÊñπÊ≥ïÁΩÆÊç¢ÊéâÔºåÁÑ∂ÂêéÂÜçÊääÈÄÇÈÖçËÄÖÁ±ªÁöÑÂ≠êÁ±ªÂΩìÂÅöÁúüÊ≠£ÁöÑÈÄÇÈÖçËÄÖËøõË°åÈÄÇÈÖçÔºåÂÆûÁé∞ËøáÁ®ãËæÉ‰∏∫Â§çÊùÇ„ÄÇ Â∫îÁî®Âú∫ÊôØ ÈÄÇÈÖçÂô®ÁöÑ‰ΩøÁî®Âú∫ÊôØ Á≥ªÁªüÈúÄË¶ÅÂ§çÁî®Áé∞ÊúâÁ±ªÔºåËÄåËØ•Á±ªÁöÑÊé•Âè£‰∏çÁ¨¶ÂêàÁ≥ªÁªüÁöÑÈúÄÊ±ÇÔºåÂèØ‰ª•‰ΩøÁî®ÈÄÇÈÖçÂô®Ê®°Âºè‰ΩøÂæóÂéüÊú¨Áî±‰∫éÊé•Âè£‰∏çÂÖºÂÆπËÄå‰∏çËÉΩ‰∏ÄËµ∑Â∑•‰ΩúÁöÑÈÇ£‰∫õÁ±ªÂèØ‰ª•‰∏ÄËµ∑Â∑•‰Ωú Â§ö‰∏™ÁªÑ‰ª∂ÂäüËÉΩÁ±ª‰ººÔºå‰ΩÜÊé•Âè£‰∏çÁªü‰∏Ä‰∏îÂèØËÉΩ‰ºöÁªèÂ∏∏ÂàáÊç¢Êó∂ÔºåÂèØ‰ΩøÁî®ÈÄÇÈÖçÂô®Ê®°ÂºèÔºå‰ΩøÂæóÂÆ¢Êà∑Á´ØÂèØ‰ª•‰ª•Áªü‰∏ÄÁöÑÊé•Âè£‰ΩøÁî®ÂÆÉ‰ª¨ Á±ªÂíåÂØπË±°ÈÄÇÈÖçÂô®Ê®°ÂºèÁöÑ‰ΩøÁî®Âú∫ÊôØ ÁÅµÊ¥ª‰ΩøÁî®Êó∂ÔºöÈÄâÊã©ÂØπË±°ÁöÑÈÄÇÈÖçÂô®Ê®°Âºè Á±ªÈÄÇÈÖçÂô®‰ΩøÁî®ÂØπË±°ÁªßÊâøÁöÑÊñπÂºèÔºåÊòØÈùôÊÄÅÁöÑÂÆö‰πâÊñπÂºèÔºõËÄåÂØπË±°ÈÄÇÈÖçÂô®‰ΩøÁî®ÂØπË±°ÁªÑÂêàÁöÑÊñπÂºèÔºåÊòØÂä®ÊÄÅÁªÑÂêàÁöÑÊñπÂºè„ÄÇ ÈúÄË¶ÅÂêåÊó∂ÈÖçÊ∫êÁ±ªÂíåÂÖ∂Â≠êÁ±ªÔºöÈÄâÊã©ÂØπË±°ÁöÑÈÄÇÈÖçÂô® ÂØπ‰∫éÁ±ªÈÄÇÈÖçÂô®ÔºåÁî±‰∫éÈÄÇÈÖçÂô®Áõ¥Êé•ÁªßÊâø‰∫ÜAdapteeÔºå‰ΩøÂæóÈÄÇÈÖçÂô®‰∏çËÉΩÂíåAdapteeÁöÑÂ≠êÁ±ª‰∏ÄËµ∑Â∑•‰ΩúÔºåÂõ†‰∏∫ÁªßÊâøÊòØÈùôÊÄÅÁöÑÂÖ≥Á≥ªÔºåÂΩìÈÄÇÈÖçÂô®ÁªßÊâø‰∫ÜAdapteeÂêéÔºåÂ∞±‰∏çÂèØËÉΩÂÜçÂéªÂ§ÑÁêÜ AdapteeÁöÑÂ≠êÁ±ª‰∫ÜÔºõ ÂØπ‰∫éÂØπË±°ÈÄÇÈÖçÂô®Ôºå‰∏Ä‰∏™ÈÄÇÈÖçÂô®ÂèØ‰ª•ÊääÂ§öÁßç‰∏çÂêåÁöÑÊ∫êÈÄÇÈÖçÂà∞Âêå‰∏Ä‰∏™ÁõÆÊ†á„ÄÇÊç¢Ë®Ä‰πãÔºåÂêå‰∏Ä‰∏™ÈÄÇÈÖçÂô®ÂèØ‰ª•ÊääÊ∫êÁ±ªÂíåÂÆÉÁöÑÂ≠êÁ±ªÈÉΩÈÄÇÈÖçÂà∞ÁõÆÊ†áÊé•Âè£„ÄÇÂõ†‰∏∫ÂØπË±°ÈÄÇÈÖçÂô®ÈááÁî®ÁöÑÊòØÂØπË±°ÁªÑÂêàÁöÑÂÖ≥Á≥ªÔºåÂè™Ë¶ÅÂØπË±°Á±ªÂûãÊ≠£Á°ÆÔºåÊòØ‰∏çÊòØÂ≠êÁ±ªÈÉΩÊó†ÊâÄË∞ì„ÄÇ ÈúÄË¶ÅÈáçÊñ∞ÂÆö‰πâAdapteeÁöÑÈÉ®ÂàÜË°å‰∏∫ÔºöÈÄâÊã©Á±ªÈÄÇÈÖçÂô® ÂØπ‰∫éÁ±ªÈÄÇÈÖçÂô®ÔºåÈÄÇÈÖçÂô®ÂèØ‰ª•ÈáçÂÆö‰πâAdapteeÁöÑÈÉ®ÂàÜË°å‰∏∫ÔºåÁõ∏ÂΩì‰∫éÂ≠êÁ±ªË¶ÜÁõñÁà∂Á±ªÁöÑÈÉ®ÂàÜÂÆûÁé∞ÊñπÊ≥ï„ÄÇ ÂØπ‰∫éÂØπË±°ÈÄÇÈÖçÂô®ÔºåË¶ÅÈáçÂÆö‰πâAdapteeÁöÑË°å‰∏∫ÊØîËæÉÂõ∞ÈöæÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÈúÄË¶ÅÂÆö‰πâAdapteeÁöÑÂ≠êÁ±ªÊù•ÂÆûÁé∞ÈáçÂÆö‰πâÔºåÁÑ∂ÂêéËÆ©ÈÄÇÈÖçÂô®ÁªÑÂêàÂ≠êÁ±ª„ÄÇËôΩÁÑ∂ÈáçÂÆö‰πâAdapteeÁöÑË°å‰∏∫ÊØîËæÉÂõ∞ÈöæÔºå‰ΩÜÊòØÊÉ≥Ë¶ÅÂ¢ûÂä†‰∏Ä‰∫õÊñ∞ÁöÑË°å‰∏∫ÂàôÊñπ‰æøÁöÑÂæàÔºåËÄå‰∏îÊñ∞Â¢ûÂä†ÁöÑË°å‰∏∫ÂèØÂêåÊó∂ÈÄÇÁî®‰∫éÊâÄÊúâÁöÑÊ∫ê„ÄÇ ‰ªÖ‰ªÖÂ∏åÊúõ‰ΩøÁî®Êñπ‰æøÊó∂ÔºöÈÄâÊã©Á±ªÈÄÇÈÖçÂô® ÂØπ‰∫éÁ±ªÈÄÇÈÖçÂô®Ôºå‰ªÖ‰ªÖÂºïÂÖ•‰∫Ü‰∏Ä‰∏™ÂØπË±°ÔºåÂπ∂‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂºïÁî®Êù•Èó¥Êé•ÂæóÂà∞Adaptee„ÄÇ ÂØπ‰∫éÂØπË±°ÈÄÇÈÖçÂô®ÔºåÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂºïÁî®Êù•Èó¥Êé•ÂæóÂà∞Adaptee„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-Á≠ñÁï•Ê®°Âºè]]></title>
    <url>%2Fposts%2Fea641220.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ ÂÆö‰πâ‰∏ÄÁ≥ªÂàóÁÆóÊ≥ïÔºåÂ∞ÜÊØè‰∏Ä‰∏™ÁÆóÊ≥ïÂ∞ÅË£ÖËµ∑Êù•ÔºåÂπ∂ËÆ©ÂÆÉ‰ª¨ÂèØ‰ª•Áõ∏‰∫íÊõøÊç¢„ÄÇÁ≠ñÁï•Ê®°ÂºèËÆ©ÁÆóÊ≥ïÁã¨Á´ã‰∫é‰ΩøÁî®ÂÆÉÁöÑÂÆ¢Êà∑ËÄåÂèòÂåñ„ÄÇ ‰∏ªË¶Å‰ΩúÁî®(Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò) Â∞ÜÁÆóÊ≥ïÁöÑË¥£‰ªªÂíåÊú¨Ë∫´ËøõË°åËß£ËÄ¶Ôºå‰ΩøÂæóÔºö ÁÆóÊ≥ïÂèØÁã¨Á´ã‰∫é‰ΩøÁî®Â§ñÈÉ®ËÄåÂèòÂåñ„ÄÇ ÂÆ¢Êà∑Á´ØÊñπ‰æøÊ†πÊçÆÂ§ñÈÉ®Êù°‰ª∂ÈÄâÊã©‰∏çÂêåÁ≠ñÁï•Êù•Ëß£ÂÜ≥‰∏çÂêåÈóÆÈ¢ò„ÄÇ Ê®°ÂºèÂéüÁêÜ UMLÁ±ªÂõæ Ê®°Âºè‰ºòÁÇπ 1„ÄÇ Á≠ñÁï•Á±ª‰πãÈó¥ÂèØ‰ª•Ëá™Áî±ÂàáÊç¢ Áî±‰∫éÁ≠ñÁï•Á±ªÈÉΩÂÆûÁé∞Âêå‰∏Ä‰∏™Êé•Âè£ÔºåÊâÄ‰ª•‰ΩøÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•Ëá™Áî±ÂàáÊç¢„ÄÇ Êòì‰∫éÊâ©Â±ï Â¢ûÂä†‰∏Ä‰∏™Êñ∞ÁöÑÁ≠ñÁï•Âè™ÈúÄË¶ÅÊ∑ªÂä†‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÁ≠ñÁï•Á±ªÂç≥ÂèØÔºåÂü∫Êú¨‰∏çÈúÄË¶ÅÊîπÂèòÂéüÊúâÁöÑ‰ª£Á†ÅÔºåÁ¨¶Âêà‚ÄúÂºÄÈó≠ÂéüÂàô‚Äú„ÄÇ ÈÅøÂÖç‰ΩøÁî®Â§öÈáçÊù°‰ª∂ÈÄâÊã©ËØ≠Âè•Ôºàif elseÔºâÔºåÂÖÖÂàÜ‰ΩìÁé∞Èù¢ÂêëÂØπË±°ËÆæËÆ°ÊÄùÊÉ≥„ÄÇ Ê®°ÂºèÁº∫ÁÇπ ÂÆ¢Êà∑Á´ØÂøÖÈ°ªÁü•ÈÅìÊâÄÊúâÁöÑÁ≠ñÁï•Á±ªÔºåÂπ∂Ëá™Ë°åÂÜ≥ÂÆö‰ΩøÁî®Âì™‰∏Ä‰∏™Á≠ñÁï•Á±ª„ÄÇ Á≠ñÁï•Ê®°ÂºèÂ∞ÜÈÄ†Êàê‰∫ßÁîüÂæàÂ§öÁ≠ñÁï•Á±ªÔºåÂèØ‰ª•ÈÄöËøá‰ΩøÁî®‰∫´ÂÖÉÊ®°ÂºèÂú®‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÂáèÂ∞ëÂØπË±°ÁöÑÊï∞Èáè„ÄÇ Â∫îÁî®Âú∫ÊôØ Â¶ÇÊûúÂú®‰∏Ä‰∏™Á≥ªÁªüÈáåÈù¢ÊúâËÆ∏Â§öÁ±ªÔºåÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂå∫Âà´‰ªÖÂú®‰∫éÂÆÉ‰ª¨ÁöÑË°å‰∏∫ÔºåÈÇ£‰πà‰ΩøÁî®Á≠ñÁï•Ê®°ÂºèÂèØ‰ª•Âä®ÊÄÅÂú∞ËÆ©‰∏Ä‰∏™ÂØπË±°Âú®ËÆ∏Â§öË°å‰∏∫‰∏≠ÈÄâÊã©‰∏ÄÁßçË°å‰∏∫„ÄÇ ‰∏Ä‰∏™Á≥ªÁªüÈúÄË¶ÅÂä®ÊÄÅÂú∞Âú®Âá†ÁßçÁÆóÊ≥ï‰∏≠ÈÄâÊã©‰∏ÄÁßç„ÄÇÈÇ£‰πàËøô‰∫õÁÆóÊ≥ïÂèØ‰ª•ÂåÖË£ÖÂà∞‰∏Ä‰∏™‰∏™ÁöÑÂÖ∑‰ΩìÁÆóÊ≥ïÁ±ªÈáåÈù¢ÔºåËÄåËøô‰∫õÂÖ∑‰ΩìÁÆóÊ≥ïÁ±ªÈÉΩÊòØ‰∏Ä‰∏™ÊäΩË±°ÁÆóÊ≥ïÁ±ªÁöÑÂ≠êÁ±ª„ÄÇÊç¢Ë®Ä‰πãÔºåËøô‰∫õÂÖ∑‰ΩìÁÆóÊ≥ïÁ±ªÂùáÊúâÁªü‰∏ÄÁöÑÊé•Âè£ÔºåÁî±‰∫éÂ§öÊÄÅÊÄßÂéüÂàôÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•ÈÄâÊã©‰ΩøÁî®‰ªª‰Ωï‰∏Ä‰∏™ÂÖ∑‰ΩìÁÆóÊ≥ïÁ±ªÔºåÂπ∂Âè™ÊåÅÊúâ‰∏Ä‰∏™Êï∞ÊçÆÁ±ªÂûãÊòØÊäΩË±°ÁÆóÊ≥ïÁ±ªÁöÑÂØπË±°„ÄÇ ‰∏Ä‰∏™Á≥ªÁªüÁöÑÁÆóÊ≥ï‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰∏çÂèØ‰ª•ËÆ©ÂÆ¢Êà∑Á´ØÁü•ÈÅì„ÄÇÁ≠ñÁï•Ê®°ÂºèÂèØ‰ª•ÈÅøÂÖçËÆ©ÂÆ¢Êà∑Á´ØÊ∂âÂèäÂà∞‰∏çÂøÖË¶ÅÊé•Ëß¶Âà∞ÁöÑÂ§çÊùÇÁöÑÂíåÂè™‰∏éÁÆóÊ≥ïÊúâÂÖ≥ÁöÑÊï∞ÊçÆ„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™ÂØπË±°ÊúâÂæàÂ§öÁöÑË°å‰∏∫ÔºåÂ¶ÇÊûú‰∏çÁî®ÊÅ∞ÂΩìÁöÑÊ®°ÂºèÔºåËøô‰∫õË°å‰∏∫Â∞±Âè™Â•Ω‰ΩøÁî®Â§öÈáçÁöÑÊù°‰ª∂ÈÄâÊã©ËØ≠Âè•Êù•ÂÆûÁé∞„ÄÇÊ≠§Êó∂Ôºå‰ΩøÁî®Á≠ñÁï•Ê®°ÂºèÔºåÊääËøô‰∫õË°å‰∏∫ËΩ¨ÁßªÂà∞Áõ∏Â∫îÁöÑÂÖ∑‰ΩìÁ≠ñÁï•Á±ªÈáåÈù¢ÔºåÂ∞±ÂèØ‰ª•ÈÅøÂÖç‰ΩøÁî®Èöæ‰ª•Áª¥Êä§ÁöÑÂ§öÈáçÊù°‰ª∂ÈÄâÊã©ËØ≠Âè•ÔºåÂπ∂‰ΩìÁé∞Èù¢ÂêëÂØπË±°ËÆæËÆ°ÁöÑÊ¶ÇÂøµ„ÄÇ Ê®°ÂºèÁ§∫‰æã Á§∫‰æãËÉåÊôØ ËÉåÊôØÔºöÂÅáËÆæÊúâ‰∏ÄÂÆ∂ÁôæË¥ßÂÖ¨Âè∏ÔºåÊúÄËøëÂú®ÂÆöÂπ¥Â∫¶ÁöÑ‰øÉÈîÄÊ¥ªÂä® ÂÜ≤Á™ÅÔºöÊØè‰∏™ËäÇÊó•Áî®Âêå‰∏Ä‰∏™‰øÉÈîÄÊ¥ªÂä®Â§™ÊûØÁá•ÔºåÊ≤°Âê∏ÂºïÂäõ Ëß£ÂÜ≥ÊñπÊ°àÔºöÈíàÂØπ‰∏çÂêåËäÇÁõÆ‰ΩøÁî®‰∏çÂêå‰øÉÈîÄÊ¥ªÂä®ËøõË°å‰øÉÈîÄ ‰ΩøÁî®Ê≠•È™§ ÂÆö‰πâÊäΩË±°Á≠ñÁï•ËßíËâ≤ÔºàStrategyÔºâ ÁôæË¥ßÂÖ¨Âè∏ÊâÄÊúâ‰øÉÈîÄÊ¥ªÂä®ÁöÑÂÖ±ÂêåÊé•Âè£ 123456789101112package main.java.com.study.designPatterns.strategy.demoOne;/** * @author: whb * @description: ÂÆö‰πâÊäΩË±°Á≠ñÁï•ËßíËâ≤ÔºöÁôæË¥ßÂÖ¨Âè∏ÊâÄÊúâ‰øÉÈîÄÊ¥ªÂä®ÁöÑÂÖ±ÂêåÊé•Âè£ */public abstract class Strategy &#123; /** * Ê¥ªÂä®Â±ïÁ§∫ */ public abstract void show();&#125; ÂÆö‰πâÂÖ∑‰ΩìÁ≠ñÁï•ËßíËâ≤ÔºàConcrete StrategyÔºâ Êò•ËäÇ‰øÉÈîÄÊ¥ªÂä® 12345678910111213package main.java.com.study.designPatterns.strategy.demoOne;/** * @author: whb * @description: ÂÆö‰πâÂÖ∑‰ΩìÁ≠ñÁï•ËßíËâ≤ÔºöÊò•ËäÇ‰øÉÈîÄÊ¥ªÂä® */public class StrategyA extends Strategy &#123; @Override public void show() &#123; System.out.println("‰∏∫Êò•ËäÇÂáÜÂ§áÁöÑ‰øÉÈîÄÊ¥ªÂä®A"); &#125;&#125; ‰∏≠Áßã‰øÉÈîÄÊ¥ªÂä® 12345678910111213package main.java.com.study.designPatterns.strategy.demoOne;/** * @author: whb * @description: ÂÆö‰πâÂÖ∑‰ΩìÁ≠ñÁï•ËßíËâ≤Ôºö‰∏≠Áßã‰øÉÈîÄÊ¥ªÂä® */public class StrategyB extends Strategy &#123; @Override public void show() &#123; System.out.println("‰∏∫‰∏≠ÁßãËäÇÂáÜÂ§áÁöÑ‰øÉÈîÄÊ¥ªÂä®B"); &#125;&#125; Âú£ËØû‰øÉÈîÄÊ¥ªÂä® 12345678910111213package main.java.com.study.designPatterns.strategy.demoOne;/** * @author: whb * @description: ÂÆö‰πâÁ≠ñÁï•ËßíËâ≤ÔºöÂú£ËØû‰øÉÈîÄÊ¥ªÂä® */public class StrategyC extends Strategy &#123; @Override public void show() &#123; System.out.println("‰∏∫Âú£ËØûËäÇÂáÜÂ§áÁöÑ‰øÉÈîÄÊ¥ªÂä®C"); &#125;&#125; ÂÆö‰πâÁéØÂ¢ÉËßíËâ≤ÔºàContextÔºâ Áî®‰∫éËøûÊé•‰∏ä‰∏ãÊñáÔºåÂç≥Êää‰øÉÈîÄÊ¥ªÂä®Êé®ÈîÄÁªôÂÆ¢Êà∑ÔºåËøôÈáåÂèØ‰ª•ÁêÜËß£‰∏∫ÈîÄÂîÆÂëò 1234567891011121314151617181920212223242526272829303132333435363738package main.java.com.study.designPatterns.strategy.demoOne;/** * @author: whb * @description: ÂÆö‰πâÁéØÂ¢ÉËßíËâ≤ÔºöÁî®‰∫éËøûÊé•‰∏ä‰∏ãÊñáÔºåÊää‰øÉÈîÄÊ¥ªÂä®Êé®ÈîÄÁªôÁî®Êà∑ÔºåËøôÈáåÂèØ‰ª•ÁêÜËß£‰∏∫ÈîÄÂîÆÂëò */public class SalesMan &#123; //ÊåÅÊúâÊäΩË±°Á≠ñÁï•ËßíËâ≤ÁöÑÂºïÁî® private Strategy strategy; /** * ÁîüÊàêÈîÄÂîÆÂëòÂÆû‰æãÊó∂ÂëäËØâÈîÄÂîÆÂëò‰ªÄ‰πàËäÇÊó•ÔºàÊûÑÈÄ†ÊñπÊ≥ïÔºâ * ‰ΩøÂæóËÆ©ÈîÄÂîÆÂëòÊ†πÊçÆ‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºàËäÇÊó•ÔºâÈÄâÊã©‰øÉÈîÄÊ¥ªÂä®ÔºàËøôÈáå‰ΩøÁî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂ∑•ÂéÇÊ®°ÂºèÔºâ */ public SalesMan(String festival) &#123; switch (festival) &#123; //Êò•ËäÇÂ∞±‰ΩøÁî®Êò•ËäÇ‰øÉÈîÄÊ¥ªÂä® case "A": strategy = new StrategyA(); break; //‰∏≠ÁßãËäÇÂ∞±‰ΩøÁî®‰∏≠ÁßãËäÇ‰øÉÈîÄÊ¥ªÂä® case "B": strategy = new StrategyB(); break; //Âú£ËØûËäÇÂ∞±‰ΩøÁî®Âú£ËØûËäÇ‰øÉÈîÄÊ¥ªÂä® case "C": strategy = new StrategyC(); break; &#125; &#125; /** * ÂêëÂÆ¢Êà∑Â±ïÁ§∫‰øÉÈîÄÊ¥ªÂä® */ public void salesManShow() &#123; strategy.show(); &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® ËÆ©ÈîÄÂîÆÂëòËøõË°å‰øÉÈîÄÊ¥ªÂä®ÁöÑËêΩÂú∞ 123456789101112131415161718192021222324252627package main.java.com.study.designPatterns.strategy.demoOne;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class Client &#123; public static void main(String[] args) &#123; SalesMan mSalesMan; //Êò•ËäÇÊù•‰∫ÜÔºå‰ΩøÁî®Êò•ËäÇ‰øÉÈîÄÊ¥ªÂä® System.out.println("ÂØπ‰∫éÊò•ËäÇÔºö"); mSalesMan = new SalesMan("A"); mSalesMan.salesManShow(); //‰∏≠ÁßãËäÇÊù•‰∫ÜÔºå‰ΩøÁî®‰∏≠ÁßãËäÇ‰øÉÈîÄÊ¥ªÂä® System.out.println("ÂØπ‰∫é‰∏≠ÁßãËäÇÔºö"); mSalesMan = new SalesMan("B"); mSalesMan.salesManShow(); //Âú£ËØûËäÇÊù•‰∫ÜÔºå‰ΩøÁî®Âú£ËØûËäÇ‰øÉÈîÄÊ¥ªÂä® System.out.println("ÂØπ‰∫éÂú£ËØûËäÇÔºö"); mSalesMan = new SalesMan("C"); mSalesMan.salesManShow(); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â§öÁ∫øÁ®ãÈù¢ËØïÈ¢òÊÄªÁªì]]></title>
    <url>%2Fposts%2Fe3e73bdc.html</url>
    <content type="text"><![CDATA[Â§öÁ∫øÁ®ãÁöÑ‰ºòÁº∫ÁÇπ ‰ºòÁÇπÔºö Â§öÁ∫øÁ®ãÊäÄÊúØ‰ΩøÁ®ãÂ∫èÁöÑÂìçÂ∫îÈÄüÂ∫¶Êõ¥Âø´„ÄÇ ÂΩìÂâçÊ≤°ÊúâËøõË°åÂ§ÑÁêÜÁöÑ‰ªªÂä°ÂèØ‰ª•Â∞ÜÂ§ÑÁêÜÂô®Êó∂Èó¥ËÆ©ÁªôÂÖ∂ÂÆÉ‰ªªÂä°„ÄÇ Âç†Áî®Â§ßÈáèÂ§ÑÁêÜÊó∂Èó¥ÁöÑ‰ªªÂä°ÂèØ‰ª•ÂÆöÊúüÂ∞ÜÂ§ÑÁêÜÂô®Êó∂Èó¥ËÆ©ÁªôÂÖ∂ÂÆÉ‰ªªÂä°„ÄÇ ÂèØ‰ª•ÈöèÊó∂ÂÅúÊ≠¢‰ªªÂä°„ÄÇ ÂèØ‰ª•ÂàÜÂà´ËÆæÁΩÆÂêÑ‰∏™‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ß‰ª•Âèä‰ºòÂåñÊÄßËÉΩ„ÄÇ Áº∫ÁÇπ Á≠âÂÄô‰ΩøÁî®ÂÖ±‰∫´ËµÑÊ∫êÊó∂ÈÄ†ÊàêÁ®ãÂ∫èÁöÑËøêË°åÈÄüÂ∫¶ÂèòÊÖ¢„ÄÇ ÂØπÁ∫øÁ®ãËøõË°åÁÆ°ÁêÜË¶ÅÊ±ÇÈ¢ùÂ§ñÁöÑcpuÂºÄÈîÄ„ÄÇ ÂèØËÉΩÂá∫Áé∞Á∫øÁ®ãÊ≠ªÈîÅÊÉÖÂÜµ„ÄÇÂç≥ËæÉÈïøÊó∂Èó¥ÁöÑÁ≠âÂæÖÊàñËµÑÊ∫êÁ´û‰∫â‰ª•ÂèäÊ≠ªÈîÅÁ≠âÁóáÁä∂„ÄÇ Âú®java‰∏≠ÂÆàÊä§Á∫øÁ®ãÂíåÊú¨Âú∞Á∫øÁ®ãÂå∫Âà´ java‰∏≠ÁöÑÁ∫øÁ®ãÂàÜ‰∏∫‰∏§ÁßçÔºöÂÆàÊä§Á∫øÁ®ãÔºàDaemonÔºâÂíåÁî®Êà∑Á∫øÁ®ãÔºàUserÔºâ„ÄÇ ‰ªª‰ΩïÁ∫øÁ®ãÈÉΩÂèØ‰ª•ËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÔºåÈÄöËøáÊñπÊ≥ïThread.setDaemon(bool on)ÔºõtrueÂàôÊääËØ•Á∫øÁ®ãËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ãÔºåÂèç‰πãÂàô‰∏∫Áî®Êà∑Á∫øÁ®ã„ÄÇThread.setDaemon()ÂøÖÈ°ªÂú®Thread.start()‰πãÂâçË∞ÉÁî®ÔºåÂê¶ÂàôËøêË°åÊó∂‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇ ‰∏§ËÄÖÁöÑÂå∫Âà´Ôºö ÂîØ‰∏ÄÁöÑÂå∫Âà´ÊòØÂà§Êñ≠ËôöÊãüÊú∫(JVM)‰ΩïÊó∂Á¶ªÂºÄÔºåDaemonÊòØ‰∏∫ÂÖ∂‰ªñÁ∫øÁ®ãÊèê‰æõÊúçÂä°ÔºåÂ¶ÇÊûúÂÖ®ÈÉ®ÁöÑUser ThreadÂ∑≤ÁªèÊí§Á¶ªÔºåDaemon Ê≤°ÊúâÂèØÊúçÂä°ÁöÑÁ∫øÁ®ãÔºåJVMÊí§Á¶ª„ÄÇ‰πüÂèØ‰ª•ÁêÜËß£‰∏∫ÂÆàÊä§Á∫øÁ®ãÊòØJVMËá™Âä®ÂàõÂª∫ÁöÑÁ∫øÁ®ãÔºà‰ΩÜ‰∏ç‰∏ÄÂÆöÔºâÔºåÁî®Êà∑Á∫øÁ®ãÊòØÁ®ãÂ∫èÂàõÂª∫ÁöÑÁ∫øÁ®ãÔºõÊØîÂ¶ÇJVMÁöÑÂûÉÂúæÂõûÊî∂Á∫øÁ®ãÊòØ‰∏Ä‰∏™ÂÆàÊä§Á∫øÁ®ãÔºåÂΩìÊâÄÊúâÁ∫øÁ®ãÂ∑≤ÁªèÊí§Á¶ªÔºå‰∏çÂÜç‰∫ßÁîüÂûÉÂúæÔºåÂÆàÊä§Á∫øÁ®ãËá™ÁÑ∂Â∞±Ê≤°‰∫ãÂèØÂπ≤‰∫ÜÔºåÂΩìÂûÉÂúæÂõûÊî∂Á∫øÁ®ãÊòØJavaËôöÊãüÊú∫‰∏ä‰ªÖÂâ©ÁöÑÁ∫øÁ®ãÊó∂ÔºåJavaËôöÊãüÊú∫‰ºöËá™Âä®Á¶ªÂºÄ„ÄÇ Êâ©Â±ïÔºöThread DumpÊâìÂç∞Âá∫Êù•ÁöÑÁ∫øÁ®ã‰ø°ÊÅØÔºåÂê´ÊúâdaemonÂ≠óÊ†∑ÁöÑÁ∫øÁ®ãÂç≥‰∏∫ÂÆàÊä§ËøõÁ®ãÔºåÂèØËÉΩ‰ºöÊúâÔºöÊúçÂä°ÂÆàÊä§ËøõÁ®ã„ÄÅÁºñËØëÂÆàÊä§ËøõÁ®ã„ÄÅwindows‰∏ãÁöÑÁõëÂê¨Ctrl+breakÁöÑÂÆàÊä§ËøõÁ®ã„ÄÅFinalizerÂÆàÊä§ËøõÁ®ã„ÄÅÂºïÁî®Â§ÑÁêÜÂÆàÊä§ËøõÁ®ã„ÄÅGCÂÆàÊä§ËøõÁ®ã„ÄÇ Á∫øÁ®ã‰∏éËøõÁ®ãÁöÑÂå∫Âà´ ËøõÁ®ãÊòØÊìç‰ΩúÁ≥ªÁªüÂàÜÈÖçËµÑÊ∫êÁöÑÊúÄÂ∞èÂçïÂÖÉÔºåÁ∫øÁ®ãÊòØÊìç‰ΩúÁ≥ªÁªüË∞ÉÂ∫¶ÁöÑÊúÄÂ∞èÂçïÂÖÉ„ÄÇ‰∏Ä‰∏™Á®ãÂ∫èËá≥Â∞ëÊúâ‰∏Ä‰∏™ËøõÁ®ã,‰∏Ä‰∏™ËøõÁ®ãËá≥Â∞ëÊúâ‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ ‰ªÄ‰πàÊòØÂ§öÁ∫øÁ®ã‰∏≠ÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ Â§öÁ∫øÁ®ã‰ºöÂÖ±Âêå‰ΩøÁî®‰∏ÄÁªÑËÆ°ÁÆóÊú∫‰∏äÁöÑCPUÔºåËÄåÁ∫øÁ®ãÊï∞Â§ß‰∫éÁªôÁ®ãÂ∫èÂàÜÈÖçÁöÑCPUÊï∞ÈáèÊó∂Ôºå‰∏∫‰∫ÜËÆ©ÂêÑ‰∏™Á∫øÁ®ãÈÉΩÊúâÊâßË°åÁöÑÊú∫‰ºöÔºåÂ∞±ÈúÄË¶ÅËΩÆËΩ¨‰ΩøÁî®CPU„ÄÇ‰∏çÂêåÁöÑÁ∫øÁ®ãÂàáÊç¢‰ΩøÁî®CPUÂèëÁîüÁöÑÂàáÊç¢Êï∞ÊçÆÁ≠âÂ∞±ÊòØ‰∏ä‰∏ãÊñáÂàáÊç¢„ÄÇ Ê≠ªÈîÅ‰∏éÊ¥ªÈîÅÁöÑÂå∫Âà´ÔºåÊ≠ªÈîÅ‰∏éÈ••È•øÁöÑÂå∫Âà´ **Ê≠ªÈîÅÔºö**ÊòØÊåá‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÁöÑËøõÁ®ãÔºàÊàñÁ∫øÁ®ãÔºâÂú®ÊâßË°åËøáÁ®ã‰∏≠ÔºåÂõ†‰∫âÂ§∫ËµÑÊ∫êËÄåÈÄ†ÊàêÁöÑ‰∏ÄÁßç‰∫íÁõ∏Á≠âÂæÖÁöÑÁé∞Ë±°ÔºåËã•Êó†Â§ñÂäõ‰ΩúÁî®ÔºåÂÆÉ‰ª¨ÈÉΩÂ∞ÜÊó†Ê≥ïÊé®Ëøõ‰∏ãÂéª„ÄÇ ‰∫ßÁîüÊ≠ªÈîÅÁöÑÂøÖË¶ÅÊù°‰ª∂Ôºö ‰∫íÊñ•Êù°‰ª∂ÔºöÊâÄË∞ì‰∫íÊñ•Â∞±ÊòØËøõÁ®ãÂú®Êüê‰∏ÄÊó∂Èó¥ÂÜÖÁã¨Âç†ËµÑÊ∫ê„ÄÇ ËØ∑Ê±Ç‰∏é‰øùÊåÅÊù°‰ª∂Ôºö‰∏Ä‰∏™ËøõÁ®ãÂõ†ËØ∑Ê±ÇËµÑÊ∫êËÄåÈòªÂ°ûÊó∂ÔºåÂØπÂ∑≤Ëé∑ÂæóÁöÑËµÑÊ∫ê‰øùÊåÅ‰∏çÊîæ„ÄÇ ‰∏çÂâ•Â§∫Êù°‰ª∂:ËøõÁ®ãÂ∑≤Ëé∑ÂæóËµÑÊ∫êÔºåÂú®Êú´‰ΩøÁî®ÂÆå‰πãÂâçÔºå‰∏çËÉΩÂº∫Ë°åÂâ•Â§∫„ÄÇ Âæ™ÁéØÁ≠âÂæÖÊù°‰ª∂:Ëã•Âπ≤ËøõÁ®ã‰πãÈó¥ÂΩ¢Êàê‰∏ÄÁßçÂ§¥Â∞æÁõ∏Êé•ÁöÑÂæ™ÁéØÁ≠âÂæÖËµÑÊ∫êÂÖ≥Á≥ª„ÄÇ **Ê¥ªÈîÅÔºö**‰ªªÂä°ÊàñËÄÖÊâßË°åËÄÖÊ≤°ÊúâË¢´ÈòªÂ°ûÔºåÁî±‰∫éÊüê‰∫õÊù°‰ª∂Ê≤°ÊúâÊª°Ë∂≥ÔºåÂØºËá¥‰∏ÄÁõ¥ÈáçÂ§çÂ∞ùËØïÔºåÂ§±Ë¥•ÔºåÂ∞ùËØïÔºåÂ§±Ë¥•„ÄÇ Ê¥ªÈîÅÂíåÊ≠ªÈîÅÁöÑÂå∫Âà´Âú®‰∫éÔºåÂ§Ñ‰∫éÊ¥ªÈîÅÁöÑÂÆû‰ΩìÊòØÂú®‰∏çÊñ≠ÁöÑÊîπÂèòÁä∂ÊÄÅÔºåÊâÄË∞ìÁöÑ‚ÄúÊ¥ª‚ÄùÔºå ËÄåÂ§Ñ‰∫éÊ≠ªÈîÅÁöÑÂÆû‰ΩìË°®Áé∞‰∏∫Á≠âÂæÖÔºõÊ¥ªÈîÅÊúâÂèØËÉΩËá™Ë°åËß£ÂºÄÔºåÊ≠ªÈîÅÂàô‰∏çËÉΩ„ÄÇ **È••È•øÔºö**‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Á∫øÁ®ãÂõ†‰∏∫ÁßçÁßçÂéüÂõ†Êó†Ê≥ïËé∑ÂæóÊâÄÈúÄË¶ÅÁöÑËµÑÊ∫êÔºåÂØºËá¥‰∏ÄÁõ¥Êó†Ê≥ïÊâßË°åÁöÑÁä∂ÊÄÅ„ÄÇ Java‰∏≠ÂØºËá¥È••È•øÁöÑÂéüÂõ†Ôºö È´ò‰ºòÂÖàÁ∫ßÁ∫øÁ®ãÂêûÂô¨ÊâÄÊúâÁöÑ‰Ωé‰ºòÂÖàÁ∫ßÁ∫øÁ®ãÁöÑCPUÊó∂Èó¥„ÄÇ Á∫øÁ®ãË¢´Ê∞∏‰πÖÂ†µÂ°ûÂú®‰∏Ä‰∏™Á≠âÂæÖËøõÂÖ•ÂêåÊ≠•ÂùóÁöÑÁä∂ÊÄÅÔºåÂõ†‰∏∫ÂÖ∂‰ªñÁ∫øÁ®ãÊÄªÊòØËÉΩÂú®ÂÆÉ‰πãÂâçÊåÅÁª≠Âú∞ÂØπËØ•ÂêåÊ≠•ÂùóËøõË°åËÆøÈóÆ„ÄÇ Á∫øÁ®ãÂú®Á≠âÂæÖ‰∏Ä‰∏™Êú¨Ë∫´‰πüÂ§Ñ‰∫éÊ∞∏‰πÖÁ≠âÂæÖÂÆåÊàêÁöÑÂØπË±°(ÊØîÂ¶ÇË∞ÉÁî®Ëøô‰∏™ÂØπË±°ÁöÑwaitÊñπÊ≥ï)ÔºåÂõ†‰∏∫ÂÖ∂‰ªñÁ∫øÁ®ãÊÄªÊòØË¢´ÊåÅÁª≠Âú∞Ëé∑ÂæóÂî§ÈÜí„ÄÇ start()ÊñπÊ≥ïÂíårun()ÊñπÊ≥ïÁöÑÂå∫Âà´ start()ÊñπÊ≥ïÔºö Áî®startÊñπÊ≥ïÊù•ÂêØÂä®Á∫øÁ®ãÔºåÁúüÊ≠£ÂÆûÁé∞‰∫ÜÂ§öÁ∫øÁ®ãËøêË°åÔºåËøôÊó∂Êó†ÈúÄÁ≠âÂæÖrunÊñπÊ≥ï‰Ωì‰ª£Á†ÅÊâßË°åÂÆåÊØïËÄåÁõ¥Êé•ÁªßÁª≠ÊâßË°å‰∏ãÈù¢ÁöÑ‰ª£Á†Å„ÄÇ ÈÄöËøáË∞ÉÁî®ThreadÁ±ªÁöÑstart()ÊñπÊ≥ïÊù•ÂêØÂä®‰∏Ä‰∏™Á∫øÁ®ãÔºåËøôÊó∂Ê≠§Á∫øÁ®ãÂ§Ñ‰∫éÂ∞±Áª™ÔºàÂèØËøêË°åÔºâÁä∂ÊÄÅÔºåÂπ∂Ê≤°ÊúâËøêË°åÔºå‰∏ÄÊó¶ÂæóÂà∞CPUÊó∂Èó¥ÁâáÔºåÂ∞±ÂºÄÂßãÊâßË°årun()ÊñπÊ≥ï„ÄÇ run()ÊñπÊ≥ïÔºö run()ÊñπÊ≥ïÂè™ÊòØÁ±ªÁöÑ‰∏Ä‰∏™ÊôÆÈÄöÊñπÊ≥ïËÄåÂ∑≤ÔºåÂ¶ÇÊûúÁõ¥Êé•Ë∞ÉÁî®RunÊñπÊ≥ïÔºåÁ®ãÂ∫è‰∏≠‰æùÁÑ∂Âè™Êúâ‰∏ªÁ∫øÁ®ãËøô‰∏Ä‰∏™Á∫øÁ®ãÔºåÂÖ∂Á®ãÂ∫èÊâßË°åË∑ØÂæÑËøòÊòØÂè™Êúâ‰∏ÄÊù°„ÄÇ ÊÄªÁªìÔºö Ë∞ÉÁî®startÊñπÊ≥ïÊñπÂèØÂêØÂä®Á∫øÁ®ã„ÄÇ runÊñπÊ≥ïÂè™ÊòØthreadÁöÑ‰∏Ä‰∏™ÊôÆÈÄöÊñπÊ≥ïË∞ÉÁî®ÔºåËøòÊòØÂú®‰∏ªÁ∫øÁ®ãÈáåÊâßË°å„ÄÇ ÊääÈúÄË¶ÅÂπ∂Ë°åÂ§ÑÁêÜÁöÑ‰ª£Á†ÅÊîæÂú®run()ÊñπÊ≥ï‰∏≠Ôºåstart()ÊñπÊ≥ïÂêØÂä®Á∫øÁ®ãÂ∞ÜËá™Âä®Ë∞ÉÁî®run()ÊñπÊ≥ïÔºåËøôÊòØÁî±jvmÁöÑÂÜÖÂ≠òÊú∫Âà∂ËßÑÂÆöÁöÑ„ÄÇ run()ÊñπÊ≥ïÂøÖÈ°ªÊòØpublicËÆøÈóÆÊùÉÈôêÔºåËøîÂõûÂÄºÁ±ªÂûã‰∏∫void„ÄÇ RunnableÊé•Âè£ÂíåCallableÊé•Âè£ÁöÑÁõ∏ÂêåÁÇπÂíå‰∏çÂêåÁÇπ Áõ∏ÂêåÁÇπÔºö CallableÂíåRunnableÈÉΩÊòØÊé•Âè£Ôºõ CallableÂíåRunnableÈÉΩ‰∏ÄÁßëÂ∫îÁî®‰∫éExecutorsÔºõ ‰∏çÂêåÁÇπÔºö CallableË¶ÅÂÆûÁé∞call()ÊñπÊ≥ïÔºåRunnableË¶ÅÂÆûÁé∞run()ÊñπÊ≥ïÔºõ call()ÊñπÊ≥ïÂèØ‰ª•ÊúâËøîÂõûÂÄºÔºårun()ÊñπÊ≥ï‰∏çËÉΩÊúâËøîÂõûÂÄºÔºõ call(0ÊñπÊ≥ïÂèØ‰ª•ÊäõÂá∫Checked ExceptionÔºårun()ÊñπÊ≥ï‰∏çÂèØ‰ª•Ôºõ RunnableÊé•Âè£Âú®Jdk1.1‰∏≠Â∞±Êúâ‰∫ÜÔºåCallableÂú®JDK1.5ÊâçÊúâÔºõ voliateÂÖ≥ÈîÆÂ≠óÁöÑ‰ΩúÁî® Â§öÁ∫øÁ®ã‰ΩøÁî®volatileÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑÂèòÈáèÔºå‰øùËØÅ‰∫ÜÂÖ∂Âú®Â§öÁ∫øÁ®ã‰πãÈó¥ÁöÑÂèØËßÅÊÄßÔºåÂç≥ÊØèÊ¨°ËØªÂèñÂà∞volatileÂèòÈáèÔºå‰∏ÄÂÆöÊòØÊúÄÊñ∞ÁöÑÊï∞ÊçÆ„ÄÇ Java‰ª£Á†ÅÊâßË°å‰∏≠Ôºå‰∏∫‰∫ÜËé∑ÂèñÊõ¥Â•ΩÁöÑÊÄßËÉΩJVMÂèØËÉΩ‰ºöÂØπÊåá‰ª§ËøõË°åÈáçÊéíÂ∫èÔºåÂ§öÁ∫øÁ®ã‰∏ãÂèØËÉΩ‰ºöÂá∫Áé∞‰∏Ä‰∫õÊÑèÊÉ≥‰∏çÂà∞ÁöÑÈóÆÈ¢ò„ÄÇ‰ΩøÁî®volatileÂàô‰ºöÂØπÁ¶ÅÊ≠¢ËØ≠‰πâÈáçÊéíÂ∫èÔºåÂΩìÁÑ∂Ëøô‰πü‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÈôç‰Ωé‰∫Ü‰ª£Á†ÅÊâßË°åÊïàÁéá„ÄÇ CyclicBarrierÂíåCountDownLatchÁöÑÂå∫Âà´ CountDownLatch CyclicBarrier ÂáèËÆ°Êï∞ÊñπÂºè Âä†ËÆ°Êï∞ÊñπÂºè ËÆ°Êï∞‰∏∫0Êó∂Âî§ÈÜíÊâÄÊúâÁ≠âÂæÖÁöÑÁ∫øÁ®ã ËÆ°Êï∞ËææÂà∞ÊåáÂÆöÂÄºÊó∂Âî§ÈÜíÊâÄÊúâÁ≠âÂæÖÁöÑÁ∫øÁ®ã ËÆ°Êï∞‰∏∫0Êó†Ê≥ïÈáçÁΩÆ ËÆ°Êï∞ËææÂà∞ÊåáÂÆöÂÄºÊó∂ÔºåËÆ°Êï∞ÁΩÆ‰∏∫0ÈáçÊñ∞ÂºÄÂßã Ë∞ÉÁî®countDown()ÊñπÊ≥ïËÆ°Êï∞Âáè‰∏ÄÔºåË∞ÉÁî®await()ÊñπÊ≥ïÂè™ËøõË°åÈòªÂ°ûÔºåÂØπËÆ°Êï∞Ê≤°ÊúâÂΩ±Âìç Ë∞ÉÁî®await()ÊñπÊ≥ïËÆ°Êï∞Âä†1ÔºåËã•Âä†1ÂêéÁöÑÂÄº‰∏çÁ≠â‰∫éÊûÑÈÄ†ÊñπÊ≥ïÁöÑÂÄºÔºåÂàôÁ∫øÁ®ãÈòªÂ°û ‰∏çËÉΩÈáçÂ§çÂà©Áî® ÂèØÈáçÂ§ç‰ΩøÁî® voliateÂíåsynchronizedÂØπÊØî volatileÊú¨Ë¥®ÊòØÂú®ÂëäËØâjvmÂΩìÂâçÂèòÈáèÂú®ÂØÑÂ≠òÂô®‰∏≠ÁöÑÂÄºÊòØ‰∏çÁ°ÆÂÆöÁöÑ,ÈúÄË¶Å‰ªé‰∏ªÂ≠ò‰∏≠ËØªÂèñ,synchronizedÂàôÊòØÈîÅÂÆöÂΩìÂâçÂèòÈáè,Âè™ÊúâÂΩìÂâçÁ∫øÁ®ãÂèØ‰ª•ËÆøÈóÆËØ•ÂèòÈáè,ÂÖ∂‰ªñÁ∫øÁ®ãË¢´ÈòªÂ°û‰Ωè„ÄÇ volatile‰ªÖËÉΩ‰ΩøÁî®Âú®ÂèòÈáèÁ∫ßÂà´,synchronizedÂàôÂèØ‰ª•‰ΩøÁî®Âú®ÂèòÈáè,ÊñπÊ≥ï‰ª•ÂèäÁ±ªÁ∫ßÂà´„ÄÇ volatile‰ªÖËÉΩÂÆûÁé∞ÂèòÈáèÁöÑ‰øÆÊîπÂèØËßÅÊÄß,ËÄåsynchronizedÂàôÂèØ‰ª•‰øùËØÅÂèòÈáèÁöÑ‰øÆÊîπÂèØËßÅÊÄßÂíåÂéüÂ≠êÊÄß„ÄÇ volatile‰∏ç‰ºöÈÄ†ÊàêÁ∫øÁ®ãÁöÑÈòªÂ°û,ËÄåsynchronizedÂèØËÉΩ‰ºöÈÄ†ÊàêÁ∫øÁ®ãÁöÑÈòªÂ°û„ÄÇ ÊÄé‰πàÂî§ÈÜí‰∏Ä‰∏™ÈòªÂ°ûÁöÑÁ∫øÁ®ã Â¶ÇÊûúÁ∫øÁ®ãÊòØÂõ†‰∏∫Ë∞ÉÁî®‰∫Üwait()„ÄÅsleep()ÊàñËÄÖjoin()ÊñπÊ≥ïËÄåÂØºËá¥ÁöÑÈòªÂ°ûÔºåÂèØ‰ª•‰∏≠Êñ≠Á∫øÁ®ãÔºåÂπ∂‰∏îÈÄöËøáÊäõÂá∫InterruptedExceptionÊù•Âî§ÈÜíÂÆÉÔºõ Â¶ÇÊûúÁ∫øÁ®ãÈÅáÂà∞‰∫ÜIOÈòªÂ°ûÔºåÊó†ËÉΩ‰∏∫ÂäõÔºåÂõ†‰∏∫IOÊòØÊìç‰ΩúÁ≥ªÁªüÂÆûÁé∞ÁöÑÔºåJava‰ª£Á†ÅÂπ∂Ê≤°ÊúâÂäûÊ≥ïÁõ¥Êé•Êé•Ëß¶Âà∞Êìç‰ΩúÁ≥ªÁªü„ÄÇ sleepÊñπÊ≥ïÂíåwaitÊñπÊ≥ïÁöÑÁõ∏ÂêåÁÇπÂíå‰∏çÂêåÁÇπ Áõ∏ÂêåÁÇπÔºö ‰∫åËÄÖÈÉΩÂèØ‰ª•ËÆ©Á∫øÁ®ãÂ§Ñ‰∫éÈòªÂ°ûÔºõ ‰∏çÂêåÁÇπÔºö È¶ñÂÖàsleepÊñπÊ≥ïÊòØThreadÁ±ª‰∏≠ÂÆö‰πâÁöÑÊñπÊ≥ïÔºåËÄåwaitÊñπÊ≥ïÊòØObjectÁ±ª‰∏≠ÂÆö‰πâÁöÑÊñπÊ≥ï„ÄÇ sleepÊñπÊ≥ïÂøÖÈ°ª‰∫∫‰∏∫Âú∞‰∏∫ÂÖ∂ÊåáÂÆö‰ºëÁú†Êó∂Èó¥„ÄÇwaitÊñπÊ≥ïÊó¢ÂèØ‰ª•ÊåáÂÆöÊó∂Èó¥Ôºå‰πüÂèØ‰ª•‰∏çÊåáÂÆöÊó∂Èó¥„ÄÇ sleepÊñπÊ≥ïÊó∂Èó¥Âà∞‰∫ÜÔºåÁ∫øÁ®ãÂ§Ñ‰∫é‰∏¥Êó∂ÈòªÂ°ûÁä∂ÊÄÅÊàñËÄÖËøêË°åÁä∂ÊÄÅ„ÄÇwaitÊñπÊ≥ïÂ¶ÇÊûúÊ≤°ÊúâË¢´ËÆæÁΩÆÊó∂Èó¥ÔºåÂ∞±ÂøÖÈ°ªË¶ÅÈÄöËøánotifyÊàñËÄÖnotifyAllÊù•Âî§ÈÜí„ÄÇ sleepÊñπÊ≥ï‰∏ç‰∏ÄÂÆöÈùûË¶ÅÂÆö‰πâÂú®ÂêåÊ≠•‰∏≠„ÄÇwaitÊñπÊ≥ïÂøÖÈ°ªÂÆö‰πâÂú®ÂêåÊ≠•‰∏≠„ÄÇ ÂΩì‰∫åËÄÖÈÉΩÂÆö‰πâÂú®ÂêåÊ≠•‰∏≠Êó∂ÔºåÁ∫øÁ®ãÊâßË°åÂà∞sleepÔºå‰∏ç‰ºöÈáäÊîæÈîÅ„ÄÇÁ∫øÁ®ãÊâßË°åÂà∞waitÔºå‰ºöÈáäÊîæÈîÅ„ÄÇ Áîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÊ®°ÂûãÁöÑ‰ΩúÁî® ÈÄöËøáÂπ≥Ë°°Áîü‰∫ßËÄÖÁöÑÁîü‰∫ßËÉΩÂäõÂíåÊ∂àË¥πËÄÖÁöÑÊ∂àË¥πËÉΩÂäõÊù•ÊèêÂçáÊï¥‰∏™Á≥ªÁªüÁöÑËøêË°åÊïàÁéáÔºåËøôÊòØÁîü‰∫ßËÄÖÊ∂àË¥πËÄÖÊ®°ÂûãÊúÄÈáçË¶ÅÁöÑ‰ΩúÁî®„ÄÇ Ëß£ËÄ¶ÔºåËøôÊòØÁîü‰∫ßËÄÖÊ∂àË¥πËÄÖÊ®°ÂûãÈôÑÂ∏¶ÁöÑ‰ΩúÁî®ÔºåËß£ËÄ¶ÊÑèÂë≥ÁùÄÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖ‰πãÈó¥ÁöÑËÅîÁ≥ªÂ∞ëÔºåËÅîÁ≥ªË∂äÂ∞ëË∂äÂèØ‰ª•Áã¨Ëá™ÂèëÂ±ïËÄå‰∏çÈúÄË¶ÅÊî∂Âà∞Áõ∏‰∫íÁöÑÂà∂Á∫¶„ÄÇ Executor.submit()ÂíåExecutor.execute()ÁöÑÂå∫Âà´ ÂâçËÄÖËøîÂõû‰∏Ä‰∏™ FutureÂØπË±°ÔºåÂèØ‰ª•Áî®‰∫éÊâæÂà∞Â∑•‰ΩúÁ∫øÁ®ãÁöÑËøêË°åÁªìÊûú„ÄÇ Âú®ÂºÇÂ∏∏Â§ÑÁêÜ‰∏ä‰πü‰∏ç‰∏ÄÊ†∑ÔºåÂú®‰ªªÂä°ÊäõÂá∫ÂºÇÂ∏∏Êó∂ÔºåÂ¶ÇÊûúÊòØÈÄöËøá execute()Êèê‰∫§ÁöÑÔºå‰ºöÊäõÂá∫Êó†ÈúÄÊçïËé∑ÁöÑÂºÇÂ∏∏ÔºàÂ¶ÇÊûú‰Ω†Ê≤°ÊúâÁâπÊÆäÂ§ÑÁêÜÔºå‰ºöÊâìÂç∞ÈîôËØØÊ†àÈÅìSystem.errÔºâ„ÄÇÂ¶ÇÊûúÊòØÈÄöËøá submit()Êèê‰∫§ÁöÑÔºå‰ªª‰ΩïÂºÇÂ∏∏ÔºåÊó†ËÆ∫ÊòØ‰∏çÊòØchecked exceptionÔºåÈÉΩÊòØËøîÂõûÁöÑ‰∏ÄÈÉ®ÂàÜÔºåFuture.getÂ∞ÜÊääÂºÇÂ∏∏ÂåÖÂú® ExecutionExeption‰∏≠ÔºåÂêë‰∏äÂ±ÇÊäõÂá∫„ÄÇ ThreadLocalÁöÑ‰ΩúÁî® ThreadLocalÁî®Êù•Ëß£ÂÜ≥Â§öÁ∫øÁ®ãÁ®ãÂ∫èÁöÑÂπ∂ÂèëÈóÆÈ¢ò„ÄÇ ThreadLocalÂπ∂‰∏çÊòØ‰∏Ä‰∏™Thread,ËÄåÊòØThreadÁöÑÂ±ÄÈÉ®ÂèòÈáè,ÂΩì‰ΩøÁî®ThreadLocalÁª¥Êä§ÂèòÈáèÊó∂,ThreadLocal‰∏∫ÊØè‰∏™‰ΩøÁî®ËØ•ÂèòÈáèÁöÑÁ∫øÁ®ãÊèê‰æõÁã¨Á´ãÁöÑÂèòÈáèÂâØÊú¨,ÊâÄ‰ª•ÊØè‰∏™Á∫øÁ®ãÈÉΩÂèØ‰ª•Áã¨Á´ãÂú∞ÊîπÂèòËá™Â∑±ÁöÑÂâØÊú¨,ËÄå‰∏ç‰ºöÂΩ±ÂìçÂÖ∂ÂÆÉÁ∫øÁ®ãÊâÄÂØπÂ∫îÁöÑÂâØÊú¨„ÄÇ ‰ªéÁ∫øÁ®ãÁöÑËßíÂ∫¶ÁúãÔºåÁõÆÊ†áÂèòÈáèÂ∞±Ë±°ÊòØÁ∫øÁ®ãÁöÑÊú¨Âú∞ÂèòÈáèÔºåËøô‰πüÊòØÁ±ªÂêç‰∏≠‚ÄúLocal‚ÄùÊâÄË¶ÅË°®ËææÁöÑÊÑèÊÄù„ÄÇ Á∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáèÂπ∂‰∏çÊòØJavaÁöÑÊñ∞ÂèëÊòé,JavaÊ≤°ÊúâÊèê‰æõÂú®ËØ≠Ë®ÄÁ∫ßÊîØÊåÅ(ËØ≠Ê≥ï‰∏ä),ËÄåÊòØÂèòÁõ∏Âú∞ÈÄöËøáThreadLocalÁöÑÁ±ªÊèê‰æõÊîØÊåÅ„ÄÇ waitÊñπÊ≥ïÂíånotify/notifyAllÊñπÊ≥ïÂú®ÊîæÂºÉÂØπË±°ÁõëËßÜÂô®Êó∂ÁöÑÂå∫Âà´ wait()ÊñπÊ≥ïÁ´ãÂç≥ÈáäÊîæÂØπË±°ÁõëËßÜÂô®Ôºõ notify()/notifyAll()ÊñπÊ≥ïÂàô‰ºöÁ≠âÂæÖÁ∫øÁ®ãÂâ©‰Ωô‰ª£Á†ÅÊâßË°åÂÆåÊØïÊâç‰ºöÊîæÂºÉÂØπË±°ÁõëËßÜÂô®„ÄÇ LockÂíåsynchronizedÂØπÊØî LockÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåËÄåsynchronizedÊòØJava‰∏≠ÁöÑÂÖ≥ÈîÆÂ≠óÔºåsynchronizedÊòØÂÜÖÁΩÆÁöÑËØ≠Ë®ÄÂÆûÁé∞Ôºõ synchronizedÂú®ÂèëÁîüÂºÇÂ∏∏Êó∂Ôºå‰ºöËá™Âä®ÈáäÊîæÁ∫øÁ®ãÂç†ÊúâÁöÑÈîÅÔºåÂõ†Ê≠§‰∏ç‰ºöÂØºËá¥Ê≠ªÈîÅÁé∞Ë±°ÂèëÁîüÔºõËÄåLockÂú®ÂèëÁîüÂºÇÂ∏∏Êó∂ÔºåÂ¶ÇÊûúÊ≤°Êúâ‰∏ªÂä®ÈÄöËøáunLock()ÂéªÈáäÊîæÈîÅÔºåÂàôÂæàÂèØËÉΩÈÄ†ÊàêÊ≠ªÈîÅÁé∞Ë±°ÔºåÂõ†Ê≠§‰ΩøÁî®LockÊó∂ÈúÄË¶ÅÂú®finallyÂùó‰∏≠ÈáäÊîæÈîÅÔºõ LockÂèØ‰ª•ËÆ©Á≠âÂæÖÈîÅÁöÑÁ∫øÁ®ãÂìçÂ∫î‰∏≠Êñ≠ÔºåËÄåsynchronizedÂç¥‰∏çË°åÔºå‰ΩøÁî®synchronizedÊó∂ÔºåÁ≠âÂæÖÁöÑÁ∫øÁ®ã‰ºö‰∏ÄÁõ¥Á≠âÂæÖ‰∏ãÂéªÔºå‰∏çËÉΩÂ§üÂìçÂ∫î‰∏≠Êñ≠Ôºõ ÈÄöËøáLockÂèØ‰ª•Áü•ÈÅìÊúâÊ≤°ÊúâÊàêÂäüËé∑ÂèñÈîÅÔºåËÄåsynchronizedÂç¥Êó†Ê≥ïÂäûÂà∞„ÄÇ LockÂèØ‰ª•ÊèêÈ´òÂ§ö‰∏™Á∫øÁ®ãËøõË°åËØªÊìç‰ΩúÁöÑÊïàÁéá„ÄÇ Âú®JDK1.5‰∏≠ÔºåsynchronizedÊòØÊÄßËÉΩ‰ΩéÊïàÁöÑ„ÄÇÂõ†‰∏∫ËøôÊòØ‰∏Ä‰∏™ÈáçÈáèÁ∫ßÊìç‰ΩúÔºåÂÆÉÂØπÊÄßËÉΩÊúÄÂ§ßÁöÑÂΩ±ÂìçÊòØÈòªÂ°ûÂºèÁöÑÂÆûÁé∞ÔºåÊåÇËµ∑Á∫øÁ®ãÂíåÊÅ¢Â§çÁ∫øÁ®ãÁöÑÊìç‰ΩúÈÉΩÈúÄË¶ÅËΩ¨ÂÖ•ÂÜÖÊ†∏ÊÄÅ‰∏≠ÂÆåÊàêÔºåËøô‰∫õÊìç‰ΩúÁªôÁ≥ªÁªüÁöÑÂπ∂ÂèëÊÄßÂ∏¶Êù•‰∫ÜÂæàÂ§ßÁöÑÂéãÂäõ„ÄÇÁõ∏ÊØî‰πã‰∏ã‰ΩøÁî®JavaÊèê‰æõÁöÑLockÂØπË±°ÔºåÊÄßËÉΩÊõ¥È´ò‰∏Ä‰∫õ„ÄÇ ‰ΩÜÊòØÔºåJDK1.6ÔºåÂèëÁîü‰∫ÜÂèòÂåñÔºåÂØπsynchronizeÂä†ÂÖ•‰∫ÜÂæàÂ§ö‰ºòÂåñÊé™ÊñΩÔºåÊúâËá™ÈÄÇÂ∫îËá™ÊóãÔºåÈîÅÊ∂àÈô§ÔºåÈîÅÁ≤óÂåñÔºåËΩªÈáèÁ∫ßÈîÅÔºåÂÅèÂêëÈîÅÁ≠âÁ≠â„ÄÇÂØºËá¥Âú®JDK1.6‰∏äsynchronizeÁöÑÊÄßËÉΩÂπ∂‰∏çÊØîLockÂ∑Æ„ÄÇÂõ†Ê≠§„ÄÇÊèêÂÄ°‰ºòÂÖàËÄÉËôë‰ΩøÁî®synchronizedÊù•ËøõË°åÂêåÊ≠•„ÄÇ ReadWriteLockÊòØ‰ªÄ‰πà ReadWriteLockÊòØ‰∏Ä‰∏™ËØªÂÜôÈîÅÊé•Âè£ÔºåReentrantReadWriteLockÊòØReadWriteLockÊé•Âè£ÁöÑ‰∏Ä‰∏™ÂÖ∑‰ΩìÂÆûÁé∞ÔºåÂÆûÁé∞‰∫ÜËØªÂÜôÁöÑÂàÜÁ¶ªÔºåËØªÈîÅÊòØÂÖ±‰∫´ÁöÑÔºåÂÜôÈîÅÊòØÁã¨Âç†ÁöÑÔºåËØªÂíåËØª‰πãÈó¥‰∏ç‰ºö‰∫íÊñ•ÔºåËØªÂíåÂÜô„ÄÅÂÜôÂíåËØª„ÄÅÂÜôÂíåÂÜô‰πãÈó¥Êâç‰ºö‰∫íÊñ•ÔºåÊèêÂçá‰∫ÜËØªÂÜôÁöÑÊÄßËÉΩ„ÄÇ FutureTaskÊòØ‰ªÄ‰πà FutureTaskË°®Á§∫‰∏Ä‰∏™ÂºÇÊ≠•ËøêÁÆóÁöÑ‰ªªÂä°„ÄÇFutureTaskÈáåÈù¢ÂèØ‰ª•‰º†ÂÖ•‰∏Ä‰∏™CallableÁöÑÂÖ∑‰ΩìÂÆûÁé∞Á±ªÔºåÂèØ‰ª•ÂØπËøô‰∏™ÂºÇÊ≠•ËøêÁÆóÁöÑ‰ªªÂä°ÁöÑÁªìÊûúËøõË°åÁ≠âÂæÖËé∑Âèñ„ÄÅÂà§Êñ≠ÊòØÂê¶Â∑≤ÁªèÂÆåÊàê„ÄÅÂèñÊ∂à‰ªªÂä°Á≠âÊìç‰Ωú„ÄÇÁî±‰∫éFutureTask‰πüÊòØRunnableÊé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºåÊâÄ‰ª•FutureTask‰πüÂèØ‰ª•ÊîæÂÖ•Á∫øÁ®ãÊ±†‰∏≠„ÄÇ Java‰∏≠Áî®Âà∞ÁöÑÁ∫øÁ®ãË∞ÉÂ∫¶ÁÆóÊ≥ï Êä¢Âç†Âºè„ÄÇ‰∏Ä‰∏™Á∫øÁ®ãÁî®ÂÆåCPU‰πãÂêéÔºåÊìç‰ΩúÁ≥ªÁªü‰ºöÊ†πÊçÆÁ∫øÁ®ã‰ºòÂÖàÁ∫ß„ÄÅÁ∫øÁ®ãÈ••È•øÊÉÖÂÜµÁ≠âÊï∞ÊçÆÁÆóÂá∫‰∏Ä‰∏™ÊÄªÁöÑ‰ºòÂÖàÁ∫ßÂπ∂ÂàÜÈÖç‰∏ã‰∏Ä‰∏™Êó∂Èó¥ÁâáÁªôÊüê‰∏™Á∫øÁ®ãÊâßË°å„ÄÇ ‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅ ‰πêËßÇÈîÅÔºöÂØπ‰∫éÂπ∂ÂèëÈó¥Êìç‰Ωú‰∫ßÁîüÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÊåÅ‰πêËßÇÁä∂ÊÄÅÔºå‰πêËßÇÈîÅËÆ§‰∏∫Á´û‰∫â‰∏çÊÄªÊòØ‰ºöÂèëÁîüÔºåÂõ†Ê≠§ÂÆÉ‰∏çÈúÄË¶ÅÊåÅÊúâÈîÅÔºåÂ∞ÜÊØîËæÉ-ËÆæÁΩÆËøô‰∏§‰∏™Âä®‰Ωú‰Ωú‰∏∫‰∏Ä‰∏™ÂéüÂ≠êÊìç‰ΩúÂ∞ùËØïÂéª‰øÆÊîπÂÜÖÂ≠ò‰∏≠ÁöÑÂèòÈáèÔºåÂ¶ÇÊûúÂ§±Ë¥•ÂàôË°®Á§∫ÂèëÁîüÂÜ≤Á™ÅÔºåÈÇ£‰πàÂ∞±Â∫îËØ•ÊúâÁõ∏Â∫îÁöÑÈáçËØïÈÄªËæë„ÄÇ ÊÇ≤ËßÇÈîÅÔºöÂØπ‰∫éÂπ∂ÂèëÈó¥Êìç‰Ωú‰∫ßÁîüÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÊåÅÊÇ≤ËßÇÁä∂ÊÄÅÔºåÊÇ≤ËßÇÈîÅËÆ§‰∏∫Á´û‰∫âÊÄªÊòØ‰ºöÂèëÁîüÔºåÂõ†Ê≠§ÊØèÊ¨°ÂØπÊüêËµÑÊ∫êËøõË°åÊìç‰ΩúÊó∂ÔºåÈÉΩ‰ºöÊåÅÊúâ‰∏Ä‰∏™Áã¨Âç†ÁöÑÈîÅÔºåÂ∞±ÂÉèsynchronizedÔºåÁõ¥Êé•ÂØπÊìç‰ΩúËµÑÊ∫ê‰∏ä‰∫ÜÈîÅ„ÄÇ ÁºñÂÜô‰∏Ä‰∏™Ê≠ªÈîÅÁ®ãÂ∫è Ê≠ªÈîÅÁé∞Ë±°ÊèèËø∞Ôºö Á∫øÁ®ãAÂíåÁ∫øÁ®ãBÁõ∏‰∫íÁ≠âÂæÖÂØπÊñπÊåÅÊúâÁöÑÈîÅÂØºËá¥Á®ãÂ∫èÊó†ÈôêÊ≠ªÂæ™ÁéØ‰∏ãÂéª„ÄÇ Ê≠ªÈîÅÁöÑÂÆûÁé∞Ê≠•È™§Ôºö ‰∏§‰∏™Á∫øÁ®ãÈáåÈù¢ÂàÜÂà´ÊåÅÊúâ‰∏§‰∏™ObjectÂØπË±°Ôºölock1Âíålock2„ÄÇËøô‰∏§‰∏™lock‰Ωú‰∏∫ÂêåÊ≠•‰ª£Á†ÅÂùóÁöÑÈîÅÔºõ Á∫øÁ®ã1ÁöÑrun()ÊñπÊ≥ï‰∏≠ÂêåÊ≠•‰ª£Á†ÅÂùóÂÖàËé∑Âèñlock1ÁöÑÂØπË±°ÈîÅÔºåThread.sleep(xxx)ÔºåÊó∂Èó¥‰∏çÈúÄË¶ÅÂ§™Â§öÔºå100ÊØ´ÁßíÂ∑Æ‰∏çÂ§ö‰∫ÜÔºåÁÑ∂ÂêéÊé•ÁùÄËé∑Âèñlock2ÁöÑÂØπË±°ÈîÅ„ÄÇËøô‰πàÂÅö‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢Á∫øÁ®ã1ÂêØÂä®‰∏Ä‰∏ãÂ≠êÂ∞±ËøûÁª≠Ëé∑Âæó‰∫Ülock1Âíålock2‰∏§‰∏™ÂØπË±°ÁöÑÂØπË±°ÈîÅ; Á∫øÁ®ã2ÁöÑrun)(ÊñπÊ≥ï‰∏≠ÂêåÊ≠•‰ª£Á†ÅÂùóÂÖàËé∑Âèñlock2ÁöÑÂØπË±°ÈîÅÔºåÊé•ÁùÄËé∑Âèñlock1ÁöÑÂØπË±°ÈîÅÔºåÂΩìÁÑ∂ËøôÊó∂lock1ÁöÑÂØπË±°ÈîÅÂ∑≤ÁªèË¢´Á∫øÁ®ã1ÈîÅÊåÅÊúâÔºåÁ∫øÁ®ã2ËÇØÂÆöÊòØË¶ÅÁ≠âÂæÖÁ∫øÁ®ã1ÈáäÊîælock1ÁöÑÂØπË±°ÈîÅÁöÑ ËøôÊ†∑ÔºåÁ∫øÁ®ã1‚Ä≥Áù°Ëßâ‚ÄùÁù°ÂÆåÔºåÁ∫øÁ®ã2Â∑≤ÁªèËé∑Âèñ‰∫Ülock2ÁöÑÂØπË±°ÈîÅ‰∫ÜÔºåÁ∫øÁ®ã1Ê≠§Êó∂Â∞ùËØïËé∑Âèñlock2ÁöÑÂØπË±°ÈîÅÔºå‰æøË¢´ÈòªÂ°ûÔºåÊ≠§Êó∂‰∏Ä‰∏™Ê≠ªÈîÅÂ∞±ÂΩ¢Êàê‰∫Ü„ÄÇ ‰ª£Á†ÅÂÆûÁé∞Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152public class DeadLock &#123; public void run() &#123; TestDeadLock tl = new TestDeadLock(); new Thread(tl, "Á∫øÁ®ãA").start(); new Thread(tl, "Á∫øÁ®ãB").start(); &#125; class TestDeadLock implements Runnable &#123; private Object objA = new Object(); private Object objB = new Object(); private boolean flag = true; @Override public void run() &#123; if (flag) &#123; flag = false; synchronized (objA) &#123; System.out.println(Thread.currentThread().getName() + "ÈîÅ‰ΩèËµÑÊ∫êAÔºåÁ≠âÂæÖËµÑÊ∫êB"); try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; synchronized (objB) &#123; System.out.println(Thread.currentThread().getName() + "Ëé∑ÂæóËµÑÊ∫êB"); &#125; &#125; &#125; else &#123; flag = true; synchronized (objB) &#123; System.out.println(Thread.currentThread().getName() + "ÈîÅ‰ΩèËµÑÊ∫êBÔºåÁ≠âÂæÖËµÑÊ∫êA"); try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; synchronized (objA) &#123; System.out.println(Thread.currentThread().getName() + "Ëé∑ÂæóËµÑÊ∫êA"); &#125; &#125; &#125; &#125; &#125; public static void main(String[] args) &#123; new DeadLock().run(); &#125;&#125;ËæìÂá∫ÁªìÊûúÊòØÔºöÁ∫øÁ®ãAÈîÅ‰ΩèËµÑÊ∫êAÔºåÁ≠âÂæÖËµÑÊ∫êBÁ∫øÁ®ãBÈîÅ‰ΩèËµÑÊ∫êBÔºåÁ≠âÂæÖËµÑÊ∫êA Java‰∏≠Â¶Ç‰ΩïÈÅøÂÖçÊ≠ªÈîÅ Ê≠ªÈîÅÂèëÁîüÊòØÂõ†‰∏∫‰∏§‰∏™Á∫øÁ®ãËØïÂõæËé∑ÂèñË¢´ÂØπÊñπÊåÅÊúâÁöÑËµÑÊ∫ê„ÄÇ‰ΩÜÊòØË¶ÅÊÉ≥ÂèëÁîüËøôÁßçÊÉÖÂÜµÔºåÂøÖÈ°ªÊª°Ë∂≥‰ª•‰∏ãÂõõ‰∏™Êù°‰ª∂Ôºö Áõ∏‰∫íÊéíÊñ• ‚Äî‚Äî Ëá≥Â∞ë‰∏Ä‰∏™ËøõÁ®ãÂøÖÈ°ªÂ§Ñ‰∫éÈùûÂÖ±‰∫´Ê®°ÂºèÔºõ ‰øùÊåÅÂπ∂Á≠âÂæÖ ‚Äî‚Äî ÂøÖÈ°ªÊúâ‰∏Ä‰∏™ËøõÁ®ãÊåÅÊúâ‰∏Ä‰∏™ËµÑÊ∫êÂπ∂Á≠âÂæÖÂè¶‰∏Ä‰∏™ËµÑÊ∫êÔºõ Ê≤°ÊúâÊä¢Âç† ‚Äî‚Äî ËµÑÊ∫ê‰∏çËÉΩË¢´Êä¢Âç†Ôºõ Âæ™ÁéØÁ≠âÂæÖ ‚Äî‚Äî Â≠òÂú®ËøõÁ®ãÈõÜÂêà„ÄÇ ÈÄöËøá‰∏≠Êñ≠Âæ™ÁéØÁ≠âÂæÖÂèØ‰ª•ÈÅøÂÖçÊ≠ªÈîÅ„ÄÇÂèØ‰ª•ÈÄöËøáÂú®‰ª£Á†Å‰∏≠ÊåáÂÆöËé∑ÂèñÂíåÈáäÊîæÈîÅÁöÑÈ°∫Â∫èÊù•ËææÂà∞Ëøô‰∏ÄÁõÆÁöÑ„ÄÇ Â¶ÇÊûúÂ§ö‰∏™ÈîÅÈÄöËøá‰∏ÄËá¥ÁöÑÈ°∫Â∫èË¢´Ëé∑ÂèñÂíåÈáäÊîæÔºå‰∏ç‰ºöÊúâ‰∫íÁõ∏Á≠âÂæÖÂØπÊñπÈáäÊîæÈîÅÁöÑÊÉÖÂÜµ„ÄÇ ‰∏∫‰ªÄ‰πà‰ΩøÁî®ExecutorÊ°ÜÊû∂ ÊØèÊ¨°ÊâßË°å‰ªªÂä°ÂàõÂª∫Á∫øÁ®ã new Thread()ÊØîËæÉÊ∂àËÄóÊÄßËÉΩÔºåÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÊòØÊØîËæÉËÄóÊó∂„ÄÅËÄóËµÑÊ∫êÁöÑ„ÄÇ Ë∞ÉÁî® new Thread()ÂàõÂª∫ÁöÑÁ∫øÁ®ãÁº∫‰πèÁÆ°ÁêÜÔºåË¢´Áß∞‰∏∫ÈáéÁ∫øÁ®ãÔºåËÄå‰∏îÂèØ‰ª•Êó†ÈôêÂà∂ÁöÑÂàõÂª∫ÔºåÁ∫øÁ®ã‰πãÈó¥ÁöÑÁõ∏‰∫íÁ´û‰∫â‰ºöÂØºËá¥ËøáÂ§öÂç†Áî®Á≥ªÁªüËµÑÊ∫êËÄåÂØºËá¥Á≥ªÁªüÁò´Áó™ÔºåËøòÊúâÁ∫øÁ®ã‰πãÈó¥ÁöÑÈ¢ëÁπÅ‰∫§Êõø‰πü‰ºöÊ∂àËÄóÂæàÂ§öÁ≥ªÁªüËµÑÊ∫ê„ÄÇ Áõ¥Êé•‰ΩøÁî®new Thread() ÂêØÂä®ÁöÑÁ∫øÁ®ã‰∏çÂà©‰∫éÊâ©Â±ïÔºåÊØîÂ¶ÇÂÆöÊó∂ÊâßË°å„ÄÅÂÆöÊúüÊâßË°å„ÄÅÂÆöÊó∂ÂÆöÊúüÊâßË°å„ÄÅÁ∫øÁ®ã‰∏≠Êñ≠Á≠âÈÉΩ‰∏ç‰æøÂÆûÁé∞„ÄÇ ËÉΩÂ§çÁî®Â∑≤Â≠òÂú®Âπ∂Á©∫Èó≤ÁöÑÁ∫øÁ®ã‰ªéËÄåÂáèÂ∞ëÁ∫øÁ®ãÂØπË±°ÁöÑÂàõÂª∫‰ªéËÄåÂáèÂ∞ë‰∫ÜÊ∂à‰∫°Á∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ ÂèØÊúâÊïàÊéßÂà∂ÊúÄÂ§ßÂπ∂ÂèëÁ∫øÁ®ãÊï∞ÔºåÊèêÈ´òÁ≥ªÁªüËµÑÊ∫ê‰ΩøÁî®ÁéáÔºåÂêåÊó∂ÈÅøÂÖçËøáÂ§öËµÑÊ∫êÁ´û‰∫â„ÄÇ Ê°ÜÊû∂‰∏≠Â∑≤ÁªèÊúâÂÆöÊó∂„ÄÅÂÆöÊúü„ÄÅÂçïÁ∫øÁ®ã„ÄÅÂπ∂ÂèëÊï∞ÊéßÂà∂Á≠âÂäüËÉΩ„ÄÇ Âú®Java Concurrency API‰∏≠ÊúâÂì™‰∫õÂéüÂ≠êÁ±ª ÂéüÂ≠êÁ±ªÔºöAtomicBooleanÔºåAtomicIntegerÔºåAtomicLongÔºåAtomicReference ÂéüÂ≠êÊï∞ÁªÑÔºöAtomicIntegerArray,AtomicLongArrayÔºåAtomicReferenceArray ÂéüÂ≠êÂ±ûÊÄßÊõ¥Êñ∞Âô®ÔºöAtomicLongFieldUpdater,AtomicIntegerFieldUpdaterÔºåAtomicReferenceFieldUpdater Ëß£ÂÜ≥ABAÈóÆÈ¢òÁöÑÂéüÂ≠êÁ±ªÔºöAtomicMarkableReference(ÈÄöËøáÂºïÂÖ•‰∏Ä‰∏™booleanÊù•ÂèçÊò†‰∏≠Èó¥ÊúâÊ≤°ÊúâÂèòËøáÔºâ,AtomicStampedReferenceÔºàÈÄöËøáÂºïÂÖ•‰∏Ä‰∏™intÊù•Á¥ØÂä†Êù•ÂèçÊò†‰∏≠Èó¥ÊúâÊ≤°ÊúâÂèòËøáÔºâ Java Concurrency API‰∏≠ÁöÑLockÊé•Âè£(Lock interface)ÊòØ‰ªÄ‰πàÔºüÂØπÊØîÂêåÊ≠•ÂÆÉÊúâ‰ªÄ‰πà‰ºòÂäøÔºü LockÊé•Âè£ÊØîÂêåÊ≠•ÊñπÊ≥ïÂíåÂêåÊ≠•ÂùóÊèê‰æõ‰∫ÜÊõ¥ÂÖ∑Êâ©Â±ïÊÄßÁöÑÈîÅÊìç‰Ωú„ÄÇ‰ªñ‰ª¨ÂÖÅËÆ∏Êõ¥ÁÅµÊ¥ªÁöÑÁªìÊûÑÔºåÂèØ‰ª•ÂÖ∑ÊúâÂÆåÂÖ®‰∏çÂêåÁöÑÊÄßË¥®ÔºåÂπ∂‰∏îÂèØ‰ª•ÊîØÊåÅÂ§ö‰∏™Áõ∏ÂÖ≥Á±ªÁöÑÊù°‰ª∂ÂØπË±°„ÄÇ ÂÆÉÁöÑ‰ºòÂäøÊúâÔºö ÂèØ‰ª•‰ΩøÈîÅÊõ¥ÂÖ¨Âπ≥ ÂèØ‰ª•‰ΩøÁ∫øÁ®ãÂú®Á≠âÂæÖÈîÅÁöÑÊó∂ÂÄôÂìçÂ∫î‰∏≠Êñ≠ ÂèØ‰ª•ËÆ©Á∫øÁ®ãÂ∞ùËØïËé∑ÂèñÈîÅÔºåÂπ∂Âú®Êó†Ê≥ïËé∑ÂèñÈîÅÁöÑÊó∂ÂÄôÁ´ãÂç≥ËøîÂõûÊàñËÄÖÁ≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥ ÂèØ‰ª•Âú®‰∏çÂêåÁöÑËåÉÂõ¥Ôºå‰ª•‰∏çÂêåÁöÑÈ°∫Â∫èËé∑ÂèñÂíåÈáäÊîæÈîÅ Êï¥‰Ωì‰∏äÊù•ËØ¥LockÊòØsynchronizedÁöÑÊâ©Â±ïÁâàÔºåLockÊèê‰æõ‰∫ÜÊó†Êù°‰ª∂ÁöÑ„ÄÅÂèØËΩÆËØ¢ÁöÑ(tryLockÊñπÊ≥ï)„ÄÅÂÆöÊó∂ÁöÑ(tryLockÂ∏¶ÂèÇÊñπÊ≥ï)„ÄÅÂèØ‰∏≠Êñ≠ÁöÑ(lockInterruptibly)„ÄÅÂèØÂ§öÊù°‰ª∂ÈòüÂàóÁöÑ(newConditionÊñπÊ≥ï)ÈîÅÊìç‰Ωú„ÄÇÂè¶Â§ñLockÁöÑÂÆûÁé∞Á±ªÂü∫Êú¨ÈÉΩÊîØÊåÅÈùûÂÖ¨Âπ≥ÈîÅ(ÈªòËÆ§)ÂíåÂÖ¨Âπ≥ÈîÅÔºåsynchronizedÂè™ÊîØÊåÅÈùûÂÖ¨Âπ≥ÈîÅÔºåÂΩìÁÑ∂ÔºåÂú®Â§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÔºåÈùûÂÖ¨Âπ≥ÈîÅÊòØÈ´òÊïàÁöÑÈÄâÊã©„ÄÇ ‰ªÄ‰πàÊòØÈòªÂ°ûÈòüÂàóÔºüÈòªÂ°ûÈòüÂàóÁöÑÂÆûÁé∞ÂéüÁêÜÊòØ‰ªÄ‰πàÔºüÂ¶Ç‰Ωï‰ΩøÁî®ÈòªÂ°ûÈòüÂàóÊù•ÂÆûÁé∞Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÊ®°ÂûãÔºü ÈòªÂ°ûÈòüÂàóÔºàBlockingQueueÔºâÊòØ‰∏Ä‰∏™ÊîØÊåÅ‰∏§‰∏™ÈôÑÂä†Êìç‰ΩúÁöÑÈòüÂàó„ÄÇ Ëøô‰∏§‰∏™ÈôÑÂä†ÁöÑÊìç‰ΩúÊòØÔºöÂú®ÈòüÂàó‰∏∫Á©∫Êó∂ÔºåËé∑ÂèñÂÖÉÁ¥†ÁöÑÁ∫øÁ®ã‰ºöÁ≠âÂæÖÈòüÂàóÂèò‰∏∫ÈùûÁ©∫„ÄÇÂΩìÈòüÂàóÊª°Êó∂ÔºåÂ≠òÂÇ®ÂÖÉÁ¥†ÁöÑÁ∫øÁ®ã‰ºöÁ≠âÂæÖÈòüÂàóÂèØÁî®„ÄÇ ÈòªÂ°ûÈòüÂàóÂ∏∏Áî®‰∫éÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁöÑÂú∫ÊôØÔºåÁîü‰∫ßËÄÖÊòØÂæÄÈòüÂàóÈáåÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÁ∫øÁ®ãÔºåÊ∂àË¥πËÄÖÊòØ‰ªéÈòüÂàóÈáåÊãøÂÖÉÁ¥†ÁöÑÁ∫øÁ®ã„ÄÇÈòªÂ°ûÈòüÂàóÂ∞±ÊòØÁîü‰∫ßËÄÖÂ≠òÊîæÂÖÉÁ¥†ÁöÑÂÆπÂô®ÔºåËÄåÊ∂àË¥πËÄÖ‰πüÂè™‰ªéÂÆπÂô®ÈáåÊãøÂÖÉÁ¥†„ÄÇ JDK7Êèê‰æõ‰∫Ü7‰∏™ÈòªÂ°ûÈòüÂàó„ÄÇÂàÜÂà´ÊòØÔºö ArrayBlockingQueue Ôºö‰∏Ä‰∏™Áî±Êï∞ÁªÑÁªìÊûÑÁªÑÊàêÁöÑÊúâÁïåÈòªÂ°ûÈòüÂàó„ÄÇ LinkedBlockingQueue Ôºö‰∏Ä‰∏™Áî±ÈìæË°®ÁªìÊûÑÁªÑÊàêÁöÑÊúâÁïåÈòªÂ°ûÈòüÂàó„ÄÇ PriorityBlockingQueue Ôºö‰∏Ä‰∏™ÊîØÊåÅ‰ºòÂÖàÁ∫ßÊéíÂ∫èÁöÑÊó†ÁïåÈòªÂ°ûÈòüÂàó„ÄÇ DelayQueueÔºö‰∏Ä‰∏™‰ΩøÁî®‰ºòÂÖàÁ∫ßÈòüÂàóÂÆûÁé∞ÁöÑÊó†ÁïåÈòªÂ°ûÈòüÂàó„ÄÇ SynchronousQueueÔºö‰∏Ä‰∏™‰∏çÂ≠òÂÇ®ÂÖÉÁ¥†ÁöÑÈòªÂ°ûÈòüÂàó„ÄÇ LinkedTransferQueueÔºö‰∏Ä‰∏™Áî±ÈìæË°®ÁªìÊûÑÁªÑÊàêÁöÑÊó†ÁïåÈòªÂ°ûÈòüÂàó„ÄÇ LinkedBlockingDequeÔºö‰∏Ä‰∏™Áî±ÈìæË°®ÁªìÊûÑÁªÑÊàêÁöÑÂèåÂêëÈòªÂ°ûÈòüÂàó„ÄÇ Java 5‰πãÂâçÂÆûÁé∞ÂêåÊ≠•Â≠òÂèñÊó∂ÔºåÂèØ‰ª•‰ΩøÁî®ÊôÆÈÄöÁöÑ‰∏Ä‰∏™ÈõÜÂêàÔºåÁÑ∂ÂêéÂú®‰ΩøÁî®Á∫øÁ®ãÁöÑÂçè‰ΩúÂíåÁ∫øÁ®ãÂêåÊ≠•ÂèØ‰ª•ÂÆûÁé∞Áîü‰∫ßËÄÖÔºåÊ∂àË¥πËÄÖÊ®°ÂºèÔºå‰∏ªË¶ÅÁöÑÊäÄÊúØÂ∞±ÊòØÁî®Â•ΩÔºåwait ,notify,notifyAll,sychronizedËøô‰∫õÂÖ≥ÈîÆÂ≠ó„ÄÇËÄåÂú®java 5‰πãÂêéÔºåÂèØ‰ª•‰ΩøÁî®ÈòªÂ°ûÈòüÂàóÊù•ÂÆûÁé∞ÔºåÊ≠§ÊñπÂºèÂ§ßÂ§ßÁÆÄÂ∞ë‰∫Ü‰ª£Á†ÅÈáèÔºå‰ΩøÂæóÂ§öÁ∫øÁ®ãÁºñÁ®ãÊõ¥Âä†ÂÆπÊòìÔºåÂÆâÂÖ®ÊñπÈù¢‰πüÊúâ‰øùÈöú„ÄÇ BlockingQueueÊé•Âè£ÊòØQueueÁöÑÂ≠êÊé•Âè£ÔºåÂÆÉÁöÑ‰∏ªË¶ÅÁî®ÈÄîÂπ∂‰∏çÊòØ‰Ωú‰∏∫ÂÆπÂô®ÔºåËÄåÊòØ‰Ωú‰∏∫Á∫øÁ®ãÂêåÊ≠•ÁöÑÁöÑÂ∑•ÂÖ∑ÔºåÂõ†Ê≠§‰ªñÂÖ∑Êúâ‰∏Ä‰∏™ÂæàÊòéÊòæÁöÑÁâπÊÄßÔºåÂΩìÁîü‰∫ßËÄÖÁ∫øÁ®ãËØïÂõæÂêëBlockingQueueÊîæÂÖ•ÂÖÉÁ¥†Êó∂ÔºåÂ¶ÇÊûúÈòüÂàóÂ∑≤Êª°ÔºåÂàôÁ∫øÁ®ãË¢´ÈòªÂ°ûÔºåÂΩìÊ∂àË¥πËÄÖÁ∫øÁ®ãËØïÂõæ‰ªé‰∏≠ÂèñÂá∫‰∏Ä‰∏™ÂÖÉÁ¥†Êó∂ÔºåÂ¶ÇÊûúÈòüÂàó‰∏∫Á©∫ÔºåÂàôËØ•Á∫øÁ®ã‰ºöË¢´ÈòªÂ°ûÔºåÊ≠£ÊòØÂõ†‰∏∫ÂÆÉÊâÄÂÖ∑ÊúâËøô‰∏™ÁâπÊÄßÔºåÊâÄ‰ª•Âú®Á®ãÂ∫è‰∏≠Â§ö‰∏™Á∫øÁ®ã‰∫§ÊõøÂêëBlockingQueue‰∏≠ÊîæÂÖ•ÂÖÉÁ¥†ÔºåÂèñÂá∫ÂÖÉÁ¥†ÔºåÂÆÉÂèØ‰ª•ÂæàÂ•ΩÁöÑÊéßÂà∂Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇ ÈòªÂ°ûÈòüÂàó‰ΩøÁî®ÊúÄÁªèÂÖ∏ÁöÑÂú∫ÊôØÂ∞±ÊòØsocketÂÆ¢Êà∑Á´ØÊï∞ÊçÆÁöÑËØªÂèñÂíåËß£ÊûêÔºåËØªÂèñÊï∞ÊçÆÁöÑÁ∫øÁ®ã‰∏çÊñ≠Â∞ÜÊï∞ÊçÆÊîæÂÖ•ÈòüÂàóÔºåÁÑ∂ÂêéËß£ÊûêÁ∫øÁ®ã‰∏çÊñ≠‰ªéÈòüÂàóÂèñÊï∞ÊçÆËß£Êûê„ÄÇ ‰ªÄ‰πàÂè´Á∫øÁ®ãÂÆâÂÖ®ÔºüservletÊòØÁ∫øÁ®ãÂÆâÂÖ®Âêó? Á∫øÁ®ãÂÆâÂÖ®ÊòØÁºñÁ®ã‰∏≠ÁöÑÊúØËØ≠ÔºåÊåáÊüê‰∏™ÂáΩÊï∞„ÄÅÂáΩÊï∞Â∫ìÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏≠Ë¢´Ë∞ÉÁî®Êó∂ÔºåËÉΩÂ§üÊ≠£Á°ÆÂú∞Â§ÑÁêÜÂ§ö‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÂÖ±‰∫´ÂèòÈáèÔºå‰ΩøÁ®ãÂ∫èÂäüËÉΩÊ≠£Á°ÆÂÆåÊàê„ÄÇ Servlet‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåservletÊòØÂçïÂÆû‰æãÂ§öÁ∫øÁ®ãÁöÑÔºåÂΩìÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËÆøÈóÆÂêå‰∏Ä‰∏™ÊñπÊ≥ïÔºåÊòØ‰∏çËÉΩ‰øùËØÅÂÖ±‰∫´ÂèòÈáèÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÊÄßÁöÑ„ÄÇ Struts2ÁöÑactionÊòØÂ§öÂÆû‰æãÂ§öÁ∫øÁ®ãÁöÑÔºåÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÊØè‰∏™ËØ∑Ê±ÇËøáÊù•ÈÉΩ‰ºönew‰∏Ä‰∏™Êñ∞ÁöÑactionÂàÜÈÖçÁªôËøô‰∏™ËØ∑Ê±ÇÔºåËØ∑Ê±ÇÂÆåÊàêÂêéÈîÄÊØÅ„ÄÇ SpringMVCÁöÑControllerÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂêóÔºü‰∏çÊòØÁöÑÔºåÂíåServletÁ±ª‰ººÁöÑÂ§ÑÁêÜÊµÅÁ®ã Struts2Â•ΩÂ§ÑÊòØ‰∏çÁî®ËÄÉËôëÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºõServletÂíåSpringMVCÈúÄË¶ÅËÄÉËôëÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºå‰ΩÜÊòØÊÄßËÉΩÂèØ‰ª•ÊèêÂçá‰∏çÁî®Â§ÑÁêÜÂ§™Â§öÁöÑgcÔºåÂèØ‰ª•‰ΩøÁî®ThreadLocalÊù•Â§ÑÁêÜÂ§öÁ∫øÁ®ãÁöÑÈóÆÈ¢ò„ÄÇ Java‰∏≠interrupted Âíå isInterruptedÊñπÊ≥ïÁöÑÂå∫Âà´ interrupt interruptÊñπÊ≥ïÁî®‰∫é‰∏≠Êñ≠Á∫øÁ®ã„ÄÇË∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ‰∏∫Â∞ÜË¢´ÁΩÆ‰∏∫‚Äù‰∏≠Êñ≠‚ÄùÁä∂ÊÄÅ„ÄÇ Ê≥®ÊÑèÔºöÁ∫øÁ®ã‰∏≠Êñ≠‰ªÖ‰ªÖÊòØÁΩÆÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Áä∂ÊÄÅ‰ΩçÔºå‰∏ç‰ºöÂÅúÊ≠¢Á∫øÁ®ã„ÄÇÈúÄË¶ÅÁî®Êà∑Ëá™Â∑±ÂéªÁõëËßÜÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ‰∏∫Âπ∂ÂÅöÂ§ÑÁêÜ„ÄÇÊîØÊåÅÁ∫øÁ®ã‰∏≠Êñ≠ÁöÑÊñπÊ≥ïÔºà‰πüÂ∞±ÊòØÁ∫øÁ®ã‰∏≠Êñ≠Âêé‰ºöÊäõÂá∫interruptedExceptionÁöÑÊñπÊ≥ïÔºâÂ∞±ÊòØÂú®ÁõëËßÜÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Áä∂ÊÄÅÔºå‰∏ÄÊó¶Á∫øÁ®ãÁöÑ‰∏≠Êñ≠Áä∂ÊÄÅË¢´ÁΩÆ‰∏∫‚Äú‰∏≠Êñ≠Áä∂ÊÄÅ‚ÄùÔºåÂ∞±‰ºöÊäõÂá∫‰∏≠Êñ≠ÂºÇÂ∏∏„ÄÇ interrupted Êü•ËØ¢ÂΩìÂâçÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Áä∂ÊÄÅÔºåÂπ∂‰∏îÊ∏ÖÈô§ÂéüÁä∂ÊÄÅ„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Á∫øÁ®ãË¢´‰∏≠Êñ≠‰∫ÜÔºåÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî®interruptedÂàôËøîÂõûtrueÔºåÁ¨¨‰∫åÊ¨°ÂíåÂêéÈù¢ÁöÑÂ∞±ËøîÂõûfalse‰∫Ü„ÄÇ isInterrupted ‰ªÖ‰ªÖÊòØÊü•ËØ¢ÂΩìÂâçÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Áä∂ÊÄÅ„ÄÇ]]></content>
      <categories>
        <category>Èù¢ËØïÈ¢ò</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Â§öÁ∫øÁ®ã</tag>
        <tag>Èù¢ËØïÈ¢ò</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-ËßÇÂØüËÄÖÊ®°Âºè]]></title>
    <url>%2Fposts%2F4eed4967.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ ËßÇÂØüËÄÖÊ®°ÂºèÔºàObserver PatternÔºâÔºåÂèàÂè´ ÂèëÂ∏É-ËÆ¢ÈòÖÔºàPublish/SubscribeÔºâÊ®°Âºè„ÄÅÊ®°Âûã-ËßÜÂõæÔºàModel/ViewÔºâÊ®°Âºè„ÄÅÊ∫ê-ÁõëÂê¨Âô®ÔºàSource/ListenerÔºâÊ®°Âºè Êàñ ‰ªéÂ±ûËÄÖÔºàDependentsÔºâÊ®°Âºè„ÄÇ ËßÇÂØüËÄÖÊ®°Âºè ÊòØÂØπË±°ÁöÑË°å‰∏∫Ê®°ÂºèÔºåÂÆö‰πâ‰∫Ü‰∏ÄÁßç‰∏ÄÂØπÂ§öÁöÑ‰æùËµñÂÖ≥Á≥ªÔºå‰∏Ä‰∏™‰∏ªÈ¢òÂØπË±°ÂèØË¢´Â§ö‰∏™ËßÇÂØüËÄÖÂØπË±°ÂêåÊó∂ÁõëÂê¨Ôºå‰ΩøÂæóÊØèÂΩì‰∏ªÈ¢òÂØπË±°Áä∂ÊÄÅÂèòÂåñÊó∂ÔºåÊâÄÊúâ‰æùËµñ‰∫éÂÆÉÁöÑÂØπË±°ÈÉΩ‰ºöÂæóÂà∞ÈÄöÁü•Âπ∂Ë¢´Ëá™Âä®Êõ¥Êñ∞„ÄÇ ËßÇÂØüËÄÖÊ®°Âºè Ê†∏ÂøÉÔºöÊùæËÄ¶ÂêàËßÇÂØüËÄÖ‰∏éË¢´ËßÇÂØüËÄÖÔºå‰ª•Á±ª‰ºº‰∫éÊ∂àÊÅØ/ÂπøÊí≠ÂèëÈÄÅÁöÑÊú∫Âà∂ËÅîÂä®‰∏§ËÄÖÔºå‰ΩøË¢´ËßÇÂØüËÄÖÁöÑÂèòÂä®ËÉΩÈÄöÁü•Âà∞ÊÑüÂÖ¥Ë∂£ÁöÑËßÇÂØüËÄÖ‰ª¨Ôºå‰ªéËÄåÂÅöÂá∫Áõ∏Â∫îÁöÑÂìçÂ∫î„ÄÇ ‰∏ªË¶Å‰ΩúÁî® ÂΩìÁ≥ªÁªü‰∏ÄÊñπË°å‰∏∫‰æùËµñ‰∫éÂè¶‰∏ÄÊñπË°å‰∏∫ÁöÑÂèòÂä®Êó∂ÔºåÂèØ‰ΩøÁî® ËßÇÂØüËÄÖÊ®°Âºè ÊùæËÄ¶ÂêàËÅîÂä®ÂèåÊñπÔºå‰ΩøÂæó‰∏ÄÊñπÁöÑÂèòÂä®ÂèØ‰ª•ÈÄöÁü•Âà∞ÊÑüÂÖ¥Ë∂£ÁöÑÂè¶‰∏ÄÊñπÂØπË±°Ôºå‰ªéËÄåËÆ©Âè¶‰∏ÄÊñπÂØπË±°ÂØπÊ≠§ÂÅöÂá∫ÂìçÂ∫î„ÄÇ UMLÁ±ªÂõæ ËßíËâ≤ ÊäΩË±°‰∏ªÈ¢òÔºàSubjectÔºâÔºöÁõÆÊ†áÂèàÁß∞‰∏∫‰∏ªÈ¢òÔºåÊåáË¢´ËßÇÂØüÁöÑÂØπË±°ÔºàObservableÔºâ„ÄÇÂú®ÁõÆÊ†á‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ËßÇÂØüËÄÖÈõÜÂêàÔºå‰∏Ä‰∏™ËßÇÂØüÁõÆÊ†áÂèØ‰ª•Êé•Âèó‰ªªÊÑèÊï∞ÈáèÁöÑËßÇÂØüËÄÖÊù•ËßÇÂØüÔºåÂÆÉÊèê‰æõ‰∏ÄÁ≥ªÂàóÊñπÊ≥ïÊù•Â¢ûÂä†ÂíåÂà†Èô§ËßÇÂØüËÄÖÂØπË±°ÔºåÂêåÊó∂ÂÆÉÂÆö‰πâ‰∫ÜÈÄöÁü•ÊñπÊ≥ïnotify()„ÄÇÁõÆÊ†áÁ±ªÂèØ‰ª•ÊòØÊé•Âè£Ôºå‰πüÂèØ‰ª•ÊòØÊäΩË±°Á±ªÊàñÂÖ∑‰ΩìÁ±ª„ÄÇ ÂÖ∑‰Ωì‰∏ªÈ¢òÔºàConcreteSubjectÔºâÔºöÂÖ∑‰ΩìË¢´ËßÇÂØüËÄÖÔºåÊòØÁõÆÊ†áÁ±ªÔºàÊäΩË±°‰∏ªÈ¢òÔºâÁöÑÂ≠êÁ±ªÔºåÈÄöÂ∏∏ÂÆÉÂåÖÂê´ÊúâÁªèÂ∏∏ÂèëÁîüÊîπÂèòÁöÑÊï∞ÊçÆÔºåÂΩìÂÆÉÁöÑÁä∂ÊÄÅÂèëÁîüÊîπÂèòÊó∂ÔºåÂêëÂÆÉÁöÑÂêÑ‰∏™ËßÇÂØüËÄÖÂèëÂá∫ÈÄöÁü•ÔºõÂêåÊó∂ÂÆÉËøòÂÆûÁé∞‰∫ÜÂú®ÁõÆÊ†áÁ±ª‰∏≠ÂÆö‰πâÁöÑÊäΩË±°‰∏öÂä°ÈÄªËæëÊñπÊ≥ïÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ„ÄÇÂ¶ÇÊûúÊó†È°ªÊâ©Â±ïÁõÆÊ†áÁ±ªÔºåÂàôÂÖ∑‰ΩìÁõÆÊ†áÁ±ªÂèØ‰ª•ÁúÅÁï•„ÄÇ ÊäΩË±°ËßÇÂØüËÄÖÔºàObserverÔºâÔºöËßÇÂØüËÄÖÂ∞ÜÂØπËßÇÂØüÁõÆÊ†áÁöÑÊîπÂèòÂÅöÂá∫ÂèçÂ∫îÔºåËßÇÂØüËÄÖ‰∏ÄËà¨ÂÆö‰πâ‰∏∫Êé•Âè£ÔºåËØ•Êé•Âè£Â£∞Êòé‰∫ÜÊõ¥Êñ∞Êï∞ÊçÆÁöÑÊñπÊ≥ïupdate()ÔºåÂõ†Ê≠§ÂèàÁß∞‰∏∫ÊäΩË±°ËßÇÂØüËÄÖ„ÄÇ ÂÖ∑‰ΩìËßÇÂØüËÄÖÔºàConcrereObserverÔºâÔºöÂú®ÂÖ∑‰ΩìËßÇÂØüËÄÖ‰∏≠Áª¥Êä§‰∏Ä‰∏™ÊåáÂêëÂÖ∑‰ΩìÁõÆÊ†áÂØπË±°ÁöÑÂºïÁî®ÔºåÂÆÉÂ≠òÂÇ®ÂÖ∑‰ΩìËßÇÂØüËÄÖÁöÑÊúâÂÖ≥Áä∂ÊÄÅÔºåËøô‰∫õÁä∂ÊÄÅÈúÄË¶ÅÂíåÂÖ∑‰ΩìÁõÆÊ†áÁöÑÁä∂ÊÄÅ‰øùÊåÅ‰∏ÄËá¥ÔºõÂÆÉÂÆûÁé∞‰∫ÜÂú®ÊäΩË±°ËßÇÂØüËÄÖObserver‰∏≠ÂÆö‰πâÁöÑupdate()ÊñπÊ≥ï„ÄÇÈÄöÂ∏∏Âú®ÂÆûÁé∞Êó∂ÔºåÂèØ‰ª•Ë∞ÉÁî®ÂÖ∑‰ΩìÁõÆÊ†áÁ±ªÁöÑattach()ÊñπÊ≥ïÂ∞ÜËá™Â∑±Ê∑ªÂä†Âà∞ÁõÆÊ†áÁ±ªÁöÑÈõÜÂêà‰∏≠ÊàñÈÄöËøádetach()ÊñπÊ≥ïÂ∞ÜËá™Â∑±‰ªéÁõÆÊ†áÁ±ªÁöÑÈõÜÂêà‰∏≠Âà†Èô§„ÄÇ Ê®°Âºè‰ºòÁÇπ ËßÇÂØüËÄÖÂíåË¢´ËßÇÂØüËÄÖÊòØÊùæËÄ¶ÂêàÔºàÊäΩË±°ËÄ¶ÂêàÔºâÁöÑÔºåÁ¨¶Âêà ‰æùËµñÂÄíÁΩÆÂéüÂàôÔºõ ÂàÜÁ¶ª‰∫ÜË°®Á§∫Â±ÇÔºàËßÇÂØüËÄÖÔºâÂíåÊï∞ÊçÆÈÄªËæëÂ±ÇÔºàË¢´ËßÇÂØüËÄÖÔºâÔºåÂπ∂‰∏îÂª∫Á´ã‰∫Ü‰∏ÄÂ•óËß¶ÂèëÊú∫Âà∂Ôºå‰ΩøÂæóÊï∞ÊçÆÁöÑÂèòÂåñÂèØ‰ª•ÂìçÂ∫îÂà∞Â§ö‰∏™Ë°®Á§∫Â±Ç‰∏äÔºõ ÊîØÊåÅÂπøÊí≠ÈÄö‰ø°ÔºåÂÆûÁé∞‰∫Ü‰∏ÄÂØπÂ§öÁöÑÈÄöËÆØÊú∫Âà∂ÔºåÊîØÊåÅ‰∫ã‰ª∂Ê≥®ÂÜåÊú∫Âà∂ÔºåÊîØÊåÅÂÖ¥Ë∂£ÂàÜÂèëÊú∫Âà∂ÔºåÂΩìË¢´ËßÇÂØüËÄÖËß¶Âèë‰∫ã‰ª∂Êó∂ÔºåÂè™ÊúâÊÑüÂÖ¥Ë∂£ÁöÑËßÇÂØüËÄÖÂèØ‰ª•Êé•Êî∂Âà∞ÈÄöÁü•Ôºõ ËßÇÂØüËÄÖÊ®°ÂºèÊª°Ë∂≥ ‚ÄúÂºÄÈó≠ÂéüÂàô‚Äù ÁöÑË¶ÅÊ±ÇÔºåÂ¢ûÂä†Êñ∞ÁöÑÂÖ∑‰ΩìËßÇÂØüËÄÖÊó†È°ª‰øÆÊîπÂéüÊúâÁ≥ªÁªü‰ª£Á†ÅÔºåÂú®ÂÖ∑‰ΩìËßÇÂØüËÄÖ‰∏éËßÇÂØüÁõÆÊ†á‰πãÈó¥‰∏çÂ≠òÂú®ÂÖ≥ËÅîÂÖ≥Á≥ªÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¢ûÂä†Êñ∞ÁöÑËßÇÂØüÁõÆÊ†á‰πüÂæàÊñπ‰æø„ÄÇ Ê®°ÂºèÁº∫ÁÇπ Â¶ÇÊûú‰∏Ä‰∏™ËßÇÂØüÁõÆÊ†áÂØπË±°ÊúâÂæàÂ§öÁõ¥Êé•ÂíåÈó¥Êé•ËßÇÂØüËÄÖÔºåÂ∞ÜÊâÄÊúâÁöÑËßÇÂØüËÄÖÈÉΩÈÄöÁü•Âà∞‰ºöËä±Ë¥πÂæàÂ§öÊó∂Èó¥Ôºõ ‰∫ã‰ª∂ÈÄöÁü•ÂëàÁ∫øÊÄßÂÖ≥Á≥ªÔºåÂ¶ÇÊûúÂÖ∂‰∏≠‰∏Ä‰∏™ËßÇÂØüËÄÖÂ§ÑÁêÜ‰∫ã‰ª∂Âç°Â£≥Ôºå‰ºöÂΩ±ÂìçÂêéÁª≠ÁöÑËßÇÂØüËÄÖÊé•Êî∂ËØ•‰∫ã‰ª∂Ôºõ Â¶ÇÊûúËßÇÂØüËÄÖÂíåË¢´ËßÇÂØüËÄÖ‰πãÈó¥Â≠òÂú®Âæ™ÁéØ‰æùËµñÔºåÂàôÂèØËÉΩÈÄ†Êàê‰∏§ËÄÖ‰πãÈó¥ÁöÑÂæ™ÁéØË∞ÉÁî®ÔºåÂØºËá¥Á≥ªÁªüÂ¥©Ê∫ÉÔºõ ËßÇÂØüËÄÖÊ®°ÂºèÊ≤°ÊúâÁõ∏Â∫îÁöÑÊú∫Âà∂ËÆ©ËßÇÂØüËÄÖÁü•ÈÅìÊâÄËßÇÂØüÁöÑÁõÆÊ†áÂØπË±°ÊòØÊÄé‰πàÂèëÁîüÂèòÂåñÁöÑÔºåËÄå‰ªÖ‰ªÖÂè™ÊòØÁü•ÈÅìËßÇÂØüÁõÆÊ†áÂèëÁîü‰∫ÜÂèòÂåñ„ÄÇ ÈÄÇÁî®Âú∫ÊôØ ‰∏Ä‰∏™ÊäΩË±°Ê®°ÂûãÊúâ‰∏§‰∏™ÊñπÈù¢ÔºåÂÖ∂‰∏≠‰∏Ä‰∏™ÊñπÈù¢‰æùËµñ‰∫éÂè¶‰∏Ä‰∏™ÊñπÈù¢ÔºåÂ∞ÜËøô‰∏§‰∏™ÊñπÈù¢Â∞ÅË£ÖÂú®Áã¨Á´ãÁöÑÂØπË±°‰∏≠‰ΩøÂÆÉ‰ª¨ÂèØ‰ª•ÂêÑËá™Áã¨Á´ãÂú∞ÊîπÂèòÂíåÂ§çÁî®„ÄÇ ‰∏Ä‰∏™ÂØπË±°ÁöÑÊîπÂèòÂ∞ÜÂØºËá¥‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÖ∂‰ªñÂØπË±°‰πüÂèëÁîüÊîπÂèòÔºåËÄåÂπ∂‰∏çÁü•ÈÅìÂÖ∑‰ΩìÊúâÂ§öÂ∞ëÂØπË±°Â∞ÜÂèëÁîüÊîπÂèòÔºå‰πü‰∏çÁü•ÈÅìËøô‰∫õÂØπË±°ÊòØË∞Å„ÄÇ ÈúÄË¶ÅÂú®Á≥ªÁªü‰∏≠ÂàõÂª∫‰∏Ä‰∏™Ëß¶ÂèëÈìæÔºåAÂØπË±°ÁöÑË°å‰∏∫Â∞ÜÂΩ±ÂìçBÂØπË±°ÔºåBÂØπË±°ÁöÑË°å‰∏∫Â∞ÜÂΩ±ÂìçCÂØπË±°‚Ä¶‚Ä¶ÔºåÂèØ‰ª•‰ΩøÁî®ËßÇÂØüËÄÖÊ®°ÂºèÂàõÂª∫‰∏ÄÁßçÈìæÂºèËß¶ÂèëÊú∫Âà∂„ÄÇ ÂÆûÁé∞Á±ª‰ººÂπøÊí≠Êú∫Âà∂ÁöÑÂäüËÉΩÔºåÊó†ÈúÄÁü•ÈÅìÂÖ∑‰ΩìÊî∂Âê¨ËÄÖÔºåÂè™ÈúÄÂàÜÂèëÂπøÊí≠ÔºåÁ≥ªÁªü‰∏≠ÊÑüÂÖ¥Ë∂£ÁöÑÂØπË±°‰ºöËá™Âä®Êé•Êî∂ËØ•ÂπøÊí≠Ôºõ ‰ΩøÁî®Ê≠•È™§ ÊäΩË±°ËßÇÂØüËÄÖ 123456789101112package main.java.com.study.designPatterns.observer.demoOne;/** * @author: whb * @description: ÊäΩË±°ËßÇÂØüËÄÖ */public interface IObserver&lt;E&gt; &#123; /** * Êõ¥Êñ∞Êï∞ÊçÆ */ void update(E event);&#125; ÊäΩË±°‰∏ªÈ¢òËÄÖ 123456789101112131415161718192021222324252627282930package main.java.com.study.designPatterns.observer.demoOne;/** * @author: whb * @description: ÊäΩË±°‰∏ªÈ¢ò */public interface ISubject&lt;E&gt; &#123; /** * Ê≥®ÂÜå * * @param observer * @return */ boolean attach(IObserver&lt;E&gt; observer); /** * ÂèñÊ∂àÊ≥®ÂÜå * * @param observer * @return */ boolean detach(IObserver&lt;E&gt; observer); /** * ÈÄöÁü• * * @param event */ void notify(E event);&#125; ÂÖ∑‰ΩìËßÇÂØüËÄÖ 12345678910111213package main.java.com.study.designPatterns.observer.demoOne;/** * @author: whb * @description: ÂÖ∑‰ΩìËßÇÂØüËÄÖ */public class ConcreteObserver&lt;E&gt; implements IObserver&lt;E&gt; &#123; @Override public void update(E event) &#123; System.out.println("receive eventÔºö" + event); &#125;&#125; ÂÖ∑‰Ωì‰∏ªÈ¢òËÄÖ 1234567891011121314151617181920212223242526272829303132package main.java.com.study.designPatterns.observer.demoOne;import java.util.ArrayList;import java.util.List;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∏ªÈ¢òËÄÖ */public class ConcreteSubject&lt;E&gt; implements ISubject&lt;E&gt; &#123; /** * ËßÇÂØüËÄÖÈõÜÂêà */ private List&lt;IObserver&lt;E&gt;&gt; mObservers = new ArrayList&lt;&gt;(); @Override public boolean attach(IObserver&lt;E&gt; observer) &#123; return !this.mObservers.contains(observer) &amp;&amp; this.mObservers.add(observer); &#125; @Override public boolean detach(IObserver&lt;E&gt; observer) &#123; return this.mObservers.remove(observer); &#125; @Override public void notify(E event) &#123; for (IObserver&lt;E&gt; observer : this.mObservers) &#123; observer.update(event); &#125; &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® 123456789101112131415161718package main.java.com.study.designPatterns.observer.demoOne;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class Client &#123; public static void main(String[] args) &#123; // Ë¢´ËßÇÂØüËÄÖ ISubject&lt;String&gt; observable = new ConcreteSubject&lt;&gt;(); // ËßÇÂØüËÄÖ IObserver&lt;String&gt; observer = new ConcreteObserver&lt;&gt;(); // Ê≥®ÂÜå observable.attach(observer); // ÈÄöÁü• observable.notify("hello"); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-‰ª£ÁêÜÊ®°Âºè]]></title>
    <url>%2Fposts%2Fe3d6aa41.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ ÁªôÁõÆÊ†áÂØπË±°Êèê‰æõ‰∏Ä‰∏™‰ª£ÁêÜÂØπË±°ÔºåÂπ∂Áî±‰ª£ÁêÜÂØπË±°ÊéßÂà∂ÂØπÁõÆÊ†áÂØπË±°ÁöÑÂºïÁî®„ÄÇ ‰∏ªË¶Å‰ΩúÁî® ÈÄöËøáÂºïÂÖ•‰ª£ÁêÜÂØπË±°ÁöÑÊñπÂºèÊù•Èó¥Êé•ËÆøÈóÆÁõÆÊ†áÂØπË±°„ÄÇ Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò Èò≤Ê≠¢Áõ¥Êé•ËÆøÈóÆÁõÆÊ†áÂØπË±°ÁªôÁ≥ªÁªüÂ∏¶Êù•ÁöÑ‰∏çÂøÖË¶ÅÂ§çÊùÇÊÄß„ÄÇ Ê®°ÂºèÂéüÁêÜ UMLÁ±ªÂõæ Ê®°ÂºèÁªÑÊàê ÊäΩË±°‰∏ªÈ¢òËßíËâ≤ÔºàSubjectÔºâÔºöÊäΩË±°‰∏ªÈ¢òÁ±ª ÁöÑ‰∏ªË¶ÅËÅåË¥£ÊòØÂ£∞Êòé ÁúüÂÆû‰∏ªÈ¢ò ‰∏é ‰ª£ÁêÜ ÁöÑÂÖ±ÂêåÊé•Âè£ÊñπÊ≥ïÔºåËØ•Á±ªÂèØ‰ª•ÊòØÊé•Âè£‰πüÂèØ‰ª•ÊòØÊäΩË±°Á±ªÔºõ ÁúüÂÆû‰∏ªÈ¢òËßíËâ≤ÔºàRealSubjectÔºâÔºöËØ•Á±ª‰πüË¢´Áß∞‰∏∫ Ë¢´ÂßîÊâòÁ±ª Êàñ Ë¢´‰ª£ÁêÜÁ±ªÔºåËØ•Á±ªÂÆö‰πâ‰∫Ü‰ª£ÁêÜÊâÄË°®Á§∫ÁöÑÁúüÂÆûÂØπË±°ÔºåÊòØË¥üË¥£ÊâßË°åÁ≥ªÁªüÁúüÊ≠£ÁöÑÈÄªËæë‰∏öÂä°ÂØπË±°Ôºõ ‰ª£ÁêÜ‰∏ªÈ¢òËßíËâ≤ÔºàProxyÔºâÔºö‰πüË¢´Áß∞‰∏∫ ÂßîÊâòÁ±ª Êàñ ‰ª£ÁêÜÁ±ªÔºåÂÖ∂ÂÜÖÈÉ®ÊåÅÊúâ RealSubject ÁöÑÂºïÁî®ÔºåÂõ†Ê≠§ÂÖ∑Â§áÂÆåÂÖ®ÁöÑÂØπ RealSubject ÁöÑ‰ª£ÁêÜÊùÉÔºõ Ê®°Âºè‰ºòÁÇπ ÂçèË∞ÉË∞ÉÁî®ËÄÖÂíåË¢´Ë∞ÉÁî®ËÄÖÔºåÈôç‰Ωé‰∫ÜÁ≥ªÁªüÁöÑËÄ¶ÂêàÂ∫¶„ÄÇ ‰ª£ÁêÜÂØπË±°‰Ωú‰∏∫ÂÆ¢Êà∑Á´ØÂíåÁõÆÊ†áÂØπË±°‰πãÈó¥ÁöÑ‰∏≠‰ªãÔºåËµ∑Âà∞‰∫Ü‰øùÊä§ÁõÆÊ†áÂØπË±°ÁöÑ‰ΩúÁî®„ÄÇ ËÅåË¥£Ê∏ÖÊô∞ÔºöÁúüÂÆû‰∏ªÈ¢òËßíËâ≤ Âè™Ë¥üË¥£ÂÆûÁé∞ÂÆûÈôÖÁöÑ‰∏öÂä°ÈÄªËæëÔºåÊó†ÈúÄÂÖ≥ÂøÉÂÖ∂‰ªñÈùûÊú¨ËÅåË¥£ÁöÑ‰∫ãÂä°ÔºåÈÄöËøáÂêéÊúü‰ª£ÁêÜÁöÑËÆøÈóÆÊéßÂà∂ÔºåÂèØ‰ª•Êâ©Â±ïÊàñÁº©ÂáèÂÆûÈôÖ‰∫ãÂä°ÔºåÁ¨¶ÂêàËÆæËÆ°Ê®°Âºè Âçï‰∏ÄËÅåË¥£ÂéüÂàôÔºå‰ª£Á†ÅÁÆÄÊ¥ÅÊ∏ÖÊô∞Ôºõ È´òÊâ©Â±ïÊÄßÔºöÁúüÂÆû‰∏ªÈ¢òËßíËâ≤ Ë¥üË¥£ÂÆûÈôÖ‰∏öÂä°ÈÄªËæëÔºåÂèØËÉΩÁªèÂ∏∏ÊÄßÂèòÂä®Ôºå‰ΩÜÊòØÁî±‰∫éÂÖ∂‰∏é ‰ª£ÁêÜÁ±ª ÈÉΩÂÆûÁé∞‰∫Ü ÊäΩË±°‰∏ªÈ¢òÔºåÂõ†Ê≠§ÔºåÁúüÂÆû‰∏ªÈ¢ò ÁöÑÊîπÂèò‰∏ç‰ºöÂΩ±ÂìçÂà∞‰ª£ÁêÜÁ±ªÔºåÁ¨¶ÂêàËÆæËÆ°Ê®°Âºè ‰æùËµñÂÄíÁΩÆÂéüÂàôÔºåÈáåÊ∞èÊõøÊç¢ÂéüÂàô Âíå ÂºÄÈó≠ÂéüÂàôÔºõ Êô∫ËÉΩÂåñÔºö‰∏ªË¶ÅÊòØÂü∫‰∫éÂä®ÊÄÅ‰ª£ÁêÜÁöÑÂÆûÁé∞ÔºåÂèØ‰ª•Âú®Á®ãÂ∫èËøêË°åÊó∂ÁîüÊàê‰∏Ä‰∏™ÂêàÈÄÇÁöÑ‰ª£ÁêÜÁ±ªÔºõ Ê®°ÂºèÁº∫ÁÇπ Áî±‰∫éÂú®ÂÆ¢Êà∑Á´ØÂíåÁúüÂÆû‰∏ªÈ¢ò‰πãÈó¥Â¢ûÂä†‰∫Ü‰ª£ÁêÜÂØπË±°ÔºåÂõ†Ê≠§‰ºöÈÄ†ÊàêËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÈÄüÂ∫¶ÂèòÊÖ¢Ôºõ ÂÆûÁé∞‰ª£ÁêÜÊ®°ÂºèÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂ∑•‰ΩúÔºàÊúâ‰∫õ‰ª£ÁêÜÊ®°ÂºèÁöÑÂÆûÁé∞ÈùûÂ∏∏Â§çÊùÇÔºâÔºå‰ªéËÄåÂ¢ûÂä†‰∫ÜÁ≥ªÁªüÂÆûÁé∞ÁöÑÂ§çÊùÇÂ∫¶„ÄÇ Â∫îÁî®Âú∫ÊôØ ÂΩìÊó†Ê≥ïÊàñ‰∏çÊÉ≥Áõ¥Êé•ÂºïÁî®Êüê‰∏™ÂØπË±°ÊàñËÆøÈóÆÊüê‰∏™ÂØπË±°Â≠òÂú®Âõ∞ÈöæÊó∂ÔºåÂèØ‰ª•ÈÄöËøá‰πüÁªô‰ª£ÁêÜÂØπË±°Êù•Èó¥Êé•ËÆøÈóÆÔºõ Ê®°ÂºèÁ§∫‰æã Á§∫‰æãËÉåÊôØ ËÉåÊôØÔºöÂÅáËÆæÂ∏åÊúõ‰π∞‰∏ÄÂè∞ÊúÄÊñ∞ÁöÑÈ°∂ÈÖçMacÁîµËÑë ÂÜ≤Á™ÅÔºöÂõΩÂÜÖËøòÊ≤°‰∏äÔºåÂè™ÊúâÁæéÂõΩÊâçÊúâ Ëß£ÂÜ≥ÊñπÊ°àÔºöÂØªÊâæ‰ª£Ë¥≠ËøõË°åË¥≠‰π∞ Á§∫‰æãÊ≠•È™§ ÈùôÊÄÅ‰ª£ÁêÜ ÂàõÂª∫ÊäΩË±°ÂØπË±°Êé•Âè£(Subject) Â£∞Êòé‰Ω†ÔºàÁúüÂÆûÂØπË±°ÔºâÈúÄË¶ÅËÆ©‰ª£Ë¥≠Ôºà‰ª£ÁêÜÂØπË±°ÔºâÂ∏ÆÂøôÂÅöÁöÑ‰∫ãÔºà‰π∞MacÔºâ 12345678910111213package main.java.com.study.designPatterns.proxy.demoOne;/** * @author: whb * @description: ÊäΩË±°ÂØπË±°Êé•Âè£ÔºåÂ£∞Êòé‰Ω†ÔºàÁúüÂÆûÂØπË±°ÔºâÈúÄË¶ÅËÆ©‰ª£Ë¥≠Ôºà‰ª£ÁêÜÂØπË±°ÔºâÂ∏ÆÂøôÂÅöÁöÑ‰∫ãÔºà‰π∞MacÔºâ */public interface Subject &#123; /** * ‰π∞macÊú¨ */ public void buyMac();&#125; ÂàõÂª∫ÁúüÂÆûÂØπË±°Á±ªÔºàRealSubjectÔºâ 12345678910111213package main.java.com.study.designPatterns.proxy.demoOne;/** * @author: whb * @description: ÁúüÂÆûÂØπË±°Á±ª */public class RealSubject implements Subject &#123; @Override public void buyMac() &#123; System.out.println("‰π∞‰∏ÄÂè∞macÊú¨..."); &#125;&#125; ÂàõÂª∫‰ª£ÁêÜÂØπË±°Á±ª(Proxy) 1234567891011121314151617181920212223242526272829package main.java.com.study.designPatterns.proxy.demoOne;/** * @author: whb * @description: ÂàõÂª∫‰ª£ÁêÜÂØπË±° */public class ProxySubject implements Subject &#123; /** * ÂºïÁî®ÁúüÂÆûÂØπË±°Á§∫‰æã */ private RealSubject realSubject; public ProxySubject(RealSubject realSubject) &#123; this.realSubject = realSubject; &#125; @Override public void buyMac() &#123; //Ë∞ÉÁî®ÁúüÂÆûÂØπË±°ÁöÑÊñπÊ≥ïÔºåËøõË°å‰ª£ÁêÜË¥≠‰π∞ realSubject.buyMac(); //‰ª£ÁêÜÂØπË±°È¢ùÂ§ñÁöÑÊìç‰Ωú this.wrapMac(); &#125; public void wrapMac() &#123; System.out.println("Áî®ÁõíÂ≠êÂåÖË£ÖÂ•Ωmac..."); &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® 12345678910111213package main.java.com.study.designPatterns.proxy.demoOne;/** * @author: whb * @description: ÈùôÊÄÅ‰ª£ÁêÜÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class StaticProxyClient &#123; public static void main(String[] args) &#123; Subject proxy = new StaticProxy(); proxy.buyMac(); &#125;&#125; ‰∏äÈù¢‰ª£Á†ÅÊèèÁªòÁöÑ‰ª£ÁêÜÊ®°ÂºèÔºåÊõ¥Âä†ÁªÜÂàÜÁöÑËØù‰∏ÄËà¨Áß∞‰∏∫ÈùôÊÄÅ‰ª£ÁêÜÊ®°ÂºèÔºå‰∏∫‰ªÄ‰πàÁß∞‰∏∫ÈùôÊÄÅ‰ª£ÁêÜÔºüÂõ†‰∏∫‰ª£ÁêÜÂØπË±°ÈúÄË¶Å‰∏éÁõÆÊ†áÂØπË±°ÂÆûÁé∞‰∏ÄÊ†∑ÁöÑÊé•Âè£Ôºà‰πüÂ∞±ÊòØRealSubjectÂíåProxSubjectÂÆûÁé∞buyMacÊé•Âè£Ôºâ„ÄÇ ÂÅáËÆæÁé∞Âú®ÊúâËøôÁßçÊÉÖÂÜµÔºå‰∏∫‰∫Ü‰øùÂÆàËµ∑ËßÅ‰∏ç‰ªÖÊâæ‰ª£Ë¥≠ÔºåËøòÈÄöËøáÂÖ∂‰ªñÂ§öÁßçÊ∏†ÈÅìË¥≠‰π∞ÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÂ∞±‰ºöÊúâÂæàÂ§ö‰ª£ÁêÜÁ±ªÔºå‰ª£ÁêÜÁ±ªÂ¶ÇÊûúÂ§™Â§ö‰ºöÂá∫Áé∞‰ªÄ‰πàÊ†∑ÁöÑÈóÆÈ¢òÔºü ‰∏ÄÊó¶Êé•Âè£Â¢ûÂä†ÊñπÊ≥ïÔºåÁõÆÊ†áÂØπË±°‰∏é‰ª£ÁêÜÂØπË±°ÈÉΩË¶ÅÁª¥Êä§ÔºåËøôÊ†∑ÁöÑËØù‰ª£Á†ÅÊîπËµ∑Êù•Â∞±Áõ∏ÂΩìÁÉ¶ÁêêÂíåÂÜó‰Ωô„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåJavaÁªôÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏ÄÁßçËß£ÂÜ≥ÊñπÂºèÔºåËøôÁßçËß£ÂÜ≥ÊñπÂºèÂ§ßÂÆ∂‰∏ÄËà¨Áß∞‰∏∫Âä®ÊÄÅ‰ª£ÁêÜ„ÄÇ Âä®ÊÄÅ‰ª£ÁêÜ Âä®ÊÄÅ‰ª£ÁêÜÁöÑÁ±ª 123456789101112131415161718192021222324252627282930313233343536package main.java.com.study.designPatterns.proxy.demoOne;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;/** * @author: whb * @description: Âä®ÊÄÅ‰ª£ÁêÜ */public class DynamicProxy &#123; /** * Áª¥Êä§‰∏Ä‰∏™ÁõÆÊ†áÂØπË±° */ private Object object; public DynamicProxy(Object object) &#123; this.object = object; &#125; /** * ÁªôÁõÆÊ†áÂØπË±°ÁîüÊàê‰ª£ÁêÜÂØπË±° */ public Object getProxyInstance() &#123; return Proxy.newProxyInstance(object.getClass().getClassLoader(), object.getClass().getInterfaces(), new InvocationHandler() &#123; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println("------------ÂºÄÂßãÂä®ÊÄÅ‰ª£ÁêÜ-----------" + "\n"); //ÊâßË°åÁõÆÊ†áÊñπÊ≥ï Object returnValue = method.invoke(object, args); System.out.println("------------ÁªìÊùüÂä®ÊÄÅ‰ª£ÁêÜ-----------"); return returnValue; &#125; &#125;); &#125;&#125; Âä®ÊÄÅ‰ª£ÁêÜÂÆ¢Êà∑Á´ØË∞ÉÁî® 123456789101112131415161718package main.java.com.study.designPatterns.proxy.demoOne;/** * @author: whb * @description: Âä®ÊÄÅ‰ª£ÁêÜÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class DynamicProxyClient &#123; public static void main(String[] args) &#123; //Âä®ÊÄÅ‰ª£ÁêÜÈúÄË¶Å‰º†ÂÖ•Êé•Âè£ÂØπË±°Ôºå‰πüÂ∞±ÊòØÊé•Âè£Â≠êÁ±ª Subject subject = new ProxySubject(new RealSubject()); //Â∞ÜÊé•Âè£Â∫ìÂØπË±°‰º†Ëøõ‰ª£ÁêÜÁ±ªÔºå‰ΩøÁî®‰ª£ÁêÜÊñπÊ≥ï Subject proxy = (Subject) new DynamicProxy(subject).getProxyInstance(); //ÊâßË°åÊñπÊ≥ï„Äê‰ª£ÁêÜÂØπË±°„Äë proxy.buyMac(); &#125;&#125; ËôΩÁÑ∂Áõ∏ÂØπ‰∫éÈùôÊÄÅ‰ª£ÁêÜÔºåÂä®ÊÄÅ‰ª£ÁêÜÂ§ßÂ§ßÂáèÂ∞ë‰∫ÜÊàë‰ª¨ÁöÑÂºÄÂèë‰ªªÂä°ÔºåÂêåÊó∂ÂáèÂ∞ë‰∫ÜÂØπ‰∏öÂä°Êé•Âè£ÁöÑ‰æùËµñÔºåÈôç‰Ωé‰∫ÜËÄ¶ÂêàÂ∫¶„ÄÇ‰ΩÜÊòØËøòÊòØÊúâ‰∏ÄÁÇπÁÇπÂ∞èÂ∞èÁöÑÈÅóÊÜæ‰πãÂ§ÑÔºåÈÇ£Â∞±ÊòØÂÆÉÂßãÁªàÊó†Ê≥ïÊëÜËÑ±‰ªÖÊîØÊåÅinterface‰ª£ÁêÜÁöÑÊ°éÊ¢èÔºåÂõ†‰∏∫ÂÆÉÁöÑËÆæËÆ°Ê≥®ÂÆö‰∫ÜËøô‰∏™ÈÅóÊÜæ„ÄÇÂõûÊÉ≥‰∏Ä‰∏ãÈÇ£‰∫õÂä®ÊÄÅÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ªÁöÑÁªßÊâøÂÖ≥Á≥ªÂõæÔºåÂÆÉ‰ª¨Â∑≤ÁªèÊ≥®ÂÆöÊúâ‰∏Ä‰∏™ÂÖ±ÂêåÁöÑÁà∂Á±ªÂè´Proxy„ÄÇJavaÁöÑÁªßÊâøÊú∫Âà∂Ê≥®ÂÆö‰∫ÜËøô‰∫õÂä®ÊÄÅ‰ª£ÁêÜÁ±ª‰ª¨Êó†Ê≥ïÂÆûÁé∞ÂØπclassÁöÑÂä®ÊÄÅ‰ª£ÁêÜÔºåÂéüÂõ†ÊòØÂ§öÁªßÊâøÂú®Java‰∏≠Êú¨Ë¥®‰∏äÂ∞±Ë°å‰∏çÈÄö„ÄÇ CGLIBÂä®ÊÄÅ‰ª£ÁêÜ JDKÂÆûÁé∞Âä®ÊÄÅ‰ª£ÁêÜÈúÄË¶ÅÂÆûÁé∞Á±ªÈÄöËøáÊé•Âè£ÂÆö‰πâ‰∏öÂä°ÊñπÊ≥ïÔºåÂØπ‰∫éÊ≤°ÊúâÊé•Âè£ÁöÑÁ±ªÔºåÂ¶Ç‰ΩïÂÆûÁé∞Âä®ÊÄÅ‰ª£ÁêÜÂë¢ÔºåËøôÂ∞±ÈúÄË¶ÅCGLib‰∫Ü„ÄÇCGLibÈááÁî®‰∫ÜÈùûÂ∏∏Â∫ïÂ±ÇÁöÑÂ≠óËäÇÁ†ÅÊäÄÊúØÔºåÂÖ∂ÂéüÁêÜÊòØÈÄöËøáÂ≠óËäÇÁ†ÅÊäÄÊúØ‰∏∫‰∏Ä‰∏™Á±ªÂàõÂª∫Â≠êÁ±ªÔºåÂπ∂Âú®Â≠êÁ±ª‰∏≠ÈááÁî®ÊñπÊ≥ïÊã¶Êà™ÁöÑÊäÄÊúØÊã¶Êà™ÊâÄÊúâÁà∂Á±ªÊñπÊ≥ïÁöÑË∞ÉÁî®ÔºåÈ°∫ÂäøÁªáÂÖ•Ê®™ÂàáÈÄªËæë„ÄÇ‰ΩÜÂõ†‰∏∫ÈááÁî®ÁöÑÊòØÁªßÊâøÔºåÊâÄ‰ª•‰∏çËÉΩÂØπfinal‰øÆÈ•∞ÁöÑÁ±ªËøõË°å‰ª£ÁêÜ„ÄÇJDKÂä®ÊÄÅ‰ª£ÁêÜ‰∏éCGLibÂä®ÊÄÅ‰ª£ÁêÜÂùáÊòØÂÆûÁé∞Spring AOPÁöÑÂü∫Á°Ä„ÄÇ CGLIB‰ª£ÁêÜÁ±ª 1234567891011121314151617181920212223242526272829303132package main.java.com.study.designPatterns.proxy.cglibProxy;import net.sf.cglib.proxy.Enhancer;import net.sf.cglib.proxy.MethodInterceptor;import net.sf.cglib.proxy.MethodProxy;import java.lang.reflect.Method;/** * @author: whb * @description: Cglib‰ª£ÁêÜÁ±ª */public class CglibProxy implements MethodInterceptor &#123; private Object target; public Object getInstance(final Object target) &#123; this.target = target; Enhancer enhancer = new Enhancer(); enhancer.setSuperclass(this.target.getClass()); enhancer.setCallback(this); return enhancer.create(); &#125; @Override public Object intercept(Object object, Method method, Object[] args, MethodProxy methodProxy) throws Throwable &#123; System.out.println("----------ÂºÄÂêØ‰∫ãÂä°---------"); Object result = methodProxy.invokeSuper(object, args); System.out.println("-----------ÁªìÊùü‰∫ãÂä°---------"); return result; &#125;&#125; CGLIB‰ª£ÁêÜÊµãËØïÁ±ª 123456789101112131415package main.java.com.study.designPatterns.proxy.cglibProxy;/** * @author: whb * @description: CglibÂä®ÊÄÅ‰ª£ÁêÜÊµãËØï */public class TestCglibProxy &#123; public static void main(String[] args) &#123; UserDao userDao = new UserDaoImpl(); CglibProxy cglibProxy = new CglibProxy(); UserDaoImpl userDaoCglibProxy = (UserDaoImpl) cglibProxy.getInstance(userDao); userDaoCglibProxy.save(); &#125;&#125; CGLIBÂàõÂª∫ÁöÑÂä®ÊÄÅ‰ª£ÁêÜÂØπË±°ÊØîJDKÂàõÂª∫ÁöÑÂä®ÊÄÅ‰ª£ÁêÜÂØπË±°ÁöÑÊÄßËÉΩÊõ¥È´òÔºå‰ΩÜÊòØCGLIBÂàõÂª∫‰ª£ÁêÜÂØπË±°Êó∂ÊâÄËä±Ë¥πÁöÑÊó∂Èó¥Âç¥ÊØîJDKÂ§öÂæóÂ§ö„ÄÇÊâÄ‰ª•ÂØπ‰∫éÂçï‰æãÁöÑÂØπË±°ÔºåÂõ†‰∏∫Êó†ÈúÄÈ¢ëÁπÅÂàõÂª∫ÂØπË±°ÔºåÁî®CGLIBÂêàÈÄÇÔºåÂèç‰πã‰ΩøÁî®JDKÊñπÂºèË¶ÅÊõ¥‰∏∫ÂêàÈÄÇ‰∏Ä‰∫õ„ÄÇÂêåÊó∂Áî±‰∫éCGLibÁî±‰∫éÊòØÈááÁî®Âä®ÊÄÅÂàõÂª∫Â≠êÁ±ªÁöÑÊñπÊ≥ïÔºåÂØπ‰∫éfinal‰øÆÈ•∞ÁöÑÊñπÊ≥ïÊó†Ê≥ïËøõË°å‰ª£ÁêÜ„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java-HashMap„ÄÅConcurrentHashMapËß£Êûê]]></title>
    <url>%2Fposts%2Fbf7c5065.html</url>
    <content type="text"><![CDATA[HashË°® HashË°®‰πüÂè´Êï£ÂàóË°®ÔºåÊòØÊ†πÊçÆÂÖ≥ÈîÆÁ†ÅÂÄº(Key value)ËÄåÁõ¥Êé•ËøõË°åËÆøÈóÆÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂÆÉÈÄöËøáÊääÂÖ≥ÈîÆÁ†ÅÂÄºÊò†Â∞ÑÂà∞Ë°®‰∏≠‰∏Ä‰∏™‰ΩçÁΩÆÊù•ËÆøÈóÆËÆ∞ÂΩïÔºå‰ª•Âä†Âø´Êü•ÊâæÁöÑÈÄüÂ∫¶„ÄÇÂ≠òÊîæËÆ∞ÂΩïÁöÑÊï∞ÁªÑÂè´ÂÅöÂìàÂ∏åË°®„ÄÇ Âú®HashMap‰∏≠ÔºåÂ∞±ÊòØÂ∞ÜÊâÄÁªôÁöÑ‚ÄúÈîÆ‚ÄùÈÄöËøáÂìàÂ∏åÂáΩÊï∞ÂæóÂà∞‚ÄúÁ¥¢Âºï‚ÄùÔºåÁÑ∂ÂêéÊääÂÜÖÂÆπÂ≠òÂú®Êï∞ÁªÑ‰∏≠ÔºåËøôÊ†∑Â∞±ÂΩ¢Êàê‰∫Ü‚ÄúÈîÆ‚ÄùÂíåÂÜÖÂÆπÁöÑÊò†Â∞ÑÂÖ≥Á≥ª„ÄÇ Âú®‰∫ÜËß£ÂìàÂ∏åË°®‰πãÂâçÔºåÂÖàÂ§ßÊ¶Ç‰∫ÜËß£‰∏ãÂÖ∂‰ªñÊï∞ÊçÆÁªìÊûÑÂú®Êñ∞Â¢ûÔºåÊü•ÊâæÁ≠âÂü∫Á°ÄÊìç‰ΩúÊâßË°åÊÄßËÉΩÔºö Êï∞ÁªÑÔºöÈááÁî®‰∏ÄÊÆµËøûÁª≠ÁöÑÂ≠òÂÇ®ÂçïÂÖÉÊù•Â≠òÂÇ®Êï∞ÊçÆ„ÄÇÂØπ‰∫éÊåáÂÆö‰∏ãÊ†áÁöÑÊü•ÊâæÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(1)ÔºõÈÄöËøáÁªôÂÆöÂÄºËøõË°åÊü•ÊâæÔºåÈúÄË¶ÅÈÅçÂéÜÊï∞ÁªÑÔºåÈÄê‰∏ÄÊØîÂØπÁªôÂÆöÂÖ≥ÈîÆÂ≠óÂíåÊï∞ÁªÑÂÖÉÁ¥†ÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n)ÔºåÂΩìÁÑ∂ÔºåÂØπ‰∫éÊúâÂ∫èÊï∞ÁªÑÔºåÂàôÂèØÈááÁî®‰∫åÂàÜÊü•ÊâæÔºåÊèíÂÄºÊü•ÊâæÔºåÊñêÊ≥¢ÈÇ£Â•ëÊü•ÊâæÁ≠âÊñπÂºèÔºåÂèØÂ∞ÜÊü•ÊâæÂ§çÊùÇÂ∫¶ÊèêÈ´ò‰∏∫O(logn)ÔºõÂØπ‰∫é‰∏ÄËà¨ÁöÑÊèíÂÖ•Âà†Èô§Êìç‰ΩúÔºåÊ∂âÂèäÂà∞Êï∞ÁªÑÂÖÉÁ¥†ÁöÑÁßªÂä®ÔºåÂÖ∂Âπ≥ÂùáÂ§çÊùÇÂ∫¶‰πü‰∏∫O(n)„ÄÇÂØπÂ∫îÂà∞ÈõÜÂêàÂÆûÁé∞Ôºå‰ª£Ë°®Â∞±ÊòØArrayList„ÄÇ Á∫øÊÄßÈìæË°®ÔºöÂØπ‰∫éÈìæË°®ÁöÑÊñ∞Â¢ûÔºåÂà†Èô§Á≠âÊìç‰ΩúÔºàÂú®ÊâæÂà∞ÊåáÂÆöÊìç‰Ωú‰ΩçÁΩÆÂêéÔºâÔºå‰ªÖÈúÄÂ§ÑÁêÜÁªìÁÇπÈó¥ÁöÑÂºïÁî®Âç≥ÂèØÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(1)ÔºåËÄåÊü•ÊâæÊìç‰ΩúÈúÄË¶ÅÈÅçÂéÜÈìæË°®ÈÄê‰∏ÄËøõË°åÊØîÂØπÔºåÂ§çÊùÇÂ∫¶‰∏∫O(n)„ÄÇÂØπÂ∫îÁöÑÈõÜÂêàÁ±ªÊòØLinkedList„ÄÇ ‰∫åÂèâÊ†ëÔºöÂØπ‰∏ÄÊ£µÁõ∏ÂØπÂπ≥Ë°°ÁöÑÊúâÂ∫è‰∫åÂèâÊ†ëÔºåÂØπÂÖ∂ËøõË°åÊèíÂÖ•ÔºåÊü•ÊâæÔºåÂà†Èô§Á≠âÊìç‰ΩúÔºåÂπ≥ÂùáÂ§çÊùÇÂ∫¶Âùá‰∏∫O(logn)„ÄÇÂØπÂ∫îÁöÑÈõÜÂêàÁ±ªÊúâTreeSetÂíåTreeMap„ÄÇ ÂìàÂ∏åË°®ÔºöÁõ∏ÊØî‰∏äËø∞Âá†ÁßçÊï∞ÊçÆÁªìÊûÑÔºåÂú®ÂìàÂ∏åË°®‰∏≠ËøõË°åÊ∑ªÂä†ÔºåÂà†Èô§ÔºåÊü•ÊâæÁ≠âÊìç‰ΩúÔºåÊÄßËÉΩÂçÅÂàÜ‰πãÈ´òÔºå‰∏çËÄÉËôëÂìàÂ∏åÂÜ≤Á™ÅÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ªÖÈúÄ‰∏ÄÊ¨°ÂÆö‰ΩçÂç≥ÂèØÂÆåÊàêÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(1)„ÄÇÂØπÂ∫îÁöÑÈõÜÂêàÁ±ªÂ∞±ÊòØHashMap„ÄÇ ÂìàÂ∏åË°®ÁöÑ‰∏ªÂπ≤ÊòØÊï∞ÁªÑ„ÄÇË¶ÅÊñ∞Â¢ûÊàñÊü•ÊâæÊüê‰∏™ÂÖÉÁ¥†ÔºåÈÄöËøáÊääÂΩìÂâçÂÖÉÁ¥†ÁöÑÂÖ≥ÈîÆÂ≠ó ÈÄöËøáÊüê‰∏™ÂáΩÊï∞Êò†Â∞ÑÂà∞Êï∞ÁªÑ‰∏≠ÁöÑÊüê‰∏™‰ΩçÁΩÆÔºåÈÄöËøáÊï∞ÁªÑ‰∏ãÊ†á‰∏ÄÊ¨°ÂÆö‰ΩçÂ∞±ÂèØÂÆåÊàêÊìç‰Ωú„ÄÇÂç≥Ôºö 1Â≠òÂÇ®‰ΩçÁΩÆ = f(ÂÖ≥ÈîÆÂ≠ó) ÂÖ∂‰∏≠ÔºåËøô‰∏™ÂáΩÊï∞f‰∏ÄËà¨Áß∞‰∏∫ÂìàÂ∏åÂáΩÊï∞ÔºåËøô‰∏™ÂáΩÊï∞ÁöÑËÆæËÆ°Â•ΩÂùè‰ºöÁõ¥Êé•ÂΩ±ÂìçÂà∞ÂìàÂ∏åË°®ÁöÑ‰ºòÂä£„ÄÇËøô‰ºöÊ∂âÂèäÂà∞ÂìàÂ∏åÂÜ≤Á™Å„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºåÊØîÂ¶ÇË¶ÅÂú®ÂìàÂ∏åË°®‰∏≠ÊâßË°åÊèíÂÖ•Êìç‰ΩúÔºö Êü•ÊâæÊìç‰ΩúÂêåÁêÜÔºåÂÖàÈÄöËøáÂìàÂ∏åÂáΩÊï∞ËÆ°ÁÆóÂá∫ÂÆûÈôÖÂ≠òÂÇ®Âú∞ÂùÄÔºåÁÑ∂Âêé‰ªéÊï∞ÁªÑ‰∏≠ÂØπÂ∫îÂú∞ÂùÄÂèñÂá∫Âç≥ÂèØ„ÄÇ ÂΩìÊàë‰ª¨ÂØπÊüê‰∏™ÂÖÉÁ¥†ËøõË°åÂìàÂ∏åËøêÁÆóÔºåÂæóÂà∞‰∏Ä‰∏™Â≠òÂÇ®Âú∞ÂùÄÔºåÁÑ∂ÂêéË¶ÅËøõË°åÊèíÂÖ•ÁöÑÊó∂ÂÄôÔºåÂèëÁé∞Â∑≤ÁªèË¢´ÂÖ∂‰ªñÂÖÉÁ¥†Âç†Áî®‰∫ÜÔºåÂÖ∂ÂÆûËøôÂ∞±ÊòØÊâÄË∞ìÁöÑÂìàÂ∏åÂÜ≤Á™ÅÔºå‰πüÂè´ÂìàÂ∏åÁ¢∞Êíû„ÄÇÂìàÂ∏åÂáΩÊï∞ÁöÑËÆæËÆ°Ëá≥ÂÖ≥ÈáçË¶ÅÔºåÂ•ΩÁöÑÂìàÂ∏åÂáΩÊï∞‰ºöÂ∞ΩÂèØËÉΩÂú∞‰øùËØÅËÆ°ÁÆóÁÆÄÂçïÂíåÊï£ÂàóÂú∞ÂùÄÂàÜÂ∏ÉÂùáÂåÄ„ÄÇ‰ΩÜÊòØÔºåÊï∞ÁªÑÊòØ‰∏ÄÂùóËøûÁª≠ÁöÑÂõ∫ÂÆöÈïøÂ∫¶ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂÜçÂ•ΩÁöÑÂìàÂ∏åÂáΩÊï∞‰πü‰∏çËÉΩ‰øùËØÅÂæóÂà∞ÁöÑÂ≠òÂÇ®Âú∞ÂùÄÁªùÂØπ‰∏çÂèëÁîüÂÜ≤Á™Å„ÄÇÈÇ£‰πàÂìàÂ∏åÂÜ≤Á™ÅÂ¶Ç‰ΩïËß£ÂÜ≥Âë¢ÔºüÂìàÂ∏åÂÜ≤Á™ÅÁöÑËß£ÂÜ≥ÊñπÊ°àÊúâÂ§öÁßç:ÂºÄÊîæÂÆöÂùÄÊ≥ïÔºàÂèëÁîüÂÜ≤Á™ÅÔºåÁªßÁª≠ÂØªÊâæ‰∏ã‰∏ÄÂùóÊú™Ë¢´Âç†Áî®ÁöÑÂ≠òÂÇ®Âú∞ÂùÄÔºâ„ÄÅÂÜçÊï£ÂàóÂáΩÊï∞Ê≥ï„ÄÅÈìæÂú∞ÂùÄÊ≥ï„ÄÇËÄåHashMapÂç≥ÊòØÈááÁî®‰∫ÜÈìæÂú∞ÂùÄÊ≥ïÔºå‰πüÂ∞±ÊòØÊï∞ÁªÑ+ÈìæË°®ÁöÑÊñπÂºè„ÄÇ ÁÆÄÂçïÊù•ËØ¥ÔºåHashMapÁî±Êï∞ÁªÑ+ÈìæË°®ÁªÑÊàêÁöÑÔºåÊï∞ÁªÑÊòØHashMapÁöÑ‰∏ª‰ΩìÔºåÈìæË°®ÂàôÊòØ‰∏ªË¶Å‰∏∫‰∫ÜËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™ÅËÄåÂ≠òÂú®ÁöÑÔºåÂ¶ÇÊûúÂÆö‰ΩçÂà∞ÁöÑÊï∞ÁªÑ‰ΩçÁΩÆ‰∏çÂê´ÈìæË°®ÔºàÂΩìÂâçentryÁöÑnextÊåáÂêënullÔºâ,ÈÇ£‰πàÂØπ‰∫éÊü•ÊâæÔºåÊ∑ªÂä†Á≠âÊìç‰ΩúÂæàÂø´Ôºå‰ªÖÈúÄ‰∏ÄÊ¨°ÂØªÂùÄÂç≥ÂèØÔºõÂ¶ÇÊûúÂÆö‰ΩçÂà∞ÁöÑÊï∞ÁªÑÂåÖÂê´ÈìæË°®ÔºåÂØπ‰∫éÊ∑ªÂä†Êìç‰ΩúÔºåÂÖ∂Êó∂Èó¥Â§çÊùÇÂ∫¶‰æùÁÑ∂‰∏∫O(1)ÔºåÂõ†‰∏∫ÊúÄÊñ∞ÁöÑEntry‰ºöÊèíÂÖ•ÈìæË°®Â§¥ÈÉ®ÔºåÊÄ•ÈúÄË¶ÅÁÆÄÂçïÊîπÂèòÂºïÁî®ÈìæÂç≥ÂèØÔºåËÄåÂØπ‰∫éÊü•ÊâæÊìç‰ΩúÊù•ËÆ≤ÔºåÊ≠§Êó∂Â∞±ÈúÄË¶ÅÈÅçÂéÜÈìæË°®ÔºåÁÑ∂ÂêéÈÄöËøákeyÂØπË±°ÁöÑequalsÊñπÊ≥ïÈÄê‰∏ÄÊØîÂØπÊü•Êâæ„ÄÇÊâÄ‰ª•ÔºåÊÄßËÉΩËÄÉËôëÔºåHashMap‰∏≠ÁöÑÈìæË°®Âá∫Áé∞Ë∂äÂ∞ëÔºåÊÄßËÉΩÊâç‰ºöË∂äÂ•Ω„ÄÇ HashMap-Jdk1.7 Á±ªÂÆö‰πâ 123public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable ÁÆÄ‰ªã ÁªßÊâøAbstractMapÊäΩË±°Á±ªÔºõ ÂÆûÁé∞MapÊé•Âè£ÔºåÊã•Êúâ‰∏ÄÁªÑMapÈÄöÁî®Êìç‰ΩúÔºõ ÂÆûÁé∞CloneableÊé•Âè£ÔºåÂèØËøõË°åÊã∑Ë¥ùÔºàÊµÖÊã∑Ë¥ùÔºâÔºõ ÂÆûÁé∞‰∫ÜSerializableÊé•Âè£ÔºåÂèØÂÆûÁé∞Â∫èÂàóÂåñÔºõ ÂÖÅËÆ∏ÈîÆ/ÂÄº‰∏∫Á©∫ÂØπË±°ÔºànullÔºâÔºõ ÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂèØÈÄöËøáCollectionsÁ±ªÁöÑÈùôÊÄÅÊñπÊ≥ïsynchronizedMapËé∑ÂæóÁ∫øÁ®ãÂÆâÂÖ®ÁöÑHashMapÔºõ ‰∏ç‰øùËØÅÊúâÂ∫èÊÄßÔºàÂ¶ÇÊèíÂÖ•È°∫Â∫èÔºâÔºå‰πü‰∏ç‰øùËØÅÈ°∫Â∫è‰∏çÈöèÊó∂Èó¥ÂèòÂåñÔºõ Êï∞ÊçÆÁªìÊûÑ HashMap ÈááÁî®ÁöÑÊï∞ÊçÆÁªìÊûÑ = Êï∞ÁªÑÔºà‰∏ªÔºâ + ÂçïÈìæË°®ÔºàÂâØÔºâÔºåËØ•ÁªìÊûÑÂèàÁß∞ÊãâÈìæÊ≥ïÔºåÂÖ∑‰ΩìÊèèËø∞Â¶Ç‰∏ã: ÂΩìÂÆû‰æãÂåñ‰∏Ä‰∏™HashMapÊó∂ÔºåÁ≥ªÁªü‰ºöÂàõÂª∫‰∏Ä‰∏™ÈïøÂ∫¶‰∏∫CapacityÁöÑEntryÊï∞ÁªÑÔºåËøô‰∏™ÈïøÂ∫¶Ë¢´Áß∞‰∏∫ÂÆπÈáè(Capacity)ÔºåÂú®Ëøô‰∏™Êï∞ÁªÑ‰∏≠ÂèØ‰ª•Â≠òÊîæÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆÁß∞‰πã‰∏∫‚ÄúÊ°∂‚Äù(bucket)ÔºåÊØè‰∏™bucketÈÉΩÊúâËá™Â∑±ÁöÑÁ¥¢ÂºïÔºåÁ≥ªÁªüÂèØ‰ª•Ê†πÊçÆÁ¥¢ÂºïÂø´ÈÄüÁöÑÊü•Êâæbucket‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇ ÊØè‰∏™bucket‰∏≠Â≠òÂÇ®‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂç≥‰∏Ä‰∏™EntryÂØπË±°Ôºå‰ΩÜÊØè‰∏Ä‰∏™EntryÂØπË±°ÂèØ‰ª•Â∏¶‰∏Ä‰∏™ÂºïÁî®ÂèòÈáèÔºåÁî®‰∫éÊåáÂêë‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂõ†Ê≠§ÔºåÂú®‰∏Ä‰∏™Ê°∂‰∏≠ÔºåÂ∞±ÊúâÂèØËÉΩÁîüÊàê‰∏Ä‰∏™EntryÈìæ„ÄÇ EntryÊòØHashMapÁöÑÂü∫Êú¨ÁªÑÊàêÂçïÂÖÉÔºåÊØè‰∏Ä‰∏™EntryÂåÖÂê´‰∏Ä‰∏™key-valueÈîÆÂÄºÂØπ„ÄÇ EntryÊòØHashMap‰∏≠ÁöÑ‰∏Ä‰∏™ÈùôÊÄÅÂÜÖÈÉ®Á±ª„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081/** * EntryÁ±ªÂÆûÁé∞‰∫ÜMap.EntryÊé•Âè£ * Âç≥ ÂÆûÁé∞‰∫ÜgetKey()„ÄÅgetValue()„ÄÅequals(Object o)ÂíåhashCode()Á≠âÊñπÊ≥ï**/ static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final K key; // ÈîÆ V value; // ÂÄº Entry&lt;K,V&gt; next; // ÊåáÂêë‰∏ã‰∏Ä‰∏™ÁªìÁÇπ Ôºå‰πüÊòØ‰∏Ä‰∏™EntryÂØπË±°Ôºå‰ªéËÄåÂΩ¢ÊàêËß£ÂÜ≥hashÂÜ≤Á™ÅÁöÑÂçïÈìæË°® int hash; // ÂØπkeyÁöÑhashcodeÂÄºËøõË°åhashËøêÁÆóÂêéÂæóÂà∞ÁöÑÂÄºÔºåÂ≠òÂÇ®Âú®EntryÔºåÈÅøÂÖçÈáçÂ§çËÆ°ÁÆó /** * ÊûÑÈÄ†ÊñπÊ≥ïÔºåÂàõÂª∫‰∏Ä‰∏™Entry * ÂèÇÊï∞ÔºöÂìàÂ∏åÂÄºhÔºåÈîÆÂÄºkÔºåÂÄºv„ÄÅ‰∏ã‰∏Ä‰∏™ÁªìÁÇπn */ Entry(int h, K k, V v, Entry&lt;K,V&gt; n) &#123; value = v; next = n; key = k; hash = h; &#125; // ËøîÂõû ‰∏é Ê≠§È°π ÂØπÂ∫îÁöÑÈîÆ public final K getKey() &#123; return key; &#125; // ËøîÂõû ‰∏é Ê≠§È°π ÂØπÂ∫îÁöÑÂÄº public final V getValue() &#123; return value; &#125; public final V setValue(V newValue) &#123; V oldValue = value; value = newValue; return oldValue; &#125; /** * Âà§Êñ≠2‰∏™EntryÊòØÂê¶Áõ∏Á≠âÔºåÂøÖÈ°ªkeyÂíåvalueÈÉΩÁõ∏Á≠âÔºåÊâçËøîÂõûtrue */ public final boolean equals(Object o) &#123; if (!(o instanceof Map.Entry)) return false; Map.Entry e = (Map.Entry)o; Object k1 = getKey(); Object k2 = e.getKey(); if (k1 == k2 || (k1 != null &amp;&amp; k1.equals(k2))) &#123; Object v1 = getValue(); Object v2 = e.getValue(); if (v1 == v2 || (v1 != null &amp;&amp; v1.equals(v2))) return true; &#125; return false; &#125; /** * hashCodeÔºàÔºâ */ public final int hashCode() &#123; return Objects.hashCode(getKey()) ^ Objects.hashCode(getValue()); &#125; public final String toString() &#123; return getKey() + "=" + getValue(); &#125; /** * ÂΩìÂêëHashMap‰∏≠Ê∑ªÂä†ÂÖÉÁ¥†Êó∂ÔºåÂç≥Ë∞ÉÁî®put(k,v)Êó∂Ôºå * ÂØπÂ∑≤ÁªèÂú®HashMap‰∏≠k‰ΩçÁΩÆËøõË°åvÁöÑË¶ÜÁõñÊó∂Ôºå‰ºöË∞ÉÁî®Ê≠§ÊñπÊ≥ï * Ê≠§Â§ÑÊ≤°ÂÅö‰ªª‰ΩïÂ§ÑÁêÜ */ void recordAccess(HashMap&lt;K,V&gt; m) &#123; &#125; /** * ÂΩì‰ªéHashMap‰∏≠Âà†Èô§‰∫Ü‰∏Ä‰∏™EntryÊó∂Ôºå‰ºöË∞ÉÁî®ËØ•ÂáΩÊï∞ * Ê≠§Â§ÑÊ≤°ÂÅö‰ªª‰ΩïÂ§ÑÁêÜ */ void recordRemoval(HashMap&lt;K,V&gt; m) &#123; &#125; &#125; ÊâÄ‰ª•ÔºåHashMapÁöÑÊï¥‰ΩìÁªìÊûÑÂ¶Ç‰∏ãÔºö ÈáçË¶ÅÂ±ûÊÄß 12345678910111213141516171819202122232425262728293031323334353637// 1. ÂÆπÈáèÔºàcapacityÔºâÔºö HashMap‰∏≠Êï∞ÁªÑÁöÑÈïøÂ∫¶// a. ÂÆπÈáèËåÉÂõ¥ÔºöÂøÖÈ°ªÊòØ2ÁöÑÂπÇ &amp; &lt;ÊúÄÂ§ßÂÆπÈáèÔºà2ÁöÑ30Ê¨°ÊñπÔºâ// b. ÂàùÂßãÂÆπÈáè = ÂìàÂ∏åË°®ÂàõÂª∫Êó∂ÁöÑÂÆπÈáè// ÈªòËÆ§ÂÆπÈáè = 16 = 1&lt;&lt;4 = 00001‰∏≠ÁöÑ1ÂêëÂ∑¶Áßª4‰Ωç = 10000 = ÂçÅËøõÂà∂ÁöÑ2^4=16static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; //ÊúÄÂ§ßÂÆπÈáè = 2ÁöÑ30Ê¨°ÊñπÔºàËã•‰º†ÂÖ•ÁöÑÂÆπÈáèËøáÂ§ßÔºåÂ∞ÜË¢´ÊúÄÂ§ßÂÄºÊõøÊç¢Ôºâ static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30; // 2. Âä†ËΩΩÂõ†Â≠ê(Load factor)ÔºöHashMapÂú®ÂÖ∂ÂÆπÈáèËá™Âä®Â¢ûÂä†ÂâçÂèØËææÂà∞Â§öÊª°ÁöÑ‰∏ÄÁßçÂ∞∫Â∫¶// a. Âä†ËΩΩÂõ†Â≠êË∂äÂ§ß„ÄÅÂ°´Êª°ÁöÑÂÖÉÁ¥†Ë∂äÂ§ö = Á©∫Èó¥Âà©Áî®ÁéáÈ´ò„ÄÅ‰ΩÜÂÜ≤Á™ÅÁöÑÊú∫‰ºöÂä†Â§ß„ÄÅÊü•ÊâæÊïàÁéáÂèò‰ΩéÔºàÂõ†‰∏∫ÈìæË°®ÂèòÈïø‰∫ÜÔºâ// b. Âä†ËΩΩÂõ†Â≠êË∂äÂ∞è„ÄÅÂ°´Êª°ÁöÑÂÖÉÁ¥†Ë∂äÂ∞ë = Á©∫Èó¥Âà©Áî®ÁéáÂ∞è„ÄÅÂÜ≤Á™ÅÁöÑÊú∫‰ºöÂáèÂ∞è„ÄÅÊü•ÊâæÊïàÁéáÈ´òÔºàÈìæË°®‰∏çÈïøÔºâ// ÂÆûÈôÖÂä†ËΩΩÂõ†Â≠êfinal float loadFactor;//ÈªòËÆ§Ë£ÖËΩΩÂõ†Â≠ê = 0.75 static final float DEFAULT_LOAD_FACTOR = 0.75f; // 3. Êâ©ÂÆπÈòàÂÄºÔºàthresholdÔºâÔºöÂΩìÂìàÂ∏åË°®ÁöÑÂ§ßÂ∞è ‚â• Êâ©ÂÆπÈòàÂÄºÊó∂ÔºåÂ∞±‰ºöÊâ©ÂÆπÂìàÂ∏åË°®ÔºàÂç≥Êâ©ÂÖÖHashMapÁöÑÂÆπÈáèÔºâ // a. Êâ©ÂÆπ = ÂØπÂìàÂ∏åË°®ËøõË°åresizeÊìç‰ΩúÔºàÂç≥ÈáçÂª∫ÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑÔºâÔºå‰ªéËÄåÂìàÂ∏åË°®Â∞ÜÂÖ∑ÊúâÂ§ßÁ∫¶‰∏§ÂÄçÁöÑÊ°∂Êï∞// b. Êâ©ÂÆπÈòàÂÄº = ÂÆπÈáè x Âä†ËΩΩÂõ†Â≠êint threshold; // Â≠òÂÇ®Êï∞ÊçÆÁöÑEntryÁ±ªÂûã Êï∞ÁªÑÔºåÈïøÂ∫¶ = 2ÁöÑÂπÇ// HashMapÁöÑÂÆûÁé∞ÊñπÂºè = ÊãâÈìæÊ≥ïÔºåEntryÊï∞ÁªÑ‰∏äÁöÑÊØè‰∏™ÂÖÉÁ¥†Êú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™ÂçïÂêëÈìæË°®transient Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE; //HashMapÂÜÖÈÉ®ÁöÑÂ≠òÂÇ®ÁªìÊûÑÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÊ≠§Â§ÑÊï∞ÁªÑ‰∏∫Á©∫ÔºåÂç≥Ê≤°ÊúâÂàùÂßãÂåñ‰πãÂâçÁöÑÁä∂ÊÄÅ static final Entry&lt;?,?&gt;[] EMPTY_TABLE = &#123;&#125;; //ÂÆûÈôÖÂ≠òÂÇ®ÁöÑkey-valueÈîÆÂÄºÂØπÁöÑ‰∏™Êï∞transient int size;//Áî®‰∫éÂø´ÈÄüÂ§±Ë¥•ÔºåÁî±‰∫éHashMapÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂú®ÂØπHashMapËøõË°åËø≠‰ª£Êó∂ÔºåÂ¶ÇÊûúÊúüÈó¥ÂÖ∂‰ªñÁ∫øÁ®ãÁöÑÂèÇ‰∏éÂØºËá¥HashMapÁöÑÁªìÊûÑÂèëÁîüÂèòÂåñ‰∫ÜÔºàÊØîÂ¶ÇputÔºåremoveÁ≠âÊìç‰ΩúÔºâÔºåÈúÄË¶ÅÊäõÂá∫ÂºÇÂ∏∏ConcurrentModificationExceptiontransient int modCount;//ÈªòËÆ§ÁöÑthresholdÂÄº static final int ALTERNATIVE_HASHING_THRESHOLD_DEFAULT = Integer.MAX_VALUE; Âä†ËΩΩÂõ†Â≠êËØ¶Ëø∞ Âä†ËΩΩÂõ†Â≠êËøáÂ§ß Â°´ÂÖÖÁöÑÂÖÉÁ¥†Ë∂äÂ§öÔºåÁ©∫Èó¥Âà©Áî®Áéá‰πüÂ∞±Ë∂äÈ´òÔºõ ÂÜ≤Á™ÅÊ¶ÇÁéáÂä†Â§ßÔºåÈìæË°®ËæπÈïøÔºåÊü•ÊâæÊïàÁéáÂèòÂ∞èÔºõ Âä†ËΩΩÂõ†Â≠êËøáÂ∞è ÂÜ≤Á™ÅÊ¶ÇÁéáÂáèÂ∞èÔºåÈìæË°®ÂèòÁü≠ÔºåÊü•ÊâæÊïàÁéáÂèòÈ´òÔºõ Â°´ÂÖÖÁöÑÂÖÉÁ¥†Ë∂äÂ∞ëÔºåÁ©∫Èó¥Âà©Áî®ÁéáË∂ä‰ΩéÔºõ ‰ΩøÁî®Âª∫ËÆÆ Âú®Êü•ÊâæÊïàÁéá&amp;Á©∫Èó¥Âà©Áî®Áéá‰πãÈó¥ÂØªÊâæ‰∏ÄÁßçÂπ≥Ë°°ÔºåÂç≥ÊâÄË∞ìÁöÑ‚ÄúÁ©∫Èó¥ÊïàÁéáÊç¢Êó∂Èó¥ÊïàÁéá‚Äù or &quot;Êó∂Èó¥ÊïàÁéáÊç¢Á©∫Èó¥ÊïàÁéá&quot;Ôºõ Ëã•Á©∫Èó¥ÂÜÖÂ≠òÂÖÖË∂≥ÔºåÂèØÈÄâÊã©‚ÄúÁ©∫Èó¥ÊïàÁéáÊç¢Êó∂Èó¥ÊïàÁéá‚ÄùÁ≠ñÁï•ÔºåÂç≥ÈÄöËøáËÆæÁΩÆËøáÂ∞èÁöÑÂä†ËΩΩÂõ†Â≠êÊèêÈ´òÊü•ËØ¢ÈÄüÂ∫¶Ôºå‰ΩÜ‰πüË¶ÅËÄÉËôëÈ¢ëÁπÅÊâ©ÂÆπÂ∏¶Êù•ÁöÑÊÄßËÉΩÊçüËÄóÔºõ Ëã•Á©∫Èó¥ÂÜÖÂ≠ò‰∏çË∂≥ÔºåÂèØÈÄâÊã©‚ÄúÊó∂Èó¥ÊïàÁéáÊç¢Á©∫Èó¥ÊïàÁéá‚ÄùÁ≠ñÁï•ÔºåÂç≥ÈÄöËøáËÆæÁΩÆËøáÂ§ßÁöÑÂä†ËΩΩÂõ†Â≠êÊèêÈ´òÁ©∫Èó¥Âà©Áî®ÁéáÔºå‰ΩÜÁâ∫Áâ≤‰∫ÜÊü•ËØ¢ÈÄüÁéáÔºõ Âä†ËΩΩÂõ†Â≠êÂèØËá™ÂÆö‰πâ‰øÆÊîπÔºå‰ΩÜÈùûÁâπÊÆäÊÉÖÂÜµ‰∏çÂª∫ËÆÆ‰øÆÊîπÔºàÈªòËÆ§ÂÄº=0.75ÔºâÔºõ ÊûÑÈÄ†ÊñπÊ≥ï HashMapÊúâ4‰∏™ÊûÑÈÄ†Âô®ÔºåÂÖ∂‰ªñÊûÑÈÄ†Âô®Â¶ÇÊûúÁî®Êà∑Ê≤°Êúâ‰º†ÂÖ•initialCapacity ÂíåloadFactorËøô‰∏§‰∏™ÂèÇÊï∞Ôºå‰ºö‰ΩøÁî®ÈªòËÆ§ÂÄº„ÄÇinitialCapacityÈªòËÆ§‰∏∫16ÔºåloadFactoryÈªòËÆ§‰∏∫0.75„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253//ËÆ°ÁÆóHashÂÄºÊó∂ÁöÑkey transient int hashSeed = 0; /** * ÊûÑÈÄ†ÂáΩÊï∞1ÔºöÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºàÊó†ÂèÇÔºâ * Âä†ËΩΩÂõ†Â≠ê &amp; ÂÆπÈáè = ÈªòËÆ§ = 0.75„ÄÅ16 */ public HashMap() &#123; // ÂÆûÈôÖ‰∏äÊòØË∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞3ÔºöÊåáÂÆö‚ÄúÂÆπÈáèÂ§ßÂ∞è‚ÄùÂíå‚ÄúÂä†ËΩΩÂõ†Â≠ê‚ÄùÁöÑÊûÑÈÄ†ÂáΩÊï∞ // ‰º†ÂÖ•ÁöÑÊåáÂÆöÂÆπÈáè &amp; Âä†ËΩΩÂõ†Â≠ê = ÈªòËÆ§ this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR); &#125; /** * ÊûÑÈÄ†ÂáΩÊï∞2ÔºöÊåáÂÆö‚ÄúÂÆπÈáèÂ§ßÂ∞è‚ÄùÁöÑÊûÑÈÄ†ÂáΩÊï∞ * Âä†ËΩΩÂõ†Â≠ê = ÈªòËÆ§ = 0.75 „ÄÅÂÆπÈáè = ÊåáÂÆöÂ§ßÂ∞è */ public HashMap(int initialCapacity) &#123; // ÂÆûÈôÖ‰∏äÊòØË∞ÉÁî®ÊåáÂÆö‚ÄúÂÆπÈáèÂ§ßÂ∞è‚ÄùÂíå‚ÄúÂä†ËΩΩÂõ†Â≠ê‚ÄùÁöÑÊûÑÈÄ†ÂáΩÊï∞ // Âè™ÊòØÂú®‰º†ÂÖ•ÁöÑÂä†ËΩΩÂõ†Â≠êÂèÇÊï∞ = ÈªòËÆ§Âä†ËΩΩÂõ†Â≠ê this(initialCapacity, DEFAULT_LOAD_FACTOR); &#125; /** * ÊûÑÈÄ†ÂáΩÊï∞3ÔºöÊåáÂÆö‚ÄúÂÆπÈáèÂ§ßÂ∞è‚ÄùÂíå‚ÄúÂä†ËΩΩÂõ†Â≠ê‚ÄùÁöÑÊûÑÈÄ†ÂáΩÊï∞ * Âä†ËΩΩÂõ†Â≠ê &amp; ÂÆπÈáè = Ëá™Â∑±ÊåáÂÆö */ public HashMap(int initialCapacity, float loadFactor) &#123; if (initialCapacity &lt; 0)//ÂèÇÊï∞ÊúâÊïàÊÄßÊ£ÄÊü• throw new IllegalArgumentException("Illegal initial capacity: " + initialCapacity); if (initialCapacity &gt; MAXIMUM_CAPACITY)//ÂèÇÊï∞ÊúâÊïàÊÄßÊ£ÄÊü• initialCapacity = MAXIMUM_CAPACITY; if (loadFactor &lt;= 0 || Float.isNaN(loadFactor))//ÂèÇÊï∞ÊúâÊïàÊÄßÊ£ÄÊü• throw new IllegalArgumentException("Illegal load factor: " + loadFactor); // ËÆæÁΩÆ Âä†ËΩΩÂõ†Â≠ê this.loadFactor = loadFactor; // ËÆæÁΩÆ Êâ©ÂÆπÈòàÂÄº = ÂàùÂßãÂÆπÈáè threshold = initialCapacity; init();//initÊñπÊ≥ïÂú®HashMap‰∏≠Ê≤°ÊúâÂÆûÈôÖÂÆûÁé∞Ôºå‰∏çËøáÂú®ÂÖ∂Â≠êÁ±ªÂ¶Ç linkedHashMap‰∏≠Â∞±‰ºöÊúâÂØπÂ∫îÂÆûÁé∞&#125; /** * ÊûÑÈÄ†ÂáΩÊï∞4ÔºöÂåÖÂê´‚ÄúÂ≠êMap‚ÄùÁöÑÊûÑÈÄ†ÂáΩÊï∞ * Âç≥ ÊûÑÈÄ†Âá∫Êù•ÁöÑHashMapÂåÖÂê´‰º†ÂÖ•MapÁöÑÊò†Â∞ÑÂÖ≥Á≥ª * Âä†ËΩΩÂõ†Â≠ê &amp; ÂÆπÈáè = ÈªòËÆ§ */ public HashMap(Map&lt;? extends K, ? extends V&gt; m) &#123; // ËÆæÁΩÆÂÆπÈáèÂ§ßÂ∞è &amp; Âä†ËΩΩÂõ†Â≠ê = ÈªòËÆ§ this(Math.max((int) (m.size() / DEFAULT_LOAD_FACTOR) + 1, DEFAULT_INITIAL_CAPACITY), DEFAULT_LOAD_FACTOR); inflateTable(threshold);//ÂàùÂßãÂåñHashMapÂ∫ïÂ±ÇÁöÑÊï∞ÁªÑÁªìÊûÑ putAllForCreate(m);//Ê∑ªÂä†m‰∏≠ÁöÑÂÖÉÁ¥† &#125; Âú®Â∏∏ËßÑÊûÑÈÄ†Âô®‰∏≠ÔºåÂπ∂Ê≤°ÊúâÈ©¨‰∏ä‰∏∫Êï∞ÁªÑtableÂàÜÈÖçÂÜÖÂ≠òÁ©∫Èó¥ÔºàÊúâ‰∏Ä‰∏™ÂÖ•ÂèÇ‰∏∫ÊåáÂÆöMapÁöÑÊûÑÈÄ†Âô®‰æãÂ§ñÔºâÔºå‰∫ãÂÆû‰∏äÊòØÂú®ÊâßË°åÁ¨¨‰∏ÄÊ¨°putÊìç‰ΩúÁöÑÊó∂ÂÄôÊâçÁúüÊ≠£ÊûÑÂª∫tableÊï∞ÁªÑ„ÄÇ putÊìç‰Ωú Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637public V put(K key, V value) // 1. Ëã•ÂìàÂ∏åË°®Êú™ÂàùÂßãÂåñÔºàÂç≥ table‰∏∫Á©∫) // Âàô‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞ËÆæÁΩÆÁöÑÈòàÂÄº(Âç≥ÂàùÂßãÂÆπÈáè) ÂàùÂßãÂåñÊï∞ÁªÑtable if (table == EMPTY_TABLE) &#123; inflateTable(threshold); &#125; // 2. Âà§Êñ≠keyÊòØÂê¶‰∏∫Á©∫ÂÄºnull // 2.1 Ëã•key == nullÔºåÂàôÂ∞ÜËØ•ÈîÆ-ÂÄº Â≠òÊîæÂà∞Êï∞ÁªÑtable ‰∏≠ÁöÑÁ¨¨1‰∏™‰ΩçÁΩÆÔºåÂç≥table [0] // ÔºàÊú¨Ë¥®Ôºökey = NullÊó∂ÔºåhashÂÄº = 0ÔºåÊïÖÂ≠òÊîæÂà∞table[0]‰∏≠Ôºâ // ËØ•‰ΩçÁΩÆÊ∞∏ËøúÂè™Êúâ1‰∏™valueÔºåÊñ∞‰º†ËøõÊù•ÁöÑvalue‰ºöË¶ÜÁõñÊóßÁöÑvalue if (key == null) return putForNullKey(value); // 2.2 Ëã• key ‚â† nullÔºåÂàôËÆ°ÁÆóÂ≠òÊîæÊï∞ÁªÑ table ‰∏≠ÁöÑ‰ΩçÁΩÆÔºà‰∏ãÊ†á„ÄÅÁ¥¢ÂºïÔºâ // a. Ê†πÊçÆÈîÆÂÄºkeyËÆ°ÁÆóhashÂÄº int hash = hash(key); // b. Ê†πÊçÆhashÂÄº ÊúÄÁªàËé∑Âæó keyÂØπÂ∫îÂ≠òÊîæÁöÑÊï∞ÁªÑTable‰∏≠‰ΩçÁΩÆ int i = indexFor(hash, table.length); // 3. Âà§Êñ≠ËØ•keyÂØπÂ∫îÁöÑÂÄºÊòØÂê¶Â∑≤Â≠òÂú®ÔºàÈÄöËøáÈÅçÂéÜ ‰ª•ËØ•Êï∞ÁªÑÂÖÉÁ¥†‰∏∫Â§¥ÁªìÁÇπÁöÑÈìæË°® ÈÄê‰∏™Âà§Êñ≠Ôºâ for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123; Object k; // 3.1 Ëã•ËØ•keyÂ∑≤Â≠òÂú®ÔºàÂç≥ key-valueÂ∑≤Â≠òÂú® ÔºâÔºåÂàôÁî® Êñ∞value ÊõøÊç¢ Êóßvalue if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123; V oldValue = e.value; e.value = value; e.recordAccess(this); return oldValue; //Âπ∂ËøîÂõûÊóßÁöÑvalue &#125; &#125; //‰øùËØÅÂπ∂ÂèëËÆøÈóÆÊó∂ÔºåËã•HashMapÂÜÖÈÉ®ÁªìÊûÑÂèëÁîüÂèòÂåñÔºåÂø´ÈÄüÂìçÂ∫îÂ§±Ë¥• modCount++; // 3.2 Ëã• ËØ•key‰∏çÂ≠òÂú®ÔºåÂàôÂ∞Ü‚Äúkey-value‚ÄùÊ∑ªÂä†Âà∞table‰∏≠ addEntry(hash, key, value, i); return null;&#125; Ê†πÊçÆÊ∫êÁ†ÅÂàÜÊûêÊâÄ‰ΩúÂá∫ÁöÑÊµÅÁ®ãÂõæÔºö inflateTable--ÂàùÂßãÂåñÂìàÂ∏åË°® 123456789101112131415private void inflateTable(int toSize) &#123; // 1. Â∞Ü‰º†ÂÖ•ÁöÑÂÆπÈáèÂ§ßÂ∞èËΩ¨Âåñ‰∏∫Ôºö&gt;‰º†ÂÖ•ÂÆπÈáèÂ§ßÂ∞èÁöÑÊúÄÂ∞èÁöÑ2ÁöÑÊ¨°ÂπÇ // Âç≥Â¶ÇÊûú‰º†ÂÖ•ÁöÑÊòØÂÆπÈáèÂ§ßÂ∞èÊòØ19ÔºåÈÇ£‰πàËΩ¨ÂåñÂêéÔºåÂàùÂßãÂåñÂÆπÈáèÂ§ßÂ∞è‰∏∫32ÔºàÂç≥2ÁöÑ5Ê¨°ÂπÇÔºâ int capacity = roundUpToPowerOf2(toSize);-&gt;&gt;ÂàÜÊûê1 // 2. ÈáçÊñ∞ËÆ°ÁÆóÈòàÂÄº threshold = ÂÆπÈáè * Âä†ËΩΩÂõ†Â≠ê threshold = (int) Math.min(capacity * loadFactor, MAXIMUM_CAPACITY + 1); // 3. ‰ΩøÁî®ËÆ°ÁÆóÂêéÁöÑÂàùÂßãÂÆπÈáèÔºàÂ∑≤ÁªèÊòØ2ÁöÑÊ¨°ÂπÇÔºâ ÂàùÂßãÂåñÊï∞ÁªÑtableÔºà‰Ωú‰∏∫Êï∞ÁªÑÈïøÂ∫¶Ôºâ // Âç≥ ÂìàÂ∏åË°®ÁöÑÂÆπÈáèÂ§ßÂ∞è = Êï∞ÁªÑÂ§ßÂ∞èÔºàÈïøÂ∫¶Ôºâ table = new Entry[capacity]; //Áî®ËØ•ÂÆπÈáèÂàùÂßãÂåñtable //ÂàùÂßãÂåñÂìàÂ∏åÁßçÂ≠ê initHashSeedAsNeeded(capacity); &#125; inflateTableËøô‰∏™ÊñπÊ≥ïÁî®‰∫é‰∏∫‰∏ªÂπ≤Êï∞ÁªÑtableÂú®ÂÜÖÂ≠ò‰∏≠ÂàÜÈÖçÂ≠òÂÇ®Á©∫Èó¥ÔºåÈÄöËøároundUpToPowerOf2(toSize)ÂèØ‰ª•Á°Æ‰øùcapacity‰∏∫Â§ß‰∫éÊàñÁ≠â‰∫étoSizeÁöÑÊúÄÊé•ËøëtoSizeÁöÑ‰∫åÊ¨°ÂπÇÔºåÊØîÂ¶ÇtoSize=13,Âàôcapacity=16;to_size=16,capacity=16;to_size=17,capacity=32„ÄÇ 123456private static int roundUpToPowerOf2(int number) &#123; //Ëã•ÂÆπÈáèË∂ÖËøá‰∫ÜÊúÄÂ§ßÂÄºÔºåÂàùÂßãÂåñÂÆπÈáèËÆæÁΩÆ‰∏∫ÊúÄÂ§ßÂÄº ÔºõÂê¶ÂàôÔºåËÆæÁΩÆ‰∏∫Ôºö&gt;‰º†ÂÖ•ÂÆπÈáèÂ§ßÂ∞èÁöÑÊúÄÂ∞èÁöÑ2ÁöÑÊ¨°ÂπÇ return number &gt;= MAXIMUM_CAPACITY ? MAXIMUM_CAPACITY : (number &gt; 1) ? Integer.highestOneBit((number - 1) &lt;&lt; 1) : 1;&#125; putForNullKey 1234567891011121314151617181920212223private V putForNullKey(V value) &#123; // ÈÅçÂéÜ‰ª•table[0]‰∏∫È¶ñÁöÑÈìæË°®ÔºåÂØªÊâæÊòØÂê¶Â≠òÂú®key==null ÂØπÂ∫îÁöÑÈîÆÂÄºÂØπ // 1. Ëã•ÊúâÔºöÂàôÁî®Êñ∞value ÊõøÊç¢ ÊóßvalueÔºõÂêåÊó∂ËøîÂõûÊóßÁöÑvalueÂÄº for (Entry&lt;K,V&gt; e = table[0]; e != null; e = e.next) &#123; if (e.key == null) &#123; V oldValue = e.value; e.value = value; e.recordAccess(this); return oldValue; &#125; &#125; modCount++; // 2 .Ëã•Êó†key==nullÁöÑÈîÆÔºåÈÇ£‰πàË∞ÉÁî®addEntryÔºàÔºâÔºåÂ∞ÜÁ©∫ÈîÆ &amp; ÂØπÂ∫îÁöÑÂÄºÂ∞ÅË£ÖÂà∞Entry‰∏≠ÔºåÂπ∂ÊîæÂà∞table[0]‰∏≠ addEntry(0, null, value, 0); // Ê≥®Ôºö // a. addEntryÔºàÔºâÁöÑÁ¨¨1‰∏™ÂèÇÊï∞ = hashÂÄº = ‰º†ÂÖ•0 // b. Âç≥ ËØ¥ÊòéÔºöÂΩìkey = nullÊó∂Ôºå‰πüÊúâhashÂÄº = 0ÔºåÊâÄ‰ª•HashMapÁöÑkey ÂèØ‰∏∫null // c. ÂØπÊØîHashTableÔºåÁî±‰∫éHashTableÂØπkeyÁõ¥Êé•hashCodeÔºàÔºâÔºåËã•key‰∏∫nullÊó∂Ôºå‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåÊâÄ‰ª•HashTableÁöÑkey‰∏çÂèØ‰∏∫null // d. Ê≠§Â§ÑÂè™ÈúÄÁü•ÈÅìÊòØÂ∞Ü key-value Ê∑ªÂä†Âà∞HashMap‰∏≠Âç≥ÂèØ return null; &#125; ËÆ°ÁÆóHashÂÄº 123456789101112// ËÆ°ÁÆóHashÂÄºÔºöÂ∞Ü ÈîÆkey ËΩ¨Êç¢Êàê ÂìàÂ∏åÁ†ÅÔºàhashÂÄºÔºâÊìç‰Ωú = ‰ΩøÁî®hashCode() + 4Ê¨°‰ΩçËøêÁÆó + 5Ê¨°ÂºÇÊàñËøêÁÆóÔºà9Ê¨°Êâ∞Âä®Ôºâfinal int hash(Object k) &#123; int h = hashSeed; //keyÊòØStringÁ±ªÂûãÁöÑÂ∞±‰ΩøÁî®Âè¶Â§ñÁöÑÂìàÂ∏åÁÆóÊ≥ï if (0 != h &amp;&amp; k instanceof String) &#123; return sun.misc.Hashing.stringHash32((String) k); &#125; h ^= k.hashCode(); //Êâ∞Âä®ÂáΩÊï∞ h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12); return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);&#125; hashÊñπÊ≥ïÁöÑÊúÄÂêé‰∏§Ë°åÊòØÁúüÊ≠£ËÆ°ÁÆóhashÂÄºÁöÑÁÆóÊ≥ïÔºåËÆ°ÁÆóhashÁ†ÅÁöÑÁÆóÊ≥ïË¢´Áß∞‰∏∫Êâ∞Âä®ÂáΩÊï∞ÔºåÊâÄË∞ìÁöÑÊâ∞Âä®ÂáΩÊï∞Â∞±ÊòØÊääÊâÄÊúâ‰∏úË•øÊùÇÁ≥ÖÂà∞‰∏ÄËµ∑ÔºåÂèØ‰ª•ÁúãÂà∞ËøôÈáå‰ΩøÁî®‰∫ÜÂõõ‰∏™ÂêëÂè≥Áßª‰ΩçËøêÁÆó„ÄÇÁõÆÁöÑÂ∞±ÊòØÂ∞ÜhÁöÑÈ´ò‰ΩçÂÄº‰∏é‰Ωé‰ΩçÂÄºÊ∑∑Âêà‰∏Ä‰∏ãÔºå‰ª•Ê≠§Â¢ûÂä†‰Ωé‰ΩçÂÄºÁöÑÈöèÊú∫ÊÄß„ÄÇÂÆö‰ΩçÊï∞ÁªÑÁöÑ‰∏ãÊ†áÊòØÊ†πÊçÆhashÁ†ÅÁöÑ‰Ωé‰ΩçÂÄºÊù•Á°ÆÂÆöÁöÑ„ÄÇkeyÁöÑhashÁ†ÅÊòØÈÄöËøáhashCodeÊñπÊ≥ïÊù•ÁîüÊàêÁöÑÔºåËÄå‰∏Ä‰∏™Á≥üÁ≥ïÁöÑhashCodeÊñπÊ≥ïÁîüÊàêÁöÑhashÁ†ÅÁöÑ‰Ωé‰ΩçÂÄºÂèØËÉΩ‰ºöÊúâÂæàÂ§ßÁöÑÈáçÂ§ç„ÄÇ‰∏∫‰∫Ü‰ΩøÂæóhashÁ†ÅÂú®Êï∞ÁªÑ‰∏äÊò†Â∞ÑÁöÑÊØîËæÉÂùáÂåÄÔºåÊâ∞Âä®ÂáΩÊï∞Â∞±Ê¥æ‰∏äÁî®Âú∫‰∫ÜÔºåÊääÈ´ò‰ΩçÂÄºÁöÑÁâπÊÄßÁ≥ÖÂêàËøõ‰Ωé‰ΩçÂÄºÔºåÂ¢ûÂä†‰Ωé‰ΩçÂÄºÁöÑÈöèÊú∫ÊÄßÔºå‰ªéËÄå‰ΩøÊï£ÂàóÂàÜÂ∏ÉÁöÑÊõ¥Âä†ÊùæÊï£Ôºå‰ª•Ê≠§ÊèêÈ´òÊÄßËÉΩ„ÄÇ‰∏ãÂõæ‰∏æ‰∫Ü‰∏™‰æãÂ≠êÂ∏ÆÂä©ÁêÜËß£„ÄÇ ËÆ°ÁÆóÁ¥¢ÂºïÂÄºÔºàÊï∞ÁªÑ‰∏ãÊ†áÔºâ 1234567/** * ËÆ°ÁÆóÁ¥¢Âºï‰ΩçÁΩÆ */ static int indexFor(int h, int length) &#123; return h &amp; (length-1); // Â∞ÜÂØπÂìàÂ∏åÁ†ÅÊâ∞Âä®Â§ÑÁêÜÂêéÁöÑÁªìÊûú ‰∏éËøêÁÆó(&amp;) ÔºàÊï∞ÁªÑÈïøÂ∫¶-1ÔºâÔºåÊúÄÁªàÂæóÂà∞Â≠òÂÇ®Âú®Êï∞ÁªÑtableÁöÑ‰ΩçÁΩÆÔºàÂç≥Êï∞ÁªÑ‰∏ãÊ†á„ÄÅÁ¥¢ÂºïÔºâ&#125; h&amp;Ôºàlength-1Ôºâ‰øùËØÅËé∑ÂèñÁöÑindex‰∏ÄÂÆöÂú®Êï∞ÁªÑËåÉÂõ¥ÂÜÖÔºå‰∏æ‰∏™‰æãÂ≠êÔºåÈªòËÆ§ÂÆπÈáè16Ôºålength-1=15Ôºåh=18,ËΩ¨Êç¢Êàê‰∫åËøõÂà∂ËÆ°ÁÆó‰∏∫: 1234 1 0 0 1 0&amp; 0 1 1 1 1__________________ 0 0 0 1 0 = 2 ÊúÄÁªàËÆ°ÁÆóÂá∫ÁöÑindex=2„ÄÇÊúâ‰∫õÁâàÊú¨ÁöÑÂØπ‰∫éÊ≠§Â§ÑÁöÑËÆ°ÁÆó‰ºö‰ΩøÁî® ÂèñÊ®°ËøêÁÆóÔºå‰πüËÉΩ‰øùËØÅindex‰∏ÄÂÆöÂú®Êï∞ÁªÑËåÉÂõ¥ÂÜÖÔºå‰∏çËøá‰ΩçËøêÁÆóÂØπËÆ°ÁÆóÊú∫Êù•ËØ¥ÔºåÊÄßËÉΩÊõ¥È´ò‰∏Ä‰∫õÔºàHashMap‰∏≠ÊúâÂ§ßÈáè‰ΩçËøêÁÆóÔºâ ÊâÄ‰ª•ÊúÄÁªàÂ≠òÂÇ®‰ΩçÁΩÆÁöÑÁ°ÆÂÆöÊµÅÁ®ãÊòØËøôÊ†∑ÁöÑÔºö addEntry--Ê∑ªÂä†ÈîÆÂÄºÂØπ 1234567891011121314151617181920212223/** * Ê∑ªÂä†ÈîÆÂÄºÂØπÔºàEntry ÔºâÂà∞ HashMap‰∏≠ * @param hash--keyÂØπÂ∫îÁöÑhashÂÄº * @param key--ÈîÆ * @param value--ÂÄº * @param bucketIndex--Âá∫ÂÖ•Êï∞ÁªÑtableÁöÑÁ¥¢Âºï‰ΩçÁΩÆ--&gt;Êï∞ÁªÑ‰∏ãÊ†á */void addEntry(int hash, K key, V value, int bucketIndex) &#123; // 1. ÊèíÂÖ•ÂâçÔºåÂÖàÂà§Êñ≠ÂÆπÈáèÊòØÂê¶Ë∂≥Â§üÔºåËã•‰∏çË∂≥Â§üÔºåÂàôËøõË°åÊâ©ÂÆπÔºà2ÂÄçÔºâ„ÄÅÈáçÊñ∞ËÆ°ÁÆóHashÂÄº„ÄÅÈáçÊñ∞ËÆ°ÁÆóÂ≠òÂÇ®Êï∞ÁªÑ‰∏ãÊ†á // Â¶ÇÊûúHashMapÁöÑÂ§ßÂ∞èÂ§ß‰∫éÈòÄÂÄºÂπ∂‰∏îÂìàÂ∏åË°®ÂØπÂ∫îÊßΩ‰ΩçÁöÑÂÄº‰∏ç‰∏∫Á©∫ if ((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])) &#123; //Âõ†‰∏∫HashMapÁöÑÂ§ßÂ∞èÂ§ß‰∫éÈòÄÂÄº, Ë°®ÊòéÂç≥Â∞ÜÂèëÁîüÂìàÂ∏åÂÜ≤Á™Å, ÊâÄ‰ª•ËøõË°åÊâ©ÂÆπ //2ÂÄçÊâ©ÂÆπ resize(2 * table.length); //ÈáçÊñ∞ËÆ°ÁÆóËØ•keyÂØπÂ∫îÁöÑhashÂÄº hash = (null != key) ? hash(key) : 0; //ÈáçÊñ∞ËÆ°ÁÆóËØ•keyÂØπÂ∫îÁöÑhashÂÄºÁöÑÂ≠òÂÇ®Êï∞ÁªÑ‰∏ãÊ†á bucketIndex = indexFor(hash, table.length); &#125; //Âú®ËøôÈáåË°®ÊòéHashMapÁöÑÂ§ßÂ∞èÊ≤°ÊúâË∂ÖËøáÈòÄÂÄº, ÊâÄ‰ª•‰∏çÈúÄË¶ÅÊâ©ÂÆπ //ÂàõÂª∫1‰∏™Êñ∞ÁöÑÊï∞ÁªÑÂÖÉÁ¥†(Entry)Âπ∂ÊîæÂÖ•Êï∞ÁªÑ‰∏≠ createEntry(hash, key, value, bucketIndex);&#125; ÊµÅÁ®ãÂ¶Ç‰∏ãÔºàÈîÆÂÄºÂØπÁöÑÊ∑ªÂä†ÊñπÂºè--&gt;ÂçïÈìæË°®ÁöÑÂ§¥ÊèíÊ≥ïÔºâÔºö resize--Êï∞ÁªÑÊâ©ÂÆπ 12345678910111213141516171819202122/** * ÂØπÂìàÂ∏åË°®ËøõË°åÊâ©ÂÆπÔºåÂΩìÂÆπÈáè‰∏çË∂≥Êó∂ÔºàÂÆπÈáè &gt; ÈòàÂÄºÔºâÔºåÂàôÊâ©ÂÆπÔºàÊâ©Âà∞2ÂÄçÔºâ */void resize(int newCapacity) &#123; // 1. ‰øùÂ≠òÊóßÊï∞ÁªÑÔºàold tableÔºâ Entry[] oldTable = table; // 2. ‰øùÂ≠òÊóßÂÆπÈáèÔºàold capacity ÔºâÔºåÂç≥Êï∞ÁªÑÈïøÂ∫¶ int oldCapacity = oldTable.length; // 3. Ëã•ÊóßÂÆπÈáèÂ∑≤ÁªèÊòØÁ≥ªÁªüÈªòËÆ§ÊúÄÂ§ßÂÆπÈáè‰∫ÜÔºåÈÇ£‰πàÂ∞ÜÈòàÂÄºËÆæÁΩÆÊàêÊï¥ÂûãÁöÑÊúÄÂ§ßÂÄºÔºåÈÄÄÂá∫ if (oldCapacity == MAXIMUM_CAPACITY) &#123; threshold = Integer.MAX_VALUE; return; &#125; // 4. Ê†πÊçÆÊñ∞ÂÆπÈáèÔºà2ÂÄçÂÆπÈáèÔºâÊñ∞Âª∫1‰∏™Êï∞ÁªÑÔºåÂç≥Êñ∞table Entry[] newTable = new Entry[newCapacity]; // 5. Â∞ÜÊóßÊï∞ÁªÑ‰∏äÁöÑÊï∞ÊçÆÔºàÈîÆÂÄºÂØπÔºâËΩ¨ÁßªÂà∞Êñ∞table‰∏≠Ôºå‰ªéËÄåÂÆåÊàêÊâ©ÂÆπ transfer(newTable, initHashSeedAsNeeded(newCapacity)); // 6. Â∞ÜÂΩìÂâçÂìàÂ∏åË°®ËÆæÁΩÆ‰∏∫Êñ∞ÁöÑÂìàÂ∏åË°® table = newTable; // 7. Êõ¥Êñ∞ÂìàÂ∏åË°®ÈòàÂÄº threshold = (int)Math.min(newCapacity * loadFactor, MAXIMUM_CAPACITY + 1);&#125; ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö transfer--Êï∞ÊçÆËΩ¨Áßª 123456789101112131415161718192021222324252627282930313233343536 /** * Â∞ÜÊóßÊï∞ÁªÑ‰∏äÁöÑÊï∞ÊçÆÔºàÈîÆÂÄºÂØπÔºâËΩ¨ÁßªÂà∞Êñ∞table‰∏≠Ôºå‰ªéËÄåÂÆåÊàêÊâ©ÂÆπ * ËøáÁ®ãÔºöÊåâÊóßÈìæË°®ÁöÑÊ≠£Â∫èÈÅçÂéÜÈìæË°®„ÄÅÂú®Êñ∞ÈìæË°®ÁöÑÂ§¥ÈÉ®‰æùÊ¨°ÊèíÂÖ• */ void transfer(Entry[] newTable) &#123; // 1. srcÂºïÁî®‰∫ÜÊóßÊï∞ÁªÑ Entry[] src = table; // 2. Ëé∑ÂèñÊñ∞Êï∞ÁªÑÁöÑÂ§ßÂ∞è = Ëé∑ÂèñÊñ∞ÂÆπÈáèÂ§ßÂ∞è int newCapacity = newTable.length; // 3. ÈÄöËøáÈÅçÂéÜ ÊóßÊï∞ÁªÑÔºåÂ∞ÜÊóßÊï∞ÁªÑ‰∏äÁöÑÊï∞ÊçÆÔºàÈîÆÂÄºÂØπÔºâËΩ¨ÁßªÂà∞Êñ∞Êï∞ÁªÑ‰∏≠ for (int j = 0; j &lt; src.length; j++) &#123; // 3.1 ÂèñÂæóÊóßÊï∞ÁªÑÁöÑÊØè‰∏™ÂÖÉÁ¥† Entry&lt;K,V&gt; e = src[j]; if (e != null) &#123; // 3.2 ÈáäÊîæÊóßÊï∞ÁªÑÁöÑÂØπË±°ÂºïÁî®ÔºàforÂæ™ÁéØÂêéÔºåÊóßÊï∞ÁªÑ‰∏çÂÜçÂºïÁî®‰ªª‰ΩïÂØπË±°Ôºâ src[j] = null; do &#123; // 3.3 ÈÅçÂéÜ ‰ª•ËØ•Êï∞ÁªÑÂÖÉÁ¥†‰∏∫È¶ñ ÁöÑÈìæË°® // Ê≥®ÔºöËΩ¨ÁßªÈìæË°®Êó∂ÔºåÂõ†ÊòØÂçïÈìæË°®ÔºåÊïÖË¶Å‰øùÂ≠ò‰∏ã1‰∏™ÁªìÁÇπÔºåÂê¶ÂàôËΩ¨ÁßªÂêéÈìæË°®‰ºöÊñ≠ÂºÄ Entry&lt;K,V&gt; next = e.next; // 3.4 ÈáçÊñ∞ËÆ°ÁÆóÊØè‰∏™ÂÖÉÁ¥†ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆ int i = indexFor(e.hash, newCapacity); // 3.5 Â∞ÜÂÖÉÁ¥†ÊîæÂú®Êï∞ÁªÑ‰∏äÔºöÈááÁî®ÂçïÈìæË°®ÁöÑÂ§¥ÊèíÂÖ•ÊñπÂºè = Âú®ÈìæË°®Â§¥‰∏äÂ≠òÊîæÊï∞ÊçÆ = Â∞ÜÊï∞ÁªÑ‰ΩçÁΩÆÁöÑÂéüÊúâÊï∞ÊçÆÊîæÂú®Âêé1‰∏™ÊåáÈíà„ÄÅÂ∞ÜÈúÄÊîæÂÖ•ÁöÑÊï∞ÊçÆÊîæÂà∞Êï∞ÁªÑ‰ΩçÁΩÆ‰∏≠ // Âç≥ Êâ©ÂÆπÂêéÔºåÂèØËÉΩÂá∫Áé∞ÈÄÜÂ∫èÔºöÊåâÊóßÈìæË°®ÁöÑÊ≠£Â∫èÈÅçÂéÜÈìæË°®„ÄÅÂú®Êñ∞ÈìæË°®ÁöÑÂ§¥ÈÉ®‰æùÊ¨°ÊèíÂÖ• e.next = newTable[i]; newTable[i] = e; // 3.6 ËÆøÈóÆ‰∏ã1‰∏™EntryÈìæ‰∏äÁöÑÂÖÉÁ¥†ÔºåÂ¶ÇÊ≠§‰∏çÊñ≠Âæ™ÁéØÔºåÁõ¥Âà∞ÈÅçÂéÜÂÆåËØ•ÈìæË°®‰∏äÁöÑÊâÄÊúâÁªìÁÇπ e = next; &#125; while (e != null); // Â¶ÇÊ≠§‰∏çÊñ≠Âæ™ÁéØÔºåÁõ¥Âà∞ÈÅçÂéÜÂÆåÊï∞ÁªÑ‰∏äÁöÑÊâÄÊúâÊï∞ÊçÆÂÖÉÁ¥† &#125; &#125; &#125; ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö createEntry--Ê∑ªÂä†ÈîÆÂÄºÂØπ 123456789101112131415/** * ÂàõÂª∫1‰∏™Êñ∞ÁöÑÊï∞ÁªÑÂÖÉÁ¥†ÔºàEntryÔºâ Âπ∂ÊîæÂÖ•Âà∞Êï∞ÁªÑ‰∏≠ */ void createEntry(int hash, K key, V value, int bucketIndex) &#123; // 1. Êäätable‰∏≠ËØ•‰ΩçÁΩÆÂéüÊù•ÁöÑEntry‰øùÂ≠ò Entry&lt;K,V&gt; e = table[bucketIndex]; // 2. Âú®table‰∏≠ËØ•‰ΩçÁΩÆÊñ∞Âª∫‰∏Ä‰∏™EntryÔºöÂ∞ÜÂéüÂ§¥ÁªìÁÇπ‰ΩçÁΩÆÔºàÊï∞ÁªÑ‰∏äÔºâÁöÑÈîÆÂÄºÂØπ ÊîæÂÖ•Âà∞ÔºàÈìæË°®ÔºâÂêé1‰∏™ÁªìÁÇπ‰∏≠„ÄÅÂ∞ÜÈúÄÊèíÂÖ•ÁöÑÈîÆÂÄºÂØπ ÊîæÂÖ•Âà∞Â§¥ÁªìÁÇπ‰∏≠ÔºàÊï∞ÁªÑ‰∏äÔºâ-&gt; ‰ªéËÄåÂΩ¢ÊàêÈìæË°® // Âç≥ Âú®ÊèíÂÖ•ÂÖÉÁ¥†Êó∂ÔºåÊòØÂú®ÈìæË°®Â§¥ÊèíÂÖ•ÁöÑÔºåtable‰∏≠ÁöÑÊØè‰∏™‰ΩçÁΩÆÊ∞∏ËøúÂè™‰øùÂ≠òÊúÄÊñ∞ÊèíÂÖ•ÁöÑEntryÔºåÊóßÁöÑEntryÂàôÊîæÂÖ•Âà∞ÈìæË°®‰∏≠ÔºàÂç≥ Ëß£ÂÜ≥HashÂÜ≤Á™ÅÔºâ table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e); // 3. ÂìàÂ∏åË°®ÁöÑÈîÆÂÄºÂØπÊï∞ÈáèËÆ°Êï∞Â¢ûÂä† size++; &#125; ÊÄªÁªì Âêë HashMap Ê∑ªÂä†Êï∞ÊçÆÔºàÊàêÂØπ ÊîæÂÖ• ÈîÆ - ÂÄºÂØπÔºâÁöÑÂÖ®ÊµÅÁ®ãÔºö getÊìç‰Ωú 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * ‰ªéHashMap‰∏≠Ëé∑ÂèñÊï∞ÊçÆ */ public V get(Object key) &#123; // 1. ÂΩìkey == nullÊó∂ÔºåÂàôÂà∞ ‰ª•ÂìàÂ∏åË°®Êï∞ÁªÑ‰∏≠ÁöÑÁ¨¨1‰∏™ÂÖÉÁ¥†ÔºàÂç≥table[0]Ôºâ‰∏∫Â§¥ÁªìÁÇπÁöÑÈìæË°®ÂéªÂØªÊâæÂØπÂ∫î key == nullÁöÑÈîÆ if (key == null) return getForNullKey(); // 2. ÂΩìkey ‚â† nullÊó∂ÔºåÂéªËé∑ÂæóÂØπÂ∫îÂÄº Entry&lt;K,V&gt; entry = getEntry(key); return null == entry ? null : entry.getValue(); &#125; /** * ÂΩìkey == nullÊó∂ÔºåÂàôÂà∞ ‰ª•ÂìàÂ∏åË°®Êï∞ÁªÑ‰∏≠ÁöÑÁ¨¨1‰∏™ÂÖÉÁ¥†ÔºàÂç≥table[0]Ôºâ‰∏∫Â§¥ÁªìÁÇπÁöÑÈìæË°®ÂéªÂØªÊâæÂØπÂ∫î key == nullÁöÑÈîÆ */ private V getForNullKey() &#123; if (size == 0) &#123; return null; &#125; // ÈÅçÂéÜ‰ª•table[0]‰∏∫Â§¥ÁªìÁÇπÁöÑÈìæË°®ÔºåÂØªÊâæ key==null ÂØπÂ∫îÁöÑÂÄº for (Entry&lt;K,V&gt; e = table[0]; e != null; e = e.next) &#123; // ‰ªétable[0]‰∏≠Âèñkey==nullÁöÑvalueÂÄº if (e.key == null) return e.value; &#125; return null; &#125; /** * ÂΩìkey ‚â† nullÊó∂ÔºåÂéªËé∑ÂæóÂØπÂ∫îÂÄº */ final Entry&lt;K,V&gt; getEntry(Object key) &#123; if (size == 0) &#123; return null; &#125; // 1. Ê†πÊçÆkeyÂÄºÔºåÈÄöËøáhashÔºàÔºâËÆ°ÁÆóÂá∫ÂØπÂ∫îÁöÑhashÂÄº int hash = (key == null) ? 0 : hash(key); // 2. Ê†πÊçÆhashÂÄºËÆ°ÁÆóÂá∫ÂØπÂ∫îÁöÑÊï∞ÁªÑ‰∏ãÊ†á // 3. ÈÅçÂéÜ ‰ª•ËØ•Êï∞ÁªÑ‰∏ãÊ†áÁöÑÊï∞ÁªÑÂÖÉÁ¥†‰∏∫Â§¥ÁªìÁÇπÁöÑÈìæË°®ÊâÄÊúâÁªìÁÇπÔºåÂØªÊâæËØ•keyÂØπÂ∫îÁöÑÂÄº for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)]; e != null; e = e.next) &#123; Object k; // Ëã• hashÂÄº &amp; key Áõ∏Á≠âÔºåÂàôËØÅÊòéËØ•Entry = Êàë‰ª¨Ë¶ÅÁöÑÈîÆÂÄºÂØπ // ÈÄöËøáequalsÔºàÔºâÂà§Êñ≠keyÊòØÂê¶Áõ∏Á≠â if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; &#125; return null; &#125; ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö ÂÖ∂‰ªñÊìç‰Ωú 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132 /** * Âà§Êñ≠HashMapÊòØÂê¶‰∏∫Á©∫ÔºåÂç≥Êó†ÈîÆÂÄºÂØπÔºõsize == 0Êó∂ Ë°®Á§∫‰∏∫ Á©∫ */public boolean isEmpty() &#123; return size == 0; &#125; /** * ËøîÂõûÂìàÂ∏åË°®‰∏≠ÊâÄÊúâ ÈîÆÂÄºÂØπÁöÑÊï∞Èáè = Êï∞ÁªÑ‰∏≠ÁöÑÈîÆÂÄºÂØπ + ÈìæË°®‰∏≠ÁöÑÈîÆÂÄºÂØπ */public int size() &#123; return size; &#125; /** * Ê∏ÖÁ©∫ÂìàÂ∏åË°®ÔºåÂç≥Âà†Èô§ÊâÄÊúâÈîÆÂÄºÂØπ * ÂéüÁêÜÔºöÂ∞ÜÊï∞ÁªÑtable‰∏≠Â≠òÂÇ®ÁöÑEntryÂÖ®ÈÉ®ÁΩÆ‰∏∫null„ÄÅsizeÁΩÆ‰∏∫0 */ public void clear() &#123; modCount++; Arrays.fill(table, null); size = 0;&#125; /** * Â∞ÜÊåáÂÆöMap‰∏≠ÁöÑÈîÆÂÄºÂØπ Â§çÂà∂Âà∞ Ê≠§Map‰∏≠ */ public void putAll(Map&lt;? extends K, ? extends V&gt; m) &#123; // 1. ÁªüËÆ°ÈúÄÂ§çÂà∂Â§öÂ∞ë‰∏™ÈîÆÂÄºÂØπ int numKeysToBeAdded = m.size(); if (numKeysToBeAdded == 0) return; // 2. Ëã•tableËøòÊ≤°ÂàùÂßãÂåñÔºåÂÖàÁî®ÂàöÂàöÁªüËÆ°ÁöÑÂ§çÂà∂Êï∞ÂéªÂàùÂßãÂåñtable if (table == EMPTY_TABLE) &#123; inflateTable((int) Math.max(numKeysToBeAdded * loadFactor, threshold)); &#125; // 3. Ëã•ÈúÄÂ§çÂà∂ÁöÑÊï∞ÁõÆ &gt; ÈòàÂÄºÔºåÂàôÈúÄÂÖàÊâ©ÂÆπ if (numKeysToBeAdded &gt; threshold) &#123; int targetCapacity = (int)(numKeysToBeAdded / loadFactor + 1); if (targetCapacity &gt; MAXIMUM_CAPACITY) targetCapacity = MAXIMUM_CAPACITY; int newCapacity = table.length; while (newCapacity &lt; targetCapacity) newCapacity &lt;&lt;= 1; if (newCapacity &gt; table.length) resize(newCapacity); &#125; // 4. ÂºÄÂßãÂ§çÂà∂ÔºàÂÆûÈôÖ‰∏ä‰∏çÊñ≠Ë∞ÉÁî®PutÂáΩÊï∞ÊèíÂÖ•Ôºâ for (Map.Entry&lt;? extends K, ? extends V&gt; e : m.entrySet()) put(e.getKey(), e.getValue());&#125; /** * Âà†Èô§ËØ•ÈîÆÂÄºÂØπ */ public V remove(Object key) &#123; Entry&lt;K,V&gt; e = removeEntryForKey(key); return (e == null ? null : e.value); &#125; final Entry&lt;K,V&gt; removeEntryForKey(Object key) &#123; if (size == 0) &#123; return null; &#125; // 1. ËÆ°ÁÆóhashÂÄº int hash = (key == null) ? 0 : hash(key); // 2. ËÆ°ÁÆóÂ≠òÂÇ®ÁöÑÊï∞ÁªÑ‰∏ãÊ†á‰ΩçÁΩÆ int i = indexFor(hash, table.length); Entry&lt;K,V&gt; prev = table[i]; Entry&lt;K,V&gt; e = prev; while (e != null) &#123; Entry&lt;K,V&gt; next = e.next; Object k; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) &#123; modCount++; size--; // Ëã•Âà†Èô§ÁöÑÊòØtableÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†ÔºàÂç≥ÈìæË°®ÁöÑÂ§¥ÁªìÁÇπÔºâ // ÂàôÂà†Èô§Êìç‰Ωú = Â∞ÜÂ§¥ÁªìÁÇπÁöÑnextÂºïÁî®Â≠òÂÖ•table[i]‰∏≠ if (prev == e) table[i] = next; //Âê¶Âàô Â∞Ü‰ª•table[i]‰∏∫Â§¥ÁªìÁÇπÁöÑÈìæË°®‰∏≠ÔºåÂΩìÂâçEntryÁöÑÂâç1‰∏™Entry‰∏≠ÁöÑnext ËÆæÁΩÆ‰∏∫ ÂΩìÂâçEntryÁöÑnextÔºàÂç≥Âà†Èô§ÂΩìÂâçEntry = Áõ¥Êé•Ë∑≥ËøáÂΩìÂâçEntryÔºâ else prev.next = next; e.recordRemoval(this); return e; &#125; prev = e; e = next; &#125; return e; &#125; /** * Âà§Êñ≠ÊòØÂê¶Â≠òÂú®ËØ•ÈîÆÁöÑÈîÆÂÄºÂØπÔºõÊòØ ÂàôËøîÂõûtrue * ÂéüÁêÜÔºöË∞ÉÁî®getÔºàÔºâÔºåÂà§Êñ≠ÊòØÂê¶‰∏∫Null */public boolean containsKey(Object key) &#123; return getEntry(key) != null; &#125; /** * Âà§Êñ≠ÊòØÂê¶Â≠òÂú®ËØ•ÂÄºÁöÑÈîÆÂÄºÂØπÔºõÊòØ ÂàôËøîÂõûtrue */ public boolean containsValue(Object value) &#123; // Ëã•value‰∏∫Á©∫ÔºåÂàôË∞ÉÁî®containsNullValue() if (value == null) return containsNullValue(); // Ëã•value‰∏ç‰∏∫Á©∫ÔºåÂàôÈÅçÂéÜÈìæË°®‰∏≠ÁöÑÊØè‰∏™EntryÔºåÈÄöËøáequalsÔºàÔºâÊØîËæÉvalues Âà§Êñ≠ÊòØÂê¶Â≠òÂú® Entry[] tab = table; for (int i = 0; i &lt; tab.length ; i++) for (Entry e = tab[i] ; e != null ; e = e.next) if (value.equals(e.value)) return true;//ËøîÂõûtrue return false; &#125; // value‰∏∫Á©∫Êó∂Ë∞ÉÁî®ÁöÑÊñπÊ≥ï private boolean containsNullValue() &#123; Entry[] tab = table; for (int i = 0; i &lt; tab.length ; i++) for (Entry e = tab[i] ; e != null ; e = e.next) if (e.value == null) return true; return false; &#125; Êâ©ÂÆπÂØºËá¥Ê≠ªÂæ™ÁéØÂàÜÊûê HashMapÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºåÂéüÂõ†Â∞±ÊòØÂú®Â§öÁ∫øÁ®ã‰∏ãÂπ∂ÂèëÊâßË°åput()Êìç‰ΩúÂØºËá¥Ëß¶ÂèëÊâ©ÂÆπresize()Ôºå‰ªéËÄåÂØºËá¥ÁéØÂΩ¢ÈìæË°®Ôºå‰ΩøÂæóÂú®Ëé∑ÂèñÊï∞ÊçÆÈÅçÂéÜÈìæË°®Êó∂ÂΩ¢ÊàêÊ≠ªÂæ™ÁéØ„ÄÇ resize()ÁöÑÊ∫êÁ†ÅÂâçÈù¢Â∑≤ÁªèÂàÜÊûêËøá‰∫ÜÔºå‰ªéÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫Âú®resize()ËøáÁ®ã‰∏≠ÔºåÂú®Â∞ÜÊóßÊï∞ÁªÑ‰∏äÁöÑÊï∞ÊçÆËΩ¨ÁßªÂà∞Êñ∞Êï∞ÁªÑ‰∏äÊó∂ÔºåËΩ¨ÁßªÊï∞ÊçÆÊìç‰ΩúÈúÄË¶ÅÂ∞ÜÊóßÈìæË°®Ê≠£Â∫èÈÅçÂéÜÔºåÁÑ∂ÂêéÂú®Êñ∞ÈìæË°®ÁöÑÂ§¥ÈÉ®‰æùÊ¨°ÊèíÂÖ•ÔºåÂç≥Âú®ËΩ¨ÁßªÊï∞ÊçÆ„ÄÅÊâ©ÂÆπÂêéÔºåÂÆπÊòìÂá∫Áé∞ÈìæË°®ÈÄÜÂ∫èÁöÑÊÉÖÂÜµ„ÄÇ ÂÅáËÆæÈáçÊñ∞ËÆ°ÁÆóÂ≠òÂÇ®‰ΩçÁΩÆÂêé‰∏çÂèòÔºåÂç≥Êâ©ÂÆπÂâç 1-&gt;2-&gt;3ÔºåÊâ©ÂÆπÂêé 3-&gt;2-&gt;1ÔºåÊ≠§Êó∂Ëã•ÔºàÂ§öÁ∫øÁ®ãÔºâÂπ∂ÂèëÊâßË°å putÔºàÔºâÊìç‰ΩúÔºå‰∏ÄÊó¶Âá∫Áé∞Êâ©ÂÆπÊÉÖÂÜµÔºåÂàô ÂÆπÊòìÂá∫Áé∞ ÁéØÂΩ¢ÈìæË°®Ôºå‰ªéËÄåÂú®Ëé∑ÂèñÊï∞ÊçÆ„ÄÅÈÅçÂéÜÈìæË°®Êó∂ ÂΩ¢ÊàêÊ≠ªÂæ™ÁéØÔºàInfinite LoopÔºâÔºåÂç≥ Ê≠ªÈîÅÁöÑÁä∂ÊÄÅÔºåÂ¶Ç‰∏ãÂõæÔºö Ê≥®ÔºöÁî±‰∫é JDK 1.8 ËΩ¨ÁßªÊï∞ÊçÆÊìç‰Ωú = ÊåâÊóßÈìæË°®ÁöÑÊ≠£Â∫èÈÅçÂéÜÈìæË°®„ÄÅÂú®Êñ∞ÈìæË°®ÁöÑÂ∞æÈÉ®‰æùÊ¨°ÊèíÂÖ•ÔºåÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞ÈìæË°® ÈÄÜÂ∫è„ÄÅÂÄíÁΩÆÁöÑÊÉÖÂÜµÔºåÊïÖ‰∏çÂÆπÊòìÂá∫Áé∞ÁéØÂΩ¢ÈìæË°®ÁöÑÊÉÖÂÜµ„ÄÇ‰ΩÜ JDK 1.8 ËøòÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÔºåÂõ†‰∏∫ Êó†Âä†ÂêåÊ≠•ÈîÅ‰øùÊä§„ÄÇ HashMap-Jdk1.8 Êï∞ÊçÆÁªìÊûÑ Âú®Jdk1.8‰∏≠Ôºå‰ºòÂåñ‰∫ÜHashMapÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂºïÂÖ•Á∫¢ÈªëÊ†ëÔºåÂç≥HashMapÁöÑÊï∞ÊçÆÁªìÊûÑ = Êï∞ÁªÑ + ÈìæË°® + Á∫¢ÈªëÊ†ë„ÄÇ ÂºïÂÖ•ÂéüÂõ† ÂºïÂÖ•Á∫¢ÈªëÊ†ëÁöÑÁõÆÁöÑÂú®‰∫éÊèêÈ´òHashMapÁöÑÊÄßËÉΩÔºåÂç≥Ëß£ÂÜ≥ÂèëÁîüÂìàÂ∏åÁ¢∞ÊíûÂêéÔºåÈìæË°®ËøáÈïøÂØºËá¥Á¥¢ÂºïÊïàÁéáÊÖ¢ÁöÑÈóÆÈ¢ò„ÄÇÂÖ∑‰ΩìÂ∞±ÊòØÂà©Áî®Á∫¢ÈªëÊ†ëÂø´ÈÄüÂ¢ûÂà†ÊîπÊü•ÁöÑÁâπÁÇπÔºåÂ∞ÜÊó∂Èó¥Â§çÊùÇÂ∫¶‰ªéÂéüÊù•ÁöÑO(n)ÈôçÂà∞O(log(n))„ÄÇ Â∫îÁî®Âú∫ÊôØ ÂΩìÈìæË°®ÈïøÂ∫¶&gt;8 Êó∂ÔºåÂ∞ÜËØ•ÈìæË°®ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ëÔºõ Êï∞ÁªÑÂÖÉÁ¥†&amp;ÈìæË°®ÁªìÁÇπÂÆûÁé∞Á±ª Jdk1.8 HashMap‰∏≠ÁöÑÊï∞ÁªÑÂÖÉÁ¥†&amp;ÈìæË°®ÁªìÁÇπÈááÁî®NodeÁ±ªÂÆûÁé∞ÔºåËØ•Á±ªÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * Node = HashMapÁöÑÂÜÖÈÉ®Á±ªÔºåÂÆûÁé∞‰∫ÜMap.EntryÊé•Âè£ÔºåÊú¨Ë¥®ÊòØ = ‰∏Ä‰∏™Êò†Â∞Ñ(ÈîÆÂÄºÂØπ) * ÂÆûÁé∞‰∫ÜgetKey()„ÄÅgetValue()„ÄÅequals(Object o)ÂíåhashCode()Á≠âÊñπÊ≥ï **/ static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; // ÂìàÂ∏åÂÄºÔºåHashMapÊ†πÊçÆËØ•ÂÄºÁ°ÆÂÆöËÆ∞ÂΩïÁöÑ‰ΩçÁΩÆ final K key; // key V value; // value Node&lt;K,V&gt; next;// ÈìæË°®‰∏ã‰∏Ä‰∏™ÁªìÁÇπ // ÊûÑÈÄ†ÊñπÊ≥ï Node(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125; public final K getKey() &#123; return key; &#125; // ËøîÂõû ‰∏é Ê≠§È°π ÂØπÂ∫îÁöÑÈîÆ public final V getValue() &#123; return value; &#125; // ËøîÂõû ‰∏é Ê≠§È°π ÂØπÂ∫îÁöÑÂÄº public final String toString() &#123; return key + "=" + value; &#125; public final V setValue(V newValue) &#123; V oldValue = value; value = newValue; return oldValue; &#125; public final int hashCode() &#123; return Objects.hashCode(key) ^ Objects.hashCode(value); &#125; /** * Âà§Êñ≠2‰∏™EntryÊòØÂê¶Áõ∏Á≠âÔºåÂøÖÈ°ªkeyÂíåvalueÈÉΩÁõ∏Á≠âÔºåÊâçËøîÂõûtrue */ public final boolean equals(Object o) &#123; if (o == this) return true; if (o instanceof Map.Entry) &#123; Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o; if (Objects.equals(key, e.getKey()) &amp;&amp; Objects.equals(value, e.getValue())) return true; &#125; return false; &#125;&#125; Á∫¢ÈªëÊ†ëÁªìÁÇπÂÆûÁé∞Á±ª 12345678910111213141516171819202122232425/** * Á∫¢ÈªëÊ†ëÁªìÁÇπ ÂÆûÁé∞Á±ªÔºöÁªßÊâøËá™LinkedHashMap.Entry&lt;K,V&gt;Á±ª */static final class TreeNode&lt;K,V&gt; extends LinkedHashMap.Entry&lt;K,V&gt; &#123; // Â±ûÊÄß = Áà∂ÁªìÁÇπ„ÄÅÂ∑¶Â≠êÊ†ë„ÄÅÂè≥Â≠êÊ†ë„ÄÅÂà†Èô§ËæÖÂä©ÁªìÁÇπ + È¢úËâ≤TreeNode&lt;K,V&gt; parent; TreeNode&lt;K,V&gt; left; TreeNode&lt;K,V&gt; right;TreeNode&lt;K,V&gt; prev; boolean red; // ÊûÑÈÄ†ÂáΩÊï∞TreeNode(int hash, K key, V val, Node&lt;K,V&gt; next) &#123; super(hash, key, val, next); &#125; // ËøîÂõûÂΩìÂâçÁªìÁÇπÁöÑÊ†πÁªìÁÇπ final TreeNode&lt;K,V&gt; root() &#123; for (TreeNode&lt;K,V&gt; r = this, p;;) &#123; if ((p = r.parent) == null) return r; r = p; &#125; &#125; ÈáçË¶ÅÂ±ûÊÄß 12345678910111213141516171819202122232425262728293031323334/** * ‰∏ªË¶ÅÂèÇÊï∞ Âêå JDK 1.7 * Âç≥ÔºöÂÆπÈáè„ÄÅÂä†ËΩΩÂõ†Â≠ê„ÄÅÊâ©ÂÆπÈòàÂÄºÔºàË¶ÅÊ±Ç„ÄÅËåÉÂõ¥ÂùáÁõ∏ÂêåÔºâ */// 1. ÂÆπÈáèÔºàcapacityÔºâÔºö ÂøÖÈ°ªÊòØ2ÁöÑÂπÇ &amp; &lt;ÊúÄÂ§ßÂÆπÈáèÔºà2ÁöÑ30Ê¨°ÊñπÔºâstatic final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // ÈªòËÆ§ÂÆπÈáè = 16 = 1&lt;&lt;4 = 00001‰∏≠ÁöÑ1ÂêëÂ∑¶Áßª4‰Ωç = 10000 = ÂçÅËøõÂà∂ÁöÑ2^4=16static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30; // ÊúÄÂ§ßÂÆπÈáè = 2ÁöÑ30Ê¨°ÊñπÔºàËã•‰º†ÂÖ•ÁöÑÂÆπÈáèËøáÂ§ßÔºåÂ∞ÜË¢´ÊúÄÂ§ßÂÄºÊõøÊç¢Ôºâ// 2. Âä†ËΩΩÂõ†Â≠ê(Load factor)ÔºöHashMapÂú®ÂÖ∂ÂÆπÈáèËá™Âä®Â¢ûÂä†ÂâçÂèØËææÂà∞Â§öÊª°ÁöÑ‰∏ÄÁßçÂ∞∫Â∫¶ final float loadFactor; // ÂÆûÈôÖÂä†ËΩΩÂõ†Â≠êstatic final float DEFAULT_LOAD_FACTOR = 0.75f; // ÈªòËÆ§Âä†ËΩΩÂõ†Â≠ê = 0.75// 3. Êâ©ÂÆπÈòàÂÄºÔºàthresholdÔºâÔºöÂΩìÂìàÂ∏åË°®ÁöÑÂ§ßÂ∞è ‚â• Êâ©ÂÆπÈòàÂÄºÊó∂ÔºåÂ∞±‰ºöÊâ©ÂÆπÂìàÂ∏åË°®ÔºàÂç≥Êâ©ÂÖÖHashMapÁöÑÂÆπÈáèÔºâ // a. Êâ©ÂÆπ = ÂØπÂìàÂ∏åË°®ËøõË°åresizeÊìç‰ΩúÔºàÂç≥ÈáçÂª∫ÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑÔºâÔºå‰ªéËÄåÂìàÂ∏åË°®Â∞ÜÂÖ∑ÊúâÂ§ßÁ∫¶‰∏§ÂÄçÁöÑÊ°∂Êï∞// b. Êâ©ÂÆπÈòàÂÄº = ÂÆπÈáè x Âä†ËΩΩÂõ†Â≠êint threshold;// 4. ÂÖ∂‰ªñtransient Node&lt;K,V&gt;[] table; // Â≠òÂÇ®Êï∞ÊçÆÁöÑNodeÁ±ªÂûã Êï∞ÁªÑÔºåÈïøÂ∫¶ = 2ÁöÑÂπÇÔºõÊï∞ÁªÑÁöÑÊØè‰∏™ÂÖÉÁ¥† = 1‰∏™ÂçïÈìæË°®transient int size;// HashMapÁöÑÂ§ßÂ∞èÔºåÂç≥ HashMap‰∏≠Â≠òÂÇ®ÁöÑÈîÆÂÄºÂØπÁöÑÊï∞Èáè /** * ‰∏éÁ∫¢ÈªëÊ†ëÁõ∏ÂÖ≥ÁöÑÂèÇÊï∞ */ // 1. Ê°∂ÁöÑÊ†ëÂåñÈòàÂÄºÔºöÂç≥ ÈìæË°®ËΩ¨ÊàêÁ∫¢ÈªëÊ†ëÁöÑÈòàÂÄºÔºåÂú®Â≠òÂÇ®Êï∞ÊçÆÊó∂ÔºåÂΩìÈìæË°®ÈïøÂ∫¶ &gt; ËØ•ÂÄºÊó∂ÔºåÂàôÂ∞ÜÈìæË°®ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ë static final int TREEIFY_THRESHOLD = 8; // 2. Ê°∂ÁöÑÈìæË°®ËøòÂéüÈòàÂÄºÔºöÂç≥ Á∫¢ÈªëÊ†ëËΩ¨‰∏∫ÈìæË°®ÁöÑÈòàÂÄºÔºåÂΩìÂú®Êâ©ÂÆπÔºàresizeÔºàÔºâÔºâÊó∂ÔºàÊ≠§Êó∂HashMapÁöÑÊï∞ÊçÆÂ≠òÂÇ®‰ΩçÁΩÆ‰ºöÈáçÊñ∞ËÆ°ÁÆóÔºâÔºåÂú®ÈáçÊñ∞ËÆ°ÁÆóÂ≠òÂÇ®‰ΩçÁΩÆÂêéÔºåÂΩìÂéüÊúâÁöÑÁ∫¢ÈªëÊ†ëÂÜÖÊï∞Èáè &lt; 6Êó∂ÔºåÂàôÂ∞Ü Á∫¢ÈªëÊ†ëËΩ¨Êç¢ÊàêÈìæË°® static final int UNTREEIFY_THRESHOLD = 6; // 3. ÊúÄÂ∞èÊ†ëÂΩ¢ÂåñÂÆπÈáèÈòàÂÄºÔºöÂç≥ ÂΩìÂìàÂ∏åË°®‰∏≠ÁöÑÂÆπÈáè &gt; ËØ•ÂÄºÊó∂ÔºåÊâçÂÖÅËÆ∏Ê†ëÂΩ¢ÂåñÈìæË°® ÔºàÂç≥ Â∞ÜÈìæË°® ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ëÔºâ // Âê¶ÂàôÔºåËã•Ê°∂ÂÜÖÂÖÉÁ¥†Â§™Â§öÊó∂ÔºåÂàôÁõ¥Êé•Êâ©ÂÆπÔºåËÄå‰∏çÊòØÊ†ëÂΩ¢Âåñ // ‰∏∫‰∫ÜÈÅøÂÖçËøõË°åÊâ©ÂÆπ„ÄÅÊ†ëÂΩ¢ÂåñÈÄâÊã©ÁöÑÂÜ≤Á™ÅÔºåËøô‰∏™ÂÄº‰∏çËÉΩÂ∞è‰∫é 4 * TREEIFY_THRESHOLD static final int MIN_TREEIFY_CAPACITY = 64; ÊûÑÈÄ†ÂáΩÊï∞ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586/** * Ê∫êÁ†ÅÂàÜÊûêÔºö‰∏ªË¶ÅÊòØHashMapÁöÑÊûÑÈÄ†ÂáΩÊï∞ = 4‰∏™ * ‰ªÖË¥¥Âá∫ÂÖ≥‰∫éHashMapÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊ∫êÁ†Å */public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable&#123; // ÁúÅÁï•‰∏äËäÇÈòêËø∞ÁöÑÂèÇÊï∞ /** * ÊûÑÈÄ†ÂáΩÊï∞1ÔºöÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºàÊó†ÂèÇÔºâ * Âä†ËΩΩÂõ†Â≠ê &amp; ÂÆπÈáè = ÈªòËÆ§ = 0.75„ÄÅ16 */ public HashMap() &#123; this.loadFactor = DEFAULT_LOAD_FACTOR; &#125; /** * ÊûÑÈÄ†ÂáΩÊï∞2ÔºöÊåáÂÆö‚ÄúÂÆπÈáèÂ§ßÂ∞è‚ÄùÁöÑÊûÑÈÄ†ÂáΩÊï∞ * Âä†ËΩΩÂõ†Â≠ê = ÈªòËÆ§ = 0.75 „ÄÅÂÆπÈáè = ÊåáÂÆöÂ§ßÂ∞è */ public HashMap(int initialCapacity) &#123; // ÂÆûÈôÖ‰∏äÊòØË∞ÉÁî®ÊåáÂÆö‚ÄúÂÆπÈáèÂ§ßÂ∞è‚ÄùÂíå‚ÄúÂä†ËΩΩÂõ†Â≠ê‚ÄùÁöÑÊûÑÈÄ†ÂáΩÊï∞ // Âè™ÊòØÂú®‰º†ÂÖ•ÁöÑÂä†ËΩΩÂõ†Â≠êÂèÇÊï∞ = ÈªòËÆ§Âä†ËΩΩÂõ†Â≠ê this(initialCapacity, DEFAULT_LOAD_FACTOR); &#125; /** * ÊûÑÈÄ†ÂáΩÊï∞3ÔºöÊåáÂÆö‚ÄúÂÆπÈáèÂ§ßÂ∞è‚ÄùÂíå‚ÄúÂä†ËΩΩÂõ†Â≠ê‚ÄùÁöÑÊûÑÈÄ†ÂáΩÊï∞ * Âä†ËΩΩÂõ†Â≠ê &amp; ÂÆπÈáè = Ëá™Â∑±ÊåáÂÆö */ public HashMap(int initialCapacity, float loadFactor) &#123; // ÊåáÂÆöÂàùÂßãÂÆπÈáèÂøÖÈ°ªÈùûË¥üÔºåÂê¶ÂàôÊä•Èîô if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal initial capacity: " + initialCapacity); // HashMapÁöÑÊúÄÂ§ßÂÆπÈáèÂè™ËÉΩÊòØMAXIMUM_CAPACITYÔºåÂì™ÊÄï‰º†ÂÖ•ÁöÑ &gt; ÊúÄÂ§ßÂÆπÈáè if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; // Â°´ÂÖÖÊØîÂøÖÈ°ª‰∏∫Ê≠£ if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException("Illegal load factor: " + loadFactor); // ËÆæÁΩÆ Âä†ËΩΩÂõ†Â≠ê this.loadFactor = loadFactor; // ËÆæÁΩÆ Êâ©ÂÆπÈòàÂÄº // Ê≥®ÔºöÊ≠§Â§Ñ‰∏çÊòØÁúüÊ≠£ÁöÑÈòàÂÄºÔºå‰ªÖ‰ªÖÂè™ÊòØÂ∞Ü‰º†ÂÖ•ÁöÑÂÆπÈáèÂ§ßÂ∞èËΩ¨Âåñ‰∏∫Ôºö&gt;‰º†ÂÖ•ÂÆπÈáèÂ§ßÂ∞èÁöÑÊúÄÂ∞èÁöÑ2ÁöÑÂπÇÔºåËØ•ÈòàÂÄºÂêéÈù¢‰ºöÈáçÊñ∞ËÆ°ÁÆó this.threshold = tableSizeFor(initialCapacity); &#125; /** * ÊûÑÈÄ†ÂáΩÊï∞4ÔºöÂåÖÂê´‚ÄúÂ≠êMap‚ÄùÁöÑÊûÑÈÄ†ÂáΩÊï∞ * Âç≥ ÊûÑÈÄ†Âá∫Êù•ÁöÑHashMapÂåÖÂê´‰º†ÂÖ•MapÁöÑÊò†Â∞ÑÂÖ≥Á≥ª * Âä†ËΩΩÂõ†Â≠ê &amp; ÂÆπÈáè = ÈªòËÆ§ */ public HashMap(Map&lt;? extends K, ? extends V&gt; m) &#123; // ËÆæÁΩÆÂÆπÈáèÂ§ßÂ∞è &amp; Âä†ËΩΩÂõ†Â≠ê = ÈªòËÆ§ this.loadFactor = DEFAULT_LOAD_FACTOR; // Â∞Ü‰º†ÂÖ•ÁöÑÂ≠êMap‰∏≠ÁöÑÂÖ®ÈÉ®ÂÖÉÁ¥†ÈÄê‰∏™Ê∑ªÂä†Âà∞HashMap‰∏≠ putMapEntries(m, false); &#125;&#125;/** * Â∞Ü‰º†ÂÖ•ÁöÑÂÆπÈáèÂ§ßÂ∞èËΩ¨Âåñ‰∏∫Ôºö&gt;‰º†ÂÖ•ÂÆπÈáèÂ§ßÂ∞èÁöÑÊúÄÂ∞èÁöÑ2ÁöÑÂπÇ * ‰∏éJDK 1.7ÂØπÊØîÔºöÁ±ª‰ºº‰∫éJDK 1.7 ‰∏≠ inflateTable()ÈáåÁöÑ roundUpToPowerOf2(toSize) */static final int tableSizeFor(int cap) &#123; int n = cap - 1; n |= n &gt;&gt;&gt; 1; n |= n &gt;&gt;&gt; 2; n |= n &gt;&gt;&gt; 4; n |= n &gt;&gt;&gt; 8; n |= n &gt;&gt;&gt; 16; return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;&#125; putÊìç‰Ωú 12345678/** * Ê∫êÁ†ÅÂàÜÊûêÔºö‰∏ªË¶ÅÂàÜÊûêHashMapÁöÑputÂáΩÊï∞ */public V put(K key, V value) &#123; // 1. ÂØπ‰º†ÂÖ•Êï∞ÁªÑÁöÑÈîÆKeyËÆ°ÁÆóHashÂÄº // 2. ÂÜçË∞ÉÁî®putValÔºàÔºâÊ∑ªÂä†Êï∞ÊçÆËøõÂéª return putVal(hash(key), key, value, false, true);&#125; hash--ËÆ°ÁÆóHashÂÄº 1234567891011121314151617/** * hash(key) * ‰ΩúÁî®ÔºöËÆ°ÁÆó‰º†ÂÖ•Êï∞ÊçÆÁöÑÂìàÂ∏åÁ†ÅÔºàÂìàÂ∏åÂÄº„ÄÅHashÂÄºÔºâ * ËØ•ÂáΩÊï∞Âú®JDK 1.7 Âíå 1.8 ‰∏≠ÁöÑÂÆûÁé∞‰∏çÂêåÔºå‰ΩÜÂéüÁêÜ‰∏ÄÊ†∑ = Êâ∞Âä®ÂáΩÊï∞ = ‰ΩøÂæóÊ†πÊçÆkeyÁîüÊàêÁöÑÂìàÂ∏åÁ†ÅÔºàhashÂÄºÔºâÂàÜÂ∏ÉÊõ¥Âä†ÂùáÂåÄ„ÄÅÊõ¥ÂÖ∑Â§áÈöèÊú∫ÊÄßÔºåÈÅøÂÖçÂá∫Áé∞hashÂÄºÂÜ≤Á™ÅÔºàÂç≥Êåá‰∏çÂêåkey‰ΩÜÁîüÊàêÂêå1‰∏™hashÂÄºÔºâ * JDK 1.7 ÂÅö‰∫Ü9Ê¨°Êâ∞Âä®Â§ÑÁêÜ = 4Ê¨°‰ΩçËøêÁÆó + 5Ê¨°ÂºÇÊàñËøêÁÆó * JDK 1.8 ÁÆÄÂåñ‰∫ÜÊâ∞Âä®ÂáΩÊï∞ = Âè™ÂÅö‰∫Ü2Ê¨°Êâ∞Âä® = 1Ê¨°‰ΩçËøêÁÆó + 1Ê¨°ÂºÇÊàñËøêÁÆó */ // JDK 1.8ÂÆûÁé∞ÔºöÂ∞Ü ÈîÆkey ËΩ¨Êç¢Êàê ÂìàÂ∏åÁ†ÅÔºàhashÂÄºÔºâÊìç‰Ωú = ‰ΩøÁî®hashCode() + 1Ê¨°‰ΩçËøêÁÆó + 1Ê¨°ÂºÇÊàñËøêÁÆóÔºà2Ê¨°Êâ∞Âä®Ôºâ // 1. ÂèñhashCodeÂÄºÔºö h = key.hashCode() // 2. È´ò‰ΩçÂèÇ‰∏é‰Ωé‰ΩçÁöÑËøêÁÆóÔºöh ^ (h &gt;&gt;&gt; 16) static final int hash(Object key) &#123; int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16); // a. ÂΩìkey = nullÊó∂ÔºåhashÂÄº = 0ÔºåÊâÄ‰ª•HashMapÁöÑkey ÂèØ‰∏∫null // Ê≥®ÔºöÂØπÊØîHashTableÔºåHashTableÂØπkeyÁõ¥Êé•hashCodeÔºàÔºâÔºåËã•key‰∏∫nullÊó∂Ôºå‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåÊâÄ‰ª•HashTableÁöÑkey‰∏çÂèØ‰∏∫null // b. ÂΩìkey ‚â† nullÊó∂ÔºåÂàôÈÄöËøáÂÖàËÆ°ÁÆóÂá∫ keyÁöÑ hashCode()ÔºàËÆ∞‰∏∫hÔºâÔºåÁÑ∂Âêé ÂØπÂìàÂ∏åÁ†ÅËøõË°å Êâ∞Âä®Â§ÑÁêÜÔºö Êåâ‰Ωç ÂºÇÊàñÔºà^Ôºâ ÂìàÂ∏åÁ†ÅËá™Ë∫´Âè≥Áßª16‰ΩçÂêéÁöÑ‰∫åËøõÂà∂ &#125; putVal--Â≠òÊîæÊï∞ÊçÆÂà∞ÂìàÂ∏åË°® Áî±‰∫éÊï∞ÊçÆÁªìÊûÑ‰∏≠Âä†ÂÖ•‰∫ÜÁ∫¢ÈªëÊ†ëÔºåÊâÄ‰ª•Âú®Â≠òÊîæÊï∞ÊçÆÂà∞ÂìàÂ∏åË°®‰∏≠Êó∂ÔºåÈúÄËøõË°åÂ§öÊ¨°Êï∞ÊçÆÁªìÊûÑÁöÑÂà§Êñ≠ÔºöÊï∞ÁªÑ„ÄÅÁ∫¢ÈªëÊ†ë„ÄÅÈìæË°®„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185 /** * Â≠òÊîæÊï∞ÊçÆÂà∞ÂìàÂ∏åË°® */final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; // 1. Ëã•ÂìàÂ∏åË°®ÁöÑÊï∞ÁªÑtab‰∏∫Á©∫ÊàñËÄÖÈïøÂ∫¶‰∏∫0ÔºåÂàô ÈÄöËøáresize() ÂàõÂª∫ // ÊâÄ‰ª•ÔºåÂàùÂßãÂåñÂìàÂ∏åË°®ÁöÑÊó∂Êú∫ = Á¨¨1Ê¨°Ë∞ÉÁî®putÂáΩÊï∞Êó∂ÔºåÂç≥Ë∞ÉÁî®resize() ÂàùÂßãÂåñÂàõÂª∫ if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; // 2. ËÆ°ÁÆóÊèíÂÖ•Â≠òÂÇ®ÁöÑÊï∞ÁªÑÁ¥¢ÂºïiÔºöÊ†πÊçÆÈîÆÂÄºkeyËÆ°ÁÆóÁöÑhashÂÄº ÂæóÂà∞ // Ê≠§Â§ÑÁöÑÊï∞ÁªÑ‰∏ãÊ†áËÆ°ÁÆóÊñπÂºè = i = (n - 1) &amp; hashÔºåÂêåJDK 1.7‰∏≠ÁöÑindexForÔºàÔºâ // 3. ÊèíÂÖ•Êó∂ÔºåÈúÄÂà§Êñ≠ÊòØÂê¶Â≠òÂú®HashÂÜ≤Á™ÅÔºö // Ëã•‰∏çÂ≠òÂú®ÔºàÂç≥ÂΩìÂâçtable[i] == nullÔºâÔºåÂàôÁõ¥Êé•Âú®ËØ•Êï∞ÁªÑ‰ΩçÁΩÆÊñ∞Âª∫ÁªìÁÇπÔºåÊèíÂÖ•ÂÆåÊØï // Âê¶ÂàôÔºå‰ª£Ë°®Â≠òÂú®HashÂÜ≤Á™ÅÔºåÂç≥ÂΩìÂâçÂ≠òÂÇ®‰ΩçÁΩÆÂ∑≤Â≠òÂú®ÁªìÁÇπÔºåÂàô‰æùÊ¨°ÂæÄ‰∏ãÂà§Êñ≠Ôºö // a. ÂΩìÂâç‰ΩçÁΩÆÁöÑkeyÊòØÂê¶‰∏éÈúÄÊèíÂÖ•ÁöÑkeyÁõ∏Âêå„ÄÅ // b. Âà§Êñ≠ÈúÄÊèíÂÖ•ÁöÑÊï∞ÊçÆÁªìÊûÑÊòØÂê¶‰∏∫Á∫¢ÈªëÊ†ë or ÈìæË°® if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else &#123;//ËØ¥ÊòéÂæÖÊèíÂÖ•‰ΩçÁΩÆÂ≠òÂú®ÂÖÉÁ¥† Node&lt;K,V&gt; e; K k; // a. Âà§Êñ≠ table[i]ÁöÑÂÖÉÁ¥†ÁöÑkeyÊòØÂê¶‰∏é ÈúÄÊèíÂÖ•ÁöÑkey‰∏ÄÊ†∑ÔºåËã•Áõ∏ÂêåÂàô Áõ¥Êé•Áî®Êñ∞value Ë¶ÜÁõñ Êóßvalue // Âà§Êñ≠ÂéüÂàôÔºöequalsÔºàÔºâ if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) //Â∞ÜÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ËµãÂÄºÁªôeÔºåÁî®eÊù•ËÆ∞ÂΩï e = p; // b. ÁªßÁª≠Âà§Êñ≠ÔºöÈúÄÊèíÂÖ•ÁöÑÊï∞ÊçÆÁªìÊûÑÊòØÂê¶‰∏∫Á∫¢ÈªëÊ†ë or ÈìæË°® // Ëã•ÊòØÁ∫¢ÈªëÊ†ëÔºåÂàôÁõ¥Êé•Âú®Ê†ë‰∏≠ÊèíÂÖ• or Êõ¥Êñ∞ÈîÆÂÄºÂØπ else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); // Ëã•ÊòØÈìæË°®,ÂàôÂú®ÈìæË°®‰∏≠ÊèíÂÖ• or Êõ¥Êñ∞ÈîÆÂÄºÂØπ // i. ÈÅçÂéÜtable[i]ÔºåÂà§Êñ≠KeyÊòØÂê¶Â∑≤Â≠òÂú®ÔºöÈááÁî®equalsÔºàÔºâ ÂØπÊØîÂΩìÂâçÈÅçÂéÜÁªìÁÇπÁöÑkey ‰∏é ÈúÄÊèíÂÖ•Êï∞ÊçÆÁöÑkeyÔºöËã•Â∑≤Â≠òÂú®ÔºåÂàôÁõ¥Êé•Áî®Êñ∞value Ë¶ÜÁõñ Êóßvalue // ii. ÈÅçÂéÜÂÆåÊØïÂêé‰ªçÊó†ÂèëÁé∞‰∏äËø∞ÊÉÖÂÜµÔºåÂàôÁõ¥Êé•Âú®ÈìæË°®Â∞æÈÉ®ÊèíÂÖ•Êï∞ÊçÆ // Ê≥®ÔºöÊñ∞Â¢ûÁªìÁÇπÂêéÔºåÈúÄÂà§Êñ≠ÈìæË°®ÈïøÂ∫¶ÊòØÂê¶&gt;8Ôºà8 = Ê°∂ÁöÑÊ†ëÂåñÈòàÂÄºÔºâÔºöËã•ÊòØÔºåÂàôÊääÈìæË°®ËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ë else &#123; //Âú®ÈìæË°®Êú´Â∞æÊèíÂÖ•ÁªìÁÇπ for (int binCount = 0; ; ++binCount) &#123; // ÂØπ‰∫éiiÔºöËã•Êï∞ÁªÑÁöÑ‰∏ã1‰∏™‰ΩçÁΩÆÔºåË°®Á§∫Â∑≤Âà∞Ë°®Â∞æ‰πüÊ≤°ÊúâÊâæÂà∞keyÂÄºÁõ∏ÂêåÁªìÁÇπÔºåÂàôÊñ∞Âª∫ÁªìÁÇπ = ÊèíÂÖ•ÁªìÁÇπ // Ê≥®ÔºöÊ≠§Â§ÑÊòØ‰ªéÈìæË°®Â∞æÊèíÂÖ•Ôºå‰∏éJDK 1.7‰∏çÂêåÔºà‰ªéÈìæË°®Â§¥ÊèíÂÖ•ÔºåÂç≥Ê∞∏ËøúÈÉΩÊòØÊ∑ªÂä†Âà∞Êï∞ÁªÑÁöÑ‰ΩçÁΩÆÔºåÂéüÊù•Êï∞ÁªÑ‰ΩçÁΩÆÁöÑÊï∞ÊçÆÂàôÂæÄÂêéÁßªÔºâ if ((e = p.next) == null) &#123; p.next = newNode(hash, key, value, null); // ÊèíÂÖ•ÁªìÁÇπÂêéÔºåËã•ÈìæË°®ÁªìÁÇπ&gt;Êï∞ÈòàÂÄºÔºåÂàôÂ∞ÜÈìæË°®ËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ë if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st //ÈìæË°®ËΩ¨Á∫¢ÈªëÊ†ë treeifyBin(tab, hash); break; &#125; //ÈÅçÂéÜtable[i]ÔºåÂà§Êñ≠KeyÊòØÂê¶Â∑≤Â≠òÂú®ÔºöÈááÁî®equalsÔºàÔºâ ÂØπÊØîÂΩìÂâçÈÅçÂéÜÁªìÁÇπÁöÑkey ‰∏é ÈúÄÊèíÂÖ•Êï∞ÊçÆÁöÑkey if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) //Áõ∏Á≠âÔºåË∑≥Âá∫Âæ™ÁéØ break; // Êõ¥Êñ∞pÊåáÂêë‰∏ã‰∏Ä‰∏™ÁªìÁÇπÔºåÁªßÁª≠ÈÅçÂéÜ p = e; &#125; &#125; //Ë°®Á§∫Âú®Ê°∂‰∏≠ÊâæÂà∞keyÂÄº„ÄÅhashÂÄº‰∏éÊèíÂÖ•ÂÖÉÁ¥†Áõ∏Á≠âÁöÑÁªìÁÇπÔºåÁõ¥Êé•Áî®Êñ∞value Ë¶ÜÁõñ Êóßvalue Âπ∂ ËøîÂõûÊóßvalue if (e != null) &#123; // existing mapping for key //ËÆ∞ÂΩïeÁöÑvalue V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) //Êñ∞ÂÄºÊõøÊç¢ÊóßÂÄº e.value = value; afterNodeAccess(e);// ÊõøÊç¢ÊóßÂÄºÊó∂‰ºöË∞ÉÁî®ÁöÑÊñπÊ≥ïÔºàÈªòËÆ§ÂÆûÁé∞‰∏∫Á©∫Ôºâ //ËøîÂõûÊóßÂÄº return oldValue; &#125; &#125; ++modCount; // ÊèíÂÖ•ÊàêÂäüÂêéÔºåÂà§Êñ≠ÂÆûÈôÖÂ≠òÂú®ÁöÑÈîÆÂÄºÂØπÊï∞Èáèsize &gt; ÊúÄÂ§ßÂÆπÈáèthreshold // Ëã• &gt; ÔºåÂàôËøõË°åÊâ©ÂÆπ if (++size &gt; threshold) resize(); afterNodeInsertion(evict);// ÊèíÂÖ•ÊàêÂäüÊó∂‰ºöË∞ÉÁî®ÁöÑÊñπÊ≥ïÔºàÈªòËÆ§ÂÆûÁé∞‰∏∫Á©∫Ôºâ return null;&#125;/** * ÂêëÁ∫¢ÈªëÊ†ëÊèíÂÖ• or Êõ¥Êñ∞Êï∞ÊçÆÔºàÈîÆÂÄºÂØπÔºâ * ËøáÁ®ãÔºöÈÅçÂéÜÁ∫¢ÈªëÊ†ëÂà§Êñ≠ËØ•ÁªìÁÇπÁöÑkeyÊòØÂê¶‰∏éÈúÄÊèíÂÖ•ÁöÑkey Áõ∏ÂêåÔºö * a. Ëã•Áõ∏ÂêåÔºåÂàôÊñ∞valueË¶ÜÁõñÊóßvalue * b. Ëã•‰∏çÁõ∏ÂêåÔºåÂàôÊèíÂÖ• */final TreeNode&lt;K,V&gt; putTreeVal(HashMap&lt;K,V&gt; map, Node&lt;K,V&gt;[] tab, int h, K k, V v) &#123; Class&lt;?&gt; kc = null; boolean searched = false; TreeNode&lt;K,V&gt; root = (parent != null) ? root() : this; //‰ªéÊ†πÁªìÁÇπÂºÄÂßãÊü•ÊâæÂêàÈÄÇÁöÑÊèíÂÖ•‰ΩçÁΩÆÔºà‰∏é‰∫åÂèâÊêúÁ¥¢Ê†ëÊü•ÊâæËøáÁ®ãÁõ∏ÂêåÔºâ for (TreeNode&lt;K,V&gt; p = root;;) &#123; int dir, ph; K pk; if ((ph = p.hash) &gt; h) dir = -1;//dirÂ∞è‰∫é0ÔºåÊé•‰∏ãÊù•Êü•ÊâæÂΩìÂâçÁªìÁÇπÁöÑÂ∑¶Â≠©Â≠ê else if (ph &lt; h) dir = 1;//dirÂ§ß‰∫é0ÔºåÊé•‰∏ãÊù•Êü•ÊâæÂΩìÂâçÁªìÁÇπÁöÑÂè≥Â≠©Â≠ê else if ((pk = p.key) == k || (k != null &amp;&amp; k.equals(pk))) //ËøôÈáå‰ª£Ë°®hashÂÄºÁõ∏ÂêåÔºåkeyÁõ∏Âêå return p; /** *Ë¶ÅËøõÂÖ•‰∏ãÈù¢Ëøô‰∏™else if,‰ª£Ë°®Êúâ‰ª•‰∏ãÂá†‰∏™Âê´‰πâ: *1„ÄÅÂΩìÂâçÁªìÁÇπ‰∏éÂæÖÊèíÂÖ•ÁªìÁÇπ key ‰∏çÂêå, hash ÂÄºÁõ∏Âêå; *2„ÄÅÔΩãÊòØ‰∏çÂèØÊØîËæÉÁöÑÔºåÂç≥ÔΩãÂπ∂Êú™ÂÆûÁé∞ comparable&lt;K&gt; Êé•Âè£ * ÔºàËã• k ÂÆûÁé∞‰∫Ücomparable&lt;K&gt; Êé•Âè£ÔºåcomparableClassForÔºàkÔºâËøîÂõûÁöÑÊòØÔΩãÁöÑ class,ËÄå‰∏çÊòØ nullÔºâ * ÊàñËÄÖ compareComparables(kc, k, pk) ËøîÂõûÂÄº‰∏∫ 0 * (pk ‰∏∫Á©∫ ÊàñËÄÖ ÊåâÁÖß k.compareTo(pk) ËøîÂõûÂÄº‰∏∫ÔºêÔºå * ËøîÂõûÂÄº‰∏∫ÔºêÂèØËÉΩÊòØÁî±‰∫é ÔΩãÁöÑcompareTo ÊñπÊ≥ïÂÆûÁé∞‰∏çÂΩìÂºïËµ∑ÁöÑÔºåcompareTo Âà§ÂÆöÁõ∏Á≠âÔºåËÄå‰∏ä‰∏™ else if ‰∏≠ equals Âà§ÂÆö‰∏çÁ≠â) */ else if ((kc == null &amp;&amp; (kc = comparableClassFor(k)) == null) || (dir = compareComparables(kc, k, pk)) == 0) &#123; //Âú®‰ª•ÂΩìÂâçÁªìÁÇπ‰∏∫Ê†πÁöÑÊï¥‰∏™Ê†ë‰∏äÊêúÁ¥¢ÊòØÂê¶Â≠òÂú®ÂæÖÊèíÂÖ•ÁöÑÁªìÁÇπÔºàÂè™‰ºöÊêúÁ¥¢‰∏ÄÊ¨°Ôºâ if (!searched) &#123; TreeNode&lt;K,V&gt; q, ch; searched = true; if (((ch = p.left) != null &amp;&amp; (q = ch.find(h, k, kc)) != null) || ((ch = p.right) != null &amp;&amp; (q = ch.find(h, k, kc)) != null)) return q; &#125; //Â¶ÇÊûú‰ªçÊú™ÊØîËæÉÂá∫Â§ßÂ∞èÔºåÂ∞±ÈúÄË¶ÅËøõË°å‰ª≤Ë£Å‰∫ÜÔºå‰ª≤Ë£ÅÊñπÊ≥ï‰∏∫ tieBreakOrder dir = tieBreakOrder(k, pk); &#125; TreeNode&lt;K,V&gt; xp = p; if ((p = (dir &lt;= 0) ? p.left : p.right) == null) &#123; //ÊâæÂà∞‰∫ÜÂæÖÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÔºåxp ‰∏∫ÂæÖÊèíÂÖ•ÁªìÁÇπÁöÑÁà∂ÁªìÁÇπ //Ê≥®ÊÑèTreeNodeÁªìÁÇπ‰∏≠Êó¢Â≠òÂú®Ê†ëÁä∂ÂÖ≥Á≥ªÔºå‰πüÂ≠òÂú®ÈìæÂºèÂÖ≥Á≥ªÔºåÂπ∂‰∏îÊòØÂèåÁ´ØÈìæË°® Node&lt;K,V&gt; xpn = xp.next; TreeNode&lt;K,V&gt; x = map.newTreeNode(h, k, v, xpn); if (dir &lt;= 0) xp.left = x; else xp.right = x; xp.next = x; x.parent = x.prev = xp; if (xpn != null) ((TreeNode&lt;K,V&gt;)xpn).prev = x; //ÊèíÂÖ•ÁªìÁÇπÂêéËøõË°å‰∫åÂèâÊ†ëÁöÑÂπ≥Ë°°Êìç‰Ωú moveRootToFront(tab, balanceInsertion(root, x)); return null; &#125; &#125;&#125;/** * Â∞ÜÊôÆÈÄöÁªìÁÇπÈìæË°®ËΩ¨Êç¢ÊàêÊ†ëÂΩ¢ÁªìÁÇπÈìæË°® * Ê†ëÂåñË¶ÅÊª°Ë∂≥‰∏§‰∏™Êù°‰ª∂Ôºö * 1. ÈìæË°®ÈïøÂ∫¶Â§ß‰∫éÁ≠â‰∫é TREEIFY_THRESHOLD * 2. Ê°∂Êï∞ÁªÑÂÆπÈáèÂ§ß‰∫éÁ≠â‰∫é MIN_TREEIFY_CAPACITY * Á¨¨‰∏Ä‰∏™Êù°‰ª∂ÊØîËæÉÂ•ΩÁêÜËß£ÔºåÂä†ÂÖ•Á¨¨‰∫å‰∏™Êù°‰ª∂Ôºå‰∏™‰∫∫ËßâÂæóÂéüÂõ†Â¶Ç‰∏ãÔºö * ÂΩìÊ°∂Êï∞ÁªÑÂÆπÈáèÊØîËæÉÂ∞èÊó∂ÔºåÈîÆÂÄºÂØπÁªìÁÇπ hash ÁöÑÁ¢∞ÊíûÁéáÂèØËÉΩ‰ºöÊØîËæÉÈ´òÔºåËøõËÄåÂØºËá¥ÈìæË°®ÈïøÂ∫¶ËæÉÈïø„ÄÇ * Ëøô‰∏™Êó∂ÂÄôÂ∫îËØ•‰ºòÂÖàÊâ©ÂÆπÔºåËÄå‰∏çÊòØÁ´ãÈ©¨Ê†ëÂåñ„ÄÇÊØïÁ´üÈ´òÁ¢∞ÊíûÁéáÊòØÂõ†‰∏∫Ê°∂Êï∞ÁªÑÂÆπÈáèËæÉÂ∞èÂºïËµ∑ÁöÑÔºåËøô‰∏™ÊòØ‰∏ªÂõ†„ÄÇ * ÂÆπÈáèÂ∞èÊó∂Ôºå‰ºòÂÖàÊâ©ÂÆπÂèØ‰ª•ÈÅøÂÖç‰∏Ä‰∫õÂàóÁöÑ‰∏çÂøÖË¶ÅÁöÑÊ†ëÂåñËøáÁ®ã„ÄÇÂêåÊó∂ÔºåÊ°∂ÂÆπÈáèËæÉÂ∞èÊó∂ÔºåÊâ©ÂÆπ‰ºöÊØîËæÉÈ¢ëÁπÅÔºåÊâ©ÂÆπÊó∂ÈúÄË¶ÅÊãÜÂàÜÁ∫¢ÈªëÊ†ëÂπ∂ÈáçÊñ∞Êò†Â∞Ñ„ÄÇÊâÄ‰ª•Âú®Ê°∂ÂÆπÈáèÊØîËæÉÂ∞èÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ∞ÜÈïøÈìæË°®ËΩ¨ÊàêÁ∫¢ÈªëÊ†ëÊòØ‰∏Ä‰ª∂ÂêÉÂäõ‰∏çËÆ®Â•ΩÁöÑ‰∫ã„ÄÇ */final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) &#123; int n, index; Node&lt;K,V&gt; e; //// Â¶ÇÊûú tab.length Â∞è‰∫é MIN_TREEIFY_CAPACITYÔºå ‰ºòÂÖàËøõË°åÊâ©ÂÆπËÄå‰∏çÊòØÊ†ëÂåñ if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY) resize(); else if ((e = tab[index = (n - 1) &amp; hash]) != null) &#123; // hd ‰∏∫Â§¥ÁªìÁÇπÔºàheadÔºâÔºåtl ‰∏∫Â∞æÁªìÁÇπÔºàtailÔºâ TreeNode&lt;K,V&gt; hd = null, tl = null; do &#123; // Â∞ÜÊôÆÈÄöÁªìÁÇπÊõøÊç¢ÊàêÊ†ëÂΩ¢ÁªìÁÇπ TreeNode&lt;K,V&gt; p = replacementTreeNode(e, null); if (tl == null) hd = p; else &#123; p.prev = tl; tl.next = p; &#125; tl = p; &#125; while ((e = e.next) != null);// Â∞ÜÊôÆÈÄöÈìæË°®ËΩ¨ÊàêÁî±Ê†ëÂΩ¢ÁªìÁÇπÈìæË°® if ((tab[index] = hd) != null) // Â∞ÜÊ†ëÂΩ¢ÈìæË°®ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ë hd.treeify(tab); &#125;&#125; ÊµÅÁ®ãÂõæÂ¶Ç‰∏ãÔºö resize--Êâ©ÂÆπ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185/** * Êâ©ÂÆπ * ËØ•ÂáΩÊï∞Êúâ2Áßç‰ΩøÁî®ÊÉÖÂÜµÔºö1.ÂàùÂßãÂåñÂìàÂ∏åË°® 2.ÂΩìÂâçÊï∞ÁªÑÂÆπÈáèËøáÂ∞èÔºåÈúÄÊâ©ÂÆπ */final Node&lt;K,V&gt;[] resize() &#123; //// Êâ©ÂÆπÂâçÁöÑÊï∞ÁªÑÔºàÂΩìÂâçÊï∞ÁªÑÔºâ Node&lt;K,V&gt;[] oldTab = table; //// Êâ©ÂÆπÂâçÁöÑÊï∞ÁªÑÁöÑÂÆπÈáè = ÈïøÂ∫¶ int oldCap = (oldTab == null) ? 0 : oldTab.length; //// Êâ©ÂÆπÂâçÁöÑÊï∞ÁªÑÁöÑÈòàÂÄº int oldThr = threshold; int newCap, newThr = 0; // Â¶ÇÊûú table ‰∏ç‰∏∫Á©∫ÔºåË°®ÊòéÂ∑≤ÁªèÂàùÂßãÂåñËøá‰∫Ü if (oldCap &gt; 0) &#123; //Ëã•Êâ©ÂÆπÂâçÁöÑÊï∞ÁªÑÂÆπÈáèË∂ÖËøáÊúÄÂ§ßÂÄºÔºåÂàô‰∏çÂÜçÊâ©ÂÆπ if (oldCap &gt;= MAXIMUM_CAPACITY) &#123; threshold = Integer.MAX_VALUE; return oldTab; &#125; //Ëã•Êú™Ë∂ÖËøáÊúÄÂ§ßÂÄºÔºåÂàôÊâ©ÂÆπ‰∏∫ÂéüÊù•ÁöÑ2ÂÄç else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY) newThr = oldThr &lt;&lt; 1; // double threshold &#125; else if (oldThr &gt; 0) // initial capacity was placed in threshold /* * ÂàùÂßãÂåñÊó∂ÔºåÂ∞Ü threshold ÁöÑÂÄºËµãÂÄºÁªô newCapÔºå * HashMap ‰ΩøÁî® threshold ÂèòÈáèÊöÇÊó∂‰øùÂ≠ò initialCapacity ÂèÇÊï∞ÁöÑÂÄº */ newCap = oldThr; else &#123; /* * Ë∞ÉÁî®Êó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÊó∂ÔºåÊ°∂Êï∞ÁªÑÂÆπÈáè‰∏∫ÈªòËÆ§ÂÆπÈáèÔºå * ÈòàÂÄº‰∏∫ÈªòËÆ§ÂÆπÈáè‰∏éÈªòËÆ§Ë¥üËΩΩÂõ†Â≠ê‰πòÁßØ */ newCap = DEFAULT_INITIAL_CAPACITY; newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); &#125; //ËÆ°ÁÆóÊñ∞ÁöÑresize‰∏äÈôê if (newThr == 0) &#123; float ft = (float)newCap * loadFactor; newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); &#125; threshold = newThr; @SuppressWarnings(&#123;"rawtypes","unchecked"&#125;) // ÂàõÂª∫Êñ∞ÁöÑÊ°∂Êï∞ÁªÑÔºåÊ°∂Êï∞ÁªÑÁöÑÂàùÂßãÂåñ‰πüÊòØÂú®ËøôÈáåÂÆåÊàêÁöÑ Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap]; table = newTab; if (oldTab != null) &#123; // ÊääÊØè‰∏™bucketÈÉΩÁßªÂä®Âà∞Êñ∞ÁöÑbuckets‰∏≠ for (int j = 0; j &lt; oldCap; ++j) &#123; Node&lt;K,V&gt; e; if ((e = oldTab[j]) != null) &#123; // Ê∏ÖÈô§ÂéüÊù•table[i]‰∏≠ÁöÑÂÄº oldTab[j] = null; if (e.next == null) newTab[e.hash &amp; (newCap - 1)] = e; else if (e instanceof TreeNode) //Â¶ÇÊûúeÊòØÁ∫¢ÈªëÊ†ëÁªìÁÇπÔºåËµ∞Á∫¢ÈªëÊ†ëÊõøÊç¢ÊñπÂºè ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); else &#123;// Â¶ÇÊûú table[j] ÂêéÊòØ‰∏Ä‰∏™ÈìæË°® ÔºåÂ∞ÜÂéüÈìæË°®ÊãÜÂàÜ‰∏∫‰∏§Êù°ÈìæÔºåÂàÜÂà´ÊîæÂà∞newTab‰∏≠ Node&lt;K,V&gt; loHead = null, loTail = null; Node&lt;K,V&gt; hiHead = null, hiTail = null; Node&lt;K,V&gt; next; do &#123; next = e.next; // ÂéüÁ¥¢ÂºïÔºå(e.hash &amp; oldCap) == 0 ËØ¥Êòé Âú®putÊìç‰ΩúÈÄöËøá hash &amp; newThr //ËÆ°ÁÆóÂá∫ÁöÑÁ¥¢ÂºïÂÄºÁ≠â‰∫éÁé∞Âú®ÁöÑÁ¥¢ÂºïÂÄº„ÄÇ if ((e.hash &amp; oldCap) == 0) &#123; if (loTail == null) loHead = e; else loTail.next = e; loTail = e; &#125; // ÂéüÁ¥¢Âºï+oldCapÔºå‰∏çÊòØÂéüÁ¥¢ÂºïÔºåÂ∞±ÁßªÂä®ÂéüÊù•ÁöÑÈïøÂ∫¶ else &#123; if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; &#125; &#125; while ((e = next) != null); //ÂéüÁ¥¢ÂºïÊîæÂà∞bucketÈáå if (loTail != null) &#123; loTail.next = null; newTab[j] = loHead; &#125; // ÂéüÁ¥¢Âºï+oldCapÊîæÂà∞bucketÈáå if (hiTail != null) &#123; hiTail.next = null; newTab[j + oldCap] = hiHead; &#125; &#125; &#125; &#125; &#125; return newTab;&#125;// Á∫¢ÈªëÊ†ëËΩ¨ÈìæË°®ÈòàÂÄºstatic final int UNTREEIFY_THRESHOLD = 6;/** *Ëøô‰∏™ÂáΩÊï∞ÁöÑÂäüËÉΩÊòØÂØπÁ∫¢ÈªëÊ†ëËøõË°årehash Êìç‰Ωú(ÊãÜÂàÜÁ∫¢ÈªëÊ†ë) * ÈáçÊñ∞Êò†Â∞ÑÁ∫¢ÈªëÊ†ëÁöÑÈÄªËæëÂíåÈáçÊñ∞Êò†Â∞ÑÈìæË°®ÁöÑÈÄªËæëÂü∫Êú¨‰∏ÄËá¥„ÄÇ‰∏çÂêåÁöÑÂú∞ÊñπÂú®‰∫éÔºåÈáçÊñ∞Êò†Â∞ÑÂêéÔºå‰ºöÂ∞ÜÁ∫¢ÈªëÊ†ëÊãÜÂàÜÊàê‰∏§Êù°Áî± TreeNode ÁªÑÊàêÁöÑÈìæË°®„ÄÇ * Â¶ÇÊûúÈìæË°®ÈïøÂ∫¶Â∞è‰∫é UNTREEIFY_THRESHOLDÔºåÂàôÂ∞ÜÈìæË°®ËΩ¨Êç¢ÊàêÊôÆÈÄöÈìæË°®„ÄÇÂê¶ÂàôÊ†πÊçÆÊù°‰ª∂ÈáçÊñ∞Â∞Ü TreeNode ÈìæË°®Ê†ëÂåñ„ÄÇ */final void split(HashMap&lt;K,V&gt; map, Node&lt;K,V&gt;[] tab, int index, int bit) &#123; TreeNode&lt;K,V&gt; b = this; // Relink into lo and hi lists, preserving order TreeNode&lt;K,V&gt; loHead = null, loTail = null; TreeNode&lt;K,V&gt; hiHead = null, hiTail = null; int lc = 0, hc = 0; //Áî±‰∫éTreeNode ÁªìÁÇπ‰πãÈó¥Â≠òÂú®ÂèåÁ´ØÈìæË°®ÁöÑÂÖ≥Á≥ªÔºåÂèØ‰ª•Âà©Áî®ÈìæË°®ÂÖ≥Á≥ªËøõË°å rehash for (TreeNode&lt;K,V&gt; e = b, next; e != null; e = next) &#123; next = (TreeNode&lt;K,V&gt;)e.next; e.next = null; if ((e.hash &amp; bit) == 0) &#123; if ((e.prev = loTail) == null) loHead = e; else loTail.next = e; loTail = e; ++lc; &#125; else &#123; if ((e.prev = hiTail) == null) hiHead = e; else hiTail.next = e; hiTail = e; ++hc; &#125; &#125; // Â¶ÇÊûú loHead ‰∏ç‰∏∫Á©∫Ôºå‰∏îÈìæË°®ÈïøÂ∫¶Â∞è‰∫éÁ≠â‰∫é 6ÔºåÂàôÂ∞ÜÁ∫¢ÈªëÊ†ëËΩ¨ÊàêÈìæË°® if (loHead != null) &#123; if (lc &lt;= UNTREEIFY_THRESHOLD) tab[index] = loHead.untreeify(map); else &#123; tab[index] = loHead; /* * hiHead == null Êó∂ÔºåË°®ÊòéÊâ©ÂÆπÂêéÔºå * ÊâÄÊúâÁªìÁÇπ‰ªçÂú®Âéü‰ΩçÁΩÆÔºåÊ†ëÁªìÊûÑ‰∏çÂèòÔºåÊó†ÈúÄÈáçÊñ∞Ê†ëÂåñ */ if (hiHead != null) loHead.treeify(tab); &#125; &#125; // ‰∏é‰∏äÈù¢Á±ª‰ºº if (hiHead != null) &#123; if (hc &lt;= UNTREEIFY_THRESHOLD) tab[index + bit] = hiHead.untreeify(map); else &#123; tab[index + bit] = hiHead; if (loHead != null) hiHead.treeify(tab); &#125; &#125;&#125;/** *Á∫¢ÈªëÊ†ëÈìæÂåñ */final Node&lt;K,V&gt; untreeify(HashMap&lt;K,V&gt; map) &#123; Node&lt;K,V&gt; hd = null, tl = null; // ÈÅçÂéÜ TreeNode ÈìæË°®ÔºåÂπ∂Áî® Node ÊõøÊç¢ for (Node&lt;K,V&gt; q = this; q != null; q = q.next) &#123; // ÊõøÊç¢ÁªìÁÇπÁ±ªÂûã Node&lt;K,V&gt; p = map.replacementNode(q, null); if (tl == null) hd = p; else tl.next = p; tl = p; &#125; return hd;&#125;Node&lt;K,V&gt; replacementNode(Node&lt;K,V&gt; p, Node&lt;K,V&gt; next) &#123; return new Node&lt;&gt;(p.hash, p.key, p.value, next);&#125; ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö resize()ÊñπÊ≥ï‰∏≠ÊØîËæÉÈáçË¶ÅÁöÑÊòØÈìæË°®ÂíåÁ∫¢ÈªëÊ†ëÁöÑ rehash Êìç‰ΩúÔºårehash ÁöÑÂÆûÁé∞ÂéüÁêÜÂ¶Ç‰∏ãÔºö Âú®Êâ©ÂÆπÁöÑÊó∂ÂÄôÔºå‰∏ÄËà¨ÊòØÊääÈïøÂ∫¶Êâ©‰∏∫ÂéüÊù•2ÂÄçÔºåÊâÄ‰ª•ÔºåÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆË¶Å‰πàÊòØÂú®Âéü‰ΩçÁΩÆÔºåË¶Å‰πàÊòØÂú®Âéü‰ΩçÁΩÆÂÜçÁßªÂä®2Ê¨°ÂπÇÁöÑ‰ΩçÁΩÆ„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºån‰∏∫tableÁöÑÈïøÂ∫¶ÔºåÂõæÔºàaÔºâË°®Á§∫Êâ©ÂÆπÂâçÁöÑkey1Âíåkey2‰∏§ÁßçkeyÁ°ÆÂÆöÁ¥¢Âºï‰ΩçÁΩÆÁöÑÁ§∫‰æãÔºåÂõæÔºàbÔºâË°®Á§∫Êâ©ÂÆπÂêékey1Âíåkey2‰∏§ÁßçkeyÁ°ÆÂÆöÁ¥¢Âºï‰ΩçÁΩÆÁöÑÁ§∫‰æãÔºåÂÖ∂‰∏≠hash1ÊòØkey1ÂØπÂ∫îÁöÑÂìàÂ∏å‰∏éÈ´ò‰ΩçËøêÁÆóÁªìÊûú„ÄÇ ÂÖÉÁ¥†Âú®ÈáçÊñ∞ËÆ°ÁÆóhash‰πãÂêéÔºåÂõ†‰∏∫nÂèò‰∏∫2ÂÄçÔºåÈÇ£‰πàn-1ÁöÑmaskËåÉÂõ¥Âú®È´ò‰ΩçÂ§ö1bit(Á∫¢Ëâ≤)ÔºåÂõ†Ê≠§Êñ∞ÁöÑindexÂ∞±‰ºöÂèëÁîüËøôÊ†∑ÁöÑÂèòÂåñÔºö Âõ†Ê≠§ÔºåÂú®Êâ©ÂÖÖHashMapÁöÑÊó∂ÂÄôÔºåÂè™ÈúÄË¶ÅÁúãÁúãÂéüÊù•ÁöÑhashÂÄºÊñ∞Â¢ûÁöÑÈÇ£‰∏™bitÊòØ1ËøòÊòØ0Â∞±Â•Ω‰∫ÜÔºåÊòØ0ÁöÑËØùÁ¥¢ÂºïÊ≤°ÂèòÔºåÊòØ1ÁöÑËØùÁ¥¢ÂºïÂèòÊàê‚ÄúÂéüÁ¥¢Âºï+oldCap‚ÄùÔºåÂèØ‰ª•ÁúãÁúã‰∏ãÂõæ‰∏∫16Êâ©ÂÖÖ‰∏∫32ÁöÑresizeÁ§∫ÊÑèÂõæÔºö Ëøô‰∏™ÁÆóÊ≥ïÂæàÂ∑ßÂ¶ôÔºåÊó¢ÁúÅÂéª‰∫ÜÈáçÊñ∞ËÆ°ÁÆóhashÂÄºÁöÑÊó∂Èó¥ÔºåËÄå‰∏îÂêåÊó∂ÔºåÁî±‰∫éÊñ∞Â¢ûÁöÑ1bitÊòØ0ËøòÊòØ1ÂèØ‰ª•ËÆ§‰∏∫ÊòØÈöèÊú∫ÁöÑÔºåÂõ†Ê≠§resizeÁöÑËøáÁ®ãÔºåÂùáÂåÄÁöÑÊää‰πãÂâçÁöÑÂÜ≤Á™ÅÁöÑÁªìÁÇπÂàÜÊï£Âà∞Êñ∞ÁöÑÊßΩ‰∏≠‰∫Ü„ÄÇ getÊìç‰Ωú 12345678910111213141516171819202122232425262728293031323334353637/** *‰ªéHashMap‰∏≠Ëé∑ÂèñÊï∞ÊçÆ */public V get(Object key) &#123; Node&lt;K,V&gt; e; // 1. ËÆ°ÁÆóÈúÄËé∑ÂèñÊï∞ÊçÆÁöÑhashÂÄº // 2. ÈÄöËøágetNodeÔºàÔºâËé∑ÂèñÊâÄÊü•ËØ¢ÁöÑÊï∞ÊçÆ // 3. Ëé∑ÂèñÂêéÔºåÂà§Êñ≠Êï∞ÊçÆÊòØÂê¶‰∏∫Á©∫ return (e = getNode(hash(key), key)) == null ? null : e.value;&#125;/** * Ëé∑ÂèñÊâÄË¶ÅÊü•ËØ¢ÁöÑÊï∞ÊçÆ */final Node&lt;K,V&gt; getNode(int hash, Object key) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k; // 1. ËÆ°ÁÆóÂ≠òÊîæÂú®Êï∞ÁªÑtable‰∏≠ÁöÑ‰ΩçÁΩÆ if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (first = tab[(n - 1) &amp; hash]) != null) &#123; //Ê†πÊçÆÂΩìÂâç‰º†ÂÖ•ÁöÑhashÂÄº‰ª•ÂèäÂèÇÊï∞keyËé∑Âèñ‰∏Ä‰∏™ÁªìÁÇπÂç≥‰∏∫first,Â¶ÇÊûúÂåπÈÖçÁöÑËØùËøîÂõûÂØπÂ∫îÁöÑvalueÂÄº // a. ÂÖàÂú®Êï∞ÁªÑ‰∏≠ÊâæÔºåËã•Â≠òÂú®ÔºåÂàôÁõ¥Êé•ËøîÂõû if (first.hash == hash &amp;&amp; // always check first node ((k = first.key) == key || (key != null &amp;&amp; key.equals(k)))) return first; // b. Ëã•Êï∞ÁªÑ‰∏≠Ê≤°ÊúâÔºåÂàôÂà∞Á∫¢ÈªëÊ†ë‰∏≠ÂØªÊâæ if ((e = first.next) != null) &#123; if (first instanceof TreeNode) return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key); // c. Ëã•Á∫¢ÈªëÊ†ë‰∏≠‰πüÊ≤°ÊúâÔºåÂàôÈÄöËøáÈÅçÂéÜÔºåÂà∞ÈìæË°®‰∏≠ÂØªÊâæ do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; &#125; while ((e = e.next) != null); &#125; &#125; return null;&#125; ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö HashMap Jdk1.7ÂíåJdk1.8ÁöÑÂå∫Âà´ Êï∞ÊçÆÁªìÊûÑ Ê∑ªÂä†Êï∞ÊçÆ Ëé∑ÂèñÊï∞ÊçÆ Êâ©ÂÆπÊú∫Âà∂ ConcurrentHashMap-Jdk1.7 Êï∞ÊçÆÁªìÊûÑ ConcurrentHashMapÈááÁî®ÂàÜÊÆµÈîÅÁöÑËÆæËÆ°Segment + HashEntryÁöÑÊñπÂºèËøõË°åÂÆûÁé∞ÔºåÈááÁî®tableÊï∞ÁªÑÔºãÂçïÂêëÈìæË°®ÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÁªìÊûÑÂ¶Ç‰∏ãÔºö ÈáçË¶ÅÂ±ûÊÄß 1234567891011121314151617181920212223242526272829//ÈªòËÆ§ConcurrentHashMapÁöÑÂ§ßÂ∞èstatic final int DEFAULT_INITIAL_CAPACITY = 16;//ÈªòËÆ§Âä†ËΩΩÂõ†Â≠êÔºåÁî®‰∫éË°®Á§∫segment‰∏≠ÂåÖÂê´ÁöÑHashEntryÂÖÉÁ¥†ÁöÑ‰∏™Êï∞‰∏éHashEntry[]Êï∞ÁªÑÈïøÂ∫¶ÁöÑÊØîÂÄº„ÄÇÂΩìÊüê‰∏™segment‰∏≠ÂåÖÂê´ÁöÑHashEntryÂÖÉÁ¥†ÁöÑ‰∏™Êï∞Ë∂ÖËøá‰∫ÜHashEntry[]Êï∞ÁªÑÁöÑÈïøÂ∫¶‰∏éË£ÖËΩΩÂõ†Â≠êÁöÑ‰πòÁßØÊó∂ÔºåÂ∞ÜËß¶ÂèëÊâ©ÂÆπÊìç‰Ωú„ÄÇstatic final float DEFAULT_LOAD_FACTOR = 0.75f;//ÈªòËÆ§ÊîØÊåÅÁöÑÊúÄÂ§ßÂπ∂ÂèëÊï∞ÔºåËØ•ÂÄºË°®Á§∫segment[]Êï∞ÁªÑÁöÑÈïøÂ∫¶Ôºå‰πüÂ∞±ÊòØÈîÅÁöÑÊÄªÊï∞„ÄÇstatic final int DEFAULT_CONCURRENCY_LEVEL = 16;//ConcurrentHashMapÁöÑÊúÄÂ§ßÂÆπÈáèstatic final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;//segmentÂàÜÊÆµÈîÅÁöÑÂàùÂßãÂÆπÈáè‰πüÊòØÊúÄÂ∞èÂÆπÈáè(Âç≥segment‰∏≠HashEntryÁöÑÂàùÂßãÂÆπÈáè)static final int MIN_SEGMENT_TABLE_CAPACITY = 2;//ÊúÄÂ§ßsegmentÊï∞(segmentsÊï∞ÁªÑÁöÑÊúÄÂ§ßÈïøÂ∫¶)static final int MAX_SEGMENTS = 1 &lt;&lt; 16; // slightly conservative//ÈáçËØïÂä†ÈîÅÊ¨°Êï∞ÔºöÂú®ÊâßË°åsize()ÂíåcontainsValue(value)Êìç‰ΩúÊó∂,ConcurrentHashMapÁöÑÂÅöÊ≥ïÊòØÂÖàÂ∞ùËØï RETRIES_BEFORE_LOCK Ê¨°( Âç≥Ôºå2Ê¨° )ÈÄöËøá‰∏çÈîÅ‰ΩèsegmentÁöÑÊñπÂºèÊù•ÁªüËÆ°„ÄÅÊü•ËØ¢ÂêÑ‰∏™segmentÔºåÂ¶ÇÊûú2Ê¨°ÊâßË°åËøáÁ®ã‰∏≠ÔºåÂÆπÂô®ÁöÑmodCountÂèëÁîü‰∫ÜÂèòÂåñÔºåÂàôÂÜçÈááÁî®Âä†ÈîÅÁöÑÊñπÂºèÊù•Êìç‰ΩúÊâÄÊúâÁöÑsegmentstatic final int RETRIES_BEFORE_LOCK = 2;//ÂàÜÊÆµÈîÅÁöÑÊé©Á†ÅÔºåÁî®Êù•ËÆ°ÁÆókeyÊâÄÂú®ÁöÑsegmentÂú®segmentsÁöÑÊï∞ÁªÑ‰∏ãÊ†áfinal int segmentMask;//ÂàÜÊÆµÈîÅÂÅèÁßªÈáè,Áî®Êù•Êü•ÊâæsegmentÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆfinal int segmentShift;//segmentÊï∞ÁªÑÔºåSegment Á±ªÁªßÊâø‰∫é ReentrantLock Á±ªÔºå‰ªéËÄå‰ΩøÂæó Segment ÂØπË±°ËÉΩÂÖÖÂΩìÈîÅÁöÑËßíËâ≤„ÄÇfinal Segment&lt;K,V&gt;[] segments; ÈáçË¶ÅÂØπË±° Segment Segment Á±ªÁªßÊâø‰∫é ReentrantLock Á±ªÔºå‰ªéËÄå‰ΩøÂæó Segment ÂØπË±°ËÉΩÂÖÖÂΩìÈîÅÁöÑËßíËâ≤ÔºåÂπ∂‰∏îÊòØ‰∏Ä‰∏™ÂèØÈáçÂÖ•ÈîÅ„ÄÇÊØè‰∏™ Segment ÂØπË±°Áª¥Êä§ÂÖ∂ÂåÖÂê´ÁöÑËã•Âπ≤‰∏™Ê°∂(Âç≥ÔºåHashEntry[])„ÄÇ 1234567891011121314151617181920212223242526272829static final class Segment&lt;K,V&gt; extends ReentrantLock implements Serializable &#123; private static final long serialVersionUID = 2249069246763182397L; //ÊúÄÂ§ßËá™ÊóãÊ¨°Êï∞ÔºåËã•ÊòØÂçïÊ†∏Âàô‰∏∫1ÔºåÂ§öÊ†∏Âàô‰∏∫64„ÄÇËØ•Â≠óÊÆµÁî®‰∫éscanAndLockForPut„ÄÅscanAndLockÊñπÊ≥ï static final int MAX_SCAN_RETRIES = Runtime.getRuntime().availableProcessors() &gt; 1 ? 64 : 1; /** * table ÊòØÁî± HashEntry ÂØπË±°ÁªÑÊàêÁöÑÊï∞ÁªÑ * Â¶ÇÊûúÊï£ÂàóÊó∂ÂèëÁîüÁ¢∞ÊíûÔºåÁ¢∞ÊíûÁöÑ HashEntry ÂØπË±°Â∞±‰ª•ÈìæË°®ÁöÑÂΩ¢ÂºèÈìæÊé•Êàê‰∏Ä‰∏™ÈìæË°® * table Êï∞ÁªÑÁöÑÂÖÉÁ¥†‰ª£Ë°®Êï£ÂàóÊò†Â∞ÑË°®ÁöÑ‰∏Ä‰∏™Ê°∂ * ÊØè‰∏™ table ÂÆàÊä§Êï¥‰∏™ ConcurrentHashMap Êï∞ÊçÆÊÄªÊï∞ÁöÑ‰∏ÄÈÉ®ÂàÜ * Â¶ÇÊûúÂπ∂ÂèëÁ∫ßÂà´‰∏∫ 16Ôºåtable ÂàôÁª¥Êä§ ConcurrentHashMap Êï∞ÊçÆÊÄªÊï∞ÁöÑ 1/16 */ transient volatile HashEntry&lt;K,V&gt;[] table; //segment‰∏≠HashEntryÁöÑÊÄªÊï∞ transient int count; //segment‰∏≠Êï∞ÊçÆË¢´Êõ¥Êñ∞ÁöÑÊ¨°Êï∞ transient int modCount; //ÂÖÉÁ¥†ÁöÑÈòÄÂÄºÔºåÂΩìtable‰∏≠ÂåÖÂê´ÁöÑHashEntryÂÖÉÁ¥†ÁöÑ‰∏™Êï∞Ë∂ÖËøáÊú¨ÂèòÈáèÂÄºÊó∂ÔºåËß¶ÂèëtableÁöÑÊâ©ÂÆπ transient int threshold; //Âä†ËΩΩÂõ†Â≠ê final float loadFactor; &#125; HashEntry HashEntryÂ∞ÅË£Ö‰∫Ükey-valueÂØπÔºåÊòØ‰∏Ä‰∏™ÂçïÂêëÈìæË°®ÁªìÊûÑÔºåÊØè‰∏™HashEntryÁªìÁÇπÈÉΩÁª¥Êä§ÁùÄnext HashEntryÁªìÁÇπÁöÑÂºïÁî®„ÄÇ 12345678910111213static final class HashEntry&lt;K,V&gt; &#123; final int hash; final K key; volatile V value; volatile HashEntry&lt;K,V&gt; next; HashEntry(int hash, K key, V value, HashEntry&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125;&#125; ÂàùÂßãÂåñ 12345678910111213141516171819202122232425262728293031323334353637383940414243public ConcurrentHashMap(int initialCapacity, float loadFactor, int concurrencyLevel) &#123; if (!(loadFactor &gt; 0) || initialCapacity &lt; 0 || concurrencyLevel &lt;= 0) throw new IllegalArgumentException(); //‰øùËØÅÊúÄÂ§ßÂπ∂Âèë‰∏çË∂ÖËøáMAX_SEGMENTS(1 &lt;&lt; 16) if (concurrencyLevel &gt; MAX_SEGMENTS) concurrencyLevel = MAX_SEGMENTS; // Find power-of-two sizes best matching arguments int sshift = 0; int ssize = 1; //Âæ™ÁéØÂà§Êñ≠‰øùËØÅssizeÊòØ2ÁöÑÂπÇ(Âç≥SegmentÊï∞ÁªÑÁöÑÈïøÂ∫¶) //Âæ™ÁéØÂÆåsshift = 4,ssize = 16 while (ssize &lt; concurrencyLevel) &#123; ++sshift; ssize &lt;&lt;= 1;//ssize = size &lt;&lt; 1 &#125; //segmentShiftÊúÄÂêé‰∏∫16 this.segmentShift = 32 - sshift; //segmentMaskÊúÄÂêé‰∏∫15 this.segmentMask = ssize - 1; //ConcurrentHashMapÂàùÂßãÂÆπÈáè‰∏çË∂ÖËøáMAXIMUM_CAPACITY(1 &lt;&lt; 30) if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; //Ê†πÊçÆConcurrentHashMapÊÄªÂÆπÈáèinitialCapacityÈô§‰ª•Segments[]Êï∞ÁªÑÁöÑÈïøÂ∫¶ÂæóÂà∞Âçï‰∏™ÂàÜÊÆµÈîÅsegment‰∏≠HashEntry[]ÁöÑÂ§ßÂ∞è int c = initialCapacity / ssize; //‰øùËØÅÂàÜÊÆµÈîÅsegmentÁöÑÊÄªÂÆπÈáèc‰∏çÂ∞è‰∫éÂàùÂßãÁöÑÂÆπÈáè if (c * ssize &lt; initialCapacity) ++c; //cap‰∏∫Segments[]Êï∞ÁªÑ‰∏≠ÂàÜÊÆµÈîÅsegmentÁöÑHashEntry[]ÁöÑÂ§ßÂ∞è,‰øùËØÅ‰∏∫2ÁöÑÂπÇ int cap = MIN_SEGMENT_TABLE_CAPACITY; while (cap &lt; c) cap &lt;&lt;= 1; // create segments and segments[0] //ËÆ∞‰ΩèËøôÈáå‚òÖ //ÂàõÂª∫‰∏Ä‰∏™s0,ÁÑ∂ÂêéÂàùÂßãÂåñÂà∞Segments[0]‰∏≠ Segment&lt;K,V&gt; s0 = new Segment&lt;K,V&gt;(loadFactor, (int)(cap * loadFactor), (HashEntry&lt;K,V&gt;[])new HashEntry[cap]); //ÂàõÂª∫Segments[]Êï∞ÁªÑ Segment&lt;K,V&gt;[] ss = (Segment&lt;K,V&gt;[])new Segment[ssize]; UNSAFE.putOrderedObject(ss, SBASE, s0); // ordered write of segments[0] this.segments = ss;&#125; Ê†πÊçÆÁî®Êà∑ÂàõÂª∫new ConcurrentHashMap(....)Êó∂Ôºå‰º†ÈÄíÁöÑÂÄºÊàñËÄÖÈªòËÆ§ÂÄºËøõË°åConcurrentHashMapÁöÑÂàùÂßãÂåñ„ÄÇ ÂàõÂª∫‰∏Ä‰∏™Segments[]Êï∞ÁªÑÔºåÊúÄÂ§ßÊï∞ÁªÑÈïøÂ∫¶ÊòØ16Ôºå‰∏çÂèØ‰ª•Êâ©ÂÆπ„ÄÇ Sement[i]ÁöÑÈªòËÆ§Â§ßÂ∞è‰∏∫2ÔºåË¥üËΩΩÂõ†Â≠ê‰∏∫0.75ÔºåÂæóÂá∫ÂàùÂßãÈòàÂÄº‰∏∫1.5Ôºå‰πüÂ∞±ÊèíÂÖ•Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†‰∏ç‰ºöËß¶ÂèëÊâ©ÂÆπÔºåÊèíÂÖ•Á¨¨‰∫å‰∏™ËøõË°å‰∏ÄÊ¨°Êâ©ÂÆπ„ÄÇ ÂàùÂßãÂåñ‰∫Ü Segment[0]ÔºåÂÖ∂‰ªñ‰ΩçÁΩÆËøòÊòØnull„ÄÇ putÊìç‰Ωú 1234567891011121314151617public V put(K key, V value) &#123; Segment&lt;K,V&gt; s; //Âà§Êñ≠valueÊòØÂê¶‰∏∫null,Â¶ÇÊûú‰∏∫nullÂàôÊäõÂá∫Á©∫ÊåáÈíàÂºÇÂ∏∏ if (value == null) throw new NullPointerException(); //ËÆ°ÁÆókeyÁöÑHASHÂÄº int hash = hash(key); //Êó†Á¨¶Âè∑Âè≥ÁßªsegmentShift‰Ωç(ÈªòËÆ§16),ÁÑ∂Âêé &amp; segmentMask(ÈªòËÆ§15)ÂæóÂà∞segmentÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂú∞ÂùÄ int j = (hash &gt;&gt;&gt; segmentShift) &amp; segmentMask; //Âà§Êñ≠ËØ•‰ΩçÁΩÆÊòØÂê¶‰∏∫nullÔºå if ((s = (Segment&lt;K,V&gt;)UNSAFE.getObject (segments, (j &lt;&lt; SSHIFT) + SBASE)) == null) //Â¶ÇÊûúËé∑ÂèñÂà∞ÁöÑsegment‰∏∫null s = ensureSegment(j);//ÂàùÂßãÂåñsegment //Â¶ÇÊûú‰∏∫nullÔºåÂàùÂßãÂåñËØ•‰ΩçÁΩÆsegment[j]ÔºåÈÄöËøáensureSegment(j) s = ensureSegment(j); //Ë∞ÉÁî®SegmentÁöÑputÊñπÊ≥ïÂ∞ÜÊï∞ÊçÆÊèíÂÖ•Âà∞HashEntry‰∏≠ return s.put(key, hash, value, false);&#125; Ê†πÊçÆhashÂÄºËé∑ÂèñÂàÜÊÆµÈîÅsegmentÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºåÂ¶ÇÊûúËé∑ÂèñÂà∞ÁöÑsegment‰∏∫nullÔºåÂàôÂàùÂßãÂåñ„ÄÇÂê¶ÂàôÂ∞±ÊòØÊîæÂÄº„ÄÇÊï¥‰ΩìÊµÅÁ®ãÂ¶Ç‰∏ãÂõæÔºö ensureSegment-ÂàùÂßãÂåñsegment 1234567891011121314151617181920212223242526272829303132private Segment&lt;K,V&gt; ensureSegment(int k) &#123; //ÊãøÂà∞ÂΩìÂâçSegments[]Êï∞ÁªÑ final Segment&lt;K,V&gt;[] ss = this.segments; //Ëé∑ÂèñkÊâÄÂú®ÁöÑsegmentÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂÅèÁßªÈáè long u = (k &lt;&lt; SSHIFT) + SBASE; // raw offset Segment&lt;K,V&gt; seg; //Ëé∑ÂèñkÊâÄÂú®ÁöÑsegmen,Âà§Êñ≠segmenÊòØÂê¶‰∏∫null if ((seg = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(ss, u)) == null) &#123; //ÂàùÂßãÂåñ‰∏Ä‰∏™segmentÁ≠â‰∫éSegments[0] //Segments[0]Âú®ÂàùÂßãÂåñConcurrentHashMapÊó∂ÔºåÂ∑≤ÁªèÂàùÂßãÂåñ‰∫Ü‰∏Ä‰∏™segmentÊîæÂà∞Segments[0]„ÄÇ Segment&lt;K,V&gt; proto = ss[0]; // use segment 0 as prototype //ÁÑ∂ÂêéÂ∞±ÊòØËé∑ÂèñSegments[0]‰∏≠HashEntryÊï∞ÁªÑÁöÑÊï∞ÊçÆ int cap = proto.table.length; float lf = proto.loadFactor; int threshold = (int)(cap * lf); //ÂàùÂßãÂåñ‰∏Ä‰∏™HashEntryÊï∞ÁªÑ,Â§ßÂ∞èÂíåSegments[0]‰∏≠ÁöÑHashEntry‰∏ÄÊ†∑„ÄÇ HashEntry&lt;K,V&gt;[] tab = (HashEntry&lt;K,V&gt;[])new HashEntry[cap]; //ÂÜçÊ¨°Ëé∑ÂèñkÊâÄÂú®ÁöÑsegment(Èò≤Ê≠¢ÂÖ∂‰ªñÁ∫øÁ®ãÂ∑≤ÁªèÂàùÂßãÂåñÂ•Ω) if ((seg = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(ss, u)) == null) &#123; // recheck //Â¶ÇÊûúËøòÊòØnullÔºåÂàõÂª∫‰∏Ä‰∏™segmentÂπ∂ÈÄöËøácasËÆæÁΩÆÂà∞ÂØπÂ∫îÁöÑ‰ΩçÁΩÆ Segment&lt;K,V&gt; s = new Segment&lt;K,V&gt;(lf, threshold, tab); // ‰ΩøÁî® while Âæ™ÁéØÔºåÂÜÖÈÉ®Áî® CASÔºåÂΩìÂâçÁ∫øÁ®ãÊàêÂäüËÆæÂÄºÊàñÂÖ∂‰ªñÁ∫øÁ®ãÊàêÂäüËÆæÂÄºÂêéÔºåÈÄÄÂá∫ while ((seg = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(ss, u)) == null) &#123; if (UNSAFE.compareAndSwapObject(ss, u, null, seg = s)) break; &#125; &#125; &#125; return seg;&#125; Ê†πÊçÆkÁöÑhashÂÄºÔºåËé∑ÂèñsegmentÔºåÂ¶Ç‰ΩïËé∑Âèñ‰∏çÂà∞ÂàôÂ∞±ÂàùÂßãÂåñ‰∏Ä‰∏™ÂíåSegment[0]‰∏ÄÊ†∑Â§ßÂ∞èÁöÑsegment„ÄÇÂπ∂ÈÄöËøáCASÊìç‰ΩúÔºåÂàùÂßãÂåñÂà∞Segments[]‰∏≠„ÄÇ put-ÊîæÂÄº 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253final V put(K key, int hash, V value, boolean onlyIfAbsent) &#123; //Â∞ùËØïËé∑ÂèñsegmentÁöÑÈîÅ //Â§±Ë¥•Â∞±ÈÄöËøáËá™ÊóãÂéªËé∑ÂèñÈîÅ,Ë∂ÖËøáËá™ÊóãÊúÄÂ§ßÊ¨°Êï∞Êó∂,Â∞±Â∞ÜÊìç‰ΩúÊîæÂÖ•Âà∞LockÈîÅÁöÑÈòüÂàó‰∏≠ HashEntry&lt;K,V&gt; node = tryLock() ? null : scanAndLockForPut(key, hash, value); V oldValue; //Ëµ∞Âà∞ËøôÈáåÁöÑÁ∫øÁ®ã‰∏ÄÂÆöËé∑ÂèñÂà∞ÈîÅ,Ê≤°Ëé∑ÂèñÂà∞ÁöÑÈÉΩÊîæÂà∞‰∫ÜLockÁöÑÈòüÂàó‰∏≠ try &#123; //ÊãøÂà∞segment‰∏≠ÁöÑHashEntryÊï∞ÁªÑ HashEntry&lt;K,V&gt;[] tab = table; //ÂæóÂà∞keyÊâÄÂú®HashEntryÊï∞ÁªÑÁöÑ‰∏ãÊ†á int index = (tab.length - 1) &amp; hash; //Ëé∑ÂèñkeyÊâÄÂú®ÁöÑHashEntryÊï∞ÁªÑÊüê‰∏™‰ΩçÁΩÆÁöÑÂ§¥ÁªìÁÇπ(HashEntryÊòØ‰∏Ä‰∏™Êï∞ÁªÑÂä†ÈìæË°®ÁªìÊûÑ) HashEntry&lt;K,V&gt; first = entryAt(tab, index); for (HashEntry&lt;K,V&gt; e = first;;) &#123; if (e != null) &#123;//HashEntryÂ§¥ÁªìÁÇπ‰∏ç‰∏∫null K k; //ÊâæÂà∞‰º†ÂÖ•ÁöÑÂÄº if ((k = e.key) == key || (e.hash == hash &amp;&amp; key.equals(k))) &#123; oldValue = e.value; //ÊòØÂê¶ÊõøÊç¢value,ÈªòËÆ§ÊõøÊç¢(Êúâ‰∏™putIfAbsent(key,value)Â∞±ÊòØ‰∏çÊõøÊç¢) if (!onlyIfAbsent) &#123; e.value = value; ++modCount; &#125; break; &#125; e = e.next; &#125; else &#123;//Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ÊàñHashEntryÂ§¥ÁªìÁÇπ‰∏∫null //Âà§Êñ≠nodeÊòØÂê¶Â∑≤ÁªèÂàùÂßãÂåñ(Ëá™ÊóãËé∑ÂèñÈîÅÂÅöÁöÑËøô‰∫õÊìç‰Ωú,Ëøô‰∏™nodeË¶Å‰πà‰∏∫nullË¶Å‰πàÂ∞±ÊòØÊñ∞Âª∫ÁöÑHashEntry) if (node != null) node.setNext(first);//Â§¥ÊèíÊ≥ï else node = new HashEntry&lt;K,V&gt;(hash, key, value, first);//Â§¥ÊèíÊ≥ï int c = count + 1;//‰øÆÊîπsegmentÁöÑÂÖÉÁ¥†ÊÄªÊï∞ if (c &gt; threshold &amp;&amp; tab.length &lt; MAXIMUM_CAPACITY)//Â¶ÇÊûúË∂ÖËøásegmentÁöÑÈòÄÂÄºÂπ∂‰∏îsegmentÊ≤°ÊúâË∂ÖËøáÊúÄÂ§ßÂÆπÈáè,rehash //Êâ©ÂÆπ rehash(node); else //Êõ¥Êñ∞HashEntryÊï∞ÁªÑÔºåÊääÊñ∞ÁöÑÁªìÁÇπÊîæÂú®tabÁöÑindex‰∏äÈù¢ setEntryAt(tab, index, node); ++modCount; count = c; oldValue = null; break; &#125; &#125; &#125; finally &#123; unlock();//ÈáäÊîæÈîÅ &#125; return oldValue;&#125; È¶ñÂÖàÊòØÂ∞ùËØïËé∑ÂèñsegmentÁöÑÈîÅÔºåËé∑ÂèñÂà∞Âêë‰∏ãÊâßË°åÔºåËé∑Âèñ‰∏çÂà∞Â∞±ÈÄöËøáËá™ÊóãÊìç‰ΩúÂéªËé∑ÂèñÈîÅ„ÄÇÊãøÂà∞ÈîÅ‰πãÂêéÔºåÊâæÂà∞kÊâÄÂú®ÁöÑHashEntryÊï∞ÁªÑÁöÑ‰∏ãÊ†áÔºåÁÑ∂ÂêéËé∑ÂèñÂ§¥ÁªìÁÇπ„ÄÇÂêë‰∏ãÈÅçÂéÜÂ§¥ÁªìÁÇπÔºåÊü•ÊâæÂà∞Â∞±Êõ¥Êñ∞ÔºàÈªòËÆ§ÔºâÔºåÊ≤°Êü•ÊâæÂà∞Â∞±Êñ∞Âª∫‰∏Ä‰∏™HashEntryÔºåÈÄöËøáÂ§¥ÊèíÊ≥ïÊîæÂÖ•HashEntryÊï∞ÁªÑÔºåÊúÄÂêéÊõ¥Êñ∞HashEntry„ÄÇ scanAndLockForPut-Ëé∑ÂèñÈîÅ 1234567891011121314151617181920212223242526272829private HashEntry&lt;K,V&gt; scanAndLockForPut(K key, int hash, V value) &#123; //Ëé∑ÂèñkÊâÄÂú®ÁöÑsegment‰∏≠ÁöÑHashEntryÁöÑÂ§¥ÁªìÁÇπ(segment‰∏≠ÊîæÂæóÊòØHashEntryÊï∞ÁªÑ,HashEntryÂèàÊòØ‰∏™ÈìæË°®ÁªìÊûÑ) HashEntry&lt;K,V&gt; first = entryForHash(this, hash); HashEntry&lt;K,V&gt; e = first; HashEntry&lt;K,V&gt; node = null; int retries = -1; // negative while locating node while (!tryLock()) &#123;//Â∞ùËØïËé∑ÂèñkÊâÄÂú®segmentÁöÑÈîÅ„ÄÇÊàêÂäüÂ∞±Áõ¥Êé•ËøîÂõû„ÄÅÂ§±Ë¥•ËøõÂÖ•whileÂæ™ÁéØËøõË°åËá™ÊóãÂ∞ùËØïËé∑ÂèñÈîÅ HashEntry&lt;K,V&gt; f; // to recheck first below if (retries &lt; 0) &#123; if (e == null) &#123;//ÊâÄÂú®HashEntryÈìæË°®‰∏çÂ≠òÂú®ÔºåÂàôÊ†πÊçÆ‰º†ËøáÊù•ÁöÑkey-valueÂàõÂª∫‰∏Ä‰∏™HashEntry if (node == null) // speculatively create node //ÂàùÂßãÂåñnode node = new HashEntry&lt;K,V&gt;(hash, key, value, null); retries = 0; &#125; else if (key.equals(e.key))//ÊâæÂà∞Ë¶ÅÊîæÂæóÂÄº,ÂàôËÆæÁΩÆsegmentÈáçËØïÊ¨°Êï∞‰∏∫0 retries = 0; else //‰ªéÂ§¥ÁªìÁÇπÂæÄ‰∏ãÂØªÊâækeyÂØπÂ∫îÁöÑHashEntry e = e.next; &#125; else if (++retries &gt; MAX_SCAN_RETRIES) &#123;//Ë∂ÖËøáÊúÄÂ§ßÈáçËØïÊ¨°Êï∞Â∞±Â∞ÜÂΩìÂâçÊìç‰ΩúÊîæÂÖ•Âà∞LockÁöÑÈòüÂàó‰∏≠ÔºåÊîπ‰∏∫ÈòªÂ°ûÈîÅËé∑ÂèñÔºå‰øùËØÅËÉΩËé∑ÂèñÊàêÂäü lock(); break; &#125; else if ((retries &amp; 1) == 0 &amp;&amp; (f = entryForHash(this, hash)) != first) &#123;//Â¶ÇÊûúretries‰∏∫ÂÅ∂Êï∞,Â∞±ÈáçÊñ∞Ëé∑ÂèñHashEntryÈìæË°®ÁöÑÂ§¥ÁªìÁÇπ e = first = f; // re-traverse if entry changed retries = -1; &#125; &#125; return node;&#125; ÊãøÂà∞kÊâÄÂú®ÁöÑsegmentÁöÑHashEntryÁöÑÂ§¥ÁªìÁÇπ(ÊÉ≥ÊÉ≥segment‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑ)ÔºåÈ¶ñÂÖàÂ∞ùËØïËé∑ÂèñsegmentÁöÑÈîÅ„ÄÇ Ëé∑ÂèñÂ§±Ë¥• Â¶ÇÊûúÂ§¥ÁªìÁÇπÊòØ‰∏∫nullÔºåÂàôÂ∞Ü‰º†ËøõÊù•ÁöÑkey-valueÊñ∞Âª∫‰∏Ä‰∏™HashEntry,ÂêåÊó∂ËÆæÁΩÆretries‰∏∫0,‰ªéËÄåÂÜçÊ¨°ÂéªÂ∞ùËØïËé∑ÂèñsegmentÁöÑÈîÅÔºõ Â¶ÇÊûúÂ§¥ÁªìÁÇπ‰∏ç‰∏∫nullÔºåÂπ∂‰∏îÂ§¥ÁªìÁÇπÁöÑkey == ‰º†ËøõÊù•ÁöÑkey,ËÆæÁΩÆretries‰∏∫0,‰ªéËÄåÂÜçÊ¨°ÂéªÂ∞ùËØïËé∑ÂèñsegmentÁöÑÈîÅÔºõ Â¶ÇÊûúÂ§¥ÁªìÁÇπ‰∏ç‰∏∫nullÔºåÂπ∂‰∏îÂ§¥ÁªìÁÇπÁöÑkey != ‰º†ËøõÊù•ÁöÑkey ÂàôËé∑ÂèñÂ§¥ÁªìÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ÁªìÁÇπ,ÂÜçÊ¨°Â∞ùËØïËé∑ÂèñsegmentÁöÑÈîÅÔºõ Â¶ÇÊûúretries &gt; MAX_SCAN_RETRIES ÂàôË∞ÉÁî®reentrantlockÁöÑlockÊñπÊ≥ï,Â∞ÜÂΩìÂâçÊìç‰ΩúÊîæÂÖ•Âà∞lockÈòüÂàó‰∏≠.Ë∑≥Âá∫whileÂæ™ÁéØÔºõ Â¶ÇÊûúretries‰∏∫ÂÅ∂Êï∞,ÂàôÂÜçÊ¨°Ëé∑ÂèñÂØπÂ∫îsegmentÁöÑÂ§¥ÁªìÁÇπÔºåÂà§Êñ≠ÊòØÂê¶ÊúâÂèòÂåñÔºåÊúâÂ∞±ÈáçÊñ∞Ëé∑ÂèñÂ§¥ÁªìÁÇπÔºõ Ëé∑ÂèñÊàêÂäüÔºöÁõ¥Êé•ËøîÂõûnull rehash-Êâ©ÂÆπ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778private void rehash(HashEntry&lt;K,V&gt; node) &#123;//node‰∏∫ÂæÖÊñ∞Âä†ÂÖ•ÁöÑÁªìÁÇπ //Ëé∑ÂèñÂΩìÂâçsegmentÁöÑHashEntryÊï∞ÁªÑ HashEntry&lt;K,V&gt;[] oldTable = table; //Ëé∑ÂèñÂéüHashEntryÊï∞ÁªÑÁöÑÈïøÂ∫¶ int oldCapacity = oldTable.length; //Êñ∞HashEntryÊï∞ÁªÑÁöÑÈïøÂ∫¶ = ÂéüHashEntryÊï∞ÁªÑÈïøÂ∫¶*2 int newCapacity = oldCapacity &lt;&lt; 1; //ÈáçÊñ∞ËÆ°ÁÆóÊñ∞HashEntryÊï∞ÁªÑÁöÑÈòÄÂÄº threshold = (int)(newCapacity * loadFactor); //ÂàõÂª∫Êñ∞HashEntryÊï∞ÁªÑ HashEntry&lt;K,V&gt;[] newTable = (HashEntry&lt;K,V&gt;[]) new HashEntry[newCapacity]; //Êñ∞HashEntryÊï∞ÁªÑÁöÑÊé©Á†Å(Áî®Êù•ËÆ°ÁÆóÂÖÉÁ¥†Âú®Êñ∞Êï∞ÁªÑ‰∏≠ÁöÑ‰∏ãÊ†á‰ΩçÁΩÆ) int sizeMask = newCapacity - 1; //ÈÅçÂéÜÂéüHashEntryÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†(segment‰∏≠ÊòØ‰∏Ä‰∏™HashEntryÊï∞ÁªÑÔºåÁªìÊûÑÊòØÊï∞ÁªÑÂä†ÈìæË°®) for (int i = 0; i &lt; oldCapacity ; i++) &#123; //Ëé∑ÂèñÂéüHashEntry[i]‰ΩçÁΩÆÁöÑÂ§¥ÁªìÁÇπHashEntry HashEntry&lt;K,V&gt; e = oldTable[i]; //Âà§Êñ≠ÂΩìÂâçÁªìÁÇπÊòØÂê¶‰∏∫Á©∫ if (e != null) &#123; //Ëé∑ÂèñÂΩìÂâçÁªìÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ÁªìÁÇπ HashEntry&lt;K,V&gt; next = e.next; //ÈáçÊñ∞ËÆ°ÁÆóÂΩìÂâçÁªìÁÇπÂú®Êñ∞HashEntryÊï∞ÁªÑ‰∏≠ÁöÑ‰∏ãÊ†á int idx = e.hash &amp; sizeMask; //Â¶ÇÊûú‰∏ã‰∏Ä‰∏™ÁªìÁÇπ‰∏∫Á©∫ÔºåÂàôÂéüHashEntryÊï∞ÁªÑËøô‰∏™‰ΩçÁΩÆÂ∞±‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÁõ¥Êé•ÊîæÂà∞Êñ∞HashEntryÊï∞ÁªÑÂ∞±Ë°å if (next == null) // Single node on list newTable[idx] = e; //‰∏ã‰∏™ÁªìÁÇπ‰∏ç‰∏∫Á©∫ else &#123; // Reuse consecutive sequence at same slot //ËøôÈáåÂ∞±ÊòØÊâæÂà∞Êüê‰∏™ÁªìÁÇπÔºå‰ªéËøô‰∏™ÁªìÁÇπÂæÄ‰∏ãÔºåÈÉΩ‰ºöÂú®Êñ∞Êï∞ÁªÑÁöÑÊüê‰∏™ÂùêÊ†á‰∏ãÔºåÂΩ¢ÊàêÊñ∞ÁöÑÈìæË°® //Âéü: //HashEntry:[0] [1]... //ÈáåÈù¢ÁöÑÂÄº: 1 // 2 // 3 // 4 // 5 // 6 //Êñ∞: //HashEntry:[0] [1]... //ÈáåÈù¢ÁöÑÂÄº: 4 // 5 // 6 //ËøôÈáåÊúÄÂêélastRunÂ∞±ÊòØ4 ,idxÂ∞±ÊòØÊñ∞Êï∞ÁªÑÁöÑ‰∏ãÊ†á0 HashEntry&lt;K,V&gt; lastRun = e; int lastIdx = idx; //ÊâæÂà∞Á¨¨‰∏Ä‰∏™ÂêéÁª≠ÁªìÁÇπÊñ∞ÁöÑindex‰∏çÂèòÁöÑÁªìÁÇπ for (HashEntry&lt;K,V&gt; last = next; last != null; last = last.next) &#123; int k = last.hash &amp; sizeMask; if (k != lastIdx) &#123; lastIdx = k; lastRun = last; &#125; &#125; //ÁÑ∂ÂêéÊää4ÁªìÁÇπÊîæÂà∞Êñ∞Êï∞ÁªÑ‰∏≠ÔºåËøôÊ†∑4,5,6Â∞±ÈÉΩËøáÂéª‰∫Ü newTable[lastIdx] = lastRun; // Clone remaining nodes //Ââ©‰∏ãÁöÑÂ∞±ÊòØËß£ÂÜ≥1,2,3‰∫Ü,ÈÅçÂéÜÂéüHashEntryÊï∞ÁªÑ,Áõ¥Âà∞Á≠â‰∫é4‰∏∫Ê≠¢ //Ëøô‰∫õÁªìÁÇπÈááÁî®Â§¥ÊèíÊ≥ïÊîæÂà∞Êñ∞HashEntryÊï∞ÁªÑ‰∏≠ for (HashEntry&lt;K,V&gt; p = e; p != lastRun; p = p.next) &#123; V v = p.value; int h = p.hash; int k = h &amp; sizeMask; HashEntry&lt;K,V&gt; n = newTable[k];//Â§¥ÊèíÊ≥ï newTable[k] = new HashEntry&lt;K,V&gt;(h, p.key, v, n); &#125; &#125; &#125; &#125; //Â∞ÜÂæÖÊñ∞Âä†ÂÖ•ÁöÑÂÖÉÁ¥†ÊîæÂà∞Êñ∞Êï∞ÁªÑ(Â§¥ÊèíÊ≥ï) int nodeIndex = node.hash &amp; sizeMask; // add the new node node.setNext(newTable[nodeIndex]); newTable[nodeIndex] = node; //segmentÁöÑÊï∞ÁªÑÊåáÂà∞Êñ∞Êï∞ÁªÑ table = newTable;&#125; ÂéüHashEntryÊï∞ÁªÑÊâ©Â§ß‰∏ÄÂÄçÔºåÁÑ∂ÂêéÈÅçÂéÜÂéüHashEntryÊï∞ÁªÑÔºåÊâæÂà∞Êüê‰∏™ÁªìÁÇπlastRunÔºå‰ªéËøô‰∏™ÁªìÁÇπÂºÄÂßãÂæÄ‰∏ãÔºåÈÉΩ‰ºöÊîæÂà∞Êñ∞HashEntryÊï∞ÁªÑÁöÑÊüê‰∏™ÊßΩ‰∏ãÈù¢„ÄÇÊé•‰∏ãÊù•Â∞±ÊòØÈÅçÂéÜÂâ©‰∏ãÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéÈááÁî®Â§¥ÊèíÊ≥ïÔºåÊîæÂà∞Êñ∞Êï∞ÁªÑ‰∏≠„ÄÇÊúÄÂêéÂ∞±ÊòØÂ∞ÜÂæÖÊñ∞Âä†‰∫∫ÁöÑÁªìÁÇπÔºåÊîæÂà∞Êñ∞Êï∞ÁªÑ‰∏≠„ÄÇ getÊìç‰Ωú 123456789101112131415161718192021public V get(Object key) &#123; Segment&lt;K,V&gt; s; // manually integrate access methods to reduce overhead HashEntry&lt;K,V&gt;[] tab; //keyÁöÑhashÂÄº int h = hash(key); //ËÆ°ÁÆóÂá∫kÊâÄÂú®ÁöÑsegmentÊâÄÂú®ÁöÑÂÜÖÂ≠òÂú∞ÂùÄ long u = (((h &gt;&gt;&gt; segmentShift) &amp; segmentMask) &lt;&lt; SSHIFT) + SBASE; //ÈÄöËøáCASÊìç‰ΩúËé∑Âèñsegment,Âà§Êñ≠ÈÉΩ‰∏ç‰∏∫null if ((s = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(segments, u)) != null &amp;&amp; (tab = s.table) != null) &#123; //ÂÜçÈÄöËøáCASÊìç‰ΩúÔºåËé∑ÂèñÁöÑkeyÊâÄÂú®ÁöÑHashEntry[]Êï∞ÁªÑÁöÑ‰∏ãÊ†áÔºåËé∑ÂèñÂà∞Â∞±ËøîÂõûÔºåÊ≤°ÊúâÂ∞±ËøîÂõûnull for (HashEntry&lt;K,V&gt; e = (HashEntry&lt;K,V&gt;) UNSAFE.getObjectVolatile (tab, ((long)(((tab.length - 1) &amp; h)) &lt;&lt; TSHIFT) + TBASE); e != null; e = e.next) &#123; K k; if ((k = e.key) == key || (e.hash == h &amp;&amp; key.equals(k))) return e.value; &#125; &#125; return null;&#125; ËÆ°ÁÆó hash ÂÄºÔºåÊâæÂà∞ segment Êï∞ÁªÑ‰∏≠ÁöÑÂÖ∑‰Ωì‰ΩçÁΩÆ,‰ΩøÁî®UnsafeËé∑ÂèñÂØπÂ∫îÁöÑSegment,Ê†πÊçÆ hash ÊâæÂà∞Êï∞ÁªÑ‰∏≠ÂÖ∑‰ΩìÁöÑ‰ΩçÁΩÆ,‰ªéÈìæË°®Â§¥ÂºÄÂßãÈÅçÂéÜÊï¥‰∏™ÈìæË°®ÔºàÂõ†‰∏∫HashÂèØËÉΩ‰ºöÊúâÁ¢∞ÊíûÔºåÊâÄ‰ª•Áî®‰∏Ä‰∏™ÈìæË°®‰øùÂ≠òÔºâÔºåÂ¶ÇÊûúÊâæÂà∞ÂØπÂ∫îÁöÑkeyÔºåÂàôËøîÂõûÂØπÂ∫îÁöÑvalueÂÄºÔºåÂê¶ÂàôËøîÂõûnull„ÄÇ &lt;font color=&quot;red&quot;&gt;Ê≥®ÔºögetÊìç‰Ωú‰∏çÈúÄË¶ÅÈîÅÔºåÁî±‰∫éÂÖ∂‰∏≠Ê∂âÂèäÂà∞ÁöÑÂÖ±‰∫´ÂèòÈáèÈÉΩ‰ΩøÁî®volatile‰øÆÈ•∞ÔºåvolatileÂèØ‰ª•‰øùËØÅÂÜÖÂ≠òÂèØËßÅÊÄßÔºåÊâÄ‰ª•‰∏ç‰ºöËØªÂèñÂà∞ËøáÊúüÊï∞ÊçÆ„ÄÇ&lt;/font&gt; removeÊìç‰Ωú 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public V remove(Object key) &#123; int hash = hash(key); //keyÁöÑhashÂÄºÔºåËé∑Âèñsegment Segment&lt;K,V&gt; s = segmentForHash(hash); return s == null ? null : s.remove(key, hash, null);&#125;final V remove(Object key, int hash, Object value) &#123; //Â∞ùËØïËé∑ÂèñsegmentÈîÅ if (!tryLock()) //Â§±Ë¥•Â∞±Ëá™Êóã scanAndLock(key, hash); //ÊâßË°åÂà∞ËøôÈáå‰∏ÄÂÆöËé∑Âèñ‰∫ÜsegmentÈîÅ V oldValue = null; try &#123; //Ëé∑ÂèñsegmentÁöÑHashEntry[]Êï∞ÁªÑ //Ëé∑ÂèñkeyÊâÄÂú®ÁöÑ‰∏ãÊ†áÔºåÁÑ∂ÂêéËé∑ÂèñÂ§¥ÁªìÁÇπ HashEntry&lt;K,V&gt;[] tab = table; int index = (tab.length - 1) &amp; hash; HashEntry&lt;K,V&gt; e = entryAt(tab, index); HashEntry&lt;K,V&gt; pred = null; while (e != null) &#123; K k; HashEntry&lt;K,V&gt; next = e.next; //Âà§Êñ≠ÂΩìÂâçÁªìÁÇπeÊòØ‰∏çÊòØË¶ÅÂà†Èô§ÁöÑÊï∞ÊçÆ if ((k = e.key) == key || (e.hash == hash &amp;&amp; key.equals(k))) &#123;//keyÁõ∏Âêå V v = e.value; //Â¶ÇÊûúÊ≤°Êúâ‰º†valueÔºåÊàñËÄÖvalueÁõ∏Âêå if (value == null || value == v || value.equals(v)) &#123; if (pred == null)//Ë¶ÅÂà†Èô§ÁªìÁÇπÁöÑÂâç‰∏Ä‰∏™ÁªìÁÇπ‰∏∫null setEntryAt(tab, index, next);//Áõ¥Êé•ËµãÂÄº else pred.setNext(next);//Áõ¥Êé•Â∞ÜÂΩìÂâçÁªìÁÇπÁöÑÂâç‰∏Ä‰∏™ÁªìÁÇπÁöÑnextËÆæÁΩÆÊàêÂΩìÂâçÁªìÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ÁªìÁÇπ„ÄÇ ++modCount; --count; oldValue = v; &#125; break; &#125; //ÂâçÁªìÁÇπ‰∏çÊòØË¶ÅÊâæÁöÑÁªìÁÇπ,ÈÅçÂéÜ‰∏ã‰∏Ä‰∏™ pred = e; e = next; &#125; &#125; finally &#123; unlock(); &#125; return oldValue;&#125; ÊâæÂà∞keyÊâÄÂú®HashEntry[]Êï∞ÁªÑÁöÑ‰∏ãÊ†áÔºåÁÑ∂ÂêéÈÅçÂéÜÈìæË°®ÔºåÊâæÂà∞ÁªìÁÇπ„ÄÇÂ∞ÜÂΩìÂâçÁªìÁÇπÁöÑ‰∏ä‰∏Ä‰∏™ÁªìÁÇπÁöÑnextËÆæÁΩÆÊàêÂΩìÂâçÁªìÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ÁªìÁÇπ„ÄÇ sizeÊìç‰Ωú 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public int size() &#123; final Segment&lt;K,V&gt;[] segments = this.segments; int size; boolean overflow; // // ÊòØÂê¶Ê∫¢Âá∫ long sum; // Â≠òÂÇ®Êú¨Ê¨°Âæ™ÁéØËøáÁ®ã‰∏≠ËÆ°ÁÆóÂæóÂà∞ÁöÑmodCountÁöÑÂÄº long last = 0L; // Â≠òÂÇ®‰∏ä‰∏ÄÊ¨°ÈÅçÂéÜËøáÁ®ã‰∏≠ËÆ°ÁÆóÂæóÂà∞ÁöÑmodCountÁöÑÂíå int retries = -1; // first iteration isn't retry try &#123; for (;;) &#123; //Âà§Êñ≠retriesÊòØÂê¶Á≠â‰∫éRETRIES_BEFORE_LOCK(ÂÄº‰∏∫2) //‰πüÂ∞±ÊòØÈªòËÆ§Êúâ‰∏§Ê¨°ÁöÑÊú∫‰ºöÔºåÊòØ‰∏çÂä†ÈîÅÊù•Ê±ÇsizeÁöÑ if (retries++ == RETRIES_BEFORE_LOCK) &#123; for (int j = 0; j &lt; segments.length; ++j) ensureSegment(j).lock(); // force creation &#125; sum = 0L; size = 0; overflow = false; //ÈÅçÂéÜSegments[]Êï∞ÁªÑËé∑ÂèñÈáåÈù¢ÁöÑÊØè‰∏Ä‰∏™segmentÔºåÁÑ∂ÂêéÂØπmodCountËøõË°åÊ±ÇÂíå //Ëøô‰∏™forÂµåÂ•óÂú®for(;;)‰∏≠ÔºåÈªòËÆ§‰ºöÊâßË°å‰∏§Ê¨°ÔºåÂ¶ÇÊûú‰∏§Ê¨°ÂÄºÁõ∏ÂêåÔºåÂ∞±ËøîÂõû //Â¶ÇÊûú‰∏§Ê¨°ÂÄº‰∏çÂêåÔºåÂ∞±ËøõÂÖ•Âà∞‰∏äÈù¢ÁöÑif‰∏≠ÔºåËøõË°åÂä†ÈîÅ„ÄÇ‰πãÂêéÂú®ËøõË°åÊ±ÇÂíå for (int j = 0; j &lt; segments.length; ++j) &#123; Segment&lt;K,V&gt; seg = segmentAt(segments, j); if (seg != null) &#123; sum += seg.modCount; int c = seg.count; if (c &lt; 0 || (size += c) &lt; 0) overflow = true; &#125; &#125; if (sum == last) break; last = sum; &#125; &#125; finally &#123; //Áî±‰∫éÂè™ÊúâÂú®retriesÁ≠â‰∫éRETRIES_BEFORE_LOCKÊó∂Êâç‰ºöÊâßË°åÂº∫Âà∂Âä†ÈîÅÔºåÂπ∂‰∏îÁî±‰∫éÊòØÁî®ÁöÑretries++Ôºå //ÊâÄ‰ª•Âº∫Âà∂Âä†ÈîÅÂÆåÊØïÂêéÔºåretriesÁöÑÂÄºÊòØ‰∏ÄÂÆö‰ºöÂ§ß‰∫éRETRIES_BEFORE_LOCKÁöÑÔºå //ËøôÊ†∑Â∞±Èò≤Ê≠¢Ê≠£Â∏∏ÈÅçÂéÜËÄåÊ≤°ËøõË°åÂä†ÈîÅÊó∂ËøõË°åÈîÅÈáäÊîæÁöÑÊÉÖÂÜµ if (retries &gt; RETRIES_BEFORE_LOCK) &#123; for (int j = 0; j &lt; segments.length; ++j) segmentAt(segments, j).unlock(); &#125; &#125; return overflow ? Integer.MAX_VALUE : size;&#125; ÂÖàÂ∞ùËØïRETRIES_BEFORE_LOCKÊ¨°( Âç≥2Ê¨° )‰∏çÂä†ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ∞Üsegment[]Êï∞ÁªÑ‰∏≠ÊØè‰∏™segmentÁöÑcountÁ¥ØÂä†ÔºåÂêåÊó∂‰πü‰ºöÂ∞ÜÊØè‰∏™segmentÁöÑmodCountËøõË°åÁ¥ØÂä†„ÄÇÂ¶ÇÊûú‰∏§Ê¨°‰∏çÂä†ÈîÅÁöÑÊìç‰ΩúÂêéÔºåmodCountSumÂÄºÊòØ‰∏ÄÊ†∑ÁöÑÔºåËøôËØ¥ÊòéÂú®Ëøô‰∏§Ê¨°Á¥ØÂä†segmentcountÁöÑËøáÁ®ã‰∏≠ConcurrentHashMapÊ≤°ÊúâÂèëÁîüÁªìÊûÑÊÄßÂèòÂåñÔºåÈÇ£‰πàÂ∞±Áõ¥Êé•ËøîÂõûÁ¥ØÂä†ÁöÑcountÂÄº; Â¶ÇÊûúÂú®‰∏§Ê¨°Á¥ØÂä†segmentÁöÑcountÊìç‰ΩúÊúüÈó¥ConcurrentHashMapÂèëÁîü‰∫ÜÁªìÊûÑÊÄßÊîπÂèòÔºåÂàô‰ºöÈÄöËøáÂ∞ÜÊâÄÊúâÁöÑsegmentÈÉΩÂä†ÈîÅÔºåÁÑ∂ÂêéÈáçÊñ∞ËøõË°åcountÁöÑÁ¥ØÂä†Êìç‰Ωú„ÄÇÂú®ÂÆåÊàêcountÁöÑÁ¥ØÂä†Êìç‰ΩúÂêéÔºåÈáäÊîæÊâÄÊúâÁöÑÈîÅ„ÄÇÊúÄÂêéËøîÂõûÁ¥ØÂä†ÁöÑcountÂÄº„ÄÇ Â¶ÇÊûúÁ¥ØÂä†ÁöÑcountÂÄºÂ§ß‰∫é‰∫ÜInteger.MAX_VALUEÔºåÂàôËøîÂõûInteger.MAX_VALUE„ÄÇ ConcurrentHashMap-Jdk1.8 Êï∞ÊçÆÁªìÊûÑ Java7‰∏≠ConcurrentHashMapÊòØÈááÁî®‰∫ÜÊï∞ÁªÑ+ÈìæË°®ÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇË¶ÅÁü•ÈÅìÈìæË°®ÁöÑÊü•ÊâæÊïàÁéáÊòØ‰Ωé‰∏ãÁöÑÔºåÂÖ∂Âπ≥ÂùáÁöÑÊü•ÊâæÊó∂Èó¥ÊòØO(logn)ÔºåÂÖ∂‰∏≠nÊòØÈìæË°®ÁöÑÈïøÂ∫¶„ÄÇÂΩìÈìæË°®ËæÉÈïøÊó∂ÔºåÊü•ÊâæÂèØËÉΩ‰ºöÊàê‰∏∫ÂìàÂ∏åË°®ÁöÑÊÄßËÉΩÁì∂È¢à„ÄÇ ÈíàÂØπËøô‰∏™ÈóÆÈ¢òÔºåJava8‰∏≠ÂØπConcurrentHashMapÁöÑÊï∞ÊçÆÁªìÊûÑËøõË°å‰∫Ü‰ºòÂåñÔºåÈááÁî®‰∫ÜÊï∞ÁªÑ+ÈìæË°®+Á∫¢ÈªëÊ†ëÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÂΩìÊï∞ÁªÑ‰∏≠Êüê‰∏™ÈìæË°®ÁöÑÈïøÂ∫¶Ë∂ÖËøá‰∏ÄÂÆöÁöÑÈòàÂÄº‰πãÂêéÔºå‰ºöÂ∞ÜÂÖ∂ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ëÔºå‰ª•ÊèêÈ´òÊü•ÊâæÊïàÁéá„ÄÇÂΩìÁ∫¢ÈªëÊ†ëÁªìÁÇπÊï∞Â∞ë‰∫é‰∏ÄÂÆöÈòàÂÄºÂêéÔºåËøòËÉΩÈôçÁ∫¢ÈªëÊ†ëÈÄÜÈÄÄÂåñÊàêÈìæË°®„ÄÇ‰∏ãÂõæÊòØJava8 ConcurrentHashMapÁöÑÊï∞ÊçÆÁªìÊûÑÁ§∫ÊÑèÂõæÔºö Java8‰∏≠ÂèñÊ∂à‰∫ÜJava7‰∏≠ÁöÑÂàÜÊÆµÈîÅËÆæËÆ°ÔºåËÄåÈááÁî®‰∫Ü CAS + synchronized Êù•‰øùËØÅÂπ∂ÂèëÂÆâÂÖ®ÊÄß„ÄÇ ÈáçË¶ÅÂ±ûÊÄß 123456789101112131415161718192021222324252627282930313233343536373839// ÊúÄÂ§ßÂÆπÈáèprivate static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;// ÂàùÂßãÂÆπÈáèprivate static final int DEFAULT_CAPACITY = 16;// Êï∞ÊçÆÊúÄÂ§ßÈïøÂ∫¶static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;// ÈªòËÆ§Âπ∂ÂèëÂ∫¶private static final int DEFAULT_CONCURRENCY_LEVEL = 16;// ÈªòËÆ§Âä†ËΩΩÂõ†Â≠êprivate static final float LOAD_FACTOR = 0.75f;// ÈìæË°®ËΩ¨Á∫¢ÈªëÊ†ëÁöÑÈòÄÂÄºÔºåÂ§ß‰∫é8Êó∂static final int TREEIFY_THRESHOLD = 8;// Á∫¢ÈªëÊ†ëËΩ¨ÈìæË°®ÁöÑÈòÄÂÄºÔºåÂ∞è‰∫éÁ≠â‰∫é6ÔºàtranferÊó∂Ôºålc„ÄÅhc=0‰∏§‰∏™ËÆ°Êï∞Âô®ÂàÜÂà´++ËÆ∞ÂΩïÂéübin„ÄÅÊñ∞binTreeNodeÊï∞ÈáèÔºå&lt;=UNTREEIFY_THRESHOLD Âàôuntreeify(lo)Ôºâ„ÄÇ// „Äê‰ªÖÂú®Êâ©ÂÆπtranferÊó∂ÊâçÂèØËÉΩÊ†ëËΩ¨ÈìæË°®„Äëstatic final int UNTREEIFY_THRESHOLD = 6;static final int MIN_TREEIFY_CAPACITY = 64;private static final int MIN_TRANSFER_STRIDE = 16;private static int RESIZE_STAMP_BITS = 16;// 2^15-1Ôºåhelp resizeÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞private static final int MAX_RESIZERS = (1 &lt;&lt; (32 - RESIZE_STAMP_BITS)) - 1;// 32-16=16ÔºåsizeCtl‰∏≠ËÆ∞ÂΩïsizeÂ§ßÂ∞èÁöÑÂÅèÁßªÈáèprivate static final int RESIZE_STAMP_SHIFT = 32 - RESIZE_STAMP_BITS;static final int MOVED = -1; // Ë°®Á§∫Ê≠£Âú®ËΩ¨Áßªstatic final int TREEBIN = -2; // Ë°®Á§∫Â∑≤ÁªèËΩ¨Êç¢ÊàêÊ†ëstatic final int RESERVED = -3; // hash for transient reservationsstatic final int HASH_BITS = 0x7fffffff; // usable bits of normal node hashtransient volatile Node&lt;K,V&gt;[] table;//ÈªòËÆ§Ê≤°ÂàùÂßãÂåñÁöÑÊï∞ÁªÑÔºåÁî®Êù•‰øùÂ≠òÂÖÉÁ¥†private transient volatile Node&lt;K,V&gt;[] nextTable;//ËΩ¨ÁßªÁöÑÊó∂ÂÄôÁî®ÁöÑÊï∞ÁªÑ// ÂèØÁî®Â§ÑÁêÜÂô®Êï∞Èáèstatic final int NCPU = Runtime.getRuntime().availableProcessors();/** * Áî®Êù•ÊéßÂà∂Ë°®ÂàùÂßãÂåñÂíåÊâ©ÂÆπÁöÑÔºåÈªòËÆ§ÂÄº‰∏∫0ÔºåÂΩìÂú®ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÊåáÂÆö‰∫ÜÂ§ßÂ∞èÔºåËøô‰ºöÂ∞ÜËøô‰∏™Â§ßÂ∞è‰øùÂ≠òÂú®sizeCtl‰∏≠ÔºåÂ§ßÂ∞è‰∏∫Êï∞ÁªÑÁöÑ0.75 * Ê≠£Êï∞Êàñ0‰ª£Ë°®hashË°®ËøòÊ≤°ÊúâË¢´ÂàùÂßãÂåñÔºåËøô‰∏™Êï∞ÂÄºË°®Á§∫ÂàùÂßãÂåñÊàñ‰∏ã‰∏ÄÊ¨°ËøõË°åÊâ©ÂÆπÁöÑÂ§ßÂ∞è * ÂΩì‰∏∫Ë¥üÁöÑÊó∂ÂÄôÔºåËØ¥ÊòéË°®Ê≠£Âú®ÂàùÂßãÂåñÊàñÊâ©ÂÆπÔºå * -1Ë°®Á§∫ÂàùÂßãÂåñ * -(1+n) n:Ë°®Á§∫Ê¥ªÂä®ÁöÑÊâ©ÂÆπÁ∫øÁ®ã */private transient volatile int sizeCtl; ÈáçË¶ÅÁ±ª Node-ÊûÑÊàêÂÖÉÁ¥†ÁöÑÂü∫Êú¨Á±ª ÊúÄÊ†∏ÂøÉÁöÑÂÜÖÈÉ®Á±ªÔºåÂÆÉÂåÖË£Ö‰∫Ükey-valueÈîÆÂÄºÂØπÔºåÊâÄÊúâÊèíÂÖ•ConcurrentHashMapÁöÑÊï∞ÊçÆÈÉΩÂåÖË£ÖÂú®ËøôÈáåÈù¢„ÄÇÂÆÉ‰∏éHashMap‰∏≠ÁöÑÂÆö‰πâÂæàÁõ∏‰ººÔºå‰ΩÜÊòØ‰ΩÜÊòØÊúâ‰∏Ä‰∫õÂ∑ÆÂà´ÂÆÉÂØπvalueÂíånextÂ±ûÊÄßËÆæÁΩÆ‰∫ÜvolatileÂêåÊ≠•ÈîÅ(‰∏éJDK7ÁöÑSegmentÁõ∏Âêå)ÔºåÂÆÉ‰∏çÂÖÅËÆ∏Ë∞ÉÁî®setValueÊñπÊ≥ïÁõ¥Êé•ÊîπÂèòNodeÁöÑvalueÂüüÔºåÂÆÉÂ¢ûÂä†‰∫ÜfindÊñπÊ≥ïËæÖÂä©map.get()ÊñπÊ≥ï„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; //keyÁöÑhashÂÄº final K key; //key volatile V val; //value volatile Node&lt;K,V&gt; next; //Ë°®Á§∫ÈìæË°®‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™ÁªìÁÇπ Node(int hash, K key, V val, Node&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.val = val; this.next = next; &#125; public final K getKey() &#123; return key; &#125; public final V getValue() &#123; return val; &#125; public final int hashCode() &#123; return key.hashCode() ^ val.hashCode(); &#125; public final String toString()&#123; return key + "=" + val; &#125; public final V setValue(V value) &#123; throw new UnsupportedOperationException(); &#125; public final boolean equals(Object o) &#123; Object k, v, u; Map.Entry&lt;?,?&gt; e; return ((o instanceof Map.Entry) &amp;&amp; (k = (e = (Map.Entry&lt;?,?&gt;)o).getKey()) != null &amp;&amp; (v = e.getValue()) != null &amp;&amp; (k == key || k.equals(key)) &amp;&amp; (v == (u = val) || v.equals(u))); &#125; /** * Virtualized support for map.get(); overridden in subclasses. */ Node&lt;K,V&gt; find(int h, Object k) &#123; Node&lt;K,V&gt; e = this; if (k != null) &#123; do &#123; K ek; if (e.hash == h &amp;&amp; ((ek = e.key) == k || (ek != null &amp;&amp; k.equals(ek)))) return e; &#125; while ((e = e.next) != null); &#125; return null; &#125;&#125; TreeNode-Ê†ëÁªìÁÇπÁ±ª Ê†ëËäÇÁÇπÁ±ªÔºåÂè¶Â§ñ‰∏Ä‰∏™Ê†∏ÂøÉÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÂΩìÈìæË°®ÈïøÂ∫¶ËøáÈïøÁöÑÊó∂ÂÄôÔºå‰ºöËΩ¨Êç¢‰∏∫TreeNode„ÄÇ‰ΩÜÊòØ‰∏éHashMap‰∏çÁõ∏ÂêåÁöÑÊòØÔºåÂÆÉÂπ∂‰∏çÊòØÁõ¥Êé•ËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ëÔºåËÄåÊòØÊääËøô‰∫õÁªìÁÇπÂåÖË£ÖÊàêTreeNodeÊîæÂú®TreeBinÂØπË±°‰∏≠ÔºåÁî±TreeBinÂÆåÊàêÂØπÁ∫¢ÈªëÊ†ëÁöÑÂåÖË£Ö„ÄÇËÄå‰∏îTreeNodeÂú®ConcurrentHashMapÈõÜÊàêËá™NodeÁ±ªÔºåËÄåÂπ∂ÈùûHashMap‰∏≠ÁöÑÈõÜÊàêËá™LinkedHashMap.Entry&lt;K,V&gt;Á±ªÔºå‰πüÂ∞±ÊòØËØ¥TreeNodeÂ∏¶ÊúânextÊåáÈíàÔºåËøôÊ†∑ÂÅöÁöÑÁõÆÁöÑÊòØÊñπ‰æøÂü∫‰∫éTreeBinÁöÑËÆøÈóÆ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950static final class TreeNode&lt;K,V&gt; extends Node&lt;K,V&gt; &#123; TreeNode&lt;K,V&gt; parent; // red-black tree links TreeNode&lt;K,V&gt; left; TreeNode&lt;K,V&gt; right; TreeNode&lt;K,V&gt; prev; // needed to unlink next upon deletion boolean red; TreeNode(int hash, K key, V val, Node&lt;K,V&gt; next, TreeNode&lt;K,V&gt; parent) &#123; super(hash, key, val, next); this.parent = parent; &#125; Node&lt;K,V&gt; find(int h, Object k) &#123; return findTreeNode(h, k, null); &#125; /** * Returns the TreeNode (or null if not found) for the given key * starting at given root. */ final TreeNode&lt;K,V&gt; findTreeNode(int h, Object k, Class&lt;?&gt; kc) &#123; if (k != null) &#123; TreeNode&lt;K,V&gt; p = this; do &#123; int ph, dir; K pk; TreeNode&lt;K,V&gt; q; TreeNode&lt;K,V&gt; pl = p.left, pr = p.right; if ((ph = p.hash) &gt; h) p = pl; else if (ph &lt; h) p = pr; else if ((pk = p.key) == k || (pk != null &amp;&amp; k.equals(pk))) return p; else if (pl == null) p = pr; else if (pr == null) p = pl; else if ((kc != null || (kc = comparableClassFor(k)) != null) &amp;&amp; (dir = compareComparables(kc, k, pk)) != 0) p = (dir &lt; 0) ? pl : pr; else if ((q = pr.findTreeNode(h, k, kc)) != null) return q; else p = pl; &#125; while (p != null); &#125; return null; &#125;&#125; TreeBin-Ê†ëÁöÑÂ§¥ÁªìÁÇπ Ëøô‰∏™Á±ªÂπ∂‰∏çË¥üË¥£ÂåÖË£ÖÁî®Êà∑ÁöÑkey„ÄÅvalue‰ø°ÊÅØÔºåËÄåÊòØÂåÖË£ÖÁöÑÂæàÂ§öTreeNodeËäÇÁÇπ„ÄÇÂÆÉ‰ª£Êõø‰∫ÜTreeNodeÁöÑÊ†πËäÇÁÇπÔºå‰πüÂ∞±ÊòØËØ¥Âú®ÂÆûÈôÖÁöÑConcurrentHashMap‚ÄúÊï∞ÁªÑ‚Äù‰∏≠ÔºåÂ≠òÊîæÁöÑÊòØTreeBinÂØπË±°ÔºåËÄå‰∏çÊòØTreeNodeÂØπË±°ÔºåËøôÊòØ‰∏éHashMapÁöÑÂå∫Âà´„ÄÇÂè¶Â§ñËøô‰∏™Á±ªËøòÂ∏¶Êúâ‰∫ÜËØªÂÜôÈîÅ„ÄÇÂú®ÊûÑÈÄ†TreeBinËäÇÁÇπÊó∂Ôºå‰ªÖ‰ªÖÊåáÂÆö‰∫ÜÂÆÉÁöÑhashÂÄº‰∏∫TREEBINÂ∏∏ÈáèÔºåËøô‰πüÂ∞±ÊòØ‰∏™Ê†áËØÜ„ÄÇ 12345678910static final class TreeBin&lt;K,V&gt; extends Node&lt;K,V&gt; &#123; TreeNode&lt;K,V&gt; root; volatile TreeNode&lt;K,V&gt; first; volatile Thread waiter; volatile int lockState; // values for lockState static final int WRITER = 1; // set while holding write lock static final int WAITER = 2; // set when waiting for write lock static final int READER = 4; // increment value for setting read lock&#125; ForwardingNode-ËΩ¨ÁßªÁöÑÊó∂ÂÄôÊîæÂú®Â§¥ÈÉ®ÁöÑÁªìÁÇπ ‰∏Ä‰∏™Áî®‰∫éËøûÊé•‰∏§‰∏™tableÁöÑËäÇÁÇπÁ±ª„ÄÇÂÆÉÂåÖÂê´‰∏Ä‰∏™nextTableÊåáÈíàÔºåÁî®‰∫éÊåáÂêë‰∏ã‰∏ÄÂº†Ë°®„ÄÇËÄå‰∏îËøô‰∏™ËäÇÁÇπÁöÑkey value nextÊåáÈíàÂÖ®ÈÉ®‰∏∫nullÔºåÂÆÉÁöÑhashÂÄº‰∏∫-1. ËøôÈáåÈù¢ÂÆö‰πâÁöÑfindÁöÑÊñπÊ≥ïÊòØ‰ªénextTableÈáåËøõË°åÊü•ËØ¢ËäÇÁÇπÔºåËÄå‰∏çÊòØ‰ª•Ëá™Ë∫´‰∏∫Â§¥ËäÇÁÇπËøõË°åÊü•Êâæ„ÄÇÂÖ∂‰∏≠Â≠òÂÇ®nextTableÁöÑÂºïÁî®„ÄÇÂè™ÊúâtableÂèëÁîüÊâ©ÂÆπÁöÑÊó∂ÂÄôÔºåForwardingNodeÊâç‰ºöÂèëÊå•‰ΩúÁî®Ôºå‰Ωú‰∏∫‰∏Ä‰∏™Âç†‰ΩçÁ¨¶ÊîæÂú®table‰∏≠Ë°®Á§∫ÂΩìÂâçËäÇÁÇπ‰∏∫nullÊàñÂàôÂ∑≤ÁªèË¢´ÁßªÂä®„ÄÇ 1234567static final class ForwardingNode&lt;K,V&gt; extends Node&lt;K,V&gt; &#123; final Node&lt;K,V&gt;[] nextTable; ForwardingNode(Node&lt;K,V&gt;[] tab) &#123; super(MOVED, null, null, null); this.nextTable = tab; &#125;&#125; 3‰∏™ÂéüÂ≠êÊìç‰Ωú Âú®ConcurrentHashMap‰∏≠‰ΩøÁî®‰∫ÜunSafeÊñπÊ≥ïÔºåÈÄöËøáÁõ¥Êé•Êìç‰ΩúÂÜÖÂ≠òÁöÑÊñπÂºèÊù•‰øùËØÅÂπ∂ÂèëÂ§ÑÁêÜÁöÑÂÆâÂÖ®ÊÄßÔºå‰ΩøÁî®ÁöÑÊòØÁ°¨‰ª∂ÁöÑÂÆâÂÖ®Êú∫Âà∂„ÄÇ 123456789101112131415161718192021/* * Áî®Êù•ËøîÂõûËäÇÁÇπÊï∞ÁªÑÁöÑÊåáÂÆö‰ΩçÁΩÆÁöÑËäÇÁÇπÁöÑÂéüÂ≠êÊìç‰Ωú */@SuppressWarnings("unchecked")static final &lt;K,V&gt; Node&lt;K,V&gt; tabAt(Node&lt;K,V&gt;[] tab, int i) &#123; return (Node&lt;K,V&gt;)U.getObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE);&#125;/* * Âà©Áî®CASÁÆóÊ≥ïËÆæÁΩÆi‰ΩçÁΩÆ‰∏äÁöÑNodeËäÇÁÇπÔºàÂ∞ÜcÂíåtable[i]ÊØîËæÉÔºåÁõ∏ÂêåÂàôÊèíÂÖ•vÔºâ„ÄÇ */static final &lt;K,V&gt; boolean casTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; c, Node&lt;K,V&gt; v) &#123; return U.compareAndSwapObject(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, c, v);&#125;/* * ËÆæÁΩÆËäÇÁÇπ‰ΩçÁΩÆÁöÑÂÄºÔºå‰ªÖÂú®‰∏äÈîÅÂå∫Ë¢´Ë∞ÉÁî® */static final &lt;K,V&gt; void setTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; v) &#123; U.putObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v);&#125; ÊûÑÈÄ†Âô® 1234567891011121314151617//Á©∫ÁöÑÊûÑÈÄ†public ConcurrentHashMapDebug() &#123;&#125;//Â¶ÇÊûúÂú®ÂÆû‰æãÂåñÂØπË±°ÁöÑÊó∂ÂÄôÊåáÂÆö‰∫ÜÂÆπÈáèÔºåÂàôÂàùÂßãÂåñsizeCtlpublic ConcurrentHashMapDebug(int initialCapacity) &#123; if (initialCapacity &lt; 0) throw new IllegalArgumentException(); int cap = ((initialCapacity &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ? MAXIMUM_CAPACITY : tableSizeFor(initialCapacity + (initialCapacity &gt;&gt;&gt; 1) + 1)); this.sizeCtl = cap;&#125;//ÂΩìÂá∫ÂÖ•‰∏Ä‰∏™MapÁöÑÊó∂ÂÄôÔºåÂÖàËÆæÂÆösizeCtl‰∏∫ÈªòËÆ§ÂÆπÈáèÔºåÂú®Ê∑ªÂä†ÂÖÉÁ¥†public ConcurrentHashMapDebug(Map&lt;? extends K, ? extends V&gt; m) &#123; this.sizeCtl = DEFAULT_CAPACITY; putAll(m);&#125; Âú®‰ªª‰Ωï‰∏Ä‰∏™ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÔºåÈÉΩÊ≤°ÊúâÂØπÂ≠òÂÇ®MapÂÖÉÁ¥†NodeÁöÑtableÂèòÈáèËøõË°åÂàùÂßãÂåñ„ÄÇËÄåÊòØÂú®Á¨¨‰∏ÄÊ¨°putÊìç‰ΩúÁöÑÊó∂ÂÄôÂú®ËøõË°åÂàùÂßãÂåñ„ÄÇ putÊìç‰Ωú 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121/* * ÂçïÁ∫ØÁöÑË∞ÉÁî®putValÊñπÊ≥ïÔºåÂπ∂‰∏îputValÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞ËÆæÁΩÆ‰∏∫false * ÂΩìËÆæÁΩÆ‰∏∫falseÁöÑÊó∂ÂÄôË°®Á§∫Ëøô‰∏™value‰∏ÄÂÆö‰ºöËÆæÁΩÆ * trueÁöÑÊó∂ÂÄôÔºåÂè™ÊúâÂΩìËøô‰∏™keyÁöÑvalue‰∏∫Á©∫ÁöÑÊó∂ÂÄôÊâç‰ºöËÆæÁΩÆ */public V put(K key, V value) &#123; return putVal(key, value, false);&#125;/* * ÂΩìÊ∑ªÂä†‰∏ÄÂØπÈîÆÂÄºÂØπÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºöÂéªÂà§Êñ≠‰øùÂ≠òËøô‰∫õÈîÆÂÄºÂØπÁöÑÊï∞ÁªÑÊòØ‰∏çÊòØÂàùÂßãÂåñ‰∫ÜÔºå * Â¶ÇÊûúÊ≤°ÊúâÁöÑËØùÂ∞±ÂàùÂßãÂåñÊï∞ÁªÑ * ÁÑ∂ÂêéÈÄöËøáËÆ°ÁÆóhashÂÄºÊù•Á°ÆÂÆöÊîæÂú®Êï∞ÁªÑÁöÑÂì™‰∏™‰ΩçÁΩÆ * Â¶ÇÊûúËøô‰∏™‰ΩçÁΩÆ‰∏∫Á©∫ÂàôÁõ¥Êé•Ê∑ªÂä†ÔºåÂ¶ÇÊûú‰∏ç‰∏∫Á©∫ÁöÑËØùÔºåÂàôÂèñÂá∫Ëøô‰∏™ËäÇÁÇπÊù• * Â¶ÇÊûúÂèñÂá∫Êù•ÁöÑËäÇÁÇπÁöÑhashÂÄºÊòØMOVED(-1)ÁöÑËØùÔºåÂàôË°®Á§∫ÂΩìÂâçÊ≠£Âú®ÂØπËøô‰∏™Êï∞ÁªÑËøõË°åÊâ©ÂÆπÔºåÂ§çÂà∂Âà∞Êñ∞ÁöÑÊï∞ÁªÑÔºåÂàôÂΩìÂâçÁ∫øÁ®ã‰πüÂéªÂ∏ÆÂä©Â§çÂà∂ * ÊúÄÂêé‰∏ÄÁßçÊÉÖÂÜµÂ∞±ÊòØÔºåÂ¶ÇÊûúËøô‰∏™ËäÇÁÇπÔºå‰∏ç‰∏∫Á©∫Ôºå‰πü‰∏çÂú®Êâ©ÂÆπÔºåÂàôÈÄöËøásynchronizedÊù•Âä†ÈîÅÔºåËøõË°åÊ∑ªÂä†Êìç‰Ωú * ÁÑ∂ÂêéÂà§Êñ≠ÂΩìÂâçÂèñÂá∫ÁöÑËäÇÁÇπ‰ΩçÁΩÆÂ≠òÊîæÁöÑÊòØÈìæË°®ËøòÊòØÊ†ë * Â¶ÇÊûúÊòØÈìæË°®ÁöÑËØùÔºåÂàôÈÅçÂéÜÊï¥‰∏™ÈìæË°®ÔºåÁõ¥Âà∞ÂèñÂá∫Êù•ÁöÑËäÇÁÇπÁöÑkeyÊù•‰∏™Ë¶ÅÊîæÁöÑkeyËøõË°åÊØîËæÉÔºåÂ¶ÇÊûúkeyÁõ∏Á≠âÔºåÂπ∂‰∏îkeyÁöÑhashÂÄº‰πüÁõ∏Á≠âÁöÑËØùÔºå * ÂàôËØ¥ÊòéÊòØÂêå‰∏Ä‰∏™keyÔºåÂàôË¶ÜÁõñÊéâvalueÔºåÂê¶ÂàôÁöÑËØùÂàôÊ∑ªÂä†Âà∞ÈìæË°®ÁöÑÊú´Â∞æ * Â¶ÇÊûúÊòØÊ†ëÁöÑËØùÔºåÂàôË∞ÉÁî®putTreeValÊñπÊ≥ïÊääËøô‰∏™ÂÖÉÁ¥†Ê∑ªÂä†Âà∞Ê†ë‰∏≠Âéª * ÊúÄÂêéÂú®Ê∑ªÂä†ÂÆåÊàê‰πãÂêéÔºå‰ºöÂà§Êñ≠Âú®ËØ•ËäÇÁÇπÂ§ÑÂÖ±ÊúâÂ§öÂ∞ë‰∏™ËäÇÁÇπÔºàÊ≥®ÊÑèÊòØÊ∑ªÂä†ÂâçÁöÑ‰∏™Êï∞ÔºâÔºåÂ¶ÇÊûúËææÂà∞8‰∏™‰ª•‰∏ä‰∫ÜÁöÑËØùÔºå * ÂàôË∞ÉÁî®treeifyBinÊñπÊ≥ïÊù•Â∞ùËØïÂ∞ÜÂ§ÑÁöÑÈìæË°®ËΩ¨‰∏∫Ê†ëÔºåÊàñËÄÖÊâ©ÂÆπÊï∞ÁªÑ */final V putVal(K key, V value, boolean onlyIfAbsent) &#123; //K,VÈÉΩ‰∏çËÉΩ‰∏∫Á©∫ÔºåÂê¶ÂàôÁöÑËØùË∑ëÂá∫ÂºÇÂ∏∏ if (key == null || value == null) throw new NullPointerException(); //ÂèñÂæókeyÁöÑhashÂÄº int hash = spread(key.hashCode()); //Áî®Êù•ËÆ°ÁÆóÂú®Ëøô‰∏™ÁªìÁÇπÊÄªÂÖ±ÊúâÂ§öÂ∞ë‰∏™ÂÖÉÁ¥†ÔºåÁî®Êù•ÊéßÂà∂Êâ©ÂÆπÊàñËÄÖËΩ¨ÁßªÊ†ë int binCount = 0; for (Node&lt;K,V&gt;[] tab = table;;) &#123; Node&lt;K,V&gt; f; int n, i, fh; //Â¶ÇÊûúÊï∞ÁªÑ‰∏∫Á©∫ÊàñÊï∞ÁªÑÈïøÂ∫¶‰∏∫0 if (tab == null || (n = tab.length) == 0) //Á¨¨‰∏ÄÊ¨°putÁöÑÊó∂ÂÄôtableÊ≤°ÊúâÂàùÂßãÂåñÂàôÂàùÂßãÂåñtable tab = initTable(); //ÊâæËØ• hash ÂÄºÂØπÂ∫îÁöÑÊï∞ÁªÑ‰∏ãÊ†áÔºåÂæóÂà∞Á¨¨‰∏Ä‰∏™ËäÇÁÇπ f else if ((f = tabAt(tab, i = (n - 1) &amp; hash)) == null) &#123; //Â¶ÇÊûúËøô‰∏™‰ΩçÁΩÆÊ≤°ÊúâÂÖÉÁ¥†ÁöÑËØùÔºåÂàôÈÄöËøácasÁöÑÊñπÂºèÂ∞ùËØïÊ∑ªÂä†ÔºåÊ≥®ÊÑèËøô‰∏™Êó∂ÂÄôÊòØÊ≤°ÊúâÂä†ÈîÅÁöÑ //ÂàõÂª∫‰∏Ä‰∏™NodeÊ∑ªÂä†Âà∞Êï∞ÁªÑ‰∏≠Âå∫ÔºånullË°®Á§∫ÁöÑÊòØ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ‰∏∫Á©∫ if (casTabAt(tab, i, null, new Node&lt;K,V&gt;(hash, key, value, null))) break; // no lock when adding to empty bin &#125; /* * Â¶ÇÊûúÊ£ÄÊµãÂà∞Êüê‰∏™ËäÇÁÇπÁöÑhashÂÄºÊòØMOVEDÔºåÂàôË°®Á§∫Ê≠£Âú®ËøõË°åÊï∞ÁªÑÊâ©Âº†ÁöÑÊï∞ÊçÆÂ§çÂà∂Èò∂ÊÆµÔºå * ÂàôÂΩìÂâçÁ∫øÁ®ã‰πü‰ºöÂèÇ‰∏éÂéªÂ§çÂà∂ÔºåÈÄöËøáÂÖÅËÆ∏Â§öÁ∫øÁ®ãÂ§çÂà∂ÁöÑÂäüËÉΩÔºå‰æùÊ≠§Êù•ÂáèÂ∞ëÊï∞ÁªÑÁöÑÂ§çÂà∂ÊâÄÂ∏¶Êù•ÁöÑÊÄßËÉΩÊçüÂ§± */ else if ((fh = f.hash) == MOVED) //Êï∞ÊçÆËøÅÁßª tab = helpTransfer(tab, f); else &#123; /* * Â¶ÇÊûúÂú®Ëøô‰∏™‰ΩçÁΩÆÊúâÂÖÉÁ¥†ÁöÑËØùÔºåÂ∞±ÈááÁî®synchronizedÁöÑÊñπÂºèÂä†ÈîÅÔºå * Â¶ÇÊûúÊòØÈìæË°®ÁöÑËØù(hashÂ§ß‰∫é0)ÔºåÂ∞±ÂØπËøô‰∏™ÈìæË°®ÁöÑÊâÄÊúâÂÖÉÁ¥†ËøõË°åÈÅçÂéÜÔºå * Â¶ÇÊûúÊâæÂà∞‰∫ÜkeyÂíåkeyÁöÑhashÂÄºÈÉΩ‰∏ÄÊ†∑ÁöÑËäÇÁÇπÔºåÂàôÊääÂÆÉÁöÑÂÄºÊõøÊç¢Âà∞ * Â¶ÇÊûúÊ≤°ÊâæÂà∞ÁöÑËØùÔºåÂàôÊ∑ªÂä†Âú®ÈìæË°®ÁöÑÊúÄÂêéÈù¢ * Âê¶ÂàôÔºåÊòØÊ†ëÁöÑËØùÔºåÂàôË∞ÉÁî®putTreeValÊñπÊ≥ïÊ∑ªÂä†Âà∞Ê†ë‰∏≠Âéª * * Âú®Ê∑ªÂä†ÂÆå‰πãÂêéÔºå‰ºöÂØπËØ•ËäÇÁÇπ‰∏äÂÖ≥ËÅîÁöÑÁöÑÊï∞ÁõÆËøõË°åÂà§Êñ≠Ôºå * Â¶ÇÊûúÂú®8‰∏™‰ª•‰∏äÁöÑËØùÔºåÂàô‰ºöË∞ÉÁî®treeifyBinÊñπÊ≥ïÔºåÊù•Â∞ùËØïËΩ¨Âåñ‰∏∫Ê†ëÔºåÊàñËÄÖÊòØÊâ©ÂÆπ */ V oldVal = null; synchronized (f) &#123; if (tabAt(tab, i) == f) &#123;//ÂÜçÊ¨°ÂèñÂá∫Ë¶ÅÂ≠òÂÇ®ÁöÑ‰ΩçÁΩÆÁöÑÂÖÉÁ¥†ÔºåË∑üÂâçÈù¢ÂèñÂá∫Êù•ÁöÑÊØîËæÉ if (fh &gt;= 0) &#123;//ÂèñÂá∫Êù•ÁöÑÂÖÉÁ¥†ÁöÑhashÂÄºÂ§ß‰∫é0ËØ¥ÊòéÊòØÈìæË°®ÔºåÂΩìËΩ¨Êç¢‰∏∫Ê†ë‰πãÂêéÔºåhashÂÄº‰∏∫-2 //Áî®‰∫éÁ¥ØÂä†ÔºåËÆ∞ÂΩïÈìæË°®ÈïøÂ∫¶ binCount = 1; for (Node&lt;K,V&gt; e = f;; ++binCount) &#123;//ÈÅçÂéÜËøô‰∏™ÈìæË°® K ek; //Ë¶ÅÂ≠òÁöÑÂÖÉÁ¥†ÁöÑhashÔºåkeyË∑üË¶ÅÂ≠òÂÇ®ÁöÑ‰ΩçÁΩÆÁöÑËäÇÁÇπÁöÑÁõ∏ÂêåÁöÑÊó∂ÂÄôÔºåÊõøÊç¢ÊéâËØ•ËäÇÁÇπÁöÑvalueÂç≥ÂèØ if (e.hash == hash &amp;&amp; ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))) &#123; oldVal = e.val; //ÂΩì‰ΩøÁî®putIfAbsentÁöÑÊó∂ÂÄôÔºåÂè™ÊúâÂú®Ëøô‰∏™keyÊ≤°ÊúâËÆæÁΩÆÂÄºÂæóÊó∂ÂÄôÊâçËÆæÁΩÆ if (!onlyIfAbsent) e.val = value; break; &#125; Node&lt;K,V&gt; pred = e; //Â¶ÇÊûú‰∏çÊòØÂêåÊ†∑ÁöÑhashÔºåÂêåÊ†∑ÁöÑkeyÁöÑÊó∂ÂÄôÔºåÂàôÂà§Êñ≠ËØ•ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÊòØÂê¶‰∏∫Á©∫ if ((e = e.next) == null) &#123; //‰∏∫Á©∫ÁöÑËØùÊääËøô‰∏™Ë¶ÅÂä†ÂÖ•ÁöÑËäÇÁÇπËÆæÁΩÆ‰∏∫ÂΩìÂâçËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ pred.next = new Node&lt;K,V&gt;(hash, key, value, null); break; &#125; &#125; &#125; else if (f instanceof TreeBin) &#123;//Ë°®Á§∫Â∑≤ÁªèËΩ¨ÂåñÊàêÁ∫¢ÈªëÊ†ëÁ±ªÂûã‰∫Ü Node&lt;K,V&gt; p; binCount = 2; //Ë∞ÉÁî®putTreeValÊñπÊ≥ïÔºåÂ∞ÜËØ•ÂÖÉÁ¥†Ê∑ªÂä†Âà∞Ê†ë‰∏≠Âéª if ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key, value)) != null) &#123; oldVal = p.val; if (!onlyIfAbsent) p.val = value; &#125; &#125; &#125; &#125; //ËØ¥Êòé‰∏äÈù¢Âú®ÂÅöÈìæË°®Êìç‰Ωú if (binCount != 0) &#123; //Âà§Êñ≠ÊòØÂê¶Ë¶ÅÂ∞ÜÈìæË°®ËΩ¨ÊàêÁ∫¢ÈªëÊ†ëÔºå‰∏¥ÁïåÂÄºÂíåHashMap‰∏ÄÊ†∑Ôºå‰πüÊòØ8 if (binCount &gt;= TREEIFY_THRESHOLD) // Ëøô‰∏™ÊñπÊ≥ïÂíå HashMap ‰∏≠Á®çÂæÆÊúâ‰∏ÄÁÇπÁÇπ‰∏çÂêåÔºåÈÇ£Â∞±ÊòØÂÆÉ‰∏çÊòØ‰∏ÄÂÆö‰ºöËøõË°åÁ∫¢ÈªëÊ†ëËΩ¨Êç¢Ôºå // Â¶ÇÊûúÂΩìÂâçÊï∞ÁªÑÁöÑÈïøÂ∫¶Â∞è‰∫é 64ÔºåÈÇ£‰πà‰ºöÈÄâÊã©ËøõË°åÊï∞ÁªÑÊâ©ÂÆπÔºåËÄå‰∏çÊòØËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ë treeifyBin(tab, i); if (oldVal != null) return oldVal; break; &#125; &#125; &#125; addCount(1L, binCount); return null;&#125; initTable-Êï∞ÁªÑÂàùÂßãÂåñ 12345678910111213141516171819202122232425262728293031323334353637/** * ÂàùÂßãÂåñÊï∞ÁªÑtableÔºå * Â¶ÇÊûúsizeCtlÂ∞è‰∫é0ÔºåËØ¥ÊòéÂà´ÁöÑÊï∞ÁªÑÊ≠£Âú®ËøõË°åÂàùÂßãÂåñÔºåÂàôËÆ©Âá∫ÊâßË°åÊùÉ * Â¶ÇÊûúsizeCtlÂ§ß‰∫é0ÁöÑËØùÔºåÂàôÂàùÂßãÂåñ‰∏Ä‰∏™Â§ßÂ∞è‰∏∫sizeCtlÁöÑÊï∞ÁªÑ * Âê¶ÂàôÁöÑËØùÂàùÂßãÂåñ‰∏Ä‰∏™ÈªòËÆ§Â§ßÂ∞è(16)ÁöÑÊï∞ÁªÑ * ÁÑ∂ÂêéËÆæÁΩÆsizeCtlÁöÑÂÄº‰∏∫Êï∞ÁªÑÈïøÂ∫¶ÁöÑ3/4 */private final Node&lt;K,V&gt;[] initTable() &#123; Node&lt;K,V&gt;[] tab; int sc; //Á¨¨‰∏ÄÊ¨°putÁöÑÊó∂ÂÄôÔºåtableËøòÊ≤°Ë¢´ÂàùÂßãÂåñÔºåËøõÂÖ•while while ((tab = table) == null || tab.length == 0) &#123; //sizeCtlÂàùÂßãÂÄº‰∏∫0ÔºåÂΩìÂ∞è‰∫é0ÁöÑÊó∂ÂÄôË°®Á§∫Âú®Âà´ÁöÑÁ∫øÁ®ãÂú®ÂàùÂßãÂåñË°®ÊàñÊâ©ÂÆπ if ((sc = sizeCtl) &lt; 0) Thread.yield(); // lost initialization race; just spin //CAS‰∏Ä‰∏ãÔºåÂ∞ÜsizectlËÆæÁΩÆ‰∏∫-1Ôºå‰ª£Ë°®Êä¢Âà∞‰∫ÜÈîÅ else if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) &#123; try &#123; if ((tab = table) == null || tab.length == 0) &#123; //ÊåáÂÆö‰∫ÜÂ§ßÂ∞èÁöÑÊó∂ÂÄôÂ∞±ÂàõÂª∫ÊåáÂÆöÂ§ßÂ∞èÁöÑNodeÊï∞ÁªÑÔºåÂê¶ÂàôÂàõÂª∫ÊåáÂÆöÂ§ßÂ∞è(16)ÁöÑNodeÊï∞ÁªÑ int n = (sc &gt; 0) ? sc : DEFAULT_CAPACITY; //ÂàùÂßãÂåñÊï∞ÁªÑÔºåÈïøÂ∫¶‰∏∫16ÔºåÊàñÂàùÂßãÂåñÊó∂Êèê‰æõÁöÑÈïøÂ∫¶ @SuppressWarnings("unchecked") Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n]; // Â∞ÜËøô‰∏™Êï∞ÁªÑËµãÂÄºÁªô tableÔºåtable ÊòØ volatile ÁöÑ table = tab = nt; // Â¶ÇÊûú n ‰∏∫ 16 ÁöÑËØùÔºåÈÇ£‰πàËøôÈáå sc = 12ÔºåÂÖ∂ÂÆûÂ∞±ÊòØ 0.75 * n sc = n - (n &gt;&gt;&gt; 2); &#125; &#125; finally &#123; //ÂàùÂßãÂåñÂêéÔºåsizeCtlÈïøÂ∫¶‰∏∫Êï∞ÁªÑÈïøÂ∫¶ÁöÑ3/4 sizeCtl = sc; &#125; break; &#125; &#125; return tab;&#125; ‰∏ªË¶ÅÂ∞±ÊòØÂàùÂßãÂåñ‰∏Ä‰∏™ÂêàÈÄÇÂ§ßÂ∞èÁöÑÊï∞ÁªÑÔºåÁÑ∂Âêé‰ºöËÆæÁΩÆ sizeCtl„ÄÇÂàùÂßãÂåñÊñπÊ≥ï‰∏≠ÁöÑÂπ∂ÂèëÈóÆÈ¢òÊòØÈÄöËøáÂØπ sizeCtl ËøõË°å‰∏Ä‰∏™ CAS Êìç‰ΩúÊù•ÊéßÂà∂ÁöÑ„ÄÇ treeifyBin-ÈìæË°®ËΩ¨Á∫¢ÈªëÊ†ë 12345678910111213141516171819202122232425262728293031private final void treeifyBin(Node&lt;K,V&gt;[] tab, int index) &#123; Node&lt;K,V&gt; b; int n, sc; if (tab != null) &#123; // MIN_TREEIFY_CAPACITY ‰∏∫ 64 // ÊâÄ‰ª•ÔºåÂ¶ÇÊûúÊï∞ÁªÑÈïøÂ∫¶Â∞è‰∫é 64 ÁöÑÊó∂ÂÄôÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØ 32 ÊàñËÄÖ 16 ÊàñËÄÖÊõ¥Â∞èÁöÑÊó∂ÂÄôÔºå‰ºöËøõË°åÊï∞ÁªÑÊâ©ÂÆπ if ((n = tab.length) &lt; MIN_TREEIFY_CAPACITY) tryPresize(n &lt;&lt; 1);//Êï∞ÁªÑÊâ©ÂÆπ // bÊòØÂ§¥ÁªìÁÇπ else if ((b = tabAt(tab, index)) != null &amp;&amp; b.hash &gt;= 0) &#123; synchronized (b) &#123; if (tabAt(tab, index) == b) &#123; // ‰∏ãÈù¢Â∞±ÊòØÈÅçÂéÜÈìæË°®ÔºåÂª∫Á´ã‰∏ÄÈ¢óÁ∫¢ÈªëÊ†ë TreeNode&lt;K,V&gt; hd = null, tl = null;//hd Ê†ëÁöÑÂ§¥ÁªìÁÇπ for (Node&lt;K,V&gt; e = b; e != null; e = e.next) &#123; TreeNode&lt;K,V&gt; p = new TreeNode&lt;K,V&gt;(e.hash, e.key, e.val, null, null); //ÊääNodeÁªÑÊàêÁöÑÈìæË°®ÔºåËΩ¨Âåñ‰∏∫TreeNodeÁöÑÈìæË°®ÔºåÂ§¥ÁªìÁÇπ‰ªªÁÑ∂ÊîæÂú®Áõ∏ÂêåÁöÑ‰ΩçÁΩÆ if ((p.prev = tl) == null) hd = p;//ËÆæÁΩÆhead else tl.next = p; tl = p; &#125; // Â∞ÜÁ∫¢ÈªëÊ†ëËÆæÁΩÆÂà∞Êï∞ÁªÑÁõ∏Â∫î‰ΩçÁΩÆ‰∏≠ setTabAt(tab, index, new TreeBin&lt;K,V&gt;(hd)); &#125; &#125; &#125; &#125;&#125; treeifyBin ‰∏ç‰∏ÄÂÆöÂ∞±‰ºöËøõË°åÁ∫¢ÈªëÊ†ëËΩ¨Êç¢Ôºå‰πüÂèØËÉΩÊòØ‰ªÖ‰ªÖÂÅöÊï∞ÁªÑÊâ©ÂÆπ„ÄÇ tryPresize-Êâ©ÂÆπ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768private final void tryPresize(int size) &#123; // cÔºösize ÁöÑ 1.5 ÂÄçÔºåÂÜçÂä† 1ÔºåÂÜçÂæÄ‰∏äÂèñÊúÄËøëÁöÑ 2 ÁöÑ n Ê¨°Êñπ„ÄÇ // Â¶ÇÊûúÁªôÂÆöÁöÑÂ§ßÂ∞èÂ§ß‰∫éÁ≠â‰∫éÊï∞ÁªÑÂÆπÈáèÁöÑ‰∏ÄÂçäÔºåÂàôÁõ¥Êé•‰ΩøÁî®ÊúÄÂ§ßÂÆπÈáèÔºåÂê¶Âàô‰ΩøÁî®tableSizeForÁÆóÂá∫Êù• int c = (size &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ? MAXIMUM_CAPACITY : tableSizeFor(size + (size &gt;&gt;&gt; 1) + 1); int sc; while ((sc = sizeCtl) &gt;= 0) &#123; Node&lt;K,V&gt;[] tab = table; int n; /* * Â¶ÇÊûúÊï∞ÁªÑtableËøòÊ≤°ÊúâË¢´ÂàùÂßãÂåñÔºåÂàôÂàùÂßãÂåñ‰∏Ä‰∏™Â§ßÂ∞è‰∏∫sizeCtrlÂíåÂàöÂàöÁÆóÂá∫Êù•ÁöÑc‰∏≠ËæÉÂ§ßÁöÑ‰∏Ä‰∏™Â§ßÂ∞èÁöÑÊï∞ÁªÑ * ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÔºåËÆæÁΩÆsizeCtrl‰∏∫-1ÔºåÂàùÂßãÂåñÂÆåÊàê‰πãÂêéÊääsizeCtrlËÆæÁΩÆ‰∏∫Êï∞ÁªÑÈïøÂ∫¶ÁöÑ3/4 * ‰∏∫‰ªÄ‰πàË¶ÅÂú®Êâ©ÂÆπÁöÑÂú∞ÊñπÊù•ÂàùÂßãÂåñÊï∞ÁªÑÂë¢ÔºüËøôÊòØÂõ†‰∏∫Â¶ÇÊûúÁ¨¨‰∏ÄÊ¨°putÁöÑÊó∂ÂÄô‰∏çÊòØputÂçï‰∏™ÂÖÉÁ¥†Ôºå * ËÄåÊòØË∞ÉÁî®putAllÊñπÊ≥ïÁõ¥Êé•put‰∏Ä‰∏™mapÁöÑËØùÔºåÂú®putALlÊñπÊ≥ï‰∏≠Ê≤°ÊúâË∞ÉÁî®initTableÊñπÊ≥ïÂéªÂàùÂßãÂåñtableÔºå * ËÄåÊòØÁõ¥Êé•Ë∞ÉÁî®‰∫ÜtryPresizeÊñπÊ≥ïÔºåÊâÄ‰ª•ËøôÈáåÈúÄË¶ÅÂÅö‰∏Ä‰∏™ÊòØ‰∏çÊòØÈúÄË¶ÅÂàùÂßãÂåñtableÁöÑÂà§Êñ≠ */ if (tab == null || (n = tab.length) == 0) &#123; n = (sc &gt; c) ? sc : c; //ÂàùÂßãÂåñtabÁöÑÊó∂ÂÄôÔºåÊääsizeCtlËÆæ‰∏∫-1 if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) &#123; try &#123; if (table == tab) &#123; @SuppressWarnings("unchecked") Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n]; table = nt; sc = n - (n &gt;&gt;&gt; 2); &#125; &#125; finally &#123; sizeCtl = sc; &#125; &#125; &#125; /* * ‰∏ÄÁõ¥Êâ©ÂÆπÂà∞ÁöÑcÂ∞è‰∫éÁ≠â‰∫ésizeCtlÊàñËÄÖÊï∞ÁªÑÈïøÂ∫¶Â§ß‰∫éÊúÄÂ§ßÈïøÂ∫¶ÁöÑÊó∂ÂÄôÔºåÂàôÈÄÄÂá∫ * ÊâÄ‰ª•Âú®‰∏ÄÊ¨°Êâ©ÂÆπ‰πãÂêéÔºå‰∏çÊòØÂéüÊù•ÈïøÂ∫¶ÁöÑ‰∏§ÂÄçÔºåËÄåÊòØ2ÁöÑnÊ¨°ÊñπÂÄç */ else if (c &lt;= sc || n &gt;= MAXIMUM_CAPACITY) break; else if (tab == table) &#123; int rs = resizeStamp(n); /* * Â¶ÇÊûúÊ≠£Âú®Êâ©ÂÆπTableÁöÑËØùÔºåÂàôÂ∏ÆÂä©Êâ©ÂÆπ * Âê¶ÂàôÁöÑËØùÔºåÂºÄÂßãÊñ∞ÁöÑÊâ©ÂÆπ * Âú®transferÊìç‰ΩúÔºåÂ∞ÜÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÁöÑtable‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÁßªÂä®Âà∞Á¨¨‰∫å‰∏™ÂÖÉÁ¥†ÁöÑtable‰∏≠ÂéªÔºå * ËôΩÁÑ∂Ê≠§Êó∂Á¨¨‰∫å‰∏™ÂèÇÊï∞ËÆæÁΩÆÁöÑÊòØnullÔºå‰ΩÜÊòØÔºåÂú®transferÊñπÊ≥ï‰∏≠ÔºåÂΩìÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫nullÁöÑÊó∂ÂÄôÔºå * ‰ºöÂàõÂª∫‰∏Ä‰∏™‰∏§ÂÄçÂ§ßÂ∞èÁöÑtable */ if (sc &lt; 0) &#123; Node&lt;K,V&gt;[] nt; if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 || sc == rs + MAX_RESIZERS || (nt = nextTable) == null || transferIndex &lt;= 0) break; /* * transferÁöÑÁ∫øÁ®ãÊï∞Âä†‰∏Ä,ËØ•Á∫øÁ®ãÂ∞ÜËøõË°åtransferÁöÑÂ∏ÆÂøô * Âú®transferÁöÑÊó∂ÂÄôÔºåscË°®Á§∫Âú®transferÂ∑•‰ΩúÁöÑÁ∫øÁ®ãÊï∞ */ if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1)) transfer(tab, nt); &#125; /* * Ê≤°ÊúâÂú®ÂàùÂßãÂåñÊàñÊâ©ÂÆπÔºåÂàôÂºÄÂßãÊâ©ÂÆπ */ else if (U.compareAndSwapInt(this, SIZECTL, sc, (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2)) transfer(tab, null); &#125; &#125;&#125; Ëøô‰∏™ÊñπÊ≥ïÁöÑÊ†∏ÂøÉÂú®‰∫é sizeCtl ÂÄºÁöÑÊìç‰ΩúÔºåÈ¶ñÂÖàÂ∞ÜÂÖ∂ËÆæÁΩÆ‰∏∫‰∏Ä‰∏™Ë¥üÊï∞ÔºåÁÑ∂ÂêéÊâßË°å transfer(tab, null)ÔºåÂÜç‰∏ã‰∏Ä‰∏™Âæ™ÁéØÂ∞Ü sizeCtl Âä† 1ÔºåÂπ∂ÊâßË°å transfer(tab, nt)Ôºå‰πãÂêéÂèØËÉΩÊòØÁªßÁª≠ sizeCtl Âä† 1ÔºåÂπ∂ÊâßË°å transfer(tab, nt)„ÄÇÊâÄ‰ª•ÔºåÂèØËÉΩÁöÑÊìç‰ΩúÂ∞±ÊòØÊâßË°å 1 Ê¨° transfer(tab, null) +Â§öÊ¨° transfer(tab, nt)ÔºåËøôÈáåÊÄé‰πàÁªìÊùüÂæ™ÁéØÁöÑÈúÄË¶ÅÁúãÂÆå transfer Ê∫êÁ†ÅÊâçÊ∏ÖÊ•ö„ÄÇ transfer-Êï∞ÊçÆËøÅÁßª 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213/** * ÊääÊï∞ÁªÑ‰∏≠ÁöÑËäÇÁÇπÂ§çÂà∂Âà∞Êñ∞ÁöÑÊï∞ÁªÑÁöÑÁõ∏Âêå‰ΩçÁΩÆÔºåÊàñËÄÖÁßªÂä®Âà∞Êâ©Âº†ÈÉ®ÂàÜÁöÑÁõ∏Âêå‰ΩçÁΩÆ * Âú®ËøôÈáåÈ¶ñÂÖà‰ºöËÆ°ÁÆó‰∏Ä‰∏™Ê≠•ÈïøÔºåË°®Á§∫‰∏Ä‰∏™Á∫øÁ®ãÂ§ÑÁêÜÁöÑÊï∞ÁªÑÈïøÂ∫¶ÔºåÁî®Êù•ÊéßÂà∂ÂØπCPUÁöÑ‰ΩøÁî®Ôºå * ÊØè‰∏™CPUÊúÄÂ∞ëÂ§ÑÁêÜ16‰∏™ÈïøÂ∫¶ÁöÑÊï∞ÁªÑÂÖÉÁ¥†,‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûú‰∏Ä‰∏™Êï∞ÁªÑÁöÑÈïøÂ∫¶Âè™Êúâ16ÔºåÈÇ£Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ã‰ºöÂØπÂÖ∂ËøõË°åÊâ©ÂÆπÁöÑÂ§çÂà∂ÁßªÂä®Êìç‰Ωú * Êâ©ÂÆπÁöÑÊó∂ÂÄô‰ºö‰∏ÄÁõ¥ÈÅçÂéÜÔºåÁü•ÈÅìÂ§çÂà∂ÂÆåÊâÄÊúâËäÇÁÇπÔºåÊ≤°Â§ÑÁêÜ‰∏Ä‰∏™ËäÇÁÇπÁöÑÊó∂ÂÄô‰ºöÂú®ÈìæË°®ÁöÑÂ§¥ÈÉ®ËÆæÁΩÆ‰∏Ä‰∏™fwdËäÇÁÇπÔºåËøôÊ†∑ÂÖ∂‰ªñÁ∫øÁ®ãÂ∞±‰ºöË∑≥Ëøá‰ªñÔºå * Â§çÂà∂ÂêéÂú®Êñ∞Êï∞ÁªÑ‰∏≠ÁöÑÈìæË°®‰∏çÊòØÁªùÂØπÁöÑÂèçÂ∫èÁöÑ */private final void transfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt;[] nextTab) &#123; int n = tab.length, stride; // stride Âú®ÂçïÊ†∏‰∏ãÁõ¥Êé•Á≠â‰∫é nÔºåÂ§öÊ†∏Ê®°Âºè‰∏ã‰∏∫ (n&gt;&gt;&gt;3)/NCPUÔºåÊúÄÂ∞èÂÄºÊòØ 16 // stride ÂèØ‰ª•ÁêÜËß£‰∏∫‚ÄùÊ≠•Èïø‚ÄúÔºåÊúâ n ‰∏™‰ΩçÁΩÆÊòØÈúÄË¶ÅËøõË°åËøÅÁßªÁöÑÔºå // Â∞ÜËøô n ‰∏™‰ªªÂä°ÂàÜ‰∏∫Â§ö‰∏™‰ªªÂä°ÂåÖÔºåÊØè‰∏™‰ªªÂä°ÂåÖÊúâ stride ‰∏™‰ªªÂä° if ((stride = (NCPU &gt; 1) ? (n &gt;&gt;&gt; 3) / NCPU : n) &lt; MIN_TRANSFER_STRIDE) stride = MIN_TRANSFER_STRIDE; // subdivide range /* * Â¶ÇÊûúÂ§çÂà∂ÁöÑÁõÆÊ†ánextTab‰∏∫nullÁöÑËØùÔºåÂàôÂàùÂßãÂåñ‰∏Ä‰∏™table‰∏§ÂÄçÈïøÁöÑnextTab * Ê≠§Êó∂nextTableË¢´ËÆæÁΩÆÂÄº‰∫Ü(Âú®ÂàùÂßãÊÉÖÂÜµ‰∏ãÊòØ‰∏∫nullÁöÑ) * Âõ†‰∏∫Â¶ÇÊûúÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂºÄÂßã‰∫ÜË°®ÁöÑÊâ©Âº†ÁöÑÊó∂ÂÄôÔºåÂÖ∂‰ªñÁ∫øÁ®ã‰πü‰ºöËøõÊù•Â∏ÆÂøôÊâ©Âº†Ôºå * ËÄåÂè™ÊòØÁ¨¨‰∏Ä‰∏™ÂºÄÂßãÊâ©Âº†ÁöÑÁ∫øÁ®ãÈúÄË¶ÅÂàùÂßãÂåñ‰∏ãÁõÆÊ†áÊï∞ÁªÑ */ if (nextTab == null) &#123; // initiating try &#123; //ÂÆπÈáèÁøªÂÄç @SuppressWarnings("unchecked") Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n &lt;&lt; 1]; nextTab = nt; &#125; catch (Throwable ex) &#123; // try to cope with OOME sizeCtl = Integer.MAX_VALUE; return; &#125; // nextTable ÊòØ ConcurrentHashMap ‰∏≠ÁöÑÂ±ûÊÄß nextTable = nextTab; // transferIndex ‰πüÊòØ ConcurrentHashMap ÁöÑÂ±ûÊÄßÔºåÁî®‰∫éÊéßÂà∂ËøÅÁßªÁöÑ‰ΩçÁΩÆ transferIndex = n; &#125; int nextn = nextTab.length; // ForwardingNode--&gt;Ê≠£Âú®Ë¢´ËøÅÁßªÁöÑ Node // Ëøô‰∏™ÊûÑÈÄ†ÊñπÊ≥ï‰ºöÁîüÊàê‰∏Ä‰∏™NodeÔºåkey„ÄÅvalue Âíå next ÈÉΩ‰∏∫ nullÔºåÂÖ≥ÈîÆÊòØ hash ‰∏∫ MOVED // ÂêéÈù¢‰ºöÁúãÂà∞ÔºåÂéüÊï∞ÁªÑ‰∏≠‰ΩçÁΩÆ i Â§ÑÁöÑËäÇÁÇπÂÆåÊàêËøÅÁßªÂ∑•‰ΩúÂêéÔºå // Â∞±‰ºöÂ∞Ü‰ΩçÁΩÆ i Â§ÑËÆæÁΩÆ‰∏∫Ëøô‰∏™ ForwardingNodeÔºåÁî®Êù•ÂëäËØâÂÖ∂‰ªñÁ∫øÁ®ãËØ•‰ΩçÁΩÆÂ∑≤ÁªèÂ§ÑÁêÜËøá‰∫Ü // ÊâÄ‰ª•ÂÆÉÂÖ∂ÂÆûÁõ∏ÂΩì‰∫éÊòØ‰∏Ä‰∏™Ê†áÂøó„ÄÇ ForwardingNode&lt;K,V&gt; fwd = new ForwardingNode&lt;K,V&gt;(nextTab); // advance ÊåáÁöÑÊòØÂÅöÂÆå‰∫Ü‰∏Ä‰∏™‰ΩçÁΩÆÁöÑËøÅÁßªÂ∑•‰ΩúÔºåÂèØ‰ª•ÂáÜÂ§áÂÅö‰∏ã‰∏Ä‰∏™‰ΩçÁΩÆÁöÑ‰∫Ü boolean advance = true; boolean finishing = false; // to ensure sweep(Ê∏ÖÊâ´) before committing nextTab,Âú®ÂÆåÊàê‰πãÂâçÈáçÊñ∞Âú®Êâ´Êèè‰∏ÄÈÅçÊï∞ÁªÑÔºåÁúãÁúãÊúâÊ≤°ÂÆåÊàêÁöÑÊ≤° // i ÊòØ‰ΩçÁΩÆÁ¥¢ÂºïÔºåbound ÊòØËæπÁïåÔºåÊ≥®ÊÑèÊòØ‰ªéÂêéÂæÄÂâç for (int i = 0, bound = 0;;) &#123; Node&lt;K,V&gt; f; int fh; // advance ‰∏∫ true Ë°®Á§∫ÂèØ‰ª•ËøõË°å‰∏ã‰∏Ä‰∏™‰ΩçÁΩÆÁöÑËøÅÁßª‰∫Ü // ÁÆÄÂçïÁêÜËß£Ôºöi ÊåáÂêë‰∫Ü transferIndexÔºåbound ÊåáÂêë‰∫Ü transferIndex-stride while (advance) &#123; int nextIndex, nextBound; if (--i &gt;= bound || finishing) advance = false; // Â∞Ü transferIndex ÂÄºËµãÁªô nextIndex // ËøôÈáå transferIndex ‰∏ÄÊó¶Â∞è‰∫éÁ≠â‰∫é 0ÔºåËØ¥ÊòéÂéüÊï∞ÁªÑÁöÑÊâÄÊúâ‰ΩçÁΩÆÈÉΩÊúâÁõ∏Â∫îÁöÑÁ∫øÁ®ãÂéªÂ§ÑÁêÜ‰∫Ü else if ((nextIndex = transferIndex) &lt;= 0) &#123; i = -1; advance = false; &#125; // nextBound ÊòØËøôÊ¨°ËøÅÁßª‰ªªÂä°ÁöÑËæπÁïåÔºåÊ≥®ÊÑèÔºåÊòØ‰ªéÂêéÂæÄÂâç else if (U.compareAndSwapInt (this, TRANSFERINDEX, nextIndex, nextBound = (nextIndex &gt; stride ? nextIndex - stride : 0))) &#123; bound = nextBound; i = nextIndex - 1; advance = false; &#125; &#125; if (i &lt; 0 || i &gt;= n || i + n &gt;= nextn) &#123; int sc; // ÊâÄÊúâÁöÑËøÅÁßªÊìç‰ΩúÂ∑≤ÁªèÂÆåÊàê if (finishing) &#123; nextTable = null; // Â∞ÜÊñ∞ÁöÑ nextTab ËµãÂÄºÁªô table Â±ûÊÄßÔºåÂÆåÊàêËøÅÁßª table = nextTab; // ÈáçÊñ∞ËÆ°ÁÆó sizeCtlÔºön ÊòØÂéüÊï∞ÁªÑÈïøÂ∫¶ÔºåÊâÄ‰ª• sizeCtl ÂæóÂá∫ÁöÑÂÄºÂ∞ÜÊòØÊñ∞Êï∞ÁªÑÈïøÂ∫¶ÁöÑ 0.75 ÂÄç sizeCtl = (n &lt;&lt; 1) - (n &gt;&gt;&gt; 1); return; &#125; // sizeCtl Âú®ËøÅÁßªÂâç‰ºöËÆæÁΩÆ‰∏∫ (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2 // ÁÑ∂ÂêéÔºåÊØèÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂèÇ‰∏éËøÅÁßªÂ∞±‰ºöÂ∞Ü sizeCtl Âä† 1Ôºå // ËøôÈáå‰ΩøÁî® CAS Êìç‰ΩúÂØπ sizeCtl ËøõË°åÂáè 1Ôºå‰ª£Ë°®ÂÅöÂÆå‰∫ÜÂ±û‰∫éËá™Â∑±ÁöÑ‰ªªÂä° if (U.compareAndSwapInt(this, SIZECTL, sc = sizeCtl, sc - 1)) &#123; if ((sc - 2) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT) return; // Âà∞ËøôÈáåÔºåËØ¥Êòé (sc - 2) == resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFTÔºå // ‰πüÂ∞±ÊòØËØ¥ÔºåÊâÄÊúâÁöÑËøÅÁßª‰ªªÂä°ÈÉΩÂÅöÂÆå‰∫ÜÔºå‰πüÂ∞±‰ºöËøõÂÖ•Âà∞‰∏äÈù¢ÁöÑ if(finishing)&#123;&#125; ÂàÜÊîØ‰∫Ü finishing = advance = true; i = n; // recheck before commit &#125; &#125; // Â¶ÇÊûú‰ΩçÁΩÆ i Â§ÑÊòØÁ©∫ÁöÑÔºåÊ≤°Êúâ‰ªª‰ΩïËäÇÁÇπÔºåÈÇ£‰πàÊîæÂÖ•ÂàöÂàöÂàùÂßãÂåñÁöÑ ForwardingNode ‚ÄùÁ©∫ËäÇÁÇπ‚Äú else if ((f = tabAt(tab, i)) == null) advance = casTabAt(tab, i, null, fwd); // ËØ•‰ΩçÁΩÆÂ§ÑÊòØ‰∏Ä‰∏™ ForwardingNodeÔºå‰ª£Ë°®ËØ•‰ΩçÁΩÆÂ∑≤ÁªèËøÅÁßªËøá‰∫Ü else if ((fh = f.hash) == MOVED) advance = true; // already processed else &#123; // ÂØπÊï∞ÁªÑËØ•‰ΩçÁΩÆÂ§ÑÁöÑÁªìÁÇπÂä†ÈîÅÔºåÂºÄÂßãÂ§ÑÁêÜÊï∞ÁªÑËØ•‰ΩçÁΩÆÂ§ÑÁöÑËøÅÁßªÂ∑•‰Ωú synchronized (f) &#123; if (tabAt(tab, i) == f) &#123; Node&lt;K,V&gt; ln, hn; // Â§¥ÁªìÁÇπÁöÑ hash Â§ß‰∫é 0ÔºåËØ¥ÊòéÊòØÈìæË°®ÁöÑ Node ËäÇÁÇπ if (fh &gt;= 0) &#123; // ÈúÄË¶ÅÂ∞ÜÈìæË°®‰∏ÄÂàÜ‰∏∫‰∫åÔºåÊâæÂà∞ÂéüÈìæË°®‰∏≠ÁöÑ lastRunÔºå // ÁÑ∂Âêé lastRun ÂèäÂÖ∂‰πãÂêéÁöÑËäÇÁÇπÊòØ‰∏ÄËµ∑ËøõË°åËøÅÁßªÁöÑlastRun ‰πãÂâçÁöÑËäÇÁÇπÈúÄË¶ÅËøõË°åÂÖãÈöÜÔºåÁÑ∂ÂêéÂàÜÂà∞‰∏§‰∏™ÈìæË°®‰∏≠ int runBit = fh &amp; n; Node&lt;K,V&gt; lastRun = f; /* * lastRun Ë°®Á§∫ÁöÑÊòØÈúÄË¶ÅÂ§çÂà∂ÁöÑÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπ * ÊØèÂΩìÊñ∞ËäÇÁÇπÁöÑhash&amp;n -&gt; b ÂèëÁîüÂèòÂåñÁöÑÊó∂ÂÄôÔºåÂ∞±ÊäärunBitËÆæÁΩÆ‰∏∫Ëøô‰∏™ÁªìÊûúb * ËøôÊ†∑forÂæ™ÁéØ‰πãÂêéÔºårunBitÁöÑÂÄºÂ∞±ÊòØÊúÄÂêé‰∏çÂèòÁöÑhash&amp;nÁöÑÂÄº * ËÄålastRunÁöÑÂÄºÂ∞±ÊòØÊúÄÂêé‰∏ÄÊ¨°ÂØºËá¥hash&amp;n ÂèëÁîüÂèòÂåñÁöÑËäÇÁÇπ(ÂÅáËÆæ‰∏∫pËäÇÁÇπ) * ‰∏∫‰ªÄ‰πàË¶ÅËøô‰πàÂÅöÂë¢ÔºüÂõ†‰∏∫pËäÇÁÇπÂêéÈù¢ÁöÑËäÇÁÇπÁöÑhash&amp;n ÂÄºË∑üpËäÇÁÇπÊòØ‰∏ÄÊ†∑ÁöÑÔºå * ÊâÄ‰ª•Âú®Â§çÂà∂Âà∞Êñ∞ÁöÑtableÁöÑÊó∂ÂÄôÔºåÂÆÉËÇØÂÆöËøòÊòØË∑üpËäÇÁÇπÂú®Âêå‰∏Ä‰∏™‰ΩçÁΩÆ * Âú®Â§çÂà∂ÂÆåpËäÇÁÇπ‰πãÂêéÔºåpËäÇÁÇπÁöÑnextËäÇÁÇπËøòÊòØÊåáÂêëÂÆÉÂéüÊù•ÁöÑËäÇÁÇπÔºåÂ∞±‰∏çÈúÄË¶ÅËøõË°åÂ§çÂà∂‰∫ÜÔºåËá™Â∑±Â∞±Ë¢´Â∏¶ËøáÂéª‰∫Ü * Ëøô‰πüÂ∞±ÂØºËá¥‰∫Ü‰∏Ä‰∏™ÈóÆÈ¢òÂ∞±ÊòØÂ§çÂà∂ÂêéÁöÑÈìæË°®ÁöÑÈ°∫Â∫èÂπ∂‰∏ç‰∏ÄÂÆöÊòØÂéüÊù•ÁöÑÂÄíÂ∫è */ for (Node&lt;K,V&gt; p = f.next; p != null; p = p.next) &#123; int b = p.hash &amp; n; //nÁöÑÂÄº‰∏∫Êâ©Âº†ÂâçÁöÑÊï∞ÁªÑÁöÑÈïøÂ∫¶ if (b != runBit) &#123; runBit = b; lastRun = p; &#125; &#125; if (runBit == 0) &#123; ln = lastRun; hn = null; &#125; else &#123; hn = lastRun; ln = null; &#125; /* * ÊûÑÈÄ†‰∏§‰∏™ÈìæË°®ÔºåÈ°∫Â∫èÂ§ßÈÉ®ÂàÜÂíåÂéüÊù•ÊòØÂèçÁöÑ * ÂàÜÂà´ÊîæÂà∞ÂéüÊù•ÁöÑ‰ΩçÁΩÆÂíåÊñ∞Â¢ûÂä†ÁöÑÈïøÂ∫¶ÁöÑÁõ∏Âêå‰ΩçÁΩÆ(i/n+i) */ for (Node&lt;K,V&gt; p = f; p != lastRun; p = p.next) &#123; int ph = p.hash; K pk = p.key; V pv = p.val; if ((ph &amp; n) == 0) /* * ÂÅáËÆærunBitÁöÑÂÄº‰∏∫0Ôºå * ÂàôÁ¨¨‰∏ÄÊ¨°ËøõÂÖ•Ëøô‰∏™ËÆæÁΩÆÁöÑÊó∂ÂÄôÁõ∏ÂΩì‰∫éÊääÊóßÁöÑÂ∫èÂàóÁöÑÊúÄÂêé‰∏ÄÊ¨°ÂèëÁîühashÂèòÂåñÁöÑËäÇÁÇπ(ËØ•ËäÇÁÇπÂêéÈù¢ÂèØËÉΩËøòÊúâhashËÆ°ÁÆóÂêéÂêå‰∏∫0ÁöÑËäÇÁÇπ)ËÆæÁΩÆÂà∞ÊóßÁöÑtableÁöÑÁ¨¨‰∏Ä‰∏™hashËÆ°ÁÆóÂêé‰∏∫0ÁöÑËäÇÁÇπ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ * Âπ∂‰∏îÊääËá™Â∑±ËøîÂõûÔºåÁÑ∂ÂêéÂú®‰∏ãÊ¨°ËøõÊù•ÁöÑÊó∂ÂÄôÊääÂÆÉËá™Â∑±ËÆæÁΩÆ‰∏∫ÂêéÈù¢ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ */ ln = new Node&lt;K,V&gt;(ph, pk, pv, ln); else /* * ÂÅáËÆærunBitÁöÑÂÄº‰∏ç‰∏∫0Ôºå * ÂàôÁ¨¨‰∏ÄÊ¨°ËøõÂÖ•Ëøô‰∏™ËÆæÁΩÆÁöÑÊó∂ÂÄôÁõ∏ÂΩì‰∫éÊääÊóßÁöÑÂ∫èÂàóÁöÑÊúÄÂêé‰∏ÄÊ¨°ÂèëÁîühashÂèòÂåñÁöÑËäÇÁÇπ(ËØ•ËäÇÁÇπÂêéÈù¢ÂèØËÉΩËøòÊúâhashËÆ°ÁÆóÂêéÂêå‰∏ç‰∏∫0ÁöÑËäÇÁÇπ)ËÆæÁΩÆÂà∞ÊóßÁöÑtableÁöÑÁ¨¨‰∏Ä‰∏™hashËÆ°ÁÆóÂêé‰∏ç‰∏∫0ÁöÑËäÇÁÇπ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ * Âπ∂‰∏îÊääËá™Â∑±ËøîÂõûÔºåÁÑ∂ÂêéÂú®‰∏ãÊ¨°ËøõÊù•ÁöÑÊó∂ÂÄôÊääÂÆÉËá™Â∑±ËÆæÁΩÆ‰∏∫ÂêéÈù¢ËäÇÁÇπÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ */ hn = new Node&lt;K,V&gt;(ph, pk, pv, hn); &#125; // ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™ÈìæË°®ÊîæÂú®Êñ∞Êï∞ÁªÑÁöÑ‰ΩçÁΩÆ i setTabAt(nextTab, i, ln); // Âè¶‰∏Ä‰∏™ÈìæË°®ÊîæÂú®Êñ∞Êï∞ÁªÑÁöÑ‰ΩçÁΩÆ i+n setTabAt(nextTab, i + n, hn); // Â∞ÜÂéüÊï∞ÁªÑËØ•‰ΩçÁΩÆÂ§ÑËÆæÁΩÆ‰∏∫ fwdÔºå‰ª£Ë°®ËØ•‰ΩçÁΩÆÂ∑≤ÁªèÂ§ÑÁêÜÂÆåÊØïÔºå // ÂÖ∂‰ªñÁ∫øÁ®ã‰∏ÄÊó¶ÁúãÂà∞ËØ•‰ΩçÁΩÆÁöÑ hash ÂÄº‰∏∫ MOVEDÔºåÂ∞±‰∏ç‰ºöËøõË°åËøÅÁßª‰∫Ü setTabAt(tab, i, fwd); // advance ËÆæÁΩÆ‰∏∫ trueÔºå‰ª£Ë°®ËØ•‰ΩçÁΩÆÂ∑≤ÁªèËøÅÁßªÂÆåÊØï advance = true; &#125; else if (f instanceof TreeBin) &#123; // Á∫¢ÈªëÊ†ëÁöÑËøÅÁßª TreeBin&lt;K,V&gt; t = (TreeBin&lt;K,V&gt;)f; TreeNode&lt;K,V&gt; lo = null, loTail = null; TreeNode&lt;K,V&gt; hi = null, hiTail = null; int lc = 0, hc = 0; for (Node&lt;K,V&gt; e = t.first; e != null; e = e.next) &#123; int h = e.hash; TreeNode&lt;K,V&gt; p = new TreeNode&lt;K,V&gt; (h, e.key, e.val, null, null); if ((h &amp; n) == 0) &#123; if ((p.prev = loTail) == null) lo = p; else loTail.next = p; loTail = p; ++lc; &#125; else &#123; if ((p.prev = hiTail) == null) hi = p; else hiTail.next = p; hiTail = p; ++hc; &#125; &#125; // Â¶ÇÊûú‰∏ÄÂàÜ‰∏∫‰∫åÂêéÔºåËäÇÁÇπÊï∞‚â§6ÔºåÈÇ£‰πàÂ∞ÜÁ∫¢ÈªëÊ†ëËΩ¨Êç¢ÂõûÈìæË°® ln = (lc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(lo) : (hc != 0) ? new TreeBin&lt;K,V&gt;(lo) : t; hn = (hc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(hi) : (lc != 0) ? new TreeBin&lt;K,V&gt;(hi) : t; // Â∞ÜlnÊîæÁΩÆÂú®Êñ∞Êï∞ÁªÑÁöÑ‰ΩçÁΩÆi setTabAt(nextTab, i, ln); // Â∞ÜhnÊîæÁΩÆÂú®Êñ∞Êï∞ÁªÑÁöÑ‰ΩçÁΩÆi+n setTabAt(nextTab, i + n, hn); //Â∞ÜÂéüÊï∞ÁªÑËØ•‰ΩçÁΩÆÂ§ÑËÆæÁΩÆ‰∏∫ fwdÔºå‰ª£Ë°®ËØ•‰ΩçÁΩÆÂ∑≤ÁªèÂ§ÑÁêÜÂÆåÊØïÔºå //ÂÖ∂‰ªñÁ∫øÁ®ã‰∏ÄÊó¶ÁúãÂà∞ËØ•‰ΩçÁΩÆÁöÑ hash ÂÄº‰∏∫ MOVEDÔºåÂ∞±‰∏ç‰ºöËøõË°åËøÅÁßª‰∫Ü setTabAt(tab, i, fwd); // advance ËÆæÁΩÆ‰∏∫ trueÔºå‰ª£Ë°®ËØ•‰ΩçÁΩÆÂ∑≤ÁªèËøÅÁßªÂÆåÊØï advance = true; &#125; &#125; &#125; &#125; &#125;&#125; Ê≠§ÊñπÊ≥ïÊîØÊåÅÂ§öÁ∫øÁ®ãÊâßË°åÔºåÂ§ñÂõ¥Ë∞ÉÁî®Ê≠§ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºå‰ºö‰øùËØÅÁ¨¨‰∏Ä‰∏™ÂèëËµ∑Êï∞ÊçÆËøÅÁßªÁöÑÁ∫øÁ®ãÔºånextTab ÂèÇÊï∞‰∏∫ nullÔºå‰πãÂêéÂÜçË∞ÉÁî®Ê≠§ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºånextTab ‰∏ç‰ºö‰∏∫ null„ÄÇ ÂÖàÁêÜËß£‰∏ãÂπ∂ÂèëÊìç‰ΩúÁöÑÊú∫Âà∂„ÄÇÂéüÊï∞ÁªÑÈïøÂ∫¶‰∏∫ nÔºåÊâÄ‰ª•Êàë‰ª¨Êúâ n ‰∏™ËøÅÁßª‰ªªÂä°ÔºåËÆ©ÊØè‰∏™Á∫øÁ®ãÊØèÊ¨°Ë¥üË¥£‰∏Ä‰∏™Â∞è‰ªªÂä°ÊòØÊúÄÁÆÄÂçïÁöÑÔºåÊØèÂÅöÂÆå‰∏Ä‰∏™‰ªªÂä°ÂÜçÊ£ÄÊµãÊòØÂê¶ÊúâÂÖ∂‰ªñÊ≤°ÂÅöÂÆåÁöÑ‰ªªÂä°ÔºåÂ∏ÆÂä©ËøÅÁßªÂ∞±ÂèØ‰ª•‰∫ÜÔºåËÄå Doug Lea ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ strideÔºåÁÆÄÂçïÁêÜËß£Â∞±ÊòØÊ≠•ÈïøÔºåÊØè‰∏™Á∫øÁ®ãÊØèÊ¨°Ë¥üË¥£ËøÅÁßªÂÖ∂‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂ¶ÇÊØèÊ¨°ËøÅÁßª 16 ‰∏™Â∞è‰ªªÂä°„ÄÇÊâÄ‰ª•ÔºåÊàë‰ª¨Â∞±ÈúÄË¶Å‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑË∞ÉÂ∫¶ËÄÖÊù•ÂÆâÊéíÂì™‰∏™Á∫øÁ®ãÊâßË°åÂì™Âá†‰∏™‰ªªÂä°ÔºåËøô‰∏™Â∞±ÊòØÂ±ûÊÄß transferIndex ÁöÑ‰ΩúÁî®„ÄÇ Á¨¨‰∏Ä‰∏™ÂèëËµ∑Êï∞ÊçÆËøÅÁßªÁöÑÁ∫øÁ®ã‰ºöÂ∞Ü transferIndex ÊåáÂêëÂéüÊï∞ÁªÑÊúÄÂêéÁöÑ‰ΩçÁΩÆÔºåÁÑ∂Âêé‰ªéÂêéÂæÄÂâçÁöÑ stride ‰∏™‰ªªÂä°Â±û‰∫éÁ¨¨‰∏Ä‰∏™Á∫øÁ®ãÔºåÁÑ∂ÂêéÂ∞Ü transferIndex ÊåáÂêëÊñ∞ÁöÑ‰ΩçÁΩÆÔºåÂÜçÂæÄÂâçÁöÑ stride ‰∏™‰ªªÂä°Â±û‰∫éÁ¨¨‰∫å‰∏™Á∫øÁ®ãÔºå‰æùÊ≠§Á±ªÊé®„ÄÇÂΩìÁÑ∂ÔºåËøôÈáåËØ¥ÁöÑÁ¨¨‰∫å‰∏™Á∫øÁ®ã‰∏çÊòØÁúüÁöÑ‰∏ÄÂÆöÊåá‰ª£‰∫ÜÁ¨¨‰∫å‰∏™Á∫øÁ®ãÔºå‰πüÂèØ‰ª•ÊòØÂêå‰∏Ä‰∏™Á∫øÁ®ãÔºåËøô‰∏™ËØªËÄÖÂ∫îËØ•ËÉΩÁêÜËß£Âêß„ÄÇÂÖ∂ÂÆûÂ∞±ÊòØÂ∞Ü‰∏Ä‰∏™Â§ßÁöÑËøÅÁßª‰ªªÂä°ÂàÜ‰∏∫‰∫Ü‰∏Ä‰∏™‰∏™‰ªªÂä°ÂåÖ„ÄÇ putTreeVal-ÊèíÂÖ•Ê†ëÁªìÁÇπ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778final TreeNode&lt;K,V&gt; putTreeVal(int h, K k, V v) &#123; Class&lt;?&gt; kc = null; boolean searched = false; for (TreeNode&lt;K,V&gt; p = root;;) &#123; int dir, ph; K pk; if (p == null) &#123; // ÂΩìÂâçÊ°∂‰∏∫Á©∫ÔºåÂàôÁõ¥Êé•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑËäÇÁÇπ first = root = new TreeNode&lt;K,V&gt;(h, k, v, null, null); break; &#125; else if ((ph = p.hash) &gt; h) // hashÂÄºÂ§ß‰∫éÂΩìÂâçkeyÁöÑÔºåÂú®Â∑¶Â≠êÊ†ë dir = -1; else if (ph &lt; h) // hashÂÄºÂ∞è‰∫éÂΩìÂâçkeyÁöÑÔºåÂú®Âè≥Â≠êÊ†ë dir = 1; else if ((pk = p.key) == k || (pk != null &amp;&amp; k.equals(pk))) // Á≠â‰∫éÔºåÂàôÊØîËæÉkeyÊòØÂê¶Áõ∏Á≠â return p; else if ((kc == null &amp;&amp; (kc = comparableClassFor(k)) == null) || (dir = compareComparables(kc, k, pk)) == 0) &#123; // Â¶ÇÊûúhashÂÄºÁõ∏Á≠âÔºåÈÇ£‰πàÂ∞±ÊØîËæÉ‰∏ãÊòØÂê¶ÊòØStringÊàñËÄÖÂÆûÁé∞‰∫ÜComparableÊé•Âè£ // Â¶ÇÊûúÁ≠âÂá∫Áé∞‰∫åÊ¨°Á¢∞ÊíûÔºåÂàôÂ∑¶Âè≥Â≠êÊ†ëÈÉΩÊêúÁ¥¢ if (!searched) &#123; TreeNode&lt;K,V&gt; q, ch; searched = true; // ÊâæÂà∞ÂØπÂ∫îÁöÑËäÇÁÇπ if (((ch = p.left) != null &amp;&amp; (q = ch.findTreeNode(h, k, kc)) != null) || ((ch = p.right) != null &amp;&amp; (q = ch.findTreeNode(h, k, kc)) != null)) // ÊâæÂà∞Áõ¥Êé•ËøîÂõûÂç≥ÂèØ return q; &#125; // ÂÅáÂ¶ÇÊ≤°ÊúâÊâæÂà∞ÔºåÂàôÊ†πÊçÆÁ±ªÂêç„ÄÅSystem.identityHashCodeÊØîËæÉÊù•Á°ÆÂÆöÂà∞Â∫ïÊîæÂú®Â∑¶Âè≥Âì™Ëæπ dir = tieBreakOrder(k, pk); &#125; TreeNode&lt;K,V&gt; xp = p; // Ê†πÊçÆÊØîËæÉÁöÑÂ§ßÂ∞èdirÊù•Á°ÆÂÆöÊèíÂÖ•Â∑¶Â≠êÊ†ëËøòÊòØÂè≥Â≠êÊ†ë if ((p = (dir &lt;= 0) ? p.left : p.right) == null) &#123; TreeNode&lt;K,V&gt; x, f = first; first = x = new TreeNode&lt;K,V&gt;(h, k, v, f, xp); if (f != null) f.prev = x; if (dir &lt;= 0) // &lt;=0 Â∑¶Â≠êÊ†ë xp.left = x; else // &gt;0 Âè≥Â≠êÊ†ë xp.right = x; if (!xp.red) x.red = true; else &#123; // Âä†ÈîÅÔºåË∞ÉÊï¥Âπ≥Ë°° lockRoot(); try &#123; root = balanceInsertion(root, x); &#125; finally &#123; unlockRoot(); &#125; &#125; break; &#125; &#125; assert checkInvariants(root); return null;&#125;// Â§öÊ¨°ÂÜ≤Á™ÅÁ¢∞Êíû‰πãÂêéÔºåÂ∞±Áî®Ê≠§Êù•ÂÜ≥ÂÆöË∞ÅÂ§ßË∞ÅÂ∞èÔºå‰ª•Âå∫ÂàÜÂú®Â∑¶ËøòÊòØÂú®Âè≥Â≠êÊ†ë‰∏ästatic int tieBreakOrder(Object a, Object b) &#123; int d; if (a == null || b == null || (d = a.getClass().getName(). compareTo(b.getClass().getName())) == 0) d = (System.identityHashCode(a) &lt;= System.identityHashCode(b) ? -1 : 1); return d;&#125; getÊìç‰Ωú 123456789101112131415161718192021222324public V get(Object key) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; int n, eh; K ek; int h = spread(key.hashCode()); if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (e = tabAt(tab, (n - 1) &amp; h)) != null) &#123; // Âà§Êñ≠Â§¥ÁªìÁÇπÊòØÂê¶Â∞±ÊòØÊàë‰ª¨ÈúÄË¶ÅÁöÑËäÇÁÇπ if ((eh = e.hash) == h) &#123; if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek))) return e.val; &#125; // Â¶ÇÊûúÂ§¥ÁªìÁÇπÁöÑ hash Â∞è‰∫é 0ÔºåËØ¥Êòé Ê≠£Âú®Êâ©ÂÆπÔºåÊàñËÄÖËØ•‰ΩçÁΩÆÊòØÁ∫¢ÈªëÊ†ë else if (eh &lt; 0) // ÂèÇËÄÉ ForwardingNode.find(int h, Object k) Âíå TreeBin.find(int h, Object k) return (p = e.find(h, key)) != null ? p.val : null; // ÈÅçÂéÜÈìæË°® while ((e = e.next) != null) &#123; if (e.hash == h &amp;&amp; ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))) return e.val; &#125; &#125; return null;&#125; ËÆ°ÁÆó hash ÂÄº; Ê†πÊçÆ hash ÂÄºÊâæÂà∞Êï∞ÁªÑÂØπÂ∫î‰ΩçÁΩÆ: (n - 1) &amp; h; Ê†πÊçÆËØ•‰ΩçÁΩÆÂ§ÑÁªìÁÇπÊÄßË¥®ËøõË°åÁõ∏Â∫îÊü•Êâæ Â¶ÇÊûúËØ•‰ΩçÁΩÆ‰∏∫ nullÔºåÈÇ£‰πàÁõ¥Êé•ËøîÂõû null Â∞±ÂèØ‰ª•‰∫Ü; Â¶ÇÊûúËØ•‰ΩçÁΩÆÂ§ÑÁöÑËäÇÁÇπÂàöÂ•ΩÂ∞±ÊòØÊàë‰ª¨ÈúÄË¶ÅÁöÑÔºåËøîÂõûËØ•ËäÇÁÇπÁöÑÂÄºÂç≥ÂèØ; Â¶ÇÊûúËØ•‰ΩçÁΩÆËäÇÁÇπÁöÑ hash ÂÄºÂ∞è‰∫é 0ÔºåËØ¥ÊòéÊ≠£Âú®Êâ©ÂÆπÔºåÊàñËÄÖÊòØÁ∫¢ÈªëÊ†ë; Â¶ÇÊûú‰ª•‰∏ä 3 Êù°ÈÉΩ‰∏çÊª°Ë∂≥ÔºåÈÇ£Â∞±ÊòØÈìæË°®ÔºåËøõË°åÈÅçÂéÜÊØîÂØπÂç≥ÂèØ;]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux-awkÁî®Ê≥ï]]></title>
    <url>%2Fposts%2Fed2e0218.html</url>
    <content type="text"><![CDATA[Â∑•‰ΩúÂéüÁêÜ ËØªËæìÂÖ•Êñá‰ª∂‰πãÂâçÊâßË°åÁöÑ‰ª£Á†ÅÊÆµÔºàÁî±BEGINÂÖ≥ÈîÆÂ≠óÊ†áËØÜÔºâ„ÄÇ ‰∏ªÂæ™ÁéØÊâßË°åËæìÂÖ•Êñá‰ª∂ÁöÑ‰ª£Á†ÅÊÆµ„ÄÇ ËØªËæìÂÖ•Êñá‰ª∂‰πãÂêéÁöÑ‰ª£Á†ÅÊÆµÔºàÁî±ENDÂÖ≥ÈîÆÂ≠óÊ†áËØÜÔºâ„ÄÇ ÂëΩ‰ª§ÁªìÊûÑ 1awk &apos;BEGIN&#123; commands &#125; pattern&#123; commands &#125; END&#123; commands &#125;&apos; Â∑•‰ΩúÊµÅÁ®ã 1„ÄÅÈÄöËøáÂÖ≥ÈîÆÂ≠ó BEGIN ÊâßË°å BEGIN ÂùóÁöÑÂÜÖÂÆπÔºåÂç≥ BEGIN ÂêéËä±Êã¨Âè∑ {} ÁöÑÂÜÖÂÆπ„ÄÇ2„ÄÅÂÆåÊàê BEGIN ÂùóÁöÑÊâßË°åÔºåÂºÄÂßãÊâßË°åbodyÂùó„ÄÇ3„ÄÅËØªÂÖ•Êúâ \n Êç¢Ë°åÁ¨¶ÂàÜÂâ≤ÁöÑËÆ∞ÂΩï„ÄÇ4„ÄÅÂ∞ÜËÆ∞ÂΩïÊåâÊåáÂÆöÁöÑÂüüÂàÜÈöîÁ¨¶ÂàíÂàÜÂüüÔºåÂ°´ÂÖÖÂüüÔºå$0 ÂàôË°®Á§∫ÊâÄÊúâÂüü(Âç≥‰∏ÄË°åÂÜÖÂÆπ)Ôºå$1 Ë°®Á§∫Á¨¨‰∏Ä‰∏™ÂüüÔºå$n Ë°®Á§∫Á¨¨ n ‰∏™Âüü„ÄÇ5„ÄÅ‰æùÊ¨°ÊâßË°åÂêÑ BODY ÂùóÔºåpattern ÈÉ®ÂàÜÂåπÈÖçËØ•Ë°åÂÜÖÂÆπÊàêÂäüÂêéÔºåÊâç‰ºöÊâßË°å awk-commands ÁöÑÂÜÖÂÆπ„ÄÇ6„ÄÅÂæ™ÁéØËØªÂèñÂπ∂ÊâßË°åÂêÑË°åÁõ¥Âà∞Êñá‰ª∂ÁªìÊùüÔºåÂÆåÊàêbodyÂùóÊâßË°å„ÄÇ7„ÄÅÂºÄÂßã END ÂùóÊâßË°åÔºåEND ÂùóÂèØ‰ª•ËæìÂá∫ÊúÄÁªàÁªìÊûú„ÄÇ ÂºÄÂßãÂùóÔºàBEGINÔºâ ÂºÄÂßãÂùóÁöÑËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 1BEGIN &#123;awk-commands&#125; ÂºÄÂßãÂùóÂ∞±ÊòØÂú®Á®ãÂ∫èÂêØÂä®ÁöÑÊó∂ÂÄôÊâßË°åÁöÑ‰ª£Á†ÅÈÉ®ÂàÜÔºåÂπ∂‰∏îÂÆÉÂú®Êï¥‰∏™ËøáÁ®ã‰∏≠Âè™ÊâßË°å‰∏ÄÊ¨°„ÄÇ ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂèØ‰ª•Âú®ÂºÄÂßãÂùó‰∏≠ÂàùÂßãÂåñ‰∏Ä‰∫õÂèòÈáè„ÄÇ BEGIN ÊòØ AWK ÁöÑÂÖ≥ÈîÆÂ≠óÔºåÂõ†Ê≠§ÂÆÉÂøÖÈ°ªÊòØÂ§ßÂÜôÁöÑ„ÄÇ Ê≥®ÊÑèÔºöÂºÄÂßãÂùóÈÉ®ÂàÜÊòØÂèØÈÄâÁöÑÔºå‰Ω†ÁöÑÁ®ãÂ∫èÂèØ‰ª•Ê≤°ÊúâÂºÄÂßãÂùóÈÉ®ÂàÜ„ÄÇ ‰∏ª‰ΩìÂùóÔºàBODYÔºâ ‰∏ª‰ΩìÈÉ®ÂàÜÁöÑËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 1/pattern/ &#123;awk-commands&#125; ÂØπ‰∫éÊØè‰∏Ä‰∏™ËæìÂÖ•ÁöÑË°åÈÉΩ‰ºöÊâßË°å‰∏ÄÊ¨°‰∏ª‰ΩìÈÉ®ÂàÜÁöÑÂëΩ‰ª§„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂØπ‰∫éËæìÂÖ•ÁöÑÊØè‰∏ÄË°åÔºåAWK ÈÉΩ‰ºöÊâßË°åÂëΩ‰ª§„ÄÇ‰ΩÜÊòØÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÂÖ∂ÈôêÂÆöÂú®ÊåáÂÆöÁöÑÊ®°Âºè‰∏≠„ÄÇ Ê≥®ÊÑèÔºöÂú®‰∏ª‰ΩìÂùóÈÉ®ÂàÜÊ≤°ÊúâÂÖ≥ÈîÆÂ≠óÂ≠òÂú®„ÄÇ ÁªìÊùüÂùóÔºàENDÔºâ ÁªìÊùüÂùóÁöÑËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 1END &#123;awk-commands&#125; ÁªìÊùüÂùóÊòØÂú®Á®ãÂ∫èÁªìÊùüÊó∂ÊâßË°åÁöÑ‰ª£Á†Å„ÄÇ END ‰πüÊòØ AWK ÁöÑÂÖ≥ÈîÆÂ≠óÔºåÂÆÉ‰πüÂøÖÈ°ªÂ§ßÂÜô„ÄÇ ‰∏éÂºÄÂßãÂùóÁõ∏‰ººÔºåÁªìÊùüÂùó‰πüÊòØÂèØÈÄâÁöÑ„ÄÇ ÂëΩ‰ª§ÂΩ¢Âºè 1awk [-F|-f|-v] ‚ÄòBEGIN&#123;&#125; //&#123;command1; command2&#125; END&#123;&#125;‚Äô file [-F|-f|-v] Â§ßÂèÇÊï∞Ôºå-FÊåáÂÆöÂàÜÈöîÁ¨¶Ôºå-fË∞ÉÁî®ËÑöÊú¨Ôºå-vÂÆö‰πâÂèòÈáè var=value ' ' ÂºïÁî®‰ª£Á†ÅÂùó BEGIN ÂàùÂßãÂåñ‰ª£Á†ÅÂùóÔºåÂú®ÂØπÊØè‰∏ÄË°åËøõË°åÂ§ÑÁêÜ‰πãÂâçÔºåÂàùÂßãÂåñ‰ª£Á†ÅÔºå‰∏ªË¶ÅÊòØÂºïÁî®ÂÖ®Â±ÄÂèòÈáèÔºåËÆæÁΩÆFSÂàÜÈöîÁ¨¶ // ÂåπÈÖç‰ª£Á†ÅÂùóÔºåÂèØ‰ª•ÊòØÂ≠óÁ¨¶‰∏≤ÊàñÊ≠£ÂàôË°®ËææÂºè {} ÂëΩ‰ª§‰ª£Á†ÅÂùóÔºåÂåÖÂê´‰∏ÄÊù°ÊàñÂ§öÊù°ÂëΩ‰ª§ Ôºõ Â§öÊù°ÂëΩ‰ª§‰ΩøÁî®ÂàÜÂè∑ÂàÜÈöî END ÁªìÂ∞æ‰ª£Á†ÅÂùóÔºåÂú®ÂØπÊØè‰∏ÄË°åËøõË°åÂ§ÑÁêÜ‰πãÂêéÂÜçÊâßË°åÁöÑ‰ª£Á†ÅÂùóÔºå‰∏ªË¶ÅÊòØËøõË°åÊúÄÁªàËÆ°ÁÆóÊàñËæìÂá∫ÁªìÂ∞æÊëòË¶Å‰ø°ÊÅØ ÁâπÊÆäË¶ÅÁÇπÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243$0 Ë°®Á§∫Êï¥‰∏™ÂΩìÂâçË°å$1 ÊØèË°åÁ¨¨‰∏Ä‰∏™Â≠óÊÆµNF Â≠óÊÆµÊï∞ÈáèÂèòÈáèNR ÊØèË°åÁöÑËÆ∞ÂΩïÂè∑ÔºåÂ§öÊñá‰ª∂ËÆ∞ÂΩïÈÄíÂ¢ûFNR ‰∏éNRÁ±ª‰ººÔºå‰∏çËøáÂ§öÊñá‰ª∂ËÆ∞ÂΩï‰∏çÈÄíÂ¢ûÔºåÊØè‰∏™Êñá‰ª∂ÈÉΩ‰ªé1ÂºÄÂßã\t Âà∂Ë°®Á¨¶\n Êç¢Ë°åÁ¨¶FS BEGINÊó∂ÂÆö‰πâÂàÜÈöîÁ¨¶RS ËæìÂÖ•ÁöÑËÆ∞ÂΩïÂàÜÈöîÁ¨¶Ôºå ÈªòËÆ§‰∏∫Êç¢Ë°åÁ¨¶(Âç≥ÊñáÊú¨ÊòØÊåâ‰∏ÄË°å‰∏ÄË°åËæìÂÖ•)~ ÂåπÈÖçÔºå‰∏é==Áõ∏ÊØî‰∏çÊòØÁ≤æÁ°ÆÊØîËæÉ!~ ‰∏çÂåπÈÖçÔºå‰∏çÁ≤æÁ°ÆÊØîËæÉ== Á≠â‰∫éÔºåÂøÖÈ°ªÂÖ®ÈÉ®Áõ∏Á≠âÔºåÁ≤æÁ°ÆÊØîËæÉ!= ‰∏çÁ≠â‰∫éÔºåÁ≤æÁ°ÆÊØîËæÉ&amp;&amp; ÈÄªËæë‰∏é|| ÈÄªËæëÊàñ+ ÂåπÈÖçÊó∂Ë°®Á§∫1‰∏™Êàñ1‰∏™‰ª•‰∏ä/[0-9][0-9]+/ ‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÊï∞Â≠ó/[0-9][0-9]*/ ‰∏Ä‰∏™Êàñ‰∏Ä‰∏™‰ª•‰∏äÊï∞Â≠óFILENAME Êñá‰ª∂ÂêçOFS ËæìÂá∫Â≠óÊÆµÂàÜÈöîÁ¨¶Ôºå ÈªòËÆ§‰πüÊòØÁ©∫Ê†ºÔºåÂèØ‰ª•Êîπ‰∏∫Âà∂Ë°®Á¨¶Á≠âORS ËæìÂá∫ÁöÑËÆ∞ÂΩïÂàÜÈöîÁ¨¶ÔºåÈªòËÆ§‰∏∫Êç¢Ë°åÁ¨¶,Âç≥Â§ÑÁêÜÁªìÊûú‰πüÊòØ‰∏ÄË°å‰∏ÄË°åËæìÂá∫Âà∞Â±èÂπï-F&apos;[:#/]&apos; ÂÆö‰πâ‰∏â‰∏™ÂàÜÈöîÁ¨¶ ÊµãËØïÂëΩ‰ª§Ôºö 1awk &apos;BEGIN&#123;FS=&quot;&quot;&#125;&#123;for(i=1;i&lt;=NF;i++) &#123;if (i==NF)&#123;print $i&#125;else &#123;printf $i&#125;;system(&quot;sleep 0.03&quot;)&#125;&#125;&apos; /etc/fstab awkÊòæÁ§∫Êñá‰ª∂‰∏≠ÁöÑÂÜÖÂÆπ &lt;div class=&quot;note info no-icon&quot;&gt;&lt;p&gt;awkÊòæÁ§∫passwd‰∏≠ÁöÑÂÜÖÂÆπÔºåÂπ∂‰∏îËÆæÁΩÆÂè™ÊòæÁ§∫ÂâçÈù¢5Êù°‰ø°ÊÅØ„ÄÇ&lt;/p&gt;&lt;/div&gt; awkÂ∞Üpasswd‰∏≠ÁöÑÂÜÖÂÆπ‰ª•ÂÜíÂè∑‰∏∫ÂàÜÈöîÔºåÂπ∂ÂèñÂá∫Á¨¨1Ôºå3Ôºå6‰ΩçÁöÑÊï∞ÊçÆ awkÂ∞Üpasswd‰∏≠ÁöÑÂÜÖÂÆπ‰ª•ÂÜíÂè∑‰∏∫ÂàÜÈöîÔºåÂπ∂ÂèñÂá∫Á¨¨1Ôºå3Ôºå6‰ΩçÁöÑÊï∞ÊçÆÔºåÂπ∂Áî®ÈááÁî®tabÈîÆ‰Ωú‰∏∫ÂàÜÈöîÁ¨¶ awk‰ª•ÂÜíÂè∑‰∏∫ÂàÜÈöîÁ¨¶ÔºåÊòæÁ§∫‰∏ÄË°å‰∏≠ÊúâÂ§öÂ∞ëÂ≠óÊÆµ awkÂ∞ÜÊØè‰∏ÄË°åÊúÄÂêéÁöÑ‰∏Ä‰∏™Â≠óÊÆµÊòæÁ§∫Âá∫Êù• awkÂú®ÊØè‰∏ÄË°åÂâçÈù¢ËæìÂá∫Ë°åÂè∑ awkÊòæÁ§∫Á¨¨Âá†Ë°åÁöÑÊï∞ÊçÆ ÁªüËÆ°Êó•ÂøóÊñá‰ª∂‰∏≠ÊØèÂ∞èÊó∂ÁöÑËØ∑Ê±ÇÊ¨°Êï∞ 1awk -F: &apos;&#123;a[$2]++&#125;END&#123;for(i in a)&#123;split(i,t);print i&quot; Ëá≥&quot;,t[1]&quot;:&quot;t[2]+59,&quot; ËÆøÈóÆ &quot;a[i] &quot; Ê¨°&quot; | &quot;sort -t: -k1n -k2n&quot;&#125;&#125;&apos; xxx.xxxx.com_access.log-20190512 ÁªüËÆ°Êó•ÂøóÊñá‰ª∂‰∏≠ÊØèÂ∞èÊó∂ÊåáÂÆöËØ∑Ê±ÇÂºÄÂ§¥ÁöÑËØ∑Ê±ÇÊ¨°Êï∞ 1grep &quot;2019-05-13T23&quot; xxxx.xxxx.com_access.log-20190512|grep &quot;/pppppp&quot;|wc -l Êü•javaËøõÁ®ãID 1ps -ef|grep java |grep -v java |awk &apos;&#123;print $2&#125;&apos; Êù°‰ª∂ËØ≠Âè• IFËØ≠Âè• IF Êù°‰ª∂ËØ≠Âè•ËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 12if (condition) action ‰πüÂèØ‰ª•‰ΩøÁî®Ëä±Êã¨Âè∑Êù•ÊâßË°å‰∏ÄÁªÑÊìç‰ΩúÔºö 12345678if (condition)&#123; action-1 action-1 . . action-n&#125; ‰ª•‰∏ãÂÆû‰æãÁî®Êù•Âà§Êñ≠Êï∞Â≠óÊòØÂ•áÊï∞ËøòÊòØÂÅ∂Êï∞Ôºö 1awk &apos;BEGIN &#123;num = 10; if (num % 2 == 0) printf &quot;%d ÊòØÂÅ∂Êï∞\n&quot;, num &#125;&apos; IF - ELSE ËØ≠Âè• IF - ELSE Êù°‰ª∂ËØ≠Âè•ËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 1234if (condition) action-1else action-2 Âú®Êù°‰ª∂ËØ≠Âè• condition ‰∏∫ true Êó∂Âè™ÈúÄ action-1ÔºåÂê¶ÂàôÊâßË°å action-2„ÄÇ 12345awk &apos;BEGIN &#123; num = 11; if (num % 2 == 0) printf &quot;%d ÊòØÂÅ∂Êï∞\n&quot;, num; else printf &quot;%d ÊòØÂ•áÊï∞\n&quot;, num &#125;&apos; IF - ELSE - IF ÂèØ‰ª•ÂàõÂª∫Â§ö‰∏™ IF - ELSE Ê†ºÂºèÁöÑÂà§Êñ≠ËØ≠Âè•Êù•ÂÆûÁé∞Â§ö‰∏™Êù°‰ª∂ÁöÑÂà§Êñ≠Ôºö 123456789awk &apos;BEGIN &#123;a=30;if (a==10) print &quot;a = 10&quot;;else if (a == 20) print &quot;a = 20&quot;;else if (a == 30) print &quot;a = 30&quot;;&#125;&apos; Âæ™ÁéØËØ≠Âè• ForÂæ™ÁéØ For Âæ™ÁéØÁöÑËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö 12for (initialisation; condition; increment/decrement) action for ËØ≠Âè•È¶ñÂÖàÊâßË°åÂàùÂßãÂåñÂä®‰Ωú( initialisation )ÔºåÁÑ∂ÂêéÂÜçÊ£ÄÊü•Êù°‰ª∂( condition )„ÄÇ Â¶ÇÊûúÊù°‰ª∂‰∏∫ÁúüÔºåÂàôÊâßË°åÂä®‰Ωú( action )ÔºåÁÑ∂ÂêéÊâßË°åÈÄíÂ¢û( increment )ÊàñËÄÖÈÄíÂáè( decrement )Êìç‰Ωú„ÄÇ Âè™Ë¶ÅÊù°‰ª∂‰∏∫ true Âæ™ÁéØÂ∞±‰ºö‰∏ÄÁõ¥ÊâßË°å„ÄÇÊØèÊ¨°Âæ™ÁéØÁªìÊùüÈÉΩ‰ºöËøõÊù°‰ª∂Ê£ÄÊü•ÔºåËã•Êù°‰ª∂‰∏∫ false ÂàôÁªìÊùüÂæ™ÁéØ„ÄÇ ‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰ΩøÁî® For Âæ™ÁéØËæìÂá∫Êï∞Â≠ó 1 Ëá≥ 5Ôºö 1awk &apos;BEGIN &#123; for (i = 1; i &lt;= 5; ++i) print i &#125;&apos; WhileÂæ™ÁéØ While Âæ™ÁéØÁöÑËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö 12while (condition) action While Âæ™ÁéØÈ¶ñÂÖàÊ£ÄÊü•Êù°‰ª∂ condition ÊòØÂê¶‰∏∫ true ÔºåËã•Êù°‰ª∂‰∏∫ true ÂàôÊâßË°åÂä®‰Ωú action„ÄÇÊ≠§ËøáÁ®ã‰∏ÄÁõ¥ÈáçÂ§çÁõ¥Âà∞Êù°‰ª∂ condition ‰∏∫ flase ÊâçÂÅúÊ≠¢„ÄÇ ‰∏ãÈù¢ÊòØ‰ΩøÁî® While Âæ™ÁéØËæìÂá∫Êï∞Â≠ó 1 Âà∞ 5 ÁöÑ‰æãÂ≠êÔºö 1awk &apos;BEGIN &#123;i = 1; while (i &lt; 6) &#123; print i; ++i &#125; &#125;&apos; Break ÁªàÊ≠¢Âæ™ÁéØ Âú®‰∏ãÈù¢ÁöÑÁ§∫‰æãÂ≠ê‰∏≠ÔºåÂΩìËÆ°ÁÆóÁöÑÂíåÂ§ß‰∫é 50 ÁöÑÊó∂ÂÄô‰ΩøÁî® break ÁªìÊùüÂæ™ÁéØÔºö 12345awk &apos;BEGIN &#123; sum = 0; for (i = 0; i &lt; 20; ++i) &#123; sum += i; if (sum &gt; 50) break; else print &quot;Sum =&quot;, sum &#125; &#125;&apos; Continue ÁªìÊùüÊú¨Ê¨°Âæ™ÁéØËøõÂÖ•‰∏ãÊ¨°Âæ™ÁéØ Continue ËØ≠Âè•Áî®‰∫éÂú®Âæ™ÁéØ‰ΩìÂÜÖÈÉ®ÁªìÊùüÊú¨Ê¨°Âæ™ÁéØÔºå‰ªéËÄåÁõ¥Êé•ËøõÂÖ•‰∏ã‰∏ÄÊ¨°Âæ™ÁéØËø≠‰ª£„ÄÇ ‰∏ãÈù¢ÁöÑ‰æãÂ≠êËæìÂá∫ 1 Âà∞ 20 ‰πãÈó¥ÁöÑÂÅ∂Êï∞Ôºö 1awk &apos;BEGIN &#123;for (i = 1; i &lt;= 20; ++i) &#123;if (i % 2 == 0) print i ; else continue&#125; &#125;&apos; Exit ÁªìÊùüÁ®ãÂ∫è ËØ•ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™Êï¥Êï∞‰Ωú‰∏∫ÂèÇÊï∞Ë°®Á§∫ AWK ËøõÁ®ãÁªìÊùüÁä∂ÊÄÅ„ÄÇ Â¶ÇÊûúÊ≤°ÊúâÊèê‰æõËØ•ÂèÇÊï∞ÔºåÂÖ∂ÈªòËÆ§Áä∂ÊÄÅ‰∏∫ 0„ÄÇ ‰∏ãÈù¢‰æãÂ≠ê‰∏≠ÂΩìÂíåÂ§ß‰∫é 50 Êó∂ÁªìÊùü AWK Á®ãÂ∫è„ÄÇ 12345awk &apos;BEGIN &#123; sum = 0; for (i = 0; i &lt; 20; ++i) &#123; sum += i; if (sum &gt; 50) exit(10); else print &quot;Sum =&quot;, sum &#125; &#125;&apos;]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-Â§ñËßÇÊ®°Âºè]]></title>
    <url>%2Fposts%2F6f592ef9.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ Â§ñËßÇÊ®°ÂºèÔºåÂèàÁß∞‰∏∫Èó®Èù¢Ê®°ÂºèÔºåÊòØ‰∏ÄÁßç‰ΩøÁî®È¢ëÁéáÈùûÂ∏∏È´òÁöÑÁªìÊûÑÂûãËÆæËÆ°Ê®°ÂºèÔºåÊòØËø™Á±≥ÁâπÊ≥ïÂàôÁöÑ‰∏ÄÁßçÂÖ∑‰ΩìÂÆûÁé∞ÔºåÂÆÉÈÄöËøáÂºïÂÖ•‰∏Ä‰∏™Â§ñËßÇËßíËâ≤Êù•ÁÆÄÂåñÂÆ¢Êà∑Á´Ø‰∏éÂ≠êÁ≥ªÁªü‰πãÈó¥ÁöÑ‰∫§‰∫íÔºå‰∏∫Â§çÊùÇÁöÑÂ≠êÁ≥ªÁªüË∞ÉÁî®Êèê‰æõ‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂÖ•Âè£ÔºåÈôç‰ΩéÂ≠êÁ≥ªÁªü‰∏éÂÆ¢Êà∑Á´ØÁöÑËÄ¶ÂêàÂ∫¶Ôºå‰∏îÂÆ¢Êà∑Á´ØË∞ÉÁî®ÈùûÂ∏∏Êñπ‰æø„ÄÇÂ¶Ç‰∏ãÂõæÔºö ‰∏æ‰∏™‰æãÂ≠êÔºöÂ¶ÇÁΩëÁ´ôÂØºËà™ ‰∏ªË¶Å‰ΩúÁî® ÂÆûÁé∞ÂÆ¢Êà∑Á±ª‰∏éÂ≠êÁ≥ªÁªüÁ±ªÁöÑÊùæËÄ¶ÂêàÔºõ Èôç‰ΩéÂéüÊúâÁ≥ªÁªüÁöÑÂ§çÊùÇÂ∫¶Ôºõ ÊèêÈ´ò‰∫ÜÂÆ¢Êà∑Á´Ø‰ΩøÁî®ÁöÑ‰æøÊç∑ÊÄßÔºå‰ΩøÂæóÂÆ¢Êà∑Á´ØÊó†È°ªÂÖ≥ÂøÉÂ≠êÁ≥ªÁªüÁöÑÂ∑•‰ΩúÁªÜËäÇÔºåÈÄöËøáÂ§ñËßÇËßíËâ≤Âç≥ÂèØË∞ÉÁî®Áõ∏ÂÖ≥ÂäüËÉΩ„ÄÇ UMLÁ±ªÂõæ ËßíËâ≤ Â§ñËßÇËßíËâ≤ÔºàFacadeÔºâÔºö‰πüÁß∞ Èó®Èù¢ËßíËâ≤ÔºåÁ≥ªÁªüÂØπÂ§ñÁöÑÁªü‰∏ÄÊé•Âè£Ôºõ Â≠êÁ≥ªÁªüËßíËâ≤ÔºàSubSystemÔºâÔºöÂèØ‰ª•ÂêåÊó∂Êúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ SubSystem„ÄÇÊØè‰∏™ SubSytem ÈÉΩ‰∏çÊòØ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÁ±ªÔºåËÄåÊòØ‰∏Ä‰∏™Á±ªÁöÑÈõÜÂêà„ÄÇSubSystem Âπ∂‰∏çÁü•ÈÅì Facade ÁöÑÂ≠òÂú®ÔºåÂØπ‰∫é SubSystem ËÄåË®ÄÔºåFacade Âè™ÊòØÂè¶‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØËÄåÂ∑≤ÔºàÂç≥ Facade ÂØπ SubSystem ÈÄèÊòéÔºâ„ÄÇ Â§ñËßÇÊ®°ÂºèÁöÑÁõÆÁöÑ‰∏çÊòØÁªô‰∫àÂ≠êÁ≥ªÁªüÊ∑ªÂä†Êñ∞ÁöÑÂäüËÉΩÊé•Âè£ÔºåËÄåÊòØ‰∏∫‰∫ÜËÆ©Â§ñÈÉ®ÂáèÂ∞ë‰∏éÂ≠êÁ≥ªÁªüÂÜÖÂ§ö‰∏™Ê®°ÂùóÁöÑ‰∫§‰∫íÔºåÊùæÊï£ËÄ¶ÂêàÔºå‰ªéËÄåËÆ©Â§ñÈÉ®ËÉΩÂ§üÊõ¥ÁÆÄÂçïÂú∞‰ΩøÁî®Â≠êÁ≥ªÁªü„ÄÇ Â§ñËßÇÊ®°ÂºèÁöÑÊú¨Ë¥®ÊòØÔºöÂ∞ÅË£Ö‰∫§‰∫íÔºåÁÆÄÂåñË∞ÉÁî®„ÄÇ Ê®°Âºè‰ºòÁÇπ Èôç‰Ωé‰∫ÜÂÆ¢Êà∑Á±ª‰∏éÂ≠êÁ≥ªÁªüÁ±ªÁöÑËÄ¶ÂêàÂ∫¶ÔºåÂÆûÁé∞‰∫ÜÂ≠êÁ≥ªÁªü‰∏éÂÆ¢Êà∑‰πãÈó¥ÁöÑÊùæËÄ¶ÂêàÂÖ≥Á≥ªÔºõ Âè™ÊòØÊèê‰æõ‰∫Ü‰∏Ä‰∏™ËÆøÈóÆÂ≠êÁ≥ªÁªüÁöÑÁªü‰∏ÄÂÖ•Âè£ÔºåÂπ∂‰∏çÂΩ±ÂìçÁî®Êà∑Áõ¥Êé•‰ΩøÁî®Â≠êÁ≥ªÁªüÁ±ªÔºõ ÂáèÂ∞ë‰∫Ü‰∏éÂ≠êÁ≥ªÁªüÁöÑÂÖ≥ËÅîÂØπË±°ÔºåÂÆûÁé∞‰∫ÜÂ≠êÁ≥ªÁªü‰∏éÂÆ¢Êà∑‰πãÈó¥ÁöÑÊùæËÄ¶ÂêàÂÖ≥Á≥ªÔºåÊùæËÄ¶Âêà‰ΩøÂæóÂ≠êÁ≥ªÁªüÁöÑÁªÑ‰ª∂ÂèòÂåñ‰∏ç‰ºöÂΩ±ÂìçÂà∞ÂÆÉÁöÑÂÆ¢Êà∑„ÄÇ Â§ñËßÇÊ®°ÂºèÂØπÂÆ¢Êà∑Â±èËîΩ‰∫ÜÂ≠êÁ≥ªÁªüÁªÑ‰ª∂Ôºå‰ªéËÄåÁÆÄÂåñ‰∫ÜÊé•Âè£ÔºåÂáèÂ∞ë‰∫ÜÂÆ¢Êà∑Â§ÑÁêÜÁöÑÂØπË±°Êï∞ÁõÆÂπ∂‰ΩøÂ≠êÁ≥ªÁªüÁöÑ‰ΩøÁî®Êõ¥Âä†ÁÆÄÂçï„ÄÇ ÂºïÂÖ•Â§ñËßÇËßíËâ≤‰πãÂêéÔºåÁî®Êà∑Âè™ÈúÄË¶Å‰∏éÂ§ñËßÇËßíËâ≤‰∫§‰∫íÔºõ Áî®Êà∑‰∏éÂ≠êÁ≥ªÁªü‰πãÈó¥ÁöÑÂ§çÊùÇÈÄªËæëÂÖ≥Á≥ªÁî±Â§ñËßÇËßíËâ≤Êù•ÂÆûÁé∞„ÄÇ Èôç‰ΩéÂéüÊúâÁ≥ªÁªüÁöÑÂ§çÊùÇÂ∫¶ÂíåÁ≥ªÁªü‰∏≠ÁöÑÁºñËØë‰æùËµñÊÄßÔºåÂπ∂ÁÆÄÂåñ‰∫ÜÁ≥ªÁªüÂú®‰∏çÂêåÂπ≥Âè∞‰πãÈó¥ÁöÑÁßªÊ§çËøáÁ®ã„ÄÇ Âõ†‰∏∫ÁºñËØë‰∏Ä‰∏™Â≠êÁ≥ªÁªü‰∏ÄËà¨‰∏çÈúÄË¶ÅÁºñËØëÊâÄÊúâÂÖ∂‰ªñÁöÑÂ≠êÁ≥ªÁªü„ÄÇ‰∏Ä‰∏™Â≠êÁ≥ªÁªüÁöÑ‰øÆÊîπÂØπÂÖ∂‰ªñÂ≠êÁ≥ªÁªüÊ≤°Êúâ‰ªª‰ΩïÂΩ±ÂìçÔºåËÄå‰∏îÂ≠êÁ≥ªÁªüÂÜÖÈÉ®ÂèòÂåñ‰πü‰∏ç‰ºöÂΩ±ÂìçÂà∞Â§ñËßÇÂØπË±°„ÄÇ Ê®°ÂºèÁº∫ÁÇπ ‰∏çËÉΩÂæàÂ•ΩÂú∞ÈôêÂà∂ÂÆ¢Êà∑Á´ØÁõ¥Êé•‰ΩøÁî®Â≠êÁ≥ªÁªüÁ±ªÔºåÂ¶ÇÊûúÂØπÂÆ¢Êà∑Á´ØËÆøÈóÆÂ≠êÁ≥ªÁªüÁ±ªÂÅöÂ§™Â§öÁöÑÈôêÂà∂ÂàôÂáèÂ∞ë‰∫ÜÂèØÂèòÊÄßÂíåÁÅµÊ¥ªÊÄß„ÄÇ Âú®‰∏çÂºïÂÖ•ÊäΩË±°Â§ñËßÇÁ±ªÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¢ûÂä†Êñ∞ÁöÑÂ≠êÁ≥ªÁªüÂèØËÉΩÈúÄË¶Å‰øÆÊîπÂ§ñËßÇÁ±ªÊàñÂÆ¢Êà∑Á´ØÁöÑÊ∫ê‰ª£Á†ÅÔºåËøùËÉå‰∫Ü‚ÄúÂºÄÈó≠ÂéüÂàô‚Äù„ÄÇ ÈÄÇÁî®Âú∫ÊôØ ‰∏∫‰∏Ä‰∏™Â§çÊùÇÁöÑÊ®°ÂùóÊàñÂ≠êÁ≥ªÁªüÊèê‰æõ‰∏Ä‰∏™ÁÆÄÊ¥ÅÁöÑ‰æõÂ§ñÁïåËÆøÈóÆÁöÑÊé•Âè£Ôºõ Â∏åÊúõÊèêÈ´òÂ≠êÁ≥ªÁªüÁöÑÁã¨Á´ãÊÄßÊó∂Ôºõ È¢ÑÈò≤‰ª£Á†ÅÊ±°ÊüìÔºöÂΩìÂ≠êÁ≥ªÁªüÁî±‰∫é‰∏çÂèØÈÅøÂÖçÁöÑÊöÇÊó∂ÂéüÂõ†ÂØºËá¥ÂèØËÉΩÂ≠òÂú® bug ÊàñÊÄßËÉΩÁõ∏ÂÖ≥ÈóÆÈ¢òÊó∂ÔºåÂèØ‰ª•ÈÄöËøá Â§ñËßÇÊ®°Âºè Êèê‰æõ‰∏Ä‰∏™È´òÂ±ÇÊé•Âè£ÔºåÈöîÁ¶ªÂÆ¢Êà∑Á´Ø‰∏éÂ≠êÁ≥ªÁªüÁöÑÁõ¥Êé•‰∫§‰∫íÔºåÊñπ‰æøÂêéÁª≠ÈóÆÈ¢ò‰øÆÊîπÔºõ Âú®Â±ÇÊ¨°ÂåñÁªìÊûÑ‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî®Â§ñËßÇÊ®°ÂºèÂÆö‰πâÁ≥ªÁªü‰∏≠ÊØè‰∏ÄÂ±ÇÁöÑÂÖ•Âè£ÔºåÂ±Ç‰∏éÂ±Ç‰πãÈó¥‰∏çÁõ¥Êé•‰∫ßÁîüËÅîÁ≥ªÔºåËÄåÈÄöËøáÂ§ñËßÇÁ±ªÂª∫Á´ãËÅîÁ≥ªÔºåÈôç‰ΩéÂ±Ç‰πãÈó¥ÁöÑËÄ¶ÂêàÂ∫¶„ÄÇ ‰ΩøÁî®Ê≠•È™§ ÂàõÂª∫Â§ñËßÇËßíËâ≤ 1234567891011121314151617181920212223242526272829303132333435package main.java.com.study.designPatterns.facade.demoOne;/** * @author: whb * @description: Â§ñËßÇËßíËâ≤Facade */public class Facade &#123; /** * Â≠êÁ≥ªÁªüA */ private SubSystemA a = new SubSystemA(); /** * Â≠êÁ≥ªÁªüB */ private SubSystemB b = new SubSystemB(); /** * Â≠êÁ≥ªÁªüC */ private SubSystemC c = new SubSystemC(); // ÂØπÂ§ñÊé•Âè£ public void doA() &#123; this.a.doA(); &#125; // ÂØπÂ§ñÊé•Âè£ public void doB() &#123; this.b.doB(); &#125; // ÂØπÂ§ñÊé•Âè£ public void doC() &#123; this.c.doC(); &#125;&#125; ÂàõÂª∫Â≠êÁ≥ªÁªü 123456789101112131415161718192021222324252627282930313233343536package main.java.com.study.designPatterns.facade.demoOne;/** * @author: whb * @description: Â≠êÁ≥ªÁªüA */public class SubSystemA &#123; public void doA() &#123; System.out.println("Â§ÑÁêÜAÁ≥ªÁªüÁöÑ‰∏öÂä°..."); &#125;&#125;package main.java.com.study.designPatterns.facade.demoOne;/** * @author: whb * @description: Â≠êÁ≥ªÁªüB */public class SubSystemB &#123; public void doB() &#123; System.out.println("Â§ÑÁêÜBÁ≥ªÁªüÁöÑ‰∏öÂä°..."); &#125;&#125;package main.java.com.study.designPatterns.facade.demoOne;/** * @author: whb * @description: Â≠êÁ≥ªÁªüC */public class SubSystemC &#123; public void doC() &#123; System.out.println("Â§ÑÁêÜCÁ≥ªÁªüÁöÑ‰∏öÂä°..."); &#125;&#125; ÊµãËØïÁ±ª 1234567891011121314package main.java.com.study.designPatterns.facade.demoOne;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class Client &#123; public static void main(String[] args) &#123; Facade facade = new Facade(); facade.doA(); facade.doB(); facade.doC(); &#125;&#125; ‰∏éÈÄÇÈÖçÊ®°ÂºèÁöÑÂå∫Âà´ Â§ñËßÇÊ®°ÂºèÁöÑÂÆûÁé∞Ê†∏ÂøÉ‰∏ªË¶ÅÊòØ‚Äî‚ÄîÁî±Â§ñËßÇÁ±ªÂéª‰øùÂ≠òÂêÑ‰∏™Â≠êÁ≥ªÁªüÁöÑÂºïÁî®ÔºåÂÆûÁé∞Áî±‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂ§ñËßÇÁ±ªÂéªÂåÖË£ÖÂ§ö‰∏™Â≠êÁ≥ªÁªüÁ±ªÔºåÁÑ∂ËÄåÂÆ¢Êà∑Á´ØÂè™ÈúÄË¶ÅÂºïÁî®Ëøô‰∏™Â§ñËßÇÁ±ªÔºåÁÑ∂ÂêéÁî±Â§ñËßÇÁ±ªÊù•Ë∞ÉÁî®ÂêÑ‰∏™Â≠êÁ≥ªÁªü‰∏≠ÁöÑÊñπÊ≥ï„ÄÇ ËøôÊ†∑ÁöÑÂÆûÁé∞ÊñπÂºèÈùûÂ∏∏Á±ª‰ººÈÄÇÈÖçÂô®Ê®°ÂºèÔºåÁÑ∂ËÄåÂ§ñËßÇÊ®°Âºè‰∏éÈÄÇÈÖçÂô®Ê®°Âºè‰∏çÂêåÁöÑÊòØÔºöÈÄÇÈÖçÂô®Ê®°ÂºèÊòØÂ∞Ü‰∏Ä‰∏™ÂØπË±°ÂåÖË£ÖËµ∑Êù•‰ª•ÊîπÂèòÂÖ∂Êé•Âè£ÔºåËÄåÂ§ñËßÇÊòØÂ∞Ü‰∏ÄÁæ§ÂØπË±° ‚ÄùÂåÖË£Ö‚ÄúËµ∑Êù•‰ª•ÁÆÄÂåñÂÖ∂Êé•Âè£„ÄÇÂÆÉ‰ª¨ÁöÑÊÑèÂõæÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåÈÄÇÈÖçÂô®ÊòØÂ∞ÜÊé•Âè£ËΩ¨Êç¢‰∏∫‰∏çÂêåÊé•Âè£ÔºåËÄåÂ§ñËßÇÊ®°ÂºèÊòØÊèê‰æõ‰∏Ä‰∏™Áªü‰∏ÄÁöÑÊé•Âè£Êù•ÁÆÄÂåñÊé•Âè£„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆ°ÁÆóÊú∫ÁΩëÁªúÂü∫Á°ÄÂ≠¶‰π†]]></title>
    <url>%2Fposts%2Fb2437d15.html</url>
    <content type="text"><![CDATA[ËÆ°ÁÆóÊú∫ÁΩëÁªú‰ΩìÁ≥ªÁªìÊûÑ ‰ΩìÁ≥ª‰ªãÁªç ËÆ°ÁÆóÊú∫ÁΩëÁªú‰ΩìÁ≥ªÁªìÊûÑÂàÜ‰∏∫3ÁßçÔºöOSI‰ΩìÁ≥ªÁªìÊûÑ„ÄÅTCP / IP‰ΩìÁ≥ªÁªìÊûÑ„ÄÅ‰∫îÂ±Ç‰ΩìÁ≥ªÁªìÊûÑ ‰Ωé‰∏âÂ±Ç‰∏∫ÈÄö‰ø°Â≠êÁΩëÔºåË¥üË¥£Êï∞ÊçÆ‰º†ËæìÔºõ È´ò‰∏âÂ±Ç‰∏∫ËµÑÊ∫êÂ≠êÁΩëÔºåÁõ∏ÂΩì‰∫éËÆ°ÁÆóÊú∫Á≥ªÁªüÔºåÂÆåÊàêÊï∞ÊçÆÂ§ÑÁêÜÔºõ ‰º†ËæìÂ±ÇÊâø‰∏äÂêØ‰∏ãÔºõ TCP/IP‰ΩìÁ≥ªÁªìÊûÑËØ¶‰ªã OSI‰ΩìÁ≥ªÁªìÊûÑËØ¶‰ªã TCP ÂçèËÆÆ ÂÆö‰πâ Transmission Control ProtocolÔºåÂç≥ ‰º†ËæìÊéßÂà∂ÂçèËÆÆÔºåÂ±û‰∫é‰º†ËæìÂ±ÇÈÄö‰ø°ÂçèËÆÆÔºåÂü∫‰∫éTCPÁöÑÂ∫îÁî®Â±ÇÂçèËÆÆÊúâHTTP„ÄÅSMTP„ÄÅFTP„ÄÅTelnet Âíå POP3„ÄÇ ÁâπÁÇπ Èù¢ÂêëËøûÊé•Ôºö‰ΩøÁî®TCP‰º†ËæìÊï∞ÊçÆÂâçÔºåÂøÖÈ°ªÂÖàÂª∫Á´ãTCPËøûÊé•Ôºõ‰º†ËæìÂÆåÊàêÂêéÂÜçÈáäÊîæËøûÊé•„ÄÇ ÂÖ®ÂèåÂ∑•ÈÄö‰ø°ÔºöÂª∫Á´ãTCPËøûÊé•ÂêéÔºåÈÄö‰ø°ÂèåÊñπÈÉΩËÉΩÂèëÈÄÅÊï∞ÊçÆ„ÄÇ ÂèØÈù†ÔºöÈÄöËøáTCPËøûÊé•‰º†ÈÄÅÊï∞ÊçÆÔºö‰∏ç‰∏¢Â§±„ÄÅÊó†Â∑ÆÈîô„ÄÅ‰∏çÈáçÂ§ç„ÄÅÊåâÂ∫èÂà∞Ëææ„ÄÇ Èù¢ÂêëÂ≠óËäÇÊµÅÔºöÊï∞ÊçÆ‰ª•ÊµÅÁöÑÂΩ¢ÂºèËøõË°å‰º†Ëæì„ÄÇ Êä•ÊñáÊÆµÊ†ºÂºè Êä•ÊñáÊÆµ = È¶ñÈÉ® + Êï∞ÊçÆ 2ÈÉ®ÂàÜ ‰∏ãÈù¢ÂàÜÂà´ÂØπÂÖ∂‰∏≠ÁöÑÂ≠óÊÆµËøõË°å‰ªãÁªçÔºö Ê∫êÁ´ØÂè£ÂíåÁõÆÁöÑÁ´ØÂè£ÔºöÂêÑÂç†2‰∏™Â≠óËäÇÔºåËøô‰∏§‰∏™ÂÄºÂä†‰∏äIPÈ¶ñÈÉ®‰∏≠ÁöÑÊ∫êÁ´ØIPÂú∞ÂùÄÂíåÁõÆÁöÑÁ´ØIPÂú∞ÂùÄÂîØ‰∏ÄÁ°ÆÂÆö‰∏Ä‰∏™TCPËøûÊé•„ÄÇÊúâÊó∂‰∏Ä‰∏™IPÂú∞ÂùÄÂíå‰∏Ä‰∏™Á´ØÂè£Âè∑‰πüÁß∞‰∏∫socketÔºàÊèíÂè£Ôºâ„ÄÇÂ∫èÂè∑ÔºöÂç†4‰∏™Â≠óËäÇÔºåÊòØÊú¨Êä•ÊñáÊÆµÊâÄÂèëÈÄÅÁöÑÊï∞ÊçÆÈ°πÁõÆÁªÑÁ¨¨‰∏Ä‰∏™Â≠óËäÇÁöÑÂ∫èÂè∑„ÄÇÂú®TCP‰º†ÈÄÅÁöÑÊï∞ÊçÆÊµÅ‰∏≠ÔºåÊØè‰∏Ä‰∏™Â≠óËäÇÈÉΩÊúâ‰∏Ä‰∏™Â∫èÂè∑„ÄÇ‰æãÂ¶ÇÔºå‰∏ÄÊä•ÊñáÊÆµÁöÑÂ∫èÂè∑‰∏∫300ÔºåËÄå‰∏îÊï∞ÊçÆÂÖ±100Â≠óËäÇÔºåÂàô‰∏ã‰∏Ä‰∏™Êä•ÊñáÊÆµÁöÑÂ∫èÂè∑Â∞±ÊòØ400ÔºõÂ∫èÂè∑ÊòØ32bitÁöÑÊó†Á¨¶Âè∑Êï∞ÔºåÂ∫èÂè∑Âà∞Ëææ2^32-1Âêé‰ªé0ÂºÄÂßã„ÄÇÔºàÊ≥®ÔºöÂ¶Ç‰ΩïÈò≤Ê≠¢‰ªé0ÂºÄÂßãÂêéÂ∫èÂè∑Áõ∏ÂêåÁöÑÈóÆÈ¢òÔºâÁ°ÆËÆ§Â∫èÂè∑ÔºöÂç†4Â≠óËäÇÔºåÊòØÊúüÊúõÊî∂Âà∞ÂØπÊñπ‰∏ãÊ¨°ÂèëÈÄÅÁöÑÊï∞ÊçÆÁöÑÁ¨¨‰∏Ä‰∏™Â≠óËäÇÁöÑÂ∫èÂè∑Ôºå‰πüÂ∞±ÊòØÊúüÊúõÊî∂Âà∞ÁöÑ‰∏ã‰∏Ä‰∏™Êä•ÊñáÊÆµÁöÑÈ¶ñÈÉ®‰∏≠ÁöÑÂ∫èÂè∑ÔºõÁ°ÆËÆ§Â∫èÂè∑Â∫îËØ•ÊòØ‰∏äÊ¨°Â∑≤ÊàêÂäüÊî∂Âà∞Êï∞ÊçÆÂ≠óËäÇÂ∫èÂè∑+1„ÄÇÂè™ÊúâACKÊ†áÂøó‰∏∫1Êó∂ÔºåÁ°ÆËÆ§Â∫èÂè∑ÊâçÊúâÊïà„ÄÇÊï∞ÊçÆÂÅèÁßªÔºöÂç†4ÊØîÁâπÔºåË°®Á§∫Êï∞ÊçÆÂºÄÂßãÁöÑÂú∞ÊñπÁ¶ªTCPÊÆµÁöÑËµ∑ÂßãÂ§ÑÊúâÂ§öËøú„ÄÇÂÆûÈôÖ‰∏äÂ∞±ÊòØTCPÊÆµÈ¶ñÈÉ®ÁöÑÈïøÂ∫¶„ÄÇÁî±‰∫éÈ¶ñÈÉ®ÈïøÂ∫¶‰∏çÂõ∫ÂÆöÔºåÂõ†Ê≠§Êï∞ÊçÆÂÅèÁßªÂ≠óÊÆµÊòØÂøÖË¶ÅÁöÑ„ÄÇÊï∞ÊçÆÂÅèÁßª‰ª•32‰Ωç‰∏∫ÈïøÂ∫¶Âçï‰ΩçÔºå‰πüÂ∞±ÊòØ4‰∏™Â≠óËäÇÔºåÂõ†Ê≠§TCPÈ¶ñÈÉ®ÁöÑÊúÄÂ§ßÈïøÂ∫¶ÊòØ60‰∏™Â≠óËäÇ„ÄÇÂç≥ÂÅèÁßªÊúÄÂ§ß‰∏∫15‰∏™ÈïøÂ∫¶Âçï‰Ωç=1532‰Ωç=154Â≠óËäÇ„ÄÇ‰øùÁïôÔºö 6ÊØîÁâπÔºå‰æõ‰ª•ÂêéÂ∫îÁî®ÔºåÁé∞Âú®ÁΩÆ‰∏∫0„ÄÇ6‰∏™Ê†áÂøó‰ΩçÊØîÁâπÔºöURGÔºöÂΩìURG=1Êó∂ÔºåÊ≥®Ëß£Ê≠§Êä•ÊñáÂ∫îÂ∞ΩÂø´‰º†ÈÄÅÔºåËÄå‰∏çË¶ÅÊåâÊú¨Êù•ÁöÑÂàóÈòüÊ¨°Â∫èÊù•‰º†ÈÄÅ„ÄÇ‰∏é‚ÄúÁ¥ßÊÄ•ÊåáÈíà‚ÄùÂ≠óÊÆµÂÖ±ÂêåÂ∫îÁî®ÔºåÁ¥ßÊÄ•ÊåáÈíàÊåáÂá∫Âú®Êú¨Êä•ÊñáÊÆµ‰∏≠ÁöÑÁ¥ßÊÄ•Êï∞ÊçÆÁöÑÊúÄÂêé‰∏Ä‰∏™Â≠óËäÇÁöÑÂ∫èÂè∑Ôºå‰ΩøÊé•ÁÆ°ÊñπÂèØ‰ª•Áü•ÈÅìÁ¥ßÊÄ•Êï∞ÊçÆÂÖ±ÊúâÂ§öÈïøÔºõACKÔºöÂè™ÊúâÂΩìACK=1Êó∂ÔºåÁ°ÆËÆ§Â∫èÂè∑Â≠óÊÆµÊâçÊúâÊïàÔºõPSHÔºöÂΩìPSH=1Êó∂ÔºåÊé•Êî∂ÊñπÂ∫îËØ•Â∞ΩÂø´Â∞ÜÊú¨Êä•ÊñáÊÆµÁ´ãÂç≥‰º†ÈÄÅÁªôÂÖ∂Â∫îÁî®Â±ÇÔºõRSTÔºöÂΩìRST=1Êó∂ÔºåË°®Á§∫Âá∫Áé∞ËøûÊé•ÈîôËØØÔºåÂøÖÈ°ªÈáäÊîæËøûÊé•ÔºåÁÑ∂ÂêéÂÜçÈáçÂª∫‰º†ËæìËøûÊé•„ÄÇÂ§ç‰ΩçÊØîÁâπËøòÁî®Êù•ÊãíÁªù‰∏Ä‰∏™‰∏çÊ≥ïÁöÑÊä•ÊñáÊÆµÊàñÊãíÁªùÊâìÂºÄ‰∏Ä‰∏™ËøûÊé•ÔºõSYNÔºöSYN=1,ACK=0Êó∂Ë°®Á§∫ËØ∑Ê±ÇÂª∫Á´ã‰∏Ä‰∏™ËøûÊé•ÔºåÊê∫Â∏¶SYNÊ†áÂøóÁöÑTCPÊä•ÊñáÊÆµ‰∏∫ÂêåÊ≠•Êä•ÊñáÊÆµÔºõFINÔºöÂèëÁ´ØÂÆåÊàêÂèëÈÄÅ‰ªªÂä°„ÄÇÁ™óÂè£ÔºöTCPÈÄöËøáÊªëÂä®Á™óÂè£ÁöÑÊ¶ÇÂøµÊù•ËøõË°åÊµÅÈáèÊéßÂà∂„ÄÇËÆæÊÉ≥Âú®ÂèëÈÄÅÁ´ØÂèëÈÄÅÊï∞ÊçÆÁöÑÈÄüÂ∫¶ÂæàÂø´ËÄåÊé•Êî∂Á´ØÊé•Êî∂ÈÄüÂ∫¶Âç¥ÂæàÊÖ¢ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Â§±ÔºåÊòæÁÑ∂ÈúÄË¶ÅËøõË°åÊµÅÈáèÊéßÂà∂Ôºå ÂçèË∞ÉÂ•ΩÈÄö‰ø°ÂèåÊñπÁöÑÂ∑•‰ΩúËäÇÂ•è„ÄÇÊâÄË∞ìÊªëÂä®Á™óÂè£ÔºåÂèØ‰ª•ÁêÜËß£ÊàêÊé•Êî∂Á´ØÊâÄËÉΩÊèê‰æõÁöÑÁºìÂÜ≤Âå∫Â§ßÂ∞è„ÄÇTCPÂà©Áî®‰∏Ä‰∏™ÊªëÂä®ÁöÑÁ™óÂè£Êù•ÂëäËØâÂèëÈÄÅÁ´ØÂØπÂÆÉÊâÄÂèëÈÄÅÁöÑÊï∞ÊçÆËÉΩÊèê‰æõÂ§öÂ§ßÁöÑÁºìÂÜ≤Âå∫„ÄÇÁ™óÂè£Â§ßÂ∞è‰∏∫Â≠óËäÇÊï∞ÔºåËµ∑Âßã‰∫éÁ°ÆËÆ§Â∫èÂè∑Â≠óÊÆµÊåáÊòéÁöÑÂÄºÔºàËøô‰∏™ÂÄºÊòØÊé•Êî∂Á´ØÊ≠£ÊúüÊúõÊé•Êî∂ÁöÑÂ≠óËäÇÔºâ„ÄÇÁ™óÂè£Â§ßÂ∞èÊòØ‰∏Ä‰∏™16bitÂ≠óÊÆµÔºåÂõ†ËÄåÁ™óÂè£Â§ßÂ∞èÊúÄÂ§ß‰∏∫65535Â≠óËäÇ„ÄÇÊ£ÄÈ™åÂíåÔºöÊ£ÄÈ™åÂíåË¶ÜÁõñ‰∫ÜÊï¥‰∏™TCPÊä•ÊñáÊÆµÔºöTCPÈ¶ñÈÉ®ÂíåÊï∞ÊçÆ„ÄÇËøôÊòØ‰∏Ä‰∏™Âº∫Âà∂ÊÄßÁöÑÂ≠óÊÆµÔºå‰∏ÄÂÆöÊòØÁî±ÂèëÁ´ØËÆ°ÁÆóÂíåÂ≠òÂÇ®ÔºåÂπ∂Áî±Êî∂Á´ØËøõË°åÈ™åËØÅ„ÄÇÁ¥ßÊÄ•ÊåáÈíàÔºöÂè™ÊúâÂΩìURGÊ†áÂøóÁΩÆ1Êó∂Á¥ßÊÄ•ÊåáÈíàÊâçÊúâÊïà„ÄÇÁ¥ßÊÄ•ÊåáÈíàÊòØ‰∏Ä‰∏™Ê≠£ÁöÑÂÅèÁßªÈáèÔºåÂíåÂ∫èÂè∑Â≠óÊÆµ‰∏≠ÁöÑÂÄºÁõ∏Âä†Ë°®Á§∫Á¥ßÊÄ•Êï∞ÊçÆÊúÄÂêé‰∏Ä‰∏™Â≠óËäÇÁöÑÂ∫èÂè∑„ÄÇ Âª∫Á´ãËøûÊé•-‰∏âÊ¨°Êè°Êâã ËøáÁ®ãËØ¥ÊòéÔºö ÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Âô®ÂèëÂá∫ËøûÊé•ËØ∑Ê±ÇÊä•ÊñáÔºåËøôÊó∂Êä•ÊñáÈ¶ñÈÉ®‰∏≠ÁöÑÂêåÈÉ®‰ΩçSYN=1ÔºåÂêåÊó∂ÈÄâÊã©‰∏Ä‰∏™ÂàùÂßãÂ∫èÂàóÂè∑ Seq=X ÔºåÊ≠§Êó∂ÔºåTCPÂÆ¢Êà∑Á´ØËøõÁ®ãËøõÂÖ•‰∫Ü SYN-SENTÔºàÂêåÊ≠•Â∑≤ÂèëÈÄÅÁä∂ÊÄÅÔºâÁä∂ÊÄÅ„ÄÇTCPËßÑÂÆöÔºåSYNÊä•ÊñáÊÆµÔºàSYN=1ÁöÑÊä•ÊñáÊÆµÔºâ‰∏çËÉΩÊê∫Â∏¶Êï∞ÊçÆÔºå‰ΩÜÈúÄË¶ÅÊ∂àËÄóÊéâ‰∏Ä‰∏™Â∫èÂè∑„ÄÇ TCPÊúçÂä°Âô®Êî∂Âà∞ËØ∑Ê±ÇÊä•ÊñáÂêéÔºåÂ¶ÇÊûúÂêåÊÑèËøûÊé•ÔºåÂàôÂèëÂá∫Á°ÆËÆ§Êä•Êñá„ÄÇÁ°ÆËÆ§Êä•Êñá‰∏≠Â∫îËØ• ACK=1ÔºåSYN=1ÔºåÁ°ÆËÆ§Âè∑ÊòØAck=X+1ÔºåÂêåÊó∂‰πüË¶Å‰∏∫Ëá™Â∑±ÂàùÂßãÂåñ‰∏Ä‰∏™Â∫èÂàóÂè∑ Seq=YÔºåÊ≠§Êó∂ÔºåTCPÊúçÂä°Âô®ËøõÁ®ãËøõÂÖ•‰∫ÜSYN-RCVDÔºàÂêåÊ≠•Êî∂Âà∞ÔºâÁä∂ÊÄÅ„ÄÇËøô‰∏™Êä•Êñá‰πü‰∏çËÉΩÊê∫Â∏¶Êï∞ÊçÆÔºå‰ΩÜÊòØÂêåÊ†∑Ë¶ÅÊ∂àËÄó‰∏Ä‰∏™Â∫èÂè∑„ÄÇ TCPÂÆ¢Êà∑ËøõÁ®ãÊî∂Âà∞Á°ÆËÆ§ÂêéÔºåËøòË¶ÅÂêëÊúçÂä°Âô®ÁªôÂá∫Á°ÆËÆ§„ÄÇÁ°ÆËÆ§Êä•ÊñáÁöÑACK=1ÔºåAck=Y+1ÔºåËá™Â∑±ÁöÑÂ∫èÂàóÂè∑Seq=X+1ÔºåÊ≠§Êó∂ÔºåTCPËøûÊé•Âª∫Á´ãÔºåÂÆ¢Êà∑Á´ØËøõÂÖ•ESTABLISHEDÔºàÂ∑≤Âª∫Á´ãËøûÊé•ÔºâÁä∂ÊÄÅ„ÄÇTCPËßÑÂÆöÔºåACKÊä•ÊñáÊÆµÂèØ‰ª•Êê∫Â∏¶Êï∞ÊçÆÔºå‰ΩÜÊòØÂ¶ÇÊûú‰∏çÊê∫Â∏¶Êï∞ÊçÆÂàô‰∏çÊ∂àËÄóÂ∫èÂè∑„ÄÇ ÂΩìÊúçÂä°Âô®Êî∂Âà∞ÂÆ¢Êà∑Á´ØÁöÑÁ°ÆËÆ§Âêé‰πüËøõÂÖ•ESTABLISHEDÁä∂ÊÄÅÔºåÊ≠§ÂêéÂèåÊñπÂ∞±ÂèØ‰ª•ÂºÄÂßãÈÄö‰ø°‰∫Ü„ÄÇ ‰∏∫‰ªÄ‰πàTCPÂª∫Á´ãËøûÊé•ÈúÄ‰∏âÊ¨°Êè°Êâã È¶ñÂÖàË¶ÅÁü•ÈÅì‰ø°ÈÅìÊòØ‰∏çÂèØÈù†ÁöÑÔºå‰ΩÜÊòØË¶ÅÂª∫Á´ãÂèØÈù†ÁöÑËøûÊé•ÂèëÈÄÅÂèØÈù†ÁöÑÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØÊï∞ÊçÆ‰º†ËæìÊòØÈúÄË¶ÅÂèØÈù†ÁöÑ„ÄÇÂú®Ëøô‰∏™Êó∂ÂÄô‰∏âÊ¨°Êè°ÊâãÊòØ‰∏Ä‰∏™ÁêÜËÆ∫‰∏äÁöÑÊúÄÂ∞èÂÄºÔºåÂπ∂‰∏çÊòØËØ¥ÊòØtcpÂçèËÆÆË¶ÅÊ±ÇÁöÑÔºåËÄåÊòØ‰∏∫‰∫ÜÊª°Ë∂≥Âú®‰∏çÂèØÈù†ÁöÑ‰ø°ÈÅì‰∏ä‰º†ËæìÂèØÈù†ÁöÑÊï∞ÊçÆÊâÄË¶ÅÊ±ÇÁöÑ„ÄÇ Âú®„ÄäËÆ°ÁÆóÊú∫ÁΩëÁªú„Äã‰∏Ä‰π¶‰∏≠ÂÖ∂‰∏≠ÊúâÊèêÂà∞Ôºå‰∏âÊ¨°Êè°ÊâãÁöÑÁõÆÁöÑÊòØ‚Äú‰∏∫‰∫ÜÈò≤Ê≠¢Â∑≤ÁªèÂ§±ÊïàÁöÑËøûÊé•ËØ∑Ê±ÇÊä•ÊñáÊÆµÁ™ÅÁÑ∂Âèà‰º†Âà∞ÊúçÂä°Á´ØÔºåÂõ†ËÄå‰∫ßÁîüÈîôËØØ‚ÄùËøôÁßçÊÉÖÂÜµÊòØÔºö‰∏ÄÁ´Ø(client)AÂèëÂá∫ÂéªÁöÑÁ¨¨‰∏Ä‰∏™ËøûÊé•ËØ∑Ê±ÇÊä•ÊñáÂπ∂Ê≤°Êúâ‰∏¢Â§±ÔºåËÄåÊòØÂõ†‰∏∫Êüê‰∫õÊú™Áü•ÁöÑÂéüÂõ†Âú®Êüê‰∏™ÁΩëÁªúËäÇÁÇπ‰∏äÂèëÁîüÊªûÁïôÔºåÂØºËá¥Âª∂ËøüÂà∞ËøûÊé•ÈáäÊîæ‰ª•ÂêéÁöÑÊüê‰∏™Êó∂Èó¥ÊâçÂà∞ËææÂè¶‰∏ÄÁ´Ø(server)B„ÄÇÊú¨Êù•ËøôÊòØ‰∏Ä‰∏™Êó©Â∑≤Â§±ÊïàÁöÑÊä•ÊñáÊÆµÔºå‰ΩÜÊòØBÊî∂Âà∞Ê≠§Â§±ÊïàÁöÑÊä•Êñá‰πãÂêéÔºå‰ºöËØØËÆ§‰∏∫ÊòØAÂÜçÊ¨°ÂèëÂá∫ÁöÑ‰∏Ä‰∏™Êñ∞ÁöÑËøûÊé•ËØ∑Ê±ÇÔºå‰∫éÊòØBÁ´ØÂ∞±ÂêëAÂèàÂèëÂá∫Á°ÆËÆ§Êä•ÊñáÔºåË°®Á§∫ÂêåÊÑèÂª∫Á´ãËøûÊé•„ÄÇÂ¶ÇÊûú‰∏çÈááÁî®‚Äú‰∏âÊ¨°Êè°Êâã‚ÄùÔºåÈÇ£‰πàÂè™Ë¶ÅBÁ´ØÂèëÂá∫Á°ÆËÆ§Êä•ÊñáÂ∞±‰ºöËÆ§‰∏∫Êñ∞ÁöÑËøûÊé•Â∑≤ÁªèÂª∫Á´ã‰∫ÜÔºå‰ΩÜÊòØAÁ´ØÂπ∂Ê≤°ÊúâÂèëÂá∫Âª∫Á´ãËøûÊé•ÁöÑËØ∑Ê±ÇÔºåÂõ†Ê≠§‰∏ç‰ºöÂéªÂêëBÁ´ØÂèëÈÄÅÊï∞ÊçÆÔºåBÁ´ØÊ≤°ÊúâÊî∂Âà∞Êï∞ÊçÆÂ∞±‰ºö‰∏ÄÁõ¥Á≠âÂæÖÔºåËøôÊ†∑BÁ´ØÂ∞±‰ºöÁôΩÁôΩÊµ™Ë¥πÊéâÂæàÂ§öËµÑÊ∫ê„ÄÇÂ¶ÇÊûúÈááÁî®‚Äú‰∏âÊ¨°Êè°Êâã‚ÄùÁöÑËØùÂ∞±‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÊÉÖÂÜµÔºåBÁ´ØÊî∂Âà∞‰∏Ä‰∏™ËøáÊó∂Â§±ÊïàÁöÑÊä•ÊñáÊÆµ‰πãÂêéÔºåÂêëAÁ´ØÂèëÂá∫Á°ÆËÆ§ÔºåÊ≠§Êó∂AÂπ∂Ê≤°ÊúâË¶ÅÊ±ÇÂª∫Á´ãËøûÊé•ÔºåÊâÄ‰ª•Â∞±‰∏ç‰ºöÂêëBÁ´ØÂèëÈÄÅÁ°ÆËÆ§ÔºåËøô‰∏™Êó∂ÂÄôBÁ´Ø‰πüËÉΩÂ§üÁü•ÈÅìËøûÊé•Ê≤°ÊúâÂª∫Á´ã„ÄÇ ÈáäÊîæËøûÊé•-ÂõõÊ¨°Êå•Êâã ËøáÁ®ãËØ¥ÊòéÔºö ÂÆ¢Êà∑Á´ØËøõÁ®ãÂèëÂá∫ËøûÊé•ÈáäÊîæÊä•ÊñáÔºåÂπ∂‰∏îÂÅúÊ≠¢ÂèëÈÄÅÊï∞ÊçÆ„ÄÇÈáäÊîæÊï∞ÊçÆÊä•ÊñáÈ¶ñÈÉ®ÔºåFIN=1ÔºåÂÖ∂Â∫èÂàóÂè∑‰∏∫seq=uÔºàÁ≠â‰∫éÂâçÈù¢Â∑≤Áªè‰º†ÈÄÅËøáÊù•ÁöÑÊï∞ÊçÆÁöÑÊúÄÂêé‰∏Ä‰∏™Â≠óËäÇÁöÑÂ∫èÂè∑Âä†1ÔºâÔºåÊ≠§Êó∂ÔºåÂÆ¢Êà∑Á´ØËøõÂÖ•FIN-WAIT-1ÔºàÁªàÊ≠¢Á≠âÂæÖ1ÔºâÁä∂ÊÄÅ„ÄÇ TCPËßÑÂÆöÔºåFINÊä•ÊñáÊÆµÂç≥‰Ωø‰∏çÊê∫Â∏¶Êï∞ÊçÆÔºå‰πüË¶ÅÊ∂àËÄó‰∏Ä‰∏™Â∫èÂè∑„ÄÇ ÊúçÂä°Âô®Êî∂Âà∞ËøûÊé•ÈáäÊîæÊä•ÊñáÔºåÂèëÂá∫Á°ÆËÆ§Êä•ÊñáÔºåACK=1Ôºåack=u+1ÔºåÂπ∂‰∏îÂ∏¶‰∏äËá™Â∑±ÁöÑÂ∫èÂàóÂè∑seq=vÔºåÊ≠§Êó∂ÔºåÊúçÂä°Á´ØÂ∞±ËøõÂÖ•‰∫ÜCLOSE-WAITÔºàÂÖ≥Èó≠Á≠âÂæÖÔºâÁä∂ÊÄÅ„ÄÇTCPÊúçÂä°Âô®ÈÄöÁü•È´òÂ±ÇÁöÑÂ∫îÁî®ËøõÁ®ãÔºåÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Âô®ÁöÑÊñπÂêëÂ∞±ÈáäÊîæ‰∫ÜÔºåËøôÊó∂ÂÄôÂ§Ñ‰∫éÂçäÂÖ≥Èó≠Áä∂ÊÄÅÔºåÂç≥ÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÊ≤°ÊúâÊï∞ÊçÆË¶ÅÂèëÈÄÅ‰∫ÜÔºå‰ΩÜÊòØÊúçÂä°Âô®Ëã•ÂèëÈÄÅÊï∞ÊçÆÔºåÂÆ¢Êà∑Á´Ø‰æùÁÑ∂Ë¶ÅÊé•Âèó„ÄÇËøô‰∏™Áä∂ÊÄÅËøòË¶ÅÊåÅÁª≠‰∏ÄÊÆµÊó∂Èó¥Ôºå‰πüÂ∞±ÊòØÊï¥‰∏™CLOSE-WAITÁä∂ÊÄÅÊåÅÁª≠ÁöÑÊó∂Èó¥„ÄÇ ÂÆ¢Êà∑Á´ØÊî∂Âà∞ÊúçÂä°Âô®ÁöÑÁ°ÆËÆ§ËØ∑Ê±ÇÂêéÔºåÊ≠§Êó∂ÔºåÂÆ¢Êà∑Á´ØÂ∞±ËøõÂÖ•FIN-WAIT-2ÔºàÁªàÊ≠¢Á≠âÂæÖ2ÔºâÁä∂ÊÄÅÔºåÁ≠âÂæÖÊúçÂä°Âô®ÂèëÈÄÅËøûÊé•ÈáäÊîæÊä•ÊñáÔºàÂú®Ëøô‰πãÂâçËøòÈúÄË¶ÅÊé•ÂèóÊúçÂä°Âô®ÂèëÈÄÅÁöÑÊúÄÂêéÁöÑÊï∞ÊçÆÔºâ„ÄÇ ÊúçÂä°Âô®Â∞ÜÊúÄÂêéÁöÑÊï∞ÊçÆÂèëÈÄÅÂÆåÊØïÂêéÔºåÂ∞±ÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅËøûÊé•ÈáäÊîæÊä•ÊñáÔºåFIN=1Ôºåack=u+1ÔºåÁî±‰∫éÂú®ÂçäÂÖ≥Èó≠Áä∂ÊÄÅÔºåÊúçÂä°Âô®ÂæàÂèØËÉΩÂèàÂèëÈÄÅ‰∫Ü‰∏Ä‰∫õÊï∞ÊçÆÔºåÂÅáÂÆöÊ≠§Êó∂ÁöÑÂ∫èÂàóÂè∑‰∏∫seq=wÔºåÊ≠§Êó∂ÔºåÊúçÂä°Âô®Â∞±ËøõÂÖ•‰∫ÜLAST-ACKÔºàÊúÄÂêéÁ°ÆËÆ§ÔºâÁä∂ÊÄÅÔºåÁ≠âÂæÖÂÆ¢Êà∑Á´ØÁöÑÁ°ÆËÆ§„ÄÇ ÂÆ¢Êà∑Á´ØÊî∂Âà∞ÊúçÂä°Âô®ÁöÑËøûÊé•ÈáäÊîæÊä•ÊñáÂêéÔºåÂøÖÈ°ªÂèëÂá∫Á°ÆËÆ§ÔºåACK=1Ôºåack=w+1ÔºåËÄåËá™Â∑±ÁöÑÂ∫èÂàóÂè∑ÊòØseq=u+1ÔºåÊ≠§Êó∂ÔºåÂÆ¢Êà∑Á´ØÂ∞±ËøõÂÖ•‰∫ÜTIME-WAITÔºàÊó∂Èó¥Á≠âÂæÖÔºâÁä∂ÊÄÅ„ÄÇÊ≥®ÊÑèÊ≠§Êó∂TCPËøûÊé•ËøòÊ≤°ÊúâÈáäÊîæÔºåÂøÖÈ°ªÁªèËøá2MSLÔºàÊúÄÈïøÊä•ÊñáÊÆµÂØøÂëΩÔºâÁöÑÊó∂Èó¥ÂêéÔºåÂΩìÂÆ¢Êà∑Á´ØÊí§ÈîÄÁõ∏Â∫îÁöÑTCBÂêéÔºåÊâçËøõÂÖ•CLOSEDÁä∂ÊÄÅ„ÄÇ ÊúçÂä°Âô®Âè™Ë¶ÅÊî∂Âà∞‰∫ÜÂÆ¢Êà∑Á´ØÂèëÂá∫ÁöÑÁ°ÆËÆ§ÔºåÁ´ãÂç≥ËøõÂÖ•CLOSEDÁä∂ÊÄÅ„ÄÇÂêåÊ†∑ÔºåÊí§ÈîÄTCBÂêéÔºåÂ∞±ÁªìÊùü‰∫ÜËøôÊ¨°ÁöÑTCPËøûÊé•„ÄÇÂèØ‰ª•ÁúãÂà∞ÔºåÊúçÂä°Âô®ÁªìÊùüTCPËøûÊé•ÁöÑÊó∂Èó¥Ë¶ÅÊØîÂÆ¢Êà∑Á´ØÊó©‰∏Ä‰∫õ„ÄÇ ‰∏∫‰ªÄ‰πàTCPÈáäÊîæËøûÊé•ÈúÄË¶ÅÂõõÊ¨°Êå•Êâã ‰∏∫‰∫Ü‰øùËØÅÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊúÄÂêé1‰∏™ËøûÊé•ÈáäÊîæÁ°ÆËÆ§Êä•ÊñáËÉΩÂà∞ËææÊúçÂä°Âô®Ôºå‰ªéËÄå‰ΩøÂæóÊúçÂä°Âô®ËÉΩÊ≠£Â∏∏ÈáäÊîæËøûÊé•„ÄÇ ÂÖ≥Èó≠ËøûÊé•Êó∂ÔºåÂΩìÊî∂Âà∞ÂØπÊñπÁöÑFINÊä•ÊñáÈÄöÁü•Êó∂ÔºåÂÆÉ‰ªÖ‰ªÖË°®Á§∫ÂØπÊñπÊ≤°ÊúâÊï∞ÊçÆÂèëÈÄÅÁªô‰Ω†‰∫ÜÔºå‰ΩÜÊú™ÂøÖ‰Ω†ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩÂèëÈÄÅÁªôÂØπÊñπ‰∫ÜÔºåÊâÄ‰ª•‰Ω†‰∏çÂøÖÈ©¨‰∏äÂÖ≥Èó≠SOCKETÔºå‰πüÂç≥‰Ω†ÂèØËÉΩËøòÈúÄË¶ÅÂèëÈÄÅ‰∏Ä‰∫õÊï∞ÊçÆÁªôÂØπÊñπ‰πãÂêéÔºåÂÜçÂèëÈÄÅFINÊä•ÊñáÁªôÂØπÊñπÊù•Ë°®Á§∫‰Ω†ÂêåÊÑèÂÖ≥Èó≠ËøûÊé•‰∫ÜÔºåÊâÄ‰ª•ÂÆÉËøôÈáåÁöÑACKÊä•ÊñáÂíåFINÊä•ÊñáÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÈÉΩÊòØÂàÜÂºÄÂèëÈÄÅÁöÑ„ÄÇ Èò≤Ê≠¢‰∏äÊñáÊèêÂà∞ÁöÑÊó©Â∑≤Â§±ÊïàÁöÑËøûÊé•ËØ∑Ê±ÇÊä•ÊñáÂá∫Áé∞Âú®Êú¨ËøûÊé•‰∏≠„ÄÇ ÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∫ÜÊúÄÂêé1‰∏™ËøûÊé•ÈáäÊîæËØ∑Ê±ÇÁ°ÆËÆ§Êä•ÊñáÂêéÔºåÂÜçÁªèËøá2MSLÊó∂Èó¥ÔºåÂàôÂèØ‰ΩøÊú¨ËøûÊé•ÊåÅÁª≠Êó∂Èó¥ÂÜÖÊâÄ‰∫ßÁîüÁöÑÊâÄÊúâÊä•ÊñáÊÆµÈÉΩ‰ªéÁΩëÁªú‰∏≠Ê∂àÂ§±„ÄÇÂç≥Âú®‰∏ã1‰∏™Êñ∞ÁöÑËøûÊé•‰∏≠Â∞±‰∏ç‰ºöÂá∫Áé∞Êó©Â∑≤Â§±ÊïàÁöÑËøûÊé•ËØ∑Ê±ÇÊä•Êñá„ÄÇ ÈáäÊîæËøûÊé•Êó∂‰∏∫‰ªÄ‰πàTIME-WAITÁä∂ÊÄÅÂøÖÈ°ªÁ≠âÂæÖ2MSLÊó∂Èó¥ È¶ñÂÖàËØ¥‰∏ã‰ªÄ‰πàÊòØMSL: MSLÊòØMaximum Segment LifetimeËã±ÊñáÁöÑÁº©ÂÜôÔºå‰∏≠ÊñáÂèØ‰ª•ËØë‰∏∫‚ÄúÊä•ÊñáÊúÄÂ§ßÁîüÂ≠òÊó∂Èó¥‚ÄùÔºå‰ªñÊòØ‰ªª‰ΩïÊä•ÊñáÂú®ÁΩëÁªú‰∏äÂ≠òÂú®ÁöÑÊúÄÈïøÊó∂Èó¥ÔºåË∂ÖËøáËøô‰∏™Êó∂Èó¥Êä•ÊñáÂ∞ÜË¢´‰∏¢ÂºÉ„ÄÇ Á¨¨‰∏ÄÔºå‰∏∫‰∫Ü‰øùËØÅAÂèëÈÄÅÁöÑÊúÄÂêé‰∏Ä‰∏™ACKÊä•ÊñáËÉΩÂ§üÂà∞ËææB„ÄÇËøô‰∏™ACKÊä•ÊñáÊÆµÊúâÂèØËÉΩ‰∏¢Â§±ÔºåÂõ†ËÄå‰ΩøÂ§ÑÂú®LAST-ACKÁä∂ÊÄÅÁöÑBÊî∂‰∏çÂà∞ÂØπÂ∑≤ÂèëÈÄÅÁöÑFIN+ACKÊä•ÊñáÊÆµÁöÑÁ°ÆËÆ§„ÄÇB‰ºöË∂ÖÊó∂Èáç‰º†Ëøô‰∏™FIN+ACKÊä•ÊñáÊÆµÔºåËÄåAÂ∞±ËÉΩÂú®2MSLÊó∂Èó¥ÂÜÖÊî∂Âà∞Ëøô‰∏™Èáç‰º†ÁöÑFIN+ACKÊä•ÊñáÊÆµÔºåÈáçÁΩÆÊó∂Èó¥Á≠âÂæÖËÆ°Êó∂Âô®Ôºà2MSLÔºâ„ÄÇ Â¶ÇÊûúAÂú®TIME-WAITÁä∂ÊÄÅ‰∏çÁ≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥ÔºåËÄåÊòØÂú®ÂèëÈÄÅÂÆåACKÊä•ÊñáÊÆµÂêéÂ∞±Á´ãÂç≥ÈáäÊîæËøûÊé•ÔºåÂ∞±Êó†Ê≥ïÊî∂Âà∞BÈáç‰º†ÁöÑFIN+ACKÊä•ÊñáÊÆµÔºåÂõ†ËÄå‰πü‰∏ç‰ºöÂÜçÂèëÈÄÅ‰∏ÄÊ¨°Á°ÆËÆ§Êä•ÊñáÊÆµ„ÄÇËøôÊ†∑ÔºåBÂ∞±Êó†Ê≥ïÊåâÁÖßÊ≠£Â∏∏ÁöÑÊ≠•È™§ËøõÂÖ•CLOSEDÁä∂ÊÄÅ„ÄÇ Á¨¨‰∫åÔºåAÂú®ÂèëÈÄÅÂÆåACKÊä•ÊñáÊÆµÂêéÔºåÂÜçÁªèËøá2MSLÊó∂Èó¥ÔºåÂ∞±ÂèØ‰ª•‰ΩøÊú¨ËøûÊé•ÊåÅÁª≠ÁöÑÊó∂Èó¥ÊâÄ‰∫ßÁîüÁöÑÊâÄÊúâÊä•ÊñáÊÆµÈÉΩ‰ªéÁΩëÁªú‰∏≠Ê∂àÂ§±„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•‰Ωø‰∏ã‰∏Ä‰∏™Êñ∞ÁöÑËøûÊé•‰∏≠‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÊóßÁöÑËøûÊé•ËØ∑Ê±ÇÁöÑÊä•ÊñáÊÆµ„ÄÇ ÂÆ¢Êà∑Á´ØÁ™ÅÁÑ∂ÊåÇÊéâ‰∫ÜÊÄé‰πàÂäû Ê≠£Â∏∏ËøûÊé•Êó∂ÔºåÂÆ¢Êà∑Á´ØÁ™ÅÁÑ∂ÊåÇÊéâ‰∫ÜÔºåÂ¶ÇÊûúÊ≤°ÊúâÊé™ÊñΩÂ§ÑÁêÜËøôÁßçÊÉÖÂÜµÔºåÈÇ£‰πàÂ∞±‰ºöÂá∫Áé∞ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®Á´ØÂá∫Áé∞ÈïøÊó∂ÊúüÁöÑÁ©∫Èó≤„ÄÇ Ëß£ÂÜ≥ÂäûÊ≥ïÊòØÂú®ÊúçÂä°Âô®Á´ØËÆæÁΩÆ‰øùÊ¥ªËÆ°Êó∂Âô®ÔºåÊØèÂΩìÊúçÂä°Âô®Êî∂Âà∞ÂÆ¢Êà∑Á´ØÁöÑÊ∂àÊÅØÔºåÂ∞±Â∞ÜËÆ°Êó∂Âô®Â§ç‰Ωç„ÄÇË∂ÖÊó∂Êó∂Èó¥ÈÄöÂ∏∏ËÆæÁΩÆ‰∏∫2Â∞èÊó∂„ÄÇËã•ÊúçÂä°Âô®Ë∂ÖËøá2Â∞èÊó∂Ê≤°Êî∂Âà∞ÂÆ¢Êà∑ÁöÑ‰ø°ÊÅØÔºå‰ªñÂ∞±ÂèëÈÄÅÊé¢ÊµãÊä•ÊñáÊÆµ„ÄÇËã•ÂèëÈÄÅ‰∫Ü10‰∏™Êé¢ÊµãÊä•ÊñáÊÆµÔºåÊØè‰∏Ä‰∏™Áõ∏Èöî75ÁßíÔºåËøòÊ≤°ÊúâÂìçÂ∫îÂ∞±ËÆ§‰∏∫ÂÆ¢Êà∑Á´ØÂá∫‰∫ÜÊïÖÈöúÔºåÂõ†ËÄåÁªàÊ≠¢ËØ•ËøûÊé•„ÄÇ ÊªëÂä®Á™óÂè£ÂçèËÆÆ Âü∫Á°ÄÊ¶ÇÂøµ ÂèëÈÄÅÁ™óÂè£Ôºö‰ªªÊÑèÊó∂ÂàªÔºåÂèëÈÄÅÊñπÁª¥ÊåÅÁöÑ‰∏ÄÁªÑËøûÁª≠ÁöÑ„ÄÅÂÖÅËÆ∏ÂèëÈÄÅÂ∏ßÁöÑÂ∏ßÂ∫èÂè∑ÔºõÁî®‰∫éÂØπÂèëÈÄÅÊñπËøõË°åÊµÅÈáèÊéßÂà∂Ôºõ Êé•Êî∂Á™óÂè£Ôºö‰ªªÊÑèÊó∂ÂàªÔºåÊé•Êî∂ÊñπÁª¥ÊåÅÁöÑ‰∏ÄÁªÑËøûÁª≠ÁöÑ„ÄÅÂÖÅËÆ∏Êé•Êî∂Â∏ßÁöÑÂ∏ßÂ∫èÂè∑ÔºõÁî®‰∫éÊéßÂà∂ÂèØÊé•Êî∂Âì™‰∫õÊï∞ÊçÆÂ∏ß„ÄÅ‰∏çÂèØÊé•Êî∂Âì™‰∫õÊï∞ÊçÆÂ∏ßÔºåÊé•Êî∂ÊñπÂè™ÊúâÂΩìÊî∂Âà∞Êï∞ÊçÆÂ∏ßÁöÑÂ∫èÂè∑ËêΩÂÖ•Êé•Êî∂Á™óÂè£ÂÜÖÊâçÂÖÅËÆ∏Â∞ÜËØ•Êï∞ÊçÆÂ∏ßÊî∂‰∏ãÔºåÂê¶Âàô‰∏ÄÂæã‰∏¢ÂºÉ„ÄÇ Â∑•‰ΩúÂéüÁêÜ ÂèëÈÄÅÁ´Ø ÊØèÊî∂Âà∞‰∏Ä‰∏™Á°ÆËÆ§Â∏ßÔºåÂèëÈÄÅÁ™óÂè£Â∞±ÂêëÂâçÊªëÂä®‰∏Ä‰∏™Â∏ßÁöÑË∑ùÁ¶ª„ÄÇ ÂΩìÂèëÈÄÅÁ™óÂè£ÂÜÖÊó†ÂèØÂèëÈÄÅÁöÑÂ∏ßÊó∂ÔºàÂç≥Á™óÂè£ÂÜÖÁöÑÂ∏ßÂÖ®ÈÉ®ÊòØÂ∑≤ÂèëÈÄÅ‰ΩÜÊú™Êî∂Âà∞Á°ÆËÆ§ÁöÑÂ∏ßÔºâÔºåÂèëÈÄÅÊñπÂ∞±‰ºöÂÅúÊ≠¢ÂèëÈÄÅÔºåÁõ¥Âà∞Êî∂Âà∞Êé•Êî∂ÊñπÂèëÈÄÅÁöÑÁ°ÆËÆ§Â∏ß‰ΩøÁ™óÂè£ÁßªÂä®ÔºåÁ™óÂè£ÂÜÖÊúâÂèØ‰ª•ÂèëÈÄÅÁöÑÂ∏ßÔºå‰πãÂêéÊâçÂºÄÂßãÁªßÁª≠ÂèëÈÄÅ„ÄÇ Êé•Êî∂Á´Ø ÂΩìÊî∂Âà∞Êï∞ÊçÆÂ∏ßÂêéÔºåÂ∞ÜÁ™óÂè£ÂêëÂâçÁßªÂä®‰∏Ä‰∏™‰ΩçÁΩÆÔºåÂπ∂ÂèëÂõûÁ°ÆËÆ§Â∏ßÔºåËã•Êî∂Âà∞ÁöÑÊï∞ÊçÆÂ∏ßËêΩÂú®Êé•Êî∂Á™óÂè£‰πãÂ§ñÔºåÂàô‰∏ÄÂæã‰∏¢ÂºÉ„ÄÇ ÈáçË¶ÅÁâπÊÄß Âè™ÊúâÊé•Êî∂Á™óÂè£ÂêëÂâçÊªëÂä®„ÄÅÊé•Êî∂ÊñπÂèëÈÄÅ‰∫ÜÁ°ÆËÆ§Â∏ßÊó∂ÔºåÂèëÈÄÅÁ™óÂè£ÊâçÊúâÂèØËÉΩÔºàÂè™ÊúâÂèëÈÄÅÊñπÊî∂Âà∞Á°ÆËÆ§Â∏ßÊâçÊòØ‰∏ÄÂÆöÔºâÂêëÂâçÊªëÂä®„ÄÇ ÂÅúÊ≠¢-Á≠âÂæÖÂçèËÆÆ„ÄÅÂêéÈÄÄNÂ∏ßÂçèËÆÆ &amp; ÈÄâÊã©Èáç‰º†ÂçèËÆÆÂè™ÊòØÂú®ÂèëÈÄÅÁ™óÂè£Â§ßÂ∞èÂíåÊé•Êî∂Á™óÂè£Â§ßÂ∞è‰∏äÊúâÊâÄÂ∑ÆÂà´Ôºö ÂÅúÊ≠¢Á≠âÂæÖÂçèËÆÆÔºöÂèëÈÄÅÁ™óÂè£Â§ßÂ∞è=1ÔºåÊé•Êî∂Á™óÂè£Â§ßÂ∞è=1ÔºõÂç≥ ÂçïÂ∏ßÊªëÂä®Á™óÂè£ Á≠â‰∫é ÂÅúÊ≠¢-Á≠âÂæÖÂçèËÆÆ ÂêéÈÄÄNÂ∏ßÂçèËÆÆÔºöÂèëÈÄÅÁ™óÂè£Â§ßÂ∞è&gt;1ÔºåÊé•Êî∂Á™óÂè£Â§ßÂ∞è=1„ÄÇ ÈÄâÊã©Èáç‰º†ÂçèËÆÆÔºöÂèëÈÄÅÁ™óÂè£Â§ßÂ∞è&gt;1ÔºåÊé•Êî∂Á™óÂè£Â§ßÂ∞è&gt;1„ÄÇ ÂΩìÊé•Êî∂Á™óÂè£ÁöÑÂ§ßÂ∞è‰∏∫1Êó∂ÔºåÂèØ‰øùËØÅÂ∏ßÊúâÂ∫èÊé•Êî∂„ÄÇ Êï∞ÊçÆÈìæË∑ØÂ±ÇÁöÑÊªëÂä®Á™óÂè£ÂçèËÆÆ‰∏≠ÔºåÁ™óÂè£ÁöÑÂ§ßÂ∞èÂú®‰º†ËæìËøáÁ®ã‰∏≠ÊòØÂõ∫ÂÆöÁöÑÔºàÊ≥®ÊÑèË¶Å‰∏éTCPÁöÑÊªëÂä®Á™óÂè£ÂçèËÆÆÂå∫Âà´Ôºâ„ÄÇ Ëá™Âä®Èáç‰º†ËØ∑Ê±ÇÂçèËÆÆARQ ÂÆö‰πâ Auto Repeat reQuestÔºå‰º†ËæìÂá∫Áé∞Â∑ÆÈîôÊó∂ÔºåÊé•Êî∂ÊñπËá™Âä®ËØ∑Ê±ÇÂèëÈÄÅÊñπÈáç‰º†Âá∫ÈîôÁöÑÊï∞ÊçÆ„ÄÇ ‰ΩúÁî® ‰øùËØÅ‰ø°ÈÅìÁöÑÊï∞ÊçÆ‰º†ËæìÊó†Â∑ÆÈîô„ÄÇ Êú∫Âà∂ Á°ÆËÆ§Êú∫Âà∂ ÂèëÈÄÅÊñπÊØèÂèëÈÄÅ‰∏ÄÂ∏ßÔºåË¶ÅÁ≠âÂà∞Êé•Êî∂ÊñπÁöÑÂ∫îÁ≠î‰ø°Âè∑ÂêéÊâçËÉΩÂèëÈÄÅ‰∏ã‰∏ÄÂ∏ßÔºõ Êé•Êî∂ÊñπÊØèÊé•Êî∂‰∏ÄÂ∏ßÔºåÈÉΩË¶ÅÂèçÈ¶à‰∏Ä‰∏™Â∫îÁ≠î‰ø°Âè∑ÔºåË°®Á§∫ÂèØÊé•Êî∂‰∏ã‰∏ÄÂ∏ßÔºõ Ëã•Êé•Êî∂Êñπ‰∏çÂèçÈ¶àÂ∫îÁ≠î‰ø°Âè∑ÔºåÂàôÂèëÈÄÅÊñπÂøÖÈ°ª‰∏ÄÁõ¥Á≠âÂæÖ„ÄÇ Ë∂ÖÊó∂Èáç‰º†Êú∫Âà∂ ÂèëÈÄÅÊñπÂú®ÂèëÈÄÅÊüê‰∏™Êï∞ÊçÆÂ∏ßÂêéÂ∞±ÂºÄÂêØËÆ°Êó∂Âô®Ôºõ Âú®‰∏ÄÂÆöÊó∂Èó¥ÂÜÖËã•Ê≤°ÂæóÂà∞ÂèëÈÄÅÁöÑÊï∞ÊçÆÂ∏ßÁöÑÁ°ÆËÆ§Â∏ßÔºåÂàôÈáçÊñ∞ÊñπÊ≥ïËØ•Êï∞ÊçÆÂ∏ßÔºåÁõ¥Âà∞ÂèëÈÄÅÊàêÂäü‰∏∫Ê≠¢„ÄÇ Á±ªÂûã ÂÅúÁ≠âÂºèARQÔºàStop-and-WaitÔºâ ÂêéÈÄÄNÂ∏ßARQÔºàGo-Back-NÔºâ ÈÄâÊã©Èáç‰º†ARQÔºàSelective RepeatÔºâ ÂÅúÁ≠âÂºèARQÔºàStop-and-WaitÔºâ ÂéüÁêÜÔºö ÔºàÂçïÂ∏ßÊªëÂä®Á™óÂè£ÔºâÂÅúÊ≠¢ - Á≠âÂæÖÂçèËÆÆ + Ë∂ÖÊó∂Èáç‰º†ÔºåÂç≥ ÔºöÂèëÈÄÅÁ™óÂè£Â§ßÂ∞è=1„ÄÅÊé•Êî∂Á™óÂè£Â§ßÂ∞è=1 ÂÖ∑‰ΩìÊèèËø∞Ôºö ÂèëÈÄÅÊñπÊØèÂèëÈÄÅ‰∏ÄÂ∏ßÔºåË¶ÅÁ≠âÂà∞Êé•Êî∂ÊñπÁöÑÂ∫îÁ≠î‰ø°Âè∑ÂêéÊâçËÉΩÂèëÈÄÅ‰∏ã‰∏ÄÂ∏ßÔºõ Êé•Êî∂ÊñπÊØèÊé•Êî∂‰∏ÄÂ∏ßÔºåÈÉΩË¶ÅÂèçÈ¶à‰∏Ä‰∏™Â∫îÁ≠î‰ø°Âè∑ÔºåË°®Á§∫ÂèØÊé•‰∏ã‰∏ÄÂ∏ßÔºõ Ëã•Êé•Êî∂Êñπ‰∏çÂèçÈ¶àÂ∫îÁ≠î‰ø°Âè∑ÔºåÂàôÂèëÈÄÅÊñπÂøÖÈ°ª‰∏ÄÁõ¥Á≠âÂæÖ„ÄÇ ÂêéÈÄÄNÂ∏ßÂçèËÆÆ ÂéüÁêÜÔºö Â§öÂ∏ßÊªëÂä®Á™óÂè£ + Á¥ØËÆ°Á°ÆËÆ§ + ÂêéÈÄÄNÂ∏ß + Ë∂ÖÊó∂Èáç‰º†ÔºåÂç≥ ÔºöÂèëÈÄÅÁ™óÂè£Â§ßÂ∞è&gt;1„ÄÅÊé•Êî∂Á™óÂè£Â§ßÂ∞è=1 ÂÖ∑‰ΩìÊèèËø∞Ôºö ÂèëÈÄÅÊñπÔºöÈááÁî®Â§öÂ∏ßÊªëÂä®Á™óÂè£ÁöÑÂéüÁêÜÔºåÂèØËøûÁª≠ÂèëÈÄÅÂ§ö‰∏™Êï∞ÊçÆÂ∏ß ËÄå‰∏çÈúÄÁ≠âÂæÖÂØπÊñπÁ°ÆËÆ§ Êé•Êî∂ÊñπÔºöÈááÁî® Á¥ØËÆ°Á°ÆËÆ§ &amp; ÂêéÈÄÄNÂ∏ßÁöÑÂéüÁêÜÔºåÂè™ÂÖÅËÆ∏ÊåâÈ°∫Â∫èÊé•Êî∂Â∏ß„ÄÇ Á¥ØËÆ°Á°ÆËÆ§ Êî∂Âà∞Â§ö‰∏™Êï∞ÊçÆÂàÜÁªÑÂêéÔºåÂè™ÈúÄÂØπÊåâÂ∫èÂà∞ËææÁöÑÊúÄÂêé1‰∏™ÂàÜÁªÑÂèëÈÄÅÁ°ÆËÆ§ËÄå‰∏çÂøÖÂØπÊî∂Âà∞ÁöÑÊØè‰∏™ÂàÜÁªÑÈÄê‰∏™ÂèëÈÄÅÁ°ÆËÆ§Âç≥ÂèØË°®Á§∫Âà∞ËØ•ÂàÜÁªÑ‰∏∫Ê≠¢ÁöÑÊâÄÊúâÂàÜÁªÑÈÉΩÂ∑≤Ê≠£Á°ÆÊî∂Âà∞„ÄÇ ‰ºòÁÇπÔºöÂÆûÁé∞ÁÆÄÁ≠îÔºõÊï∞ÊçÆ‰∏¢Â§±‰∏çÂøÖÈáç‰º†„ÄÇ Áº∫ÁÇπÔºö‰∏çËÉΩÂêëÂèëÈÄÅÊñπÂèçÊò†Âá∫Êé•Êî∂ÊñπÂ∑≤Ê≠£Á°ÆÊî∂Âà∞ÊâÄÊúâÂàÜÁªÑ‰ø°ÊÅØ„ÄÇ ÂêéÈÄÄNÂ∏ß ÈÄÄÂõûÊù•Èáç‰º†Â∑≤ÂèëÈÄÅËøáÁöÑN‰∏™ÂàÜÁªÑ„ÄÇ‰øùËØÅÊåâÂ∫èÊé•Êî∂Êï∞ÊçÆÂ∏ß„ÄÇ ÂêéÈÄÄNÂ∏ßÂçèËÆÆÁöÑÊé•Âè£Á™óÂè£ÈïøÂ∫¶ = 1ÔºåËã•ÈááÁî®n‰∏™ÊØîÁâπÂØπÂ∏ßÁºñÂè∑ÔºåÂàôÂÖ∂ÂèëÈÄÅÁ™óÂè£WTÂ∫îÊª°Ë∂≥1‚â§WT‚â§2n-1;Ëã•ÂèëÈÄÅÁ™óÂè£Â∞∫ÂØ∏Â§ß‰∫é2n-1ÔºåÂàô‰ºöÈÄ†ÊàêÊé•Êî∂ÊñπÊó†Ê≥ïÂàÜËæ®Êñ∞Â∏ßÂíåÊóßÂ∏ß„ÄÇ ÈÄâÊã©Èáç‰º†ARQÔºàSelective RepeatÔºâ ÂéüÁêÜÔºö Â§öÂ∏ßÊªëÂä®Á™óÂè£ + Á¥ØËÆ°Á°ÆËÆ§ + ÂêéÈÄÄNÂ∏ß + Ë∂ÖÊó∂Èáç‰º†ÔºåÂç≥ ÔºöÂèëÈÄÅÁ™óÂè£Â§ßÂ∞è&gt;1„ÄÅÊé•Êî∂Á™óÂè£Â§ßÂ∞è&gt;1 ‰ºòÁº∫ÁÇπÔºö ‰ºòÁÇπÔºöÂõ†ËøûÁª≠ÂèëÈÄÅÊï∞ÊçÆÂ∏ßËÄåÊèêÈ´ò‰∫Ü‰ø°ÈÅìÁöÑÂà©Áî®ÁéáÔºõÁº∫ÁÇπÔºöÈáç‰º†Êó∂ÂèàÂøÖÈ°ªÊääÂéüÊù•Â∑≤Áªè‰º†ÈÄÅÊ≠£Á°ÆÁöÑÊï∞ÊçÆÂ∏ßËøõË°åÈáç‰º†Ôºà‰ªÖÂõ†‰∏∫Ëøô‰∫õÊï∞ÊçÆÂ∏ßÂâçÈù¢Êúâ‰∏Ä‰∏™Êï∞ÊçÆÂ∏ßÂá∫‰∫ÜÈîôÔºâÔºåÂ∞ÜÂØºËá¥‰º†ÈÄÅÊïàÁéáÈôç‰Ωé„ÄÇ TCPË∂ÖÊó∂Èáç‰º† Âú®ÂèëÈÄÅÊüê‰∏Ä‰∏™Êï∞ÊçÆ‰ª•ÂêéÂ∞±ÂºÄÂêØ‰∏Ä‰∏™ËÆ°Êó∂Âô®ÔºåÂú®‰∏ÄÂÆöÊó∂Èó¥ÂÜÖÂ¶ÇÊûúÊ≤°ÊúâÂæóÂà∞ÂèëÈÄÅÁöÑÊï∞ÊçÆÊä•ÁöÑACKÊä•ÊñáÔºåÈÇ£‰πàÂ∞±ÈáçÊñ∞ÂèëÈÄÅÊï∞ÊçÆÔºåÁõ¥Âà∞ÂèëÈÄÅÊàêÂäü‰∏∫Ê≠¢„ÄÇ ÂΩ±ÂìçË∂ÖÊó∂Èáç‰º†Êú∫Âà∂ÂçèËÆÆÊïàÁéáÁöÑ‰∏Ä‰∏™ÂÖ≥ÈîÆÂèÇÊï∞ÊòØÈáç‰º†Ë∂ÖÊó∂Êó∂Èó¥ÔºàRTOÔºåRetransmission TimeOutÔºâ„ÄÇRTOÁöÑÂÄºË¢´ËÆæÁΩÆËøáÂ§ßËøáÂ∞èÈÉΩ‰ºöÂØπÂçèËÆÆÈÄ†Êàê‰∏çÂà©ÂΩ±Âìç„ÄÇ Ôºà1ÔºâRTOËÆæÈïø‰∫ÜÔºåÈáçÂèëÂ∞±ÊÖ¢ÔºåÊ≤°ÊúâÊïàÁéáÔºåÊÄßËÉΩÂ∑Æ„ÄÇ Ôºà2ÔºâRTOËÆæÁü≠‰∫ÜÔºåÈáçÂèëÁöÑÂ∞±Âø´Ôºå‰ºöÂ¢ûÂä†ÁΩëÁªúÊã•Â°ûÔºåÂØºËá¥Êõ¥Â§öÁöÑË∂ÖÊó∂ÔºåÊõ¥Â§öÁöÑË∂ÖÊó∂ÂØºËá¥Êõ¥Â§öÁöÑÈáçÂèë„ÄÇ ËøûÊé•ÂæÄËøîÊó∂Èó¥ÔºàRTTÔºåRound Trip TimeÔºâÔºåÊåáÂèëÈÄÅÁ´Ø‰ªéÂèëÈÄÅTCPÂåÖÂºÄÂßãÂà∞Êé•Êî∂ÂÆÉÁöÑÁ´ãÂç≥ÂìçÂ∫îÊâÄÊ∂àËÄóÁöÑÊó∂Èó¥„ÄÇ RTOÁêÜËÆ∫‰∏äÊúÄÂ•ΩÊòØÁΩëÁªú RTT Êó∂Èó¥Ôºå‰ΩÜÂèàÂèóÂà∂‰∫éÁΩëÁªúË∑ùÁ¶ª‰∏éÁû¨ÊÄÅÊó∂Âª∂ÂèòÂåñÔºåÊâÄ‰ª•ÂÆûÈôÖ‰∏ä‰ΩøÁî®Ëá™ÈÄÇÂ∫îÁöÑÂä®ÊÄÅÁÆóÊ≥ïÔºà‰æãÂ¶Ç Jacobson ÁÆóÊ≥ïÂíå Karn ÁÆóÊ≥ïÁ≠âÔºâÊù•Á°ÆÂÆöË∂ÖÊó∂Êó∂Èó¥„ÄÇ TCPÊµÅÈáèÊéßÂà∂ TCPÊµÅÈáèÊéßÂà∂‰∏ªË¶ÅÊòØÈíàÂØπÊé•Êî∂Á´ØÁöÑÂ§ÑÁêÜÈÄüÂ∫¶‰∏çÂ¶ÇÂèëÈÄÅÁ´ØÂèëÈÄÅÈÄüÂ∫¶Âø´ÁöÑÈóÆÈ¢òÔºåÊ∂àÈô§ÂèëÈÄÅÊñπ‰ΩøÊé•Êî∂ÊñπÁºìÂ≠òÊ∫¢Âá∫ÁöÑÂèØËÉΩÊÄß„ÄÇ TCPÊµÅÈáèÊéßÂà∂‰∏ªË¶Å‰ΩøÁî®ÊªëÂä®Á™óÂè£ÂçèËÆÆÔºåÊªëÂä®Á™óÂè£ÊòØÊé•ÂèóÊï∞ÊçÆÁ´Ø‰ΩøÁî®ÁöÑÁ™óÂè£Â§ßÂ∞èÔºåÁî®Êù•ÂëäËØâÂèëÈÄÅÁ´ØÊé•Êî∂Á´ØÁöÑÁºìÂ≠òÂ§ßÂ∞èÔºå‰ª•Ê≠§ÂèØ‰ª•ÊéßÂà∂ÂèëÈÄÅÁ´ØÂèëÈÄÅÊï∞ÊçÆÁöÑÂ§ßÂ∞èÔºå‰ªéËÄåËææÂà∞ÊµÅÈáèÊéßÂà∂ÁöÑÁõÆÁöÑ„ÄÇ Êé•Êî∂Á´ØÈÄöËøáTCPÈ¶ñÈÉ®ÁöÑÁ™óÂè£Â§ßÂ∞èÂ≠óÊÆµÂèçÈ¶àÂΩìÂâçÂèØÊé•Êî∂ÁöÑÂ≠óËäÇÊï∞„ÄÇ ÂØπ‰∫éÂèëÈÄÅÁ´ØÁöÑÊï∞ÊçÆÁºìÂÜ≤Âå∫ÊúâËøô‰∫õÈáèÔºö LastByteSentÊòØÁõÆÂâçÂèëÈÄÅÁöÑÊúÄÂêé1Â≠óËäÇÁöÑÊï∞ÊçÆÁºñÂè∑Ôºõ LastByteAckdÊòØÁõÆÂâçÊé•Êî∂Âà∞Á°ÆËÆ§ÁöÑÊúÄÂêé1Â≠óËäÇÁöÑÊï∞ÊçÆÁºñÂè∑Ôºõ LastByteRcvdÔºöÊé•Êî∂Á´Ø‰ªéÁΩëÁªúÊé•Êî∂ÁöÑÊúÄÂêé‰∏Ä‰∏™Â≠óËäÇÂ∫èÂè∑Ôºõ LastByteReadÔºö‰∏äÂ±ÇÂ∫îÁî®Á®ãÂ∫èÊé•Êî∂ÁöÑÊúÄÂêé‰∏Ä‰∏™Â≠óËäÇÂ∫èÂè∑Ôºõ RcvwinÊòØÁ™óÂè£Â§ßÂ∞è„ÄÇ Èâ¥‰∫éÊØèÊ¨°ÂèëÈÄÅÊñπÈÉΩÊòØÊî∂Âà∞ACK‰πãÂêéÊªëÂä®Á™óÂè£ÁªßÁª≠ÂèëÈÄÅÔºåÂèëÈÄÅÂà∞LastByteSentËøô‰∏™‰ΩçÁΩÆÔºåLastByteSent-LastByteAckd‰πüÂ∞±ÊòØËøôÊ¨°ÂèëÈÄÅÊï∞ÊçÆÁöÑÂ§öÂ∞ëÔºåÈÇ£‰πàÂè™Ë¶ÅÊª°Ë∂≥ÔºöLastByteSent‚ÄìLastByteAckd&lt;=RcvWin(Êé•Êî∂Á´ØÁ©∫Èó≤Á™óÂè£Â§ßÂ∞è) Â∞±‰ºö‰øùËØÅ‰∏ç‰ºöÊ∫¢Âá∫‰∫Ü„ÄÇ ÈÇ£‰πàÊé•Êî∂Á´ØRcvWinÊÄé‰πàÁÆóÂë¢Ôºü ÂÅáËÆæÊé•Êî∂Á´ØÁºìÂÜ≤Âå∫Â§ßÂ∞è‰∏∫RcvBuffer,ÈÇ£‰πàLastByteRcvd‚ÄìLastByteReadÂ∞±ÊòØÂ∑≤ÁªèÊé•Âèó‰ΩÜÊòØËøòÊ≤°Êúâ‰º†ÈÄíÁªô‰∏äÂ±ÇÁöÑÊï∞ÊçÆ„ÄÇÊâÄ‰ª•Á©∫Èó≤Âå∫ÂüüRcvWin= RcvBuffer-(LastByteRcvd‚ÄìLastByteRead)„ÄÇ TCPÊã•Â°ûÊéßÂà∂ TCPÂèëÈÄÅÊñπÂèØËÉΩÂõ†‰∏∫IPÁΩëÁªúÁöÑÊã•Â°ûËÄåË¢´ÈÅèÂà∂ÔºåTCPÊã•Â°ûÊéßÂà∂Â∞±ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºàÊ≥®ÊÑèÂíåTCPÊµÅÈáèÊéßÂà∂ÁöÑÂå∫Âà´Ôºâ„ÄÇ TCPÊã•Â°ûÊéßÂà∂ÁöÑÂá†ÁßçÊñπÊ≥ïÔºöÊÖ¢ÂêØÂä®ÔºåÊã•Â°ûÈÅøÂÖçÔºåÂø´Èáç‰º†ÂíåÂø´ÊÅ¢Â§ç„ÄÇÂú®‰∫ÜËß£ËøôÂá†ÁßçÊñπÊ≥ï‰πãÂâçÔºåÂÖà‰∫ÜËß£‰∏ãÊã•Â°ûÁ™óÂè£„ÄÅÊÖ¢ÂºÄÂßãÁÆóÊ≥ï„ÄÅÊã•Â°ûÈÅøÂÖçÁÆóÊ≥ï„ÄÇ Êã•Â°ûÁ™óÂè£ ÂÆö‰πâ ÂèëÈÄÅÊñπÁª¥ÊåÅ‰∏Ä‰∏™Âè´ÂÅöÊã•Â°ûÁ™óÂè£ cwndÁöÑÁä∂ÊÄÅÂèòÈáè„ÄÇÊã•Â°ûÁ™óÂè£ÁöÑÂ§ßÂ∞èÂèñÂÜ≥‰∫éÁΩëÁªúÁöÑÊã•Â°ûÁ®ãÂ∫¶ÔºåÂπ∂‰∏îÂä®ÊÄÅÂèòÂåñ„ÄÇÂèëÈÄÅÊñπÁöÑËÆ©Ëá™Â∑±ÁöÑÂèëÈÄÅÁ™óÂè£=min(cwndÔºåÊé•ÂèóÁ´ØÊé•Êî∂Á™óÂè£Â§ßÂ∞èÔºâ„ÄÇ ÂèëÈÄÅÊñπÊéßÂà∂Êã•Â°ûÁ™óÂè£ÁöÑÂéüÂàô Âè™Ë¶ÅÁΩëÁªúÊ≤°ÊúâÂá∫Áé∞Êã•Â°ûÔºåÊã•Â°ûÁ™óÂè£Â∞±Â¢ûÂ§ß‰∏Ä‰∫õÔºå‰ª•‰æøÊääÊõ¥Â§öÁöÑÂàÜÁªÑÂèëÈÄÅÂá∫Âéª„ÄÇ‰ΩÜÂè™Ë¶ÅÁΩëÁªúÂá∫Áé∞Êã•Â°ûÔºåÊã•Â°ûÁ™óÂè£Â∞±ÂáèÂ∞è‰∏Ä‰∫õÔºå‰ª•ÂáèÂ∞ëÊ≥®ÂÖ•Âà∞ÁΩëÁªú‰∏≠ÁöÑÂàÜÁªÑÊï∞„ÄÇ ÊÖ¢ÂºÄÂßãÁÆóÊ≥ï ÂΩì‰∏ªÊú∫ÂºÄÂßãÂèëÈÄÅÊï∞ÊçÆÊó∂ÔºåÂ¶ÇÊûúÁ´ãÂç≥Â∞ÜÂ§ßÈáèÊï∞ÊçÆÂ≠óËäÇÊ≥®ÂÖ•Âà∞ÁΩëÁªúÔºåÈÇ£‰πàÂ∞±ÊúâÂèØËÉΩÂºïËµ∑ÁΩëÁªúÊã•Â°ûÔºåÂõ†‰∏∫Áé∞Âú®Âπ∂‰∏çÊ∏ÖÊ•öÁΩëÁªúÁöÑË¥üËç∑ÊÉÖÂÜµ„ÄÇÂõ†Ê≠§ÔºåËæÉÂ•ΩÁöÑÊñπÊ≥ïÊòØ ÂÖàÊé¢Êµã‰∏Ä‰∏ãÔºåÂç≥Áî±Â∞èÂà∞Â§ßÈÄêÊ∏êÂ¢ûÂ§ßÂèëÈÄÅÁ™óÂè£Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÁî±Â∞èÂà∞Â§ßÈÄêÊ∏êÂ¢ûÂ§ßÊã•Â°ûÁ™óÂè£Êï∞ÂÄº„ÄÇ ÈÄöÂ∏∏Âú®ÂàöÂàöÂºÄÂßãÂèëÈÄÅÊä•ÊñáÊÆµÊó∂ÔºåÂÖàÊääÊã•Â°ûÁ™óÂè£ cwnd ËÆæÁΩÆ‰∏∫‰∏Ä‰∏™ÊúÄÂ§ßÊä•ÊñáÊÆµMSSÁöÑÊï∞ÂÄº„ÄÇËÄåÂú®ÊØèÊî∂Âà∞‰∏Ä‰∏™ÂØπÊñ∞ÁöÑÊä•ÊñáÊÆµÁöÑÁ°ÆËÆ§ÂêéÔºåÊääÊã•Â°ûÁ™óÂè£Â¢ûÂä†Ëá≥Â§ö‰∏Ä‰∏™MSSÁöÑÊï∞ÂÄº„ÄÇÁî®ËøôÊ†∑ÁöÑÊñπÊ≥ïÈÄêÊ≠•Â¢ûÂ§ßÂèëÈÄÅÊñπÁöÑÊã•Â°ûÁ™óÂè£ cwnd ÔºåÂèØ‰ª•‰ΩøÂàÜÁªÑÊ≥®ÂÖ•Âà∞ÁΩëÁªúÁöÑÈÄüÁéáÊõ¥Âä†ÂêàÁêÜ„ÄÇ ÊØèÁªèËøá‰∏Ä‰∏™‰º†ËæìËΩÆÊ¨°ÔºåÊã•Â°ûÁ™óÂè£ cwnd Â∞±Âä†ÂÄç„ÄÇ‰∏Ä‰∏™‰º†ËæìËΩÆÊ¨°ÊâÄÁªèÂéÜÁöÑÊó∂Èó¥ÂÖ∂ÂÆûÂ∞±ÊòØÂæÄËøîÊó∂Èó¥RTT„ÄÇ‰∏çËøá‚Äú‰º†ËæìËΩÆÊ¨°‚ÄùÊõ¥Âä†Âº∫Ë∞ÉÔºöÊääÊã•Â°ûÁ™óÂè£cwndÊâÄÂÖÅËÆ∏ÂèëÈÄÅÁöÑÊä•ÊñáÊÆµÈÉΩËøûÁª≠ÂèëÈÄÅÂá∫ÂéªÔºåÂπ∂Êî∂Âà∞‰∫ÜÂØπÂ∑≤ÂèëÈÄÅÁöÑÊúÄÂêé‰∏Ä‰∏™Â≠óËäÇÁöÑÁ°ÆËÆ§„ÄÇ ÊÖ¢ÂºÄÂßãÁöÑ‚ÄúÊÖ¢‚ÄùÂπ∂‰∏çÊòØÊåácwndÁöÑÂ¢ûÈïøÈÄüÁéáÊÖ¢ÔºåËÄåÊòØÊåáÂú®TCPÂºÄÂßãÂèëÈÄÅÊä•ÊñáÊÆµÊó∂ÂÖàËÆæÁΩÆcwnd=1Ôºå‰ΩøÂæóÂèëÈÄÅÊñπÂú®ÂºÄÂßãÊó∂Âè™ÂèëÈÄÅ‰∏Ä‰∏™Êä•ÊñáÊÆµÔºàÁõÆÁöÑÊòØËØïÊé¢‰∏Ä‰∏ãÁΩëÁªúÁöÑÊã•Â°ûÊÉÖÂÜµÔºâÔºåÁÑ∂ÂêéÂÜçÈÄêÊ∏êÂ¢ûÂ§ßcwnd„ÄÇ ‰∏∫‰∫ÜÈò≤Ê≠¢Êã•Â°ûÁ™óÂè£cwndÂ¢ûÈïøËøáÂ§ßÂºïËµ∑ÁΩëÁªúÊã•Â°ûÔºåËøòÈúÄË¶ÅËÆæÁΩÆ‰∏Ä‰∏™ÊÖ¢ÂºÄÂßãÈó®ÈôêssthreshÁä∂ÊÄÅÂèòÈáè„ÄÇÊÖ¢ÂºÄÂßãÈó®ÈôêssthreshÁöÑÁî®Ê≥ïÂ¶Ç‰∏ãÔºö ÂΩì cwnd &lt; ssthresh Êó∂Ôºå‰ΩøÁî®‰∏äËø∞ÁöÑÊÖ¢ÂºÄÂßãÁÆóÊ≥ï„ÄÇ ÂΩì cwnd &gt; ssthresh Êó∂ÔºåÂÅúÊ≠¢‰ΩøÁî®ÊÖ¢ÂºÄÂßãÁÆóÊ≥ïËÄåÊîπÁî®Êã•Â°ûÈÅøÂÖçÁÆóÊ≥ï„ÄÇ ÂΩì cwnd = ssthresh Êó∂ÔºåÊó¢ÂèØ‰ΩøÁî®ÊÖ¢ÂºÄÂßãÁÆóÊ≥ïÔºå‰πüÂèØ‰ΩøÁî®Êã•Â°ûÊéßÂà∂ÈÅøÂÖçÁÆóÊ≥ï„ÄÇ Êã•Â°ûÈÅøÂÖçÁÆóÊ≥ï ËÆ©Êã•Â°ûÁ™óÂè£cwndÁºìÊÖ¢Âú∞Â¢ûÂ§ßÔºåÂç≥ÊØèÁªèËøá‰∏Ä‰∏™ÂæÄËøîÊó∂Èó¥RTTÂ∞±ÊääÂèëÈÄÅÊñπÁöÑÊã•Â°ûÁ™óÂè£cwndÂä†1ÔºåËÄå‰∏çÊòØÂä†ÂÄç„ÄÇËøôÊ†∑Êã•Â°ûÁ™óÂè£cwndÊåâÁ∫øÊÄßËßÑÂæãÁºìÊÖ¢Â¢ûÈïøÔºåÊØîÊÖ¢ÂºÄÂßãÁÆóÊ≥ïÁöÑÊã•Â°ûÁ™óÂè£Â¢ûÈïøÈÄüÁéáÁºìÊÖ¢ÂæóÂ§ö„ÄÇ Êã•Â°ûÈÅøÂÖçÂπ∂‰∏çÂèØÈÅøÂÖçÊã•Â°ûÔºåÂè™ÊòØÂ∞ÜÊã•Â°ûÁ™óÂè£ÊåâÁé∞Ë°åËßÑÂæãÁºìÊÖ¢Â¢ûÈïøÔºå‰ΩøÂæóÁΩëÁªúÊØîËæÉ‰∏çÂÆπÊòìÂá∫Áé∞Êã•Â°û„ÄÇ ÊÖ¢ÂºÄÂßãÂíåÊã•Â°ûÈÅøÂÖçÁÆóÊ≥ïÁöÑÂÆûÁé∞‰∏æ‰æã Êó†ËÆ∫Âú®ÊÖ¢ÂºÄÂßãÈò∂ÊÆµËøòÊòØÂú®Êã•Â°ûÈÅøÂÖçÈò∂ÊÆµÔºåÂè™Ë¶ÅÂèëÈÄÅÊñπÂà§Êñ≠ÁΩëÁªúÂá∫Áé∞Êã•Â°ûÔºàÂÖ∂Ê†πÊçÆÂ∞±ÊòØÊ≤°ÊúâÊî∂Âà∞Á°ÆËÆ§ÔºâÔºåÂ∞±Ë¶ÅÊääÊÖ¢ÂºÄÂßãÈó®ÈôêssthreshËÆæÁΩÆ‰∏∫Âá∫Áé∞Êã•Â°ûÊó∂ÁöÑÂèëÈÄÅ ÊñπÁ™óÂè£ÂÄºÁöÑ‰∏ÄÂçäÔºà‰ΩÜ‰∏çËÉΩÂ∞è‰∫é2Ôºâ„ÄÇÁÑ∂ÂêéÊääÊã•Â°ûÁ™óÂè£cwndÈáçÊñ∞ËÆæÁΩÆ‰∏∫1ÔºåÊâßË°åÊÖ¢ÂºÄÂßãÁÆóÊ≥ï„ÄÇËøôÊ†∑ÂÅöÁöÑÁõÆÁöÑÂ∞±ÊòØË¶ÅËøÖÈÄüÂáèÂ∞ë‰∏ªÊú∫ÂèëÈÄÅÂà∞ÁΩëÁªú‰∏≠ÁöÑÂàÜÁªÑÊï∞Ôºå‰ΩøÂæóÂèëÁîü Êã•Â°ûÁöÑË∑ØÁî±Âô®ÊúâË∂≥Â§üÊó∂Èó¥ÊääÈòüÂàó‰∏≠ÁßØÂéãÁöÑÂàÜÁªÑÂ§ÑÁêÜÂÆåÊØï„ÄÇ Â¶Ç‰∏ãÂõæÔºåÁî®ÂÖ∑‰ΩìÊï∞ÂÄºËØ¥Êòé‰∫Ü‰∏äËø∞Êã•Â°ûÊéßÂà∂ÁöÑËøáÁ®ã„ÄÇÁé∞Âú®ÂèëÈÄÅÁ™óÂè£ÁöÑÂ§ßÂ∞èÂíåÊã•Â°ûÁ™óÂè£‰∏ÄÊ†∑Â§ß„ÄÇ ËøáÁ®ãËØ¥ÊòéÔºö ÂΩìTCPËøûÊé•ËøõË°åÂàùÂßãÂåñÊó∂ÔºåÊääÊã•Â°ûÁ™óÂè£cwndÁΩÆ‰∏∫1„ÄÇ‰∏∫‰∫Ü‰æø‰∫éÁêÜËß£ÔºåÂõæ‰∏≠ÁöÑÁ™óÂè£Âçï‰Ωç‰∏ç‰ΩøÁî®Â≠óËäÇËÄå‰ΩøÁî®Êä•ÊñáÊÆµÁöÑ‰∏™Êï∞„ÄÇÊÖ¢ÂºÄÂßãÈó®ÈôêÁöÑÂàùÂßãÂÄºËÆæÁΩÆ‰∏∫16‰∏™Êä•ÊñáÊÆµÔºåÂç≥ ssthresh= 16 „ÄÇÂú®ÊâßË°åÊÖ¢ÂºÄÂßãÁÆóÊ≥ïÊó∂ÔºåÊã•Â°ûÁ™óÂè£ cwnd ÁöÑÂàùÂßãÂÄº‰∏∫1„ÄÇ‰ª•ÂêéÂèëÈÄÅÊñπÊØèÊî∂Âà∞‰∏Ä‰∏™ÂØπÊñ∞Êä•ÊñáÊÆµÁöÑÁ°ÆËÆ§ACKÔºåÂ∞±ÊääÊã•Â°ûÁ™óÂè£ÂÄºÂä†1ÔºåÁÑ∂ÂêéÂºÄÂßã‰∏ã‰∏ÄËΩÆÁöÑ‰º†ËæìÔºàÂõæ‰∏≠Ê®™ÂùêÊ†á‰∏∫‰º†ËæìËΩÆÊ¨°Ôºâ„ÄÇÂõ†Ê≠§Êã•Â°ûÁ™óÂè£cwnd ÈöèÁùÄ‰º†ËæìËΩÆÊ¨°ÊåâÊåáÊï∞ËßÑÂæãÂ¢ûÈïø„ÄÇÂΩìÊã•Â°ûÁ™óÂè£cwndÂ¢ûÈïøÂà∞ÊÖ¢ÂºÄÂßãÈó®ÈôêÂÄºssthreshÊó∂ÔºàÂç≥ÂΩìcwnd=16Êó∂ÔºâÔºåÂ∞±Êîπ‰∏∫ÊâßË°åÊã•Â°ûÊéßÂà∂ÁÆóÊ≥ïÔºåÊã•Â°ûÁ™óÂè£ÊåâÁ∫øÊÄßËßÑÂæãÂ¢ûÈïø„ÄÇÂÅáÂÆöÊã•Â°ûÁ™óÂè£ÁöÑÊï∞ÂÄºÂ¢ûÈïøÂà∞24Êó∂ÔºåÁΩëÁªúÂá∫Áé∞Ë∂ÖÊó∂ÔºàËøôÂæàÂèØËÉΩÂ∞±ÊòØÁΩëÁªúÂèëÁîüÊã•Â°û‰∫ÜÔºâ„ÄÇÊõ¥Êñ∞ÂêéÁöÑssthreshÂÄºÂèò‰∏∫12ÔºàÂç≥Âèò‰∏∫Âá∫Áé∞Ë∂ÖÊó∂Êó∂ÁöÑÊã•Â°ûÁ™óÂè£Êï∞ÂÄº 24ÁöÑ‰∏ÄÂçäÔºâÔºåÊã•Â°ûÁ™óÂè£ÂÜçÈáçÊñ∞ËÆæÁΩÆ‰∏∫1ÔºåÂπ∂ÊâßË°åÊÖ¢ÂºÄÂßãÁÆóÊ≥ï„ÄÇÂΩìcwnd=ssthresh=12Êó∂Êîπ‰∏∫ÊâßË°åÊã•Â°ûÈÅøÂÖçÁÆóÊ≥ïÔºåÊã•Â°ûÁ™óÂè£ÊåâÁ∫øÊÄßËßÑÂæãÂ¢ûÈïøÔºåÊØèÁªèËøá ‰∏Ä‰∏™ÂæÄËøîÊó∂Èó¥Â¢ûÂä†‰∏Ä‰∏™MSSÁöÑÂ§ßÂ∞è„ÄÇÂº∫Ë∞ÉÔºö‚ÄúÊã•Â°ûÈÅøÂÖç‚ÄùÂπ∂ÈùûÊåáÂÆåÂÖ®ËÉΩÂ§üÈÅøÂÖç‰∫ÜÊã•Â°û„ÄÇÂà©Áî®‰ª•‰∏äÁöÑÊé™ÊñΩË¶ÅÂÆåÂÖ®ÈÅøÂÖçÁΩëÁªúÊã•Â°ûËøòÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇ‚ÄúÊã•Â°ûÈÅøÂÖç‚ÄùÊòØËØ¥Âú®Êã•Â°ûÈÅøÂÖçÈò∂ÊÆµÂ∞ÜÊã•Â°ûÁ™óÂè£ÊéßÂà∂‰∏∫ÊåâÁ∫øÊÄßËßÑÂæãÂ¢ûÈïøÔºå‰ΩøÁΩëÁªúÊØîËæÉ‰∏çÂÆπÊòìÂá∫Áé∞Êã•Â°û„ÄÇ Âø´Èáç‰º† ÂéüÁêÜ Êé•Êî∂ÊñπÔºöÊØèÊî∂Âà∞‰∏Ä‰∏™Â§±Â∫èÁöÑÊä•ÊñáÊÆµÂêé Â∞±Á´ãÂç≥ÂèëÂá∫ÈáçÂ§çÁ°ÆËÆ§Ôºà‰∏∫ÁöÑÊòØ‰ΩøÂèëÈÄÅÊñπÂèäÊó©Áü•ÈÅìÊúâÊä•ÊñáÊÆµÊ≤°ÊúâÂà∞ËææÂØπÊñπÔºâÔºåËÄå‰∏çË¶ÅÁ≠âÂà∞Ëá™Â∑±ÂèëÈÄÅÊï∞ÊçÆÊó∂ÊâçËøõË°åÊçéÂ∏¶Á°ÆËÆ§„ÄÇ ÂèëÈÄÅÊñπÔºöÂè™Ë¶Å‰∏ÄËøûÊî∂Âà∞3‰∏™ÈáçÂ§çÁ°ÆËÆ§Â∞±Á´ãÂç≥Èáç‰º†ÂØπÊñπÂ∞öÊú™Êî∂Âà∞ÁöÑÊä•ÊñáÊÆµÔºåËÄå‰∏çÂøÖÁªßÁª≠Á≠âÂæÖËÆæÁΩÆÁöÑÈáç‰º†ËÆ°Êó∂Âô®Âà∞Êúü„ÄÇ ‰ΩúÁî® Áî±‰∫éÂèëÈÄÅÊñπÂ∞ΩÊó©Èáç‰º†Êú™Ë¢´Á°ÆËÆ§ÁöÑÊä•ÊñáÊÆµÔºåÂõ†Ê≠§ÈááÁî®Âø´Èáç‰º†ÂêéÂèØ‰ª•‰ΩøÊï¥‰∏™ÁΩëÁªúÂêûÂêêÈáèÊèêÈ´òÁ∫¶20%„ÄÇ Á§∫‰æã Âø´ÊÅ¢Â§ç ‰∏éÂø´Èáç‰º†ÈÖçÂêà‰ΩøÁî®ÁöÑËøòÊúâÂø´ÊÅ¢Â§çÁÆóÊ≥ïÔºåÂÖ∂‰∏ªË¶ÅÊúâ‰ª•‰∏ã‰∏§‰∏™Ë¶ÅÁÇπÔºö ÂΩìÂèëÈÄÅÊñπËøûÁª≠Êî∂Âà∞Êé•Êî∂ÊñπÂèëÊù•ÁöÑ‰∏â‰∏™ÈáçÂ§çÁ°ÆËÆ§Êó∂ÔºåÂ∞±ÊâßË°å‚Äú‰πòÊ≥ïÂáèÂ∞è‚ÄùÁÆóÊ≥ïÔºåÊääÊÖ¢ÂºÄÂßãÈó®ÈôêÂáèÂçäÔºàËøô‰∏™ÂáèÂçäÊåáÁöÑÊòØÂèòÊàêÂèëÁîüÈòªÂ°ûÊó∂ÁöÑÈòªÂ°ûÁ™óÂè£Â§ßÂ∞èÁöÑ‰∏ÄÂçäÔºâÔºåËøôÊòØ‰∏∫‰∫ÜÈ¢ÑÈò≤ÁΩëÁªúÂèëÁîüÊã•Â°û„ÄÇÔºàÊ≥®ÊÑèÔºöÊé•‰∏ãÊù•‰∏çÊâßË°åÊÖ¢ÂºÄÂßãÁÆóÊ≥ïÔºâ Áî±‰∫éÂèëÈÄÅÊñπÁé∞Âú®ËÆ§‰∏∫ÁΩëÁªúÂæàÂèØËÉΩÊ≤°ÊúâÂèëÁîüÊã•Â°ûÔºåÂõ†Ê≠§Áé∞Âú®‰∏çÊâßË°åÊÖ¢ÂºÄÂßãÁÆóÊ≥ïÔºåËÄåÊòØÊääcwnd(Êã•Â°ûÁ™óÂè£)ÂÄºËÆæÁΩÆ‰∏∫ÊÖ¢ÂºÄÂßãÈó®ÈôêÂáèÂçäÂêéÁöÑÂÄºÔºåÁÑ∂ÂêéÂºÄÂßãÊâßË°åÊã•Â°ûÈÅøÂÖçÁÆóÊ≥ïÔºå‰ΩøÊã•Â°ûÁ™óÂè£ÁºìÊÖ¢ÁöÑÁ∫øÊÄßÂ¢ûÂ§ß„ÄÇ Ê≥®ÔºöÁî±‰∫éË∑≥Ëøá‰∫ÜÊã•Â°ûÁ™óÂè£ÔºàcwndÔºâ‰ªé1Ëµ∑ÂßãÁöÑÊÖ¢ÂºÄÂßãËøáÁ®ãÔºåÊâÄ‰ª•Áß∞‰∏∫ÔºöÂø´ÊÅ¢Â§ç„ÄÇ Ê≠§Â§ÑÁΩëÁªú‰∏ç‰ºöÂèëÁîüÁΩëÁªúÊã•Â°ûÔºåÂõ†Ëã•Êã•Â°ûÔºåÂàô‰∏ç‰ºöÊî∂Âà∞Â§ö‰∏™ÈáçÂ§çÁ°ÆËÆ§Êä•Êñá„ÄÇ Á§∫‰æãÂ¶Ç‰∏ãÂõæÔºö TCPÂõõÁßçËÆ°Êó∂Âô® TCP‰∏≠ÊúâÂõõÁßçËÆ°Êó∂Âô®ÔºàTimerÔºâÔºåÂàÜÂà´‰∏∫Ôºö Èáç‰º†ËÆ°Êó∂Âô®ÔºöRetransmission Timer ÂùöÊåÅËÆ°Êó∂Âô®ÔºöPersistent Timer ‰øùÊ¥ªËÆ°Êó∂Âô®ÔºöKeeplive Timer Êó∂Èó¥Á≠âÂæÖËÆ°Êó∂Âô®ÔºöTimer_Wait Timer Èáç‰º†ËÆ°Êó∂Âô® TCPÊòØÂèØ‰ª•‰øùËØÅÊï∞ÊçÆÂèØÈù†‰º†ËæìÁöÑ„ÄÇÊÄé‰πà‰øùËØÅÂë¢ÔºüÂ∏¶Á°ÆËÆ§ÁöÑÈáç‰º†Êú∫Âà∂„ÄÇ Âú®ÊªëÂä®Á™óÂè£ÂçèËÆÆ‰∏≠ÔºåÊé•Êî∂Á™óÂè£‰ºöÂú®ËøûÁª≠Êî∂Âà∞ÁöÑÂåÖÂ∫èÂàó‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™ÂåÖÂêëÊé•Êî∂Á´ØÂèëÈÄÅ‰∏Ä‰∏™ACKÔºåÂΩìÁΩëÁªúÊã•Â†µÁöÑÊó∂ÂÄôÔºåÂèëÈÄÅÁ´ØÁöÑÊï∞ÊçÆÂåÖÂíåÊé•Êî∂Á´ØÁöÑACKÂåÖÈÉΩÊúâÂèØËÉΩ‰∏¢Â§±„ÄÇ TCP‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆÂèØÈù†‰º†ËæìÔºåÂ∞±ËßÑÂÆöÂú®Èáç‰º†ÁöÑ‚ÄúÊó∂Èó¥Áâá‚ÄùÂà∞‰∫Ü‰ª•ÂêéÔºåÂ¶ÇÊûúËøòÊ≤°ÊúâÊî∂Âà∞ÂØπÊñπÁöÑACKÔºåÂ∞±ÈáçÂèëÊ≠§ÂåÖÔºå‰ª•ÈÅøÂÖçÈô∑ÂÖ•Êó†ÈôêÁ≠âÂæÖ‰∏≠„ÄÇ ÂΩìTCPÂèëÈÄÅÊä•ÊñáÊÆµÊó∂ÔºåÂ∞±ÂàõÂª∫ËØ•ÁâπÂÆöÊä•ÊñáÁöÑÈáç‰º†ËÆ°Êó∂Âô®„ÄÇÂèØËÉΩÂèëÁîü‰∏§ÁßçÊÉÖÂÜµÔºö 1ÔºâËã•Âú®ËÆ°Êó∂Âô®Êà™Ê≠¢Êó∂Èó¥Âà∞‰πãÂâçÊî∂Âà∞‰∫ÜÂØπÊ≠§ÁâπÂÆöÊä•ÊñáÊÆµÁöÑÁ°ÆËÆ§ÔºåÂàôÊí§ÈîÄÊ≠§ËÆ°Êó∂Âô®„ÄÇ 2ÔºâËã•Âú®Êî∂Âà∞‰∫ÜÂØπÊ≠§ÁâπÂÆöÊä•ÊñáÊÆµÁöÑÁ°ÆËÆ§‰πãÂâçËÆ°Êó∂Âô®Êà™Ê≠¢Êó∂Èó¥Âà∞ÔºåÂàôÈáç‰º†Ê≠§Êä•ÊñáÊÆµÔºåÂπ∂Â∞ÜËÆ°Êó∂Âô®Â§ç‰Ωç„ÄÇ ÂùöÊåÅËÆ°Êó∂Âô® ‰∏ìÈó®ÂØπ‰ªòÈõ∂Á™óÂè£ÈÄöÁü•ËÄåËÆæÁ´ãÁöÑ„ÄÇ ÂÖàÊù•ËÄÉËôë‰∏Ä‰∏ãÊÉÖÊôØÔºö ÂèëÈÄÅÁ´ØÂêëÊé•Êî∂Á´ØÂèëÈÄÅÊï∞ÊçÆÂåÖÁü•ÈÅìÊé•Êî∂Á™óÂè£Â°´Êª°‰∫ÜÔºåÁÑ∂ÂêéÊé•Êî∂Á™óÂè£ÂëäËØâÂèëÈÄÅÊñπÊé•Êî∂Á™óÂè£Â°´Êª°‰∫ÜÂÅúÊ≠¢ÂèëÈÄÅÊï∞ÊçÆ„ÄÇÊ≠§Êó∂ÁöÑÁä∂ÊÄÅÁß∞‰∏∫‚ÄúÈõ∂Á™óÂè£‚ÄùÁä∂ÊÄÅÔºåÂèëÈÄÅÁ´ØÂíåÊé•Êî∂Á´ØÁ™óÂè£Â§ßÂ∞èÂùá‰∏∫0.Áõ¥Âà∞Êé•ÂèóTCPÂèëÈÄÅÁ°ÆËÆ§Âπ∂ÂÆ£Â∏É‰∏Ä‰∏™ÈùûÈõ∂ÁöÑÁ™óÂè£Â§ßÂ∞è„ÄÇ‰ΩÜËøô‰∏™Á°ÆËÆ§‰ºö‰∏¢Â§±„ÄÇ Êàë‰ª¨Áü•ÈÅìTCP‰∏≠ÔºåÂØπÁ°ÆËÆ§ÊòØ‰∏çÈúÄË¶ÅÂèëÈÄÅÁ°ÆËÆ§ÁöÑ„ÄÇËã•Á°ÆËÆ§‰∏¢Â§±‰∫ÜÔºåÊé•ÂèóTCPÂπ∂‰∏çÁü•ÈÅìÔºåËÄåÊòØ‰ºöËÆ§‰∏∫‰ªñÂ∑≤ÁªèÂÆåÊàê‰∫Ü‰ªªÂä°ÔºåÂπ∂Á≠âÂæÖÁùÄÂèëÈÄÅTCPÊé•ÁùÄ‰ºöÂèëÈÄÅÊõ¥Â§öÁöÑÊä•ÊñáÊÆµ„ÄÇ ‰ΩÜÂèëÈÄÅTCPÁî±‰∫éÊ≤°ÊúâÊî∂Âà∞Á°ÆËÆ§ÔºåÂ∞±Á≠âÂæÖÂØπÊñπÂèëÈÄÅÁ°ÆËÆ§Êù•ÈÄöÁü•Á™óÂè£Â§ßÂ∞è„ÄÇÂèåÊñπÁöÑTCPÈÉΩÂú®Ê∞∏ËøúÁöÑÁ≠âÂæÖÁùÄÂØπÊñπ„ÄÇ Ë¶ÅÊâìÂºÄËøôÁßçÊ≠ªÈîÅÔºåTCP‰∏∫ÊØè‰∏Ä‰∏™ÈìæÊé•‰ΩøÁî®‰∏Ä‰∏™ÊåÅ‰πÖËÆ°Êó∂Âô®„ÄÇÂΩìÂèëÈÄÅTCPÊî∂Âà∞Á™óÂè£Â§ßÂ∞è‰∏∫0ÁöÑÁ°ÆËÆ§Êó∂ÔºåÂ∞±ÂùöÊåÅÂêØÂä®ËÆ°Êó∂Âô®„ÄÇÂΩìÂùöÊåÅËÆ°Êó∂Âô®ÊúüÈôêÂà∞Êó∂ÔºåÂèëÈÄÅTCPÂ∞±ÂèëÈÄÅ‰∏Ä‰∏™ÁâπÊÆäÁöÑÊä•ÊñáÊÆµÔºåÂè´ÂÅöÊé¢ÊµãÊä•Êñá„ÄÇ Ëøô‰∏™Êä•ÊñáÊÆµÂè™Êúâ‰∏Ä‰∏™Â≠óËäÇÁöÑÊï∞ÊçÆ„ÄÇ‰ªñÊúâ‰∏Ä‰∏™Â∫èÂè∑Ôºå‰ΩÜ‰ªñÁöÑÂ∫èÂè∑Ê∞∏Ëøú‰∏çÈúÄË¶ÅÁ°ÆËÆ§ÔºõÁîöËá≥Âú®ËÆ°ÁÆóÊú∫ÂØπÂÖ∂‰ªñÈÉ®ÂàÜÁöÑÊï∞ÊçÆÁöÑÁ°ÆËÆ§Êó∂ËØ•Â∫èÂè∑‰πüË¢´ÂøΩÁï•„ÄÇÊé¢ÊµãÊä•ÊñáÊÆµÊèêÈÜíÊé•ÂèóTCPÔºöÁ°ÆËÆ§Â∑≤‰∏¢Â§±ÔºåÂøÖÈ°ªÈáç‰º†„ÄÇ ÂùöÊåÅËÆ°Êó∂Âô®ÁöÑÂÄºËÆæÁΩÆ‰∏∫Èáç‰º†Êó∂Èó¥ÁöÑÊï∞ÂÄº„ÄÇ‰ΩÜÊòØÔºåËã•Ê≤°ÊúâÊî∂Âà∞‰ªéÊé•Êî∂Á´ØÊù•ÁöÑÂìçÂ∫îÔºåÂàôÈúÄÂèëÈÄÅÂè¶‰∏Ä‰∏™Êé¢ÊµãÊä•ÊñáÊÆµÔºåÂπ∂Â∞ÜÂùöÊåÅËÆ°Êó∂Âô®ÁöÑÂÄºÂä†ÂÄçÂíåÂ§ç‰Ωç„ÄÇ ÂèëÈÄÅÁ´ØÁªßÁª≠ÂèëÈÄÅÊé¢ÊµãÊä•ÊñáÊÆµÔºåÂ∞ÜÂùöÊåÅËÆ°Êó∂Âô®ËÆæÂÆöÁöÑÂÄºÂä†ÂÄçÂíåÂ§ç‰ΩçÔºåÁõ¥Âà∞Ëøô‰∏™ÂÄºÂ¢ûÂ§ßÂà∞Èó®ÈôêÂÄºÔºàÈÄöÂ∏∏ÊòØ60ÁßíÔºâ‰∏∫Ê≠¢„ÄÇÂú®Ëøô‰ª•ÂêéÔºåÂèëÈÄÅÁ´ØÊØèÈöî60ÁßíÂ∞±ÂèëÈÄÅ‰∏Ä‰∏™Êé¢ÊµãÊä•ÊñáÔºåÁõ¥Âà∞Á™óÂè£ÈáçÊñ∞ÊâìÂºÄ„ÄÇ ‰øùÊ¥ªËÆ°Êó∂Âô® ‰øùÊ¥ªËÆ°Êó∂Âô®‰ΩøÁî®Âú®Êüê‰∫õÂÆûÁé∞‰∏≠ÔºåÁî®Êù•Èò≤Ê≠¢Âú®‰∏§‰∏™TCP‰πãÈó¥ÁöÑËøûÊé•Âá∫Áé∞ÈïøÊó∂Èó¥ÁöÑÁ©∫Èó≤„ÄÇ ÂÅáÂÆöÂÆ¢Êà∑ÊâìÂºÄ‰∫ÜÂà∞ÊúçÂä°Âô®ÁöÑËøûÊé•Ôºå‰º†ÈÄÅ‰∫Ü‰∏Ä‰∫õÊï∞ÊçÆÔºåÁÑ∂ÂêéÂ∞±‰øùÊåÅÈùôÈªò‰∫Ü„ÄÇ‰πüËÆ∏Ëøô‰∏™ÂÆ¢Êà∑Âá∫ÊïÖÈöú‰∫Ü„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËøô‰∏™ËøûÊé•Â∞ÜÊ∞∏ËøúÁöÑÂ§Ñ‰∫éÊâìÂºÄÁä∂ÊÄÅ„ÄÇ Ë¶ÅËß£ÂÜ≥ËøôÁßçÈóÆÈ¢òÔºåÂú®Â§ßÂ§öÊï∞ÁöÑÂÆûÁé∞‰∏≠ÈÉΩÊòØ‰ΩøÊúçÂä°Âô®ËÆæÁΩÆ‰øùÊ¥ªËÆ°Êó∂Âô®„ÄÇÊØèÂΩìÊúçÂä°Âô®Êî∂Âà∞ÂÆ¢Êà∑ÁöÑ‰ø°ÊÅØÔºåÂ∞±Â∞ÜËÆ°Êó∂Âô®Â§ç‰Ωç„ÄÇÈÄöÂ∏∏ËÆæÁΩÆ‰∏∫‰∏§Â∞èÊó∂„ÄÇ Ëã•ÊúçÂä°Âô®Ëøá‰∫Ü‰∏§Â∞èÊó∂ËøòÊ≤°ÊúâÊî∂Âà∞ÂÆ¢Êà∑ÁöÑ‰ø°ÊÅØÔºå‰ªñÂ∞±ÂèëÈÄÅÊé¢ÊµãÊä•ÊñáÊÆµ„ÄÇËã•ÂèëÈÄÅ‰∫Ü10‰∏™Êé¢ÊµãÊä•ÊñáÊÆµÔºàÊØè‰∏Ä‰∏™Èó¥Èöî75ÁßíÔºâËøòÊ≤°ÊúâÂìçÂ∫îÔºåÂ∞±ÂÅáÂÆöÂÆ¢Êà∑Á´ØÂá∫‰∫ÜÊïÖÈöúÔºåÂõ†ËÄåÂ∞±ÁªàÊ≠¢‰∫ÜËØ•ËøûÊé•„ÄÇ ËøôÁßçËøûÊé•ÁöÑÊñ≠ÂºÄÂΩìÁÑ∂‰∏ç‰ºö‰ΩøÁî®ÂõõÊ¨°Êè°ÊâãÔºåËÄåÊòØÁõ¥Êé•Á°¨ÊÄßÁöÑ‰∏≠Êñ≠ÂíåÂÆ¢Êà∑Á´ØÁöÑTCPËøûÊé•„ÄÇ Êó∂Èó¥Á≠âÂæÖËÆ°Êó∂Âô® Êó∂Èó¥Á≠âÂæÖËÆ°Êó∂Âô®ÊòØÂú®ÂõõÊ¨°Êå•ÊâãÊâãÁöÑÊó∂ÂÄô‰ΩøÁî®ÁöÑ„ÄÇÂç≥Âú®ÈáäÊîæËøûÊé•ÁöÑÊúÄÁªàÈò∂ÊÆµÔºåÂÆ¢Êà∑Á´ØËøòË¶ÅÁ≠âÂæÖ2MSLÔºàMSL=maxinum segment lifetimeÊúÄÈïøÊä•ÊñáÁîüÂ≠òÊó∂Èó¥Ôºå2MSLÂ∞±ÊòØ‰∏§ÂÄçÁöÑMSLÔºâÊâçËÉΩÁúüÊ≠£ÁöÑÂÖ≥Èó≠ËøûÊé•„ÄÇ UDPÂçèËÆÆ ÂÆö‰πâ User Datagram ProtocolÔºåÂç≥ Áî®Êà∑Êï∞ÊçÆÊä•ÂçèËÆÆÔºåÂ±û‰∫é ‰º†ËæìÂ±ÇÈÄö‰ø°ÂçèËÆÆ„ÄÇÂü∫‰∫éUDPÁöÑÂ∫îÁî®Â±ÇÂçèËÆÆÊúâ TFTP„ÄÅSNMP ‰∏é DNS„ÄÇ ÁâπÁÇπ Êó†ËøûÊé•Ôºö‰ΩøÁî®UDP‰º†ËæìÊï∞ÊçÆÂâçÔºå‰∏çÈúÄË¶ÅÂª∫Á´ãUDPËøûÊé•ÔºåÂ∞±ÂÉèÂÜô‰ø°ÔºåÂÜôÂ•Ω‰ø°‰∫§ÁªôÈÇÆÂ±ÄÔºåÂÖ∂‰Ωô‰∏çÈúÄË¶ÅÁÆ°„ÄÇ ‰∏çÂèØÈù†ÔºöUDPÁöÑÊï∞ÊçÆÂåÖÂèëÈÄÅÂêéÔºå‰∏çÁÆ°ÂÖ∂ÊòØÂê¶‰ºöÂà∞ËææÊé•Êî∂ÊñπÔºåÊïÖÂèØËÉΩÂá∫Áé∞‰∏¢ÂåÖÁé∞Ë±°„ÄÇ Èù¢ÂêëÊä•ÊñáÔºöÊï∞ÊçÆ‰ª•Êï∞ÊçÆÊä•Êñá(ÂåÖ)ÁöÑÂΩ¢Âºè‰º†ËæìÔºåUDPÊï∞ÊçÆÊä•ÊñáÈïøÂ∫¶Êó†ÈôêÂà∂ÔºåÈÉΩ‰∏ÄÊ¨°ÊÄßÂèëÈÄÅÔºå‰∏çÂÉèTCP‰ºöÊãÜÂàÜ„ÄÇ Êó†Êã•Â°ûÊéßÂà∂ÔºöÁî±‰∫éÊòØ‰∏çÂèØÈù†‰º†ËæìÔºåÂç≥‰∏çÁÆ°ÊòØÂê¶Âà∞ËææÊé•Êî∂ÊñπÔºåÊïÖ‰∏çÈúÄÊã•Â°ûÊéßÂà∂„ÄÇ Êä•ÊñáÊÆµÊ†ºÂºè ‰º™È¶ñÈÉ®ÔºöËÆ°ÁÆóÊ£ÄÈ™åÂíåÔºà‰∏çÂêë‰∏ã‰º†ÈÄÅÔºå‰πü‰∏çÂêë‰∏äÈÄí‰∫§Ôºâ„ÄÇ Ê∫êÁ´ØÂè£ÔºöÈúÄË¶ÅÂØπÊñπÂõû‰ø°Êó∂‰ΩøÁî®ÔºåÂ¶ÇÊûú‰∏çÈúÄË¶ÅÂàôËÆæ‰∏∫ÂÖ®0„ÄÇ ÁõÆÁöÑÁ´ØÂè£ÔºöÁªàÁÇπ‰∫§‰ªòÊä•ÊñáÊó∂Áî®Âà∞„ÄÇ ÈïøÂ∫¶ÔºöUDPÁî®Êà∑Êï∞ÊçÆÊä•ÁöÑÈïøÂ∫¶ÔºåÊúÄÂ∞èÂÄºÊòØ8Ôºà‰ªÖÊúâÈ¶ñÈÉ®Ôºâ„ÄÇ Ê£ÄÈ™åÂíåÔºöÊ£ÄÊµãUDPÁî®Êà∑Êï∞ÊçÆÊä•Âú®‰º†Ëæì‰∏≠ÊòØÂê¶ÊúâÈîôÔºåËã•ÊúâÈîôÂàô‰∏¢ÂºÉ„ÄÇ TCP„ÄÅUDPÁöÑÂå∫Âà´ HTTPÂçèËÆÆ ÂÆö‰πâ HyperText Transfer ProtocolÔºåË∂ÖÊñáÊú¨‰º†ËæìÂçèËÆÆÔºåËßÑÂÆö‰∫ÜÂ∫îÁî®ËøõÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°ÂáÜÂàôÔºåÂ±û‰∫éÂ∫îÁî®Â±ÇÂçèËÆÆ„ÄÇ ÁâπÁÇπ Êó†ËøûÊé•ÔºåÂç≥‰∫§Êç¢HTTPÊä•ÊñáÂâçÔºå‰∏çÈúÄË¶ÅÂª∫Á´ãHTTPËøûÊé•„ÄÇ Êó†Áä∂ÊÄÅÔºåÂç≥Êï∞ÊçÆ‰º†ËæìËøáÁ®ã‰∏≠‰∏ç‰øùÂ≠ò‰ªª‰ΩïÂéÜÂè≤Áä∂ÊÄÅ‰ø°ÊÅØÔºåËØ•ÁâπÊÄßÁÆÄÂåñ‰∫ÜÊúçÂä°Âô®ÁöÑËÆæËÆ°Ôºå‰ΩøÊúçÂä°Âô®Êõ¥ÂÆπÊòìÊîØÊåÅÂ§ßÈáèÂπ∂ÂèëÁöÑHTTPËØ∑Ê±Ç„ÄÇ ‰º†ËæìÊ†ºÂºèÁÆÄÂçïÔºåÂç≥ËØ∑Ê±ÇÊó∂Âè™ÈúÄ‰º†ÈÄÅËØ∑Ê±ÇÊñπÊ≥ïÂíåË∑ØÂæÑ„ÄÇ ‰º†ËæìÂèØÈù†ÊÄßÈ´òÔºåÈááÁî®TCP‰Ωú‰∏∫ËøêËæìÂ±ÇÂçèËÆÆ„ÄÇ ÂÖºÂÆπÊÄßÂ•ΩÔºåÊîØÊåÅB/S„ÄÅC/SÊ®°Âºè„ÄÇ ÁÅµÊ¥ªÊÄßÈ´òÔºåHTTPÂÖÅËÆ∏‰º†Ëæì‰ªªÊÑèÁ±ªÂûãÁöÑÊï∞ÊçÆÂØπË±°„ÄÇ Â∑•‰ΩúÊñπÂºè HTTPÂçèËÆÆÈááÁî®ËØ∑Ê±Ç/ÂìçÂ∫îÁöÑÂ∑•‰ΩúÊñπÂºèÔºåÂÖ∑‰ΩìÂ∑•‰ΩúÊµÅÁ®ãÂ¶Ç‰∏ãÔºö HTTPÊä•Êñá HTTPÊä•ÊñáÂàÜ‰∏∫ÔºöËØ∑Ê±ÇÊä•Êñá„ÄÅÂìçÂ∫îÊä•Êñá„ÄÇ ËØ∑Ê±ÇÊä•Êñá HTTPÁöÑËØ∑Ê±ÇÊä•ÊñáÁî±ËØ∑Ê±ÇË°å„ÄÅËØ∑Ê±ÇÂ§¥„ÄÅËØ∑Ê±Ç‰ΩìÁªÑÊàê„ÄÇÂ¶Ç‰∏ãÂõæÔºö ËØ∑Ê±ÇË°å ËØ∑Ê±ÇË°å = ËØ∑Ê±ÇÊñπÊ≥ï + ËØ∑Ê±ÇË∑ØÂæÑ + ÂçèËÆÆÁâàÊú¨ Áî®‰∫éÂ£∞Êòé ËØ∑Ê±ÇÊñπÊ≥ï „ÄÅ‰∏ªÊú∫ÂüüÂêç„ÄÅËµÑÊ∫êË∑ØÂæÑ „ÄÅÂçèËÆÆÁâàÊú¨„ÄÇ ÂêÑÈÉ®ÂàÜÁªÑÊàê‰ªãÁªçÂ¶Ç‰∏ãÂõæÔºö ËØ∑Ê±ÇÂ§¥ ‰∏ªË¶ÅÁî®‰∫éÂ£∞ÊòéÂÆ¢Êà∑Á´Ø„ÄÅÊúçÂä°Âô®/Êä•ÊñáÁöÑÈÉ®ÂàÜ‰ø°ÊÅØ„ÄÇÈááÁî®header(Â≠óÊÆµÂêç):value(ÂÄº)ÁöÑÊñπÂºè„ÄÇ ËØ∑Ê±ÇÂíåÂìçÂ∫îÊä•ÊñáÁöÑÈÄöÁî®Header ÂêçÁß∞ ‰ΩúÁî® Content-Type ËØ∑Ê±Ç‰Ωì/ÂìçÂ∫î‰ΩìÁöÑÁ±ªÂûãÔºåÂ¶ÇÔºötext/plain„ÄÅapplication/json Accept ËØ¥ÊòéÊé•Êî∂ÁöÑÁ±ªÂûãÔºåÂèØ‰ª•Â§ö‰∏™ÂÄºÔºåÁî®ÔºåÔºàÂçäËßíÈÄóÂè∑ÔºâÂàÜÂºÄ Content-Length ËØ∑Ê±Ç‰Ωì/ÂìçÂ∫î‰ΩìÁöÑÈïøÂ∫¶ÔºåÂçï‰ΩçÂ≠óËäÇ Content-Encoding ËØ∑Ê±Ç‰Ωì/ÂìçÂ∫î‰ΩìÁöÑÁºñÁ†ÅÊ†ºÂºèÔºåÂ¶Çgzip,deflate Accept-Encoding ÂëäÁü•ÂØπÊñπÊàëÊñπÊé•ÂèóÁöÑContent-Encoding ETag ÁªôÂΩìÂâçËµÑÊ∫êÁöÑÊ†áËØÜÔºåÂíåLast-Modified„ÄÅIf-None-Match„ÄÅIf-Modified-Since ÈÖçÂêàÔºåÁî®‰∫éÁºìÂ≠òÊéßÂà∂ Cache-Control ÂèñÂÄº‰∏∫‰∏ÄËà¨‰∏∫no-cacheÊàñmax-age=XxÔºåXX‰∏∫‰∏™Êï¥Êï∞ÔºåË°®Á§∫ËØ•ËµÑÊ∫êÁºìÂ≠òÊúâÊïàÊúüÔºàÁßí) Â∏∏ËßÅÁöÑËØ∑Ê±ÇHeader ÂêçÁß∞ ‰ΩúÁî® Authorization Áî®‰∫éËÆæÁΩÆË∫´‰ªΩËÆ§ËØÅ‰ø°ÊÅØ User-Agent Áî®Êà∑Ê†áËØÜÔºåÂ¶ÇÔºöOSÂíåÊµèËßàÂô®ÁöÑÁ±ªÂûãÂíåÁâàÊú¨ If-Modified-Since ÂÄº‰∏∫‰∏ä‰∏ÄÊ¨°ÊúçÂä°Âô®ËøîÂõûÁöÑLast-ModifiedÂÄºÔºåÁî®‰∫éÁ°ÆËÆ§Êüê‰∏™ËµÑÊ∫êÊòØÂê¶Ë¢´Êõ¥ÊîπËøáÔºåÊ≤°ÊúâÊõ¥ÊîπËøáÔºà304ÔºâÂ∞±‰ªéÁºìÂ≠ò‰∏≠ËØªÂèñ If-None-Match ÂÄº‰∏∫‰∏ä‰∏ÄÊ¨°ÊúçÂä°Âô®ËøîÂõûÁöÑETagÂÄºÔºå‰∏ÄËà¨‰ºöÂíåIf-Modified-Since‰∏ÄËµ∑Âá∫Áé∞ Cookie Â∑≤ÊúâÁöÑCookie Referer Ë°®Á§∫ËØ∑Ê±ÇÂºïÁî®Ëá™Âì™‰∏™Âú∞ÂùÄÔºåÊØîÂ¶Ç‰Ω†‰ªéÈ°µÈù¢AË∑≥ËΩ¨Âà∞È°µÈù¢BÊó∂ÔºåÂÄº‰∏∫È°µÈù¢AÁöÑÂú∞ÂùÄ Host ËØ∑Ê±ÇÁöÑ‰∏ªÊú∫ÂíåÁ´ØÂè£Âè∑ ËØ∑Ê±Ç‰Ωì ‰∏ªË¶ÅÁî®‰∫éÂ≠òÊîæÈúÄÂèëÈÄÅÁªôÊúçÂä°Âô®ÁöÑÊï∞ÊçÆ‰ø°ÊÅØ„ÄÇ ‰ΩøÁî®ÊñπÂºèÂÖ±3ÁßçÔºåÂ¶Ç‰∏ãÂõæÔºö ÂìçÂ∫îÊä•Êñá HTTPÂìçÂ∫îÊä•ÊñáÂåÖÊã¨ÔºöÁä∂ÊÄÅË°å„ÄÅÂìçÂ∫îÂ§¥„ÄÅÂìçÂ∫î‰Ωì„ÄÇÁªìÊûÑÂ¶Ç‰∏ãÂõæÔºö Áä∂ÊÄÅË°å Áä∂ÊÄÅË°å = ÂçèËÆÆÁâàÊú¨ + Áä∂ÊÄÅÁ†Å + Áä∂ÊÄÅ‰ø°ÊÅØÁªÑÊàê ‰∏ªË¶ÅÁî®‰∫éÂ£∞ÊòéÂçèËÆÆÁâàÊú¨„ÄÅÁä∂ÊÄÅÁ†Å„ÄÅÁä∂ÊÄÅÁ†ÅÊèèËø∞„ÄÇ ÂêÑÈÉ®ÂàÜÁªÑÊàêÂÖ∑‰Ωì‰ªãÁªçÂ¶Ç‰∏ãÔºö ÂìçÂ∫îÂ§¥ ‰∏ªË¶ÅÁî®‰∫éÂ£∞ÊòéÂÆ¢Êà∑Á´Ø„ÄÅÊúçÂä°Âô®/Êä•ÊñáÁöÑÈÉ®ÂàÜ‰ø°ÊÅØ„ÄÇÈááÁî®header(Â≠óÊÆµÂêç):value(ÂÄº)ÁöÑÊñπÂºè„ÄÇ Â∏∏ËßÅÂìçÂ∫îHeader ÂêçÁß∞ ‰ΩúÁî® Date ÊúçÂä°Âô®ÁöÑÊó•Êúü Last-Modified ËØ•ËµÑÊ∫êÊúÄÂêéË¢´‰øÆÊîπÊó∂Èó¥ Transfer-Encoding ÂèñÂÄº‰∏∫‰∏ÄËà¨‰∏∫chunkedÔºåÂá∫Áé∞Âú®Content-Length‰∏çËÉΩÁ°ÆÂÆöÁöÑÊÉÖÂÜµ‰∏ãÔºåË°®Á§∫ÊúçÂä°Âô®‰∏çÁü•ÈÅìÂìçÂ∫îÁâà‰ΩìÁöÑÊï∞ÊçÆÂ§ßÂ∞èÔºå‰∏ÄËà¨ÂêåÊó∂Ëøò‰ºöÂá∫Áé∞Content-Encoding ÂìçÂ∫îÂ§¥ Set-Cookie ËÆæÁΩÆCookie Location ÈáçÂÆöÂêëÂà∞Âè¶‰∏Ä‰∏™URLÔºåÂ¶ÇËæìÂÖ•ÊµèËßàÂô®Â∞±ËæìÂÖ•baidu.comÂõûËΩ¶Ôºå‰ºöËá™Âä®Ë∑≥Âà∞https://www.baidu.comÔºåÂ∞±ÊòØÈÄöËøáËøô‰∏™ÂìçÂ∫îÂ§¥ÊéßÂà∂ÁöÑ Server ÂêéÂè∞ÊúçÂä°Âô® ÂìçÂ∫î‰Ωì ‰∏ªË¶ÅÁî®‰∫éÂ≠òÊîæÈúÄËøîÂõûÁªôÂÆ¢Êà∑Á´ØÁöÑÊï∞ÊçÆ‰ø°ÊÅØ„ÄÇ‰ΩøÁî®ÊñπÂºèÂêåËØ∑Ê±ÇÊä•ÊñáÁöÑËØ∑Ê±Ç‰Ωì„ÄÇ HTTP1.1 ‰∏é HTTP1.0ÁöÑÂå∫Âà´ Http1.1 ÊØî Http1.0 Â§ö‰∫Ü‰ª•‰∏ã‰ºòÁÇπÔºö ÂºïÂÖ•ÊåÅ‰πÖËøûÊé•ÔºåÂç≥ Âú®Âêå‰∏Ä‰∏™TCPÁöÑËøûÊé•‰∏≠ÂèØ‰º†ÈÄÅÂ§ö‰∏™HTTPËØ∑Ê±Ç &amp; ÂìçÂ∫îÔºõ Â§ö‰∏™ËØ∑Ê±Ç &amp; ÂìçÂ∫îÂèØÂêåÊó∂ËøõË°å„ÄÅÂèØÈáçÂè†Ôºõ ÂºïÂÖ•Êõ¥Âä†Â§öÁöÑËØ∑Ê±ÇÂ§¥ &amp; ÂìçÂ∫îÂ§¥Ôºõ ÂÖ∂‰ªñÁü•ËØÜ ÊµèËßàÂô®‰∏≠ËæìÂÖ•URLÂà∞È°µÈù¢ËøîÂõûÁöÑÂÖ®ËøáÁ®ã ÊÄªÂÖ±ÂàÜ‰∏∫7‰∏™Ê≠•È™§ÔºåÊµÅÁ®ãÂ¶Ç‰∏ãÂõæÔºö Á¨¨‰∏ÄÊ≠•ÔºöÂüüÂêçËß£Êûê ÊµèËßàÂô®Êü•ÊâæÊµèËßàÂô®ÁºìÂ≠òÔºåÂ¶ÇÊûúÊúâÂüüÂêçÂØπÂ∫îÁöÑIPÂú∞ÂùÄÂàôËøîÂõûÔºåÂ¶ÇÊûúÊ≤°ÊúâÁªßÁª≠Êü•Êâæ„ÄÇ ÊµèËßàÂô®Êü•ÁúãÊú¨Êú∫ÁöÑhostÊñá‰ª∂ÔºåÂ¶ÇÊûúÊúâÂüüÂêçÂØπÂ∫îÁöÑIPÂú∞ÂùÄÂàôËøîÂõûÔºåÂ¶ÇÊûúÊ≤°ÊúâÁªßÁª≠Êü•Êâæ„ÄÇ ÁÑ∂ÂêéÊòØË∑ØÁî±Âô®ÁºìÂ≠òÔºåË∑ØÁî±Âô®‰∏ÄËà¨ÊúâËá™Â∑±ÁöÑÁºìÂ≠òÔºåÂ¶ÇÊûúÊúâÂüüÂêçÂØπÂ∫îÁöÑIPÂú∞ÂùÄÂàôËøîÂõûÔºåÂ¶ÇÊûúÊ≤°ÊúâÁªßÁª≠Êü•Êâæ„ÄÇ Êé•ÁùÄÊòØÂØπÊú¨Âú∞DNSÊúçÂä°Âô®ËøõË°åÈÄíÂΩíÊü•ËØ¢ÔºåÁúãÊòØÂê¶ÊúâÂüüÂêçÂØπÂ∫îÁöÑIP„ÄÇ‰∏ªÊú∫ÂêëÊú¨Âú∞ÂüüÂêçÊúçÂä°Âô®ÁöÑÊü•ËØ¢‰∏ÄËà¨ÈÉΩÊòØÈááÁî®ÈÄíÂΩíÊü•ËØ¢„ÄÇÊâÄË∞ìÈÄíÂΩíÊü•ËØ¢Â∞±ÊòØÂ¶ÇÊûú‰∏ªÊú∫ÊâÄËØ¢ÈóÆÁöÑÊú¨Âú∞ÂüüÂêçÊúçÂä°Âô®‰∏çÁü•ÈÅìË¢´Êü•ËØ¢ÂüüÂêçÁöÑIPÂú∞ÂùÄÔºåÈÇ£‰πàÊú¨Âú∞ÂüüÂêçÊúçÂä°Âô®Â∞±‰ª•DNSÂÆ¢Êà∑ÁöÑË∫´‰ªΩÔºåÂêëÂÖ∂‰ªñÊ†πÂüüÂêçÊúçÂä°Âô®ÁªßÁª≠ÂèëÂá∫Êü•ËØ¢ËØ∑Ê±ÇÊä•ÊñáÔºåËÄå‰∏çÊòØËÆ©ËØ•‰∏ªÊú∫Ëá™Â∑±ËøõË°å‰∏ã‰∏ÄÊ≠•Êü•ËØ¢„ÄÇÔºàÊú¨Âú∞ÂüüÂêçÊúçÂä°Âô®Âú∞ÂùÄÊòØÈÄöËøáDHPCÂçèËÆÆËé∑ÂèñÂú∞ÂùÄÔºåDHPCÊòØË¥üË¥£ÂàÜÈÖçIPÂú∞ÂùÄÁöÑÔºâ Êú¨Âú∞ÂüüÂêçÊúçÂä°Âô®ÈááÁî®Ëø≠‰ª£Êü•ËØ¢ÔºåÂÆÉÂÖàÂêë‰∏Ä‰∏™Ê†πÂüüÂêçÊúçÂä°Âô®Êü•ËØ¢„ÄÇÊú¨Âú∞ÂüüÂêçÊúçÂä°Âô®ÂêëÊ†πÂüüÂêçÊúçÂä°Âô®ÁöÑÊü•ËØ¢‰∏ÄËà¨ÈÉΩÊòØÈááÁî®Ëø≠‰ª£Êü•ËØ¢„ÄÇÊâÄË∞ìËø≠‰ª£Êü•ËØ¢Â∞±ÊòØÂΩìÊ†πÂüüÂêçÊúçÂä°Âô®Êî∂Âà∞Êú¨Âú∞ÂüüÂêçÊúçÂä°Âô®ÂèëÂá∫ÁöÑÊü•ËØ¢ËØ∑Ê±ÇÊä•ÊñáÂêéÔºåË¶Å‰πàÂëäËØâÊú¨Âú∞ÂüüÂêçÊúçÂä°Âô®‰∏ã‰∏ÄÊ≠•Â∫îËØ•Êü•ËØ¢Âì™‰∏Ä‰∏™ÂüüÂêçÊúçÂä°Âô®ÔºåÁÑ∂ÂêéÊú¨Âú∞ÊúçÂä°Âô®Ëá™Â∑±ËøõË°åÂêéÁª≠ÁöÑÊü•ËØ¢„ÄÇÔºàËÄå‰∏çÊòØÊõø‰ª£Êú¨Âú∞ÊúçÂä°Âô®ËøõË°åÂêéÁª≠Êü•ËØ¢Ôºâ„ÄÇ Ê†πÂüüÂêçÊúçÂä°Âô®ÂëäËØâÊú¨Âú∞ÂüüÂêçÊúçÂä°Âô®Ôºå‰∏ã‰∏ÄÊ¨°Â∫îÊü•ËØ¢ÁöÑÈ°∂Á∫ßÂüüÂêçÊúçÂä°Âô®dns.comÁöÑIPÂú∞ÂùÄ„ÄÇ Êú¨Âú∞ÂüüÂêçÊúçÂä°Âô®ÂêëÈ°∂Á∫ßÂüüÂêçÊúçÂä°Âô®dns.comËøõË°åÊü•ËØ¢„ÄÇ È°∂Á∫ßÂüüÂêçÊúçÂä°Âô®dns.comÂëäËØâÊú¨Âú∞ÂüüÂêçÊúçÂä°Âô®Ôºå‰∏ã‰∏ÄÊ¨°Â∫îÊü•ËØ¢ÁöÑÊùÉÈôêÂüüÂêçÊúçÂä°Âô®dns.baidu.comÁöÑIPÂú∞ÂùÄ„ÄÇ Êú¨Âú∞ÂüüÂêçÊúçÂä°Âô®ÂêëÊùÉÈôêÂüüÂêçÊúçÂä°Âô®dns.baidu.comËøõË°åÊü•ËØ¢„ÄÇ ÊùÉÈôêÂüüÂêçÊúçÂä°Âô®dns.baidu.comÂëäËØâÊú¨Âú∞ÂüüÂêçÊúçÂä°Âô®ÔºåÊâÄÊü•ËØ¢ÁöÑ‰∏ªÊú∫www.baidu.comÁöÑIPÂú∞ÂùÄ„ÄÇ Êú¨Âú∞ÂüüÂêçÊúçÂä°Âô®ÊúÄÂêéÊääÊü•ËØ¢ÁªìÊûúÂëäËØâ‰∏ªÊú∫„ÄÇ Á¨¨‰∫åÊ≠•ÔºöÂª∫Á´ãTCPËøûÊé•Ôºå‰∏âÊ¨°Êè°Êâã Á¨¨‰∏âÊ≠•ÔºöWebÊµèËßàÂô®ÂêëWebÊúçÂä°Á´ØÂèëÈÄÅHTTPËØ∑Ê±ÇÊä•Êñá Á¨¨ÂõõÊ≠•ÔºöÊúçÂä°Âô®ÂìçÂ∫îHTTPËØ∑Ê±Ç Á¨¨‰∫îÊ≠•ÔºöÊµèËßàÂô®Ëß£ÊûêHTML‰ª£Á†ÅÔºåÂπ∂ËØ∑Ê±ÇHTML‰ª£Á†Å‰∏≠ÁöÑËµÑÊ∫êÔºàJSÔºåCSSÔºåÂõæÁâáÔºâÔºàËøôÊòØËá™Âä®ÂêëÊúçÂä°Âô®ËØ∑Ê±Ç‰∏ãËΩΩÁöÑÔºâ Á¨¨ÂÖ≠Ê≠•ÔºöÊµèËßàÂô®ÂØπÈ°µÈù¢ËøõË°åÊ∏≤ÊüìÂëàÁé∞ÁªôÂÆ¢Êà∑ Á¨¨‰∏ÉÊ≠•ÔºöÊñ≠ÂºÄTCPËøûÊé•ÔºåÂõõÊ¨°Êå•Êâã IPÂú∞ÂùÄ(IPV4) ÂÆö‰πâ ËøûÊé•Âú®Internet‰∏≠ÁöÑÊØè‰∏ÄÂè∞‰∏ªÊú∫ÔºàÊàñ Ë∑ØÁî±Âô®ÔºâÁöÑÂÖ®ÁêÉÂîØ‰∏ÄÁöÑÊ†áËØÜÁ¨¶„ÄÇ ÁªÑÊàê IPÂú∞ÂùÄ = 32‰Ωç = ÁΩëÁªúÂè∑ + ‰∏ªÊú∫Âè∑ÔºõÂç≥IPÂú∞ÂùÄ::={&lt;ÁΩëÁªúÂè∑&gt;Ôºå&lt;‰∏ªÊú∫Âè∑&gt;} ÁΩëÁªúÂè∑ÔºöÊ†áÂøó‰∏ªÊú∫ÔºàÊàñË∑ØÁî±Âô®ÔºâÊâÄËøûÊé•Âà∞ÁöÑÁΩëÁªú„ÄÇ‰∏Ä‰∏™ÁΩëÁªúÂè∑Âú®Êï¥‰∏™Âõ†ÁâπÁΩëËåÉÂõ¥ÂÜÖÂøÖÈ°ªÊòØÂîØ‰∏ÄÁöÑ„ÄÇ ‰∏ªÊú∫Âè∑ÔºöÊ†áÂøóËØ•‰∏ªÊú∫ÔºàÊàñË∑ØÁî±Âô®Ôºâ„ÄÇ‰∏Ä‰∏™‰∏ªÊú∫Âè∑Âú®ÂÆÉÈù¢ÂâçÁöÑÁΩëÁªúÂè∑ÊâÄÊåáÊòéÁöÑÁΩëÁªúËåÉÂõ¥ÂøÖÈ°ªÊòØÂîØ‰∏ÄÁöÑ„ÄÇ ‰∏çÂêåÁ±ªÂûãÁöÑIPÂú∞ÂùÄÔºåÂÖ∂‰∏ªÊú∫Âè∑ &amp; ÁΩëÁªúÂè∑ÊâÄÂç†Â≠óËäÇÊï∞‰∏çÂêåÔºõÊïÖÔºö‰∏Ä‰∏™IPÂú∞ÂùÄÂú®Êï¥‰∏™ÁΩëÁªúËåÉÂõ¥ÂÜÖÊòØÂîØ‰∏ÄÁöÑ„ÄÇ ÂàÜÁ±ª ‰º†ÁªüÁöÑIPÂú∞ÂùÄÊòØÂàÜÁ±ªÁöÑÂú∞ÂùÄÔºåÂàÜ‰∏∫AÔºåBÔºåCÔºåDÔºåE‰∫îÁ±ªÔºåÂå∫Âà´Âú®‰∫éÁΩëÁªúÂè∑ &amp; ‰∏ªÊú∫Âè∑Âç†ÁöÑÂ≠óËäÇÊï∞‰∏çÂêå„ÄÇ ÁâπÂà´Ê≥®ÊÑèÔºöÂú®ÂêÑÁ±ªIPÂú∞ÂùÄ‰∏≠ÔºåÊúâ‰∏Ä‰∫õIPÂú∞ÂùÄÁî®‰∫éÁâπÊÆäÁî®ÈÄîÔºå‰∏çËÉΩÁî®‰∫éÂÅö‰∏ªÊú∫IPÂú∞ÂùÄ Cookie‰∏éSession]]></content>
      <categories>
        <category>ËÆ°ÁÆóÊú∫Âü∫Á°Ä</category>
      </categories>
      <tags>
        <tag>ËÆ°ÁÆóÊú∫Âü∫Á°Ä</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JVMÁ±ªÂä†ËΩΩÊú∫Âà∂]]></title>
    <url>%2Fposts%2Fde06556f.html</url>
    <content type="text"><![CDATA[Á±ªÂä†ËΩΩÊó∂Êú∫ Á±ªÁöÑÁîüÂëΩÂë®Êúü ‰∏Ä‰∏™Á±ª‰ªéÂä†ËΩΩËøõÂÜÖÂ≠òÂà∞Âç∏ËΩΩÂá∫ÂÜÖÂ≠ò‰∏∫Ê≠¢Ôºå‰∏ÄÂÖ±ÁªèÂéÜ7‰∏™Èò∂ÊÆµÔºö &lt;span id=&quot;inline-blue&quot;&gt; Âä†ËΩΩ‚Äî‚Äî&gt;È™åËØÅ‚Äî‚Äî&gt;ÂáÜÂ§á‚Äî‚Äî&gt;Ëß£Êûê‚Äî‚Äî&gt;ÂàùÂßãÂåñ‚Äî‚Äî&gt;‰ΩøÁî®‚Äî‚Äî&gt;Âç∏ËΩΩ &lt;/span&gt; ÂÖ∂‰∏≠ÔºåÁ±ªÂä†ËΩΩÂåÖÊã¨5‰∏™Èò∂ÊÆµÔºö &lt;span id=&quot;inline-green&quot;&gt; Âä†ËΩΩ‚Äî‚Äî&gt;È™åËØÅ‚Äî‚Äî&gt;ÂáÜÂ§á‚Äî‚Äî&gt;Ëß£Êûê‚Äî‚Äî&gt;ÂàùÂßãÂåñ &lt;/span&gt; Âú®Á±ªÂä†ËΩΩÁöÑËøáÁ®ã‰∏≠Ôºå‰ª•‰∏ã3‰∏™ËøáÁ®ãÁß∞‰∏∫ËøûÊé•Ôºö &lt;span id=&quot;inline-purple&quot;&gt; È™åËØÅ‚Äî‚Äî&gt;ÂáÜÂ§á‚Äî‚Äî&gt;Ëß£Êûê &lt;/span&gt; Âõ†Ê≠§ÔºåJVMÁöÑÁ±ªÂä†ËΩΩËøáÁ®ã‰πüÂèØ‰ª•Ê¶ÇÊã¨‰∏∫3‰∏™ËøáÁ®ãÔºö &lt;span id=&quot;inline-yellow&quot;&gt; Âä†ËΩΩ‚Äî‚Äî&gt;ËøûÊé•‚Äî‚Äî&gt;ÂàùÂßãÂåñ &lt;/span&gt; C/C++Âú®ËøêË°åÂâçÈúÄË¶ÅÂÆåÊàêÈ¢ÑÂ§ÑÁêÜ„ÄÅÁºñËØë„ÄÅÊ±áÁºñ„ÄÅÈìæÊé•ÔºõËÄåÂú®Java‰∏≠ÔºåÁ±ªÂä†ËΩΩ(Âä†ËΩΩ„ÄÅËøûÊé•„ÄÅÂàùÂßãÂåñ)ÊòØÂú®Á®ãÂ∫èËøêË°åÊúüÈó¥ÂÆåÊàêÁöÑ„ÄÇ Âú®Á®ãÂ∫èËøêË°åÊúüÈó¥ËøõË°åÁ±ªÂä†ËΩΩ‰ºöÁ®çÂæÆÂ¢ûÂä†Á®ãÂ∫èÁöÑÂºÄÈîÄÔºå‰ΩÜÈöè‰πã‰ºöÂ∏¶Êù•Êõ¥Â§ßÁöÑÂ•ΩÂ§Ñ‚Äî‚ÄîÊèêÈ´òÁ®ãÂ∫èÁöÑÁÅµÊ¥ªÊÄß„ÄÇJavaËØ≠Ë®ÄÁöÑÁÅµÊ¥ªÊÄß‰ΩìÁé∞Âú®ÂÆÉÂèØ‰ª•Âú®ËøêË°åÊúüÈó¥&lt;span id=&quot;inline-blue&quot;&gt;Âä®ÊÄÅÊâ©Â±ï&lt;/span&gt;ÔºåÊâÄË∞ìÂä®ÊÄÅÊâ©Â±ïÂ∞±ÊòØÂú®ËøêË°åÊúüÈó¥&lt;span id=&quot;inline-blue&quot;&gt;Âä®ÊÄÅÂä†ËΩΩ&lt;/span&gt;Âíå&lt;span id=&quot;inline-blue&quot;&gt;Âä®ÊÄÅËøûÊé•&lt;/span&gt;„ÄÇ Á±ªÂä†ËΩΩÁöÑÊó∂Êú∫ Á±ªÂä†ËΩΩËøáÁ®ã‰∏≠ÊØè‰∏™Ê≠•È™§ÁöÑÈ°∫Â∫è Á±ªÂä†ËΩΩÁöÑËøáÁ®ãÂåÖÊã¨ÔºöÂä†ËΩΩ„ÄÅËøûÊé•„ÄÅÂàùÂßãÂåñÔºåËøûÊé•ÂèàÂàÜ‰∏∫ÔºöÈ™åËØÅ„ÄÅÂáÜÂ§á„ÄÅËß£ÊûêÔºåÊâÄ‰ª•ËØ¥Á±ªÂä†ËΩΩ‰∏ÄÂÖ±ÂàÜ‰∏∫5Ê≠•ÔºöÂä†ËΩΩ„ÄÅÈ™åËØÅ„ÄÅÂáÜÂ§á„ÄÅËß£Êûê„ÄÅÂàùÂßãÂåñ„ÄÇ ÂÖ∂‰∏≠Âä†ËΩΩ„ÄÅÈ™åËØÅ„ÄÅÂáÜÂ§á„ÄÅÂàùÂßãÂåñÁöÑÂºÄÂßãÈ°∫Â∫èÊòØ‰æùÊ¨°ËøõË°åÁöÑÔºåËøô‰∫õÊ≠•È™§ÂºÄÂßã‰πãÂêéÁöÑËøáÁ®ãÂèØËÉΩ‰ºöÊúâÈáçÂè†„ÄÇ ËÄåËß£ÊûêËøáÁ®ã‰ºöÂèëÁîüÂú®ÂàùÂßãÂåñËøáÁ®ã‰∏≠„ÄÇ Á±ªÂä†ËΩΩËøáÁ®ã‰∏≠‚ÄúÂàùÂßãÂåñ‚ÄùÂºÄÂßãÁöÑÊó∂Êú∫ JVMËßÑËåÉ‰∏≠Âè™ÂÆö‰πâ‰∫ÜÁ±ªÂä†ËΩΩËøáÁ®ã‰∏≠ÂàùÂßãÂåñËøáÁ®ãÂºÄÂßãÁöÑÊó∂Êú∫ÔºåÂä†ËΩΩ„ÄÅËøûÊé•ËøáÁ®ãÈÉΩÂ∫îËØ•Âú®ÂàùÂßãÂåñ‰πãÂâçÂºÄÂßã(Ëß£ÊûêÈô§Â§ñ)ÔºåËøô‰∫õËøáÁ®ãÂÖ∑‰ΩìÂú®‰ΩïÊó∂ÂºÄÂßãÔºåJVMËßÑËåÉÂπ∂Ê≤°ÊúâÂÆö‰πâÔºå‰∏çÂêåÁöÑËôöÊãüÊú∫ÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÁöÑÈúÄÊ±ÇËá™ÂÆö‰πâ„ÄÇ &lt;span id=&quot;inline-purple&quot;&gt; ÂàùÂßãÂåñÂºÄÂßãÁöÑÊó∂Êú∫Ôºö&lt;/span&gt; Âú®ËøêË°åËøáÁ®ã‰∏≠ÈÅáÂà∞Â¶Ç‰∏ãÂ≠óËäÇÁ†ÅÊåá‰ª§Êó∂ÔºåÂ¶ÇÊûúÁ±ªÂ∞öÊú™ÂàùÂßãÂåñÔºåÈÇ£Â∞±Ë¶ÅËøõË°åÂàùÂßãÂåñÔºönew„ÄÅgetstatic„ÄÅputstatic„ÄÅinvokestatic„ÄÇËøôÂõõ‰∏™Êåá‰ª§ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÂú∫ÊôØÊòØÔºö ÈÄöËøánewÂàõÂª∫ÂØπË±°Ôºõ ËØªÂèñ„ÄÅËÆæÁΩÆ‰∏Ä‰∏™Á±ªÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáè(‰∏çÂåÖÊã¨final‰øÆÈ•∞ÁöÑÈùôÊÄÅÂèòÈáè)Ôºõ Ë∞ÉÁî®‰∏Ä‰∏™Á±ªÁöÑÈùôÊÄÅÊàêÂëòÂáΩÊï∞„ÄÇ ‰ΩøÁî®java.lang.reflectËøõË°åÂèçÂ∞ÑË∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÁ±ªÊ≤°ÊúâÂàùÂßãÂåñÔºåÈÇ£Â∞±ÈúÄË¶ÅÂàùÂßãÂåñÔºõ ÂΩìÂàùÂßãÂåñ‰∏Ä‰∏™Á±ªÁöÑÊó∂ÂÄôÔºåËã•ÂÖ∂Áà∂Á±ªÂ∞öÊú™ÂàùÂßãÂåñÔºåÈÇ£Â∞±ÂÖàË¶ÅËÆ©ÂÖ∂Áà∂Á±ªÂàùÂßãÂåñÔºåÁÑ∂ÂêéÂÜçÂàùÂßãÂåñÊú¨Á±ªÔºõ ÂΩìËôöÊãüÊú∫ÂêØÂä®Êó∂ÔºåËôöÊãüÊú∫‰ºöÈ¶ñÂÖàÂàùÂßãÂåñÂ∏¶ÊúâmainÊñπÊ≥ïÁöÑÁ±ªÔºåÂç≥‰∏ªÁ±ªÔºõ ÂΩì‰ΩøÁî® JDK 1.7 ÁöÑÂä®ÊÄÅËØ≠Ë®ÄÊîØÊåÅÊó∂ÔºåÂ¶ÇÊûú‰∏Ä‰∏™ java.lang.invoke.MethodHandle ÂÆû‰æãÊúÄÂêéÁöÑËß£ÊûêÁªìÊûú REF_getStatic„ÄÅREF_putStatic„ÄÅREF_invokeStatic ÁöÑÊñπÊ≥ïÂè•ÊüÑÔºåÂπ∂‰∏îËøô‰∏™ÊñπÊ≥ïÂè•ÊüÑÊâÄÂØπÂ∫îÁöÑÁ±ªÊ≤°ÊúâËøõË°åËøáÂàùÂßãÂåñÔºåÂàôÈúÄÂÖàËß¶ÂèëÂÖ∂ÂàùÂßãÂåñ„ÄÇ ‰∏ªÂä®ÂºïÁî® ‰∏é Ë¢´Âä®ÂºïÁî® JVMËßÑËåÉ‰∏≠Ë¶ÅÊ±ÇÂú®Á®ãÂ∫èËøêË°åËøáÁ®ã‰∏≠Ôºå‚ÄúÂΩì‰∏î‰ªÖÂΩì‚ÄùÂá∫Áé∞‰∏äËø∞4‰∏™Êù°‰ª∂‰πã‰∏ÄÁöÑÊÉÖÂÜµÊâç‰ºöÂàùÂßãÂåñ‰∏Ä‰∏™Á±ª„ÄÇÂ¶ÇÊûúÈó¥Êé•Êª°Ë∂≥‰∏äËø∞ÂàùÂßãÂåñÊù°‰ª∂ÊòØ‰∏ç‰ºöÂàùÂßãÂåñÁ±ªÁöÑ„ÄÇ ÂÖ∂‰∏≠ÔºåÁõ¥Êé•Êª°Ë∂≥‰∏äËø∞ÂàùÂßãÂåñÊù°‰ª∂ÁöÑÊÉÖÂÜµÂè´ÂÅö‰∏ªÂä®ÂºïÁî®ÔºõÈó¥Êé•Êª°Ë∂≥‰∏äËø∞ÂàùÂßãÂåñËøáÁ®ãÁöÑÊÉÖÂÜµÂè´ÂÅöË¢´Âä®ÂºïÁî®„ÄÇ ÈÇ£‰πàÔºåÂè™ÊúâÂΩìÁ®ãÂ∫èÂú®ËøêË°åËøáÁ®ã‰∏≠Êª°Ë∂≥‰∏ªÂä®ÂºïÁî®ÁöÑÊó∂ÂÄôÊâç‰ºöÂàùÂßãÂåñ‰∏Ä‰∏™Á±ªÔºåËã•Êª°Ë∂≥Ë¢´Âä®ÂºïÁî®Â∞±‰∏ç‰ºöÂàùÂßãÂåñ‰∏Ä‰∏™Á±ª„ÄÇ Ë¢´Âä®ÂºïÁî®ÁöÑÂú∫ÊôØÁ§∫‰æã Á§∫‰æã‰∏Ä 12345678910111213141516public class Fu&#123; public static String name = "Á±ªÂàùÂßãÂåñÁöÑÊó∂Êú∫"; static&#123; System.out.println("Áà∂Á±ªË¢´ÂàùÂßãÂåñÔºÅ"); &#125;&#125;public class Zi&#123; static&#123; System.out.println("Â≠êÁ±ªË¢´ÂàùÂßãÂåñÔºÅ"); &#125;&#125;public static void main(String[] args)&#123; System.out.println(Zi.name);&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËæìÂá∫ÁªìÊûúÔºö &lt;/span&gt; 12Áà∂Á±ªË¢´ÂàùÂßãÂåñÔºÅ Á±ªÂàùÂßãÂåñÁöÑÊó∂Êú∫ &lt;span id=&quot;inline-green&quot;&gt; ÂéüÂõ†ÂàÜÊûêÔºö &lt;/span&gt; Êú¨Á§∫‰æãÁúã‰ººÊª°Ë∂≥ÂàùÂßãÂåñÊó∂Êú∫ÁöÑÁ¨¨‰∏ÄÊù°ÔºöÂΩìË¶ÅËé∑ÂèñÊüê‰∏Ä‰∏™Á±ªÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáèÁöÑÊó∂ÂÄôÂ¶ÇÊûúËØ•Á±ªÂ∞öÊú™ÂàùÂßãÂåñÔºåÂàôÂØπËØ•Á±ªËøõË°åÂàùÂßãÂåñ„ÄÇ ‰ΩÜÁî±‰∫éËøô‰∏™ÈùôÊÄÅÊàêÂëòÂèòÈáèÂ±û‰∫éFuÁ±ªÔºåZiÁ±ªÂè™ÊòØÈó¥Êé•Ë∞ÉÁî®FuÁ±ª‰∏≠ÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáèÔºåÂõ†Ê≠§ZiÁ±ªË∞ÉÁî®nameÂ±ûÊÄßÂ±û‰∫éÈó¥Êé•ÂºïÁî®ÔºåËÄåFuÁ±ªË∞ÉÁî®nameÂ±ûÊÄßÂ±û‰∫éÁõ¥Êé•ÂºïÁî®ÔºåÁî±‰∫éJVMÂè™ÂàùÂßãÂåñÁõ¥Êé•ÂºïÁî®ÁöÑÁ±ªÔºåÂõ†Ê≠§Âè™ÊúâFuÁ±ªË¢´ÂàùÂßãÂåñ„ÄÇ Á§∫‰æã‰∫å 12345public class Test&#123; public static void main(String[] args)&#123; Fu[] arr = new Fu[10]; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËæìÂá∫ÁªìÊûúÔºö &lt;/span&gt; Âπ∂Ê≤°ÊúâËæìÂá∫‚ÄúÁà∂Á±ªË¢´ÂàùÂßãÂåñÔºÅ‚Äù &lt;span id=&quot;inline-green&quot;&gt; ÂéüÂõ†ÂàÜÊûêÔºö &lt;/span&gt; Ëøô‰∏™ËøáÁ®ãÁúã‰ººÊª°Ë∂≥ÂàùÂßãÂåñÊó∂Êú∫ÁöÑÁ¨¨‰∏ÄÊù°ÔºöÈÅáÂà∞newÂàõÂª∫ÂØπË±°Êó∂Ëã•Á±ªÊ≤°Ë¢´ÂàùÂßãÂåñÔºåÂàôÂàùÂßãÂåñËØ•Á±ª„ÄÇ ‰ΩÜÁé∞Âú®ÈÄöËøánewË¶ÅÂàõÂª∫ÁöÑÊòØ‰∏Ä‰∏™Êï∞ÁªÑÂØπË±°ÔºåËÄåÈùûFuÁ±ªÂØπË±°ÔºåÂõ†Ê≠§‰πüÂ±û‰∫éÈó¥Êé•ÂºïÁî®Ôºå‰∏ç‰ºöÂàùÂßãÂåñFuÁ±ª„ÄÇ Á§∫‰æã‰∏â 123456789101112public class Fu&#123; public static final String name = "Á±ªÂàùÂßãÂåñÁöÑÊó∂Êú∫"; static&#123; System.out.println("Áà∂Á±ªË¢´ÂàùÂßãÂåñÔºÅ"); &#125;&#125;public class Son&#123; public static void main(String[] args)&#123; System.out.println(Fu.name); &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËæìÂá∫ÁªìÊûúÔºö &lt;/span&gt; Á±ªÂàùÂßãÂåñÁöÑÊó∂Êú∫ &lt;span id=&quot;inline-green&quot;&gt; ÂéüÂõ†ÂàÜÊûêÔºö &lt;/span&gt; Êú¨Á§∫‰æãÁúã‰ººÊª°Ë∂≥Á±ªÂàùÂßãÂåñÊó∂Êú∫ÁöÑÁ¨¨‰∏Ä‰∏™Êù°‰ª∂ÔºöËé∑Âèñ‰∏Ä‰∏™Á±ªÈùôÊÄÅÊàêÂëòÂèòÈáèÁöÑÊó∂ÂÄôËã•Á±ªÂ∞öÊú™ÂàùÂßãÂåñÂàôÂàùÂßãÂåñÁ±ª„ÄÇ ‰ΩÜÊòØÔºåFuÁ±ªÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáèË¢´final‰øÆÈ•∞ÔºåÂÆÉÂ∑≤ÁªèÊòØ‰∏Ä‰∏™Â∏∏Èáè„ÄÇË¢´final‰øÆÈ•∞ÁöÑÂ∏∏ÈáèÂú®Java‰ª£Á†ÅÁºñËØëÁöÑËøáÁ®ã‰∏≠Â∞±‰ºöË¢´ÊîæÂÖ•ÂÆÉË¢´ÂºïÁî®ÁöÑclassÊñá‰ª∂ÁöÑÂ∏∏ÈáèÊ±†‰∏≠(ËøôÈáåÊòØAÁöÑÂ∏∏ÈáèÊ±†)„ÄÇÊâÄ‰ª•Á®ãÂ∫èÂú®ËøêË°åÊúüÈó¥Â¶ÇÊûúÈúÄË¶ÅË∞ÉÁî®Ëøô‰∏™Â∏∏ÈáèÔºåÁõ¥Êé•ÂéªÂΩìÂâçÁ±ªÁöÑÂ∏∏ÈáèÊ±†‰∏≠ÂèñÔºåËÄå‰∏çÈúÄË¶ÅÂàùÂßãÂåñËøô‰∏™Á±ª„ÄÇ Êé•Âè£ÁöÑÂàùÂßãÂåñ Êé•Âè£ÂíåÁ±ªÈÉΩÈúÄË¶ÅÂàùÂßãÂåñÔºåÊé•Âè£ÂíåÁ±ªÁöÑÂàùÂßãÂåñËøáÁ®ãÂü∫Êú¨‰∏ÄÊ†∑Ôºå‰∏çÂêåÁÇπÂú®‰∫éÔºöÁ±ªÂàùÂßãÂåñÊó∂ÔºåÂ¶ÇÊûúÂèëÁé∞Áà∂Á±ªÂ∞öÊú™Ë¢´ÂàùÂßãÂåñÔºåÂàôÂÖàË¶ÅÂàùÂßãÂåñÁà∂Á±ªÔºåÁÑ∂ÂêéÂÜçÂàùÂßãÂåñËá™Â∑±Ôºõ‰ΩÜÊé•Âè£ÂàùÂßãÂåñÊó∂ÔºåÂπ∂‰∏çË¶ÅÊ±ÇÁà∂Êé•Âè£Â∑≤ÁªèÂÖ®ÈÉ®ÂàùÂßãÂåñÔºåÂè™ÊúâÁ®ãÂ∫èÂú®ËøêË°åËøáÁ®ã‰∏≠Áî®Âà∞ÂΩìÁà∂Êé•Âè£‰∏≠ÁöÑ‰∏úË•øÊó∂ÊâçÂàùÂßãÂåñÁà∂Êé•Âè£„ÄÇ Á±ªÂä†ËΩΩÁöÑËøáÁ®ã Âä†ËΩΩ &lt;font color=&quot;red&quot;&gt;Ê≥®ÊÑèÔºö‚ÄúÂä†ËΩΩ‚ÄùÊòØ‚ÄúÁ±ªÂä†ËΩΩ‚ÄùËøáÁ®ãÁöÑÁ¨¨‰∏ÄÊ≠•ÔºåÂçÉ‰∏á‰∏çË¶ÅÊ∑∑Ê∑Ü„ÄÇ&lt;/font&gt; Âä†ËΩΩÁöÑËøáÁ®ã Âú®Âä†ËΩΩËøáÁ®ã‰∏≠ÔºåJVM‰∏ªË¶ÅÂÅö3‰ª∂‰∫ãÊÉÖÔºö ÈÄöËøá‰∏Ä‰∏™Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÊù•Ëé∑ÂèñËøô‰∏™Á±ªÁöÑ‰∫åËøõÂà∂Â≠óËäÇÊµÅÔºåÂç≥classÊñá‰ª∂Ôºö Âú®Á®ãÂ∫èËøêË°åËøáÁ®ã‰∏≠ÔºåÂΩìË¶ÅËÆøÈóÆ‰∏Ä‰∏™Á±ªÊó∂ÔºåËã•ÂèëÁé∞Ëøô‰∏™Á±ªÂ∞öÊú™Ë¢´Âä†ËΩΩÔºåÂπ∂Êª°Ë∂≥Á±ªÂàùÂßãÂåñÊó∂Êú∫ÁöÑÊù°‰ª∂Êó∂ÔºåÂ∞±Ê†πÊçÆË¶ÅË¢´ÂàùÂßãÂåñÁöÑËøô‰∏™Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÊâæÂà∞ËØ•Á±ªÁöÑ‰∫åËøõÂà∂Â≠óËäÇÊµÅÔºåÂºÄÂßãÂä†ËΩΩËøáÁ®ã„ÄÇ Â∞Ü‰∫åËøõÂà∂Â≠óËäÇÊµÅÁöÑÂ≠òÂÇ®ÁªìÊûÑËΩ¨Âåñ‰∏∫ÁâπÂÆöÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ≠òÂÇ®Âú®ÊñπÊ≥ïÂå∫‰∏≠Ôºõ Âú®ÂÜÖÂ≠ò‰∏≠ÂàõÂª∫‰∏Ä‰∏™java.lang.ClassÁ±ªÂûãÁöÑÂØπË±°Ôºö Êé•‰∏ãÊù•Á®ãÂ∫èÂú®ËøêË°åËøáÁ®ã‰∏≠ÊâÄÊúâÂØπËØ•Á±ªÁöÑËÆøÈóÆÈÉΩÈÄöËøáËøô‰∏™Á±ªÂØπË±°Ôºå‰πüÂ∞±ÊòØËøô‰∏™ClassÁ±ªÂûãÁöÑÁ±ªÂØπË±°ÊòØÊèê‰æõÁªôÂ§ñÁïåËÆøÈóÆËØ•Á±ªÁöÑÊé•Âè£„ÄÇ ‰ªéÂì™ÈáåÂä†ËΩΩ JVMËßÑËåÉÂØπ‰∫éÂä†ËΩΩËøáÁ®ãÁªô‰∫à‰∫ÜËæÉÂ§ßÁöÑÂÆΩÊùæÂ∫¶„ÄÇ‰∏ÄËà¨‰∫åËøõÂà∂Â≠óËäÇÊµÅÈÉΩ‰ªéÂ∑≤ÁªèÁºñËØëÂ•ΩÁöÑÊú¨Âú∞classÊñá‰ª∂‰∏≠ËØªÂèñÔºåÊ≠§Â§ñËøòÂèØ‰ª•‰ªé‰ª•‰∏ãÂú∞ÊñπËØªÂèñÔºö ‰ªéÂéãÁº©ÂåÖ‰∏≠ËØªÂèñÔºåÂ¶ÇÔºöJar„ÄÅWar„ÄÅEarÁ≠â„ÄÇ ‰ªéÂÖ∂ÂÆÉÊñá‰ª∂‰∏≠Âä®ÊÄÅÁîüÊàêÔºåÂ¶ÇÔºö‰ªéJSPÊñá‰ª∂‰∏≠ÁîüÊàêClassÁ±ª„ÄÇ ‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ËØªÂèñÔºåÂ∞Ü‰∫åËøõÂà∂Â≠óËäÇÊµÅÂ≠òÂÇ®Ëá≥Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÁÑ∂ÂêéÂú®Âä†ËΩΩÊó∂‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ËØªÂèñ„ÄÇÊúâ‰∫õ‰∏≠Èó¥‰ª∂‰ºöËøô‰πàÂÅöÔºåÁî®Êù•ÂÆûÁé∞‰ª£Á†ÅÂú®ÈõÜÁæ§Èó¥ÂàÜÂèë„ÄÇ ‰ªéÁΩëÁªú‰∏≠Ëé∑ÂèñÔºå‰ªéÁΩëÁªú‰∏≠Ëé∑Âèñ‰∫åËøõÂà∂Â≠óËäÇÊµÅ„ÄÇÂÖ∏ÂûãÂ∞±ÊòØApplet„ÄÇ Á±ª Âíå Êï∞ÁªÑÂä†ËΩΩËøáÁ®ãÁöÑÂå∫Âà´ Êï∞ÁªÑ‰πüÊúâÁ±ªÂûãÔºåÁß∞‰∏∫‚ÄúÊï∞ÁªÑÁ±ªÂûã‚Äù„ÄÇÂ¶ÇÔºöString[] str = new String[10]; Ëøô‰∏™Êï∞ÁªÑÁöÑÊï∞ÁªÑÁ±ªÂûãÊòØLjava.lang.StringÔºåËÄåStringÂè™ÊòØËøô‰∏™Êï∞ÁªÑ‰∏≠ÂÖÉÁ¥†ÁöÑÁ±ªÂûã„ÄÇ ÂΩìÁ®ãÂ∫èÂú®ËøêË°åËøáÁ®ã‰∏≠ÈÅáÂà∞newÂÖ≥ÈîÆÂ≠óÂàõÂª∫‰∏Ä‰∏™Êï∞ÁªÑÊó∂ÔºåÁî±JVMÁõ¥Êé•ÂàõÂª∫Êï∞ÁªÑÁ±ªÔºåÂÜçÁî±Á±ªÂä†ËΩΩÂô®ÂàõÂª∫Êï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†Á±ª„ÄÇ ËÄåÊôÆÈÄöÁ±ªÁöÑÂä†ËΩΩÁî±Á±ªÂä†ËΩΩÂô®ÂÆåÊàê„ÄÇÊó¢ÂèØ‰ª•‰ΩøÁî®Á≥ªÁªüÊèê‰æõÁöÑÂºïÂØºÁ±ªÂä†ËΩΩÂô®Ôºå‰πüÂèØ‰ª•‰ΩøÁî®Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÁ±ªÂä†ËΩΩÂô®„ÄÇ Âä†ËΩΩËøáÁ®ãÁöÑÊ≥®ÊÑèÁÇπ JVMËßÑËåÉÂπ∂Êú™ÁªôÂá∫Á±ªÂú®ÊñπÊ≥ïÂå∫‰∏≠Â≠òÊîæÁöÑÊï∞ÊçÆÁªìÊûÑ Á±ªÂÆåÊàêÂä†ËΩΩÂêéÔºå‰∫åËøõÂà∂Â≠óËäÇÊµÅÂ∞±‰ª•ÁâπÂÆöÁöÑÊï∞ÊçÆÁªìÊûÑÂ≠òÂÇ®Âú®ÊñπÊ≥ïÂå∫‰∏≠Ôºå‰ΩÜÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÁªìÊûÑÊòØÁî±ËôöÊãüÊú∫Ëá™Â∑±ÂÆö‰πâÁöÑÔºåJVMËßÑËåÉÂπ∂Ê≤°ÊúâÊåáÂÆö„ÄÇ JVMËßÑËåÉÂπ∂Ê≤°ÊúâÊåáÂÆöClassÂØπË±°Â≠òÊîæÁöÑ‰ΩçÁΩÆ Âú®‰∫åËøõÂà∂Â≠óËäÇÊµÅ‰ª•ÁâπÂÆöÊ†ºÂºèÂ≠òÂÇ®Âú®ÊñπÊ≥ïÂå∫ÂêéÔºåJVM‰ºöÂàõÂª∫‰∏Ä‰∏™java.lang.ClassÁ±ªÂûãÁöÑÂØπË±°Ôºå‰Ωú‰∏∫Êú¨Á±ªÁöÑÂ§ñÈÉ®Êé•Âè£„ÄÇÊó¢ÁÑ∂ÊòØÂØπË±°Â∞±Â∫îËØ•Â≠òÊîæÂú®Â†ÜÂÜÖÂ≠ò‰∏≠Ôºå‰∏çËøáJVMËßÑËåÉÂπ∂Ê≤°ÊúâÁªôÂá∫ÈôêÂà∂Ôºå‰∏çÂêåÁöÑËôöÊãüÊú∫Ê†πÊçÆËá™Â∑±ÁöÑÈúÄÊ±ÇÂ≠òÊîæËøô‰∏™ÂØπË±°„ÄÇHotSpotÂ∞ÜClassÂØπË±°Â≠òÊîæÂú®ÊñπÊ≥ïÂå∫„ÄÇ Âä†ËΩΩÈò∂ÊÆµÂíåËøûÊé•Èò∂ÊÆµÊòØ‰∫§ÂèâÁöÑ ÈÄöËøáÂâçÊñáÂèØÁü•ÔºåÁ±ªÂä†ËΩΩËøáÁ®ã‰∏≠ÊØè‰∏™Ê≠•È™§ÁöÑÂºÄÂßãÈ°∫Â∫èÈÉΩÊúâ‰∏•Ê†ºÈôêÂà∂Ôºå‰ΩÜÊØè‰∏™Ê≠•È™§ÁöÑÁªìÊùüÈ°∫Â∫èÊ≤°ÊúâÈôêÂà∂„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÁ±ªÂä†ËΩΩËøáÁ®ã‰∏≠ÔºåÂøÖÈ°ªÊåâÁÖßÂ¶Ç‰∏ãÈ°∫Â∫èÂºÄÂßãÔºö Âä†ËΩΩ„ÄÅËøûÊé•„ÄÅÂàùÂßãÂåñÔºå‰ΩÜÁªìÊùüÈ°∫Â∫èÊó†ÊâÄË∞ìÔºåÂõ†Ê≠§Áî±‰∫éÊØè‰∏™Ê≠•È™§Â§ÑÁêÜÊó∂Èó¥ÁöÑÈïøÁü≠‰∏ç‰∏ÄÂ∞±‰ºöÂØºËá¥Êúâ‰∫õÊ≠•È™§‰ºöÂá∫Áé∞‰∫§Âèâ„ÄÇ È™åËØÅ È™åËØÅÈò∂ÊÆµÊØîËæÉËÄóÊó∂ÔºåÂÆÉÈùûÂ∏∏ÈáçË¶Å‰ΩÜ‰∏ç‰∏ÄÂÆöÂøÖË¶ÅÔºåÂ¶ÇÊûúÊâÄËøêË°åÁöÑ‰ª£Á†ÅÂ∑≤ÁªèË¢´ÂèçÂ§ç‰ΩøÁî®ÂíåÈ™åËØÅËøáÔºåÈÇ£‰πàÂèØ‰ª•‰ΩøÁî®-Xverify:noneÂèÇÊï∞ÂÖ≥Èó≠Ôºå‰ª•Áº©Áü≠Á±ªÂä†ËΩΩÊó∂Èó¥„ÄÇ È™åËØÅÁöÑÁõÆÁöÑ È™åËØÅÊòØ‰∏∫‰∫Ü‰øùËØÅ‰∫åËøõÂà∂Â≠óËäÇÊµÅ‰∏≠ÁöÑ‰ø°ÊÅØÁ¨¶ÂêàËôöÊãüÊú∫ËßÑËåÉÔºåÂπ∂Ê≤°ÊúâÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇ ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÈ™åËØÅ ËôΩÁÑ∂JavaËØ≠Ë®ÄÊòØ‰∏ÄÈó®ÂÆâÂÖ®ÁöÑËØ≠Ë®ÄÔºåÂÆÉËÉΩÁ°Æ‰øùÁ®ãÂ∫èÁåøÊó†Ê≥ïËÆøÈóÆÊï∞ÁªÑËæπÁïå‰ª•Â§ñÁöÑÂÜÖÂ≠ò„ÄÅÈÅøÂÖçËÆ©‰∏Ä‰∏™ÂØπË±°ËΩ¨Êç¢Êàê‰ªªÊÑèÁ±ªÂûã„ÄÅÈÅøÂÖçË∑≥ËΩ¨Âà∞‰∏çÂ≠òÂú®ÁöÑ‰ª£Á†ÅË°åÔºåÂ¶ÇÊûúÂá∫Áé∞Ëøô‰∫õÊÉÖÂÜµÔºåÁºñËØëÊó†Ê≥ïÈÄöËøá„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåJavaËØ≠Ë®ÄÁöÑÂÆâÂÖ®ÊÄßÊòØÈÄöËøáÁºñËØëÂô®Êù•‰øùËØÅÁöÑ„ÄÇ ‰ΩÜÊòØÁºñËØëÂô®ÂíåËôöÊãüÊú∫ÊòØ‰∏§‰∏™Áã¨Á´ãÁöÑ‰∏úË•øÔºåËôöÊãüÊú∫Âè™ËÆ§‰∫åËøõÂà∂Â≠óËäÇÊµÅÔºåÂÆÉ‰∏ç‰ºöÁÆ°ÊâÄËé∑ÂæóÁöÑ‰∫åËøõÂà∂Â≠óËäÇÊµÅÊòØÂì™Êù•ÁöÑÔºåÂΩìÁÑ∂ÔºåÂ¶ÇÊûúÊòØÁºñËØëÂô®ÁªôÂÆÉÁöÑÔºåÈÇ£‰πàÂ∞±Áõ∏ÂØπÂÆâÂÖ®Ôºå‰ΩÜÂ¶ÇÊûúÊòØ‰ªéÂÖ∂ÂÆÉÈÄîÂæÑËé∑ÂæóÁöÑÔºåÈÇ£‰πàÊó†Ê≥ïÁ°Æ‰øùËØ•‰∫åËøõÂà∂Â≠óËäÇÊµÅÊòØÂÆâÂÖ®ÁöÑ„ÄÇÈÄöËøá‰∏äÊñáÂèØÁü•ÔºåËôöÊãüÊú∫ËßÑËåÉ‰∏≠Ê≤°ÊúâÈôêÂà∂‰∫åËøõÂà∂Â≠óËäÇÊµÅÁöÑÊù•Ê∫êÔºåÈÇ£‰πà‰ªªÊÑèÊù•Ê∫êÁöÑ‰∫åËøõÂà∂Â≠óËäÇÊµÅËôöÊãüÊú∫ÈÉΩËÉΩÊé•ÂèóÔºå‰∏∫‰∫ÜÈò≤Ê≠¢Â≠óËäÇÊµÅ‰∏≠ÊúâÂÆâÂÖ®ÈóÆÈ¢òÔºåÂõ†Ê≠§ÈúÄË¶ÅÈ™åËØÅÔºÅ È™åËØÅÁöÑËøáÁ®ã Êñá‰ª∂Ê†ºÂºèÈ™åËØÅ ÊòØÂê¶‰ª•È≠îÊï∞ 0xCAFEBABE ÂºÄÂ§¥ ‰∏ª„ÄÅÊ¨°ÁâàÊú¨Âè∑ÊòØÂê¶Âú®ÂΩìÂâçËôöÊãüÊú∫Â§ÑÁêÜËåÉÂõ¥‰πãÂÜÖ Â∏∏ÈáèÊ±†ÁöÑÂ∏∏ÈáèÊòØÂê¶Êúâ‰∏çË¢´ÊîØÊåÅÂ∏∏ÈáèÁöÑÁ±ªÂûãÔºàÊ£ÄÊü•Â∏∏Èáè tag Ê†áÂøóÔºâ ÊåáÂêëÂ∏∏ÈáèÁöÑÂêÑÁßçÁ¥¢ÂºïÂÄº‰∏≠ÊòØÂê¶ÊúâÊåáÂêë‰∏çÂ≠òÂú®ÁöÑÂ∏∏ÈáèÊàñ‰∏çÁ¨¶ÂêàÁ±ªÂûãÁöÑÂ∏∏Èáè CONSTANT_Utf8_info ÂûãÁöÑÂ∏∏Èáè‰∏≠ÊòØÂê¶Êúâ‰∏çÁ¨¶Âêà UTF8 ÁºñÁ†ÅÁöÑÊï∞ÊçÆ Class Êñá‰ª∂‰∏≠ÂêÑ‰∏™ÈÉ®ÂàÜÈõÜÊñá‰ª∂Êú¨Ë∫´ÊòØÂê¶ÊúâË¢´Âà†Èô§ÁöÑÈôÑÂä†ÁöÑÂÖ∂‰ªñ‰ø°ÊÅØ ‚Ä¶‚Ä¶ Ëøô‰∏™Èò∂ÊÆµ‰∏ªË¶ÅÈ™åËØÅËæìÂÖ•ÁöÑ‰∫åËøõÂà∂Â≠óËäÇÊµÅÊòØÂê¶Á¨¶ÂêàclassÊñá‰ª∂ÁªìÊûÑÁöÑËßÑËåÉ„ÄÇ‰∫åËøõÂà∂Â≠óËäÇÊµÅÂè™ÊúâÈÄöËøá‰∫ÜÊú¨Èò∂ÊÆµÁöÑÈ™åËØÅÔºåÊâç‰ºöË¢´ÂÖÅËÆ∏Â≠òÂÖ•Âà∞ÊñπÊ≥ïÂå∫‰∏≠„ÄÇ Êú¨È™åËØÅÈò∂ÊÆµÊòØÂü∫‰∫é‰∫åËøõÂà∂Â≠óËäÇÊµÅÁöÑÔºåËÄåÂêéÈù¢ÁöÑ‰∏â‰∏™È™åËØÅÈò∂ÊÆµÈÉΩÊòØÂú®ÊñπÊ≥ïÂå∫‰∏≠ËøõË°åÔºåÂπ∂Âü∫‰∫éÁ±ªÁâπÂÆöÁöÑÊï∞ÊçÆÁªìÊûÑÁöÑ„ÄÇ ÈÄöËøá‰∏äÊñáÂèØÁü•ÔºåÂä†ËΩΩÂºÄÂßãÂâçÔºå‰∫åËøõÂà∂Â≠óËäÇÊµÅËøòÊ≤°ËøõÊñπÊ≥ïÂå∫ÔºåËÄåÂä†ËΩΩÂÆåÊàêÂêéÔºå‰∫åËøõÂà∂Â≠óËäÇÊµÅÂ∑≤ÁªèÂ≠òÂÖ•ÊñπÊ≥ïÂå∫„ÄÇËÄåÂú®Êñá‰ª∂Ê†ºÂºèÈ™åËØÅÂâçÔºå‰∫åËøõÂà∂Â≠óËäÇÊµÅÂ∞öÊú™ËøõÂÖ•ÊñπÊ≥ïÂå∫ÔºåÊñá‰ª∂Ê†ºÂºèÈ™åËØÅÈÄöËøá‰πãÂêéÊâçËøõÂÖ•ÊñπÊ≥ïÂå∫„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂä†ËΩΩÂºÄÂßãÂêéÔºåÁ´ãÂç≥ÂêØÂä®‰∫ÜÊñá‰ª∂Ê†ºÂºèÈ™åËØÅÔºåÊú¨Èò∂ÊÆµÈ™åËØÅÈÄöËøáÂêéÔºå‰∫åËøõÂà∂Â≠óËäÇÊµÅË¢´ËΩ¨Êç¢ÊàêÁâπÂÆöÊï∞ÊçÆÁªìÊûÑÂ≠òÂÇ®Ëá≥ÊñπÊ≥ïÂå∫‰∏≠ÔºåÁªßËÄåÂºÄÂßã‰∏ãÈò∂ÊÆµÁöÑÈ™åËØÅÂíåÂàõÂª∫ClassÂØπË±°Á≠âÊìç‰Ωú„ÄÇËøô‰∏™ËøáÁ®ãÂç∞ËØÅ‰∫ÜÔºöÂä†ËΩΩÂíåÈ™åËØÅÊòØ‰∫§ÂèâËøõË°åÁöÑ„ÄÇ ÂÖÉÊï∞ÊçÆÈ™åËØÅ Ëøô‰∏™Á±ªÊòØÂê¶ÊúâÁà∂Á±ªÔºàÈô§ java.lang.Object ‰πãÂ§ñÔºâ Ëøô‰∏™Á±ªÁöÑÁà∂Á±ªÊòØÂê¶ÁªßÊâø‰∫Ü‰∏çÂÖÅËÆ∏Ë¢´ÁªßÊâøÁöÑÁ±ªÔºàfinal ‰øÆÈ•∞ÁöÑÁ±ªÔºâ Â¶ÇÊûúËøô‰∏™Á±ª‰∏çÊòØÊäΩË±°Á±ªÔºåÊòØÂê¶ÂÆûÁé∞‰∫ÜÂÖ∂Áà∂Á±ªÊàñÊé•Âè£‰πã‰∏≠Ë¶ÅÊ±ÇÂÆûÁé∞ÁöÑÊâÄÊúâÊñπÊ≥ï Á±ª‰∏≠ÁöÑÂ≠óÊÆµ„ÄÅÊñπÊ≥ïÊòØÂê¶‰∏éÁà∂Á±ª‰∫ßÁîüÁüõÁõæÔºàË¶ÜÁõñÁà∂Á±ª final Â≠óÊÆµ„ÄÅÂá∫Áé∞‰∏çÁ¨¶ÂêàËßÑËåÉÁöÑÈáçËΩΩÔºâ Êú¨Èò∂ÊÆµÂØπÊñπÊ≥ïÂå∫‰∏≠ÁöÑÂ≠óËäÇÁ†ÅÊèèËø∞‰ø°ÊÅØËøõË°åËØ≠‰πâÂàÜÊûêÔºåÁ°Æ‰øùÂÖ∂Á¨¶ÂêàJavaËØ≠Ê≥ïËßÑËåÉ„ÄÇ Â≠óËäÇÁ†ÅÈ™åËØÅ ‰øùËØÅ‰ªªÊÑèÊó∂ÂàªÊìç‰ΩúÊï∞Ê†àÁöÑÊï∞ÊçÆÁ±ªÂûã‰∏éÊåá‰ª§‰ª£Á†ÅÂ∫èÂàóÈÉΩÈû•ÈÖçÂêàÂ∑•‰ΩúÔºà‰∏ç‰ºöÂá∫Áé∞ÊåâÁÖß long Á±ªÂûãËØª‰∏Ä‰∏™ int ÂûãÊï∞ÊçÆÔºâ ‰øùËØÅË∑≥ËΩ¨Êåá‰ª§‰∏ç‰ºöË∑≥ËΩ¨Âà∞ÊñπÊ≥ï‰Ωì‰ª•Â§ñÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§‰∏ä ‰øùËØÅÊñπÊ≥ï‰Ωì‰∏≠ÁöÑÁ±ªÂûãËΩ¨Êç¢ÊòØÊúâÊïàÁöÑÔºàÂ≠êÁ±ªÂØπË±°ËµãÂÄºÁªôÁà∂Á±ªÊï∞ÊçÆÁ±ªÂûãÊòØÂÆâÂÖ®ÁöÑÔºåÂèçËøáÊù•‰∏çÂêàÊ≥ïÁöÑÔºâ ‚Ä¶‚Ä¶ ËøôÊòØÊï¥‰∏™È™åËØÅËøáÁ®ã‰∏≠ÊúÄÂ§çÊùÇÁöÑ‰∏Ä‰∏™Èò∂ÊÆµÔºå‰∏ªË¶ÅÁõÆÁöÑÊòØÈÄöËøáÊï∞ÊçÆÊµÅÂíåÊéßÂà∂ÊµÅÂàÜÊûêÔºåÁ°ÆÂÆöÁ®ãÂ∫èËØ≠‰πâÊòØÂêàÊ≥ïÁöÑ„ÄÅÁ¨¶ÂêàÈÄªËæëÁöÑ„ÄÇËøô‰∏™Èò∂ÊÆµÂØπÁ±ªÁöÑÊñπÊ≥ï‰ΩìËøõË°åÊ†°È™åÂàÜÊûêÔºå‰øùËØÅÊ†°È™åÁ±ªÁöÑÊñπÊ≥ïÂú®ËøêË°åÊó∂‰∏ç‰ºöÂÅöÂá∫Âç±ÂÆ≥ËôöÊãüÊú∫ÂÆâÂÖ®ÁöÑ‰∫ã‰ª∂„ÄÇ Á¨¶Âè∑ÂºïÁî®È™åËØÅ Á¨¶Âè∑ÂºïÁî®‰∏≠ÈÄöËøáÂ≠óÁ¨¶ÂàõÊèèËø∞ÁöÑÂÖ®ÈôêÂÆöÂêçÊòØÂê¶ËÉΩÊâæÂà∞ÂØπÂ∫îÁöÑÁ±ª Âú®ÊåáÂÆöÁ±ª‰∏≠ÊòØÂê¶Â≠òÂú®Á¨¶ÊñπÊ≥ïÁöÑÂ≠óÊÆµÊèèËø∞Á¨¶‰ª•ÂèäÁÆÄÂçïÂêçÁß∞ÊâÄÊèèËø∞ÁöÑÊñπÊ≥ïÂíåÂ≠óÊÆµ Á¨¶Âè∑ÂºïÁî®‰∏≠ÁöÑÁ±ª„ÄÅÂ≠óÊÆµ„ÄÅÊñπÊ≥ïÁöÑËÆøÈóÆÊÄßÔºàprivate„ÄÅprotected„ÄÅpublic„ÄÅdefaultÔºâÊòØÂê¶ÂèØË¢´ÂΩìÂâçÁ±ªËÆøÈóÆ ‚Ä¶‚Ä¶ Êú¨Èò∂ÊÆµÈ™åËØÅÂèëÁîüÂú®Ëß£ÊûêÈò∂ÊÆµÔºåÁ°Æ‰øùËß£ÊûêËÉΩÊ≠£Â∏∏ÊâßË°å„ÄÇÂ¶ÇÊûúÊó†Ê≥ïÈÄöËøáÁ¨¶Âè∑ÂºïÁî®È™åËØÅÂ∞ÜÊäõÂá∫‰∏Ä‰∏™ java.lang.IncompatibleClass.ChangeError ÂºÇÂ∏∏ÁöÑÂ≠êÁ±ª„ÄÇÂ¶Ç java.lang.IllegalAccessError„ÄÅjava.lang.NoSuchFieldError„ÄÅjava.lang.NoSuchMethodError Á≠â„ÄÇ ÂáÜÂ§á ÂáÜÂ§áÈò∂ÊÆµÂÆåÊàê‰∏§‰ª∂‰∫ãÊÉÖÔºö ‰∏∫Â∑≤ÁªèÂú®ÊñπÊ≥ïÂå∫‰∏≠ÁöÑÁ±ª‰∏≠ÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáèÂàÜÈÖçÂÜÖÂ≠ò Á±ªÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáè‰πüÂ≠òÂÇ®Âú®ÊñπÊ≥ïÂå∫‰∏≠„ÄÇ ‰∏∫ÈùôÊÄÅÊàêÂëòÂèòÈáèËÆæÁΩÆÂàùÂßãÂÄº ÂàùÂßãÂÄº‰∏∫0„ÄÅfalse„ÄÅnullÁ≠â„ÄÇ Êï∞ÊçÆÁ±ªÂûãÁöÑÈõ∂ÂÄº: Êï∞ÊçÆÁ±ªÂûã Èõ∂ÂÄº byte (byte) 0 short (short) 0 int 0 long 0L float 0.0f double 0.0d char '\u0000' boolean false reference null Á§∫‰æã1Ôºö 1public static String name = "ÊµãËØïÁ±ªÂä†ËΩΩ"; Âú®ÂáÜÂ§áÈò∂ÊÆµÔºåJVM‰ºöÂú®ÊñπÊ≥ïÂå∫‰∏≠‰∏∫nameÂàÜÈÖçÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂπ∂Ëµã‰∏äÂàùÂßãÂÄºnull„ÄÇ ÁªônameËµã‰∏ä‚ÄùÊµãËØïÁ±ªÂä†ËΩΩ‚ÄùÊòØÂú®ÂàùÂßãÂåñÈò∂ÊÆµÂÆåÊàêÁöÑ„ÄÇ Á§∫‰æã2: 1public static final String name = "ÊµãËØïÁ±ªÂä†ËΩΩ"; Ë¢´final‰øÆÈ•∞ÁöÑÂ∏∏ÈáèÂ¶ÇÊûúÊúâÂàùÂßãÂÄºÔºåÈÇ£‰πàÂú®ÁºñËØëÈò∂ÊÆµÂ∞±‰ºöÂ∞ÜÂàùÂßãÂÄºÂ≠òÂÖ•constantValueÂ±ûÊÄß‰∏≠ÔºåÂú®ÂáÜÂ§áÈò∂ÊÆµÂ∞±Â∞ÜconstantValueÁöÑÂÄºËµãÁªôËØ•Â≠óÊÆµ„ÄÇ Ëß£Êûê Ëß£ÊûêÈò∂ÊÆµÊòØËôöÊãüÊú∫Â∞ÜÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÁ¨¶Âè∑ÂºïÁî®ÊõøÊç¢‰∏∫Áõ¥Êé•ÂºïÁî®ÁöÑËøáÁ®ã„ÄÇ ÂàùÂßãÂåñ ÂàùÂßãÂåñÈò∂ÊÆµÂ∞±ÊòØÊâßË°åÁ±ªÊûÑÈÄ†Âô®clinit()ÁöÑËøáÁ®ã„ÄÇ clinit()ÊñπÊ≥ïÁî±ÁºñËØëÂô®Ëá™Âä®‰∫ßÁîüÔºåÊî∂ÈõÜÁ±ª‰∏≠static{}‰ª£Á†ÅÂùó‰∏≠ÁöÑÁ±ªÂèòÈáèËµãÂÄºËØ≠Âè•ÂíåÁ±ª‰∏≠ÈùôÊÄÅÊàêÂëòÂèòÈáèÁöÑËµãÂÄºËØ≠Âè•„ÄÇÂú®ÂáÜÂ§áÈò∂ÊÆµÔºåÁ±ª‰∏≠ÈùôÊÄÅÊàêÂëòÂèòÈáèÂ∑≤ÁªèÂÆåÊàê‰∫ÜÈªòËÆ§ÂàùÂßãÂåñÔºåËÄåÂú®ÂàùÂßãÂåñÈò∂ÊÆµÔºåclinit()ÊñπÊ≥ïÂØπÈùôÊÄÅÊàêÂëòÂèòÈáèËøõË°åÊòæÁ§∫ÂàùÂßãÂåñ„ÄÇ ÂàùÂßãÂåñËøáÁ®ãÁöÑÊ≥®ÊÑèÁÇπ clinit()ÊñπÊ≥ï‰∏≠ÈùôÊÄÅÊàêÂëòÂèòÈáèÁöÑËµãÂÄºÈ°∫Â∫èÊòØÊ†πÊçÆJava‰ª£Á†Å‰∏≠ÊàêÂëòÂèòÈáèÁöÑÂá∫Áé∞ÁöÑÈ°∫Â∫èÂÜ≥ÂÆöÁöÑ„ÄÇ ÈùôÊÄÅ‰ª£Á†ÅÂùóËÉΩËÆøÈóÆÂá∫Áé∞Âú®ÈùôÊÄÅ‰ª£Á†ÅÂùó‰πãÂâçÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáèÔºåÊó†Ê≥ïËÆøÈóÆÂá∫Áé∞Âú®ÈùôÊÄÅ‰ª£Á†ÅÂùó‰πãÂêéÁöÑÊàêÂëòÂèòÈáè„ÄÇ ÈùôÊÄÅ‰ª£Á†ÅÂùóËÉΩÁªôÂá∫Áé∞Âú®ÈùôÊÄÅ‰ª£Á†ÅÂùó‰πãÂêéÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáèËµãÂÄº„ÄÇ ÊûÑÈÄ†ÂáΩÊï∞init()ÈúÄË¶ÅÊòæÁ§∫Ë∞ÉÁî®Áà∂Á±ªÊûÑÈÄ†ÂáΩÊï∞ÔºåËÄåÁ±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞clinit()‰∏çÈúÄË¶ÅË∞ÉÁî®Áà∂Á±ªÁöÑÁ±ªÊûÑÈÄ†ÂáΩÊï∞ÔºåÂõ†‰∏∫ËôöÊãüÊú∫‰ºöÁ°Æ‰øùÂ≠êÁ±ªÁöÑclinit()ÊñπÊ≥ïÊâßË°åÂâçÂ∑≤ÁªèÊâßË°å‰∫ÜÁà∂Á±ªÁöÑclinit()ÊñπÊ≥ï„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™Á±ª/Êé•Âè£‰∏≠Ê≤°ÊúâÈùôÊÄÅ‰ª£Á†ÅÂùóÔºå‰πüÊ≤°ÊúâÈùôÊÄÅÊàêÂëòÂèòÈáèÁöÑËµãÂÄºÊìç‰ΩúÔºåÈÇ£‰πàÁºñËØëÂô®Â∞±‰∏ç‰ºöÁîüÊàêclinit()ÊñπÊ≥ï„ÄÇ Êé•Âè£‰πüÈúÄË¶ÅÈÄöËøáclinit()ÊñπÊ≥ï‰∏∫Êé•Âè£‰∏≠ÂÆö‰πâÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáèÊòæÁ§∫ÂàùÂßãÂåñ„ÄÇ Êé•Âè£‰∏≠‰∏çËÉΩ‰ΩøÁî®ÈùôÊÄÅ‰ª£Á†ÅÂùó„ÄÇ Êé•Âè£Âú®ÊâßË°åclinit()ÊñπÊ≥ïÂâçÔºåËôöÊãüÊú∫‰∏ç‰ºöÁ°Æ‰øùÂÖ∂Áà∂Êé•Âè£ÁöÑclinit()ÊñπÊ≥ïË¢´ÊâßË°åÔºåÂè™ÊúâÂΩìÁà∂Êé•Âè£‰∏≠ÁöÑÈùôÊÄÅÊàêÂëòÂèòÈáèË¢´‰ΩøÁî®Âà∞Êó∂Êâç‰ºöÊâßË°åÁà∂Êé•Âè£ÁöÑclinit()ÊñπÊ≥ï„ÄÇ ËôöÊãüÊú∫‰ºöÁªôclinit()ÊñπÊ≥ïÂä†ÈîÅÔºåÂõ†Ê≠§ÂΩìÂ§öÊù°Á∫øÁ®ãÂêåÊó∂ÊâßË°åÊüê‰∏Ä‰∏™Á±ªÁöÑclinit()ÊñπÊ≥ïÊó∂ÔºåÂè™Êúâ‰∏Ä‰∏™ÊñπÊ≥ï‰ºöË¢´ÊâßË°åÔºåÂÖ∂ÂÆÉÁöÑÊñπÊ≥ïÈÉΩË¢´ÈòªÂ°û„ÄÇÂπ∂‰∏îÔºåÂè™Ë¶ÅÊúâ‰∏Ä‰∏™clinit()ÊñπÊ≥ïÊâßË°åÂÆåÔºåÂÖ∂ÂÆÉÁöÑclinit()ÊñπÊ≥ïÂ∞±‰∏ç‰ºöÂÜçË¢´ÊâßË°å„ÄÇÂõ†Ê≠§ÔºåÂú®Âêå‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®‰∏ãÔºåÂêå‰∏Ä‰∏™Á±ªÂè™‰ºöË¢´ÂàùÂßãÂåñ‰∏ÄÊ¨°„ÄÇ Á±ªÂä†ËΩΩÂô® java.lang.ClassLoaderÁ±ªÁöÑÂü∫Êú¨ËÅåË¥£Â∞±ÊòØÊ†πÊçÆ‰∏Ä‰∏™ÊåáÂÆöÁöÑÁ±ªÁöÑÂêçÁß∞ÔºåÊâæÂà∞ÊàñËÄÖÁîüÊàêÂÖ∂ÂØπÂ∫îÁöÑÂ≠óËäÇÁ†ÅÔºåÁÑ∂Âêé‰ªéËøô‰∫õÂ≠óËäÇ‰ª£Á†Å‰∏≠ÂÆö‰πâÂá∫‰∏Ä‰∏™ Java Á±ªÔºåÂç≥ java.lang.ClassÁ±ªÁöÑ‰∏Ä‰∏™ÂÆû‰æã„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåClassLoaderËøòË¥üË¥£Âä†ËΩΩ Java Â∫îÁî®ÊâÄÈúÄÁöÑËµÑÊ∫êÔºåÂ¶ÇÂõæÂÉèÊñá‰ª∂ÂíåÈÖçÁΩÆÊñá‰ª∂Á≠â„ÄÇ‰∏∫‰∫ÜÂÆåÊàêÂä†ËΩΩÁ±ªÁöÑËøô‰∏™ËÅåË¥£ÔºåClassLoaderÊèê‰æõ‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑÊñπÊ≥ï: getParent() ËøîÂõûËØ•Á±ªÂä†ËΩΩÂô®ÁöÑÁà∂Á±ªÂä†ËΩΩÂô®„ÄÇ loadClass(String name) Âä†ËΩΩÂêçÁß∞‰∏∫ nameÁöÑÁ±ªÔºåËøîÂõûÁöÑÁªìÊûúÊòØ java.lang.ClassÁ±ªÁöÑÂÆû‰æã„ÄÇ findClass(String name) Êü•ÊâæÂêçÁß∞‰∏∫ nameÁöÑÁ±ªÔºåËøîÂõûÁöÑÁªìÊûúÊòØ java.lang.ClassÁ±ªÁöÑÂÆû‰æã„ÄÇ findLoadedClass(String name) Êü•ÊâæÂêçÁß∞‰∏∫ nameÁöÑÂ∑≤ÁªèË¢´Âä†ËΩΩËøáÁöÑÁ±ªÔºåËøîÂõûÁöÑÁªìÊûúÊòØ java.lang.ClassÁ±ªÁöÑÂÆû‰æã„ÄÇ defineClass(String name, byte[] b, int off, int len) ÊääÂ≠óËäÇÊï∞ÁªÑ b‰∏≠ÁöÑÂÜÖÂÆπËΩ¨Êç¢Êàê Java Á±ªÔºåËøîÂõûÁöÑÁªìÊûúÊòØjava.lang.ClassÁ±ªÁöÑÂÆû‰æã„ÄÇËøô‰∏™ÊñπÊ≥ïË¢´Â£∞Êòé‰∏∫ finalÁöÑ„ÄÇ resolveClass(Class) Á±ªÂä†ËΩΩÂô®ÁßçÁ±ª JVMÊèê‰æõÂ¶Ç‰∏ãÂõõÁßçÁ±ªÂä†ËΩΩÂô®Ôºö ÂêØÂä®Á±ªÂä†ËΩΩÂô® Ë¥üË¥£Âä†ËΩΩJava_Home\lib‰∏≠ÁöÑclassÊñá‰ª∂„ÄÇ Êâ©Â±ïÁ±ªÂä†ËΩΩÂô® Ë¥üË¥£Âä†ËΩΩJava_Home\lib\extÁõÆÂΩï‰∏ãÁöÑclassÊñá‰ª∂„ÄÇ Â∫îÁî®Á®ãÂ∫èÁ±ªÂä†ËΩΩÂô® Ë¥üË¥£Âä†ËΩΩÁî®Êà∑classpath‰∏ãÁöÑclassÊñá‰ª∂„ÄÇ Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô® Á±ªÂä†ËΩΩÁöÑÂÜÖÂ≠òÂàÜÂ∏ÉÊÉÖÂÜµ ÂºïÂØºÁ±ªÂä†ËΩΩÂô®(Bootstrap ClassLoaderÔºâÂä†ËΩΩÁ≥ªÁªüÁ±ªÂêéÔºåJVMÂÜÖÂ≠ò‰ºöÂëàÁé∞Â¶Ç‰∏ãÊ†ºÂ±ÄÔºö ÂºïÂØºÁ±ªÂä†ËΩΩÂô®Â∞ÜÁ±ª‰ø°ÊÅØÂä†ËΩΩÂà∞ÊñπÊ≥ïÂå∫‰∏≠Ôºå‰ª•ÁâπÂÆöÊñπÂºèÁªÑÁªáÔºåÂØπ‰∫éÊüê‰∏Ä‰∏™ÁâπÂÆöÁöÑÁ±ªËÄåË®ÄÔºåÂú®ÊñπÊ≥ïÂå∫‰∏≠ÂÆÉÂ∫îËØ•ÊúâÔºöËøêË°åÊó∂Â∏∏ÈáèÊ±†„ÄÅÁ±ªÂûã‰ø°ÊÅØ„ÄÅÂ≠óÊÆµ‰ø°ÊÅØ„ÄÅÊñπÊ≥ï‰ø°ÊÅØ„ÄÅÁ±ªÂä†ËΩΩÂô®ÁöÑÂºïÁî®ÔºåÂØπÂ∫îclassÂÆû‰æãÁöÑÂºïÁî®Á≠â‰ø°ÊÅØ„ÄÇ Á±ªÂä†ËΩΩÂô®ÁöÑÂºïÁî®,Áî±‰∫éËøô‰∫õÁ±ªÊòØÁî±ÂºïÂØºÁ±ªÂä†ËΩΩÂô®(Bootstrap Classloader)ËøõË°åÂä†ËΩΩÁöÑÔºåËÄåÂºïÂØºÁ±ªÂä†ËΩΩÂô®ÊòØÊúâC++ËØ≠Ë®ÄÂÆûÁé∞ÁöÑÔºåÊâÄ‰ª•ÊòØÊó†Ê≥ïËÆøÈóÆÁöÑÔºåÊïÖËÄåËØ•ÂºïÁî®‰∏∫NULL„ÄÇ ÂØπÂ∫îclassÂÆû‰æãÁöÑÂºïÁî®ÔºåÁ±ªÂä†ËΩΩÂô®Âú®Âä†ËΩΩÁ±ª‰ø°ÊÅØÊîæÂà∞ÊñπÊ≥ïÂå∫‰∏≠ÂêéÔºå‰ºöÂàõÂª∫‰∏Ä‰∏™ÂØπÂ∫îÁöÑClass Á±ªÂûãÁöÑÂÆû‰æãÊîæÂà∞Â†Ü(Heap)‰∏≠, ‰Ωú‰∏∫ÂºÄÂèë‰∫∫ÂëòËÆøÈóÆÊñπÊ≥ïÂå∫‰∏≠Á±ªÂÆö‰πâÁöÑÂÖ•Âè£ÂíåÂàáÂÖ•ÁÇπ„ÄÇ Âèå‰∫≤ÂßîÊ¥æÊ®°Âûã Â∑•‰ΩúËøáÁ®ã Â¶ÇÊûú‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®Êî∂Âà∞‰∫ÜÂä†ËΩΩÁ±ªÁöÑËØ∑Ê±ÇÔºåÂÆÉÈ¶ñÂÖàÂ∞ÜËØ∑Ê±Ç‰∫§Áî±Áà∂Á±ªÂä†ËΩΩÂô®Âä†ËΩΩÔºõËã•Áà∂Á±ªÂä†ËΩΩÂô®Âä†ËΩΩÂ§±Ë¥•ÔºåÂΩìÂâçÁ±ªÂä†ËΩΩÂô®Êâç‰ºöËá™Â∑±Âä†ËΩΩÁ±ª„ÄÇ ‰ΩúÁî® ÂÉèjava.lang.ObjectËøô‰∫õÂ≠òÊîæÂú®rt.jar‰∏≠ÁöÑÁ±ªÔºåÊó†ËÆ∫‰ΩøÁî®Âì™‰∏™Á±ªÂä†ËΩΩÂô®Âä†ËΩΩÔºåÊúÄÁªàÈÉΩ‰ºöÂßîÊ¥æÁªôÊúÄÈ°∂Á´ØÁöÑÂêØÂä®Á±ªÂä†ËΩΩÂô®Âä†ËΩΩÔºå‰ªéËÄå‰ΩøÂæó‰∏çÂêåÂä†ËΩΩÂô®Âä†ËΩΩÁöÑObjectÁ±ªÈÉΩÊòØÂêå‰∏Ä‰∏™„ÄÇ ÂéüÁêÜ Âèå‰∫≤ÂßîÊ¥æÊ®°ÂûãÁöÑ‰ª£Á†ÅÂú®java.lang.ClassLoaderÁ±ª‰∏≠ÁöÑloadClassÂáΩÊï∞‰∏≠ÂÆûÁé∞ÔºåÂÖ∂ÈÄªËæëÂ¶Ç‰∏ãÔºö Ôºà1ÔºâÈ¶ñÂÖàÊ£ÄÊü•Á±ªÊòØÂê¶Ë¢´Âä†ËΩΩÔºõ Ôºà2ÔºâËã•Êú™Âä†ËΩΩÔºåÂàôË∞ÉÁî®Áà∂Á±ªÂä†ËΩΩÂô®ÁöÑloadClassÊñπÊ≥ïÔºõ Ôºà3ÔºâËã•ËØ•ÊñπÊ≥ïÊäõÂá∫ClassNotFoundExceptionÂºÇÂ∏∏ÔºåÂàôË°®Á§∫Áà∂Á±ªÂä†ËΩΩÂô®Êó†Ê≥ïÂä†ËΩΩÔºåÂàôÂΩìÂâçÁ±ªÂä†ËΩΩÂô®Ë∞ÉÁî®findClassÂä†ËΩΩÁ±ªÔºõ Ôºà4ÔºâËã•Áà∂Á±ªÂä†ËΩΩÂô®ÂèØ‰ª•Âä†ËΩΩÔºåÂàôÁõ¥Êé•ËøîÂõûClassÂØπË±°Ôºõ Âä†ËΩΩÁ±ªÁöÑËøáÁ®ã Á±ªÂú®Âä†ËΩΩËøáÁ®ã‰∏≠Á±ªÂä†ËΩΩÂô®‰ºöÈ¶ñÂÖàÂßîÊâòÁªôÂÖ∂ÂÆÉÁ±ªÂä†ËΩΩÂô®Êù•Â∞ùËØïÂä†ËΩΩÊüê‰∏™Á±ª„ÄÇ ËøôÂ∞±ÊÑèÂë≥ÁùÄÁúüÊ≠£ÂÆåÊàêÁ±ªÁöÑÂä†ËΩΩÂ∑•‰ΩúÁöÑÁ±ªÂä†ËΩΩÂô®ÂíåÂêØÂä®Ëøô‰∏™Âä†ËΩΩËøáÁ®ãÁöÑÁ±ªÂä†ËΩΩÂô®ÔºåÊúâÂèØËÉΩ‰∏çÊòØÂêå‰∏Ä‰∏™„ÄÇ ÁúüÊ≠£ÂÆåÊàêÁ±ªÁöÑÂä†ËΩΩÂ∑•‰ΩúÊòØÈÄöËøáË∞ÉÁî® defineClassÊù•ÂÆûÁé∞ÁöÑÔºõËÄåÂêØÂä®Á±ªÁöÑÂä†ËΩΩËøáÁ®ãÊòØÈÄöËøáË∞ÉÁî® loadClassÊù•ÂÆûÁé∞ÁöÑ„ÄÇ ÂâçËÄÖÁß∞‰∏∫‰∏Ä‰∏™Á±ªÁöÑÂÆö‰πâÂä†ËΩΩÂô®Ôºàdefining loaderÔºâÔºåÂêéËÄÖÁß∞‰∏∫ÂàùÂßãÂä†ËΩΩÂô®Ôºàinitiating loaderÔºâ„ÄÇ Âú® Java ËôöÊãüÊú∫Âà§Êñ≠‰∏§‰∏™Á±ªÊòØÂê¶Áõ∏ÂêåÁöÑÊó∂ÂÄôÔºå‰ΩøÁî®ÁöÑÊòØÁ±ªÁöÑÂÆö‰πâÂä†ËΩΩÂô®„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂì™‰∏™Á±ªÂä†ËΩΩÂô®ÂêØÂä®Á±ªÁöÑÂä†ËΩΩËøáÁ®ãÂπ∂‰∏çÈáçË¶ÅÔºåÈáçË¶ÅÁöÑÊòØÊúÄÁªàÂÆö‰πâËøô‰∏™Á±ªÁöÑÂä†ËΩΩÂô®„ÄÇ ‰∏§ÁßçÁ±ªÂä†ËΩΩÂô®ÁöÑÂÖ≥ËÅî‰πãÂ§ÑÂú®‰∫éÔºö‰∏Ä‰∏™Á±ªÁöÑÂÆö‰πâÂä†ËΩΩÂô®ÊòØÂÆÉÂºïÁî®ÁöÑÂÖ∂ÂÆÉÁ±ªÁöÑÂàùÂßãÂä†ËΩΩÂô®„ÄÇÂ¶ÇÁ±ª com.example.OuterÂºïÁî®‰∫ÜÁ±ª com.example.InnerÔºåÂàôÁî±Á±ª com.example.OuterÁöÑÂÆö‰πâÂä†ËΩΩÂô®Ë¥üË¥£ÂêØÂä®Á±ª com.example.InnerÁöÑÂä†ËΩΩËøáÁ®ã„ÄÇÊñπÊ≥ï loadClass()ÊäõÂá∫ÁöÑÊòØ java.lang.ClassNotFoundExceptionÂºÇÂ∏∏ÔºõÊñπÊ≥ï defineClass()ÊäõÂá∫ÁöÑÊòØ java.lang.NoClassDefFoundErrorÂºÇÂ∏∏„ÄÇ Á±ªÂä†ËΩΩÂô®Âú®ÊàêÂäüÂä†ËΩΩÊüê‰∏™Á±ª‰πãÂêéÔºå‰ºöÊääÂæóÂà∞ÁöÑ java.lang.ClassÁ±ªÁöÑÂÆû‰æãÁºìÂ≠òËµ∑Êù•„ÄÇ‰∏ãÊ¨°ÂÜçËØ∑Ê±ÇÂä†ËΩΩËØ•Á±ªÁöÑÊó∂ÂÄôÔºåÁ±ªÂä†ËΩΩÂô®‰ºöÁõ¥Êé•‰ΩøÁî®ÁºìÂ≠òÁöÑÁ±ªÁöÑÂÆû‰æãÔºåËÄå‰∏ç‰ºöÂ∞ùËØïÂÜçÊ¨°Âä†ËΩΩ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂØπ‰∫é‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®ÂÆû‰æãÊù•ËØ¥ÔºåÁõ∏ÂêåÂÖ®ÂêçÁöÑÁ±ªÂè™Âä†ËΩΩ‰∏ÄÊ¨°ÔºåÂç≥ loadClassÊñπÊ≥ï‰∏ç‰ºöË¢´ÈáçÂ§çË∞ÉÁî®„ÄÇ ClassNotFoundException ÂΩìÂ∫îÁî®Á®ãÂ∫èËØïÂõæ‰ΩøÁî®‰ª•‰∏ãÊñπÊ≥ïÈÄöËøáÂ≠óÁ¨¶‰∏≤ÂêçÂä†ËΩΩÁ±ªÊó∂ÔºåÊäõÂá∫ËØ•ÂºÇÂ∏∏Ôºö Class Á±ª‰∏≠ÁöÑ forName ÊñπÊ≥ï„ÄÇ ClassLoader Á±ª‰∏≠ÁöÑ findSystemClass ÊñπÊ≥ï„ÄÇ ClassLoader Á±ª‰∏≠ÁöÑ loadClass ÊñπÊ≥ï„ÄÇ ‰ΩÜÊòØÊ≤°ÊúâÊâæÂà∞ÂÖ∑ÊúâÊåáÂÆöÂêçÁß∞ÁöÑÁ±ªÁöÑÂÆö‰πâ„ÄÇ‰ªé 1.4 ÁâàÊú¨ÂºÄÂßãÔºåÊ≠§ÂºÇÂ∏∏Â∑≤ÁªèÊõ¥Êñ∞Ôºå‰ª•Á¨¶ÂêàÈÄöÁî®ÁöÑÂºÇÂ∏∏ÈìæÊú∫Âà∂„ÄÇ Âú®ÊûÑÈÄ†Êó∂Êèê‰æõÂπ∂ÈÄöËøá getException() ÊñπÊ≥ïËÆøÈóÆÁöÑ‚ÄúÂä†ËΩΩÁ±ªÊó∂ÂºïÂèëÁöÑÂèØÈÄâÂºÇÂ∏∏‚ÄùÔºåÁé∞Âú®Ë¢´Áß∞‰∏∫ÂéüÂõ†ÔºåÂÆÉÂèØ‰ª•ÈÄöËøá Throwable.getCause() ÊñπÊ≥ï‰ª•Âèä‰∏é‰∏äÈù¢ÊèêÂà∞ÁöÑ‚ÄúÈÅóÁïôÊñπÊ≥ï‚ÄùÊù•ËÆøÈóÆ„ÄÇ NoClassDefFoundError ÂΩì Java ËôöÊãüÊú∫Êàñ ClassLoader ÂÆû‰æãËØïÂõæÂú®Á±ªÁöÑÂÆö‰πâ‰∏≠Âä†ËΩΩÔºà‰Ωú‰∏∫ÈÄöÂ∏∏ÊñπÊ≥ïË∞ÉÁî®ÁöÑ‰∏ÄÈÉ®ÂàÜÊàñËÄÖ‰Ωú‰∏∫‰ΩøÁî® new Ë°®ËææÂºèÂàõÂª∫ÁöÑÊñ∞ÂÆû‰æãÁöÑ‰∏ÄÈÉ®ÂàÜÔºâÔºå‰ΩÜÊó†Ê≥ïÊâæÂà∞ËØ•Á±ªÁöÑÂÆö‰πâÊó∂ÔºåÊäõÂá∫Ê≠§ÂºÇÂ∏∏„ÄÇ ÂºïËµ∑NoClassDefFoundErrorÁöÑ‰∏âÁßçÊÉÖÂÜµÔºö JARÈáçÂ§çÂºïÂÖ•ÔºåÁâàÊú¨‰∏ç‰∏ÄËá¥ÂØºËá≥ ÊâìÁ®ãÂ∫èÁâàÊú¨Êó∂ÔºåÊ≤°ÊúâÊääÂÖ≥ËÅîÁ±ªÊâìÂá∫ÂéªÔºàËøôÁßçÊÉÖÂÜµ‰∏ÄËà¨ÊòØÔºâ java.lang.nosuchmethoderror ËøòÊúâ‰∏ÄÁßçÊÉÖÂÜµÊòØAÂºïÁî®BÊó∂ÔºåBÂàùÂßãÂåñÂ§±Ë¥•Êó∂‰πü‰ºöÂØºËá¥‰ª•‰∏äÁöÑÈîôËØØÂá∫Áé∞„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>JVM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-Ë£ÖÈ•∞Âô®Ê®°Âºè]]></title>
    <url>%2Fposts%2F4f101877.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ Ë£ÖÈ•∞ËÄÖÊ®°Âºè(Decorator Pattern)ÔºöÂä®ÊÄÅÂú∞Áªô‰∏Ä‰∏™ÂØπË±°Â¢ûÂä†‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑËÅåË¥£ÔºåÂ¢ûÂä†ÂØπË±°ÂäüËÉΩÊù•ËØ¥ÔºåË£ÖÈ•∞Ê®°ÂºèÊØîÁîüÊàêÂ≠êÁ±ªÂÆûÁé∞Êõ¥‰∏∫ÁÅµÊ¥ª„ÄÇË£ÖÈ•∞Ê®°ÂºèÊòØ‰∏ÄÁßçÂØπË±°ÁªìÊûÑÂûãÊ®°Âºè„ÄÇ Ê®°ÂºèÂéüÁêÜ ËÆ©Ë£ÖÈ•∞Âô®ÂÆûÁé∞Ë¢´ÂåÖË£ÖÁ±ªÔºàConcrete ComponentÔºâÁõ∏ÂêåÁöÑÊé•Âè£ÔºàComponentÔºâÔºà‰ΩøÂæóË£ÖÈ•∞Âô®‰∏éË¢´Êâ©Â±ïÁ±ªÁ±ªÂûã‰∏ÄËá¥ÔºâÔºåÂπ∂Âú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠‰º†ÂÖ•ËØ•Êé•Âè£ÔºàComponentÔºâÂØπË±°ÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•Âú®Êé•Âè£ÈúÄË¶ÅÂÆûÁé∞ÁöÑÊñπÊ≥ï‰∏≠Âú®Ë¢´ÂåÖË£ÖÁ±ªÂØπË±°ÁöÑÁé∞ÊúâÂäüËÉΩ‰∏äÊ∑ªÂä†Êñ∞ÂäüËÉΩ‰∫Ü„ÄÇ Ê®°ÂºèËßíËâ≤ ÊäΩË±°ÁªÑ‰ª∂ÔºàComponentÔºâÔºöÂèØ‰ª•ÊòØ‰∏Ä‰∏™Êé•Âè£ÊàñËÄÖÊäΩË±°Á±ªÔºåÂÖ∂ÂÖÖÂΩìË¢´Ë£ÖÈ•∞Á±ªÁöÑÂéüÂßãÂØπË±°ÔºåËßÑÂÆö‰∫ÜË¢´Ë£ÖÈ•∞ÂØπË±°ÁöÑË°å‰∏∫Ôºõ ÂÖ∑‰ΩìÁªÑ‰ª∂ÔºàConcreteComponentÔºâÔºöÂÆûÁé∞/ÁªßÊâø Component ÁöÑ‰∏Ä‰∏™ÂÖ∑‰ΩìÂØπË±°Ôºå‰πüÂç≥ Ë¢´Ë£ÖÈ•∞ÂØπË±°Ôºõ ÊäΩË±°Ë£ÖÈ•∞Âô®ÔºàDecoratorÔºâÔºöÈÄöÁî®ÁöÑË£ÖÈ•∞ ConcreteComponent ÁöÑË£ÖÈ•∞Âô®ÔºåÂÖ∂ÂÜÖÈÉ®ÂøÖÁÑ∂Êúâ‰∏Ä‰∏™Â±ûÊÄßÊåáÂêë ComponentÊäΩË±°ÁªÑ‰ª∂ÔºõÂÖ∂ÂÆûÁé∞‰∏ÄËà¨ÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÔºå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜËÆ©ÂÖ∂Â≠êÁ±ªÊåâÁÖßÂÖ∂ÊûÑÈÄ†ÂΩ¢Âºè‰º†ÂÖ•‰∏Ä‰∏™ ComponentÊäΩË±°ÁªÑ‰ª∂ÔºåËøôÊòØÂº∫Âà∂ÁöÑÈÄöÁî®Ë°å‰∏∫ÔºàÂΩìÁÑ∂ÔºåÂ¶ÇÊûúÁ≥ªÁªü‰∏≠Ë£ÖÈ•∞ÈÄªËæëÂçï‰∏ÄÔºåÂπ∂‰∏çÈúÄË¶ÅÂÆûÁé∞ËÆ∏Â§öË£ÖÈ•∞Âô®ÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•ÁúÅÁï•ËØ•Á±ªÔºåËÄåÁõ¥Êé•ÂÆûÁé∞‰∏Ä‰∏™ ÂÖ∑‰ΩìË£ÖÈ•∞Âô®ÔºàConcreteDecoratorÔºâ Âç≥ÂèØÔºâÔºõ ÂÖ∑‰ΩìË£ÖÈ•∞Âô®ÔºàConcreteDecoratorÔºâÔºöDecorator ÁöÑÂÖ∑‰ΩìÂÆûÁé∞Á±ªÔºåÁêÜËÆ∫‰∏äÔºåÊØè‰∏™ ConcreteDecorator ÈÉΩÊâ©Â±ï‰∫Ü Component ÂØπË±°ÁöÑ‰∏ÄÁßçÂäüËÉΩÔºõ Ë£ÖÈ•∞Ê®°Âºè ËßíËâ≤ÂàÜÈÖçÁ¨¶ÂêàËÆæËÆ°Ê®°Âºè ÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºå‰æùËµñÂÄíÁΩÆÂéüÂàôÔºå‰ªéËÄå‰ΩøÂæóÂÖ∂ÂÖ∑Â§áÂæàÂº∫ÁöÑÊâ©Â±ïÊÄßÔºåÊúÄÁªàÊª°Ë∂≥ ÂºÄÈó≠ÂéüÂàô„ÄÇ UMLÁ±ªÂõæ Ê®°Âºè‰ºòÁÇπ ÂØπ‰∫éÊâ©Â±ï‰∏Ä‰∏™ÂØπË±°ÁöÑÂäüËÉΩÔºåË£ÖÈ•∞Ê®°ÂºèÊØîÁªßÊâøÊõ¥Âä†ÁÅµÊ¥ªÊÄßÔºå‰∏ç‰ºöÂØºËá¥Á±ªÁöÑ‰∏™Êï∞ÊÄ•ÂâßÂ¢ûÂä†„ÄÇ ÂèØ‰ª•ÈÄöËøá‰∏ÄÁßçÂä®ÊÄÅÁöÑÊñπÂºèÊù•Êâ©Â±ï‰∏Ä‰∏™ÂØπË±°ÁöÑÂäüËÉΩÔºåÈÄöËøáÈÖçÁΩÆÊñá‰ª∂ÂèØ‰ª•Âú®ËøêË°åÊó∂ÈÄâÊã©‰∏çÂêåÁöÑÂÖ∑‰ΩìË£ÖÈ•∞Á±ªÔºå‰ªéËÄåÂÆûÁé∞‰∏çÂêåÁöÑË°å‰∏∫„ÄÇ ÂèØ‰ª•ÂØπ‰∏Ä‰∏™ÂØπË±°ËøõË°åÂ§öÊ¨°Ë£ÖÈ•∞ÔºåÈÄöËøá‰ΩøÁî®‰∏çÂêåÁöÑÂÖ∑‰ΩìË£ÖÈ•∞Á±ª‰ª•ÂèäËøô‰∫õË£ÖÈ•∞Á±ªÁöÑÊéíÂàóÁªÑÂêàÔºåÂèØ‰ª•ÂàõÈÄ†Âá∫ÂæàÂ§ö‰∏çÂêåË°å‰∏∫ÁöÑÁªÑÂêàÔºåÂæóÂà∞ÂäüËÉΩÊõ¥‰∏∫Âº∫Â§ßÁöÑÂØπË±°„ÄÇ ÂÖ∑‰ΩìÁªÑ‰ª∂Á±ª‰∏éÂÖ∑‰ΩìË£ÖÈ•∞Á±ªÂèØ‰ª•Áã¨Á´ãÂèòÂåñÔºåÁî®Êà∑ÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÂ¢ûÂä†Êñ∞ÁöÑÂÖ∑‰ΩìÊûÑ‰ª∂Á±ªÂíåÂÖ∑‰ΩìË£ÖÈ•∞Á±ªÔºåÂéüÊúâÁ±ªÂ∫ì‰ª£Á†ÅÊó†È°ªÊîπÂèòÔºåÁ¨¶Âêà ‚ÄúÂºÄÈó≠ÂéüÂàô‚Äù„ÄÇ Ê®°ÂºèÁº∫ÁÇπ ‰ΩøÁî®Ë£ÖÈ•∞Ê®°ÂºèËøõË°åÁ≥ªÁªüËÆæËÆ°Êó∂Â∞Ü‰∫ßÁîüÂæàÂ§öÂ∞èÂØπË±°ÔºåËøô‰∫õÂØπË±°ÁöÑÂå∫Âà´Âú®‰∫éÂÆÉ‰ª¨‰πãÈó¥Áõ∏‰∫íËøûÊé•ÁöÑÊñπÂºèÊúâÊâÄ‰∏çÂêåÔºåËÄå‰∏çÊòØÂÆÉ‰ª¨ÁöÑÁ±ªÊàñËÄÖÂ±ûÊÄßÂÄºÊúâÊâÄ‰∏çÂêåÔºåÂ§ßÈáèÂ∞èÂØπË±°ÁöÑ‰∫ßÁîüÂäøÂøÖ‰ºöÂç†Áî®Êõ¥Â§öÁöÑÁ≥ªÁªüËµÑÊ∫êÔºåÂú®‰∏ÄÂÆöÁ®ãÂ∫è‰∏äÂΩ±ÂìçÁ®ãÂ∫èÁöÑÊÄßËÉΩ„ÄÇ Ë£ÖÈ•∞Ê®°ÂºèÊèê‰æõ‰∫Ü‰∏ÄÁßçÊØîÁªßÊâøÊõ¥Âä†ÁÅµÊ¥ªÊú∫Âä®ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºå‰ΩÜÂêåÊó∂‰πüÊÑèÂë≥ÁùÄÊØîÁªßÊâøÊõ¥Âä†Êòì‰∫éÂá∫ÈîôÔºåÊéíÈîô‰πüÂæàÂõ∞ÈöæÔºåÂØπ‰∫éÂ§öÊ¨°Ë£ÖÈ•∞ÁöÑÂØπË±°ÔºåË∞ÉËØïÊó∂ÂØªÊâæÈîôËØØÂèØËÉΩÈúÄË¶ÅÈÄêÁ∫ßÊéíÊü•ÔºåËæÉ‰∏∫ÁπÅÁêê„ÄÇ Â∫îÁî®Âú∫ÊôØ ÈúÄË¶ÅÊâ©Â±ï‰∏Ä‰∏™Á±ªÁöÑÂäüËÉΩÔºåÊàñÁªô‰∏Ä‰∏™Á±ªÂ¢ûÂä†ÈôÑÂä†ÂäüËÉΩÔºõ ÈúÄË¶ÅÂä®ÊÄÅÂú∞Áªô‰∏Ä‰∏™ÂØπË±°Â¢ûÂä†ÂäüËÉΩÔºå‰∏îËøô‰∫õÂäüËÉΩÂèØ‰ª•ÂÜçÂä®ÊÄÅÂú∞Êí§ÈîÄÔºõ ÈúÄË¶Å‰∏∫‰∏ÄÊâπÁöÑÂÖÑÂºüÁ±ªËøõË°åÊîπË£ÖÊàñÂä†Ë£ÖÂäüËÉΩÔºõ Â∫îÁî®Á§∫‰æã Á§∫‰æãËÉåÊôØ ÊâÄË∞ì‰∫∫Èù†Ë°£Ë£ÖÈ©¨Èù†ÈûçÔºåÂÅáËÆæÁé∞Âú®Ë¶Å‰∏∫Áî∑‰∫∫Â¢ûÂä†Á©øË°£ÊúçÁöÑÂäüËÉΩÔºàÁ©øË£§Â≠ê„ÄÅÁ©øÂÜÖË°£„ÄÅÁ©øÂ§ñÂ•óÔºâ„ÄÇ ÂàÜÊûê ‰ª• Ë£ÖÈ•∞Ê®°Âºè ÁöÑËßíÂ∫¶Êù•ÁúãÂæÖ‰∏äËø∞‰æãÂ≠êÔºå„Äå‰∫∫„ÄçÂ±û‰∫é Component ËßíËâ≤Ôºõ „ÄåÁî∑‰∫∫„Äç Â±û‰∫é ConcreteComponent ËßíËâ≤ÔºåÂõ†Ê≠§Ôºå„ÄåÁî∑‰∫∫„Äç ÊòØË¢´Ë£ÖÈ•∞ÂØπË±°Ôºõ „ÄåÁ©øË°£Êúç„Äç ÊòØÂäüËÉΩÊâ©Â±ïÔºåÂ±û‰∫é Decorator ËßíËâ≤Ôºõ ËÄå„ÄåÁ©øË£§Â≠ê„ÄçÔºå„ÄåÁ©øÂÜÖË°£„ÄçÔºå„ÄåÁ©øÂ§ñÂ•ó„Äç ÊòØ3‰∏™ÂÖ∑‰ΩìÂäüËÉΩÊâ©Â±ïÔºåÂùáÂ±û‰∫é ConcreteDecorator ËßíËâ≤Ôºõ ‰ΩøÁî®Ê≠•È™§ ÊäΩË±°ÁªÑ‰ª∂(Component) 123456789101112package main.java.com.study.designPatterns.decorator.demoOne;/** * @author: whb * @description: ÂÆö‰πâ‰∫∫--ÊäΩË±°ÁªÑ‰ª∂ÔºàComponentÔºâ */public interface IPerson &#123; /** * Á©øË°£Êúç */ void dress();&#125; ÂÖ∑‰ΩìÁªÑ‰ª∂(ConcreteComponent) 12345678910111213package main.java.com.study.designPatterns.decorator.demoOne;/** * @author: whb * @description: ÂÆö‰πâÁî∑‰∫∫--ÂÖ∑‰ΩìÁªÑ‰ª∂ÔºàConcreteComponentÔºâÔºåÂç≥Ë¢´‰øÆÈ•∞ËÄÖ */public class Man implements IPerson &#123; @Override public void dress() &#123; System.out.println("Á©ø‰∫ÜÂÜÖË£§ÔºÅ"); &#125;&#125; ÊäΩË±°Ë£ÖÈ•∞Âô®(Decorator) 12345678910111213141516171819202122package main.java.com.study.designPatterns.decorator.demoOne;/** * @author: whb * @description: ÂÆö‰πâË°£Êúç--ÊäΩË±°Ë£ÖÈ•∞Âô®ÔºàDecoratorÔºâÔºåÊé•Êî∂‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑComponentÔºåÊú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™Component */public abstract class ClothesDecorator implements IPerson &#123; protected IPerson mPerson; /** * ÊûÑÈÄ†ÊñπÊ≥ïÔºöÂº∫Âà∂Â≠êÁ±ªÊûÑÈÄ†Âô®ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™IPerson */ public ClothesDecorator(IPerson person) &#123; this.mPerson = person; &#125; @Override public void dress() &#123; this.mPerson.dress(); &#125;&#125; ÂÖ∑‰ΩìË£ÖÈ•∞Âô®(ConcreteDecorator) TrousersDecorator 123456789101112131415161718192021222324252627282930package main.java.com.study.designPatterns.decorator.demoOne;/** * @author: whb * @description: Ë£§Â≠êË£ÖÈ•∞Âô®-ÂÖ∑‰ΩìË£ÖÈ•∞Âô®ÔºàConcreteDecoratorÔºâ */public class TrousersDecorator extends ClothesDecorator &#123; /** * ÊûÑÈÄ†ÊñπÊ≥ïÔºöÂº∫Âà∂Â≠êÁ±ªÊûÑÈÄ†Âô®ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™IPerson * * @param person */ public TrousersDecorator(IPerson person) &#123; super(person); &#125; @Override public void dress() &#123; super.dress(); this.dressTrousers(); &#125; /** * Á©øË£§Â≠ê */ private void dressTrousers() &#123; System.out.println("Á©ø‰∏äË£§Â≠ê‰∫ÜÔºÅ"); &#125;&#125; UnderClothesDecorator 123456789101112131415161718192021222324252627282930package main.java.com.study.designPatterns.decorator.demoOne;/** * @author: whb * @description: ÂÜÖË°£Ë£ÖÈ•∞Âô® */public class UnderClothesDecorator extends ClothesDecorator &#123; /** * ÊûÑÈÄ†ÊñπÊ≥ïÔºöÂº∫Âà∂Â≠êÁ±ªÊûÑÈÄ†Âô®ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™IPerson * * @param person */ public UnderClothesDecorator(IPerson person) &#123; super(person); &#125; @Override public void dress() &#123; super.dress(); this.dressUnderClothes(); &#125; /** * Á©øÂÜÖË°£ */ private void dressUnderClothes() &#123; System.out.println("Á©ø‰∏äÂÜÖË°£‰∫ÜÔºÅ"); &#125;&#125; OvercoatDecorator 123456789101112131415161718192021222324252627282930package main.java.com.study.designPatterns.decorator.demoOne;/** * @author: whb * @description: Â§ñÂ•óË£ÖÈ•∞Âô® */public class OvercoatDecorator extends ClothesDecorator &#123; /** * ÊûÑÈÄ†ÊñπÊ≥ïÔºöÂº∫Âà∂Â≠êÁ±ªÊûÑÈÄ†Âô®ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™IPerson * * @param person */ public OvercoatDecorator(IPerson person) &#123; super(person); &#125; @Override public void dress() &#123; super.dress(); this.dressOvercoat(); &#125; /** * Á©øÂ§ñÂ•ó */ private void dressOvercoat() &#123; System.out.println("Á©ø‰∏äÂ§ñÂ•ó‰∫ÜÔºÅ"); &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® 12345678910111213141516171819202122232425262728package main.java.com.study.designPatterns.decorator.demoOne;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class Client &#123; public static void main(String[] args) &#123; IPerson person = new Man(); person.dress(); System.out.println("----------------------"); System.out.println("Â¢ûÂä†Ë£§Â≠êË£ÖÈ•∞Âô®"); person = new TrousersDecorator(person); person.dress(); System.out.println("----------------------"); System.out.println("ÂÜçÂ¢ûÂä†ÂÜÖË°£Ë£ÖÈ•∞Âô®"); person = new UnderClothesDecorator(person); person.dress(); System.out.println("----------------------"); System.out.println("ÂÜçÂ¢ûÂä†Â§ñÂ•óË£ÖÈ•∞Âô®"); person = new OvercoatDecorator(person); person.dress(); &#125;&#125; ‰∏äÈù¢‰ª£Á†Å‰∏≠ÂÆ¢Êà∑ÊòØ‰∏∫new Man()Ëøô‰∏™IPerson‰∏Ä‰ª∂‰∏Ä‰ª∂ÁöÑËøõË°åË°£ÊúçËØïÁ©øÔºåÂ§™Êµ™Ë¥πÊó∂Èó¥‰∫ÜÔºåÂÆåÂÖ®ÂèØ‰ª•‰ΩøÁî®Ë£ÖÈ•∞Âô®ÂµåÂ•óÔºàÂõ†‰∏∫Ë£ÖÈ•∞Âô®Êé•Êî∂‰∏Ä‰∏™IPersonÔºåËÄåËá™Â∑±ÂêåÊó∂‰πüÊòØ‰∏Ä‰∏™IPersonÔºåÂõ†Ê≠§ÂÆåÂÖ®ÊîØÊåÅÂµåÂ•óÔºâÊ®°ÂºèÔºåËøôÊ†∑‰∏ÄÊ¨°ÊÄßÂ∞±Á©øÂÆåÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112package main.java.com.study.designPatterns.decorator.demoOne;/** * @author: whb * @description: Ë£ÖÈ•∞Âô®ÂµåÂ•ó */public class Client2 &#123; public static void main(String[] args) &#123; IPerson person = new OvercoatDecorator(new UnderClothesDecorator(new TrousersDecorator(new Man()))); person.dress(); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-Âª∫ÈÄ†ËÄÖÊ®°Âºè]]></title>
    <url>%2Fposts%2F2a48474d.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ Âª∫ÈÄ†ËÄÖÊ®°Âºè(Builder Pattern)ÔºöÂ∞Ü‰∏Ä‰∏™Â§çÊùÇÂØπË±°ÁöÑÊûÑÂª∫‰∏éÂÆÉÁöÑË°®Á§∫ÂàÜÁ¶ªÔºå‰ΩøÂæóÂêåÊ†∑ÁöÑÊûÑÂª∫ËøáÁ®ãÂèØ‰ª•ÂàõÂª∫‰∏çÂêåÁöÑË°®Á§∫„ÄÇÂª∫ÈÄ†ËÄÖÊ®°ÂºèÊòØ‰∏ÄÁßçÂØπË±°ÂàõÂª∫ÂûãÊ®°Âºè„ÄÇ Âª∫ÈÄ†ËÄÖÊ®°Âºè‰∏ÄÊ≠•‰∏ÄÊ≠•ÂàõÂª∫‰∏Ä‰∏™Â§çÊùÇÁöÑÂØπË±°ÔºåÂÆÉÂÖÅËÆ∏Áî®Êà∑Âè™ÈÄöËøáÊåáÂÆöÂ§çÊùÇÂØπË±°ÁöÑÁ±ªÂûãÂíåÂÜÖÂÆπÂ∞±ÂèØ‰ª•ÊûÑÂª∫ÂÆÉ‰ª¨ÔºåÁî®Êà∑‰∏çÈúÄË¶ÅÁü•ÈÅìÂÜÖÈÉ®ÁöÑÂÖ∑‰ΩìÊûÑÂª∫ÁªÜËäÇ„ÄÇ ‰∏ªË¶Å‰ΩúÁî® Èôç‰ΩéÂàõÂª∫Â§çÊùÇÂØπË±°ÁöÑÂ§çÊùÇÂ∫¶Ôºõ ÈöîÁ¶ª‰∫ÜÂàõÂª∫ÂØπË±°ÁöÑÊûÑÂª∫ËøáÁ®ã &amp; Ë°®Á§∫„ÄÇ UMLÁ±ªÂõæ ËßíËâ≤ ÊäΩË±°Âª∫ÈÄ†ËÄÖÔºàBuilderÔºâÔºö‰∏ªË¶ÅÁî®‰∫éËßÑËåÉ‰∫ßÂìÅProductÂØπË±°ÁöÑÂêÑ‰∏™ÁªÑÊàêÈÉ®ÂàÜÔºåÂπ∂Êèê‰æõ‰∏Ä‰∏™ËøîÂõûÂÆåÊï¥‰∫ßÂìÅÁöÑÊé•Âè£ÔºåÂú®ËØ•Êé•Âè£‰∏≠‰∏ÄËà¨Â£∞Êòé‰∏§Á±ªÊñπÊ≥ïÔºå‰∏ÄÁ±ªÊñπÊ≥ïÊòØbuildPartX()ÔºåÂÆÉ‰ª¨Áî®‰∫éÂàõÂª∫Â§çÊùÇÂØπË±°ÁöÑÂêÑ‰∏™ÈÉ®‰ª∂ÔºõÂè¶‰∏ÄÁ±ªÊñπÊ≥ïÊòØgetResult()ÔºåÂÆÉ‰ª¨Áî®‰∫éËøîÂõûÂ§çÊùÇÂØπË±°„ÄÇBuilderÊó¢ÂèØ‰ª•ÊòØÊäΩË±°Á±ªÔºå‰πüÂèØ‰ª•ÊòØÊé•Âè£„ÄÇ ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÔºàConcrete BuilderÔºâÔºöÂÆûÁé∞ ÊäΩË±°Âª∫ÈÄ†ËÄÖ ËßÑÂÆöÁöÑÂêÑ‰∏™ÊñπÊ≥ïÔºåËøîÂõû‰∏Ä‰∏™ÁªÑÂª∫Â•ΩÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ„ÄÇ ‰∫ßÂìÅÔºàProductÔºâÔºöÂÆÉÊòØË¢´ÊûÑÂª∫ÁöÑÂ§çÊùÇÂØπË±°ÔºåÂåÖÂê´Â§ö‰∏™ÁªÑÊàêÈÉ®‰ª∂ÔºåÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÂàõÂª∫ËØ•‰∫ßÂìÅÁöÑÂÜÖÈÉ®Ë°®Á§∫Âπ∂ÂÆö‰πâÂÆÉÁöÑË£ÖÈÖçËøáÁ®ã„ÄÇ ÂØºÊºîËÄÖÔºàDirectorÔºâÔºöÂèàÁß∞ÊåáÊå•ËÄÖÔºåÂÆÉË¥üË¥£ÂÆâÊéíÂ§çÊùÇÂØπË±°ÁöÑÂª∫ÈÄ†Ê¨°Â∫èÔºåÊåáÊå•ËÄÖ‰∏éÊäΩË±°Âª∫ÈÄ†ËÄÖ‰πãÈó¥Â≠òÂú®ÂÖ≥ËÅîÂÖ≥Á≥ªÔºåÂèØ‰ª•Âú®ÂÖ∂construct()Âª∫ÈÄ†ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®Âª∫ÈÄ†ËÄÖÂØπË±°ÁöÑÈÉ®‰ª∂ÊûÑÈÄ†‰∏éË£ÖÈÖçÊñπÊ≥ïÔºåÂÆåÊàêÂ§çÊùÇÂØπË±°ÁöÑÂª∫ÈÄ†„ÄÇÂÆ¢Êà∑Á´Ø‰∏ÄËà¨Âè™ÈúÄË¶Å‰∏éÊåáÊå•ËÄÖËøõË°å‰∫§‰∫íÔºåÂú®ÂÆ¢Êà∑Á´ØÁ°ÆÂÆöÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÁöÑÁ±ªÂûãÔºåÂπ∂ÂÆû‰æãÂåñÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÂØπË±°Ôºà‰πüÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆÊñá‰ª∂ÂíåÂèçÂ∞ÑÊú∫Âà∂ÔºâÔºåÁÑ∂ÂêéÈÄöËøáÊåáÊå•ËÄÖÁ±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞ÊàñËÄÖSetterÊñπÊ≥ïÂ∞ÜËØ•ÂØπË±°‰º†ÂÖ•ÊåáÊå•ËÄÖÁ±ª‰∏≠„ÄÇ ÊÄªÁªìÔºö Âª∫ÈÄ†ËÄÖÊ®°Âºè ÊúÄÁªàËøîÂõû‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÊûÑÂª∫Â§çÊùÇÁöÑ‰∫ßÂìÅÔºõ Á≥ªÁªü‰∏≠‰∫ßÂìÅÂèØËÉΩÂè™Êúâ‰∏ÄÁßçÁ±ªÂûãÊàñÂ§öÁßçÁ±ªÂûãÔºå‰ΩÜÂØπÊüê‰∫õ‰∫ßÂìÅÊóèÊù•ËØ¥ÔºåÂÆÉ‰ª¨ÂÖ∑Â§áÁõ∏ÂêåÁöÑË°å‰∏∫ÔºåÂõ†Ê≠§ÂØπËøô‰∫õÂÖ±ÊÄßË°å‰∏∫ËøõË°åÊäΩË±°ÔºåÊäΩÁ¶ªÂá∫ ÊäΩË±°Âª∫ÈÄ†ËÄÖÔºàBuilderÔºâÔºõ ËÄåÂØπËøô‰∫õË°å‰∏∫ÁöÑÂÖ∑‰ΩìÊûÑÂª∫ËøáÁ®ãÔºåÂàô‰∫§Áî± ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÔºàConcrete BuilderÔºâ Ë¥üË¥£Ôºå‰∏çÂêåÁöÑ ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖ ‰ºöÊûÑÂª∫Âá∫‰∏çÂêåË°®Á§∫ÁöÑ‰∫ßÂìÅÔºõ ËÄåÂÖ∑‰ΩìË¶ÅÊûÑÂª∫Âá∫Âì™Áßç‰∫ßÂìÅÔºåÁî± ÂØºÊºîËÄÖÔºàDirectorÔºâ ÂÜ≥ÂÆö„ÄÇÂØºÊºîËÄÖ ‰ºöÈÄâÊã©‰∏çÂêåÁöÑ ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÔºåÊåáÂØºÂÆÉÊûÑÂª∫Âá∫‰∫ßÂìÅ„ÄÇ Ê®°Âºè‰ºòÁÇπ Âú®Âª∫ÈÄ†ËÄÖÊ®°Âºè‰∏≠ÔºåÂÆ¢Êà∑Á´Ø‰∏çÂøÖÁü•ÈÅì‰∫ßÂìÅÂÜÖÈÉ®ÁªÑÊàêÁöÑÁªÜËäÇÔºåÂ∞Ü‰∫ßÂìÅÊú¨Ë∫´‰∏é‰∫ßÂìÅÁöÑÂàõÂª∫ËøáÁ®ãËß£ËÄ¶Ôºå‰ΩøÂæóÁõ∏ÂêåÁöÑÂàõÂª∫ËøáÁ®ãÂèØ‰ª•ÂàõÂª∫‰∏çÂêåÁöÑ‰∫ßÂìÅÂØπË±°„ÄÇ ÊØè‰∏Ä‰∏™ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÈÉΩÁõ∏ÂØπÁã¨Á´ãÔºåËÄå‰∏éÂÖ∂‰ªñÁöÑÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÊó†ÂÖ≥ÔºåÂõ†Ê≠§ÂèØ‰ª•ÂæàÊñπ‰æøÂú∞ÊõøÊç¢ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÊàñÂ¢ûÂä†Êñ∞ÁöÑÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÔºåÁî®Êà∑‰ΩøÁî®‰∏çÂêåÁöÑÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÂç≥ÂèØÂæóÂà∞‰∏çÂêåÁöÑ‰∫ßÂìÅÂØπË±°„ÄÇÁî±‰∫éÊåáÊå•ËÄÖÁ±ªÈíàÂØπÊäΩË±°Âª∫ÈÄ†ËÄÖÁºñÁ®ãÔºåÂ¢ûÂä†Êñ∞ÁöÑÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÊó†È°ª‰øÆÊîπÂéüÊúâÁ±ªÂ∫ìÁöÑ‰ª£Á†ÅÔºåÁ≥ªÁªüÊâ©Â±ïÊñπ‰æøÔºåÁ¨¶Âêà ‚ÄúÂºÄÈó≠ÂéüÂàô‚Äù„ÄÇ ÂèØ‰ª•Êõ¥Âä†Á≤æÁªÜÂú∞ÊéßÂà∂‰∫ßÂìÅÁöÑÂàõÂª∫ËøáÁ®ã„ÄÇÂ∞ÜÂ§çÊùÇ‰∫ßÂìÅÁöÑÂàõÂª∫Ê≠•È™§ÂàÜËß£Âú®‰∏çÂêåÁöÑÊñπÊ≥ï‰∏≠Ôºå‰ΩøÂæóÂàõÂª∫ËøáÁ®ãÊõ¥Âä†Ê∏ÖÊô∞Ôºå‰πüÊõ¥Êñπ‰æø‰ΩøÁî®Á®ãÂ∫èÊù•ÊéßÂà∂ÂàõÂª∫ËøáÁ®ã„ÄÇ Ê®°ÂºèÁº∫ÁÇπ Âª∫ÈÄ†ËÄÖÊ®°ÂºèÊâÄÂàõÂª∫ÁöÑ‰∫ßÂìÅ‰∏ÄËà¨ÂÖ∑ÊúâËæÉÂ§öÁöÑÂÖ±ÂêåÁÇπÔºåÂÖ∂ÁªÑÊàêÈÉ®ÂàÜÁõ∏‰ººÔºõÂ¶ÇÊûú‰∫ßÂìÅ‰πãÈó¥ÁöÑÂ∑ÆÂºÇÊÄßÂæàÂ§ßÔºåÂàô‰∏çÈÄÇÂêà‰ΩøÁî®Âª∫ÈÄ†ËÄÖÊ®°ÂºèÔºåÂõ†Ê≠§ÂÖ∂‰ΩøÁî®ËåÉÂõ¥ÂèóÂà∞‰∏ÄÂÆöÁöÑÈôêÂà∂„ÄÇ Â¶ÇÊûú‰∫ßÂìÅÁöÑÂÜÖÈÉ®ÂèòÂåñÂ§çÊùÇÔºåÂèØËÉΩ‰ºöÂØºËá¥ÈúÄË¶ÅÂÆö‰πâÂæàÂ§öÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÁ±ªÊù•ÂÆûÁé∞ËøôÁßçÂèòÂåñÔºåÂØºËá¥Á≥ªÁªüÂèòÂæóÂæàÂ∫ûÂ§ß„ÄÇ ÈÄÇÁî®Âú∫ÊôØ ÈúÄË¶ÅÁîüÊàêÁöÑ‰∫ßÂìÅÂØπË±°ÊúâÂ§çÊùÇÁöÑÂÜÖÈÉ®ÁªìÊûÑÔºåËøô‰∫õ‰∫ßÂìÅÂØπË±°ÈÄöÂ∏∏ÂåÖÂê´Â§ö‰∏™ÊàêÂëòÂ±ûÊÄß„ÄÇ ÈúÄË¶ÅÁîüÊàêÁöÑ‰∫ßÂìÅÂØπË±°ÁöÑÂ±ûÊÄßÁõ∏‰∫í‰æùËµñÔºåÈúÄË¶ÅÊåáÂÆöÂÖ∂ÁîüÊàêÈ°∫Â∫è„ÄÇ ÂØπË±°ÁöÑÂàõÂª∫ËøáÁ®ãÁã¨Á´ã‰∫éÂàõÂª∫ËØ•ÂØπË±°ÁöÑÁ±ª„ÄÇÂú®Âª∫ÈÄ†ËÄÖÊ®°Âºè‰∏≠ÈÄöËøáÂºïÂÖ•‰∫ÜÊåáÊå•ËÄÖÁ±ªÔºåÂ∞ÜÂàõÂª∫ËøáÁ®ãÂ∞ÅË£ÖÂú®ÊåáÊå•ËÄÖÁ±ª‰∏≠ÔºåËÄå‰∏çÂú®Âª∫ÈÄ†ËÄÖÁ±ªÂíåÂÆ¢Êà∑Á±ª‰∏≠„ÄÇ ÈöîÁ¶ªÂ§çÊùÇÂØπË±°ÁöÑÂàõÂª∫Âíå‰ΩøÁî®ÔºåÂπ∂‰ΩøÂæóÁõ∏ÂêåÁöÑÂàõÂª∫ËøáÁ®ãÂèØ‰ª•ÂàõÂª∫‰∏çÂêåÁöÑ‰∫ßÂìÅ„ÄÇ Ê®°ÂºèÁ§∫‰æã ‰ª•Â∑•ÂéÇÂà∂ÈÄ†ÁîµËÑë‰∏∫‰æã„ÄÇ ‰∫ßÂìÅËßíËâ≤ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105package main.java.com.study.designPatterns.builder.demoOne;/** * @author: whb * @description: ‰∫ßÂìÅËßíËâ≤--ÁîµËÑë */public class Computer &#123; /** * ÂìÅÁâå */ private String brand; /** * cpu */ private String cpu; /** * ‰∏ªÊùø */ private String mainBoard; /** * Á°¨Áõò */ private String hardDisk; /** * ÊòæÂç° */ private String displayCard; /** * ÁîµÊ∫ê */ private String power; /** * ÂÜÖÂ≠ò */ private String memory; public String getBrand() &#123; return brand; &#125; public void setBrand(String brand) &#123; this.brand = brand; &#125; public String getCpu() &#123; return cpu; &#125; public void setCpu(String cpu) &#123; this.cpu = cpu; &#125; public String getMainBoard() &#123; return mainBoard; &#125; public void setMainBoard(String mainBoard) &#123; this.mainBoard = mainBoard; &#125; public String getHardDisk() &#123; return hardDisk; &#125; public void setHardDisk(String hardDisk) &#123; this.hardDisk = hardDisk; &#125; public String getDisplayCard() &#123; return displayCard; &#125; public void setDisplayCard(String displayCard) &#123; this.displayCard = displayCard; &#125; public String getPower() &#123; return power; &#125; public void setPower(String power) &#123; this.power = power; &#125; public String getMemory() &#123; return memory; &#125; public void setMemory(String memory) &#123; this.memory = memory; &#125; @Override public String toString() &#123; return "Computer&#123;" + "brand='" + brand + '\'' + ", cpu='" + cpu + '\'' + ", mainBoard='" + mainBoard + '\'' + ", hardDisk='" + hardDisk + '\'' + ", displayCard='" + displayCard + '\'' + ", power='" + power + '\'' + ", memory='" + memory + '\'' + '&#125;'; &#125;&#125; ÊäΩË±°Âª∫ÈÄ†ËÄÖ 1234567891011121314151617181920212223242526272829303132333435package main.java.com.study.designPatterns.builder.demoOne;/** * @author: whb * @description: ÊäΩË±°Âª∫ÈÄ†ËÄÖ */public abstract class Builder &#123; /** * ‰∫ßÂìÅËßíËâ≤ */ protected Computer computer = new Computer(); public abstract void buildBrand(); public abstract void buildCPU(); public abstract void buildMainBoard(); public abstract void buildHardDisk(); public abstract void buildDisplayCard(); public abstract void buildPower(); public abstract void buildMemory(); /** * Âà∂ÈÄ†ÁîµËÑë * * @return */ public Computer createComputer() &#123; return computer; &#125;&#125; ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485package main.java.com.study.designPatterns.builder.demoOne;/** * @author: whb * @description: ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖ--Êà¥Â∞î */public class DellComputerBuilder extends Builder &#123; @Override public void buildBrand() &#123; computer.setBrand("Êà¥Â∞îÁîµËÑë"); &#125; @Override public void buildCPU() &#123; computer.setCpu("i5-8300H ÂõõÊ†∏"); &#125; @Override public void buildMainBoard() &#123; computer.setMainBoard("Êà¥Â∞î‰∏ªÊùø"); &#125; @Override public void buildHardDisk() &#123; computer.setHardDisk("1T + 128GB SSD"); &#125; @Override public void buildDisplayCard() &#123; computer.setDisplayCard("GTX1060 Áã¨Á´ã6GB"); &#125; @Override public void buildPower() &#123; computer.setPower("4ËäØ ÈîÇÁ¶ªÂ≠êÁîµÊ±† 180W ACÈÄÇÈÖçÂô®"); &#125; @Override public void buildMemory() &#123; computer.setMemory("4G + 4G"); &#125;&#125;package main.java.com.study.designPatterns.builder.demoOne;/** * @author: whb * @description: ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖ--ÂçéÁ°ïÁîµËÑë */public class ASUSComputerBuilder extends Builder &#123; @Override public void buildBrand() &#123; computer.setBrand("ÂçéÁ°ïÁîµËÑë"); &#125; @Override public void buildCPU() &#123; computer.setCpu("Intel Á¨¨8‰ª£ ÈÖ∑Áùø"); &#125; @Override public void buildMainBoard() &#123; computer.setMainBoard("ÂçéÁ°ï‰∏ªÊùø"); &#125; @Override public void buildHardDisk() &#123; computer.setHardDisk("256GB SSD"); &#125; @Override public void buildDisplayCard() &#123; computer.setDisplayCard("MX150 Áã¨Á´ã2GB"); &#125; @Override public void buildPower() &#123; computer.setPower("3ËäØ ÈîÇÁ¶ªÂ≠êÁîµÊ±† 65W ACÈÄÇÈÖçÂô®"); &#125; @Override public void buildMemory() &#123; computer.setMemory("1 x SO-DIMM 8GB"); &#125;&#125; ÊµãËØïÁ±ª 12345678910111213141516171819202122232425262728package main.java.com.study.designPatterns.builder.demoOne;/** * @author: whb * @description: ÊµãËØïÁ±ª */public class TestBuilder &#123; public static void main(String[] args) &#123; ComputerDirector director = new ComputerDirector(); //ÂçéÁ°ïÁîµËÑë Builder asusBuilder = new ASUSComputerBuilder(); Computer asusComputer = director.construct(asusBuilder); System.out.println(asusComputer.toString()); //Êà¥Â∞îÁîµËÑë--ÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂ÂàõÂª∫ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖ try &#123; Class clazz = Class.forName("main.java.com.study.designPatterns.builder.demoOne.DellComputerBuilder"); Builder dellBuilder = (DellComputerBuilder) clazz.newInstance(); Computer dellComputer = director.construct(dellBuilder); System.out.println(dellComputer.toString()); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IllegalAccessException e) &#123; e.printStackTrace(); &#125; catch (InstantiationException e) &#123; e.printStackTrace(); &#125; &#125;&#125; Âª∫ÈÄ†ËÄÖÊ®°Âºè‰∏éÂ∑•ÂéÇÊ®°ÂºèÁöÑÂå∫Âà´ Âª∫ÈÄ†ËÄÖÊ®°Âºè ‰∏é Â∑•ÂéÇÊ®°Âºè ÁöÑÂîØ‰∏ÄÂå∫Âà´Â∞±Âú®‰∫é ÊûÑÂª∫Â§çÊùÇÂØπË±°ÔºåËøôÂÖ∂ÂÆûÊòØÂÆÉ‰ª¨ÁöÑÊú¨Ë¥®Âå∫Âà´„ÄÇËÄå‰ªéË°®Áé∞ÂΩ¢Âºè‰∏äÁúãÔºåÂª∫ÈÄ†ËÄÖÊ®°Âºè ÊØî Â∑•ÂéÇÊ®°Âºè Â§ö‰∫Ü‰∏Ä‰∏™ ÂØºÊºîËÄÖÔºàDirectorÔºâÁöÑËßíËâ≤„ÄÇÂ¶ÇÊûúÂøΩÁï• ÂØºÊºîËÄÖÔºåÈÇ£‰πà Âª∫ÈÄ†ËÄÖÊ®°Âºè ‰∏é Â∑•ÂéÇÊ®°Âºè Âá†‰πéÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ‰ªé‰∏äÊñá Âª∫ÈÄ†ËÄÖÊ®°Âºè UML Á±ªÂõæ‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÂØºÊºîËÄÖ ÊòØË¥üË¥£Ê≤üÈÄö ÂÆ¢Êà∑ ‰∏é ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖ ÁöÑÊ°•Ê¢ÅÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂØºÊºîËÄÖ Ëß£ËÄ¶‰∫Ü ÂÆ¢Êà∑ ‰∏é ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖ„ÄÇÂõ†‰∏∫ ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖ Â±û‰∫éÁªÜËäÇÂÆûÁé∞ÔºåÊòØÂ∫ïÂ±ÇÊ®°ÂùóÔºå‰∏öÂä°ÁªèÂ∏∏ÂèòÊç¢Ôºå‰∏çÁ®≥ÂÆöÔºõËÄå ÂÆ¢Êà∑ Â±û‰∫é‰∏äÂ±ÇÊ®°ÂùóÔºåÊòØ‰∏öÂä°ÈÄªËæëÈÉ®ÂàÜÔºåÁõ∏ÂØπÁ®≥ÂÆöÔºõÂ¶ÇÊûú‰∏çËÆæÁΩÆ ÂØºÊºîËÄÖ ‰Ωú‰∏∫‰∏≠Èó¥‰∫∫ÔºåÁõ¥Êé•Êää ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖ ÂµåÂÖ•Âà∞‰∏öÂä°ÈÄªËæëÔºàÂÆ¢Êà∑Ôºâ‰∏≠Ôºå‰ºöÂØºËá¥ÂΩì‰∏öÂä°ÊîπÂèòÔºà‰∫ßÂìÅÊîπÂèòÔºâÊó∂ÔºåÈúÄË¶ÅÊõ¥Êç¢ ÂÖ∑‰ΩìÂª∫ÈÄ†ËÄÖÔºå‰æµÂÖ•‰∫Ü‰∏öÂä°ÈÄªËæëÔºàÂÆ¢Êà∑Ôºâ‰ª£Á†ÅÔºå‰∏çÁ¨¶ÂêàËÆæËÆ°Ê®°ÂºèÁöÑËø™Á±≥ÁâπÊ≥ïÂàô„ÄÇ ËÄå Â∑•ÂéÇÊ®°Âºè ‰πãÊâÄ‰ª•Ê≤°Êúâ ÂØºÊºîËÄÖ Ëøô‰∏™ËßíËâ≤ÔºåÊòØÂõ†‰∏∫ Â∑•ÂéÇ Êú¨Ë∫´Â∞±ÊãÖÂΩì‰∫ÜËØ•ËßíËâ≤„ÄÇÂõ†‰∏∫ ÂØºÊºîËÄÖ ÊúÄÁªàÁöÑ‰ΩúÁî®Â∞±ÊòØÊèê‰æõ‰∏Ä‰∏™ÁªÑË£ÖÂ•ΩÁöÑÂØπË±°ÁªôÂà∞ ÂÆ¢Êà∑Ôºå‰∏é Â∑•ÂéÇ ÁöÑ‰ΩúÁî®‰∏ÄËá¥„ÄÇÂè™ÊòØÁî±‰∫é Â∑•ÂéÇ Áîü‰∫ßÁöÑÈÉΩÊòØÁÆÄÂçïÂØπË±°ÔºåÂõ†Ê≠§ Â∑•ÂéÇ Áõ¥Êé•Êèê‰æõÁªô ÂÆ¢Êà∑ Â∞±Ë°å‰∫ÜÔºõËÄå Âª∫ÈÄ†ËÄÖÊ®°Âºè Êèê‰æõÁöÑÊòØÂ§çÊùÇÂØπË±°ÔºåÈúÄË¶Å‰∏ìÈó®ÁöÑÊûÑÂª∫ËøáÁ®ãÔºåÂõ†Ê≠§ÂÄüÂä© ÂØºÊºîËÄÖ ÂéªÊ≤üÈÄö ÂÖ∑‰ΩìÁöÑÂª∫ÈÄ†ËÄÖ ÊûÑÂª∫Âá∫Áõ∏Â∫îÁöÑÂ§çÊùÇÂØπË±°ÔºåÁÑ∂ÂêéÁî± ÂØºÊºîËÄÖ ËøîÂõûÁªô ÂÆ¢Êà∑„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JDKÂä®ÊÄÅ‰ª£ÁêÜ]]></title>
    <url>%2Fposts%2Fdfdc2005.html</url>
    <content type="text"><![CDATA[‰ª£ÁêÜÊ®°ÂºèÂÆûÁé∞ÊñπÂºè‰ªãÁªç ‰ªÄ‰πàÊòØ‰ª£ÁêÜÊ®°Âºè Êó•Â∏∏ÁîüÊ¥ª‰∏≠Êàë‰ª¨ÁªèÂ∏∏‰ºöÁ¢∞Âà∞‰ª£ÁêÜÊ®°ÂºèÔºå‰æãÂ¶ÇÊàë‰ª¨ÊâæÊàø‰∫ß‰∏≠‰ªãÂ∏ÆÊàë‰ª¨ÊâæÊàøÂ≠êÔºåÊâæÂ©öÂßª‰∏≠‰ªãÂ∏ÆÊàë‰ª¨‰ªãÁªçÂØπË±°ÔºåÊâæ‰øùÊ¥ÅÂ∏ÆÊàë‰ª¨ÊâìÁêÜÊàøÈó¥Á≠â„ÄÇÂú®Êó†ÂΩ¢‰∏≠ËøêÁî®Âà∞‰∫Ü‰ª£ÁêÜÊ®°Âºè„ÄÇ ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®‰ª£ÁêÜÔºü ËøêÁî®‰ª£ÁêÜÂèØ‰ª•‰ΩøÊàë‰ª¨ÁöÑÁîüÊ¥ªÊõ¥Âä†‰æøÂà©ÔºåÊúâ‰∫Ü‰ª£ÁêÜÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅËá™Â∑±ÂéªÊâæÊàøÂ≠êÔºå‰∏çÈúÄË¶ÅËá™Â∑±ÂéªÊâæÂØπË±°Ôºå‰∏çÈúÄË¶ÅËá™Â∑±ÂéªÊâìÁêÜÊàøÈó¥„ÄÇÂΩìÁÑ∂Ôºå‰Ω†‰πüÂèØ‰ª•ÈÄâÊã©‰∏ÄÂàáÈÉΩËá™Â∑±Êù•Âπ≤Ôºå‰ΩÜÊòØÂ≠òÂú®ÂâçÊèêÊù°‰ª∂Ôºå‰∏ÄÊòØ‰Ω†ÊòØÂê¶ÈÉΩÂÖ∑Â§áËøôÊ†∑ÁöÑËµÑÊ∫êÂíåËÉΩÂäõÊù•ÂÅöËøô‰∫õ‰∫ãÊÉÖÔºå‰∫åÊòØ‰Ω†ÊòØÂê¶ÊÑøÊÑèËä±Ë¥πËøô‰πàÂ§öÁ≤æÂäõÂíåÊó∂Èó¥Êù•ÂÅöËøô‰∫õ‰∫ãÊÉÖ„ÄÇÊÄª‰πãÔºå‰ª£ÁêÜÊ®°Âºè‰ΩøÊàë‰ª¨ÂêÑ‰∏ìÂÖ∂‰∫ãÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÊó∂Èó¥Ê∂àËÄóÂú®ÁæéÂ•ΩÁöÑ‰∫ãÊÉÖ‰∏äÔºåËÄå‰∏çÁî®Â§©Â§©Ë¢´‰∏Ä‰∫õÁêê‰∫ãÊâÄÁæÅÁªä„ÄÇ ‰ª£ÁêÜÊ®°ÂºèÊúâÂì™‰∫õÂÆûÁé∞Ôºü Java‰∏≠ÁöÑ‰ª£ÁêÜÊúâÈùôÊÄÅ‰ª£ÁêÜÂíåÂä®ÊÄÅ‰ª£ÁêÜÔºå‰∏ãÈù¢ÂàÜÂà´Áî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÊù•‰ªãÁªç‰∏Ä‰∏ãÈùôÊÄÅ‰ª£ÁêÜÂíåÂä®ÊÄÅ‰ª£ÁêÜ‰ª£Á†ÅÂÆûÁé∞„ÄÇ ÈùôÊÄÅ‰ª£ÁêÜ ‰ª£ÁêÜÊé•Âè£ 12345678910111213package main.java.com.study.designPatterns.proxy.staticProxy;/** * @author: whb * @description: ‰ª£ÁêÜÊé•Âè£ */public interface UserDao &#123; /** * ‰øùÂ≠ò */ void save();&#125; ÁõÆÊ†áÂØπË±° 12345678910111213package main.java.com.study.designPatterns.proxy.staticProxy;/** * @author: whb * @description: ÁõÆÊ†áÂØπË±° */public class UserDaoImpl implements UserDao &#123; @Override public void save() &#123; System.out.println("Ê≠£Âú®‰øùÂ≠òÁî®Êà∑..."); &#125;&#125; ‰ª£ÁêÜÂØπË±° 1234567891011121314151617181920212223242526272829303132package main.java.com.study.designPatterns.proxy.staticProxy;/** * @author: whb * @description: ‰ª£ÁêÜÂØπË±° */public class TransactionHandler implements UserDao &#123; /** * ÁõÆÊ†á‰ª£ÁêÜÂØπË±° */ private UserDaoImpl target; /** * ÊûÑÈÄ†‰ª£ÁêÜÂØπË±°Êó∂‰º†ÂÖ•ÁõÆÊ†áÂØπË±° * * @param target */ public TransactionHandler(UserDaoImpl target) &#123; this.target = target; &#125; @Override public void save() &#123; //Ë∞ÉÁî®ÁõÆÊ†áÊñπÊ≥ïÂâçÁöÑÂ§ÑÁêÜ System.out.println("ÂºÄÂêØ‰∫ãÂä°ÊéßÂà∂..."); //Ë∞ÉÁî®ÁõÆÊ†áÂØπË±°ÁöÑÊñπÊ≥ï target.save(); //Ë∞ÉÁî®ÁõÆÊ†áÊñπÊ≥ïÂêéÁöÑÂ§ÑÁêÜ System.out.println("ÂÖ≥Èó≠‰∫ãÂä°ÊéßÂà∂..."); &#125;&#125; ÊµãËØïË∞ÉÁî® 123456789101112131415161718package main.java.com.study.designPatterns.proxy.staticProxy;/** * @author: whb * @description: ÊµãËØïÈùôÊÄÅ‰ª£ÁêÜ */public class TestStaticProxy &#123; public static void main(String[] args) &#123; //Êñ∞Âª∫ÁõÆÊ†áÂØπË±° UserDaoImpl target = new UserDaoImpl(); //ÂàõÂª∫‰ª£ÁêÜÂØπË±°, Âπ∂‰ΩøÁî®Êé•Âè£ÂØπÂÖ∂ËøõË°åÂºïÁî® UserDao userDao = new TransactionHandler(target); //ÈíàÂØπÊé•Âè£ËøõË°åË∞ÉÁî® userDao.save(); &#125;&#125; ÊµãËØïÁªìÊûú 123ÂºÄÂêØ‰∫ãÂä°ÊéßÂà∂...Ê≠£Âú®‰øùÂ≠òÁî®Êà∑...ÂÖ≥Èó≠‰∫ãÂä°ÊéßÂà∂... ÊÄªÁªì ÈùôÊÄÅ‰ª£ÁêÜÂÆûÁé∞ÁÆÄÂçï‰πüÂÆπÊòìÁêÜËß£Ôºå‰ΩÜÊòØÈùôÊÄÅ‰ª£ÁêÜ‰∏çËÉΩ‰Ωø‰∏Ä‰∏™‰ª£ÁêÜÁ±ªÂèçÂ§ç‰ΩúÁî®‰∫éÂ§ö‰∏™ÁõÆÊ†áÂØπË±°Ôºå‰ª£ÁêÜÂØπË±°Áõ¥Êé•ÊåÅÊúâÁõÆÊ†áÂØπË±°ÁöÑÂºïÁî®ÔºåËøôÂØºËá¥‰ª£ÁêÜÂØπË±°ÂíåÁõÆÊ†áÂØπË±°Á±ªÂûãÁ¥ßÂØÜËÄ¶Âêà‰∫ÜÂú®‰∏ÄËµ∑„ÄÇÂ¶ÇÊûúUserDaoÊé•Âè£‰∏ãËøòÊúâÂè¶‰∏Ä‰∏™ÂÆûÁé∞Á±ª‰πüÈúÄË¶ÅËøõË°å‰∫ãÂä°ÊéßÂà∂ÔºåÈÇ£‰πàÂ∞±Ë¶ÅÈáçÊñ∞ÂÜô‰∏Ä‰∏™‰ª£ÁêÜÁ±ªÔºåËøôÊ†∑Â∞±‰ºö‰∫ßÁîüËÆ∏Â§öÈáçÂ§çÁöÑÊ®°Áâà‰ª£Á†ÅÔºå‰∏çËÉΩËææÂà∞‰ª£Á†ÅÂ§çÁî®ÁöÑÁõÆÁöÑ„ÄÇËÄåÂä®ÊÄÅ‰ª£ÁêÜÂ∞±ÂèØ‰ª•ÂæàÂ•ΩÁöÑËß£ÂÜ≥ËøôÊ†∑ÁöÑÈóÆÈ¢ò„ÄÇ Âä®ÊÄÅ‰ª£ÁêÜ ‰ª£ÁêÜÊé•Âè£ 12345678910111213package main.java.com.study.designPatterns.proxy.JdkProxy;/** * @author: whb * @date: 2019/9/4 9:50 * @description: ‰ª£ÁêÜÊé•Âè£ */public interface UserDao &#123; /** * ‰øùÂ≠òÁî®Êà∑ */ void save();&#125; ÁõÆÊ†áÂØπË±° 1234567891011121314package main.java.com.study.designPatterns.proxy.JdkProxy;/** * @author: whb * @date: 2019/9/4 9:51 * @description: ÁõÆÊ†áÂØπË±° */public class UserDaoImpl implements UserDao &#123; @Override public void save() &#123; System.out.println("‰øùÂ≠òÁî®Êà∑‰ø°ÊÅØ..."); &#125;&#125; ‰ª£ÁêÜÂØπË±° 123456789101112131415161718192021222324252627282930313233343536package main.java.com.study.designPatterns.proxy.JdkProxy;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;/** * @author: whb * @description: ‰ª£ÁêÜÂØπË±° */public class TransactionHandler implements InvocationHandler &#123; /** * ÈúÄË¶Å‰ª£ÁêÜÁöÑÁõÆÊ†áÂØπË±°ÔºåËøôÈáåËÆæËÆ°‰∏∫ÂèØ‰ª•‰∏∫‰ªªÊÑèÂØπË±°Ê∑ªÂä†‰∫ãÂä°ÊéßÂà∂, ÊâÄ‰ª•Â∞ÜÁõÆÊ†áÂØπË±°Â£∞Êòé‰∏∫Object */ private Object target; /** * ÊûÑÈÄ†TransactionHandlerÊó∂‰º†ÂÖ•ÁõÆÊ†áÂØπË±° * * @param target */ public TransactionHandler(Object target) &#123; this.target = target; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; //Ë∞ÉÁî®ÁõÆÊ†áÊñπÊ≥ïÂâçÁöÑÂ§ÑÁêÜ System.out.println("ÂºÄÂêØ‰∫ãÂä°ÊéßÂà∂..."); //Ë∞ÉÁî®ÁõÆÊ†áÂØπË±°ÁöÑÊñπÊ≥ï Object result = method.invoke(target, args); //Ë∞ÉÁî®ÁõÆÊ†áÊñπÊ≥ïÂêéÁöÑÂ§ÑÁêÜ System.out.println("ÂÖ≥Èó≠‰∫ãÂä°ÊéßÂà∂..."); //ÊîæÂõûÊñπÊ≥ïË∞ÉÁî®ÁªìÊûú return result; &#125;&#125; ÊµãËØïÁ±ª 123456789101112131415161718192021222324package main.java.com.study.designPatterns.proxy.JdkProxy;import java.lang.reflect.Proxy;/** * @author: whb * @description: ÊµãËØïJDKÂä®ÊÄÅ‰ª£ÁêÜ */public class TestJdkProxy &#123; public static void main(String[] args) &#123; //Êñ∞Âª∫ÁõÆÊ†áÂØπË±° Object target = new UserDaoImpl(); //ÂàõÂª∫‰∫ãÂä°Â§ÑÁêÜÂô® TransactionHandler handler = new TransactionHandler(target); //ÁîüÊàê‰ª£ÁêÜÁ±ªÂπ∂‰ΩøÁî®Êé•Âè£ÂØπÂÖ∂ËøõË°åÂºïÁî® UserDao userDao = (UserDao) Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(), handler); //ÈíàÂØπÊé•Âè£ËøõË°åÊñπÊ≥ïË∞ÉÁî® userDao.save(); &#125;&#125; ÊµãËØïÁªìÊûú 123ÂºÄÂêØ‰∫ãÂä°ÊéßÂà∂...‰øùÂ≠òÁî®Êà∑‰ø°ÊÅØ...ÂÖ≥Èó≠‰∫ãÂä°ÊéßÂà∂... ÊÄªÁªì ‰πãÂâçÂèëÁé∞ÈùôÊÄÅ‰ª£ÁêÜ‰ºö‰∫ßÁîüËÆ∏Â§öÈáçÂ§ç‰ª£Á†ÅÔºå‰∏çËÉΩÂæàÂ•ΩÁöÑËøõË°å‰ª£Á†ÅÂ§çÁî®ÔºåËÄåÂä®ÊÄÅ‰ª£ÁêÜËÉΩÂ§üÂæàÂ•ΩÁöÑËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå‰ª£ÁêÜÁ±ªTransactionHandlerÂÆûÁé∞‰∫ÜInvocationHandlerÊé•Âè£ÔºåÂπ∂‰∏îÂÆÉÊåÅÊúâÁöÑÁõÆÊ†áÂØπË±°Á±ªÂûãÊòØObjectÔºåÂõ†Ê≠§‰∫ãÂä°ÊéßÂà∂‰ª£ÁêÜÁ±ªTransactionHandlerËÉΩÂ§ü‰ª£ÁêÜ‰ªªÊÑèÁöÑÂØπË±°Ôºå‰∏∫‰ªªÊÑèÁöÑÂØπË±°Ê∑ªÂä†‰∫ãÂä°ÊéßÂà∂ÁöÑÈÄªËæë„ÄÇÂõ†Ê≠§Âä®ÊÄÅ‰ª£ÁêÜÊâçÁúüÊ≠£ÁöÑÂ∞Ü‰ª£Á†Å‰∏≠Ê®™ÂêëÂàáÈù¢ÁöÑÈÄªËæëÂâ•Á¶ª‰∫ÜÂá∫Êù•ÔºåËµ∑Âà∞‰ª£Á†ÅÂ§çÁî®ÁöÑÁõÆÁöÑ„ÄÇ ‰ΩÜÊòØÂä®ÊÄÅ‰ª£ÁêÜ‰πüÊúâÁº∫ÁÇπÔºå‰∏ÄÊòØÂÆÉÁöÑÂÆûÁé∞ÊØîÈùôÊÄÅ‰ª£ÁêÜÊõ¥Âä†Â§çÊùÇ‰πü‰∏çÂ•ΩÁêÜËß£Ôºõ‰∫åÊòØÂÆÉÂ≠òÂú®‰∏ÄÂÆöÁöÑÈôêÂà∂Ôºå‰æãÂ¶ÇÂÆÉË¶ÅÊ±ÇÈúÄË¶Å‰ª£ÁêÜÁöÑÂØπË±°ÂøÖÈ°ªÂÆûÁé∞‰∫ÜÊüê‰∏™Êé•Âè£Ôºõ‰∏âÊòØÂÆÉ‰∏çÂ§üÁÅµÊ¥ªÔºåÂä®ÊÄÅ‰ª£ÁêÜ‰ºö‰∏∫Êé•Âè£‰∏≠ÁöÑÂ£∞ÊòéÁöÑÊâÄÊúâÊñπÊ≥ïÊ∑ªÂä†‰∏äÁõ∏ÂêåÁöÑ‰ª£ÁêÜÈÄªËæë„ÄÇ JDKÂä®ÊÄÅ‰ª£ÁêÜÁöÑÂ∫ïÂ±ÇÂÆûÁé∞ProxyÂàÜÊûê Âú®Âä®ÊÄÅ‰ª£ÁêÜÁöÑÊµãËØïÁ±ªTestJdkProxy‰∏≠‰ΩøÁî®‰∫ÜProxyÁ±ªÁöÑÈùôÊÄÅÊñπÊ≥ïnewProxyInstanceÊñπÊ≥ïÂéªÁîüÊàê‰∏Ä‰∏™‰ª£ÁêÜÁ±ªÔºåËøô‰∏™ÈùôÊÄÅÊñπÊ≥ïÊé•Êî∂‰∏â‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´ÊòØÁõÆÊ†áÁ±ªÁöÑÁ±ªÂä†ËΩΩÂô®ÔºåÁõÆÊ†áÁ±ªÂÆûÁé∞ÁöÑÊé•Âè£ÈõÜÂêàÔºåInvocationHandlerÂÆû‰æãÔºåÊúÄÂêéËøîÂõû‰∏Ä‰∏™ObjectÁ±ªÂûãÁöÑ‰ª£ÁêÜÁ±ª„ÄÇÂÖà‰ªéËØ•ÊñπÊ≥ïÂºÄÂßãÔºåÁúãÁúã‰ª£ÁêÜÁ±ªÊòØÊÄéÊ†∑‰∏ÄÊ≠•‰∏ÄÊ≠•ÈÄ†Âá∫Êù•ÁöÑ„ÄÇ newProxyInstanceÊñπÊ≥ï 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/** * ËøîÂõûÊåáÂÆöÊé•Âè£ÁöÑ‰ª£ÁêÜÁ±ªÁöÑÂÆû‰æãÔºåËØ•Êé•Âè£Â∞ÜÊñπÊ≥ïË∞ÉÁî®ÂàÜÂèëÁªôÊåáÂÆöÁöÑË∞ÉÁî®Â§ÑÁêÜÁ®ãÂ∫è„ÄÇËøô‰∏™ÈùôÊÄÅÊñπÊ≥ïÊúâ‰∏â‰∏™ÂèÇÊï∞Ôºö * @param ClassLoader loaderÔºåÊåáÂÆöÂΩìÂâçÁõÆÊ†áÂØπË±°‰ΩøÁî®Á±ªÂä†ËΩΩÂô® * @param Class&lt;?&gt;[ ] interfacesÔºåÁõÆÊ†áÂØπË±°ÂÆûÁé∞ÁöÑÊé•Âè£ÁöÑÁ±ªÂûã,‰ΩøÁî®Ê≥õÂûãÊñπÂºèÁ°ÆËÆ§Á±ªÂûã * @param InvocationHandler hÔºå‰∫ã‰ª∂Â§ÑÁêÜ,ÊâßË°åÁõÆÊ†áÂØπË±°ÁöÑÊñπÊ≥ïÊó∂,‰ºöËß¶Âèë‰∫ã‰ª∂Â§ÑÁêÜÂô®ÁöÑÊñπÊ≥ï,‰ºöÊääÂΩìÂâçÊâßË°åÁõÆÊ†áÂØπË±°ÁöÑÊñπÊ≥ï‰Ωú‰∏∫ÂèÇÊï∞‰º†ÂÖ• */public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h) throws IllegalArgumentException &#123; //È™åËØÅ‰º†ÂÖ•ÁöÑInvocationHandler‰∏çËÉΩ‰∏∫Á©∫ Objects.requireNonNull(h); //Â§çÂà∂‰ª£ÁêÜÁ±ªÂÆûÁé∞ÁöÑÊâÄÊúâÊé•Âè£ final Class&lt;?&gt;[] intfs = interfaces.clone(); //Ëé∑ÂèñÂÆâÂÖ®ÁÆ°ÁêÜÂô® final SecurityManager sm = System.getSecurityManager(); //ËøõË°å‰∏Ä‰∫õÊùÉÈôêÊ£ÄÈ™å if (sm != null) &#123; checkProxyAccess(Reflection.getCallerClass(), loader, intfs); &#125; /* * ËØ•ÊñπÊ≥ïÂÖà‰ªéÁºìÂ≠òËé∑Âèñ‰ª£ÁêÜÁ±ª, Â¶ÇÊûúÊ≤°ÊúâÂÜçÂéªÁîüÊàê‰∏Ä‰∏™‰ª£ÁêÜÁ±ª */ Class&lt;?&gt; cl = getProxyClass0(loader, intfs); /* * ‰ΩøÁî®ÊåáÂÆöÁöÑË∞ÉÁî®Â§ÑÁêÜÁ®ãÂ∫èË∞ÉÁî®ÂÖ∂ÊûÑÈÄ†ÂáΩÊï∞. */ try &#123; //ËøõË°å‰∏Ä‰∫õÊùÉÈôêÊ£ÄÈ™å if (sm != null) &#123; checkNewProxyPermission(Reflection.getCallerClass(), cl); &#125; //Ëé∑ÂèñÂèÇÊï∞Á±ªÂûãÊòØInvocationHandler.classÁöÑ‰ª£ÁêÜÁ±ªÊûÑÈÄ†Âô® final Constructor&lt;?&gt; cons = cl.getConstructor(constructorParams); final InvocationHandler ih = h; //Â¶ÇÊûú‰ª£ÁêÜÁ±ªÊòØ‰∏çÂèØËÆøÈóÆÁöÑ, Â∞±‰ΩøÁî®ÁâπÊùÉÂ∞ÜÂÆÉÁöÑÊûÑÈÄ†Âô®ËÆæÁΩÆ‰∏∫ÂèØËÆøÈóÆ if (!Modifier.isPublic(cl.getModifiers())) &#123; AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() &#123; public Void run() &#123; cons.setAccessible(true); return null; &#125; &#125;); &#125; //ÊâÄÊúâ‰ª£ÁêÜÁ±ªÈÉΩÁªßÊâøËá™Proxy, Âõ†Ê≠§ËøôÈáå‰ºöË∞ÉÁî®ProxyÁöÑÊûÑÈÄ†Âô®Â∞ÜInvocationHandlerÂºïÁî®‰º†ÂÖ•ÂéªÊûÑÈÄ†‰∏Ä‰∏™‰ª£ÁêÜÁ±ªÁöÑÂÆû‰æã return cons.newInstance(new Object[]&#123;h&#125;); &#125; catch (IllegalAccessException|InstantiationException e) &#123; throw new InternalError(e.toString(), e); &#125; catch (InvocationTargetException e) &#123; Throwable t = e.getCause(); if (t instanceof RuntimeException) &#123; throw (RuntimeException) t; &#125; else &#123; throw new InternalError(t.toString(), t); &#125; &#125; catch (NoSuchMethodException e) &#123; throw new InternalError(e.toString(), e); &#125;&#125; newProxyInstanceÊñπÊ≥ïÈ¶ñÂÖàÊòØÂØπÂèÇÊï∞ËøõË°å‰∏Ä‰∫õÊùÉÈôêÊ†°È™åÔºå‰πãÂêéÈÄöËøáË∞ÉÁî®getProxyClass0ÊñπÊ≥ïÁîüÊàê‰∫Ü‰ª£ÁêÜÁ±ªÁöÑÁ±ªÂØπË±°ÔºåÁÑ∂ÂêéËé∑ÂèñÂèÇÊï∞Á±ªÂûãÊòØInvocationHandler.classÁöÑ‰ª£ÁêÜÁ±ªÊûÑÈÄ†Âô®„ÄÇÊ£ÄÈ™åÊûÑÈÄ†Âô®ÊòØÂê¶ÂèØ‰ª•ËÆøÈóÆÔºåÊúÄÂêé‰º†ÂÖ•InvocationHandlerÂÆû‰æãÁöÑÂºïÁî®ÂéªÊûÑÈÄ†Âá∫‰∏Ä‰∏™‰ª£ÁêÜÁ±ªÂÆû‰æãÔºåInvocationHandlerÂÆû‰æãÁöÑÂºïÁî®ÂÖ∂ÂÆûÊòØProxyÊåÅÊúâÁùÄÔºåÂõ†‰∏∫ÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ªÈªòËÆ§ÁªßÊâøËá™ProxyÔºåÊâÄ‰ª•ÊúÄÂêé‰ºöË∞ÉÁî®ProxyÁöÑÊûÑÈÄ†Âô®Â∞ÜÂºïÁî®‰º†ÂÖ•„ÄÇ getProxyClass0ÊñπÊ≥ï ‰∏ãÈù¢Áúã‰∏ãgetProxyClass0Ëøô‰∏™ÊñπÊ≥ïÔºåÁúãÁúã‰ª£ÁêÜÁ±ªÁöÑClassÂØπË±°ÊòØÊÄéÊ†∑Êù•ÁöÑ„ÄÇ 123456789101112/** * ÁîüÊàê‰∏Ä‰∏™‰ª£ÁêÜÁ±ª„ÄÇÂøÖÈ°ªË∞ÉÁî®checkProxyAccessÊñπÊ≥ïÔºåÂú®Ë∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ï‰πãÂâçÈúÄË¶ÅÊ£ÄÊü•ÊùÉÈôê„ÄÇ */ private static Class&lt;?&gt; getProxyClass0(ClassLoader loader, Class&lt;?&gt;... interfaces) &#123; //ÁõÆÊ†áÁ±ªÂÆûÁé∞ÁöÑÊé•Âè£‰∏çËÉΩÂ§ß‰∫é65535 if (interfaces.length &gt; 65535) &#123; throw new IllegalArgumentException("interface limit exceeded"); &#125; //Â¶ÇÊûúÁî±ÁªôÂÆöÁöÑË£ÖËΩΩÊú∫ÂÆö‰πâÁöÑ‰ª£ÁêÜÁ±ªÂÆûÁé∞ÁªôÂÆöÁöÑÊé•Âè£Â≠òÂú®ÔºåËøôÂ∞Ü‰ºöËøîÂõûÁºìÂ≠òÔºõÂê¶ÂàôÔºåÂÆÉÂ∞ÜÈÄöËøáProxyClassFactoryÂàõÂª∫‰ª£ÁêÜÁ±ª„ÄÇ return proxyClassCache.get(loader, interfaces);&#125; getProxyClass0ÊñπÊ≥ïÂÜÖÈÉ®Ê≤°ÊúâÂ§öÂ∞ëÂÜÖÂÆπÔºåÈ¶ñÂÖàÊòØÊ£ÄÊü•ÁõÆÊ†á‰ª£ÁêÜÁ±ªÂÆûÁé∞ÁöÑÊé•Âè£‰∏çËÉΩÂ§ß‰∫é65535Ëøô‰∏™Êï∞Ôºå‰πãÂêéÊòØÈÄöËøáÁ±ªÂä†ËΩΩÂô®ÂíåÊé•Âè£ÈõÜÂêàÂéªÁºìÂ≠òÈáåÈù¢Ëé∑ÂèñÔºåÂ¶ÇÊûúËÉΩÊâæÂà∞‰ª£ÁêÜÁ±ªÂ∞±Áõ¥Êé•ËøîÂõûÔºåÂê¶ÂàôÂ∞±‰ºöË∞ÉÁî®ProxyClassFactoryËøô‰∏™Â∑•ÂéÇÂéªÁîüÊàê‰∏Ä‰∏™‰ª£ÁêÜÁ±ª„ÄÇ ProxyClassFactoryÂ∑•ÂéÇÁ±ª 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485//‰ª£ÁêÜÁ±ªÁîüÊàêÂ∑•ÂéÇprivate static final class ProxyClassFactory implements BiFunction&lt;ClassLoader, Class&lt;?&gt;[], Class&lt;?&gt;&gt; &#123; //‰ª£ÁêÜÁ±ªÂêçÁß∞ÂâçÁºÄ private static final String proxyClassNamePrefix = "$Proxy"; //Áî®ÂéüÂ≠êÁ±ªÊù•ÁîüÊàê‰ª£ÁêÜÁ±ªÁöÑÂ∫èÂè∑, ‰ª•Ê≠§Êù•Á°ÆÂÆöÂîØ‰∏ÄÁöÑ‰ª£ÁêÜÁ±ª private static final AtomicLong nextUniqueNumber = new AtomicLong(); @Override public Class&lt;?&gt; apply(ClassLoader loader, Class&lt;?&gt;[] interfaces) &#123; Map&lt;Class&lt;?&gt;, Boolean&gt; interfaceSet = new IdentityHashMap&lt;&gt;(interfaces.length); for (Class&lt;?&gt; intf : interfaces) &#123; //ËøôÈáåÈÅçÂéÜinterfacesÊï∞ÁªÑËøõË°åÈ™åËØÅ, ‰∏ªË¶ÅÂÅö‰∏â‰ª∂‰∫ãÊÉÖ /* * 1.intfÊòØÂê¶ÂèØ‰ª•Áî±ÊåáÂÆöÁöÑÁ±ªÂä†ËΩΩËøõË°åÂä†ËΩΩ */ Class&lt;?&gt; interfaceClass = null; try &#123; interfaceClass = Class.forName(intf.getName(), false, loader); &#125; catch (ClassNotFoundException e) &#123; &#125; if (interfaceClass != intf) &#123; throw new IllegalArgumentException( intf + " is not visible from class loader"); &#125; /* * 2.intfÊòØÂê¶ÊòØ‰∏Ä‰∏™Êé•Âè£ */ if (!interfaceClass.isInterface()) &#123; throw new IllegalArgumentException( interfaceClass.getName() + " is not an interface"); &#125; /* * 3.intfÂú®Êï∞ÁªÑ‰∏≠ÊòØÂê¶ÊúâÈáçÂ§ç */ if (interfaceSet.put(interfaceClass, Boolean.TRUE) != null) &#123; throw new IllegalArgumentException( "repeated interface: " + interfaceClass.getName()); &#125; &#125; //ÁîüÊàê‰ª£ÁêÜÁ±ªÁöÑÂåÖÂêç String proxyPkg = null; //ÁîüÊàê‰ª£ÁêÜÁ±ªÁöÑËÆøÈóÆÊ†áÂøó, ÈªòËÆ§ÊòØpublic finalÁöÑ int accessFlags = Modifier.PUBLIC | Modifier.FINAL; for (Class&lt;?&gt; intf : interfaces) &#123; //Ëé∑ÂèñÊé•Âè£ÁöÑËÆøÈóÆÊ†áÂøó int flags = intf.getModifiers(); //Â¶ÇÊûúÊé•Âè£ÁöÑËÆøÈóÆÊ†áÂøó‰∏çÊòØpublic, ÈÇ£‰πàÁîüÊàê‰ª£ÁêÜÁ±ªÁöÑÂåÖÂêçÂíåÊé•Âè£ÂåÖÂêçÁõ∏Âêå if (!Modifier.isPublic(flags)) &#123; //ÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ªÁöÑËÆøÈóÆÊ†áÂøóËÆæÁΩÆ‰∏∫final accessFlags = Modifier.FINAL; //Ëé∑ÂèñÊé•Âè£ÂÖ®ÈôêÂÆöÂêç, ‰æãÂ¶ÇÔºöjava.util.Collection String name = intf.getName(); int n = name.lastIndexOf('.'); //Ââ™Ë£ÅÂêéÂæóÂà∞ÂåÖÂêç:java.util String pkg = ((n == -1) ? "" : name.substring(0, n + 1)); //ÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ªÁöÑÂåÖÂêçÂíåÊé•Âè£ÂåÖÂêçÊòØ‰∏ÄÊ†∑ÁöÑ if (proxyPkg == null) &#123; proxyPkg = pkg; &#125; else if (!pkg.equals(proxyPkg)) &#123; //‰ª£ÁêÜÁ±ªÂ¶ÇÊûúÂÆûÁé∞‰∏çÂêåÂåÖÁöÑÊé•Âè£, Âπ∂‰∏îÊé•Âè£ÈÉΩ‰∏çÊòØpublicÁöÑ, ÈÇ£‰πàÂ∞±‰ºöÂú®ËøôÈáåÊä•Èîô throw new IllegalArgumentException( "non-public interfaces from different packages"); &#125; &#125; &#125; //Â¶ÇÊûúÊé•Âè£ËÆøÈóÆÊ†áÂøóÈÉΩÊòØpublicÁöÑËØù, ÈÇ£ÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ªÈÉΩÊîæÂà∞ÈªòËÆ§ÁöÑÂåÖ‰∏ãÔºöcom.sun.proxy if (proxyPkg == null) &#123; proxyPkg = ReflectUtil.PROXY_PACKAGE + "."; &#125; //ÁîüÊàê‰ª£ÁêÜÁ±ªÁöÑÂ∫èÂè∑ long num = nextUniqueNumber.getAndIncrement(); //ÁîüÊàê‰ª£ÁêÜÁ±ªÁöÑÂÖ®ÈôêÂÆöÂêç, ÂåÖÂêç+ÂâçÁºÄ+Â∫èÂè∑, ‰æãÂ¶ÇÔºöcom.sun.proxy.$Proxy0 String proxyName = proxyPkg + proxyClassNamePrefix + num; //ËøôÈáåÊòØÊ†∏ÂøÉ, Áî®ProxyGeneratorÊù•ÁîüÊàêÂ≠óËäÇÁ†Å, ËØ•Á±ªÊîæÂú®sun.miscÂåÖ‰∏ã byte[] proxyClassFile = ProxyGenerator.generateProxyClass(proxyName, interfaces, accessFlags); try &#123; //Ê†πÊçÆ‰∫åËøõÂà∂Êñá‰ª∂ÁîüÊàêÁõ∏Â∫îÁöÑClassÂÆû‰æã return defineClass0(loader, proxyName, proxyClassFile, 0, proxyClassFile.length); &#125; catch (ClassFormatError e) &#123; throw new IllegalArgumentException(e.toString()); &#125; &#125;&#125; ËØ•Â∑•ÂéÇÁöÑapplyÊñπÊ≥ï‰ºöË¢´Ë∞ÉÁî®Áî®Êù•ÁîüÊàê‰ª£ÁêÜÁ±ªÁöÑClassÂØπË±°ÔºåÁî±‰∫é‰ª£Á†ÅÁöÑÊ≥®ÈáäÊØîËæÉËØ¶ÁªÜÔºåÂè™ÊåëÂÖ≥ÈîÆÁÇπËøõË°åÈòêËø∞„ÄÇ Âú®‰ª£Á†Å‰∏≠ÂèØ‰ª•ÁúãÂà∞JDKÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ªÁöÑÁ±ªÂêçÊòØ‚Äú$Proxy‚Äù+Â∫èÂè∑„ÄÇ Â¶ÇÊûúÊé•Âè£ÊòØpublicÁöÑÔºå‰ª£ÁêÜÁ±ªÈªòËÆ§ÊòØpublic finalÁöÑÔºåÂπ∂‰∏îÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ªÈªòËÆ§ÊîæÂà∞com.sun.proxyËøô‰∏™ÂåÖ‰∏ã„ÄÇ Â¶ÇÊûúÊé•Âè£ÊòØÈùûpublicÁöÑÔºåÈÇ£‰πà‰ª£ÁêÜÁ±ª‰πüÊòØÈùûpublicÁöÑÔºåÂπ∂‰∏îÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ª‰ºöÊîæÂú®ÂØπÂ∫îÊé•Âè£ÊâÄÂú®ÁöÑÂåÖ‰∏ã„ÄÇ Â¶ÇÊûúÊé•Âè£ÊòØÈùûpublicÁöÑÔºåÂπ∂‰∏îËøô‰∫õÊé•Âè£‰∏çÂú®Âêå‰∏Ä‰∏™ÂåÖ‰∏ãÔºåÈÇ£‰πàÂ∞±‰ºöÊä•Èîô„ÄÇ WeakCacheÁºìÂ≠òÁöÑÂÆûÁé∞Êú∫Âà∂ ProxyÂÜÖÈÉ®Áî®Âà∞‰∫ÜÁºìÂ≠òÊú∫Âà∂ÔºåÂ¶ÇÊûúÊ†πÊçÆÊèê‰æõÁöÑÁ±ªÂä†ËΩΩÂô®ÂíåÊé•Âè£Êï∞ÁªÑËÉΩÂú®ÁºìÂ≠ò‰∏≠ÊâæÂà∞‰ª£ÁêÜÁ±ªÂ∞±Áõ¥Êé•ËøîÂõûËØ•‰ª£ÁêÜÁ±ªÔºåÂê¶Âàô‰ºöË∞ÉÁî®ProxyClassFactoryÂ∑•ÂéÇÂéªÁîüÊàê‰ª£ÁêÜÁ±ª„ÄÇËøôÈáåÁî®Âà∞ÁöÑÁºìÂ≠òÊòØ‰∫åÁ∫ßÁºìÂ≠òÔºåÂÆÉÁöÑ‰∏ÄÁ∫ßÁºìÂ≠òkeyÊòØÊ†πÊçÆÁ±ªÂä†ËΩΩÂô®ÁîüÊàêÁöÑÔºå‰∫åÁ∫ßÁºìÂ≠òkeyÊòØÊ†πÊçÆÊé•Âè£Êï∞ÁªÑÁîüÊàêÁöÑ„ÄÇÂÖ∑‰ΩìÁöÑÂÜÖÈÉ®Êú∫Âà∂Áõ¥Êé•‰∏ä‰ª£Á†ÅËØ¶ÁªÜËß£Èáä„ÄÇ 1234567891011121314151617//ReferenceÂºïÁî®ÈòüÂàóprivate final ReferenceQueue&lt;K&gt; refQueue = new ReferenceQueue&lt;&gt;();//ÁºìÂ≠òÁöÑÂ∫ïÂ±ÇÂÆûÁé∞, key‰∏∫‰∏ÄÁ∫ßÁºìÂ≠ò, value‰∏∫‰∫åÁ∫ßÁºìÂ≠ò„ÄÇ ‰∏∫‰∫ÜÊîØÊåÅnull, mapÁöÑkeyÁ±ªÂûãËÆæÁΩÆ‰∏∫Objectprivate final ConcurrentMap&lt;Object, ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt;&gt; map = new ConcurrentHashMap&lt;&gt;();//reverseMapËÆ∞ÂΩï‰∫ÜÊâÄÊúâ‰ª£ÁêÜÁ±ªÁîüÊàêÂô®ÊòØÂê¶ÂèØÁî®, ËøôÊòØ‰∏∫‰∫ÜÂÆûÁé∞ÁºìÂ≠òÁöÑËøáÊúüÊú∫Âà∂private final ConcurrentMap&lt;Supplier&lt;V&gt;, Boolean&gt; reverseMap = new ConcurrentHashMap&lt;&gt;();//ÁîüÊàê‰∫åÁ∫ßÁºìÂ≠òkeyÁöÑÂ∑•ÂéÇ, ËøôÈáå‰º†ÂÖ•ÁöÑÊòØKeyFactoryprivate final BiFunction&lt;K, P, ?&gt; subKeyFactory;//ÁîüÊàê‰∫åÁ∫ßÁºìÂ≠òvalueÁöÑÂ∑•ÂéÇ, ËøôÈáå‰º†ÂÖ•ÁöÑÊòØProxyClassFactoryprivate final BiFunction&lt;K, P, V&gt; valueFactory;//ÊûÑÈÄ†Âô®, ‰º†ÂÖ•ÁîüÊàê‰∫åÁ∫ßÁºìÂ≠òkeyÁöÑÂ∑•ÂéÇÂíåÁîüÊàê‰∫åÁ∫ßÁºìÂ≠òvalueÁöÑÂ∑•ÂéÇpublic WeakCache(BiFunction&lt;K, P, ?&gt; subKeyFactory, BiFunction&lt;K, P, V&gt; valueFactory) &#123; this.subKeyFactory = Objects.requireNonNull(subKeyFactory); this.valueFactory = Objects.requireNonNull(valueFactory);&#125; È¶ñÂÖàÁúã‰∏Ä‰∏ãWeakCacheÁöÑÊàêÂëòÂèòÈáèÂíåÊûÑÈÄ†Âô®ÔºåWeakCacheÁºìÂ≠òÁöÑÂÜÖÈÉ®ÂÆûÁé∞ÊòØÈÄöËøáConcurrentMapÊù•ÂÆåÊàêÁöÑÔºåÊàêÂëòÂèòÈáèmapÂ∞±ÊòØ‰∫åÁ∫ßÁºìÂ≠òÁöÑÂ∫ïÂ±ÇÂÆûÁé∞ÔºåreverseMapÊòØ‰∏∫‰∫ÜÂÆûÁé∞ÁºìÂ≠òÁöÑËøáÊúüÊú∫Âà∂ÔºåsubKeyFactoryÊòØ‰∫åÁ∫ßÁºìÂ≠òkeyÁöÑÁîüÊàêÂ∑•ÂéÇÔºåÈÄöËøáÊûÑÈÄ†Âô®‰º†ÂÖ•ÔºåËøôÈáå‰º†ÂÖ•ÁöÑÂÄºÊòØProxyÁ±ªÁöÑKeyFactoryÔºåvalueFactoryÊòØ‰∫åÁ∫ßÁºìÂ≠òvalueÁöÑÁîüÊàêÂ∑•ÂéÇÔºåÈÄöËøáÊûÑÈÄ†Âô®‰º†ÂÖ•ÔºåËøôÈáå‰º†ÂÖ•ÁöÑÊòØProxyÁ±ªÁöÑProxyClassFactory„ÄÇÊé•‰∏ãÊù•Áúã‰∏Ä‰∏ãWeakCacheÁöÑgetÊñπÊ≥ï„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public V get(K key, P parameter) &#123; //ËøôÈáåË¶ÅÊ±ÇÂÆûÁé∞ÁöÑÊé•Âè£‰∏çËÉΩ‰∏∫Á©∫ Objects.requireNonNull(parameter); //Ê∏ÖÈô§ËøáÊúüÁöÑÁºìÂ≠ò expungeStaleEntries(); //Â∞ÜClassLoaderÂåÖË£ÖÊàêCacheKey, ‰Ωú‰∏∫‰∏ÄÁ∫ßÁºìÂ≠òÁöÑkey Object cacheKey = CacheKey.valueOf(key, refQueue); //Ëé∑ÂèñÂæóÂà∞‰∫åÁ∫ßÁºìÂ≠ò ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; valuesMap = map.get(cacheKey); //Â¶ÇÊûúÊ†πÊçÆClassLoaderÊ≤°ÊúâËé∑ÂèñÂà∞ÂØπÂ∫îÁöÑÂÄº if (valuesMap == null) &#123; //‰ª•CASÊñπÂºèÊîæÂÖ•, Â¶ÇÊûú‰∏çÂ≠òÂú®ÂàôÊîæÂÖ•ÔºåÂê¶ÂàôËøîÂõûÂéüÂÖàÁöÑÂÄº ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; oldValuesMap = map.putIfAbsent(cacheKey, valuesMap = new ConcurrentHashMap&lt;&gt;()); //Â¶ÇÊûúoldValuesMapÊúâÂÄº, ËØ¥ÊòéÊîæÂÖ•Â§±Ë¥• if (oldValuesMap != null) &#123; valuesMap = oldValuesMap; &#125; &#125; //Ê†πÊçÆ‰ª£ÁêÜÁ±ªÂÆûÁé∞ÁöÑÊé•Âè£Êï∞ÁªÑÊù•ÁîüÊàê‰∫åÁ∫ßÁºìÂ≠òkey, ÂàÜ‰∏∫key0, key1, key2, keyx Object subKey = Objects.requireNonNull(subKeyFactory.apply(key, parameter)); //ËøôÈáåÈÄöËøásubKeyËé∑ÂèñÂà∞‰∫åÁ∫ßÁºìÂ≠òÁöÑÂÄº Supplier&lt;V&gt; supplier = valuesMap.get(subKey); Factory factory = null; //Ëøô‰∏™Âæ™ÁéØÊèê‰æõ‰∫ÜËΩÆËØ¢Êú∫Âà∂, Â¶ÇÊûúÊù°‰ª∂‰∏∫ÂÅáÂ∞±ÁªßÁª≠ÈáçËØïÁõ¥Âà∞Êù°‰ª∂‰∏∫Áúü‰∏∫Ê≠¢ while (true) &#123; //Â¶ÇÊûúÈÄöËøásubKeyÂèñÂá∫Êù•ÁöÑÂÄº‰∏ç‰∏∫Á©∫ if (supplier != null) &#123; //Âú®ËøôÈáåsupplierÂèØËÉΩÊòØ‰∏Ä‰∏™Factory‰πüÂèØËÉΩ‰ºöÊòØ‰∏Ä‰∏™CacheValue //Âú®ËøôÈáå‰∏ç‰ΩúÂà§Êñ≠, ËÄåÊòØÂú®SupplierÂÆûÁé∞Á±ªÁöÑgetÊñπÊ≥ïÈáåÈù¢ËøõË°åÈ™åËØÅ V value = supplier.get(); if (value != null) &#123; return value; &#125; &#125; if (factory == null) &#123; //Êñ∞Âª∫‰∏Ä‰∏™FactoryÂÆû‰æã‰Ωú‰∏∫subKeyÂØπÂ∫îÁöÑÂÄº factory = new Factory(key, parameter, subKey, valuesMap); &#125; if (supplier == null) &#123; //Âà∞ËøôÈáåË°®ÊòésubKeyÊ≤°ÊúâÂØπÂ∫îÁöÑÂÄº, Â∞±Â∞Üfactory‰Ωú‰∏∫subKeyÁöÑÂÄºÊîæÂÖ• supplier = valuesMap.putIfAbsent(subKey, factory); if (supplier == null) &#123; //Âà∞ËøôÈáåË°®ÊòéÊàêÂäüÂ∞ÜfactoryÊîæÂÖ•ÁºìÂ≠ò supplier = factory; &#125; //Âê¶Âàô, ÂèØËÉΩÊúüÈó¥ÊúâÂÖ∂‰ªñÁ∫øÁ®ã‰øÆÊîπ‰∫ÜÂÄº, ÈÇ£‰πàÂ∞±‰∏çÂÜçÁªßÁª≠ÁªôsubKeyËµãÂÄº, ËÄåÊòØÂèñÂá∫Êù•Áõ¥Êé•Áî® &#125; else &#123; //ÊúüÈó¥ÂèØËÉΩÂÖ∂‰ªñÁ∫øÁ®ã‰øÆÊîπ‰∫ÜÂÄº, ÈÇ£‰πàÂ∞±Â∞ÜÂéüÂÖàÁöÑÂÄºÊõøÊç¢ if (valuesMap.replace(subKey, supplier, factory)) &#123; //ÊàêÂäüÂ∞ÜfactoryÊõøÊç¢ÊàêÊñ∞ÁöÑÂÄº supplier = factory; &#125; else &#123; //ÊõøÊç¢Â§±Ë¥•, ÁªßÁª≠‰ΩøÁî®ÂéüÂÖàÁöÑÂÄº supplier = valuesMap.get(subKey); &#125; &#125; &#125;&#125; WeakCacheÁöÑgetÊñπÊ≥ïÂπ∂Ê≤°ÊúâÁî®ÈîÅËøõË°åÂêåÊ≠•ÔºåÈÇ£ÂÆÉÊòØÊÄéÊ†∑ÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®ÁöÑÂë¢Ôºü Âõ†‰∏∫ÂÆÉÁöÑÊâÄÊúâ‰ºöËøõË°å‰øÆÊîπÁöÑÊàêÂëòÂèòÈáèÈÉΩ‰ΩøÁî®‰∫ÜConcurrentMapÔºåËøô‰∏™Á±ªÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇÂõ†Ê≠§ÂÆÉÂ∞ÜËá™Ë∫´ÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÂßîÊâòÁªô‰∫ÜConcurrentMapÔºå getÊñπÊ≥ïÂ∞ΩÂèØËÉΩÁöÑÂ∞ÜÂêåÊ≠•‰ª£Á†ÅÂùóÁº©Â∞èÔºåËøôÊ†∑ÂèØ‰ª•ÊúâÊïàÊèêÈ´òWeakCacheÁöÑÊÄßËÉΩ„ÄÇ ClassLoader‰Ωú‰∏∫‰∫Ü‰∏ÄÁ∫ßÁºìÂ≠òÁöÑkeyÔºåËøôÊ†∑ÂèØ‰ª•È¶ñÂÖàÊ†πÊçÆClassLoaderÁ≠õÈÄâ‰∏ÄÈÅçÔºåÂõ†‰∏∫‰∏çÂêåClassLoaderÂä†ËΩΩÁöÑÁ±ªÊòØ‰∏çÂêåÁöÑ„ÄÇ ÁÑ∂ÂêéÂÆÉÁî®Êé•Âè£Êï∞ÁªÑÊù•ÁîüÊàê‰∫åÁ∫ßÁºìÂ≠òÁöÑkeyÔºåËøôÈáåÂÆÉËøõË°å‰∫Ü‰∏Ä‰∫õ‰ºòÂåñÔºåÂõ†‰∏∫Â§ßÈÉ®ÂàÜÁ±ªÈÉΩÊòØÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Êàñ‰∏§‰∏™Êé•Âè£ÔºåÊâÄ‰ª•‰∫åÁ∫ßÁºìÂ≠òkeyÂàÜ‰∏∫key0Ôºåkey1Ôºåkey2ÔºåkeyX„ÄÇkey0Âà∞key2ÂàÜÂà´Ë°®Á§∫ÂÆûÁé∞‰∫Ü0Âà∞2‰∏™Êé•Âè£ÔºåkeyXË°®Á§∫ÂÆûÁé∞‰∫Ü3‰∏™Êàñ‰ª•‰∏äÁöÑÊé•Âè£Ôºå‰∫ãÂÆû‰∏äÂ§ßÈÉ®ÂàÜÈÉΩÂè™‰ºöÁî®Âà∞key1Âíåkey2„ÄÇËøô‰∫õkeyÁöÑÁîüÊàêÂ∑•ÂéÇÊòØÂú®ProxyÁ±ª‰∏≠ÔºåÈÄöËøáWeakCacheÁöÑÊûÑÈÄ†Âô®Â∞ÜkeyÂ∑•ÂéÇ‰º†ÂÖ•„ÄÇËøôÈáåÁöÑ‰∫åÁ∫ßÁºìÂ≠òÁöÑÂÄºÊòØ‰∏Ä‰∏™FactoryÂÆû‰æãÔºåÊúÄÁªà‰ª£ÁêÜÁ±ªÁöÑÂÄºÊòØÈÄöËøáFactoryËøô‰∏™Â∑•ÂéÇÊù•Ëé∑ÂæóÁöÑ„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152private final class Factory implements Supplier&lt;V&gt; &#123; //‰∏ÄÁ∫ßÁºìÂ≠òkey, Ê†πÊçÆClassLoaderÁîüÊàê private final K key; //‰ª£ÁêÜÁ±ªÂÆûÁé∞ÁöÑÊé•Âè£Êï∞ÁªÑ private final P parameter; //‰∫åÁ∫ßÁºìÂ≠òkey, Ê†πÊçÆÊé•Âè£Êï∞ÁªÑÁîüÊàê private final Object subKey; //‰∫åÁ∫ßÁºìÂ≠ò private final ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; valuesMap; Factory(K key, P parameter, Object subKey, ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; valuesMap) &#123; this.key = key; this.parameter = parameter; this.subKey = subKey; this.valuesMap = valuesMap; &#125; @Override public synchronized V get() &#123; //ËøôÈáåÂÜç‰∏ÄÊ¨°Âéª‰∫åÁ∫ßÁºìÂ≠òÈáåÈù¢Ëé∑ÂèñSupplier, Áî®Êù•È™åËØÅÊòØÂê¶ÊòØFactoryÊú¨Ë∫´ Supplier&lt;V&gt; supplier = valuesMap.get(subKey); if (supplier != this) &#123; //Âú®ËøôÈáåÈ™åËØÅsupplierÊòØÂê¶ÊòØFactoryÂÆû‰æãÊú¨Ë∫´, Â¶ÇÊûú‰∏çÂàôËøîÂõûnullËÆ©Ë∞ÉÁî®ËÄÖÁªßÁª≠ËΩÆËØ¢ÈáçËØï //ÊúüÈó¥supplierÂèØËÉΩÊõøÊç¢Êàê‰∫ÜCacheValue, ÊàñËÄÖÁî±‰∫éÁîüÊàê‰ª£ÁêÜÁ±ªÂ§±Ë¥•Ë¢´‰ªé‰∫åÁ∫ßÁºìÂ≠ò‰∏≠ÁßªÈô§‰∫Ü return null; &#125; V value = null; try &#123; //ÂßîÊâòvalueFactoryÂéªÁîüÊàê‰ª£ÁêÜÁ±ª, ËøôÈáå‰ºöÈÄöËøá‰º†ÂÖ•ÁöÑProxyClassFactoryÂéªÁîüÊàê‰ª£ÁêÜÁ±ª value = Objects.requireNonNull(valueFactory.apply(key, parameter)); &#125; finally &#123; //Â¶ÇÊûúÁîüÊàê‰ª£ÁêÜÁ±ªÂ§±Ë¥•, Â∞±Â∞ÜËøô‰∏™‰∫åÁ∫ßÁºìÂ≠òÂà†Èô§ if (value == null) &#123; valuesMap.remove(subKey, this); &#125; &#125; //Âè™ÊúâvalueÁöÑÂÄº‰∏ç‰∏∫Á©∫ÊâçËÉΩÂà∞ËææËøôÈáå assert value != null; //‰ΩøÁî®Âº±ÂºïÁî®ÂåÖË£ÖÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ª CacheValue&lt;V&gt; cacheValue = new CacheValue&lt;&gt;(value); //Â∞ÜÂåÖË£ÖÂêéÁöÑcacheValueÊîæÂÖ•‰∫åÁ∫ßÁºìÂ≠ò‰∏≠, Ëøô‰∏™Êìç‰ΩúÂøÖÈ°ªÊàêÂäü, Âê¶ÂàôÂ∞±Êä•Èîô if (valuesMap.replace(subKey, this, cacheValue)) &#123; //Â∞ÜcacheValueÊàêÂäüÊîæÂÖ•‰∫åÁ∫ßÁºìÂ≠òÂêé, ÂÜçÂØπÂÆÉËøõË°åÊ†áËÆ∞ reverseMap.put(cacheValue, Boolean.TRUE); &#125; else &#123; throw new AssertionError("Should not reach here"); &#125; //ÊúÄÂêéËøîÂõûÊ≤°ÊúâË¢´Âº±ÂºïÁî®ÂåÖË£ÖÁöÑ‰ª£ÁêÜÁ±ª return value; &#125;&#125; ÂÜçÁúãÁúãFactoryËøô‰∏™ÂÜÖÈÉ®Â∑•ÂéÇÁ±ªÔºåÂèØ‰ª•ÁúãÂà∞ÂÆÉÁöÑgetÊñπÊ≥ïÊòØ‰ΩøÁî®synchronizedÂÖ≥ÈîÆÂ≠óËøõË°å‰∫ÜÂêåÊ≠•„ÄÇËøõË°ågetÊñπÊ≥ïÂêéÈ¶ñÂÖà‰ºöÂéªÈ™åËØÅsubKeyÂØπÂ∫îÁöÑsuppilerÊòØÂê¶ÊòØÂ∑•ÂéÇÊú¨Ë∫´ÔºåÂ¶ÇÊûú‰∏çÊòØÂ∞±ËøîÂõûnullÔºåËÄåWeakCacheÁöÑgetÊñπÊ≥ï‰ºöÁªßÁª≠ËøõË°åÈáçËØï„ÄÇÂ¶ÇÊûúÁ°ÆÂÆûÊòØÂ∑•ÂéÇÊú¨Ë∫´ÔºåÈÇ£‰πàÂ∞±‰ºöÂßîÊâòProxyClassFactoryÁîüÊàê‰ª£ÁêÜÁ±ªÔºåProxyClassFactoryÊòØÂú®ÊûÑÈÄ†WeakCacheÁöÑÊó∂ÂÄô‰º†ÂÖ•ÁöÑ„ÄÇÊâÄ‰ª•ËøôÈáåËß£Èáä‰∫Ü‰∏∫‰ªÄ‰πàÊúÄÂêé‰ºöË∞ÉÁî®Âà∞ProxyÁöÑProxyClassFactoryËøô‰∏™ÂÜÖÈÉ®Â∑•ÂéÇÊù•ÁîüÊàê‰ª£ÁêÜÁ±ª„ÄÇÁîüÊàê‰ª£ÁêÜÁ±ªÂêé‰ΩøÁî®Âº±ÂºïÁî®ËøõË°åÂåÖË£ÖÂπ∂ÊîæÂÖ•reverseMap‰∏≠ÔºåÊúÄÂêé‰ºöËøîÂõûÂéüË£ÖÁöÑ‰ª£ÁêÜÁ±ª„ÄÇ ProxyGeneratorÁîüÊàê‰ª£ÁêÜÁ±ªÁöÑÂ≠óËäÇÁ†ÅÊñá‰ª∂ ÈÄöËøáÂâçÈù¢ÁöÑÂàÜÊûêÔºåÁü•ÈÅì‰∫Ü‰ª£ÁêÜÁ±ªÊòØÈÄöËøáProxyÁ±ªÁöÑProxyClassFactoryÂ∑•ÂéÇÁîüÊàêÁöÑÔºåËøô‰∏™Â∑•ÂéÇÁ±ª‰ºöÂéªË∞ÉÁî®ProxyGeneratorÁ±ªÁöÑgenerateProxyClass()ÊñπÊ≥ïÊù•ÁîüÊàê‰ª£ÁêÜÁ±ªÁöÑÂ≠óËäÇÁ†Å„ÄÇProxyGeneratorËøô‰∏™Á±ªÂ≠òÊîæÂú®sun.miscÂåÖ‰∏ãÔºåËØ•Á±ªÁöÑgenerateProxyClass()ÈùôÊÄÅÊñπÊ≥ïÁöÑÊ†∏ÂøÉÂÜÖÂÆπÂ∞±ÊòØÂéªË∞ÉÁî®generateClassFile()ÂÆû‰æãÊñπÊ≥ïÊù•ÁîüÊàêClassÊñá‰ª∂„ÄÇÊé•‰∏ãÊù•ÁúãÁúãgenerateClassFile()Ëøô‰∏™ÊñπÊ≥ïÂÜÖÈÉ®ÂÅö‰∫Ü‰∫õ‰ªÄ‰πà„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128private byte[] generateClassFile() &#123; //Á¨¨‰∏ÄÊ≠•, Â∞ÜÊâÄÊúâÁöÑÊñπÊ≥ïÁªÑË£ÖÊàêProxyMethodÂØπË±° //È¶ñÂÖà‰∏∫‰ª£ÁêÜÁ±ªÁîüÊàêtoString, hashCode, equalsÁ≠â‰ª£ÁêÜÊñπÊ≥ï this.addProxyMethod(hashCodeMethod, Object.class); this.addProxyMethod(equalsMethod, Object.class); this.addProxyMethod(toStringMethod, Object.class); //Ëé∑ÂèñÊé•Âè£Á±ª Class[] var1 = this.interfaces; int var2 = var1.length; int var3; Class var4; //ÈÅçÂéÜÊØè‰∏Ä‰∏™Êé•Âè£ÁöÑÊØè‰∏Ä‰∏™ÊñπÊ≥ï, Âπ∂‰∏î‰∏∫ÂÖ∂ÁîüÊàêProxyMethodÂØπË±° for(var3 = 0; var3 &lt; var2; ++var3) &#123; var4 = var1[var3]; Method[] var5 = var4.getMethods(); int var6 = var5.length; for(int var7 = 0; var7 &lt; var6; ++var7) &#123; Method var8 = var5[var7]; this.addProxyMethod(var8, var4); &#125; &#125; //ÂØπ‰∫éÂÖ∑ÊúâÁõ∏ÂêåÁ≠æÂêçÁöÑ‰ª£ÁêÜÊñπÊ≥ï, Ê£ÄÈ™åÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊòØÂê¶ÂÖºÂÆπ Iterator var11 = this.proxyMethods.values().iterator(); List var12; while(var11.hasNext()) &#123; var12 = (List)var11.next(); checkReturnTypes(var12); &#125; //Á¨¨‰∫åÊ≠•, ÁªÑË£ÖË¶ÅÁîüÊàêÁöÑclassÊñá‰ª∂ÁöÑÊâÄÊúâÁöÑÂ≠óÊÆµ‰ø°ÊÅØÂíåÊñπÊ≥ï‰ø°ÊÅØ Iterator var15; try &#123; //Ê∑ªÂä†ÊûÑÈÄ†Âô®ÊñπÊ≥ï this.methods.add(this.generateConstructor()); var11 = this.proxyMethods.values().iterator(); //ÈÅçÂéÜÁºìÂ≠ò‰∏≠ÁöÑ‰ª£ÁêÜÊñπÊ≥ï while(var11.hasNext()) &#123; var12 = (List)var11.next(); var15 = var12.iterator(); while(var15.hasNext()) &#123; ProxyGenerator.ProxyMethod var16 = (ProxyGenerator.ProxyMethod)var15.next(); //Ê∑ªÂä†‰ª£ÁêÜÁ±ªÁöÑÈùôÊÄÅÂ≠óÊÆµ, ‰æãÂ¶Ç:private static Method m1; this.fields.add(new ProxyGenerator.FieldInfo(var16.methodFieldName, "Ljava/lang/reflect/Method;", 10)); //Ê∑ªÂä†‰ª£ÁêÜÁ±ªÁöÑ‰ª£ÁêÜÊñπÊ≥ï this.methods.add(var16.generateMethod()); &#125; &#125; //Ê∑ªÂä†‰ª£ÁêÜÁ±ªÁöÑÈùôÊÄÅÂ≠óÊÆµÂàùÂßãÂåñÊñπÊ≥ï this.methods.add(this.generateStaticInitializer()); &#125; catch (IOException var10) &#123; throw new InternalError("unexpected I/O Exception", var10); &#125; //È™åËØÅÊñπÊ≥ïÂíåÂ≠óÊÆµÈõÜÂêà‰∏çËÉΩÂ§ß‰∫é65535 if (this.methods.size() &gt; 65535) &#123; throw new IllegalArgumentException("method limit exceeded"); &#125; else if (this.fields.size() &gt; 65535) &#123; throw new IllegalArgumentException("field limit exceeded"); &#125; else &#123; //Á¨¨‰∏âÊ≠•, ÂÜôÂÖ•ÊúÄÁªàÁöÑclassÊñá‰ª∂ //È™åËØÅÂ∏∏ÈáèÊ±†‰∏≠Â≠òÂú®‰ª£ÁêÜÁ±ªÁöÑÂÖ®ÈôêÂÆöÂêç this.cp.getClass(dotToSlash(this.className)); //È™åËØÅÂ∏∏ÈáèÊ±†‰∏≠Â≠òÂú®‰ª£ÁêÜÁ±ªÁà∂Á±ªÁöÑÂÖ®ÈôêÂÆöÂêç, Áà∂Á±ªÂêç‰∏∫:"java/lang/reflect/Proxy" this.cp.getClass("java/lang/reflect/Proxy"); var1 = this.interfaces; var2 = var1.length; //È™åËØÅÂ∏∏ÈáèÊ±†Â≠òÂú®‰ª£ÁêÜÁ±ªÊé•Âè£ÁöÑÂÖ®ÈôêÂÆöÂêç for(var3 = 0; var3 &lt; var2; ++var3) &#123; var4 = var1[var3]; this.cp.getClass(dotToSlash(var4.getName())); &#125; //Êé•‰∏ãÊù•Ë¶ÅÂºÄÂßãÂÜôÂÖ•Êñá‰ª∂‰∫Ü,ËÆæÁΩÆÂ∏∏ÈáèÊ±†Âè™ËØª this.cp.setReadOnly(); ByteArrayOutputStream var13 = new ByteArrayOutputStream(); DataOutputStream var14 = new DataOutputStream(var13); try &#123; //1.ÂÜôÂÖ•È≠îÊï∞ var14.writeInt(-889275714); //2.ÂÜôÂÖ•Ê¨°ÁâàÊú¨Âè∑ var14.writeShort(0); //3.ÂÜôÂÖ•‰∏ªÁâàÊú¨Âè∑ var14.writeShort(49); //4.ÂÜôÂÖ•Â∏∏ÈáèÊ±† this.cp.write(var14); //5.ÂÜôÂÖ•ËÆøÈóÆ‰øÆÈ•∞Á¨¶ var14.writeShort(this.accessFlags); //6.ÂÜôÂÖ•Á±ªÁ¥¢Âºï var14.writeShort(this.cp.getClass(dotToSlash(this.className))); //7.ÂÜôÂÖ•Áà∂Á±ªÁ¥¢Âºï, ÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ªÈÉΩÁªßÊâøËá™Proxy var14.writeShort(this.cp.getClass("java/lang/reflect/Proxy")); //8.ÂÜôÂÖ•Êé•Âè£ËÆ°Êï∞ÂÄº var14.writeShort(this.interfaces.length); Class[] var17 = this.interfaces; int var18 = var17.length; //9.ÂÜôÂÖ•Êé•Âè£ÈõÜÂêà for(int var19 = 0; var19 &lt; var18; ++var19) &#123; Class var22 = var17[var19]; var14.writeShort(this.cp.getClass(dotToSlash(var22.getName()))); &#125; //10.ÂÜôÂÖ•Â≠óÊÆµËÆ°Êï∞ÂÄº var14.writeShort(this.fields.size()); var15 = this.fields.iterator(); //11.ÂÜôÂÖ•Â≠óÊÆµÈõÜÂêà while(var15.hasNext()) &#123; ProxyGenerator.FieldInfo var20 = (ProxyGenerator.FieldInfo)var15.next(); var20.write(var14); &#125; //12.ÂÜôÂÖ•ÊñπÊ≥ïËÆ°Êï∞ÂÄº var14.writeShort(this.methods.size()); var15 = this.methods.iterator(); //13.ÂÜôÂÖ•ÊñπÊ≥ïÈõÜÂêà while(var15.hasNext()) &#123; ProxyGenerator.MethodInfo var21 = (ProxyGenerator.MethodInfo)var15.next(); var21.write(var14); &#125; //14.ÂÜôÂÖ•Â±ûÊÄßËÆ°Êï∞ÂÄº, ‰ª£ÁêÜÁ±ªclassÊñá‰ª∂Ê≤°ÊúâÂ±ûÊÄßÊâÄ‰ª•‰∏∫0 var14.writeShort(0); //ËΩ¨Êç¢Êàê‰∫åËøõÂà∂Êï∞ÁªÑËæìÂá∫ return var13.toByteArray(); &#125; catch (IOException var9) &#123; throw new InternalError("unexpected I/O Exception", var9); &#125; &#125;&#125; ÂèØ‰ª•ÁúãÂà∞generateClassFile()ÊñπÊ≥ïÊòØÊåâÁÖßClassÊñá‰ª∂ÁªìÊûÑËøõË°åÂä®ÊÄÅÊãºÊé•ÁöÑ„ÄÇÈÇ£‰ªÄ‰πàÊòØClassÊñá‰ª∂Âë¢Ôºü Êàë‰ª¨Âπ≥Êó∂ÁºñÂÜôÁöÑJavaÊñá‰ª∂ÊòØ‰ª•.javaÁªìÂ∞æÁöÑÔºåÂú®ÁºñÂÜôÂ•Ω‰∫Ü‰πãÂêéÈÄöËøáÁºñËØëÂô®ËøõË°åÁºñËØë‰ºöÁîüÊàê.classÊñá‰ª∂ÔºåËøô‰∏™.classÊñá‰ª∂Â∞±ÊòØClassÊñá‰ª∂„ÄÇJavaÁ®ãÂ∫èÁöÑÊâßË°åÂè™‰æùËµñ‰∫éClassÊñá‰ª∂ÔºåÂíåJavaÊñá‰ª∂ÊòØÊ≤°ÊúâÂÖ≥Á≥ªÁöÑ„ÄÇËøô‰∏™ClassÊñá‰ª∂ÊèèËø∞‰∫Ü‰∏Ä‰∏™Á±ªÁöÑ‰ø°ÊÅØÔºåÂΩìÊàë‰ª¨ÈúÄË¶Å‰ΩøÁî®Âà∞‰∏Ä‰∏™Á±ªÊó∂ÔºåJavaËôöÊãüÊú∫Â∞±‰ºöÊèêÂâçÂéªÂä†ËΩΩËøô‰∏™Á±ªÁöÑClassÊñá‰ª∂Âπ∂ËøõË°åÂàùÂßãÂåñÂíåÁõ∏ÂÖ≥ÁöÑÊ£ÄÈ™åÂ∑•‰ΩúÔºåJavaËôöÊãüÊú∫ËÉΩÂ§ü‰øùËØÅÂú®‰Ω†‰ΩøÁî®Âà∞Ëøô‰∏™Á±ª‰πãÂâçÂ∞±‰ºöÂÆåÊàêËøô‰∫õÂ∑•‰ΩúÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂÆâÂøÉÁöÑÂéª‰ΩøÁî®ÂÆÉÂ∞±Â•Ω‰∫ÜÔºåËÄå‰∏çÂøÖÂÖ≥ÂøÉJavaËôöÊãüÊú∫ÊòØÊÄéÊ†∑Âä†ËΩΩÂÆÉÁöÑ„ÄÇÂΩìÁÑ∂ÔºåClassÊñá‰ª∂Âπ∂‰∏ç‰∏ÄÂÆöÈùûÂæóÈÄöËøáÁºñËØëJavaÊñá‰ª∂ËÄåÊù•Ôºå‰Ω†ÁîöËá≥ÂèØ‰ª•Áõ¥Êé•ÈÄöËøáÊñáÊú¨ÁºñËæëÂô®Êù•ÁºñÂÜôClassÊñá‰ª∂„ÄÇÂú®ËøôÈáåÔºåJDKÂä®ÊÄÅ‰ª£ÁêÜÂ∞±ÊòØÈÄöËøáÁ®ãÂ∫èÊù•Âä®ÊÄÅÁîüÊàêClassÊñá‰ª∂ÁöÑ„ÄÇ ÁîüÊàêClassÊñá‰ª∂‰∏ªË¶ÅÂàÜ‰∏∫‰∏âÊ≠•Ôºö Á¨¨‰∏ÄÊ≠•ÔºöÊî∂ÈõÜÊâÄÊúâË¶ÅÁîüÊàêÁöÑ‰ª£ÁêÜÊñπÊ≥ïÔºåÂ∞ÜÂÖ∂ÂåÖË£ÖÊàêProxyMethodÂØπË±°Âπ∂Ê≥®ÂÜåÂà∞MapÈõÜÂêà‰∏≠„ÄÇ Á¨¨‰∫åÊ≠•ÔºöÊî∂ÈõÜÊâÄÊúâË¶Å‰∏∫ClassÊñá‰ª∂ÁîüÊàêÁöÑÂ≠óÊÆµ‰ø°ÊÅØÂíåÊñπÊ≥ï‰ø°ÊÅØ„ÄÇ Á¨¨‰∏âÊ≠•ÔºöÂÆåÊàê‰∫Ü‰∏äÈù¢ÁöÑÂ∑•‰ΩúÂêéÔºåÂºÄÂßãÁªÑË£ÖClassÊñá‰ª∂„ÄÇ ‰∏Ä‰∏™Á±ªÁöÑÊ†∏ÂøÉÈÉ®ÂàÜÂ∞±ÊòØÂÆÉÁöÑÂ≠óÊÆµÂíåÊñπÊ≥ï„ÄÇÈáçÁÇπËÅöÁÑ¶Á¨¨‰∫åÊ≠•ÔºåÁúãÁúãÂÆÉ‰∏∫‰ª£ÁêÜÁ±ªÁîüÊàê‰∫ÜÂì™‰∫õÂ≠óÊÆµÂíåÊñπÊ≥ï„ÄÇÂú®Á¨¨‰∫åÊ≠•‰∏≠ÔºåÊåâÈ°∫Â∫èÂÅö‰∫Ü‰∏ãÈù¢Âõõ‰ª∂‰∫ã„ÄÇ ‰∏∫‰ª£ÁêÜÁ±ªÁîüÊàê‰∏Ä‰∏™Â∏¶ÂèÇÊûÑÈÄ†Âô®Ôºå‰º†ÂÖ•InvocationHandlerÂÆû‰æãÁöÑÂºïÁî®Âπ∂Ë∞ÉÁî®Áà∂Á±ªÁöÑÂ∏¶ÂèÇÊûÑÈÄ†Âô®„ÄÇ ÈÅçÂéÜ‰ª£ÁêÜÊñπÊ≥ïMapÈõÜÂêàÔºå‰∏∫ÊØè‰∏™‰ª£ÁêÜÊñπÊ≥ïÁîüÊàêÂØπÂ∫îÁöÑMethodÁ±ªÂûãÈùôÊÄÅÂüüÔºåÂπ∂Â∞ÜÂÖ∂Ê∑ªÂä†Âà∞fieldsÈõÜÂêà‰∏≠„ÄÇ ÈÅçÂéÜ‰ª£ÁêÜÊñπÊ≥ïMapÈõÜÂêàÔºå‰∏∫ÊØè‰∏™‰ª£ÁêÜÊñπÊ≥ïÁîüÊàêÂØπÂ∫îÁöÑMethodInfoÂØπË±°ÔºåÂπ∂Â∞ÜÂÖ∂Ê∑ªÂä†Âà∞methodsÈõÜÂêà‰∏≠„ÄÇ ‰∏∫‰ª£ÁêÜÁ±ªÁîüÊàêÈùôÊÄÅÂàùÂßãÂåñÊñπÊ≥ïÔºåËØ•ÈùôÊÄÅÂàùÂßãÂåñÊñπÊ≥ï‰∏ªË¶ÅÊòØÂ∞ÜÊØè‰∏™‰ª£ÁêÜÊñπÊ≥ïÁöÑÂºïÁî®ËµãÂÄºÁªôÂØπÂ∫îÁöÑÈùôÊÄÅÂ≠óÊÆµ„ÄÇ ÈÄöËøá‰ª•‰∏äÂàÜÊûêÔºåÂèØ‰ª•Â§ßËá¥Áü•ÈÅìJDKÂä®ÊÄÅ‰ª£ÁêÜÊúÄÁªà‰ºöÁîüÊàêÂ¶Ç‰∏ãÁªìÊûÑÁöÑ‰ª£ÁêÜÁ±ªÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public class Proxy0 extends Proxy implements UserDao &#123; //Á¨¨‰∏ÄÊ≠•, ÁîüÊàêÊûÑÈÄ†Âô® protected Proxy0(InvocationHandler h) &#123; super(h); &#125; //Á¨¨‰∫åÊ≠•, ÁîüÊàêÈùôÊÄÅÂüü private static Method m1; //hashCodeÊñπÊ≥ï private static Method m2; //equalsÊñπÊ≥ï private static Method m3; //toStringÊñπÊ≥ï private static Method m4; //... //Á¨¨‰∏âÊ≠•, ÁîüÊàê‰ª£ÁêÜÊñπÊ≥ï @Override public int hashCode() &#123; try &#123; return (int) h.invoke(this, m1, null); &#125; catch (Throwable e) &#123; throw new UndeclaredThrowableException(e); &#125; &#125; @Override public boolean equals(Object obj) &#123; try &#123; Object[] args = new Object[] &#123;obj&#125;; return (boolean) h.invoke(this, m2, args); &#125; catch (Throwable e) &#123; throw new UndeclaredThrowableException(e); &#125; &#125; @Override public String toString() &#123; try &#123; return (String) h.invoke(this, m3, null); &#125; catch (Throwable e) &#123; throw new UndeclaredThrowableException(e); &#125; &#125; @Override public void save(User user) &#123; try &#123; //ÊûÑÈÄ†ÂèÇÊï∞Êï∞ÁªÑ, Â¶ÇÊûúÊúâÂ§ö‰∏™ÂèÇÊï∞ÂæÄÂêéÈù¢Ê∑ªÂä†Â∞±Ë°å‰∫Ü Object[] args = new Object[] &#123;user&#125;; h.invoke(this, m4, args); &#125; catch (Throwable e) &#123; throw new UndeclaredThrowableException(e); &#125; &#125; //Á¨¨ÂõõÊ≠•, ÁîüÊàêÈùôÊÄÅÂàùÂßãÂåñÊñπÊ≥ï static &#123; try &#123; Class c1 = Class.forName(Object.class.getName()); Class c2 = Class.forName(UserDao.class.getName()); m1 = c1.getMethod("hashCode", null); m2 = c1.getMethod("equals", new Class[]&#123;Object.class&#125;); m3 = c1.getMethod("toString", null); m4 = c2.getMethod("save", new Class[]&#123;User.class&#125;); //... &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; ÁªèËøáÂ±ÇÂ±ÇÂàÜÊûêÔºåÊ∑±ÂÖ•Êé¢Á©∂JDKÊ∫êÁ†ÅÔºåËøòÂéüÂä®ÊÄÅÁîüÊàêÁöÑ‰ª£ÁêÜÁ±ªÁöÑÊú¨Êù•Èù¢ÁõÆÔºåÊòéÁôΩ‰∫Ü‰ª•‰∏ãÂá†ÁÇπÔºö ‰ª£ÁêÜÁ±ªÈªòËÆ§ÁªßÊâøPorxyÁ±ªÔºåÂõ†‰∏∫Java‰∏≠Âè™ÊîØÊåÅÂçïÁªßÊâøÔºåÊâÄ‰ª•JDKÂä®ÊÄÅ‰ª£ÁêÜÂè™ËÉΩÂéªÂÆûÁé∞Êé•Âè£„ÄÇ ‰ª£ÁêÜÊñπÊ≥ïÈÉΩ‰ºöÂéªË∞ÉÁî®InvocationHandlerÁöÑinvoke()ÊñπÊ≥ïÔºåÂõ†Ê≠§ÈúÄË¶ÅÈáçÂÜôInvocationHandlerÁöÑinvoke()ÊñπÊ≥ï„ÄÇ Ë∞ÉÁî®invoke()ÊñπÊ≥ïÊó∂‰ºö‰º†ÂÖ•‰ª£ÁêÜÂÆû‰æãÊú¨Ë∫´ÔºåÁõÆÊ†áÊñπÊ≥ïÂíåÁõÆÊ†áÊñπÊ≥ïÂèÇÊï∞„ÄÇËß£Èáä‰∫Üinvoke()ÊñπÊ≥ïÁöÑÂèÇÊï∞ÊòØÊÄéÊ†∑Êù•ÁöÑ„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java‰∏≠try...catch...finallyËØ≠Âè•‰∏≠Âê´ÊúâreturnËØ≠Âè•ÁöÑÊâßË°åÊÉÖÂÜµ]]></title>
    <url>%2Fposts%2F65251ffc.html</url>
    <content type="text"><![CDATA[È¶ñÂÖàÁúãÂá†‰∏™Á§∫‰æã„ÄÇ &lt;p id=&quot;div-border-left-red&quot;&gt; Á§∫‰æã‰∏ÄÔºàtry‰∏≠ÊúâreturnÔºåfinally‰∏≠Ê≤°ÊúâreturnÔºâÔºö&lt;/p&gt; 12345678910111213141516171819202122232425262728package main.java.com.study.tryCatchFinally;/** * @author: whb * @description: try‰∏≠ÊúâreturnÔºåfinally‰∏≠Ê≤°Êúâreturn */public class DemoOne &#123; public static void main(String[] args) &#123; System.out.println(test()); &#125; private static int test() &#123; int num = 10; try &#123; System.out.println("try..."); return num += 100; &#125; catch (Exception e) &#123; System.out.println("catch..."); &#125; finally &#123; if (num &gt; 50) &#123; System.out.println("num &gt; 50 : " + num); &#125; System.out.println("finally..."); &#125; return num; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËæìÂá∫ÁªìÊûúÔºö &lt;/span&gt; 1234try...num &gt; 50 : 110finally...110 &lt;span id=&quot;inline-green&quot;&gt; ÂàÜÊûêÔºö &lt;/span&gt; ÊòæÁÑ∂‚Äúreturn num += 100‚ÄùË¢´ÊãÜÂàÜÊàê‰∫Ü‚Äúnum = num+100‚ÄùÂíå‚Äúreturn num‚Äù‰∏§‰∏™ËØ≠Âè•ÔºåÁ∫øÊâßË°åtry‰∏≠ÁöÑ‚Äúnum = num+100‚ÄùËØ≠Âè•ÔºåÂ∞ÜÂÖ∂‰øùÂ≠òËµ∑Êù•ÔºåÂú®try‰∏≠ÁöÑ‚Äùreturn num‚ÄúÊâßË°åÂâçÔºåÂÖàÂ∞Üfinally‰∏≠ÁöÑËØ≠Âè•ÊâßË°åÂÆåÔºåËÄåÂêéÂÜçÂ∞Ü110ËøîÂõû„ÄÇ &lt;p id=&quot;div-border-left-red&quot;&gt; Á§∫‰æã‰∫åÔºàtryÂíåfinally‰∏≠ÂùáÊúâreturnÔºâÔºö&lt;/p&gt; 1234567891011121314151617181920212223242526272829package main.java.com.study.tryCatchFinally;/** * @author: whb * @description: tryÂíåfinally‰∏≠ÂùáÊúâreturn */public class DemoTwo &#123; public static void main(String[] args) &#123; System.out.println(testTwo()); &#125; private static int testTwo() &#123; int num = 10; try &#123; System.out.println("try..."); return num += 100; &#125; catch (Exception e) &#123; System.out.println("catch error..."); &#125; finally &#123; if (num &gt; 50) &#123; System.out.println("num &gt; 50 : " + num); &#125; System.out.println("finally..."); num = 100; return num; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËæìÂá∫ÁªìÊûúÔºö &lt;/span&gt; 1234try...num &gt; 50 : 110finally...100 &lt;span id=&quot;inline-green&quot;&gt; ÂàÜÊûêÔºö &lt;/span&gt; try‰∏≠ÁöÑreturnËØ≠Âè•ÂêåÊ†∑Ë¢´ÊãÜÂàÜ‰∫ÜÔºåfinally‰∏≠ÁöÑreturnËØ≠Âè•ÂÖà‰∫étry‰∏≠ÁöÑreturnËØ≠Âè•ÊâßË°åÔºåÂõ†ËÄåtry‰∏≠ÁöÑreturnË¢´‚ÄùË¶ÜÁõñ‚ÄúÊéâ‰∫ÜÔºå‰∏çÂÜçÊâßË°å„ÄÇ &lt;p id=&quot;div-border-left-red&quot;&gt; Á§∫‰æã‰∏âÔºàfinally‰∏≠ÊîπÂèòËøîÂõûÂÄºnumÔºâÔºö&lt;/p&gt; 1234567891011121314151617181920212223242526272829package main.java.com.study.tryCatchFinally;/** * @author: whb * @description: finally‰∏≠ÊîπÂèòËøîÂõûÂÄºnum */public class DemoThree &#123; public static void main(String[] args) &#123; System.out.println(testThree()); &#125; private static int testThree() &#123; int num = 10; try &#123; System.out.println("try..."); return num; &#125; catch (Exception e) &#123; System.out.println("catch error..."); &#125; finally &#123; if (num &gt; 20) &#123; System.out.println("num &gt; 20 : " + num); &#125; System.out.println("finally"); num = 100; &#125; return num; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËæìÂá∫ÁªìÊûúÔºö &lt;/span&gt; 123try...finally10 &lt;span id=&quot;inline-green&quot;&gt; ÂàÜÊûêÔºö &lt;/span&gt; ËôΩÁÑ∂Âú®finally‰∏≠ÊîπÂèò‰∫ÜËøîÂõûÂÄºnumÔºå‰ΩÜÂõ†‰∏∫finally‰∏≠Ê≤°ÊúâreturnËØ•numÁöÑÂÄºÔºåÂõ†Ê≠§Âú®ÊâßË°åÂÆåfinally‰∏≠ÁöÑËØ≠Âè•ÂêéÔºåtestThree()ÂáΩÊï∞‰ºöÂæóÂà∞try‰∏≠ËøîÂõûÁöÑnumÁöÑÂÄºÔºåËÄåtry‰∏≠ÁöÑnumÁöÑÂÄº‰æùÁÑ∂ÊòØÁ®ãÂ∫èËøõÂÖ•finally‰ª£Á†ÅÂùóÂâç‰øùÁïô‰∏ãÊù•ÁöÑÂÄºÔºåÂõ†Ê≠§ÂæóÂà∞ÁöÑËøîÂõûÂÄº‰∏∫10„ÄÇ &lt;p id=&quot;div-border-left-red&quot;&gt; Á§∫‰æãÂõõÔºàÂ∞ÜnumÁöÑÂÄºÂåÖË£ÖÂú®NumÁ±ª‰∏≠ÔºâÔºö&lt;/p&gt; 12345678910111213141516171819202122232425262728293031package main.java.com.study.tryCatchFinally;/** * @author: whb * @description: Â∞ÜnumÁöÑÂÄºÂåÖË£ÖÂú®NumÁ±ª‰∏≠ */public class DemoFour &#123; public static void main(String[] args) &#123; System.out.println(test().num); &#125; private static Num test() &#123; Num number = new Num(); try &#123; System.out.println("try"); return number; &#125; catch (Exception e) &#123; System.out.println("error"); &#125; finally &#123; if (number.num &gt; 20) &#123; System.out.println("number.num &gt; 20 : " + number.num); &#125; System.out.println("finally"); number.num = 100; &#125; return number; &#125;&#125;class Num &#123; public int num = 10;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËæìÂá∫ÁªìÊûúÔºö &lt;/span&gt; 123tryfinally100 &lt;span id=&quot;inline-green&quot;&gt; ÂàÜÊûêÔºö &lt;/span&gt; ‰ªéÁªìÊûú‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÂêåÊ†∑ÊòØÂú®finally‰∏≠ÊîπÂèò‰∫ÜËøîÂõûÂÄºnumÁöÑÂÄºÔºåÂú®Á§∫‰æã‰∏â‰∏≠ÔºåÂπ∂Ê≤°ÊúâË¢´try‰∏≠ÁöÑreturnËøîÂõûÔºàtestÔºàÔºâÊñπÊ≥ïÂæóÂà∞ÁöÑ‰∏çÊòØ100ÔºâÔºå‰ΩÜÂú®ËøôÈáåÂç¥Ë¢´try‰∏≠ÁöÑreturnËØ≠Âè•ËøîÂõû‰∫Ü„ÄÇ ÂØπ‰∫éÂê´ÊúâreturnËØ≠Âè•ÁöÑÊÉÖÂÜµÔºåËøôÈáåÊàë‰ª¨ÂèØ‰ª•ÁÆÄÂçïÂú∞ÊÄªÁªìÂ¶Ç‰∏ãÔºö &lt;font color=&quot;blue&quot;&gt;tryËØ≠Âè•Âú®ËøîÂõûÂâçÔºåÂ∞ÜÂÖ∂‰ªñÊâÄÊúâÁöÑÊìç‰ΩúÊâßË°åÂÆåÔºå‰øùÁïôÂ•ΩË¶ÅËøîÂõûÁöÑÂÄºÔºåËÄåÂêéËΩ¨ÂÖ•ÊâßË°åfinally‰∏≠ÁöÑËØ≠Âè•ÔºåËÄåÂêéÂàÜ‰∏∫‰ª•‰∏ã‰∏âÁßçÊÉÖÂÜµÔºö&lt;/font&gt; &lt;font color=&quot;blue&quot;&gt;ÊÉÖÂÜµ‰∏ÄÔºöÂ¶ÇÊûúfinally‰∏≠ÊúâreturnËØ≠Âè•ÔºåÂàô‰ºöÂ∞Ütry‰∏≠ÁöÑreturnËØ≠Âè•‚ÄùË¶ÜÁõñ‚ÄúÊéâÔºåÁõ¥Êé•ÊâßË°åfinally‰∏≠ÁöÑreturnËØ≠Âè•ÔºåÂæóÂà∞ËøîÂõûÂÄºÔºåËøôÊ†∑‰æøÊó†Ê≥ïÂæóÂà∞try‰πãÂâç‰øùÁïôÂ•ΩÁöÑËøîÂõûÂÄº„ÄÇ&lt;/font&gt; &lt;font color=&quot;blue&quot;&gt;ÊÉÖÂÜµ‰∫åÔºöÂ¶ÇÊûúfinally‰∏≠Ê≤°ÊúâreturnËØ≠Âè•Ôºå‰πüÊ≤°ÊúâÊîπÂèòË¶ÅËøîÂõûÂÄºÔºåÂàôÊâßË°åÂÆåfinally‰∏≠ÁöÑËØ≠Âè•ÂêéÔºå‰ºöÊé•ÁùÄÊâßË°åtry‰∏≠ÁöÑreturnËØ≠Âè•ÔºåËøîÂõû‰πãÂâç‰øùÁïôÁöÑÂÄº„ÄÇ&lt;/font&gt; &lt;font color=&quot;blue&quot;&gt;ÊÉÖÂÜµ‰∏âÔºöÂ¶ÇÊûúfinally‰∏≠Ê≤°ÊúâreturnËØ≠Âè•Ôºå‰ΩÜÊòØÊîπÂèò‰∫ÜË¶ÅËøîÂõûÁöÑÂÄºÔºåËøôÈáåÊúâÁÇπÁ±ª‰ºº‰∏éÂºïÁî®‰º†ÈÄíÂíåÂÄº‰º†ÈÄíÁöÑÂå∫Âà´ÔºåÂàÜ‰ª•‰∏ã‰∏§ÁßçÊÉÖÂÜµÔºö&lt;/font&gt; &lt;font color=&quot;blue&quot;&gt;1ÔºâÂ¶ÇÊûúreturnÁöÑÊï∞ÊçÆÊòØÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÊàñÊñáÊú¨Â≠óÁ¨¶‰∏≤ÔºåÂàôÂú®finally‰∏≠ÂØπËØ•Âü∫Êú¨Êï∞ÊçÆÁöÑÊîπÂèò‰∏çËµ∑‰ΩúÁî®Ôºåtry‰∏≠ÁöÑreturnËØ≠Âè•‰æùÁÑ∂‰ºöËøîÂõûËøõÂÖ•finallyÂùó‰πãÂâç‰øùÁïôÁöÑÂÄº„ÄÇ&lt;/font&gt; &lt;font color=&quot;blue&quot;&gt;2ÔºâÂ¶ÇÊûúreturnÁöÑÊï∞ÊçÆÊòØÂºïÁî®Êï∞ÊçÆÁ±ªÂûãÔºåËÄåÂú®finally‰∏≠ÂØπËØ•ÂºïÁî®Êï∞ÊçÆÁ±ªÂûãÁöÑÂ±ûÊÄßÂÄºÁöÑÊîπÂèòËµ∑‰ΩúÁî®Ôºåtry‰∏≠ÁöÑreturnËØ≠Âè•ËøîÂõûÁöÑÂ∞±ÊòØÂú®finally‰∏≠ÊîπÂèòÂêéÁöÑËØ•Â±ûÊÄßÁöÑÂÄº„ÄÇ&lt;/font&gt;]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JVMÂéüÁêÜ]]></title>
    <url>%2Fposts%2F6f6b6cd5.html</url>
    <content type="text"><![CDATA[JavaÂÜÖÂ≠òÊ®°Âûã JavaÁ®ãÂ∫èÊâßË°åÊµÅÁ®ã Êó•Â∏∏JavaÁöÑÂü∫Êú¨ÂºÄÂèëÊ®°ÂºèÊòØÔºåÊàë‰ª¨ÂÜôÁöÑÊâÄÊúâjavaÁ®ãÂ∫èÈÉΩ‰øùÂ≠òÂú®*.javaÁöÑÊñá‰ª∂‰∏≠ÔºåÂç≥Êàë‰ª¨ÁöÑÊ∫ê‰ª£Á†ÅÔºåËøô‰∫õÊ∫ê‰ª£Á†ÅÂøÖÈ°ªÁªèËøájavac.exeÂëΩ‰ª§Â∞ÜÂÖ∂ÁºñËØëÊàê*.classÊñá‰ª∂ÔºåËÄåÂêéÂà©Áî®java.exeÂëΩ‰ª§Âú®JVMËøõÁ®ã‰∏≠Ëß£ÈáäÊâßË°å„ÄÇÊï¥‰∏™ËøáÁ®ãÂ¶Ç‰∏ãÂõæÔºö ÂÆûÈôÖ‰∏äÔºåÂΩìJVMÂ∞ÜÊâÄÈúÄË¶ÅÁöÑ .class Êñá‰ª∂Âä†ËΩΩÂà∞ JVM ËøõÁ®ã‰πã‰∏≠ÔºåÂú®Ëøô‰∏™ËøáÁ®ãÈúÄË¶Å‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®ÔºàClassLoad),Á±ªÂä†ËΩΩÂô®ÁöÑÂ•ΩÂ§ÑÂú®‰∫éÔºöÂèØ‰ª•ÈöèÂÆöÊåáÂÆö *.class Êñá‰ª∂ÊâÄÂú®ÁöÑË∑ØÂæÑ„ÄÇ JVMÔºöjavaËôöÊãüÊú∫ÔºåÊâÄÊúâÁöÑÁ®ãÂ∫èÈÉΩË¶ÅÊ±ÇËøêË°åÂú®JVM‰∏äÔºåÊòØÂõ†‰∏∫ËÄÉËôëÂà∞‰∫ÜÂèØÁßªÊ§çÊÄßÈóÆÈ¢ò Ôºå‰ΩÜÂ¶ÇÊûúÁúüÊ≠£ÂéªÊâßË°åÁ®ãÂ∫èÔºåÊó†Ê≥ïÁ¶ªÂºÄÊìç‰ΩúÁ≥ªÁªüÁöÑÊîØÊåÅ„ÄÇ Âú® java ‰∏≠ÂèØ‰ª•‰ΩøÁî® native ÂÆûÁé∞ Êú¨Âú∞ C ÂáΩÊï∞ÁöÑË∞ÉÁî®ÔºåNative InterfaceÔºå‰ΩÜÊòØËøô‰∫õÈÉΩÊòØÂ±û‰∫éÁ®ãÂ∫èÁöÑËæÖÂä©ÊâãÊÆµÔºåËÄåÁúüÊ≠£ÁöÑÁ®ãÂ∫èËøêË°åÈÉΩÂú®‚ÄúËøêË°åÊó∂Êï∞ÊçÆÂå∫‚Äù‰πã‰∏≠„ÄÇ Á®ãÂ∫èËÆ°Êï∞Âô® ‰ªÄ‰πàÊòØÁ®ãÂ∫èËÆ°Êï∞Âô® Á®ãÂ∫èËÆ°Êï∞Âô®ÊòØ‰∏ÄÂùóËæÉÂ∞èÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂèØ‰ª•ÊääÂÆÉÁúã‰ΩúÂΩìÂâçÁ∫øÁ®ãÊ≠£Âú®ÊâßË°åÁöÑÂ≠óËäÇÁ†ÅÁöÑË°åÂè∑ÊåáÁ§∫Âô®„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÁ®ãÂ∫èËÆ°Êï∞Âô®ÈáåÈù¢ËÆ∞ÂΩïÁöÑÊòØÂΩìÂâçÁ∫øÁ®ãÊ≠£Âú®ÊâßË°åÁöÑÈÇ£‰∏ÄÊù°Â≠óËäÇÁ†ÅÊåá‰ª§ÁöÑÂú∞ÂùÄ„ÄÇ Ê≥®Ôºö‰ΩÜÊòØÔºåÂ¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊ≠£Âú®ÊâßË°åÁöÑÊòØ‰∏Ä‰∏™Êú¨Âú∞ÊñπÊ≥ïÔºåÈÇ£‰πàÊ≠§Êó∂Á®ãÂ∫èËÆ°Êï∞Âô®‰∏∫Á©∫„ÄÇ Á®ãÂ∫èËÆ°Êï∞Âô®ÁöÑ‰ΩúÁî® Á®ãÂ∫èËÆ°Êï∞Âô®Êúâ‰∏§‰∏™‰ΩúÁî®Ôºö Â≠óËäÇÁ†ÅËß£ÈáäÂô®ÈÄöËøáÊîπÂèòÁ®ãÂ∫èËÆ°Êï∞Âô®Êù•‰æùÊ¨°ËØªÂèñÊåá‰ª§Ôºå‰ªéËÄåÂÆûÁé∞‰ª£Á†ÅÁöÑÊµÅÁ®ãÊéßÂà∂ÔºåÂ¶ÇÔºöÈ°∫Â∫èÊâßË°å„ÄÅÈÄâÊã©„ÄÅÂæ™ÁéØ„ÄÅÂºÇÂ∏∏Â§ÑÁêÜ„ÄÇ Âú®Â§öÁ∫øÁ®ãÁöÑÊÉÖÂÜµ‰∏ãÔºåÁ®ãÂ∫èËÆ°Êï∞Âô®Áî®‰∫éËÆ∞ÂΩïÂΩìÂâçÁ∫øÁ®ãÊâßË°åÁöÑ‰ΩçÁΩÆÔºå‰ªéËÄåÂΩìÁ∫øÁ®ãË¢´ÂàáÊç¢ÂõûÊù•ÁöÑÊó∂ÂÄôËÉΩÂ§üÁü•ÈÅìËØ•Á∫øÁ®ã‰∏äÊ¨°ËøêË°åÂà∞Âì™ÂÑø‰∫Ü„ÄÇ Á®ãÂ∫èËÆ°Êï∞Âô®ÁöÑÁâπÁÇπ ÊòØ‰∏ÄÂùóËæÉÂ∞èÁöÑÂ≠òÂÇ®Á©∫Èó¥ Á∫øÁ®ãÁßÅÊúâ„ÄÇÊØèÊù°Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™Á®ãÂ∫èËÆ°Êï∞Âô®„ÄÇ ÊòØÂîØ‰∏Ä‰∏Ä‰∏™‰∏ç‰ºöÂá∫Áé∞OutOfMemoryErrorÁöÑÂÜÖÂ≠òÂå∫Âüü„ÄÇ ÁîüÂëΩÂë®ÊúüÈöèÁùÄÁ∫øÁ®ãÁöÑÂàõÂª∫ËÄåÂàõÂª∫ÔºåÈöèÁùÄÁ∫øÁ®ãÁöÑÁªìÊùüËÄåÊ≠ª‰∫°„ÄÇ JavaËôöÊãüÊú∫Ê†à(JVM Stack) ‰ªÄ‰πàÊòØJavaËôöÊãüÊú∫Ê†à JavaËôöÊãüÊú∫Ê†àÊòØÊèèËø∞JavaÊñπÊ≥ïËøêË°åËøáÁ®ãÁöÑÂÜÖÂ≠òÊ®°Âûã„ÄÇ JavaËôöÊãüÊú∫Ê†à‰ºö‰∏∫ÊØè‰∏Ä‰∏™Âç≥Â∞ÜËøêË°åÁöÑJavaÊñπÊ≥ïÂàõÂª∫‰∏ÄÂùóÂè´ÂÅö‚ÄúÊ†àÂ∏ß‚ÄùÁöÑÂå∫ÂüüÔºåËøôÂùóÂå∫ÂüüÁî®‰∫éÂ≠òÂÇ®ËØ•ÊñπÊ≥ïÂú®ËøêË°åËøáÁ®ã‰∏≠ÊâÄÈúÄË¶ÅÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØ„ÄÇ Âú®JVM ‰∏≠Áî®Ê†àÂ∏ßÔºàStack FrameÔºâÊù•ÂÆö‰πâÊ†àÁöÑÊï∞ÊçÆÔºåÊØè‰∏Ä‰∏™Ê†àÂ∏ßË°®Á§∫ÊØè‰∏™ÂèØËÉΩÊâßË°åÁöÑÊñπÊ≥ï„ÄÇ ËÄåÊ†àÂ∏ß‰∏≠ÂàôÂåÖÂê´‰∫ÜÔºöÂ±ÄÈÉ®ÂèòÈáèË°®ÔºåÊìç‰ΩúÊï∞Ê†àÔºåÊåáÂêëËøêË°åÊó∂Â∏∏ÈáèÊ±†ÁöÑÂºïÁî®ÔºåÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÂíåÂä®ÊÄÅÈìæÊé•„ÄÇ Â±ÄÈÉ®ÂèòÈáèË°®ÔºàLocal VariablesÔºâ:ÊñπÊ≥ïÁöÑÂ±ÄÈÉ®ÂèòÈáèÊàñÂΩ¢ÂèÇÔºåÂÖ∂‰ª•ÂèòÈáèÊßΩÔºàsoltÔºâ‰∏∫ÊúÄÂ∞èÂçï‰ΩçÔºåÂè™ÂÖÅËÆ∏‰øùÂ≠ò32‰∏∫ÈïøÂ∫¶ÁöÑÂèòÈáèÔºåÂ¶ÇÊûúË∂ÖËøá32‰ΩçÂàô‰ºöÂºÄËæü‰∏§‰∏™ËøûÁª≠ÁöÑsolt(64‰ΩçÈïøÂ∫¶ÔºålongÂíådouble)Ôºõ Êìç‰ΩúÊï∞Ê†àÔºàOperand StackÔºâÔºöË°®ËææÂºèËÆ°ÁÆóÂú®Ê†à‰∏≠ÂÆåÊàêÔºõ ÊåáÂêëÂΩìÂâçÊñπÊ≥ïÊâÄÂ±ûÁöÑÁ±ªÁöÑËøêË°åÊó∂Â∏∏ÈáèÊ±†ÁöÑÂºïÁî®ÔºàReference to runtime constant poolÔºâÔºöÂºïÁî®ÂÖ∂‰ªñÁ±ªÁöÑÂ∏∏ÈáèÊàñËÄÖ‰ΩøÁî®String Ê±†‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤Ôºõ ÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÔºàReturn AddressÔºâÔºöÊñπÊ≥ïÊâßË°åÂÆåÂêéÈúÄË¶ÅËøîÂõûË∞ÉÁî®Ê≠§ÊñπÊ≥ïÁöÑ‰ΩçÁΩÆÔºåÊâÄ‰ª•ÈúÄË¶ÅÂÜçÊ†àÂ∏ß‰∏≠‰øùÂ≠òÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÔºõ JavaËôöÊãüÊú∫Ê†àÁöÑÁâπÁÇπ Â±ÄÈÉ®ÂèòÈáèË°®ÁöÑÂàõÂª∫ÊòØÂú®ÊñπÊ≥ïË¢´ÊâßË°åÁöÑÊó∂ÂÄôÔºåÈöèÁùÄÊ†àÂ∏ßÁöÑÂàõÂª∫ËÄåÂàõÂª∫„ÄÇËÄå‰∏îÔºåÂ±ÄÈÉ®ÂèòÈáèË°®ÁöÑÂ§ßÂ∞èÂú®ÁºñËØëÊó∂ÊúüÂ∞±Á°ÆÂÆö‰∏ãÊù•‰∫ÜÔºåÂú®ÂàõÂª∫ÁöÑÊó∂ÂÄôÂè™ÈúÄÂàÜÈÖç‰∫ãÂÖàËßÑÂÆöÂ•ΩÁöÑÂ§ßÂ∞èÂç≥ÂèØ„ÄÇÊ≠§Â§ñÔºåÂú®ÊñπÊ≥ïËøêË°åÁöÑËøáÁ®ã‰∏≠Â±ÄÈÉ®ÂèòÈáèË°®ÁöÑÂ§ßÂ∞èÊòØ‰∏ç‰ºöÂèëÁîüÊîπÂèòÁöÑ„ÄÇ JavaËôöÊãüÊú∫Ê†à‰ºöÂá∫Áé∞‰∏§ÁßçÂºÇÂ∏∏ÔºöStackOverFlowErrorÂíåOutOfMemoryError„ÄÇ a) StackOverFlowErrorÔºö Ëã•JavaËôöÊãüÊú∫Ê†àÁöÑÂÜÖÂ≠òÂ§ßÂ∞è‰∏çÂÖÅËÆ∏Âä®ÊÄÅÊâ©Â±ïÔºåÈÇ£‰πàÂΩìÁ∫øÁ®ãËØ∑Ê±ÇÊ†àÁöÑÊ∑±Â∫¶Ë∂ÖËøáÂΩìÂâçJavaËôöÊãüÊú∫Ê†àÁöÑÊúÄÂ§ßÊ∑±Â∫¶ÁöÑÊó∂ÂÄôÔºåÂ∞±ÊäõÂá∫StackOverFlowErrorÂºÇÂ∏∏„ÄÇ b) OutOfMemoryErrorÔºö Ëã•JavaËôöÊãüÊú∫Ê†àÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÂÖÅËÆ∏Âä®ÊÄÅÊâ©Â±ïÔºå‰∏îÂΩìÁ∫øÁ®ãËØ∑Ê±ÇÊ†àÊó∂ÂÜÖÂ≠òÁî®ÂÆå‰∫ÜÔºåÊó†Ê≥ïÂÜçÂä®ÊÄÅÊâ©Â±ï‰∫ÜÔºåÊ≠§Êó∂ÊäõÂá∫OutOfMemoryErrorÂºÇÂ∏∏„ÄÇ JavaËôöÊãüÊú∫Ê†à‰πüÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâÂêÑËá™ÁöÑJavaËôöÊãüÊú∫Ê†àÔºåËÄå‰∏îÈöèÁùÄÁ∫øÁ®ãÁöÑÂàõÂª∫ËÄåÂàõÂª∫ÔºåÈöèÁùÄÁ∫øÁ®ãÁöÑÊ≠ª‰∫°ËÄåÊ≠ª‰∫°„ÄÇ Ê≥®ÔºöStackOverFlowErrorÂíåOutOfMemoryErrorÁöÑÂºÇÂêåÔºü StackOverFlowErrorË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãÁî≥ËØ∑ÁöÑÊ†àË∂ÖËøá‰∫Ü‰∫ãÂÖàÂÆöÂ•ΩÁöÑÊ†àÁöÑÊúÄÂ§ßÊ∑±Â∫¶Ôºå‰ΩÜÂÜÖÂ≠òÁ©∫Èó¥ÂèØËÉΩËøòÊúâÂæàÂ§ö„ÄÇ Ëß£ÂÜ≥ËøôÁßçÈóÆÈ¢òÂèØ‰ª•ÈÄÇÂΩìÂä†Â§ßÊ†àÁöÑÊ∑±Â∫¶ÔºàÂ¢ûÂä†Ê†àÁ©∫Èó¥Â§ßÂ∞èÔºâÔºå‰πüÂ∞±ÊòØÊää -Xss ÁöÑÂÄºËÆæÁΩÆÂ§ß‰∏Ä‰∫õÔºå‰ΩÜ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊòØ‰ª£Á†ÅÈóÆÈ¢òÁöÑÂèØËÉΩÊÄßËæÉÂ§ß ËÄåOutOfMemoryErrorÊòØÊåáÂΩìÁ∫øÁ®ãÁî≥ËØ∑Ê†àÊó∂ÂèëÁé∞Ê†àÂ∑≤ÁªèÊª°‰∫ÜÔºåËÄå‰∏îÂÜÖÂ≠ò‰πüÂÖ®ÈÉΩÁî®ÂÖâ‰∫Ü„ÄÇ Ëß£ÂÜ≥ËøôÁßçÈóÆÈ¢òÂèØ‰ª•ÈÄÇÂΩìÂáèÂ∞èÊ†àÁöÑÊ∑±Â∫¶Ôºå‰πüÂ∞±ÊòØÊää -Xss ÁöÑÂÄºËÆæÁΩÆÂ∞è‰∏Ä‰∫õÔºåÊØè‰∏™Á∫øÁ®ãÂç†Áî®ÁöÑÁ©∫Èó¥Â∞è‰∫ÜÔºåÊÄªÁ©∫Èó¥‰∏ÄÂÆöÂ∞±ËÉΩÂÆπÁ∫≥Êõ¥Â§öÁöÑÁ∫øÁ®ãÔºå‰ΩÜÊòØÊìç‰ΩúÁ≥ªÁªüÂØπ‰∏Ä‰∏™ËøõÁ®ãÁöÑÁ∫øÁ®ãÊï∞ÊúâÈôêÂà∂ÔºåÁªèÈ™åÂÄºÂú® 3000~5000 Â∑¶Âè≥„ÄÇ Âú® jdk1.5 ‰πãÂâç -Xss ÈªòËÆ§ÊòØ 256kÔºåjdk1.5 ‰πãÂêéÈªòËÆ§ÊòØ 1MÔºåËøô‰∏™ÈÄâÈ°πÂØπÁ≥ªÁªüÂΩ±ÂìçËøòÊòØËõÆÂ§ßÁöÑÔºåËÆæÁΩÆÊó∂Ë¶ÅÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµÔºåË∞®ÊÖéÊìç‰Ωú„ÄÇ Êú¨Âú∞ÊñπÊ≥ïÊ†à ‰ªÄ‰πàÊòØÊú¨Âú∞ÊñπÊ≥ïÊ†à Êú¨Âú∞ÊñπÊ≥ïÊ†àÂíåJavaËôöÊãüÊú∫Ê†àÂÆûÁé∞ÁöÑÂäüËÉΩÁ±ª‰ººÔºåÂè™‰∏çËøáÊú¨Âú∞ÊñπÊ≥ïÊ†àÊòØÊú¨Âú∞ÊñπÊ≥ïËøêË°åÁöÑÂÜÖÂ≠òÊ®°Âûã„ÄÇ Êú¨Âú∞ÊñπÊ≥ïË¢´ÊâßË°åÁöÑÊó∂ÂÄôÔºåÂú®Êú¨Âú∞ÊñπÊ≥ïÊ†à‰πü‰ºöÂàõÂª∫‰∏Ä‰∏™Ê†àÂ∏ßÔºåÁî®‰∫éÂ≠òÊîæËØ•Êú¨Âú∞ÊñπÊ≥ïÁöÑÂ±ÄÈÉ®ÂèòÈáèË°®„ÄÅÊìç‰ΩúÊï∞Ê†à„ÄÅÂä®ÊÄÅÈìæÊé•„ÄÅÂá∫Âè£‰ø°ÊÅØ„ÄÇ ÊñπÊ≥ïÊâßË°åÂÆåÊØïÂêéÁõ∏Â∫îÁöÑÊ†àÂ∏ß‰πü‰ºöÂá∫Ê†àÂπ∂ÈáäÊîæÂÜÖÂ≠òÁ©∫Èó¥„ÄÇ‰πü‰ºöÊäõÂá∫StackOverFlowErrorÂíåOutOfMemoryErrorÂºÇÂ∏∏„ÄÇ Â†Ü ‰ªÄ‰πàÊòØÂ†Ü Â†ÜÊòØÁî®Êù•Â≠òÊîæÂØπË±°ÁöÑÂÜÖÂ≠òÁ©∫Èó¥„ÄÇ Âá†‰πéÊâÄÊúâÁöÑÂØπË±°ÈÉΩÂ≠òÂÇ®Âú®Â†Ü‰∏≠„ÄÇ Â†ÜÁöÑÁâπÁÇπ Á∫øÁ®ãÂÖ±‰∫´ÔºåÊï¥‰∏™JavaËôöÊãüÊú∫Âè™Êúâ‰∏Ä‰∏™Â†ÜÔºåÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩËÆøÈóÆÂêå‰∏Ä‰∏™Â†Ü„ÄÇËÄåÁ®ãÂ∫èËÆ°Êï∞Âô®„ÄÅJavaËôöÊãüÊú∫Ê†à„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊ†àÈÉΩÊòØ‰∏Ä‰∏™Á∫øÁ®ãÂØπÂ∫î‰∏Ä‰∏™ÁöÑ„ÄÇ Âú®ËôöÊãüÊú∫ÂêØÂä®Êó∂ÂàõÂª∫ ÂûÉÂúæÂõûÊî∂ÁöÑ‰∏ªË¶ÅÂú∫ÊâÄ„ÄÇ ÂèØ‰ª•Ëøõ‰∏ÄÊ≠•ÁªÜÂàÜ‰∏∫ÔºöÊñ∞Áîü‰ª£„ÄÅËÄÅÂπ¥‰ª£„ÄÇ Êñ∞Áîü‰ª£ÂèàÂèØË¢´ÂàÜ‰∏∫ÔºöEden„ÄÅFrom Survior„ÄÅTo Survior„ÄÇ ‰∏çÂêåÁöÑÂå∫ÂüüÂ≠òÊîæÂÖ∑Êúâ‰∏çÂêåÁîüÂëΩÂë®ÊúüÁöÑÂØπË±°„ÄÇËøôÊ†∑ÂèØ‰ª•Ê†πÊçÆ‰∏çÂêåÁöÑÂå∫Âüü‰ΩøÁî®‰∏çÂêåÁöÑÂûÉÂúæÂõûÊî∂ÁÆóÊ≥ïÔºå‰ªéËÄåÊõ¥ÂÖ∑ÊúâÈíàÂØπÊÄßÔºåÊõ¥È´òÊïà„ÄÇ Â†ÜÁöÑÂ§ßÂ∞èÊó¢ÂèØ‰ª•Âõ∫ÂÆö‰πüÂèØ‰ª•Êâ©Â±ïÔºå‰ΩÜ‰∏ªÊµÅÁöÑËôöÊãüÊú∫Â†ÜÁöÑÂ§ßÂ∞èÊòØÂèØÊâ©Â±ïÁöÑÔºåÂõ†Ê≠§ÂΩìÁ∫øÁ®ãËØ∑Ê±ÇÂàÜÈÖçÂÜÖÂ≠òÔºå‰ΩÜÂ†ÜÂ∑≤Êª°Ôºå‰∏îÂÜÖÂ≠òÂ∑≤Êª°Êó†Ê≥ïÂÜçÊâ©Â±ïÊó∂ÔºåÂ∞±ÊäõÂá∫OutOfMemoryError„ÄÇ ÊñπÊ≥ïÂå∫ ‰ªÄ‰πàÊòØÊñπÊ≥ïÂå∫ JavaËôöÊãüÊú∫ËßÑËåÉ‰∏≠ÂÆö‰πâÊñπÊ≥ïÂå∫ÊòØÂ†ÜÁöÑ‰∏Ä‰∏™ÈÄªËæëÈÉ®ÂàÜ„ÄÇÊñπÊ≥ïÂå∫‰∏≠Â≠òÊîæÂ∑≤ÁªèË¢´ËôöÊãüÊú∫Âä†ËΩΩÁöÑÁ±ª‰ø°ÊÅØ„ÄÅÂ∏∏Èáè„ÄÅÈùôÊÄÅÂèòÈáè„ÄÅÂç≥Êó∂ÁºñËØëÂô®ÁºñËØëÂêéÁöÑ‰ª£Á†ÅÁ≠â„ÄÇ ÊñπÊ≥ïÂå∫ÁöÑÁâπÁÇπ Á∫øÁ®ãÂÖ±‰∫´ ÊñπÊ≥ïÂå∫ÊòØÂ†ÜÁöÑ‰∏Ä‰∏™ÈÄªËæëÈÉ®ÂàÜÔºåÂõ†Ê≠§ÂíåÂ†Ü‰∏ÄÊ†∑ÔºåÈÉΩÊòØÁ∫øÁ®ãÂÖ±‰∫´ÁöÑ„ÄÇÊï¥‰∏™ËôöÊãüÊú∫‰∏≠Âè™Êúâ‰∏Ä‰∏™ÊñπÊ≥ïÂå∫„ÄÇ Ê∞∏‰πÖ‰ª£ ÊñπÊ≥ïÂå∫‰∏≠ÁöÑ‰ø°ÊÅØ‰∏ÄËà¨ÈúÄË¶ÅÈïøÊúüÂ≠òÂú®ÔºåËÄå‰∏îÂÆÉÂèàÊòØÂ†ÜÁöÑÈÄªËæëÂàÜÂå∫ÔºåÂõ†Ê≠§Áî®Â†ÜÁöÑÂàíÂàÜÊñπÊ≥ïÔºåÊàë‰ª¨ÊääÊñπÊ≥ïÂå∫Áß∞‰∏∫Ê∞∏‰πÖ‰ª£„ÄÇ ÂÜÖÂ≠òÂõûÊî∂ÊïàÁéá‰Ωé ÊñπÊ≥ïÂå∫ÁöÑ‰ø°ÊÅØ‰∏ÄËà¨ÈúÄË¶ÅÈïøÊúüÂ≠òÂú®ÔºåÂõûÊî∂‰∏ÄÈÅçÂÜÖÂ≠ò‰πãÂêéÂèØËÉΩÂè™ÊúâÂ∞ëÈáè‰ø°ÊÅØÊó†Êïà„ÄÇ ÂØπÊñπÊ≥ïÂå∫ÁöÑÂÜÖÂ≠òÂõûÊî∂ÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØÔºöÂØπÂ∏∏ÈáèÊ±†ÁöÑÂõûÊî∂ Âíå ÂØπÁ±ªÁöÑÂç∏ËΩΩ„ÄÇ JavaËôöÊãüÊú∫ËßÑËåÉÂØπÊñπÊ≥ïÂå∫ÁöÑË¶ÅÊ±ÇÊØîËæÉÂÆΩÊùæ„ÄÇ ÂíåÂ†Ü‰∏ÄÊ†∑ÔºåÂÖÅËÆ∏Âõ∫ÂÆöÂ§ßÂ∞èÔºå‰πüÂÖÅËÆ∏ÂèØÊâ©Â±ïÁöÑÂ§ßÂ∞èÔºåËøòÂÖÅËÆ∏‰∏çÂÆûÁé∞ÂûÉÂúæÂõûÊî∂„ÄÇ ‰ªÄ‰πàÊòØËøêË°åÊó∂Â∏∏ÈáèÊ±† ÊñπÊ≥ïÂå∫‰∏≠Â≠òÊîæ‰∏âÁßçÊï∞ÊçÆÔºöÁ±ª‰ø°ÊÅØ„ÄÅÂ∏∏Èáè„ÄÅÈùôÊÄÅÂèòÈáè„ÄÅÂç≥Êó∂ÁºñËØëÂô®ÁºñËØëÂêéÁöÑ‰ª£Á†Å„ÄÇÂÖ∂‰∏≠Â∏∏ÈáèÂ≠òÂÇ®Âú®ËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠„ÄÇjdk1,6Â∏∏ÈáèÊ±†ÊîæÂú®ÊñπÊ≥ïÂå∫Ôºåjdk1.7Â∏∏ÈáèÊ±†ÊîæÂú®Â†ÜÂÜÖÂ≠òÔºåjdk1.8ÊîæÂú®ÂÖÉÁ©∫Èó¥ÈáåÈù¢ÔºåÂíåÂ†ÜÁõ∏Áã¨Á´ã„ÄÇ Êàë‰ª¨‰∏ÄËà¨Âú®‰∏Ä‰∏™Á±ª‰∏≠ÈÄöËøápublic static finalÊù•Â£∞Êòé‰∏Ä‰∏™Â∏∏Èáè„ÄÇËøô‰∏™Á±ªË¢´ÁºñËØëÂêé‰æøÁîüÊàêClassÊñá‰ª∂ÔºåËøô‰∏™Á±ªÁöÑÊâÄÊúâ‰ø°ÊÅØÈÉΩÂ≠òÂÇ®Âú®Ëøô‰∏™classÊñá‰ª∂‰∏≠„ÄÇ ÂΩìËøô‰∏™Á±ªË¢´JavaËôöÊãüÊú∫Âä†ËΩΩÂêéÔºåclassÊñá‰ª∂‰∏≠ÁöÑÂ∏∏ÈáèÂ∞±Â≠òÊîæÂú®ÊñπÊ≥ïÂå∫ÁöÑËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠„ÄÇËÄå‰∏îÂú®ËøêË°åÊúüÈó¥ÔºåÂèØ‰ª•ÂêëÂ∏∏ÈáèÊ±†‰∏≠Ê∑ªÂä†Êñ∞ÁöÑÂ∏∏Èáè„ÄÇÂ¶ÇÔºöStringÁ±ªÁöÑintern()ÊñπÊ≥ïÂ∞±ËÉΩÂú®ËøêË°åÊúüÈó¥ÂêëÂ∏∏ÈáèÊ±†‰∏≠Ê∑ªÂä†Â≠óÁ¨¶‰∏≤Â∏∏Èáè„ÄÇ ÂΩìËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠ÁöÑÊüê‰∫õÂ∏∏ÈáèÊ≤°ÊúâË¢´ÂØπË±°ÂºïÁî®ÔºåÂêåÊó∂‰πüÊ≤°ÊúâË¢´ÂèòÈáèÂºïÁî®ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÂûÉÂúæÊî∂ÈõÜÂô®ÂõûÊî∂„ÄÇ Áõ¥Êé•ÂÜÖÂ≠ò Áõ¥Êé•ÂÜÖÂ≠òÊòØÈô§JavaËôöÊãüÊú∫‰πãÂ§ñÁöÑÂÜÖÂ≠òÔºå‰ΩÜ‰πüÊúâÂèØËÉΩË¢´Java‰ΩøÁî®„ÄÇ Âú®NIO‰∏≠ÂºïÂÖ•‰∫Ü‰∏ÄÁßçÂü∫‰∫éÈÄöÈÅìÂíåÁºìÂÜ≤ÁöÑIOÊñπÂºè„ÄÇÂÆÉÂèØ‰ª•ÈÄöËøáË∞ÉÁî®Êú¨Âú∞ÊñπÊ≥ïÁõ¥Êé•ÂàÜÈÖçJavaËôöÊãüÊú∫‰πãÂ§ñÁöÑÂÜÖÂ≠òÔºåÁÑ∂ÂêéÈÄöËøá‰∏Ä‰∏™Â≠òÂÇ®Âú®JavaÂ†Ü‰∏≠ÁöÑDirectByteBufferÂØπË±°Áõ¥Êé•Êìç‰ΩúËØ•ÂÜÖÂ≠òÔºåËÄåÊó†ÈúÄÂÖàÂ∞ÜÂ§ñÈù¢ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂ§çÂà∂Âà∞Â†Ü‰∏≠ÂÜçÊìç‰ΩúÔºå‰ªéËÄåÊèêÂçá‰∫ÜÊï∞ÊçÆÊìç‰ΩúÁöÑÊïàÁéá„ÄÇ Áõ¥Êé•ÂÜÖÂ≠òÁöÑÂ§ßÂ∞è‰∏çÂèóJavaËôöÊãüÊú∫ÊéßÂà∂Ôºå‰ΩÜÊó¢ÁÑ∂ÊòØÂÜÖÂ≠òÔºåÂΩìÂÜÖÂ≠ò‰∏çË∂≥Êó∂Â∞±‰ºöÊäõÂá∫OOMÂºÇÂ∏∏„ÄÇ JavaÂØπË±°ËÆøÈóÆÊ®°Âºè ÂØπË±°ÁöÑÂàõÂª∫ËøáÁ®ã ÂΩìËôöÊãüÊú∫ÈÅáÂà∞‰∏ÄÊù°Âê´ÊúânewÁöÑÊåá‰ª§Êó∂Ôºå‰ºöËøõË°å‰∏ÄÁ≥ªÂàóÂØπË±°ÂàõÂª∫ÁöÑÊìç‰ΩúÔºö Ê£ÄÊü•Â∏∏ÈáèÊ±†‰∏≠ÊòØÂê¶ÊúâÂç≥Â∞ÜË¶ÅÂàõÂª∫ÁöÑËøô‰∏™ÂØπË±°ÊâÄÂ±ûÁöÑÁ±ªÁöÑÁ¨¶Âè∑ÂºïÁî®Ôºõ Ëã•Â∏∏ÈáèÊ±†‰∏≠Ê≤°ÊúâËøô‰∏™Á±ªÁöÑÁ¨¶Âè∑ÂºïÁî®ÔºåËØ¥ÊòéËøô‰∏™Á±ªËøòÊ≤°ÊúâË¢´ÂÆö‰πâÔºÅÊäõÂá∫ClassNotFoundExceptionÔºõ Ëã•Â∏∏ÈáèÊ±†‰∏≠ÊúâËøô‰∏™Á±ªÁöÑÁ¨¶Âè∑ÂºïÁî®ÔºåÂàôËøõË°å‰∏ã‰∏ÄÊ≠•Â∑•‰ΩúÔºõ ËøõËÄåÊ£ÄÊü•Ëøô‰∏™Á¨¶Âè∑ÂºïÁî®ÊâÄ‰ª£Ë°®ÁöÑÁ±ªÊòØÂê¶Â∑≤ÁªèË¢´JVMÂä†ËΩΩÔºõ Ëã•ËØ•Á±ªËøòÊ≤°ÊúâË¢´Âä†ËΩΩÔºåÂ∞±ÊâæËØ•Á±ªÁöÑclassÊñá‰ª∂ÔºåÂπ∂Âä†ËΩΩËøõÊñπÊ≥ïÂå∫Ôºõ Ëã•ËØ•Á±ªÂ∑≤ÁªèË¢´JVMÂä†ËΩΩÔºåÂàôÂáÜÂ§á‰∏∫ÂØπË±°ÂàÜÈÖçÂÜÖÂ≠òÔºõ Ê†πÊçÆÊñπÊ≥ïÂå∫‰∏≠ËØ•Á±ªÁöÑ‰ø°ÊÅØÁ°ÆÂÆöËØ•Á±ªÊâÄÈúÄÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÔºõ ‰∏Ä‰∏™ÂØπË±°ÊâÄÈúÄÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÊòØÂú®Ëøô‰∏™ÂØπË±°ÊâÄÂ±ûÁ±ªË¢´ÂÆö‰πâÂÆåÂ∞±ËÉΩÁ°ÆÂÆöÁöÑÔºÅ‰∏î‰∏Ä‰∏™Á±ªÊâÄÁîü‰∫ßÁöÑÊâÄÊúâÂØπË±°ÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÊòØ‰∏ÄÊ†∑ÁöÑÔºÅJVMÂú®‰∏Ä‰∏™Á±ªË¢´Âä†ËΩΩËøõÊñπÊ≥ïÂå∫ÁöÑÊó∂ÂÄôÂ∞±Áü•ÈÅìËØ•Á±ªÁîü‰∫ßÁöÑÊØè‰∏Ä‰∏™ÂØπË±°ÊâÄÈúÄË¶ÅÁöÑÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇ ‰ªéÂ†Ü‰∏≠ÂàíÂàÜ‰∏ÄÂùóÂØπÂ∫îÂ§ßÂ∞èÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÁªôÊñ∞ÁöÑÂØπË±°Ôºõ ÂàÜÈÖçÂ†Ü‰∏≠ÂÜÖÂ≠òÊúâ‰∏§ÁßçÊñπÂºèÔºö &lt;span id=&quot;inline-purple&quot;&gt; ÊåáÈíàÁ¢∞Êíû &lt;/span&gt; Â¶ÇÊûúJVMÁöÑÂûÉÂúæÊî∂ÈõÜÂô®ÈááÁî®Â§çÂà∂ÁÆóÊ≥ïÊàñÊ†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ïÔºåÈÇ£‰πàÂ†Ü‰∏≠Á©∫Èó≤ÂÜÖÂ≠òÊòØÂÆåÊï¥ÁöÑÂå∫ÂüüÔºåÂπ∂‰∏îÁ©∫Èó≤ÂÜÖÂ≠òÂíåÂ∑≤‰ΩøÁî®ÂÜÖÂ≠ò‰πãÈó¥Áî±‰∏Ä‰∏™ÊåáÈíàÊ†áËÆ∞„ÄÇÈÇ£‰πàÂΩì‰∏∫‰∏Ä‰∏™ÂØπË±°ÂàÜÈÖçÂÜÖÂ≠òÊó∂ÔºåÂè™ÈúÄÁßªÂä®ÊåáÈíàÂç≥ÂèØ„ÄÇÂõ†Ê≠§ÔºåËøôÁßçÂú®ÂÆåÊï¥Á©∫Èó≤Âå∫Âüü‰∏äÈÄöËøáÁßªÂä®ÊåáÈíàÊù•ÂàÜÈÖçÂÜÖÂ≠òÁöÑÊñπÂºèÂ∞±Âè´ÂÅö‚ÄúÊåáÈíàÁ¢∞Êíû‚Äù„ÄÇ &lt;span id=&quot;inline-purple&quot;&gt; Á©∫Èó≤ÂàóË°® &lt;/span&gt; Â¶ÇÊûúJVMÁöÑÂûÉÂúæÊî∂ÈõÜÂô®ÈááÁî®Ê†áËÆ∞-Ê∏ÖÈô§ÁÆóÊ≥ïÔºåÈÇ£‰πàÂ†Ü‰∏≠Á©∫Èó≤Âå∫ÂüüÂíåÂ∑≤‰ΩøÁî®Âå∫Âüü‰∫§ÈîôÔºåÂõ†Ê≠§ÈúÄË¶ÅÁî®‰∏ÄÂº†‚ÄúÁ©∫Èó≤ÂàóË°®‚ÄùÊù•ËÆ∞ÂΩïÂ†Ü‰∏≠Âì™‰∫õÂå∫ÂüüÊòØÁ©∫Èó≤Âå∫ÂüüÔºå‰ªéËÄåÂú®ÂàõÂª∫ÂØπË±°ÁöÑÊó∂ÂÄôÊ†πÊçÆËøôÂº†‚ÄúÁ©∫Èó≤ÂàóË°®‚ÄùÊâæÂà∞Á©∫Èó≤Âå∫ÂüüÔºåÂπ∂ÂàÜÈÖçÂÜÖÂ≠ò„ÄÇ Áªº‰∏äÊâÄËø∞ÔºöJVMÁ©∂Á´üÈááÁî®Âì™ÁßçÂÜÖÂ≠òÂàÜÈÖçÊñπÊ≥ïÔºåÂèñÂÜ≥‰∫éÂÆÉ‰ΩøÁî®‰∫Ü‰ΩïÁßçÂûÉÂúæÊî∂ÈõÜÂô®„ÄÇ ‰∏∫ÂØπË±°‰∏≠ÁöÑÊàêÂëòÂèòÈáèËµã‰∏äÂàùÂßãÂÄº(ÈªòËÆ§ÂàùÂßãÂåñ)Ôºõ ËÆæÁΩÆÂØπË±°Â§¥‰∏≠ÁöÑ‰ø°ÊÅØÔºõ Ë∞ÉÁî®ÂØπË±°ÁöÑÊûÑÈÄ†ÂáΩÊï∞ËøõË°åÂàùÂßãÂåñ Ê≠§Êó∂ÔºåÊï¥‰∏™ÂØπË±°ÁöÑÂàõÂª∫ËøáÁ®ãÂ∞±ÂÆåÊàê‰∫Ü„ÄÇ ÂØπË±°ÁöÑÂÜÖÂ≠òÊ®°Âûã ‰∏Ä‰∏™ÂØπË±°‰ªéÈÄªËæëËßíÂ∫¶ÁúãÔºåÂÆÉÁî±ÊàêÂëòÂèòÈáèÂíåÊàêÂëòÂáΩÊï∞ÊûÑÊàêÔºå‰ªéÁâ©ÁêÜËßíÂ∫¶Êù•ÁúãÔºåÂØπË±°ÊòØÂ≠òÂÇ®Âú®Â†Ü‰∏≠ÁöÑ‰∏Ä‰∏≤‰∫åËøõÂà∂Êï∞ÔºåËøô‰∏≤‰∫åËøõÂà∂Êï∞ÁöÑÁªÑÁªáÁªìÊûÑÂ¶Ç‰∏ã„ÄÇ ÂØπË±°Âú®ÂÜÖÂ≠ò‰∏≠ÂàÜ‰∏∫‰∏â‰∏™ÈÉ®ÂàÜÔºö ÂØπË±°Â§¥ ÂÆû‰æãÊï∞ÊçÆ ÂØπÈΩêË°•ÂÖÖ ÂØπË±°Â§¥ ÂåÖÂê´‰∏§ÈÉ®ÂàÜÔºåÁ¨¨‰∏ÄÈÉ®ÂàÜÁî®‰∫éÂ≠òÂÇ®ÂØπË±°Ëá™Ë∫´ÁöÑËøêË°åÊó∂Êï∞ÊçÆÔºåÂ¶ÇÂìàÂ∏åÁ†Å„ÄÅGC ÂàÜ‰ª£Âπ¥ÈæÑ„ÄÅÈîÅÁä∂ÊÄÅÊ†áÂøó„ÄÅÁ∫øÁ®ãÊåÅÊúâÁöÑÈîÅ„ÄÅÂÅèÂêëÁ∫øÁ®ã ID„ÄÅÂÅèÂêëÊó∂Èó¥Êà≥Á≠âÔºå32 ‰ΩçËôöÊãüÊú∫Âç† 32 bitÔºå64 ‰ΩçËôöÊãüÊú∫Âç† 64 bit„ÄÇÂÆòÊñπÁß∞‰∏∫ ‚ÄòMark Word‚Äô„ÄÇ Á¨¨‰∫åÈÉ®ÂàÜÊòØÁ±ªÂûãÊåáÈíàÔºåÂç≥ÂØπË±°ÊåáÂêëÂÆÉÁöÑÁ±ªÁöÑÂÖÉÊï∞ÊçÆÊåáÈíàÔºåËôöÊãüÊú∫ÈÄöËøáËøô‰∏™ÊåáÈíàÁ°ÆÂÆöËøô‰∏™ÂØπË±°ÊòØÂì™‰∏™Á±ªÁöÑÂÆû‰æã„ÄÇ Âè¶Â§ñÔºåÂ¶ÇÊûúÊòØ Java Êï∞ÁªÑÔºåÂØπË±°Â§¥‰∏≠ËøòÂøÖÈ°ªÊúâ‰∏ÄÂùóÁî®‰∫éËÆ∞ÂΩïÊï∞ÁªÑÈïøÂ∫¶ÁöÑÊï∞ÊçÆÔºåÂõ†‰∏∫ÊôÆÈÄöÂØπË±°ÂèØ‰ª•ÈÄöËøá Java ÂØπË±°ÂÖÉÊï∞ÊçÆÁ°ÆÂÆöÂ§ßÂ∞èÔºåËÄåÊï∞ÁªÑÂØπË±°‰∏çÂèØ‰ª•„ÄÇ ÂÆû‰æãÊï∞ÊçÆ ÂÆû‰æãÊï∞ÊçÆÈÉ®ÂàÜÂ∞±ÊòØÊàêÂëòÂèòÈáèÁöÑÂÄºÔºåÂÖ∂‰∏≠ÂåÖÂê´Áà∂Á±ªÁöÑÊàêÂëòÂèòÈáèÂíåÊú¨Á±ªÁöÑÊàêÂëòÂèòÈáè„ÄÇ ÂØπÈΩêË°•ÂÖÖ Áî®‰∫éÁ°Æ‰øùÂØπË±°ÁöÑÊÄªÈïøÂ∫¶‰∏∫8Â≠óËäÇÁöÑÊï¥Êï∞ÂÄç„ÄÇ HotSpotË¶ÅÊ±ÇÂØπË±°ÁöÑÊÄªÈïøÂ∫¶ÂøÖÈ°ªÊòØ8Â≠óËäÇÁöÑÊï¥Êï∞ÂÄç„ÄÇÁî±‰∫éÂØπË±°Â§¥‰∏ÄÂÆöÊòØ8Â≠óËäÇÁöÑÊï¥Êï∞ÂÄçÔºå‰ΩÜÂÆû‰æãÊï∞ÊçÆÈÉ®ÂàÜÁöÑÈïøÂ∫¶ÊòØ‰ªªÊÑèÁöÑÔºåÂõ†Ê≠§ÈúÄË¶ÅÂØπÈΩêË°•ÂÖÖÂ≠óÊÆµÁ°Æ‰øùÊï¥‰∏™ÂØπË±°ÁöÑÊÄªÈïøÂ∫¶‰∏∫8ÁöÑÊï¥Êï∞ÂÄç„ÄÇ ËÆøÈóÆÂØπË±°ÁöÑËøáÁ®ã Êàë‰ª¨Áü•ÈÅìÔºåÂºïÁî®Á±ªÂûãÁöÑÂèòÈáè‰∏≠Â≠òÊîæÁöÑÊòØ‰∏Ä‰∏™Âú∞ÂùÄÔºåÈÇ£‰πàÊ†πÊçÆÂú∞ÂùÄÁ±ªÂûãÁöÑ‰∏çÂêåÔºåÂØπË±°Êúâ‰∏çÂêåÁöÑËÆøÈóÆÊñπÂºèÔºö Âè•ÊüÑËÆøÈóÆÊñπÂºè Â†Ü‰∏≠ÈúÄË¶ÅÊúâ‰∏ÄÂùóÂè´ÂÅö‚ÄúÂè•ÊüÑÊ±†‚ÄùÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÁî®‰∫éÂ≠òÊîæÊâÄÊúâÂØπË±°ÁöÑÂú∞ÂùÄÂíåÊâÄÊúâÂØπË±°ÊâÄÂ±ûÁ±ªÁöÑÁ±ª‰ø°ÊÅØ„ÄÇ ÂºïÁî®Á±ªÂûãÁöÑÂèòÈáèÂ≠òÊîæÁöÑÊòØËØ•ÂØπË±°Âú®Âè•ÊüÑÊ±†‰∏≠ÁöÑÂú∞ÂùÄ„ÄÇËÆøÈóÆÂØπË±°Êó∂ÔºåÈ¶ñÂÖàÈúÄË¶ÅÈÄöËøáÂºïÁî®Á±ªÂûãÁöÑÂèòÈáèÊâæÂà∞ËØ•ÂØπË±°ÁöÑÂè•ÊüÑÔºåÁÑ∂ÂêéÊ†πÊçÆÂè•ÊüÑ‰∏≠ÂØπË±°ÁöÑÂú∞ÂùÄÂÜçËÆøÈóÆÂØπË±°„ÄÇ ËøôÁßçÊ®°ÂºèÁöÑÂáÜÁ°ÆÂ∫¶ÂæàÈ´òÔºå‰ΩÜËøáÁ®ãËæÉ‰∏∫ÁπÅÁêêÔºåËÄåjava‰∏≠ÊòØÊ≤°ÊúâÂè•ÊüÑÁöÑÔºåÊâÄ‰ª•Ôºåjava‰∏≠Áõ¥Êé•Âà©Áî®ÁöÑÂØπË±°‰øùÂ≠òÊ®°ÂºèÔºå‰πüÂ∞±ÊòØËØ¥Â†ÜÂÜÖÂ≠ò‰∏≠Ôºå‰∏çÈúÄË¶Å‰øùÂ≠òÂè•ÊüÑÔºåËÄåÁõ¥Êé•‰øùÂ≠òÂÖ∑‰ΩìÁöÑÂØπË±°„ÄÇÂ∞±Áõ∏ÂΩì‰∫éÁúÅÁï•‰∫ÜÂè•ÊüÑÂà∞ÂØπË±°‰πãÈó¥ÁöÑÊü•Êâæ„ÄÇËÄåÂêéËøô‰∏™ÂØπË±°ÂèØ‰ª•Áõ¥Êé•ËøõË°åJavaÊñπÊ≥ïÂå∫ÁöÑË∞ÉÁî®„ÄÇ Áõ¥Êé•ÊåáÈíàËÆøÈóÆÊñπÂºè ÂºïÁî®Á±ªÂûãÁöÑÂèòÈáèÁõ¥Êé•Â≠òÊîæÂØπË±°ÁöÑÂú∞ÂùÄÔºå‰ªéËÄå‰∏çÈúÄË¶ÅÂè•ÊüÑÊ±†ÔºåÈÄöËøáÂºïÁî®ËÉΩÂ§üÁõ¥Êé•ËÆøÈóÆÂØπË±°„ÄÇ ‰ΩÜÂØπË±°ÊâÄÂú®ÁöÑÂÜÖÂ≠òÁ©∫Èó¥‰∏≠ÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÁ≠ñÁï•Â≠òÂÇ®ÂØπË±°ÊâÄÂ±ûÁöÑÁ±ª‰ø°ÊÅØÁöÑÂú∞ÂùÄ„ÄÇ ÊØîËæÉ HotSpotÈááÁî®Áõ¥Êé•ÊåáÈíàÊñπÂºèËÆøÈóÆÂØπË±°ÔºåÂõ†‰∏∫ÂÆÉÂè™ÈúÄ‰∏ÄÊ¨°ÂØªÂùÄÊìç‰ΩúÔºå‰ªéËÄåÊÄßËÉΩÊØîÂè•ÊüÑËÆøÈóÆÊñπÂºèÂø´‰∏ÄÂÄç„ÄÇ‰ΩÜÂÆÉÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÁ≠ñÁï•Â≠òÂÇ®ÂØπË±°Âú®ÊñπÊ≥ïÂå∫‰∏≠Á±ª‰ø°ÊÅØÁöÑÂú∞ÂùÄ„ÄÇ ÂûÉÂúæÊî∂ÈõÜÁ≠ñÁï• Á®ãÂ∫èËÆ°Êï∞Âô®„ÄÅJavaËôöÊãüÊú∫Ê†à„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊ†àÈÉΩÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑÔºå‰πüÂ∞±ÊòØÊØèÊù°Á∫øÁ®ãÈÉΩÊã•ÊúâËøô‰∏âÂùóÂå∫ÂüüÔºåËÄå‰∏î‰ºöÈöèÁùÄÁ∫øÁ®ãÁöÑÂàõÂª∫ËÄåÂàõÂª∫ÔºåÁ∫øÁ®ãÁöÑÁªìÊùüËÄåÈîÄÊØÅ„ÄÇÈÇ£‰πàÔºåÂûÉÂúæÊî∂ÈõÜÂô®Âú®‰ΩïÊó∂Ê∏ÖÊâ´Ëøô‰∏âÂùóÂå∫ÂüüÁöÑÈóÆÈ¢òÂ∞±Ëß£ÂÜ≥‰∫Ü„ÄÇ Ê≠§Â§ñÔºåJavaËôöÊãüÊú∫Ê†à„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊ†à‰∏≠ÁöÑÊ†àÂ∏ß‰ºöÈöèÁùÄÊñπÊ≥ïÁöÑÂºÄÂßãËÄåÂÖ•Ê†àÔºåÊñπÊ≥ïÁöÑÁªìÊùüËÄåÂá∫Ê†àÔºåÂπ∂‰∏îÊØè‰∏™Ê†àÂ∏ß‰∏≠ÁöÑÊú¨Âú∞ÂèòÈáèË°®ÈÉΩÊòØÂú®Á±ªË¢´Âä†ËΩΩÁöÑÊó∂ÂÄôÂ∞±Á°ÆÂÆöÁöÑ„ÄÇÂõ†Ê≠§‰ª•‰∏ä‰∏â‰∏™Âå∫ÂüüÁöÑÂûÉÂúæÊî∂ÈõÜÂ∑•‰ΩúÂÖ∑ÊúâÁ°ÆÂÆöÊÄßÔºåÂûÉÂúæÊî∂ÈõÜÂô®ËÉΩÂ§üÊ∏ÖÊ•öÂú∞Áü•ÈÅì‰ΩïÊó∂Ê∏ÖÊâ´Ëøô‰∏âÂùóÂå∫Âüü‰∏≠ÁöÑÂì™‰∫õÊï∞ÊçÆ„ÄÇ ÁÑ∂ËÄåÔºåÂ†ÜÂíåÊñπÊ≥ïÂå∫‰∏≠ÁöÑÂÜÖÂ≠òÊ∏ÖÁêÜÂ∑•‰ΩúÂ∞±Ê≤°ÈÇ£‰πàÂÆπÊòì‰∫Ü„ÄÇ Â†ÜÂíåÊñπÊ≥ïÂå∫ÊâÄÊúâÁ∫øÁ®ãÂÖ±‰∫´ÔºåÂπ∂‰∏îÈÉΩÂú®JVMÂêØÂä®Êó∂ÂàõÂª∫Ôºå‰∏ÄÁõ¥ÂæóËøêË°åÂà∞JVMÂÅúÊ≠¢Êó∂„ÄÇÂõ†Ê≠§ÂÆÉ‰ª¨Ê≤°ÂäûÊ≥ïÊ†πÊçÆÁ∫øÁ®ãÁöÑÂàõÂª∫ËÄåÂàõÂª∫„ÄÅÁ∫øÁ®ãÁöÑÁªìÊùüËÄåÈáäÊîæ„ÄÇ Â†Ü‰∏≠Â≠òÊîæJVMËøêË°åÊúüÈó¥ÁöÑÊâÄÊúâÂØπË±°ÔºåËôΩÁÑ∂ÊØè‰∏™ÂØπË±°ÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÂú®Âä†ËΩΩËØ•ÂØπË±°ÊâÄÂ±ûÁ±ªÁöÑÊó∂ÂÄôÂ∞±Á°ÆÂÆö‰∫ÜÔºå‰ΩÜÁ©∂Á´üÂàõÂª∫Â§öÂ∞ë‰∏™ÂØπË±°Âè™ÊúâÂú®Á®ãÂ∫èËøêË°åÊúüÈó¥ÊâçËÉΩÁ°ÆÂÆö„ÄÇ ÊñπÊ≥ïÂå∫‰∏≠Â≠òÊîæÁ±ª‰ø°ÊÅØ„ÄÅÈùôÊÄÅÊàêÂëòÂèòÈáè„ÄÅÂ∏∏Èáè„ÄÇÁ±ªÁöÑÂä†ËΩΩÊòØÂú®Á®ãÂ∫èËøêË°åËøáÁ®ã‰∏≠ÔºåÂΩìÈúÄË¶ÅÂàõÂª∫Ëøô‰∏™Á±ªÁöÑÂØπË±°Êó∂Êâç‰ºöÂä†ËΩΩËøô‰∏™Á±ª„ÄÇÂõ†Ê≠§ÔºåJVMÁ©∂Á´üË¶ÅÂä†ËΩΩÂ§öÂ∞ë‰∏™Á±ª‰πüÈúÄË¶ÅÂú®Á®ãÂ∫èËøêË°åÊúüÈó¥Á°ÆÂÆö„ÄÇ Âõ†Ê≠§ÔºåÂ†ÜÂíåÊñπÊ≥ïÂå∫ÁöÑÂÜÖÂ≠òÂõûÊî∂ÂÖ∑Êúâ‰∏çÁ°ÆÂÆöÊÄßÔºåÂõ†Ê≠§ÂûÉÂúæÊî∂ÈõÜÂô®Âú®ÂõûÊî∂Â†ÜÂíåÊñπÊ≥ïÂå∫ÂÜÖÂ≠òÁöÑÊó∂ÂÄôËä±‰∫Ü‰∏Ä‰∫õÂøÉÊÄù„ÄÇ Â†ÜÂÜÖÂ≠òÁöÑÂõûÊî∂ Â¶Ç‰ΩïÂà§ÂÆöÂì™‰∫õÂØπË±°ÈúÄË¶ÅÂõûÊî∂ Âú®ÂØπÂ†ÜËøõË°åÂØπË±°ÂõûÊî∂‰πãÂâçÔºåÈ¶ñÂÖàË¶ÅÂà§Êñ≠Âì™‰∫õÊòØÊó†ÊïàÂØπË±°„ÄÇÊàë‰ª¨Áü•ÈÅìÔºå‰∏Ä‰∏™ÂØπË±°‰∏çË¢´‰ªª‰ΩïÂØπË±°ÊàñÂèòÈáèÂºïÁî®ÔºåÈÇ£‰πàÂ∞±ÊòØÊó†ÊïàÂØπË±°ÔºåÈúÄË¶ÅË¢´ÂõûÊî∂„ÄÇ‰∏ÄËà¨Êúâ‰∏§ÁßçÂà§Âà´ÊñπÂºèÔºö ÂºïÁî®ËÆ°Êï∞Ê≥ï ÊØè‰∏™ÂØπË±°ÈÉΩÊúâ‰∏Ä‰∏™ËÆ°Êï∞Âô®ÔºåÂΩìËøô‰∏™ÂØπË±°Ë¢´‰∏Ä‰∏™ÂèòÈáèÊàñÂè¶‰∏Ä‰∏™ÂØπË±°ÂºïÁî®‰∏ÄÊ¨°ÔºåËØ•ËÆ°Êï∞Âô®Âä†‰∏ÄÔºõËã•ËØ•ÂºïÁî®Â§±ÊïàÂàôËÆ°Êï∞Âô®Âáè‰∏Ä„ÄÇÂΩìËÆ°Êï∞Âô®‰∏∫0Êó∂ÔºåÂ∞±ËÆ§‰∏∫ËØ•ÂØπË±°ÊòØÊó†ÊïàÂØπË±°„ÄÇ ÂºïÁî®ËÆ°Êï∞Ê≥ïËôΩÁÑ∂ÁÆÄÂçïÔºå‰ΩÜÂ≠òÂú®‰∏Ä‰∏™‰∏•ÈáçÁöÑÈóÆÈ¢òÔºåÂÆÉÊó†Ê≥ïËß£ÂÜ≥Âæ™ÁéØÂºïÁî®ÁöÑÈóÆÈ¢ò„ÄÇÔºàÊØîÂ¶ÇÂØπË±°AÂºïÁî®ÂØπË±°BÔºåÂêåÊó∂ÔºåÂØπË±°B‰πüÂºïÁî®ÂØπË±°AÔºåÈÄ†ÊàêÂæ™ÁéØÂºïÁî®Ôºâ ÂèØËææÊÄßÂàÜÊûêÊ≥ï ÊâÄÊúâÂíåGC RootsÁõ¥Êé•ÊàñÈó¥Êé•ÂÖ≥ËÅîÁöÑÂØπË±°ÈÉΩÊòØÊúâÊïàÂØπË±°ÔºåÂíåGC RootsÊ≤°ÊúâÂÖ≥ËÅîÁöÑÂØπË±°Â∞±ÊòØÊó†ÊïàÂØπË±°„ÄÇ GC RootsÊòØÊåáÔºö JavaËôöÊãüÊú∫Ê†àÊâÄÂºïÁî®ÁöÑÂØπË±°(Ê†àÂ∏ß‰∏≠Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠ÂºïÁî®Á±ªÂûãÁöÑÂèòÈáèÊâÄÂºïÁî®ÁöÑÂØπË±°) ÊñπÊ≥ïÂå∫‰∏≠ÈùôÊÄÅÂ±ûÊÄßÂºïÁî®ÁöÑÂØπË±° ÊñπÊ≥ïÂå∫‰∏≠Â∏∏ÈáèÊâÄÂºïÁî®ÁöÑÂØπË±° Êú¨Âú∞ÊñπÊ≥ïÊ†àÊâÄÂºïÁî®ÁöÑÂØπË±° &lt;font color=&quot;red&quot;&gt; Ê≥®ÊÑèÔºöGC RootsÂπ∂‰∏çÂåÖÊã¨Â†Ü‰∏≠ÂØπË±°ÊâÄÂºïÁî®ÁöÑÂØπË±°ÔºÅËøôÊ†∑Â∞±‰∏ç‰ºöÂá∫Áé∞Âæ™ÁéØÂºïÁî®„ÄÇ &lt;/font&gt; ÂõûÊî∂Êó†ÊïàÂØπË±°ÁöÑËøáÁ®ã ÂΩìJVMÁ≠õÈÄâÂá∫Â§±ÊïàÁöÑÂØπË±°‰πãÂêéÔºåÂπ∂‰∏çÊòØÁ´ãÂç≥Ê∏ÖÈô§ÔºåËÄåÊòØÂÜçÁªôÂØπË±°‰∏ÄÊ¨°ÈáçÁîüÁöÑÊú∫‰ºöÔºåÂÖ∑‰ΩìËøáÁ®ãÂ¶Ç‰∏ãÔºö Âà§Êñ≠ËØ•ÂØπË±°ÊòØÂê¶Ë¶ÜÁõñ‰∫Üfinalize()ÊñπÊ≥ï Ëã•Â∑≤Ë¶ÜÁõñËØ•ÊñπÊ≥ïÔºåÂπ∂ËØ•ÂØπË±°ÁöÑfinalize()ÊñπÊ≥ïËøòÊ≤°ÊúâË¢´ÊâßË°åËøáÔºåÈÇ£‰πàÂ∞±‰ºöÂ∞Üfinalize()ÊâîÂà∞F-QueueÈòüÂàó‰∏≠Ôºõ Ëã•Êú™Ë¶ÜÁõñËØ•ÊñπÊ≥ïÔºåÂàôÁõ¥Êé•ÈáäÊîæÂØπË±°ÂÜÖÂ≠ò„ÄÇ ÊâßË°åF-QueueÈòüÂàó‰∏≠ÁöÑfinalize()ÊñπÊ≥ï ËôöÊãüÊú∫‰ºö‰ª•ËæÉ‰ΩéÁöÑ‰ºòÂÖàÁ∫ßÊâßË°åËøô‰∫õfinalize()ÊñπÊ≥ï‰ª¨Ôºå‰πü‰∏ç‰ºöÁ°Æ‰øùÊâÄÊúâÁöÑfinalize()ÊñπÊ≥ïÈÉΩ‰ºöÊâßË°åÁªìÊùü„ÄÇÂ¶ÇÊûúfinalize()ÊñπÊ≥ï‰∏≠Âá∫Áé∞ËÄóÊó∂Êìç‰ΩúÔºåËôöÊãüÊú∫Â∞±Áõ¥Êé•ÂÅúÊ≠¢ÊâßË°åÔºåÂ∞ÜËØ•ÂØπË±°Ê∏ÖÈô§„ÄÇ ÂØπË±°ÈáçÁîüÊàñÊ≠ª‰∫° Â¶ÇÊûúÂú®ÊâßË°åfinalize()ÊñπÊ≥ïÊó∂ÔºåÂ∞ÜthisËµãÁªô‰∫ÜÊüê‰∏Ä‰∏™ÂºïÁî®ÔºåÈÇ£‰πàËØ•ÂØπË±°Â∞±ÈáçÁîü‰∫Ü„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÔºåÈÇ£‰πàÂ∞±‰ºöË¢´ÂûÉÂúæÊî∂ÈõÜÂô®Ê∏ÖÈô§„ÄÇ &lt;font color=&quot;red&quot;&gt; Ê≥®ÊÑèÔºö Âº∫ÁÉà‰∏çÂª∫ËÆÆ‰ΩøÁî®finalize()ÂáΩÊï∞ËøõË°å‰ªª‰ΩïÊìç‰ΩúÔºÅÂ¶ÇÊûúÈúÄË¶ÅÈáäÊîæËµÑÊ∫êÔºåËØ∑‰ΩøÁî®try-finally„ÄÇ Âõ†‰∏∫finalize()‰∏çÁ°ÆÂÆöÊÄßÂ§ßÔºåÂºÄÈîÄÂ§ßÔºåÊó†Ê≥ï‰øùËØÅÈ°∫Âà©ÊâßË°å„ÄÇ &lt;/font&gt; ÊñπÊ≥ïÂå∫ÁöÑÂÜÖÂ≠òÂõûÊî∂ Â¶ÇÊûú‰ΩøÁî®Â§çÂà∂ÁÆóÊ≥ïÂÆûÁé∞Â†ÜÁöÑÂÜÖÂ≠òÂõûÊî∂ÔºåÂ†ÜÂ∞±‰ºöË¢´ÂàÜ‰∏∫Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÔºåÊñ∞Áîü‰ª£‰∏≠ÁöÑÂØπË±°‚ÄúÊúùÁîüÂ§ïÊ≠ª‚ÄùÔºåÊØèÊ¨°ÂûÉÂúæÂõûÊî∂ÈÉΩ‰ºöÊ∏ÖÈô§ÊéâÂ§ßÈáèÁöÑÂØπË±°ÔºõËÄåËÄÅÂπ¥‰ª£‰∏≠ÁöÑÂØπË±°ÁîüÂëΩËæÉÈïøÔºåÊØèÊ¨°ÂûÉÂúæÂõûÊî∂Âè™ÊúâÂ∞ëÈáèÁöÑÂØπË±°Ë¢´Ê∏ÖÈô§Êéâ„ÄÇ Áî±‰∫éÊñπÊ≥ïÂå∫‰∏≠Â≠òÊîæÁîüÂëΩÂë®ÊúüËæÉÈïøÁöÑÁ±ª‰ø°ÊÅØ„ÄÅÂ∏∏Èáè„ÄÅÈùôÊÄÅÂèòÈáèÔºåÂõ†Ê≠§ÊñπÊ≥ïÂå∫Â∞±ÂÉèÊòØÂ†ÜÁöÑËÄÅÂπ¥‰ª£ÔºåÊØèÊ¨°ÂûÉÂúæÊî∂ÈõÜÁöÑÂè™ÊúâÂ∞ëÈáèÁöÑÂûÉÂúæË¢´Ê∏ÖÈô§Êéâ„ÄÇ ÊñπÊ≥ïÂå∫‰∏≠‰∏ªË¶ÅÊ∏ÖÈô§‰∏§ÁßçÂûÉÂúæÔºö Â∫üÂºÉÂ∏∏Èáè Â∫üÂºÉÁöÑÁ±ª Â¶Ç‰ΩïÊ∏ÖÈô§Â∫üÂºÉÂ∏∏Èáè Ê∏ÖÈô§Â∫üÂºÉÁöÑÂ∏∏ÈáèÂíåÊ∏ÖÈô§ÂØπË±°Á±ª‰ººÔºåÂè™Ë¶ÅÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÂ∏∏Èáè‰∏çË¢´‰ªª‰ΩïÂèòÈáèÊàñÂØπË±°ÂºïÁî®ÔºåÈÇ£‰πàËøô‰∫õÂ∏∏ÈáèÂ∞±‰ºöË¢´Ê∏ÖÈô§Êéâ„ÄÇ Â¶Ç‰ΩïÊ∏ÖÈô§Â∫üÂºÉÁöÑÁ±ª Ê∏ÖÈô§Â∫üÂºÉÁ±ªÁöÑÊù°‰ª∂ËæÉ‰∏∫ËãõÂàªÔºö ËØ•Á±ªÁöÑÊâÄÊúâÂØπË±°ÈÉΩÂ∑≤Ë¢´Ê∏ÖÈô§ ËØ•Á±ªÁöÑjava.lang.ClassÂØπË±°Ê≤°ÊúâË¢´‰ªª‰ΩïÂØπË±°ÊàñÂèòÈáèÂºïÁî® Âè™Ë¶Å‰∏Ä‰∏™Á±ªË¢´ËôöÊãüÊú∫Âä†ËΩΩËøõÊñπÊ≥ïÂå∫ÔºåÈÇ£‰πàÂú®Â†Ü‰∏≠Â∞±‰ºöÊúâ‰∏Ä‰∏™‰ª£Ë°®ËØ•Á±ªÁöÑÂØπË±°Ôºöjava.lang.Class„ÄÇËøô‰∏™ÂØπË±°Âú®Á±ªË¢´Âä†ËΩΩËøõÊñπÊ≥ïÂå∫ÁöÑÊó∂ÂÄôÂàõÂª∫ÔºåÂú®ÊñπÊ≥ïÂå∫‰∏≠ËØ•Á±ªË¢´Âà†Èô§Êó∂Ê∏ÖÈô§„ÄÇ Âä†ËΩΩËØ•Á±ªÁöÑClassLoaderÂ∑≤ÁªèË¢´ÂõûÊî∂ ÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ï Ê†áËÆ∞-Ê∏ÖÈô§ÁÆóÊ≥ï È¶ñÂÖàÂà©Áî®ÂàöÊâç‰ªãÁªçÁöÑÊñπÊ≥ïÂà§Êñ≠ÈúÄË¶ÅÊ∏ÖÈô§Âì™‰∫õÊï∞ÊçÆÔºåÂπ∂ÁªôÂÆÉ‰ª¨ÂÅö‰∏äÊ†áËÆ∞ÔºõÁÑ∂ÂêéÊ∏ÖÈô§Ë¢´Ê†áËÆ∞ÁöÑÊï∞ÊçÆ„ÄÇ ËøôÁßçÁÆóÊ≥ïÊ†áËÆ∞ÂíåÊ∏ÖÈô§ËøáÁ®ãÊïàÁéáÈÉΩÂæà‰ΩéÔºåËÄå‰∏îÊ∏ÖÈô§ÂÆåÂêéÂ≠òÂú®Â§ßÈáèÁ¢éÁâáÁ©∫Èó¥ÔºåÂØºËá¥Êó†Ê≥ïÂ≠òÂÇ®Â§ßÂØπË±°ÔºåÈôç‰Ωé‰∫ÜÁ©∫Èó¥Âà©Áî®Áéá„ÄÇ Â§çÂà∂ÁÆóÊ≥ï Â∞ÜÂÜÖÂ≠òÂàÜÊàê‰∏§‰ªΩÔºåÂè™Â∞ÜÊï∞ÊçÆÂ≠òÂÇ®Âú®ÂÖ∂‰∏≠‰∏ÄÂùó‰∏ä„ÄÇÂΩìÈúÄË¶ÅÂõûÊî∂ÂûÉÂúæÊó∂Ôºå‰πüÊòØÈ¶ñÂÖàÊ†áËÆ∞Âá∫Â∫üÂºÉÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéÂ∞ÜÊúâÁî®ÁöÑÊï∞ÊçÆÂ§çÂà∂Âà∞Âè¶‰∏ÄÂùóÂÜÖÂ≠ò‰∏äÔºåÊúÄÂêéÂ∞ÜÁ¨¨‰∏ÄÂùóÂÜÖÂ≠òÂÖ®ÈÉ®Ê∏ÖÈô§„ÄÇ &lt;span id=&quot;inline-blue&quot;&gt; ÂàÜÊûêÔºö&lt;/span&gt; ËøôÁßçÁÆóÊ≥ïÈÅøÂÖç‰∫ÜÁ¢éÁâáÁ©∫Èó¥Ôºå‰ΩÜÂÜÖÂ≠òË¢´Áº©Â∞è‰∫Ü‰∏ÄÂçä„ÄÇËÄå‰∏îÊØèÊ¨°ÈÉΩÈúÄË¶ÅÂ∞ÜÊúâÁî®ÁöÑÊï∞ÊçÆÂÖ®ÈÉ®Â§çÂà∂Âà∞Âè¶‰∏ÄÁâáÂÜÖÂ≠ò‰∏äÂéªÔºåÊïàÁéá‰∏çÈ´ò„ÄÇ &lt;span id=&quot;inline-purple&quot;&gt; Ëß£ÂÜ≥Á©∫Èó¥Âà©Áî®ÁéáÈóÆÈ¢òÔºö&lt;/span&gt; Âú®Êñ∞Áîü‰ª£‰∏≠ÔºåÁî±‰∫éÂ§ßÈáèÁöÑÂØπË±°ÈÉΩÊòØ‚ÄúÊúùÁîüÂ§ïÊ≠ª‚ÄùÔºå‰πüÂ∞±ÊòØ‰∏ÄÊ¨°ÂûÉÂúæÊî∂ÈõÜÂêéÂè™ÊúâÂ∞ëÈáèÂØπË±°Â≠òÊ¥ªÔºåÂõ†Ê≠§ÂèØ‰ª•Â∞ÜÂÜÖÂ≠òÂàíÂàÜÊàê‰∏âÂùóÔºöEden„ÄÅSurvior1„ÄÅSurvior2ÔºåÂÜÖÂ≠òÂ§ßÂ∞èÂàÜÂà´ÊòØ8:1:1„ÄÇÂàÜÈÖçÂÜÖÂ≠òÊó∂ÔºåÂè™‰ΩøÁî®EdenÂíå‰∏ÄÂùóSurvior1„ÄÇÂΩìÂèëÁé∞Eden+Survior1ÁöÑÂÜÖÂ≠òÂç≥Â∞ÜÊª°Êó∂ÔºåJVM‰ºöÂèëËµ∑‰∏ÄÊ¨°MinorGCÔºåÊ∏ÖÈô§ÊéâÂ∫üÂºÉÁöÑÂØπË±°ÔºåÂπ∂Â∞ÜÊâÄÊúâÂ≠òÊ¥ª‰∏ãÊù•ÁöÑÂØπË±°Â§çÂà∂Âà∞Âè¶‰∏ÄÂùóSurvior2‰∏≠„ÄÇÈÇ£‰πàÔºåÊé•‰∏ãÊù•Â∞±‰ΩøÁî®Survior2+EdenËøõË°åÂÜÖÂ≠òÂàÜÈÖç„ÄÇ ÈÄöËøáËøôÁßçÊñπÂºèÔºåÂè™ÈúÄË¶ÅÊµ™Ë¥π10%ÁöÑÂÜÖÂ≠òÁ©∫Èó¥Âç≥ÂèØÂÆûÁé∞Â∏¶ÊúâÂéãÁº©ÂäüËÉΩÁöÑÂûÉÂúæÊî∂ÈõÜÊñπÊ≥ïÔºåÈÅøÂÖç‰∫ÜÂÜÖÂ≠òÁ¢éÁâáÁöÑÈóÆÈ¢ò„ÄÇ ‰ΩÜÊòØÔºåÂΩì‰∏Ä‰∏™ÂØπË±°Ë¶ÅÁî≥ËØ∑ÂÜÖÂ≠òÁ©∫Èó¥Êó∂ÔºåÂèëÁé∞Eden+Survior‰∏≠Ââ©‰∏ãÁöÑÁ©∫Èó¥Êó†Ê≥ïÊîæÁΩÆËØ•ÂØπË±°ÔºåÊ≠§Êó∂ÈúÄË¶ÅËøõË°åMinor GCÔºåÂ¶ÇÊûúMinorGCËøáÂêéÁ©∫Èó≤Âá∫Êù•ÁöÑÂÜÖÂ≠òÁ©∫Èó¥‰ªçÁÑ∂Êó†Ê≥ïÊîæÁΩÆËØ•ÂØπË±°ÔºåÈÇ£‰πàÊ≠§Êó∂Â∞±ÈúÄË¶ÅÂ∞ÜÂØπË±°ËΩ¨ÁßªÂà∞ËÄÅÂπ¥‰ª£‰∏≠ÔºåËøôÁßçÊñπÂºèÂè´ÂÅö‚ÄúÂàÜÈÖçÊãÖ‰øù‚Äù„ÄÇ &lt;span id=&quot;inline-green&quot;&gt; ‚ÄúÂàÜÈÖçÊãÖ‰øù‚ÄùÁ≠ñÁï•ËØ¶Ëß£ &lt;/span&gt; ÂΩìÂûÉÂúæÊî∂ÈõÜÂô®ÂáÜÂ§áË¶ÅÂú®Êñ∞Áîü‰ª£ÂèëËµ∑‰∏ÄÊ¨°MinorGCÊó∂ÔºåÈ¶ñÂÖà‰ºöÊ£ÄÊü•‚ÄúËÄÅÂπ¥‰ª£‰∏≠ÊúÄÂ§ßÁöÑËøûÁª≠Á©∫Èó≤Âå∫ÂüüÁöÑÂ§ßÂ∞è ÊòØÂê¶Â§ß‰∫é Êñ∞Áîü‰ª£‰∏≠ÊâÄÊúâÂØπË±°ÁöÑÂ§ßÂ∞èÔºü‚ÄùÔºå‰πüÂ∞±ÊòØËÄÅÂπ¥‰ª£‰∏≠ÁõÆÂâçËÉΩÂ§üÂ∞ÜÊñ∞Áîü‰ª£‰∏≠ÊâÄÊúâÂØπË±°ÂÖ®ÈÉ®Ë£Ö‰∏ãÔºü Ëã•ËÄÅÂπ¥‰ª£ËÉΩÂ§üË£Ö‰∏ãÊñ∞Áîü‰ª£‰∏≠ÊâÄÊúâÁöÑÂØπË±°ÔºåÈÇ£‰πàÊ≠§Êó∂ËøõË°åMinorGCÊ≤°Êúâ‰ªª‰ΩïÈ£éÈô©ÔºåÁÑ∂ÂêéÂ∞±ËøõË°åMinorGC„ÄÇ Ëã•ËÄÅÂπ¥‰ª£Êó†Ê≥ïË£Ö‰∏ãÊñ∞Áîü‰ª£‰∏≠ÊâÄÊúâÁöÑÂØπË±°ÔºåÈÇ£‰πàÊ≠§Êó∂ËøõË°åMinorGCÊòØÊúâÈ£éÈô©ÁöÑÔºåÂûÉÂúæÊî∂ÈõÜÂô®‰ºöËøõË°å‰∏ÄÊ¨°È¢ÑÊµãÔºöÊ†πÊçÆ‰ª•ÂæÄMinorGCËøáÂêéÂ≠òÊ¥ªÂØπË±°ÁöÑÂπ≥ÂùáÊï∞Êù•È¢ÑÊµãËøôÊ¨°MinorGCÂêéÂ≠òÊ¥ªÂØπË±°ÁöÑÂπ≥ÂùáÊï∞„ÄÇ Â¶ÇÊûú‰ª•ÂæÄÂ≠òÊ¥ªÂØπË±°ÁöÑÂπ≥ÂùáÊï∞Â∞è‰∫éÂΩìÂâçËÄÅÂπ¥‰ª£ÊúÄÂ§ßÁöÑËøûÁª≠Á©∫Èó≤Á©∫Èó¥ÔºåÈÇ£‰πàÂ∞±ËøõË°åMinorGCÔºåËôΩÁÑ∂Ê≠§Ê¨°MinorGCÊòØÊúâÈ£éÈô©ÁöÑ„ÄÇ Â¶ÇÊûú‰ª•ÂæÄÂ≠òÊ¥ªÂØπË±°ÁöÑÂπ≥ÂùáÊï∞Â§ß‰∫éÂΩìÂâçËÄÅÂπ¥‰ª£ÊúÄÂ§ßÁöÑËøûÁª≠Á©∫Èó≤Á©∫Èó¥ÔºåÈÇ£‰πàÂ∞±ÂØπËÄÅÂπ¥‰ª£ËøõË°å‰∏ÄÊ¨°Full GCÔºåÈÄöËøáÊ∏ÖÈô§ËÄÅÂπ¥‰ª£‰∏≠Â∫üÂºÉÊï∞ÊçÆÊù•Êâ©Â§ßËÄÅÂπ¥‰ª£Á©∫Èó≤Á©∫Èó¥Ôºå‰ª•‰æøÁªôÊñ∞Áîü‰ª£‰ΩúÊãÖ‰øù„ÄÇËøô‰∏™ËøáÁ®ãÂ∞±ÊòØÂàÜÈÖçÊãÖ‰øù„ÄÇ Ê†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ï Âú®ÂõûÊî∂ÂûÉÂúæÂâçÔºåÈ¶ñÂÖàÂ∞ÜÊâÄÊúâÂ∫üÂºÉÁöÑÂØπË±°ÂÅö‰∏äÊ†áËÆ∞ÔºåÁÑ∂ÂêéÂ∞ÜÊâÄÊúâÊú™Ë¢´Ê†áËÆ∞ÁöÑÂØπË±°ÁßªÂà∞‰∏ÄËæπÔºåÊúÄÂêéÊ∏ÖÁ©∫Âè¶‰∏ÄËæπÂå∫ÂüüÂç≥ÂèØ„ÄÇ &lt;span id=&quot;inline-blue&quot;&gt; ÂàÜÊûêÔºö&lt;/span&gt; ÂÆÉÊòØ‰∏ÄÁßçËÄÅÂπ¥‰ª£ÁöÑÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ï„ÄÇËÄÅÂπ¥‰ª£‰∏≠ÁöÑÂØπË±°‰∏ÄËà¨ÂØøÂëΩÊØîËæÉÈïøÔºåÂõ†Ê≠§ÊØèÊ¨°ÂûÉÂúæÂõûÊî∂‰ºöÊúâÂ§ßÈáèÂØπË±°Â≠òÊ¥ªÔºåÂõ†Ê≠§Â¶ÇÊûúÈÄâÁî®‚ÄúÂ§çÂà∂‚ÄùÁÆóÊ≥ïÔºåÊØèÊ¨°ÈúÄË¶ÅÂ§çÂà∂Â§ßÈáèÂ≠òÊ¥ªÁöÑÂØπË±°Ôºå‰ºöÂØºËá¥ÊïàÁéáÂæà‰Ωé„ÄÇËÄå‰∏îÔºåÂú®Êñ∞Áîü‰ª£‰∏≠‰ΩøÁî®‚ÄúÂ§çÂà∂‚ÄùÁÆóÊ≥ïÔºåÂΩìEden+Survior‰∏≠ÈÉΩË£Ö‰∏ç‰∏ãÊüê‰∏™ÂØπË±°Êó∂ÔºåÂèØ‰ª•‰ΩøÁî®ËÄÅÂπ¥‰ª£ÁöÑÂÜÖÂ≠òËøõË°å‚ÄúÂàÜÈÖçÊãÖ‰øù‚ÄùÔºåËÄåÂ¶ÇÊûúÂú®ËÄÅÂπ¥‰ª£‰ΩøÁî®ËØ•ÁÆóÊ≥ïÔºåÈÇ£‰πàÂú®ËÄÅÂπ¥‰ª£‰∏≠Â¶ÇÊûúÂá∫Áé∞Eden+SurviorË£Ö‰∏ç‰∏ãÊüê‰∏™ÂØπË±°Êó∂ÔºåÊ≤°ÊúâÂÖ∂‰ªñÂå∫ÂüüÁªô‰ªñ‰ΩúÂàÜÈÖçÊãÖ‰øù„ÄÇÂõ†Ê≠§ÔºåËÄÅÂπ¥‰ª£‰∏≠‰∏ÄËà¨‰ΩøÁî®‚ÄúÊ†áËÆ∞-Êï¥ÁêÜ‚ÄùÁÆóÊ≥ï„ÄÇ ÂàÜ‰ª£Êî∂ÈõÜÁÆóÊ≥ï Â∞ÜÂÜÖÂ≠òÂàíÂàÜ‰∏∫ËÄÅÂπ¥‰ª£ÂíåÊñ∞Áîü‰ª£„ÄÇËÄÅÂπ¥‰ª£‰∏≠Â≠òÊîæÂØøÂëΩËæÉÈïøÁöÑÂØπË±°ÔºåÊñ∞Áîü‰ª£‰∏≠Â≠òÊîæ‚ÄúÊúùÁîüÂ§ïÊ≠ª‚ÄùÁöÑÂØπË±°„ÄÇÁÑ∂ÂêéÂú®‰∏çÂêåÁöÑÂå∫Âüü‰ΩøÁî®‰∏çÂêåÁöÑÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ï„ÄÇ ÂûÉÂúæÂõûÊî∂ÊµÅÁ®ã ÂØπ‰∫éÊï¥‰∏™GCÊµÅÁ®ãÈáåÔºåÊúÄÈúÄË¶ÅÂ§ÑÁêÜÁöÑÂ∞±ÊòØÂπ¥ËΩª‰ª£ÂíåËÄÅÂπ¥‰ª£ÁöÑÂÜÖÂ≠òÊ∏ÖÁêÜÊìç‰ΩúÔºåËÄåÂÖÉÁ©∫Èó¥ÔºàÊ∞∏‰πÖ‰ª£ÔºâÈÉΩ‰∏çÂú®GCËåÉÂõ¥ÂÜÖÔºõ ÂΩìÁé∞Âú®Êúâ‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°‰∫ßÁîüÔºåÈÇ£‰πàÂØπË±°‰∏ÄÂÆöÈúÄË¶ÅÂÜÖÂ≠òÁ©∫Èó¥Ôºå‰∫éÊòØÁé∞Âú®Â∞±ÈúÄË¶Å‰∏∫ËØ•ÂØπË±°ËøõË°åÂÜÖÂ≠òÁ©∫Èó¥ÁöÑÁî≥ËØ∑„ÄÇ È¶ñÂÖà‰ºöÂà§Êñ≠‰ºäÁî∏Âõ≠Âå∫ÊòØÂê¶ÊúâÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂ¶ÇÊûúÊ≠§Êó∂ÊúâÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂàôÂ∞ÜÊñ∞ÂØπË±°‰øùÂ≠òÂú®‰ºäÁî∏Âõ≠Âå∫Ôºõ ‰ΩÜÂ¶ÇÊûú‰ºäÁî∏Âõ≠Âå∫ÁöÑÂÜÖÂ≠òÁ©∫Èó¥‰∏çË∂≥ÔºåÈÇ£‰πà‰ºöËá™Âä®ÊâßË°å‰∏Ä‰∏™ Minor GC Êìç‰ΩúÔºåÂ∞Ü‰ºäÁî∏Âõ≠Âå∫Êó†Áî®ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ËøõË°åÊ∏ÖÁêÜÔºåÂΩìÊ∏ÖÁêÜ‰πãÂêé‰ºöÁªßÁª≠Âà§Êñ≠‰ºäÁî∏Âõ≠Âå∫ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÊòØÂê¶ÂÖÖË∂≥ÔºüÂÖÖË∂≥ÂàôÂ∞ÜÊñ∞ÁöÑÂØπË±°ËøõË°åÁ©∫Èó¥ÂàÜÈÖçÔºõ Â¶ÇÊûúÊâßË°å‰∫Ü Minor GC ‰πãÂêéÂèëÁé∞‰ºäÁî∏Âõ≠Âå∫ÁöÑÂÜÖÂ≠ò‰æùÁÑ∂‰∏çË∂≥ÔºåÈÇ£‰πàËøô‰∏™Êó∂ÂÄô‰ºöËøõË°åÂ≠òË¥ßÂå∫Âà§Êñ≠ÔºåÂ¶ÇÊûúÂ≠òÊ¥ªÂå∫ÊúâÂâ©‰ΩôÁ©∫Èó¥ÔºåÂàôÂ∞Ü‰ºäÁî∏Âõ≠Âå∫ÁöÑÈÉ®ÂàÜÂØπË±°‰øùÂ≠òÂú®Â≠òÊ¥ªÂå∫ÔºåÈÇ£‰πàÈöèÂêéÁªßÁª≠Âà§Êñ≠‰ºäÁî∏Âõ≠Âå∫ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÊòØÂê¶ÂÖÖË∂≥ÔºåÂ¶Ç‰ΩïÂÜÖÂ≠òÂÖÖË∂≥ÔºåÂàôÂú®‰ºäÁî∏Âõ≠Âå∫ËøõË°åÁ©∫Èó¥ÂàÜÈÖçÔºõ Â¶ÇÊûúÊ≠§Êó∂Â≠òÊ¥ªÂå∫‰πüÂ∑≤ÁªèÊ≤°ÊúâÂÜÖÂ≠òÁ©∫Èó¥‰∫ÜÔºåÂàôÂºÄÂßãÂà§Êñ≠ËÄÅÂπ¥Âå∫ÔºåÂ¶ÇÊûúÊ≠§Êó∂ËÄÅÂπ¥Âå∫ÁöÑÁ©∫Èó¥ÂÖÖË∂≥ÔºåÂàôÂ∞ÜÂ≠òÊ¥ªÂå∫‰∏≠ÁöÑÊ¥ªË∑ÉÂØπË±°‰øùÂ≠òÂú®ËÄÅÂπ¥‰ª£ÔºåËÄåÂêéÂ≠òÊ¥ªÂå∫Â∞±‰ºöÂ≠òÁé∞ÊúâÁ©∫‰ΩôÁ©∫Èó¥ÔºåÈöèÂêéÔºå‰ºäÁî∏Âõ≠Âå∫Â∞ÜÊ¥ªË∑ÉÂØπË±°‰øùÂ≠òÂú®Â≠òÊ¥ªÂå∫‰πã‰∏≠ÔºåËÄåÂêéÂú®‰ºäÁî∏Âõ≠Âå∫Èáå‰∏∫Êñ∞ÂØπË±°ÂºÄËæüÂÜÖÂ≠òÁ©∫Èó¥Ôºõ Â¶ÇÊûúËøô‰∏™Êó∂ÂÄôËÄÅÂπ¥‰ª£‰πüÊª°‰∫ÜÔºåÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÂ∞Ü‰∫ßÁîü Major GC(Full GC)ÔºåËøõË°åËÄÅÂπ¥‰ª£ÁöÑÂÜÖÂ≠òÊ∏ÖÁêÜÔºõ Â¶ÇÊûúËÄÅÂπ¥‰ª£ÊâßË°å‰∫Ü Full GC ‰πãÂêéÔºå‰æùÁÑ∂Êó†Ê≥ïËøõË°åÂØπË±°ÁöÑ‰øùÂ≠òÔºåÂ∞±‰ºö‰∫ßÁîü OOM()ÂºÇÂ∏∏‚ÄúOutOfMemoryError‚Äù„ÄÇ Java‰∏≠ÂºïÁî®ÁöÑÁßçÁ±ª Java‰∏≠Ê†πÊçÆÁîüÂëΩÂë®ÊúüÁöÑÈïøÁü≠ÔºåÂ∞ÜÂºïÁî®ÂàÜ‰∏∫4Á±ª„ÄÇ Âº∫ÂºïÁî® Êàë‰ª¨Âπ≥Êó∂ÊâÄ‰ΩøÁî®ÁöÑÂºïÁî®Â∞±ÊòØÂº∫ÂºïÁî®„ÄÇ A a = new A(); ‰πüÂ∞±ÊòØÈÄöËøáÂÖ≥ÈîÆÂ≠ónewÂàõÂª∫ÁöÑÂØπË±°ÊâÄÂÖ≥ËÅîÁöÑÂºïÁî®Â∞±ÊòØÂº∫ÂºïÁî®„ÄÇ Âè™Ë¶ÅÂº∫ÂºïÁî®Â≠òÂú®ÔºåËØ•ÂØπË±°Ê∞∏Ëøú‰πü‰∏ç‰ºöË¢´ÂõûÊî∂„ÄÇ ËΩØÂºïÁî® Âè™ÊúâÂΩìÂ†ÜÂç≥Â∞ÜÂèëÁîüOOMÂºÇÂ∏∏Êó∂ÔºåJVMÊâç‰ºöÂõûÊî∂ËΩØÂºïÁî®ÊâÄÊåáÂêëÁöÑÂØπË±°„ÄÇ ËΩØÂºïÁî®ÈÄöËøáSoftReferenceÁ±ªÂÆûÁé∞„ÄÇ ËΩØÂºïÁî®ÁöÑÁîüÂëΩÂë®ÊúüÊØîÂº∫ÂºïÁî®Áü≠‰∏Ä‰∫õ„ÄÇ Âº±ÂºïÁî® Âè™Ë¶ÅÂûÉÂúæÊî∂ÈõÜÂô®ËøêË°åÔºåËΩØÂºïÁî®ÊâÄÊåáÂêëÁöÑÂØπË±°Â∞±‰ºöË¢´ÂõûÊî∂„ÄÇ Âº±ÂºïÁî®ÈÄöËøáWeakReferenceÁ±ªÂÆûÁé∞„ÄÇ Âº±ÂºïÁî®ÁöÑÁîüÂëΩÂë®ÊúüÊØîËΩØÂºïÁî®Áü≠„ÄÇ ËôöÂºïÁî® ËôöÂºïÁî®‰πüÂè´ÂπΩÁÅµÂºïÁî®ÔºåÂÆÉÂíåÊ≤°ÊúâÂºïÁî®Ê≤°ÊúâÂå∫Âà´ÔºåÊó†Ê≥ïÈÄöËøáËôöÂºïÁî®ËÆøÈóÆÂØπË±°ÁöÑ‰ªª‰ΩïÂ±ûÊÄßÊàñÂáΩÊï∞„ÄÇ ‰∏Ä‰∏™ÂØπË±°ÂÖ≥ËÅîËôöÂºïÁî®ÂîØ‰∏ÄÁöÑ‰ΩúÁî®Â∞±ÊòØÂú®ËØ•ÂØπË±°Ë¢´ÂûÉÂúæÊî∂ÈõÜÂô®ÂõûÊî∂‰πãÂâç‰ºöÂèóÂà∞‰∏ÄÊù°Á≥ªÁªüÈÄöÁü•„ÄÇ ËôöÂºïÁî®ÈÄöËøáPhantomReferenceÁ±ªÊù•ÂÆûÁé∞„ÄÇ ÂØπË±°ÂÜÖÂ≠òÂàÜÈÖçÁ≠ñÁï• JavaÊâÄÊâøËØ∫ÁöÑËá™Âä®ÂÜÖÂ≠òÁÆ°ÁêÜ‰∏ªË¶ÅÊòØÈíàÂØπÂØπË±°ÂÜÖÂ≠òÁöÑÂõûÊî∂ÂíåÂØπË±°ÂÜÖÂ≠òÁöÑÂàÜÈÖç„ÄÇ Âú®JavaËôöÊãüÊú∫ÁöÑ‰∫îÂùóÂÜÖÂ≠òÁ©∫Èó¥‰∏≠ÔºåÁ®ãÂ∫èËÆ°Êï∞Âô®„ÄÅJavaËôöÊãüÊú∫Ê†à„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊ†àÂÜÖÂ≠òÁöÑÂàÜÈÖçÂíåÂõûÊî∂ÈÉΩÂÖ∑ÊúâÁ°ÆÂÆöÊÄßÔºå‰∏ÄËà¨Âú®ÁºñËØëÈò∂ÊÆµÂ∞±ËÉΩÁ°ÆÂÆöÈúÄË¶ÅÂàÜÈÖçÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÔºåÂπ∂‰∏îÁî±‰∫éÈÉΩÊòØÁ∫øÁ®ãÁßÅÊúâÔºåÂõ†Ê≠§ÂÆÉ‰ª¨ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÈÉΩÈöèÁùÄÁ∫øÁ®ãÁöÑÂàõÂª∫ËÄåÂàõÂª∫ÔºåÁ∫øÁ®ãÁöÑÁªìÊùüËÄåÂõûÊî∂„ÄÇ‰πüÂ∞±ÊòØËøô‰∏â‰∏™Âå∫ÂüüÁöÑÂÜÖÂ≠òÂàÜÈÖçÂíåÂõûÊî∂ÈÉΩÂÖ∑ÊúâÁ°ÆÂÆöÊÄßÔºåÂûÉÂúæÂõûÊî∂Âô®‰∏çÈúÄË¶ÅÂú®ËøôÈáåËä±Ë¥πÂ§™Â§ßÁöÑÁ≤æÂäõ„ÄÇ ËÄåJavaËôöÊãüÊú∫‰∏≠ÁöÑÊñπÊ≥ïÂå∫Âõ†‰∏∫ÊòØÁî®Êù•Â≠òÂÇ®Á±ª‰ø°ÊÅØ„ÄÅÂ∏∏Èáè„ÄÅÈùôÊÄÅÂèòÈáèÔºåËøô‰∫õÊï∞ÊçÆÁöÑÂèòÂä®ÊÄßËæÉÂ∞èÔºåÂõ†Ê≠§‰∏çÊòØJavaÂÜÖÂ≠òÁÆ°ÁêÜÈáçÁÇπÈúÄË¶ÅÂÖ≥Ê≥®ÁöÑÂå∫Âüü„ÄÇ ËÄåÂØπ‰∫éÂ†ÜÔºåÊâÄÊúâÁ∫øÁ®ãÂÖ±‰∫´ÔºåÊâÄÊúâÁöÑÂØπË±°ÈÉΩÈúÄË¶ÅÂú®Â†Ü‰∏≠ÂàõÂª∫ÂíåÂõûÊî∂„ÄÇËôΩÁÑ∂ÊØè‰∏™ÂØπË±°ÁöÑÂ§ßÂ∞èÂú®Á±ªÂä†ËΩΩÁöÑÊó∂ÂÄôÂ∞±ËÉΩÁ°ÆÂÆöÔºå‰ΩÜÂØπË±°ÁöÑÊï∞ÈáèÂè™ÊúâÂú®Á®ãÂ∫èËøêË°åÊúüÈó¥ÊâçËÉΩÁ°ÆÂÆöÔºåÂõ†Ê≠§Â†Ü‰∏≠ÂÜÖÂ≠òÁöÑÂàÜÈÖçÂÖ∑ÊúâËæÉÂ§ßÁöÑ‰∏çÁ°ÆÂÆöÊÄß„ÄÇÊ≠§Â§ñÔºåÂØπË±°ÁöÑÁîüÂëΩÂë®ÊúüÈïøÁü≠‰∏ç‰∏ÄÔºåÂõ†Ê≠§ÈúÄË¶ÅÈíàÂØπ‰∏çÂêåÁîüÂëΩÂë®ÊúüÁöÑÂØπË±°ÈááÁî®‰∏çÂêåÁöÑÂÜÖÂ≠òÂõûÊî∂ÁÆóÊ≥ïÔºåÂ¢ûÂä†‰∫ÜÂÜÖÂ≠òÂõûÊî∂ÁöÑÂ§çÊùÇÊÄß„ÄÇ Áªº‰∏äÊâÄËø∞ÔºöJavaËá™Âä®ÂÜÖÂ≠òÁÆ°ÁêÜÊúÄÊ†∏ÂøÉÁöÑÂäüËÉΩÊòØÂ†ÜÂÜÖÂ≠ò‰∏≠ÂØπË±°ÁöÑÂàÜÈÖç‰∏éÂõûÊî∂„ÄÇ ÂØπË±°‰ºòÂÖàÂú®EdenÂå∫‰∏≠ÂàÜÈÖç ÁõÆÂâç‰∏ªÊµÅÁöÑÂûÉÂúæÊî∂ÈõÜÂô®ÈÉΩ‰ºöÈááÁî®ÂàÜ‰ª£ÂõûÊî∂ÁÆóÊ≥ïÔºåÂõ†Ê≠§ÈúÄË¶ÅÂ∞ÜÂ†ÜÂÜÖÂ≠òÂàÜ‰∏∫Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£„ÄÇ Âú®Êñ∞Áîü‰ª£‰∏≠‰∏∫‰∫ÜÈò≤Ê≠¢ÂÜÖÂ≠òÁ¢éÁâáÈóÆÈ¢òÔºåÂõ†Ê≠§ÂûÉÂúæÊî∂ÈõÜÂô®‰∏ÄËà¨ÈÉΩÈÄâÁî®‚ÄúÂ§çÂà∂‚ÄùÁÆóÊ≥ï„ÄÇÂõ†Ê≠§ÔºåÂ†ÜÂÜÖÂ≠òÁöÑÊñ∞Áîü‰ª£Ë¢´Ëøõ‰∏ÄÊ≠•ÂàÜ‰∏∫ÔºöEdenÂå∫ÔºãSurvior1Âå∫ÔºãSurvior2Âå∫„ÄÇ ÊØèÊ¨°ÂàõÂª∫ÂØπË±°Êó∂ÔºåÈ¶ñÂÖà‰ºöÂú®EdenÂå∫‰∏≠ÂàÜÈÖç„ÄÇ Ëã•EdenÂå∫Â∑≤Êª°ÔºåÂàôÂú®Survior1Âå∫‰∏≠ÂàÜÈÖç„ÄÇ Ëã•EdenÂå∫ÔºãSurvior1Âå∫Ââ©‰ΩôÂÜÖÂ≠òÂ§™Â∞ëÔºåÂØºËá¥ÂØπË±°Êó†Ê≥ïÊîæÂÖ•ËØ•Âå∫ÂüüÊó∂ÔºåÂ∞±‰ºöÂêØÁî®‚ÄúÂàÜÈÖçÊãÖ‰øù‚ÄùÔºåÂ∞ÜÂΩìÂâçEdenÂå∫ÔºãSurvior1Âå∫‰∏≠ÁöÑÂØπË±°ËΩ¨ÁßªÂà∞ËÄÅÂπ¥‰ª£‰∏≠ÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÊñ∞ÂØπË±°Â≠òÂÖ•EdenÂå∫„ÄÇ Â§ßÂØπË±°Áõ¥Êé•ËøõÂÖ•ËÄÅÂπ¥‰ª£ ÊâÄË∞ì‚ÄúÂ§ßÂØπË±°‚ÄùÂ∞±ÊòØÊåá‰∏Ä‰∏™Âç†Áî®Â§ßÈáèËøûÁª≠Â≠òÂÇ®Á©∫Èó¥ÁöÑÂØπË±°ÔºåÂ¶ÇÊï∞ÁªÑ„ÄÇ ÂΩìÂèëÁé∞‰∏Ä‰∏™Â§ßÂØπË±°Âú®EdenÂå∫ÔºãSurvior1Âå∫‰∏≠Â≠ò‰∏ç‰∏ãÁöÑÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÂàÜÈÖçÊãÖ‰øùÊú∫Âà∂ÊääÂΩìÂâçEdenÂå∫ÔºãSurvior1Âå∫ÁöÑÊâÄÊúâÂØπË±°ÈÉΩÂ§çÂà∂Âà∞ËÄÅÂπ¥‰ª£‰∏≠Âéª„ÄÇ Êàë‰ª¨Áü•ÈÅìÔºå‰∏Ä‰∏™Â§ßÂØπË±°ËÉΩÂ§üÂ≠òÂÖ•EdenÂå∫ÔºãSurvior1Âå∫ÁöÑÊ¶ÇÁéáÊØîËæÉÂ∞èÔºåÂèëÁîüÂàÜÈÖçÊãÖ‰øùÁöÑÊ¶ÇÁéáÊØîËæÉÂ§ßÔºåËÄåÂàÜÈÖçÊãÖ‰øùÈúÄË¶ÅÊ∂âÂèäÂà∞Â§ßÈáèÁöÑÂ§çÂà∂ÔºåÂ∞±‰ºöÈÄ†ÊàêÊïàÁéá‰Ωé‰∏ã„ÄÇ Âõ†Ê≠§ÔºåÂØπ‰∫éÂ§ßÂØπË±°Êàë‰ª¨Áõ¥Êé•Êää‰ªñÊîæÂà∞ËÄÅÂπ¥‰ª£‰∏≠ÂéªÔºå‰ªéËÄåÂ∞±ËÉΩÈÅøÂÖçÂ§ßÈáèÁöÑÂ§çÂà∂Êìç‰Ωú„ÄÇ ÈÇ£‰πàÔºå‰ªÄ‰πàÊ†∑ÁöÑÂØπË±°ÊâçÊòØ‚ÄúÂ§ßÂØπË±°‚ÄùÂë¢Ôºü ÈÄöËøá-XX:PretrnureSizeThresholdÂèÇÊï∞ËÆæÁΩÆÂ§ßÂØπË±° ËØ•ÂèÇÊï∞Áî®‰∫éËÆæÁΩÆÂ§ßÂ∞èË∂ÖËøáËØ•ÂèÇÊï∞ÁöÑÂØπË±°Ë¢´ËÆ§‰∏∫ÊòØ‚ÄúÂ§ßÂØπË±°‚ÄùÔºåÁõ¥Êé•ËøõÂÖ•ËÄÅÂπ¥‰ª£„ÄÇ Ê≥®ÊÑèÔºöËØ•ÂèÇÊï∞Âè™ÂØπSerialÂíåParNewÊî∂ÈõÜÂô®ÊúâÊïà ÁîüÂëΩÂë®ÊúüËæÉÈïøÁöÑÂØπË±°ËøõÂÖ•ËÄÅÂπ¥‰ª£ ËÄÅÂπ¥‰ª£Áî®‰∫éÂ≠òÂÇ®ÁîüÂëΩÂë®ÊúüËæÉÈïøÁöÑÂØπË±°ÔºåÈÇ£‰πàÂ¶Ç‰ΩïÂà§Êñ≠‰∏Ä‰∏™ÂØπË±°ÁöÑÂπ¥ÈæÑÂë¢Ôºü Êñ∞Áîü‰ª£‰∏≠ÁöÑÊØè‰∏™ÂØπË±°ÈÉΩÊúâ‰∏Ä‰∏™Âπ¥ÈæÑËÆ°Êï∞Âô®ÔºåÂΩìÊñ∞Áîü‰ª£ÂèëÁîü‰∏ÄÊ¨°MinorGCÂêéÔºåÂ≠òÊ¥ª‰∏ãÊù•ÁöÑÂØπË±°ÁöÑÂπ¥ÈæÑÂ∞±Âä†‰∏ÄÔºåÂΩìÂπ¥ÈæÑË∂ÖËøá‰∏ÄÂÆöÂÄºÊó∂ÔºåÂ∞±Â∞ÜË∂ÖËøáËØ•ÂÄºÁöÑÊâÄÊúâÂØπË±°ËΩ¨ÁßªÂà∞ËÄÅÂπ¥‰ª£‰∏≠Âéª„ÄÇ ‰ΩøÁî®-XXMaxTenuringThresholdËÆæÁΩÆÊñ∞Áîü‰ª£ÁöÑÊúÄÂ§ßÂπ¥ÈæÑ,ËÆæÁΩÆËØ•ÂèÇÊï∞ÂêéÔºåÂè™Ë¶ÅË∂ÖËøáËØ•ÂèÇÊï∞ÁöÑÊñ∞Áîü‰ª£ÂØπË±°ÈÉΩ‰ºöË¢´ËΩ¨ÁßªÂà∞ËÄÅÂπ¥‰ª£‰∏≠Âéª„ÄÇ Áõ∏ÂêåÂπ¥ÈæÑÁöÑÂØπË±°ÂÜÖÂ≠òË∂ÖËøáSurviorÂÜÖÂ≠ò‰∏ÄÂçäÁöÑÂØπË±°ËøõÂÖ•ËÄÅÂπ¥‰ª£ Â¶ÇÊûúÂΩìÂâçÊñ∞Áîü‰ª£ÁöÑSurvior‰∏≠ÔºåÂπ¥ÈæÑÁõ∏ÂêåÁöÑÂØπË±°ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÊÄªÂíåË∂ÖËøá‰∫ÜSurviorÂÜÖÂ≠òÁ©∫Èó¥ÁöÑ‰∏ÄÂçäÔºåÈÇ£‰πàÊâÄÊúâÂπ¥ÈæÑÁõ∏ÂêåÁöÑÂØπË±°ÂíåË∂ÖËøáËØ•Âπ¥ÈæÑÁöÑÂØπË±°ÈÉΩË¢´ËΩ¨ÁßªÂà∞ËÄÅÂπ¥‰ª£‰∏≠Âéª„ÄÇÊó†ÈúÄÁ≠âÂà∞ÂØπË±°ÁöÑÂπ¥ÈæÑË∂ÖËøáMaxTenuringThresholdÊâçË¢´ËΩ¨ÁßªÂà∞ËÄÅÂπ¥‰ª£‰∏≠Âéª„ÄÇ HotSpotÂûÉÂúæÊî∂ÈõÜÂô® &lt;font color=&quot;red&quot;&gt; ËØ¥ÊòéÔºöÂ¶ÇÊûú‰∏§‰∏™Êî∂ÈõÜÂô®‰πãÈó¥Â≠òÂú®ËøûÁ∫øËØ¥Êòé‰ªñ‰ª¨‰πãÈó¥ÂèØ‰ª•Êê≠ÈÖç‰ΩøÁî®„ÄÇ &lt;/font&gt; Êñ∞Áîü‰ª£ÂûÉÂúæÊî∂ÈõÜÂô® SerialÂûÉÂúæÊî∂ÈõÜÂô® ÂçïÁ∫øÁ®ã Âè™ÂºÄÂêØ‰∏ÄÊù°GCÁ∫øÁ®ãËøõË°åÂûÉÂúæÂõûÊî∂ÔºåÂπ∂‰∏îÂú®ÂûÉÂúæÂõûÊî∂ËøáÁ®ã‰∏≠ÂÅúÊ≠¢‰∏ÄÂàáÁî®Êà∑Á∫øÁ®ãÔºå‰ªéËÄåÁî®Êà∑ÁöÑËØ∑Ê±ÇÊàñÂõæÂΩ¢ÂåñÁïåÈù¢‰ºöÂá∫Áé∞Âç°È°ø„ÄÇ ÈÄÇÂêàÂÆ¢Êà∑Á´ØÂ∫îÁî® ‰∏ÄËà¨ÂÆ¢Êà∑Á´ØÂ∫îÁî®ÊâÄÈúÄÂÜÖÂ≠òËæÉÂ∞èÔºå‰∏ç‰ºöÂàõÂª∫Â§™Â§öÁöÑÂØπË±°ÔºåËÄå‰∏îÂ†ÜÂÜÖÂ≠ò‰∏çÂ§ßÔºåÂõ†Ê≠§ÂûÉÂúæÂõûÊî∂Êó∂Èó¥ÊØîËæÉÁü≠ÔºåÂç≥‰ΩøÂú®ËøôÊÆµÊó∂Èó¥ÂÅúÊ≠¢‰∏ÄÂàáÁî®Êà∑Á∫øÁ®ãÔºåÁî®Êà∑‰πü‰∏ç‰ºöÊÑüÂèóÂà∞ÊòéÊòæÁöÑÂÅúÈ°øÔºåÂõ†Ê≠§Êú¨ÂûÉÂúæÊî∂ÈõÜÂô®ÈÄÇÂêàÂÆ¢Êà∑Á´ØÂ∫îÁî®„ÄÇ ÁÆÄÂçïÈ´òÊïà Áî±‰∫éSerialÊî∂ÈõÜÂô®Âè™Êúâ‰∏ÄÊù°GCÁ∫øÁ®ãÔºåÂõ†Ê≠§ÈÅøÂÖç‰∫ÜÁ∫øÁ®ãÂàáÊç¢ÁöÑÂºÄÈîÄÔºå‰ªéËÄåÁÆÄÂçïÈ´òÊïà„ÄÇ ÈááÁî®‚ÄúÂ§çÂà∂‚ÄùÁÆóÊ≥ï ParNewÂûÉÂúæÊî∂ÈõÜÂô® ParNewÊòØSerialÁöÑÂ§öÁ∫øÁ®ãÁâàÊú¨„ÄÇ Â§öÁ∫øÁ®ãÂπ∂Ë°åÊâßË°å ParNewÁî±Â§öÊù°GCÁ∫øÁ®ãÂπ∂Ë°åÂú∞ËøõË°åÂûÉÂúæÊ∏ÖÁêÜ„ÄÇ‰ΩÜÊ∏ÖÁêÜËøáÁ®ã‰ªçÁÑ∂ÈúÄË¶ÅÂÅúÊ≠¢‰∏ÄÂàáÁî®Êà∑Á∫øÁ®ã„ÄÇ‰ΩÜÁî±‰∫éÊúâÂ§öÊù°GCÁ∫øÁ®ãÂêåÊó∂Ê∏ÖÁêÜÔºåÊ∏ÖÁêÜÈÄüÂ∫¶ÊØîSerialÊúâ‰∏ÄÂÆöÁöÑÊèêÂçá„ÄÇ ÈÄÇÂêàÂ§öCPUÁöÑÊúçÂä°Âô®ÁéØÂ¢É Áî±‰∫é‰ΩøÁî®‰∫ÜÂ§öÁ∫øÁ®ãÔºåÂõ†Ê≠§ÈÄÇÂêàCPUËæÉÂ§öÁöÑÊúçÂä°Âô®ÁéØÂ¢É„ÄÇ ‰∏éSerialÊÄßËÉΩÂØπÊØî ParNewÂíåSerialÂîØ‰∏ÄÁöÑÂå∫Âà´Â∞±ÊòØ‰ΩøÁî®‰∫ÜÂ§öÁ∫øÁ®ãËøõË°åÂûÉÂúæÂõûÊî∂ÔºåÂú®Â§öCPUÁöÑÁéØÂ¢É‰∏ãÊÄßËÉΩÊØîSerial‰ºöÊúâ‰∏ÄÂÆöÁ®ãÂ∫¶ÁöÑÊèêÂçáÔºõ‰ΩÜÁ∫øÁ®ãÂàáÊç¢ÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂºÄÈîÄÔºåÂõ†Ê≠§Âú®ÂçïCPUÁéØÂ¢É‰∏≠Ë°®Áé∞‰∏çÂ¶ÇSerial„ÄÇ ÈááÁî®‚ÄúÂ§çÂà∂‚ÄùÁÆóÊ≥ï ËøΩÊ±Ç‚ÄúÈôç‰ΩéÂÅúÈ°øÊó∂Èó¥‚Äù ÂíåSerialÁõ∏ÊØîÔºåParNew‰ΩøÁî®Â§öÁ∫øÁ®ãÁöÑÁõÆÁöÑÂ∞±ÊòØÁº©Áü≠ÂûÉÂúæÊî∂ÈõÜÊó∂Èó¥Ôºå‰ªéËÄåÂáèÂ∞ëÁî®Êà∑Á∫øÁ®ãË¢´ÂÅúÈ°øÁöÑÊó∂Èó¥„ÄÇ &lt;p id=&quot;div-border-left-red&quot;&gt; Âπ∂Ë°å(Parallel)ÔºöÊåáÂ§öÊù°ÂûÉÂúæÊî∂ÈõÜÁ∫øÁ®ãÂπ∂Ë°åÂ∑•‰ΩúÔºåÊ≠§Êó∂Áî®Êà∑Á∫øÁ®ãÂ§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅ„ÄÇ &lt;/p&gt; &lt;p id=&quot;div-border-left-red&quot;&gt; Âπ∂Âèë(Concurrent)ÔºöÊåáÁî®Êà∑Á∫øÁ®ãÂíåÂûÉÂúæÂõûÊî∂Á∫øÁ®ãÂêåÊó∂ÊâßË°å(‰∏ç‰∏ÄÂÆöÊòØÂπ∂Ë°åÔºåÊúâÂèØËÉΩÊòØ‰∫§ÂèâÊâßË°å)ÔºåÁî®Êà∑ËøõÁ®ãÂú®ËøêË°åÔºåËÄåÂûÉÂúæÂõûÊî∂Á∫øÁ®ãÂú®Âè¶‰∏Ä‰∏™ CPU ‰∏äËøêË°å„ÄÇ &lt;/p&gt; Parallel ScavengeÂûÉÂúæÊî∂ÈõÜÂô® Parallel ScavengeÂíåParNew‰∏ÄÊ†∑ÈÉΩÊòØÂ§öÁ∫øÁ®ã„ÄÅÊñ∞Áîü‰ª£Êî∂ÈõÜÂô®ÔºåÈÉΩ‰ΩøÁî®‚ÄúÂ§çÂà∂‚ÄùÁÆóÊ≥ïËøõË°åÂûÉÂúæÂõûÊî∂„ÄÇ‰ΩÜÂÆÉ‰ª¨Êúâ‰∏™Â∑®Â§ßÁöÑ‰∏çÂêåÁÇπÔºöParNewÊî∂ÈõÜÂô®ËøΩÊ±ÇÈôç‰ΩéÁî®Êà∑Á∫øÁ®ãÁöÑÂÅúÈ°øÊó∂Èó¥ÔºåÂõ†Ê≠§ÈÄÇÂêà‰∫§‰∫íÂºèÂ∫îÁî®ÔºõËÄåParallel ScavengeËøΩÊ±ÇCPUÂêûÂêêÈáèÔºåËÉΩÂ§üÂú®ËæÉÁü≠ÁöÑÊó∂Èó¥ÂÜÖÂÆåÊàêÊåáÂÆö‰ªªÂä°ÔºåÂõ†Ê≠§ÈÄÇÂêàÊ≤°Êúâ‰∫§‰∫íÁöÑÂêéÂè∞ËÆ°ÁÆó„ÄÇ ‰ªÄ‰πàÊòØ‚ÄúÂêûÂêêÈáè‚ÄùÔºü ÂêûÂêêÈáèÊòØÊåáÁî®Êà∑Á∫øÁ®ãËøêË°åÊó∂Èó¥Âç†CPUÊÄªÊó∂Èó¥ÁöÑÊØî‰æã„ÄÇ CPUÊÄªÊó∂Èó¥ÂåÖÊã¨ÔºöÁî®Êà∑Á∫øÁ®ãËøêË°åÊó∂Èó¥ Âíå GCÁ∫øÁ®ãËøêË°åÁöÑÊó∂Èó¥„ÄÇ Âõ†Ê≠§ÔºåÂêûÂêêÈáèË∂äÈ´òË°®Á§∫Áî®Êà∑Á∫øÁ®ãËøêË°åÊó∂Èó¥Ë∂äÈïøÔºå‰ªéËÄåÁî®Êà∑Á∫øÁ®ãËÉΩÂ§üË¢´Âø´ÈÄüÂ§ÑÁêÜÂÆå„ÄÇ Èôç‰ΩéÂÅúÈ°øÊó∂Èó¥ÁöÑ‰∏§ÁßçÊñπÂºè Âú®Â§öCPUÁéØÂ¢É‰∏≠‰ΩøÁî®Â§öÊù°GCÁ∫øÁ®ãÔºå‰ªéËÄåÂûÉÂúæÂõûÊî∂ÁöÑÊó∂Èó¥ÂáèÂ∞ëÔºå‰ªéËÄåÁî®Êà∑Á∫øÁ®ãÂÅúÈ°øÁöÑÊó∂Èó¥‰πüÂáèÂ∞ëÔºõ ÂÆûÁé∞GCÁ∫øÁ®ã‰∏éÁî®Êà∑Á∫øÁ®ãÂπ∂ÂèëÊâßË°å„ÄÇÊâÄË∞ìÂπ∂ÂèëÔºåÂ∞±ÊòØÁî®Êà∑Á∫øÁ®ã‰∏éGCÁ∫øÁ®ã‰∫§ÊõøÊâßË°åÔºå‰ªéËÄåÊØèÊ¨°ÂÅúÈ°øÁöÑÊó∂Èó¥‰ºöÂáèÂ∞ëÔºåÁî®Êà∑ÊÑüÂèóÂà∞ÁöÑÂÅúÈ°øÊÑüÈôç‰ΩéÔºå‰ΩÜÁ∫øÁ®ã‰πãÈó¥‰∏çÊñ≠ÂàáÊç¢ÊÑèÂë≥ÁùÄÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂºÄÈîÄÔºå‰ªéËÄåÂûÉÂúæÂõûÊî∂ÂíåÁî®Êà∑Á∫øÁ®ãÁöÑÊÄªÊó∂Èó¥Â∞Ü‰ºöÂª∂Èïø„ÄÇ Parallel ScavengeÊèê‰æõÁöÑÂèÇÊï∞ ËÆæÁΩÆ‚ÄúÂêûÂêêÈáè‚ÄùÔºöÈÄöËøáÂèÇÊï∞-XX:GCTimeRadioËÆæÁΩÆÂûÉÂúæÂõûÊî∂Êó∂Èó¥Âç†ÊÄªCPUÊó∂Èó¥ÁöÑÁôæÂàÜÊØî„ÄÇ ËÆæÁΩÆ‚ÄúÂÅúÈ°øÊó∂Èó¥‚ÄùÔºöÈÄöËøáÂèÇÊï∞-XX:MaxGCPauseMillisËÆæÁΩÆÂûÉÂúæÂ§ÑÁêÜËøáÁ®ãÊúÄ‰πÖÂÅúÈ°øÊó∂Èó¥„ÄÇParallel Scavenge‰ºöÊ†πÊçÆËøô‰∏™ÂÄºÁöÑÂ§ßÂ∞èÁ°ÆÂÆöÊñ∞Áîü‰ª£ÁöÑÂ§ßÂ∞è„ÄÇÂ¶ÇÊûúËøô‰∏™ÂÄºË∂äÂ∞èÔºåÊñ∞Áîü‰ª£Â∞±‰ºöË∂äÂ∞èÔºå‰ªéËÄåÊî∂ÈõÜÂô®Â∞±ËÉΩ‰ª•ËæÉÁü≠ÁöÑÊó∂Èó¥ËøõË°å‰∏ÄÊ¨°ÂõûÊî∂„ÄÇ‰ΩÜÊñ∞Áîü‰ª£ÂèòÂ∞èÂêéÔºåÂõûÊî∂ÁöÑÈ¢ëÁéáÂ∞±‰ºöÊèêÈ´òÔºåÂõ†Ê≠§Ë¶ÅÂêàÁêÜÊéßÂà∂Ëøô‰∏™ÂÄº„ÄÇ ÂêØÁî®Ëá™ÈÄÇÂ∫îË∞ÉËäÇÁ≠ñÁï•ÔºöÈÄöËøáÂëΩ‰ª§-XX:+UseAdaptiveSizePolicyÂ∞±ËÉΩÂºÄÂêØËá™ÈÄÇÂ∫îÁ≠ñÁï•„ÄÇÊàë‰ª¨Âè™Ë¶ÅËÆæÁΩÆÂ•ΩÂ†ÜÁöÑÂ§ßÂ∞èÂíåMaxGCPauseMillisÊàñGCTimeRadioÔºåÊî∂ÈõÜÂô®‰ºöËá™Âä®Ë∞ÉÊï¥Êñ∞Áîü‰ª£ÁöÑÂ§ßÂ∞è„ÄÅEdenÂíåSurviorÁöÑÊØî‰æã„ÄÅÂØπË±°ËøõÂÖ•ËÄÅÂπ¥‰ª£ÁöÑÂπ¥ÈæÑÔºå‰ª•ÊúÄÂ§ßÁ®ãÂ∫¶‰∏äÊé•ËøëÊàë‰ª¨ËÆæÁΩÆÁöÑMaxGCPauseMillisÊàñGCTimeRadio„ÄÇ ËÄÅÂπ¥‰ª£ÂûÉÂúæÊî∂ÈõÜÂô® Serial OldÂûÉÂúæÊî∂ÈõÜÂô® Serial OldÊî∂ÈõÜÂô®ÊòØSerialÁöÑËÄÅÂπ¥‰ª£ÁâàÊú¨ÔºåÂÆÉ‰ª¨ÈÉΩÊòØÂçïÁ∫øÁ®ãÊî∂ÈõÜÂô®Ôºå‰πüÂ∞±ÊòØÂûÉÂúæÊî∂ÈõÜÊó∂Âè™ÂêØÂä®‰∏ÄÊù°GCÁ∫øÁ®ãÔºåÂõ†Ê≠§ÈÉΩÈÄÇÂêàÂÆ¢Êà∑Á´ØÂ∫îÁî®„ÄÇ ÂÆÉ‰ª¨ÂîØ‰∏ÄÁöÑÂå∫Âà´Â∞±ÊòØSerial OldÂ∑•‰ΩúÂú®ËÄÅÂπ¥‰ª£Ôºå‰ΩøÁî®‚ÄúÊ†áËÆ∞-Êï¥ÁêÜ‚ÄùÁÆóÊ≥ïÔºõËÄåSerialÂ∑•‰ΩúÂú®Êñ∞Áîü‰ª£Ôºå‰ΩøÁî®‚ÄúÂ§çÂà∂‚ÄùÁÆóÊ≥ï„ÄÇ Parallel OldÂûÉÂúæÊî∂ÈõÜÂô® Parallel OldÊî∂ÈõÜÂô®ÊòØParallel ScavengeÁöÑËÄÅÂπ¥‰ª£ÁâàÊú¨Ôºå‰∏ÄËà¨ÂÆÉ‰ª¨Êê≠ÈÖç‰ΩøÁî®ÔºåËøΩÊ±ÇCPUÂêûÂêêÈáè„ÄÇ ÂÆÉ‰ª¨Âú®ÂûÉÂúæÊî∂ÈõÜÊó∂ÈÉΩÊòØÁî±Â§öÊù°GCÁ∫øÁ®ãÂπ∂Ë°åÊâßË°åÔºåÂπ∂ÂÅúÊ≠¢‰∏ÄÂàáÁî®Êà∑Á∫øÁ®ã„ÄÇÂõ†Ê≠§ÔºåÁî±‰∫éÂú®ÂûÉÂúæÊ∏ÖÁêÜËøáÁ®ã‰∏≠Ê≤°Êúâ‰ΩøÂûÉÂúæÊî∂ÈõÜÂíåÁî®Êà∑Á∫øÁ®ãÂπ∂Ë°åÊâßË°åÔºåÂõ†Ê≠§ÂÆÉ‰ª¨ÊòØËøΩÊ±ÇÂêûÂêêÈáèÁöÑÂûÉÂúæÊî∂ÈõÜÂô®„ÄÇ CMSÂûÉÂúæÊî∂ÈõÜÂô® CMSÊî∂ÈõÜÂô®ÊòØ‰∏ÄÊ¨æËøΩÊ±ÇÂÅúÈ°øÊó∂Èó¥ÁöÑËÄÅÂπ¥‰ª£Êî∂ÈõÜÂô®ÔºåÂÆÉÂú®ÂûÉÂúæÊî∂ÈõÜÊó∂‰ΩøÂæóÁî®Êà∑Á∫øÁ®ãÂíåGCÁ∫øÁ®ãÂπ∂Ë°åÊâßË°åÔºåÂõ†Ê≠§Âú®ÂûÉÂúæÊî∂ÈõÜËøáÁ®ã‰∏≠Áî®Êà∑‰πü‰∏ç‰ºöÊÑüÂèóÂà∞ÊòéÊòæÁöÑÂç°È°ø„ÄÇ‰ΩÜÁî®Êà∑Á∫øÁ®ãÂíåGCÁ∫øÁ®ã‰πãÈó¥‰∏çÂÅúÂú∞ÂàáÊç¢‰ºöÊúâÈ¢ùÂ§ñÁöÑÂºÄÈîÄÔºåÂõ†Ê≠§ÂûÉÂúæÂõûÊî∂ÊÄªÊó∂Èó¥Â∞±‰ºöË¢´Âª∂Èïø„ÄÇ ÂõûÊî∂ËøáÁ®ã ÂàùÂßãÊ†áËÆ∞ ÂÅúÊ≠¢‰∏ÄÂàáÁî®Êà∑Á∫øÁ®ãÔºå‰ªÖ‰ΩøÁî®‰∏ÄÊù°ÂàùÂßãÊ†áËÆ∞Á∫øÁ®ãÂØπÊâÄÊúâ‰∏éGC ROOTSÁõ¥Êé•ÂÖ≥ËÅîÁöÑÂØπË±°ËøõË°åÊ†áËÆ∞„ÄÇÈÄüÂ∫¶ÂæàÂø´„ÄÇ Âπ∂ÂèëÊ†áËÆ∞ ‰ΩøÁî®Â§öÊù°Âπ∂ÂèëÊ†áËÆ∞Á∫øÁ®ãÂπ∂Ë°åÊâßË°åÔºåÂπ∂‰∏éÁî®Êà∑Á∫øÁ®ãÂπ∂ÂèëÊâßË°å„ÄÇÊ≠§ËøáÁ®ãËøõË°åÂèØËææÊÄßÂàÜÊûêÔºåÊ†áËÆ∞Âá∫ÊâÄÊúâÂ∫üÂºÉÁöÑÂØπË±°„ÄÇÈÄüÂ∫¶ÂæàÊÖ¢„ÄÇ ÈáçÊñ∞Ê†áËÆ∞ ÂÅúÊ≠¢‰∏ÄÂàáÁî®Êà∑Á∫øÁ®ãÔºåÂπ∂‰ΩøÁî®Â§öÊù°ÈáçÊñ∞Ê†áËÆ∞Á∫øÁ®ãÂπ∂Ë°åÊâßË°åÔºåÂ∞ÜÂàöÊâçÂπ∂ÂèëÊ†áËÆ∞ËøáÁ®ã‰∏≠Êñ∞Âá∫Áé∞ÁöÑÂ∫üÂºÉÂØπË±°Ê†áËÆ∞Âá∫Êù•„ÄÇËøô‰∏™ËøáÁ®ãÁöÑËøêË°åÊó∂Èó¥‰ªã‰∫éÂàùÂßãÊ†áËÆ∞ÂíåÂπ∂ÂèëÊ†áËÆ∞‰πãÈó¥„ÄÇ Âπ∂ÂèëÊ∏ÖÈô§ Âè™‰ΩøÁî®‰∏ÄÊù°Âπ∂ÂèëÊ∏ÖÈô§Á∫øÁ®ãÔºåÂíåÁî®Êà∑Á∫øÁ®ã‰ª¨Âπ∂ÂèëÊâßË°åÔºåÊ∏ÖÈô§ÂàöÊâçÊ†áËÆ∞ÁöÑÂØπË±°„ÄÇËøô‰∏™ËøáÁ®ãÈùûÂ∏∏ËÄóÊó∂„ÄÇ CMSÁöÑÁº∫ÁÇπ ÂêûÂêêÈáè‰Ωé Áî±‰∫éCMSÂú®ÂûÉÂúæÊî∂ÈõÜËøáÁ®ã‰ΩøÁî®Áî®Êà∑Á∫øÁ®ãÂíåGCÁ∫øÁ®ãÂπ∂Ë°åÊâßË°åÔºå‰ªéËÄåÁ∫øÁ®ãÂàáÊç¢‰ºöÊúâÈ¢ùÂ§ñÂºÄÈîÄÔºåÂõ†Ê≠§CPUÂêûÂêêÈáèÂ∞±‰∏çÂ¶ÇÂú®ÂûÉÂúæÊî∂ÈõÜËøáÁ®ã‰∏≠ÂÅúÊ≠¢‰∏ÄÂàáÁî®Êà∑Á∫øÁ®ãÁöÑÊñπÂºèÊù•ÁöÑÈ´ò„ÄÇ Êó†Ê≥ïÂ§ÑÁêÜÊµÆÂä®ÂûÉÂúæÔºåÂØºËá¥È¢ëÁπÅFull GC Áî±‰∫éÂûÉÂúæÊ∏ÖÈô§ËøáÁ®ã‰∏≠ÔºåÁî®Êà∑Á∫øÁ®ãÂíåGCÁ∫øÁ®ãÂπ∂ÂèëÊâßË°åÔºå‰πüÂ∞±ÊòØÁî®Êà∑Á∫øÁ®ã‰ªçÂú®ÊâßË°åÔºåÈÇ£‰πàÂú®ÊâßË°åËøáÁ®ã‰∏≠‰ºö‰∫ßÁîüÂûÉÂúæÔºåËøô‰∫õÂûÉÂúæÁß∞‰∏∫‚ÄúÊµÆÂä®ÂûÉÂúæ‚Äù„ÄÇ Â¶ÇÊûúCMSÂú®ÂûÉÂúæÊ∏ÖÁêÜËøáÁ®ã‰∏≠ÔºåÁî®Êà∑Á∫øÁ®ãÈúÄË¶ÅÂú®ËÄÅÂπ¥‰ª£‰∏≠ÂàÜÈÖçÂÜÖÂ≠òÊó∂ÂèëÁé∞Á©∫Èó¥‰∏çË∂≥Êó∂ÔºåÂ∞±ÈúÄË¶ÅÂÜçÊ¨°ÂèëËµ∑Full GCÔºåËÄåÊ≠§Êó∂CMSÊ≠£Âú®ËøõË°åÊ∏ÖÈô§Â∑•‰ΩúÔºåÂõ†Ê≠§Ê≠§Êó∂Âè™ËÉΩÁî±Serial Old‰∏¥Êó∂ÂØπËÄÅÂπ¥‰ª£ËøõË°å‰∏ÄÊ¨°Full GC„ÄÇ ‰ΩøÁî®‚ÄúÊ†áËÆ∞-Ê∏ÖÈô§‚ÄùÁÆóÊ≥ï‰∫ßÁîüÁ¢éÁâáÁ©∫Èó¥ Áî±‰∫éCMS‰ΩøÁî®‰∫Ü‚ÄúÊ†áËÆ∞-Ê∏ÖÈô§‚ÄùÁÆóÊ≥ïÔºå Âõ†Ê≠§Ê∏ÖÈô§‰πãÂêé‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑÁ¢éÁâáÁ©∫Èó¥Ôºå‰∏çÂà©‰∫éÁ©∫Èó¥Âà©Áî®Áéá„ÄÇ‰∏çËøáCMSÊèê‰æõ‰∫ÜÂ∫îÂØπÁ≠ñÁï•Ôºö ÂºÄÂêØ-XX:+UseCMSCompactAtFullCollection ÂºÄÂêØËØ•ÂèÇÊï∞ÂêéÔºåÊØèÊ¨°FullGCÂÆåÊàêÂêéÈÉΩ‰ºöËøõË°å‰∏ÄÊ¨°ÂÜÖÂ≠òÂéãÁº©Êï¥ÁêÜÔºåÂ∞ÜÈõ∂Êï£Âú®ÂêÑÂ§ÑÁöÑÂØπË±°Êï¥ÁêÜÂà∞‰∏ÄÂùóÂÑø„ÄÇ‰ΩÜÊØèÊ¨°ÈÉΩÊï¥ÁêÜÊïàÁéá‰∏çÈ´òÔºåÂõ†Ê≠§Êèê‰æõ‰∫Ü‰ª•‰∏ãÂèÇÊï∞„ÄÇ ËÆæÁΩÆÂèÇÊï∞-XX:CMSFullGCsBeforeCompaction Êú¨ÂèÇÊï∞ÂëäËØâCMSÔºåÁªèËøá‰∫ÜNÊ¨°Full GCËøáÂêéÂÜçËøõË°å‰∏ÄÊ¨°ÂÜÖÂ≠òÊï¥ÁêÜ„ÄÇ ÈÄöÁî®ÂûÉÂúæÊî∂ÈõÜÂô®--G1ÂûÉÂúæÊî∂ÈõÜÂô® G1ÁöÑÁâπÁÇπ ËøΩÊ±ÇÂÅúÈ°øÊó∂Èó¥ Â§öÁ∫øÁ®ãGC Èù¢ÂêëÊúçÂä°Á´ØÂ∫îÁî® Ê†áËÆ∞-Êï¥ÁêÜÂíåÂ§çÂà∂ÁÆóÊ≥ïÂêàÂπ∂‰∏ç‰ºö‰∫ßÁîüÁ¢éÁâáÂÜÖÂ≠ò„ÄÇ ÂèØÂØπÊï¥‰∏™Â†ÜËøõË°åÂûÉÂúæÂõûÊî∂ ÂèØÈ¢ÑÊµãÂÅúÈ°øÊó∂Èó¥ G1ÁöÑÂÜÖÂ≠òÊ®°Âûã G1ÂûÉÂúæÊî∂ÈõÜÂô®Ê≤°ÊúâÊñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÁöÑÊ¶ÇÂøµ‰∫ÜÔºåËÄåÊòØÂ∞ÜÂ†ÜÂàíÂàÜ‰∏∫‰∏ÄÂùóÂùóÁã¨Á´ãÁöÑRegion„ÄÇÂΩìË¶ÅËøõË°åÂûÉÂúæÊî∂ÈõÜÊó∂ÔºåÈ¶ñÂÖà‰º∞ËÆ°ÊØè‰∏™Region‰∏≠ÁöÑÂûÉÂúæÊï∞ÈáèÔºåÊØèÊ¨°ÈÉΩ‰ªéÂûÉÂúæÂõûÊî∂‰ª∑ÂÄºÊúÄÂ§ßÁöÑRegionÂºÄÂßãÂõûÊî∂ÔºåÂõ†Ê≠§ÂèØ‰ª•Ëé∑ÂæóÊúÄÂ§ßÁöÑÂõûÊî∂ÊïàÁéá„ÄÇ Remembered Set ‰∏Ä‰∏™ÂØπË±°ÂíåÂÆÉÂÜÖÈÉ®ÊâÄÂºïÁî®ÁöÑÂØπË±°ÂèØËÉΩ‰∏çÂú®Âêå‰∏Ä‰∏™Region‰∏≠ÔºåÈÇ£‰πàÂΩìÂûÉÂúæÂõûÊî∂Êó∂ÔºåÊòØÂê¶ÈúÄË¶ÅÊâ´ÊèèÊï¥‰∏™Â†ÜÂÜÖÂ≠òÊâçËÉΩÂÆåÊï¥Âú∞ËøõË°å‰∏ÄÊ¨°ÂèØËææÊÄßÂàÜÊûêÔºü ÂΩìÁÑ∂‰∏çÊòØÔºåÊØè‰∏™RegionÈÉΩÊúâ‰∏Ä‰∏™Remembered SetÔºåÁî®‰∫éËÆ∞ÂΩïÊú¨Âå∫Âüü‰∏≠ÊâÄÊúâÂØπË±°ÂºïÁî®ÁöÑÂØπË±°ÊâÄÂú®ÁöÑÂå∫ÂüüÔºå‰ªéËÄåÂú®ËøõË°åÂèØËææÊÄßÂàÜÊûêÊó∂ÔºåÂè™Ë¶ÅÂú®GC ROOTs‰∏≠ÂÜçÂä†‰∏äRemembered SetÂç≥ÂèØÈò≤Ê≠¢ÂØπÊâÄÊúâÂ†ÜÂÜÖÂ≠òÁöÑÈÅçÂéÜ„ÄÇ G1ÂûÉÂúæÊî∂ÈõÜËøáÁ®ã ÂàùÂßãÊ†áËÆ∞ Ê†áËÆ∞‰∏éGC ROOTSÁõ¥Êé•ÂÖ≥ËÅîÁöÑÂØπË±°ÔºåÂÅúÊ≠¢ÊâÄÊúâÁî®Êà∑Á∫øÁ®ãÔºåÂè™ÂêØÂä®‰∏ÄÊù°ÂàùÂßãÊ†áËÆ∞Á∫øÁ®ãÔºåËøô‰∏™ËøáÁ®ãÂæàÂø´„ÄÇ Âπ∂ÂèëÊ†áËÆ∞ ËøõË°åÂÖ®Èù¢ÁöÑÂèØËææÊÄßÂàÜÊûêÔºåÂºÄÂêØ‰∏ÄÊù°Âπ∂ÂèëÊ†áËÆ∞Á∫øÁ®ã‰∏éÁî®Êà∑Á∫øÁ®ãÂπ∂Ë°åÊâßË°å„ÄÇËøô‰∏™ËøáÁ®ãÊØîËæÉÈïø„ÄÇ ÊúÄÁªàÊ†áËÆ∞ Ê†áËÆ∞Âá∫Âπ∂ÂèëÊ†áËÆ∞ËøáÁ®ã‰∏≠Áî®Êà∑Á∫øÁ®ãÊñ∞‰∫ßÁîüÁöÑÂûÉÂúæ„ÄÇÂÅúÊ≠¢ÊâÄÊúâÁî®Êà∑Á∫øÁ®ãÔºåÂπ∂‰ΩøÁî®Â§öÊù°ÊúÄÁªàÊ†áËÆ∞Á∫øÁ®ãÂπ∂Ë°åÊâßË°å„ÄÇ Á≠õÈÄâÂõûÊî∂ ÂõûÊî∂Â∫üÂºÉÁöÑÂØπË±°„ÄÇÊ≠§Êó∂‰πüÈúÄË¶ÅÂÅúÊ≠¢‰∏ÄÂàáÁî®Êà∑Á∫øÁ®ãÔºåÂπ∂‰ΩøÁî®Â§öÊù°Á≠õÈÄâÂõûÊî∂Á∫øÁ®ãÂπ∂Ë°åÊâßË°å„ÄÇ ClassÊñá‰ª∂ÁªìÊûÑ ‰ªÄ‰πàÊòØJVMÁöÑ‚ÄúÊó†ÂÖ≥ÊÄß‚Äù JavaÂÖ∑ÊúâÂπ≥Âè∞Êó†ÂÖ≥ÊÄßÔºå‰πüÂ∞±ÊòØ‰ªª‰ΩïÊìç‰ΩúÁ≥ªÁªüÈÉΩËÉΩËøêË°åJava‰ª£Á†Å„ÄÇ‰πãÊâÄ‰ª•ËÉΩÂÆûÁé∞Ëøô‰∏ÄÁÇπÔºåÊòØÂõ†‰∏∫JavaËøêË°åÂú®ËôöÊãüÊú∫‰πã‰∏äÔºå‰∏çÂêåÁöÑÊìç‰ΩúÁ≥ªÁªüÈÉΩÊã•ÊúâÂêÑËá™ÁöÑJavaËôöÊãüÊú∫ÔºåÂõ†Ê≠§JavaËÉΩÂÆûÁé∞‚Äú‰∏ÄÊ¨°ÁºñÂÜôÔºåÂ§ÑÂ§ÑËøêË°å‚Äù„ÄÇ ËÄåJVM‰∏ç‰ªÖÂÖ∑ÊúâÂπ≥Âè∞Êó†ÂÖ≥ÊÄßÔºåËøòÂÖ∑ÊúâËØ≠Ë®ÄÊó†ÂÖ≥ÊÄß„ÄÇ Âπ≥Âè∞Êó†ÂÖ≥ÊÄßÊòØÊåá‰∏çÂêåÊìç‰ΩúÁ≥ªÁªüÈÉΩÊúâÂêÑËá™ÁöÑJVMÔºåËÄåËØ≠Ë®ÄÊó†ÂÖ≥ÊÄßÊòØÊåáJavaËôöÊãüÊú∫ËÉΩËøêË°åÈô§Java‰ª•Â§ñÁöÑ‰ª£Á†ÅÔºÅ ËøôÂê¨Ëµ∑Êù•ÈùûÂ∏∏ÊÉä‰∫∫Ôºå‰ΩÜJVMÂØπËÉΩËøêË°åÁöÑËØ≠Ë®ÄÊòØÊúâ‰∏•Ê†ºË¶ÅÊ±ÇÁöÑ„ÄÇÈ¶ñÂÖàÊù•‰∫ÜËß£‰∏ãJava‰ª£Á†ÅÁöÑËøêË°åËøáÁ®ã„ÄÇ JavaÊ∫ê‰ª£Á†ÅÈ¶ñÂÖàÈúÄË¶Å‰ΩøÁî®JavacÁºñËØëÂô®ÁºñËØëÊàêclassÊñá‰ª∂ÔºåÁÑ∂ÂêéÂêØÂä®JVMÊâßË°åclassÊñá‰ª∂Ôºå‰ªéËÄåÁ®ãÂ∫èÂºÄÂßãËøêË°å„ÄÇ ‰πüÂ∞±ÊòØJVMÂè™ËÆ§ËØÜclassÊñá‰ª∂ÔºåÂÆÉÂπ∂‰∏çÁÆ°‰ΩïÁßçËØ≠Ë®ÄÁîüÊàê‰∫ÜclassÊñá‰ª∂ÔºåÂè™Ë¶ÅclassÊñá‰ª∂Á¨¶ÂêàJVMÁöÑËßÑËåÉÂ∞±ËÉΩËøêË°å„ÄÇ Âõ†Ê≠§ÁõÆÂâçÂ∑≤ÁªèÊúâScala„ÄÅJRuby„ÄÅJythonÁ≠âËØ≠Ë®ÄËÉΩÂ§üÂú®JVM‰∏äËøêË°å„ÄÇÂÆÉ‰ª¨ÊúâÂêÑËá™ÁöÑËØ≠Ê≥ïËßÑÂàôÔºå‰∏çËøáÂÆÉ‰ª¨ÁöÑÁºñËØëÂô®ÈÉΩËÉΩÂ∞ÜÂêÑËá™ÁöÑÊ∫êÁ†ÅÁºñËØëÊàêÁ¨¶ÂêàJVMËßÑËåÉÁöÑclassÊñá‰ª∂Ôºå‰ªéËÄåËÉΩÂ§üÂÄüÂä©JVMËøêË°åÂÆÉ‰ª¨„ÄÇ ClassÊñá‰ª∂Âü∫Êú¨ÁªÑÁªáÁªìÊûÑ classÊñá‰ª∂ÊòØ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÂÆÉÁöÑÂÜÖÂÆπÂÖ∑Êúâ‰∏•Ê†ºÁöÑËßÑËåÉÔºåÊñá‰ª∂‰∏≠Ê≤°Êúâ‰ªª‰ΩïÁ©∫Ê†ºÔºåÂÖ®ÊòØËøûÁª≠ÁöÑ0/1„ÄÇclassÊñá‰ª∂‰∏≠ÁöÑÊâÄÊúâÂÜÖÂÆπË¢´ÂàÜ‰∏∫‰∏§ÁßçÁ±ªÂûãÔºöÊó†Á¨¶Âè∑Êï∞ Âíå Ë°®„ÄÇ Êó†Á¨¶Âè∑Êï∞ ÂÆÉË°®Á§∫classÊñá‰ª∂‰∏≠ÁöÑÂÄºÔºåËøô‰∫õÂÄºÊ≤°Êúâ‰ªª‰ΩïÁ±ªÂûãÔºå‰ΩÜÊúâ‰∏çÂêåÁöÑÈïøÂ∫¶„ÄÇÊ†πÊçÆËøô‰∫õÂÄºÈïøÂ∫¶ÁöÑ‰∏çÂêåÂàÜ‰∏∫Ôºöu1„ÄÅu2„ÄÅu4„ÄÅu8ÔºåÂàÜÂà´‰ª£Ë°®1Â≠óËäÇÁöÑÊó†Á¨¶Âè∑Êï∞„ÄÅ2Â≠óËäÇÁöÑÊó†Á¨¶Âè∑Êï∞„ÄÅ4Â≠óËäÇÁöÑÊó†Á¨¶Âè∑Êï∞„ÄÅ8Â≠óËäÇÁöÑÊó†Á¨¶Âè∑Êï∞„ÄÇ Ë°® classÊñá‰ª∂‰∏≠ÊâÄÊúâÊï∞ÊçÆ(Âç≥Êó†Á¨¶Âè∑Êï∞)Ë¶Å‰πàÂçïÁã¨Â≠òÂú®ÔºåË¶Å‰πàÁî±Â§ö‰∏™Êó†Á¨¶Âè∑Êï∞ÁªÑÊàê‰∫åÁª¥Ë°®„ÄÇÂç≥classÊñá‰ª∂‰∏≠ÁöÑÊï∞ÊçÆË¶Å‰πàÊòØÂçï‰∏™ÂÄºÔºåË¶Å‰πàÊòØ‰∫åÁª¥Ë°®„ÄÇ È≠îÊï∞(magic) ÊâÄÊúâÁöÑÁî±JavaÁºñËØëÂô®ÁºñËØëËÄåÊàêÁöÑclassÊñá‰ª∂ÁöÑÂâç4‰∏™Â≠óËäÇÈÉΩÊòØ‚Äú0xCAFEBABE‚Äù ÂÆÉÁöÑ‰ΩúÁî®Âú®‰∫éÔºöÂΩìJVMÂú®Â∞ùËØïÂä†ËΩΩÊüê‰∏™Êñá‰ª∂Âà∞ÂÜÖÂ≠ò‰∏≠Êù•ÁöÑÊó∂ÂÄôÔºå‰ºöÈ¶ñÂÖàÂà§Êñ≠Ê≠§classÊñá‰ª∂ÊúâÊ≤°ÊúâJVMËÆ§‰∏∫ÂèØ‰ª•Êé•ÂèóÁöÑ‚ÄúÁ≠æÂêç‚ÄùÔºåÂç≥JVM‰ºöÈ¶ñÂÖàËØªÂèñÊñá‰ª∂ÁöÑÂâç4‰∏™Â≠óËäÇÔºåÂà§Êñ≠ËØ•4‰∏™Â≠óËäÇÊòØÂê¶ÊòØ‚Äú0xCAFEBABE‚ÄùÔºåÂ¶ÇÊûúÊòØÔºåÂàôJVM‰ºöËÆ§‰∏∫ÂèØ‰ª•Â∞ÜÊ≠§Êñá‰ª∂ÂΩì‰ΩúclassÊñá‰ª∂Êù•Âä†ËΩΩÂπ∂‰ΩøÁî®„ÄÇ ÁâàÊú¨Âè∑(minor_version,major_version) Á¥ßÊé•ÁùÄÈ≠îÊï∞ÁöÑ4‰∏™Â≠óËäÇÊòØÁâàÊú¨Âè∑„ÄÇÂÆÉË°®Á§∫Êú¨class‰∏≠‰ΩøÁî®ÁöÑÊòØÂì™‰∏™ÁâàÊú¨ÁöÑJDK„ÄÇ ‰∏ªÁâàÊú¨Âè∑ÂíåÊ¨°ÁâàÊú¨Âè∑Âú®classÊñá‰ª∂‰∏≠ÂêÑÂç†‰∏§‰∏™Â≠óËäÇÔºåÂâØÁâàÊú¨Âè∑Âç†Áî®Á¨¨5„ÄÅ6‰∏§‰∏™Â≠óËäÇÔºåËÄå‰∏ªÁâàÊú¨Âè∑ÂàôÂç†Áî®Á¨¨7Ôºå8‰∏§‰∏™Â≠óËäÇ„ÄÇJDK1.0ÁöÑ‰∏ªÁâàÊú¨Âè∑‰∏∫45Ôºå‰ª•ÂêéÁöÑÊØè‰∏™Êñ∞‰∏ªÁâàÊú¨ÈÉΩ‰ºöÂú®ÂéüÂÖàÁâàÊú¨ÁöÑÂü∫Á°Ä‰∏äÂä†1„ÄÇËã•Áé∞Âú®‰ΩøÁî®ÁöÑÊòØJDK1.7ÁºñËØëÂá∫Êù•ÁöÑclassÊñá‰ª∂ÔºåÂàôÁõ∏Â∫îÁöÑ‰∏ªÁâàÊú¨Âè∑Â∫îËØ•ÊòØ51,ÂØπÂ∫îÁöÑ7Ôºå8‰∏™Â≠óËäÇÁöÑÂçÅÂÖ≠ËøõÂà∂ÁöÑÂÄºÂ∫îËØ•ÊòØ 0x33„ÄÇ ‰∏Ä‰∏™ JVMÂÆû‰æãÂè™ËÉΩÊîØÊåÅÁâπÂÆöËåÉÂõ¥ÂÜÖÁöÑ‰∏ªÁâàÊú¨Âè∑ ÔºàMi Ëá≥MjÔºâ Âíå 0 Ëá≥ÁâπÂÆöËåÉÂõ¥ÂÜÖ Ôºà0 Ëá≥ mÔºâ ÁöÑÂâØÁâàÊú¨Âè∑„ÄÇÂÅáËÆæ‰∏Ä‰∏™ Class Êñá‰ª∂ÁöÑÊ†ºÂºèÁâàÊú¨Âè∑‰∏∫ VÔºå ‰ªÖÂΩìMi.0 ‚â§ v ‚â§ Mj.mÊàêÁ´ãÊó∂ÔºåËøô‰∏™ Class Êñá‰ª∂ÊâçÂèØ‰ª•Ë¢´Ê≠§ Java ËôöÊãüÊú∫ÊîØÊåÅ„ÄÇ‰∏çÂêåÁâàÊú¨ÁöÑ Java ËôöÊãüÊú∫ÂÆûÁé∞ÊîØÊåÅÁöÑÁâàÊú¨Âè∑‰πü‰∏çÂêåÔºåÈ´òÁâàÊú¨Âè∑ÁöÑ Java ËôöÊãüÊú∫ÂÆûÁé∞ÂèØ‰ª•ÊîØÊåÅ‰ΩéÁâàÊú¨Âè∑ÁöÑ Class Êñá‰ª∂ÔºåÂèç‰πãÂàô‰∏çÊàêÁ´ã„ÄÇ JVMÂú®Âä†ËΩΩclassÊñá‰ª∂ÁöÑÊó∂ÂÄôÔºå‰ºöËØªÂèñÂá∫‰∏ªÁâàÊú¨Âè∑ÔºåÁÑ∂ÂêéÊØîËæÉËøô‰∏™classÊñá‰ª∂ÁöÑ‰∏ªÁâàÊú¨Âè∑ÂíåJVMÊú¨Ë∫´ÁöÑÁâàÊú¨Âè∑ÔºåÂ¶ÇÊûúJVMÊú¨Ë∫´ÁöÑÁâàÊú¨Âè∑ &lt; classÊñá‰ª∂ÁöÑÁâàÊú¨Âè∑ÔºåJVM‰ºöËÆ§‰∏∫Âä†ËΩΩ‰∏ç‰∫ÜËøô‰∏™classÊñá‰ª∂Ôºå‰ºöÊäõÂá∫Êàë‰ª¨ÁªèÂ∏∏ËßÅÂà∞ÁöÑ&quot;java.lang.UnsupportedClassVersionError: Bad version number in .class file &quot; Error ÈîôËØØÔºõÂèç‰πãÔºåJVM‰ºöËÆ§‰∏∫ÂèØ‰ª•Âä†ËΩΩÊ≠§classÊñá‰ª∂ÔºåÁªßÁª≠Âä†ËΩΩÊ≠§classÊñá‰ª∂„ÄÇ Â∏∏ÈáèÊ±†(constant_pool) ‰ªÄ‰πàÊòØÂ∏∏ÈáèÊ±† Á¥ßÊé•ÁùÄÁâàÊú¨Âè∑‰πãÂêéÁöÑÂ∞±ÊòØÂ∏∏ÈáèÊ±†„ÄÇÂ∏∏ÈáèÊ±†‰∏≠Â≠òÊîæ‰∏§ÁßçÁ±ªÂûãÁöÑÂ∏∏ÈáèÔºö Â≠óÈù¢ÂÄºÂ∏∏Èáè Â≠óÈù¢ÂÄºÂ∏∏ÈáèÂç≥Êàë‰ª¨Âú®Á®ãÂ∫è‰∏≠ÂÆö‰πâÁöÑÂ≠óÁ¨¶‰∏≤„ÄÅË¢´final‰øÆÈ•∞ÁöÑÂÄº„ÄÇ Á¨¶Âè∑ÂºïÁî® Á¨¶Âè∑ÂºïÁî®Â∞±ÊòØÊàë‰ª¨ÂÆö‰πâÁöÑÂêÑÁßçÂêçÂ≠óÔºö Á±ªÂíåÊé•Âè£ÁöÑÂÖ®ÈôêÂÆöÂêç Â≠óÊÆµÁöÑÂêçÂ≠ó Âíå ÊèèËø∞Á¨¶ ÊñπÊ≥ïÁöÑÂêçÂ≠ó Âíå ÊèèËø∞Á¨¶ Â∏∏ÈáèÊ±†ÁöÑÁâπÁÇπ Â∏∏ÈáèÊ±†ÈïøÂ∫¶‰∏çÂõ∫ÂÆö Â∏∏ÈáèÊ±†ÁöÑÂ§ßÂ∞èÊòØ‰∏çÂõ∫ÂÆöÁöÑÔºåÂõ†Ê≠§Â∏∏ÈáèÊ±†ÂºÄÂ§¥ÊîæÁΩÆ‰∏Ä‰∏™u2Á±ªÂûãÁöÑÊó†Á¨¶Âè∑Êï∞ÔºåÁî®Êù•Â≠òÂÇ®ÂΩìÂâçÂ∏∏ÈáèÊ±†ÁöÑÂÆπÈáè„ÄÇJVMÊ†πÊçÆËøô‰∏™ÂÄºÂ∞±Áü•ÈÅìÂ∏∏ÈáèÊ±†ÁöÑÂ§¥Â∞æÊù•„ÄÇ Ê≥®ÔºöËøô‰∏™ÂÄºÊòØ‰ªé1ÂºÄÂßãÁöÑÔºåËã•‰∏∫5Ë°®Á§∫Ê±†‰∏≠Êúâ4‰∏™Â∏∏Èáè„ÄÇ Â∏∏ÈáèÊ±†‰∏≠ÁöÑÂ∏∏ÈáèÁî±ËÄå‰∏∫Ë°®Êù•Ë°®Á§∫ Â∏∏ÈáèÊ±†ÂºÄÂ§¥Êúâ‰∏™Â∏∏ÈáèÊ±†ÂÆπÈáèËÆ°Êï∞Âô®ÔºåÊé•‰∏ãÊù•Â∞±ÂÖ®ÊòØ‰∏Ä‰∏™‰∏™Â∏∏Èáè‰∫ÜÔºåÂè™‰∏çËøáÂ∏∏ÈáèÈÉΩÊòØÁî±‰∏ÄÂº†Âº†‰∫åÁª¥Ë°®ÊûÑÊàêÔºåÈô§‰∫ÜËÆ∞ÂΩïÂ∏∏ÈáèÁöÑÂÄº‰ª•Â§ñÔºåËøòËÆ∞ÂΩïÂΩìÂâçÂ∏∏ÈáèÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇ Â∏∏ÈáèÊ±†ÊòØclassÊñá‰ª∂ÁöÑËµÑÊ∫ê‰ªìÂ∫ì Â∏∏ÈáèÊ±†ÊòØ‰∏éÊú¨class‰∏≠ÂÖ∂ÂÆÉÈÉ®ÂàÜÂÖ≥ËÅîÊúÄÂ§öÁöÑÈÉ®ÂàÜ Â∏∏ÈáèÊ±†ÊòØclassÊñá‰ª∂‰∏≠Á©∫Èó¥Âç†Áî®ÊúÄÂ§ßÁöÑÈÉ®ÂàÜ‰πã‰∏Ä Â∏∏ÈáèÊ±†‰∏≠Â∏∏ÈáèÁöÑÁ±ªÂûã ÂàöÊâç‰ªãÁªç‰∫ÜÔºåÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÂ∏∏ÈáèÂ§ß‰Ωì‰∏äÂàÜ‰∏∫ÔºöÂ≠óÈù¢ÂÄºÂ∏∏Èáè Âíå Á¨¶Âè∑ÂºïÁî®„ÄÇÂú®Ê≠§Âü∫Á°Ä‰∏äÔºåÊ†πÊçÆÂ∏∏ÈáèÁöÑÊï∞ÊçÆÁ±ªÂûã‰∏çÂêåÔºåÂèàÂèØ‰ª•Ë¢´ÁªÜÂàÜ‰∏∫14ÁßçÂ∏∏ÈáèÁ±ªÂûã„ÄÇËøô14ÁßçÂ∏∏ÈáèÁ±ªÂûãÈÉΩÊúâÂêÑËá™ÁöÑ‰∫åÁª¥Ë°®Á§∫ÁªìÊûÑ„ÄÇÊØèÁßçÂ∏∏ÈáèÁ±ªÂûãÁöÑÂ§¥1‰∏™Â≠óËäÇÈÉΩÊòØtagÔºåÁî®‰∫éË°®Á§∫ÂΩìÂâçÂ∏∏ÈáèÂ±û‰∫é14ÁßçÁ±ªÂûã‰∏≠ÁöÑÂì™‰∏Ä‰∏™„ÄÇ ‰ª•CONSTANT_Class_infoÂ∏∏Èáè‰∏∫‰æãÔºåÂÆÉÁöÑ‰∫åÁª¥Ë°®Á§∫ÁªìÊûÑÂ¶Ç‰∏ãÔºö Á±ªÂûã ÂêçÁß∞ Êï∞Èáè u1 tag 1 u2 length 1 tagË°®Á§∫ÂΩìÂâçÂ∏∏ÈáèÁöÑÁ±ªÂûã(ÂΩìÂâçÂ∏∏Èáè‰∏∫CONSTANT_Class_infoÔºåÂõ†Ê≠§tagÁöÑÂÄºÂ∫î‰∏∫7ÔºåË°®Á§∫‰∏Ä‰∏™Á±ªÊàñÊé•Âè£ÁöÑÂÖ®ÈôêÂÆöÂêç)Ôºõ name_indexË°®Á§∫Ëøô‰∏™Á±ªÊàñÊé•Âè£ÂÖ®ÈôêÂÆöÂêçÁöÑ‰ΩçÁΩÆ„ÄÇÂÆÉÁöÑÂÄºË°®Á§∫ÊåáÂêëÂ∏∏ÈáèÊ±†ÁöÑÁ¨¨Âá†‰∏™Â∏∏Èáè„ÄÇÂÆÉ‰ºöÊåáÂêë‰∏Ä‰∏™CONSTANT_Utf8_infoÁ±ªÂûãÁöÑÂ∏∏ÈáèÔºåÂÆÉÁöÑ‰∫åÁª¥Ë°®ÁªìÊûÑÂ¶Ç‰∏ãÔºö Á±ªÂûã ÂêçÁß∞ Êï∞Èáè u1 tag 1 u2 length 1 u1 bytes length CONSTANT_Utf8_infoË°®Á§∫Â≠óÁ¨¶‰∏≤Â∏∏ÈáèÔºõ tagË°®Á§∫ÂΩìÂâçÂ∏∏ÈáèÁöÑÁ±ªÂûãÔºåËøôÈáåÂ∫îËØ•ÊòØ1Ôºõ lengthË°®Á§∫Ëøô‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶Ôºõ bytes‰∏∫Ëøô‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÂÜÖÂÆπ(ÈááÁî®Áº©Áï•ÁöÑUTF8ÁºñÁ†Å) ‰∏∫‰ªÄ‰πàJava‰∏≠ÂÆö‰πâÁöÑÁ±ª„ÄÅÂèòÈáèÂêçÂ≠óÂøÖÈ°ªÂ∞è‰∫é64K Á±ª„ÄÅÊé•Âè£„ÄÅÂèòÈáèÁ≠âÂêçÂ≠óÈÉΩÂ±û‰∫éÁ¨¶Âè∑ÂºïÁî®ÔºåÂÆÉ‰ª¨ÈÉΩÂ≠òÂÇ®Âú®Â∏∏ÈáèÊ±†‰∏≠„ÄÇËÄå‰∏çÁÆ°Âì™ÁßçÁ¨¶Âè∑ÂºïÁî®ÔºåÂÆÉ‰ª¨ÁöÑÂêçÂ≠óÈÉΩÁî±CONSTANT_Utf8_infoÁ±ªÂûãÁöÑÂ∏∏ÈáèË°®Á§∫ÔºåËøôÁßçÁ±ªÂûãÁöÑÂ∏∏Èáè‰ΩøÁî®u2Â≠òÂÇ®Â≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶„ÄÇÁî±‰∫é2Â≠óËäÇÊúÄÂ§öËÉΩË°®Á§∫65535‰∏™Êï∞ÔºåÂõ†Ê≠§Ëøô‰∫õÂêçÂ≠óÁöÑÊúÄÂ§ßÈïøÂ∫¶ÊúÄÂ§öÂè™ËÉΩÊòØ64K„ÄÇ ËÆøÈóÆÊ†áÂøó(access_flags) Âú®Â∏∏ÈáèÊ±†‰πãÂêéÊòØ2Â≠óËäÇÁöÑËÆøÈóÆÊ†áÂøó„ÄÇËÆøÈóÆÊ†áÂøóÊòØÁî®Êù•Ë°®Á§∫Ëøô‰∏™classÊñá‰ª∂ÊòØÁ±ªËøòÊòØÊé•Âè£„ÄÅÊòØÂê¶Ë¢´public‰øÆÈ•∞„ÄÅÊòØÂê¶Ë¢´abstract‰øÆÈ•∞„ÄÅÊòØÂê¶Ë¢´final‰øÆÈ•∞Á≠â„ÄÇ Áî±‰∫éËøô‰∫õÊ†áÂøóÈÉΩÁî±ÊòØ/Âê¶Ë°®Á§∫ÔºåÂõ†Ê≠§ÂèØ‰ª•Áî®0/1Ë°®Á§∫„ÄÇ ËÆøÈóÆÊ†áÂøó‰∏∫2Â≠óËäÇÔºåÂèØ‰ª•Ë°®Á§∫16‰ΩçÊ†áÂøóÔºå‰ΩÜJVMÁõÆÂâçÂè™ÂÆö‰πâ‰∫Ü8ÁßçÔºåÊú™ÂÆö‰πâÁöÑÁõ¥Êé•ÂÜô0. Á±ªÁ¥¢Âºï(this_class) Á±ªÁ¥¢ÂºïÔºåthis_classÁöÑÂÄºÂøÖÈ°ªÊòØÂØπconstant_poolË°®‰∏≠È°πÁõÆÁöÑ‰∏Ä‰∏™ÊúâÊïàÁ¥¢ÂºïÂÄº„ÄÇconstant_poolË°®Âú®Ëøô‰∏™Á¥¢ÂºïÂ§ÑÁöÑÈ°πÂøÖÈ°ª‰∏∫CONSTANT_Class_info Á±ªÂûãÂ∏∏ÈáèÔºåË°®Á§∫Ëøô‰∏™ Class Êñá‰ª∂ÊâÄÂÆö‰πâÁöÑÁ±ªÊàñÊé•Âè£„ÄÇ Áà∂Á±ªÁ¥¢Âºï(super_class) Áà∂Á±ªÁ¥¢ÂºïÔºåÂØπ‰∫éÁ±ªÊù•ËØ¥Ôºåsuper_class ÁöÑÂÄºÂøÖÈ°ª‰∏∫ 0 ÊàñËÄÖÊòØÂØπconstant_pool Ë°®‰∏≠È°πÁõÆÁöÑ‰∏Ä‰∏™ÊúâÊïàÁ¥¢ÂºïÂÄº„ÄÇÂ¶ÇÊûúÂÆÉÁöÑÂÄº‰∏ç‰∏∫ 0ÔºåÈÇ£ constant_pool Ë°®Âú®Ëøô‰∏™Á¥¢ÂºïÂ§ÑÁöÑÈ°πÂøÖÈ°ª‰∏∫CONSTANT_Class_info Á±ªÂûãÂ∏∏ÈáèÔºåË°®Á§∫Ëøô‰∏™ Class Êñá‰ª∂ÊâÄÂÆö‰πâÁöÑÁ±ªÁöÑÁõ¥Êé•Áà∂Á±ª„ÄÇÂΩìÂâçÁ±ªÁöÑÁõ¥Êé•Áà∂Á±ªÔºå‰ª•ÂèäÂÆÉÊâÄÊúâÈó¥Êé•Áà∂Á±ªÁöÑaccess_flag ‰∏≠ÈÉΩ‰∏çËÉΩÂ∏¶ÊúâACC_FINAL Ê†áËÆ∞„ÄÇÂØπ‰∫éÊé•Âè£Êù•ËØ¥ÔºåÂÆÉÁöÑClassÊñá‰ª∂ÁöÑsuper_classÈ°πÁöÑÂÄºÂøÖÈ°ªÊòØÂØπconstant_poolË°®‰∏≠È°πÁõÆÁöÑ‰∏Ä‰∏™ÊúâÊïàÁ¥¢ÂºïÂÄº„ÄÇconstant_poolË°®Âú®Ëøô‰∏™Á¥¢ÂºïÂ§ÑÁöÑÈ°πÂøÖÈ°ª‰∏∫‰ª£Ë°® java.lang.Object ÁöÑ CONSTANT_Class_info Á±ªÂûãÂ∏∏Èáè „ÄÇÂ¶ÇÊûú Class Êñá‰ª∂ÁöÑ super_classÁöÑÂÄº‰∏∫ 0ÔºåÈÇ£Ëøô‰∏™ClassÊñá‰ª∂Âè™ÂèØËÉΩÊòØÂÆö‰πâÁöÑÊòØjava.lang.ObjectÁ±ªÔºåÂè™ÊúâÂÆÉÊòØÂîØ‰∏ÄÊ≤°ÊúâÁà∂Á±ªÁöÑÁ±ª„ÄÇ Êé•Âè£ËÆ°Êï∞Âô®(interfaces_count) Êé•Âè£ËÆ°Êï∞Âô®Ôºåinterfaces_countÁöÑÂÄºË°®Á§∫ÂΩìÂâçÁ±ªÊàñÊé•Âè£ÁöÑÁõ¥Êé•Áà∂Êé•Âè£Êï∞Èáè„ÄÇ Êé•Âè£‰ø°ÊÅØÊï∞ÊçÆÂå∫(interfaces[interfaces_count]) Êé•Âè£Ë°®Ôºåinterfaces[]Êï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏™ÊàêÂëòÁöÑÂÄºÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÂØπconstant_poolË°®‰∏≠È°πÁõÆÁöÑ‰∏Ä‰∏™ÊúâÊïàÁ¥¢ÂºïÂÄºÔºå ÂÆÉÁöÑÈïøÂ∫¶‰∏∫ interfaces_count„ÄÇÊØè‰∏™ÊàêÂëò interfaces[i] ÂøÖÈ°ª‰∏∫ CONSTANT_Class_infoÁ±ªÂûãÂ∏∏ÈáèÔºåÂÖ∂‰∏≠ 0 ‚â§ i &lt;interfaces_count„ÄÇÂú®interfaces[]Êï∞ÁªÑ‰∏≠ÔºåÊàêÂëòÊâÄË°®Á§∫ÁöÑÊé•Âè£È°∫Â∫èÂíåÂØπÂ∫îÁöÑÊ∫ê‰ª£Á†Å‰∏≠ÁªôÂÆöÁöÑÊé•Âè£È°∫Â∫èÔºà‰ªéÂ∑¶Ëá≥Âè≥Ôºâ‰∏ÄÊ†∑ÔºåÂç≥interfaces[0]ÂØπÂ∫îÁöÑÊòØÊ∫ê‰ª£Á†Å‰∏≠ÊúÄÂ∑¶ËæπÁöÑÊé•Âè£„ÄÇ Â≠óÊÆµË°®ÁöÑÈõÜÂêà ‰ªÄ‰πàÊòØÂ≠óÊÆµË°®ÈõÜÂêà Â≠óÊÆµË°®ÈõÜÂêàÁî®‰∫éÂ≠òÂÇ®Êú¨Á±ªÊâÄÊ∂âÂèäÂà∞ÁöÑÊàêÂëòÂèòÈáèÔºåÂåÖÊã¨ÂÆû‰æãÂèòÈáèÂíåÁ±ªÂèòÈáèÔºå‰ΩÜ‰∏çÂåÖÊã¨ÊñπÊ≥ï‰∏≠ÁöÑÂ±ÄÈÉ®ÂèòÈáè„ÄÇ ÊØè‰∏Ä‰∏™Â≠óÊÆµË°®Âè™Ë°®Á§∫‰∏Ä‰∏™ÊàêÂëòÂèòÈáèÔºåÊú¨Á±ª‰∏≠ÊâÄÊúâÁöÑÊàêÂëòÂèòÈáèÊûÑÊàê‰∫ÜÂ≠óÊÆµË°®ÈõÜÂêà„ÄÇ ÊèèËø∞‰∏Ä‰∏™Â≠óÊÆµÁöÑ‰ø°ÊÅØÂåÖÊã¨ÔºöÂ≠óÊÆµÁöÑ‰ΩúÁî®ÂüüÔºàpublic„ÄÅprotected„ÄÅprivateÔºâ„ÄÅÂÆû‰æãÂèòÈáè‰∏éÂê¶ÔºàstaticÔºâ„ÄÅÂèØÂèòÊÄßÔºàfinalÔºâ„ÄÅÂπ∂ÂèëÂèØËßÅÊÄßÔºàvolatileÔºâ„ÄÅÂèØÂê¶Ë¢´Â∫èÂàóÂåñÔºàtransientÔºâ„ÄÅÂ≠óÊÆµÊï∞ÊçÆÁ±ªÂûãÔºàÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûã„ÄÅÂØπË±°„ÄÅÊï∞ÁªÑÔºâ„ÄÅÂ≠óÊÆµÂêçÁß∞„ÄÇËÄåÂ≠óÊÆµÂè´‰ªÄ‰πàÂêçÂ≠óÔºåÂ≠óÊÆµË¢´ÂÆö‰πâ‰∏∫‰ªÄ‰πàÊï∞ÊçÆÁ±ªÂûãÔºåËøô‰∫õÈÉΩÊòØÊó†Ê≥ïÂõ∫ÂÆöÁöÑÔºåÂè™ËÉΩÂºïÁî®Â∏∏ÈáèÊ±†‰∏≠ÁöÑÂ∏∏ÈáèÊù•ÊèèËø∞„ÄÇ Â≠óÊÆµË°®ÁªìÊûÑÁöÑÂÆö‰πâ Á±ªÂûã ÂêçÁß∞ Êï∞Èáè u2 access_flags 1 u2 name_index 1 u2 descriptor_index 1 u2 attributes_count 1 attribute_info attributes attributes_count access_flags Â≠óÊÆµÁöÑËÆøÈóÆÊ†áÂøó„ÄÇÂú®Java‰∏≠ÔºåÊØè‰∏™ÊàêÂëòÂèòÈáèÈÉΩÊúâ‰∏ÄÁ≥ªÂàóÁöÑ‰øÆÈ•∞Á¨¶ÔºåÂíå‰∏äËø∞classÊñá‰ª∂ÁöÑËÆøÈóÆÊ†áÂøóÁöÑ‰ΩúÁî®‰∏ÄÊ†∑ÔºåÂè™‰∏çËøáÊàêÂëòÂèòÈáèÁöÑËÆøÈóÆÊ†áÂøó‰∏éÁ±ªÁöÑËÆøÈóÆÊ†áÂøóÁ®çÊúâÂå∫Âà´„ÄÇ name_index Êú¨Â≠óÊÆµÂêçÂ≠óÁöÑÁ¥¢Âºï„ÄÇÊåáÂêë‰∏Ä‰∏™CONSTANT_Class_infoÁ±ªÂûãÁöÑÂ∏∏ÈáèÔºåËøôÈáåÈù¢Â≠òÂÇ®‰∫ÜÊú¨Â≠óÊÆµÁöÑÂêçÂ≠óÁ≠â‰ø°ÊÅØ„ÄÇ descriptor_index ÊèèËø∞Á¨¶„ÄÇÁî®‰∫éÊèèËø∞Êú¨Â≠óÊÆµÂú®Java‰∏≠ÁöÑÊï∞ÊçÆÁ±ªÂûãÁ≠â‰ø°ÊÅØ(‰∏ãÈù¢ËØ¶ÁªÜ‰ªãÁªç) attributes_count Â±ûÊÄßË°®ÈõÜÂêàÁöÑÈïøÂ∫¶„ÄÇ attributes Â±ûÊÄßË°®ÈõÜÂêà„ÄÇÂà∞descriptor_index‰∏∫Ê≠¢ÊòØÂ≠óÊÆµË°®ÁöÑÂõ∫ÂÆö‰ø°ÊÅØÔºåÂÖâÊúâ‰∏äËø∞‰ø°ÊÅØÂèØËÉΩÊó†Ê≥ïÂÆåÊï¥Âú∞ÊèèËø∞‰∏Ä‰∏™Â≠óÊÆµÔºåÂõ†Ê≠§Áî®Â±ûÊÄßË°®ÈõÜÂêàÊù•Â≠òÊîæÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØÔºåÊØîÂ¶Ç‰∏Ä‰∏™Â≠óÊÆµÁöÑÂÄº„ÄÇ ‰ªÄ‰πàÊòØÊèèËø∞Á¨¶ ÊàêÂëòÂèòÈáè(ÂåÖÊã¨ÈùôÊÄÅÊàêÂëòÂèòÈáèÂíåÂÆû‰æãÂèòÈáè) Âíå ÊñπÊ≥ïÈÉΩÊúâÂêÑËá™ÁöÑÊèèËø∞Á¨¶„ÄÇ ÂØπ‰∫éÂ≠óÊÆµËÄåË®ÄÔºåÊèèËø∞Á¨¶Áî®‰∫éÊèèËø∞Â≠óÊÆµÁöÑÊï∞ÊçÆÁ±ªÂûãÔºõ ÂØπ‰∫éÊñπÊ≥ïËÄåË®ÄÔºåÊèèËø∞Á¨¶Áî®‰∫éÊèèËø∞Â≠óÊÆµÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÅÂèÇÊï∞ÂàóË°®„ÄÅËøîÂõûÂÄº„ÄÇ Âú®ÊèèËø∞Á¨¶‰∏≠ÔºåÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÁî®Â§ßÂÜôÂ≠óÊØçË°®Á§∫ÔºåÂØπË±°Á±ªÂûãÁî®‚ÄúLÂØπË±°Á±ªÂûãÁöÑÂÖ®ÈôêÂÆöÂêç‚ÄùË°®Á§∫ÔºåÊï∞ÁªÑÁî®‚ÄúÊï∞ÁªÑÁ±ªÂûãÁöÑÂÖ®ÈôêÂÆöÂêç‚ÄùË°®Á§∫„ÄÇ ÊèèËø∞ÊñπÊ≥ïÊó∂ÔºåÂ∞ÜÂèÇÊï∞Ê†πÊçÆ‰∏äËø∞ËßÑÂàôÊîæÂú®()‰∏≠Ôºå()Âè≥‰æßÊåâÁÖß‰∏äËø∞ÊñπÊ≥ïÊîæÁΩÆËøîÂõûÂÄº„ÄÇËÄå‰∏îÔºåÂèÇÊï∞‰πãÈó¥Êó†ÈúÄ‰ªª‰ΩïÁ¨¶Âè∑„ÄÇ Â≠óÊÆµË°®ÈõÜÂêàÁöÑÊ≥®ÊÑèÁÇπ ‰∏Ä‰∏™classÊñá‰ª∂ÁöÑÂ≠óÊÆµË°®ÈõÜÂêà‰∏≠‰∏çËÉΩÂá∫Áé∞‰ªéÁà∂Á±ª/Êé•Âè£ÁªßÊâøËÄåÊù•Â≠óÊÆµÔºõ ‰∏Ä‰∏™classÊñá‰ª∂ÁöÑÂ≠óÊÆµË°®ÈõÜÂêà‰∏≠ÂèØËÉΩ‰ºöÂá∫Áé∞Á®ãÂ∫èÁåøÊ≤°ÊúâÂÆö‰πâÁöÑÂ≠óÊÆµ Â¶ÇÁºñËØëÂô®‰ºöËá™Âä®Âú∞Âú®ÂÜÖÈÉ®Á±ªÁöÑclassÊñá‰ª∂ÁöÑÂ≠óÊÆµË°®ÈõÜÂêà‰∏≠Ê∑ªÂä†Â§ñÈÉ®Á±ªÂØπË±°ÁöÑÊàêÂëòÂèòÈáèÔºå‰æõÂÜÖÈÉ®Á±ªËÆøÈóÆÂ§ñÈÉ®Á±ª„ÄÇ Java‰∏≠Âè™Ë¶Å‰∏§‰∏™Â≠óÊÆµÂêçÂ≠óÁõ∏ÂêåÂ∞±Êó†Ê≥ïÈÄöËøáÁºñËØë„ÄÇ‰ΩÜÂú®JVMËßÑËåÉ‰∏≠ÔºåÂÖÅËÆ∏‰∏§‰∏™Â≠óÊÆµÁöÑÂêçÂ≠óÁõ∏Âêå‰ΩÜÊèèËø∞Á¨¶‰∏çÂêåÁöÑÊÉÖÂÜµÔºåÂπ∂‰∏îËÆ§‰∏∫ÂÆÉ‰ª¨ÊòØ‰∏§‰∏™‰∏çÂêåÁöÑÂ≠óÊÆµ„ÄÇ ÊñπÊ≥ïË°®ÁöÑÈõÜÂêà Âú®classÊñá‰ª∂‰∏≠ÔºåÊâÄÊúâÁöÑÊñπÊ≥ï‰ª•‰∫åÁª¥Ë°®ÁöÑÂΩ¢ÂºèÂ≠òÂÇ®ÔºåÊØèÂº†Ë°®Êù•Ë°®Á§∫‰∏Ä‰∏™ÂáΩÊï∞Ôºå‰∏Ä‰∏™Á±ª‰∏≠ÁöÑÊâÄÊúâÊñπÊ≥ïÊûÑÊàêÊñπÊ≥ïË°®ÁöÑÈõÜÂêà„ÄÇ ÊñπÊ≥ïË°®ÁöÑÁªìÊûÑÂíåÂ≠óÊÆµË°®ÁöÑÁªìÊûÑ‰∏ÄËá¥ÔºåÂè™‰∏çËøáËÆøÈóÆÊ†áÂøóÂíåÂ±ûÊÄßË°®ÈõÜÂêàÁöÑÂèØÈÄâÈ°πÊúâÊâÄ‰∏çÂêå„ÄÇ ÊñπÊ≥ïË°®ÁöÑÂ±ûÊÄßË°®ÈõÜÂêà‰∏≠Êúâ‰∏ÄÂº†CodeÂ±ûÊÄßË°®ÔºåÁî®‰∫éÂ≠òÂÇ®ÂΩìÂâçÊñπÊ≥ïÁªèÁºñËØëÂô®ÁºñËØëËøáÂêéÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§„ÄÇ ÊñπÊ≥ïË°®ÈõÜÂêàÁöÑÊ≥®ÊÑèÁÇπ Â¶ÇÊûúÊú¨classÊ≤°ÊúâÈáçÂÜôÁà∂Á±ªÁöÑÊñπÊ≥ïÔºåÈÇ£‰πàÊú¨classÊñá‰ª∂ÁöÑÊñπÊ≥ïË°®ÈõÜÂêà‰∏≠ÊòØ‰∏ç‰ºöÂá∫Áé∞Áà∂Á±ª/Áà∂Êé•Âè£ÁöÑÊñπÊ≥ïË°®Ôºõ Êú¨classÁöÑÊñπÊ≥ïË°®ÈõÜÂêàÂèØËÉΩÂá∫Áé∞Á®ãÂ∫èÁåøÊ≤°ÊúâÂÆö‰πâÁöÑÊñπÊ≥ï ÁºñËØëÂô®Âú®ÁºñËØëÊó∂‰ºöÂú®classÊñá‰ª∂ÁöÑÊñπÊ≥ïË°®ÈõÜÂêà‰∏≠Âä†ÂÖ•Á±ªÊûÑÈÄ†Âô®ÂíåÂÆû‰æãÊûÑÈÄ†Âô®„ÄÇ ÈáçËΩΩ‰∏Ä‰∏™ÊñπÊ≥ïÈúÄË¶ÅÊúâÁõ∏ÂêåÁöÑÁÆÄÂçïÂêçÁß∞Âíå‰∏çÂêåÁöÑÁâπÂæÅÁ≠æÂêç„ÄÇJVMÁöÑÁâπÂæÅÁ≠æÂêçÂíåJavaÁöÑÁâπÂæÅÁ≠æÂêçÊúâÊâÄ‰∏çÂêåÔºö JavaÁâπÂæÅÁ≠æÂêçÔºöÊñπÊ≥ïÂèÇÊï∞Âú®Â∏∏ÈáèÊ±†‰∏≠ÁöÑÂ≠óÊÆµÁ¨¶Âè∑ÂºïÁî®ÁöÑÈõÜÂêà JVMÁâπÂæÅÁ≠æÂêçÔºöÊñπÊ≥ïÂèÇÊï∞ÔºãËøîÂõûÂÄº Â±ûÊÄßË°® Â±ûÊÄßËÆ°Êï∞Âô®(attributes_count) Â±ûÊÄßËÆ°Êï∞Âô®Ôºåattributes_countÁöÑÂÄºË°®Á§∫ÂΩìÂâç Class Êñá‰ª∂attributesË°®ÁöÑÊàêÂëò‰∏™Êï∞„ÄÇattributesË°®‰∏≠ÊØè‰∏ÄÈ°πÈÉΩÊòØ‰∏Ä‰∏™attribute_info ÁªìÊûÑÁöÑÊï∞ÊçÆÈ°π„ÄÇ Â±ûÊÄß‰ø°ÊÅØÊï∞ÊçÆÂå∫(attributes[attributes_count]) Â±ûÊÄßË°®Ôºåattributes Ë°®ÁöÑÊØè‰∏™È°πÁöÑÂÄºÂøÖÈ°ªÊòØattribute_infoÁªìÊûÑ„ÄÇ Âú®Java 7 ËßÑËåÉÈáåÔºåClassÊñá‰ª∂ÁªìÊûÑ‰∏≠ÁöÑattributesË°®ÁöÑÈ°πÂåÖÊã¨‰∏ãÂàóÂÆö‰πâÁöÑÂ±ûÊÄßÔºö InnerClasses „ÄÅ EnclosingMethod „ÄÅ Synthetic „ÄÅSignature„ÄÅSourceFileÔºåSourceDebugExtension „ÄÅDeprecated„ÄÅRuntimeVisibleAnnotations „ÄÅRuntimeInvisibleAnnotations‰ª•ÂèäBootstrapMethodsÂ±ûÊÄß„ÄÇ ÂØπ‰∫éÊîØÊåÅ Class Êñá‰ª∂Ê†ºÂºèÁâàÊú¨Âè∑‰∏∫ 49.0 ÊàñÊõ¥È´òÁöÑ Java ËôöÊãüÊú∫ÂÆûÁé∞ÔºåÂøÖÈ°ªÊ≠£Á°ÆËØÜÂà´Âπ∂ËØªÂèñattributesË°®‰∏≠ÁöÑSignature„ÄÅRuntimeVisibleAnnotationsÂíåRuntimeInvisibleAnnotationsÂ±ûÊÄß„ÄÇÂØπ‰∫éÊîØÊåÅClassÊñá‰ª∂Ê†ºÂºèÁâàÊú¨Âè∑‰∏∫ 51.0 ÊàñÊõ¥È´òÁöÑ Java ËôöÊãüÊú∫ÂÆûÁé∞ÔºåÂøÖÈ°ªÊ≠£Á°ÆËØÜÂà´Âπ∂ËØªÂèñ attributesË°®‰∏≠ÁöÑBootstrapMethodsÂ±ûÊÄß„ÄÇJava 7 ËßÑËåÉ Ë¶ÅÊ±Ç‰ªª‰∏Ä Java ËôöÊãüÊú∫ÂÆûÁé∞ÂèØ‰ª•Ëá™Âä®ÂøΩÁï• Class Êñá‰ª∂ÁöÑ attributesË°®‰∏≠ÁöÑËã•Âπ≤ ÔºàÁîöËá≥ÂÖ®ÈÉ®Ôºâ ÂÆÉ‰∏çÂèØËØÜÂà´ÁöÑÂ±ûÊÄßÈ°π„ÄÇ‰ªª‰ΩïÊú¨ËßÑËåÉÊú™ÂÆö‰πâÁöÑÂ±ûÊÄß‰∏çËÉΩÂΩ±ÂìçClassÊñá‰ª∂ÁöÑËØ≠‰πâÔºåÂè™ËÉΩÊèê‰æõÈôÑÂä†ÁöÑÊèèËø∞‰ø°ÊÅØ „ÄÇ Ê†πÊçÆ‰∏äËø∞ÁöÑÂèôËø∞ÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜclassÁöÑÊñá‰ª∂ÁªÑÁªáÁªìÊûÑÊ¶ÇÊã¨Êàê‰ª•‰∏ãÈù¢Ëøô‰∏™ÁªìÊûÑ‰ΩìÔºö]]></content>
      <categories>
        <category>Java</category>
        <category>JVM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux - Â∏∏Áî®ÂëΩ‰ª§]]></title>
    <url>%2Fposts%2Fcb6839f2.html</url>
    <content type="text"><![CDATA[ÂëΩ‰ª§ÁöÑÂü∫Êú¨Ê†ºÂºè [root@localhost~] root‰∏∫Áî®Êà∑ÂêçÔºà#Ë∂ÖÁ∫ßÁî®Êà∑ $ÊôÆÈÄöÁî®Êà∑Ôºâ localhost‰∏ªÊú∫Âêç ÂëΩ‰ª§ÁöÑÂü∫Êú¨Ê†ºÂºèÔºö 1ÂëΩ‰ª§[ÈÄâÈ°π][ÂèÇÊï∞] Êü•ËØ¢ÁõÆÂΩïÁöÑÂÜÖÂÆπ ÂëΩ‰ª§Ê†ºÂºèÔºö 1ls [ÈÄâÈ°π][Êñá‰ª∂ÊàñÁõÆÂΩï] ÈÄâÈ°πÔºö -a ÊâÄÊúâÊñá‰ª∂,ÂåÖÊã¨ÈöêËóèÊñá‰ª∂„ÄÇ -l Êü•ÁúãËØ¶ÊÉÖ,ÂåÖÂê´Êñá‰ª∂ÁöÑÁ°ÆÂàáÂ§ßÂ∞èÔºåÊã•ÊúâËØ•Êñá‰ª∂ÁöÑ‰∫∫ÂëòÔºåÊúâÊùÉÊü•ÁúãËØ•Êñá‰ª∂Ôºå‰ª•Âèä‰ΩïÊó∂ËøõË°å‰∏äÊ¨°‰øÆÊîπ„ÄÇ -d Êü•ÁúãÁõÆÂΩïÂ±ûÊÄß -h ÊòæÁ§∫Êñá‰ª∂Â§ßÂ∞è Êñá‰ª∂Â§ÑÁêÜ Âª∫Á´ãÁõÆÂΩï mkdir -p[ÁõÆÂΩïÂêç] -pË°®Á§∫ÈÄíÂΩíÂàõÂª∫Êñá‰ª∂Â§π ÂàáÊç¢ÁõÆÂΩï cd [ÁõÆÂΩï] ÁÆÄÂåñÊìç‰ΩúÔºö 1234cd ~ ËøõÂÖ•ÂΩìÂâçÁî®Êà∑ÁõÆÂΩïcd - ‰∏äÊ¨°ÁõÆÂΩïcd .. ËøõÂÖ•‰∏ä‰∏ÄÁ∫ßÁõÆÂΩïpwd Êü•ÁúãÂΩìÂâçÁõÆÂΩïÊâÄÂú®‰ΩçÁΩÆ Âà†Èô§ÁõÆÂΩï 12rmdir [ÁõÆÂΩï] Âà†Èô§ÊâÄÊúâÊñá‰ª∂rm -rf [ÁõÆÂΩï] Âà†Èô§ÁõÆÂΩïÊâÄÊúâÊñá‰ª∂ Â§çÂà∂ÁõÆÂΩï cp [ÈÄâÈ°π] [ÂéüÊñá‰ª∂ÁõÆÂΩï] [ÁõÆÊ†áÁõÆÂΩï] ÈÄâÈ°πÔºö -rÂ§çÂà∂ÁõÆÂΩï -pËøûÊñá‰ª∂Â±ûÊÄß‰∏ÄËµ∑Â§çÂà∂ -a Áõ∏ÂΩì‰∫é-pdr Ââ™Âàá„ÄÅÊîπÂêç mv [ÂéüÊñá‰ª∂ÁõÆÂΩï] [ÁõÆÊ†áÊñá‰ª∂ÁõÆÂΩï] 1mv filename1 filename2 filename1 Êñá‰ª∂ÁöÑÊ∫êË∑ØÂæÑÔºåfilename2 ÊòØÁõÆÊ†áË∑ØÂæÑ„ÄÇ Â∏∏ËßÅÁõÆÂΩï‰ΩúÁî® 123456789101112131415/ Ê†πÁõÆÂΩï/bin ÂëΩ‰ª§‰øùÂ≠òÁõÆÂΩï/boot ÂêØÂä®ÁõÆÂΩï/dev ËÆæÂ§áÊñá‰ª∂ÂëΩ‰ª§/etc ÈÖçÁΩÆÊñá‰ª∂‰øùÂ≠òÁõÆÂΩï/home ÂÆ∂ÁõÆÂΩï/lib Á≥ªÁªüÂ∫ì‰øùÂ≠òÂëΩ‰ª§/mnt Á≥ªÁªüÊåÇËΩΩÁõÆÂΩï ÂàõÂª∫ÊàñÊõ¥Êñ∞Êñá‰ª∂ 1touch filename cat ÂÆÉÂèØ‰ª•Âú®UNIXÊàñLinux‰∏ãÁî®‰∫é‰ª•‰∏ãÁõÆÁöÑ„ÄÇ Âú®Â±èÂπï‰∏äÊòæÁ§∫ÊñáÊú¨Êñá‰ª∂ Â§çÂà∂ÊñáÊú¨Êñá‰ª∂ ÂêàÂπ∂ÊñáÊú¨Êñá‰ª∂ ÂàõÂª∫Êñ∞ÁöÑÊñáÊú¨Êñá‰ª∂ 123cat filenamecat file1 file2 cat file1 file2 &gt; newcombinedfile more ÊòæÁ§∫Êñá‰ª∂ÁöÑÁ¨¨‰∏ÄÈÉ®ÂàÜÔºàÁî®Á©∫Ê†ºÁßªÂä®Âπ∂ÈîÆÂÖ•q‰ª•ÈÄÄÂá∫Ôºâ„ÄÇ 1more filename head ËæìÂá∫Êñá‰ª∂ÁöÑÂâç10Ë°å„ÄÇ 1head filename tail ËæìÂá∫ÊúÄÂêé10Ë°åÊñá‰ª∂„ÄÇÁî®‰∫é-fÂú®Êñá‰ª∂Â¢ûÈïøÊó∂ËæìÂá∫ÈôÑÂä†Êï∞ÊçÆ„ÄÇ 1tail filename diff ÊØîËæÉÊñá‰ª∂ÔºåÂπ∂ÂàóÂá∫‰ªñ‰ª¨ÁöÑÂ∑ÆÂºÇ„ÄÇ 1diff filename1 filename2 lpr ÊâìÂç∞Êñá‰ª∂„ÄÇ 1lpr filename Êñá‰ª∂ÊêúÁ¥¢ locate locate [Êñá‰ª∂Âêç] Âú®Á≥ªÁªüÊï∞ÊçÆÂ∫ì‰∏≠Êü•ÊâæÊñá‰ª∂„ÄÇÊñ∞Âª∫ÁöÑÊñá‰ª∂ÔºåË¶ÅÊâßË°åupdatedbÊìç‰Ωú‰πãÂêéÊâçËÉΩÊêúÂà∞„ÄÇ ÂëΩ‰ª§ÊêúÁ¥¢ whereis [ÈÄâÈ°π] [ÂëΩ‰ª§Âêç] ÊàñËÄÖ which [ÈÄâÈ°π][ÂëΩ‰ª§Âêç] ÈÄâÈ°πÔºö -b Âè™Êü•ÊâæÂèØÊâßË°åÊñá‰ª∂ -m Âè™Êü•ÊâæÂ∏ÆÂä©Êñá‰ª∂ ËØ¥ÊòéÔºöwhereis‰ΩøÁî®Á≥ªÁªüËá™Âä®ÊûÑÂª∫ÁöÑÊï∞ÊçÆÂ∫ìÊù•ÊêúÁ¥¢ÂèØÊâßË°åÊñá‰ª∂ÔºåÊ∫êÊñá‰ª∂ÂíåÊâãÂÜåÈ°µÈù¢„ÄÇ whichÂú®ÁéØÂ¢ÉÂèòÈáèPATHÊåáÂÆöÁöÑÁõÆÂΩï‰∏≠ÊêúÁ¥¢ÂèØÊâßË°åÊñá‰ª∂„ÄÇÊ≠§ÂëΩ‰ª§Â∞ÜÊâìÂç∞ÂèØÊâßË°åÊñá‰ª∂ÁöÑÂÆåÊï¥Ë∑ØÂæÑ„ÄÇ Êñá‰ª∂ÊêúÁ¥¢ find [ÊêúÁ¥¢ËåÉÂõ¥][ÈÄâÈ°π][Êù°‰ª∂] ‰∏æ‰æãÔºö Âú®Ê†πÁõÆÂΩï‰∏ãÊü•ÊâæÂêç‰∏∫install.logÊñá‰ª∂ find / -name install.log ÂøΩÁï•Â§ßÂ∞èÂÜôÊü•ÊâæÊñá‰ª∂ find /root -inname install.log find /var/log -mtime +10 ÂÖ∂‰∏≠-mtime Êñá‰ª∂‰øÆÊîπÊó∂Èó¥ -atime Êñá‰ª∂ËÆøÈóÆÊó∂Èó¥ -ctime ÊîπÂèòÊñá‰ª∂Â±ûÊÄßÊó∂Èó¥ +10 10Â§©Ââç 10 10Â§© -10 10Â§©ÂÜÖ Êü•ÊâæÊñá‰ª∂Â§ß‰∫é20MÁöÑÊñá‰ª∂ find /etc -size +20M ÊñáÊú¨Êìç‰Ωú awk awk ÊòØÂ§ÑÁêÜÊñáÊú¨Êñá‰ª∂ÊúÄÊúâÁî®ÁöÑÂëΩ‰ª§„ÄÇÂÆÉ‰∏ÄË°å‰∏ÄË°åÂú∞Âú®Êï¥‰∏™Êñá‰ª∂‰∏äËøêË°å„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂÆÉ‰ΩøÁî®Á©∫Ê†ºÂàÜÈöîÂ≠óÊÆµ„ÄÇawkÂëΩ‰ª§ÊúÄÂ∏∏Áî®ÁöÑËØ≠Ê≥ïÊòØ: 1awk &apos;/search_pattern/ &#123; action_to_take_if_pattern_matches; &#125;&apos; file_to_parse ‰ª•/etc/passwdÊñá‰ª∂ÂåÖÂê´ÁöÑÁ§∫‰æãÊï∞ÊçÆ‰∏∫‰æãÔºö 12345root:x:0:0:root:/root:/usr/bin/zshdaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologinbin:x:2:2:bin:/bin:/usr/sbin/nologinsys:x:3:3:sys:/dev:/usr/sbin/nologinsync:x:4:65534:sync:/bin:/bin/sync Áé∞Âú®‰ªéËøô‰∏™Êñá‰ª∂Âè™Ëé∑ÂèñÁî®Êà∑Âêç„ÄÇ -FÊåáÂÆöË¶ÅÂü∫‰∫éÂì™‰∏™ÂàÜÈöîÂ≠óÊÆµ„ÄÇÂú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ { print $1 } ÊÑèÂë≥ÁùÄÊâìÂç∞Âá∫Á¨¨‰∏Ä‰∏™ÂåπÈÖçÂ≠óÊÆµ„ÄÇ 1awk -F&apos;:&apos; &apos;&#123; print $1 &#125;&apos; /etc/passwd ËøêË°å‰∏äËø∞ÂëΩ‰ª§ÂêéÔºåÂ∞ÜËé∑Âæó‰ª•‰∏ãËæìÂá∫„ÄÇ 12345rootdaemonbinsyssync grep Êü•ÊâæÊñá‰ª∂ÂÜÖÁöÑÊñáÊú¨„ÄÇÂèØ‰ª•‰ΩøÁî® grep ÊêúÁ¥¢‰∏é‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠£ÂàôË°®ËææÂºèÂåπÈÖçÁöÑÊñáÊú¨Ë°åÔºåÂπ∂‰ªÖËæìÂá∫ÂåπÈÖçÁöÑË°å„ÄÇ 1grep pattern filename Á§∫‰æãÔºö 1234$ grep admin /etc/passwd_kadmin_admin:*:218:-2:Kerberos Admin Service:/var/empty:/usr/bin/false_kadmin_changepw:*:219:-2:Kerberos Change Password Service:/var/empty:/usr/bin/false_krb_kadmin:*:231:-2:Open Directory Kerberos Admin Service:/var/empty:/usr/bin/false ËøòÂèØ‰ª•ÈÄöËøá‰ΩøÁî®-iÈÄâÈ°πÂº∫Âà∂grepÂøΩÁï•ÂçïËØçÂ§ßÂ∞èÂÜô„ÄÇ-rÂèØÁî®‰∫éÊêúÁ¥¢ÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂Ôºå‰æãÂ¶ÇÔºö 1$ grep -r admin /etc/ -w Âè™ÊêúÁ¥¢ÂçïËØç„ÄÇ wc ÁªüËÆ°‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÊúâÂ§öÂ∞ëË°åÔºåÂ§öÂ∞ëÂçïËØçÂíåÂ§öÂ∞ëÂ≠óÁ¨¶„ÄÇ 1wc filename Á§∫‰æãÔºö 12$ wc demo.txt7459 15915 398400 demo.txt 7459 ÊòØË°åÊï∞, 15915 ÊòØÂçïËØçÊï∞Ôºå 398400 ÊòØÂ≠óÁ¨¶Êï∞. sed Áî®‰∫éËøáÊª§ÂíåËΩ¨Êç¢ÊñáÊú¨ÁöÑÊµÅÁºñËæëÂô®„ÄÇ example.txtÊñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 1Hello This is a Test 1 2 3 4 Áî®ËøûÂ≠óÁ¨¶ÊõøÊç¢ÊâÄÊúâÁ©∫Ê†º 1sed &apos;s/ /-/g&apos; example.txt ÁªìÊûúÂ¶Ç‰∏ãÔºö 1Hello-This-is-a-Test-1-2-3-4 ‰ΩøÁî®&quot;d&quot;ÊõøÊç¢ÊâÄÊúâÁöÑÊï∞Â≠ó 1sed &apos;s/[0-9]/d/g&apos; example.txt ÁªìÊûúÂ¶Ç‰∏ãÔºö 1Hello This is a Test d d d d sort ÊéíÂ∫èÊñáÊú¨Êñá‰ª∂ÁöÑË°å example.txtÊñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 1234567fbcgaed ÊéíÂ∫èexample.txt 1sort example.txt ÁªìÊûúÂ¶Ç‰∏ãÔºö 1234567abcdefg ÈöèÊú∫Âåñ‰∏Ä‰∏™ÊéíÂ∫èÁöÑexample.txt 1sort example.txt | sort -R ÁªìÊûúÂ¶Ç‰∏ãÔºö 1234567bfacdge uniq Êä•ÂëäÊàñÁúÅÁï•ÈáçÂ§çÁöÑË°å example.txtÊñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 12345678aababcdc Âè™ÊòæÁ§∫example.txtÁöÑÂîØ‰∏ÄË°åÔºàÈ¶ñÂÖà‰Ω†ÈúÄË¶ÅÊéíÂ∫èÔºåÂê¶ÂàôÁúã‰∏çÂà∞ÈáçÂè†Ôºâ 1sort example.txt | uniq ÁªìÊûúÂ¶Ç‰∏ãÔºö 1234abcd ÊòæÁ§∫ÊØèË°åÁöÑÂîØ‰∏ÄÈ°πÔºåÂπ∂ÂëäËØâÊàëÊâæÂà∞‰∫ÜÂ§öÂ∞ë‰∏™ÂÆû‰æã 1sort example.txt | uniq -c ÁªìÊûúÂ¶Ç‰∏ãÔºö 12343 a2 b2 c1 d cut ‰ªéÊØèË°åÊñá‰ª∂‰∏≠Âà†Èô§ÈÉ®ÂàÜ„ÄÇ example.txtÊñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 1red riding hood went to the park to play ÊòæÁ§∫Á¨¨2,7Âíå9Ê†èÁöÑÁ©∫Ê†º‰Ωú‰∏∫ÂàÜÈöîÁ¨¶ 1cut -d &quot; &quot; -f2,7,9 example.txt ÁªìÊûúÂ¶Ç‰∏ãÔºö 1riding park play echo ÊòæÁ§∫‰∏ÄË°åÊñáÂ≠ó ÊòæÁ§∫ &quot;Hello World&quot; 1echo Hello World ÁªìÊûúÂ¶Ç‰∏ãÔºö 1Hello World Áî®Â≠óÊØç‰πãÈó¥ÁöÑÊç¢Ë°åÊòæÁ§∫ &quot;Hello World&quot; 1echo -ne &quot;Hello\nWorld\n&quot; ÁªìÊûúÂ¶Ç‰∏ãÔºö 12HelloWorld fmt ÁÆÄÂçïÁöÑÊúÄ‰Ω≥ÊñáÊú¨Ê†ºÂºèÂåñÁ®ãÂ∫è example.txtÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 1Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Â∞Üexample.txtÁöÑË°åËæìÂá∫‰∏∫20‰∏™Â≠óÁ¨¶ÁöÑÂÆΩÂ∫¶ 1234567891011121314151617181920cat example.txt | fmt -w 20Lorem ipsumdolor sit amet,consetetursadipscing elitr,sed diam nonumyeirmod temporinvidunt ut laboreet dolore magnaaliquyam erat, seddiam voluptua. Atvero eos etaccusam et justoduo dolores et earebum. Stet clitakasd gubergren,no sea takimatasanctus est Loremipsum dolor sitamet. tr ÁøªËØëÊàñÂà†Èô§Â≠óÁ¨¶ example.txtÊñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 1Hello World Foo Bar Baz! ÊääÊâÄÊúâÂ∞èÂÜôÂ≠óÊØçÂèòÊàê‰∏∫Â§ßÂÜô 1cat example.txt | tr &apos;a-z&apos; &apos;A-Z&apos; ÁªìÊûúÂ¶Ç‰∏ãÔºö 1HELLO WORLD FOO BAR BAZ! ÊääÊâÄÊúâÁöÑÁ©∫Ê†ºÂèòÊàêÊç¢Ë°åÁ¨¶ 1cat example.txt | tr &apos; &apos; &apos;\n&apos; ÁªìÊûúÂ¶Ç‰∏ãÔºö 12345HelloWorldFooBarBaz! nl ÊòæÁ§∫Êñá‰ª∂ÁöÑË°åÊï∞ example.txtÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 12345678910111213141516171819Lorem ipsumdolor sit amet,consetetursadipscing elitr,sed diam nonumyeirmod temporinvidunt ut laboreet dolore magnaaliquyam erat, seddiam voluptua. Atvero eos etaccusam et justoduo dolores et earebum. Stet clitakasd gubergren,no sea takimatasanctus est Loremipsum dolor sitamet. Â∏¶Ë°åÂè∑ÊòæÁ§∫ example.txt 1nl -s&quot;. &quot; example.txt ÁªìÊûúÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526 1. Lorem ipsum 2. dolor sit amet, 3. consetetur 4. sadipscing elitr, 5. sed diam nonumy 6. eirmod tempor 7. invidunt ut labore 8. et dolore magna 9. aliquyam erat, sed 10. diam voluptua. At 11. vero eos et 12. accusam et justo 13. duo dolores et ea 14. rebum. Stet clita 15. kasd gubergren, 16. no sea takimata 17. sanctus est Lorem 18. ipsum dolor sit 19. amet.``` 12. `egrep`ÊâìÂç∞ÂåπÈÖçÊ®°ÂºèÁöÑË°å - Êâ©Â±ïË°®ËææÂºèÔºàÂà´Âêç‰∏∫Ôºö&apos;grep -E&apos;Ôºâ`example.txt`Êñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. 12&gt;Âú®ÂÖ∂‰∏≠ÊòæÁ§∫‚ÄúLorem‚ÄùÊàñ‚Äúdolor‚ÄùÁöÑË°å egrep '(Lorem|dolor)' example.txt or grep -E '(Lorem|dolor)' example.txt 12ÁªìÊûúÂ¶Ç‰∏ãÔºö Lorem ipsum dolor sit amet, et dolore magna duo dolores et ea sanctus est Lorem ipsum dolor sit 12345613. `fgrep`ÊâìÂç∞ÂåπÈÖçÊ®°ÂºèÂà∞ÁöÑË°å - FIXEDÊ®°ÂºèÂåπÈÖçÔºàÂà´Âêç‰∏∫Ôºö&apos;grep -F&apos;Ôºâ`example.txt`Êñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor foo (Lorem|dolor) invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. 12&gt;Âú®example.txt‰∏≠ÊâæÂà∞ÂÖ∑‰ΩìÁöÑÂ≠óÁ¨¶‰∏≤&apos;ÔºàLorem | doloarÔºâ&apos; fgrep '(Lorem|dolor)' example.txt or grep -F '(Lorem|dolor)' example.txt 12ÁªìÊûúÂ¶Ç‰∏ãÔºö foo (Lorem|dolor) 123456789101112131415#### ÂéãÁº©‰∏éËß£ÂéãÁº©Â∏∏ËßÅÂéãÁº©Ê†ºÂºèÔºö.zip „ÄÅ .gz „ÄÅ .bz2„ÄÅ .tar.gz „ÄÅ .tar.bz21. zipÊ†ºÂºè**ÂéãÁº©Êñá‰ª∂**`zip [ÂéãÁº©Êñá‰ª∂Âêç][ÂéüÊñá‰ª∂]`**ÂéãÁº©ÁõÆÂΩï**`zip -r [ÂéãÁº©Êñá‰ª∂Âêç][ÂéüÊñá‰ª∂]`‰∏æ‰æãÔºö touch jp/cangls touch jp/longls zip -r jp.zip jp 1234567891011121314151617181920212223242526**Ëß£ÂéãÔºö**`unzip [ÂéãÁº©Êñá‰ª∂Âêç]`**ÂéãÁº©‰∏∫gzÊ†ºÂºèÔºåÂéüÊñá‰ª∂‰∏ç‰øùÁïô**`gzip [ÂéüÊñá‰ª∂]`2. gzÊ†ºÂºè**ÂéãÁº©.gzÊ†ºÂºèÔºåÂéüÊñá‰ª∂‰øùÁïô**`gzip -c ÂéüÊñá‰ª∂ &gt; ÂéãÁº©Êñá‰ª∂`**ÂéãÁº©ÁõÆÂΩïÔºö**`gzip -r ÁõÆÂΩï`**Ëß£ÂéãÔºö**`guzip [Êñá‰ª∂]``guzip -r [ÁõÆÂΩï]`**Êü•ÁúãgzipÂéãÁº©Êñá‰ª∂ÔºåËÄå‰∏çÈúÄË¶ÅgunzipÂÆÉ** gzcat filename 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859603. tar**ÊâìÂåÖ**`tar -cvf ÊâìÂåÖÊñá‰ª∂Âêç ÂéüÊñá‰ª∂`**Ëß£Âéã**`tar -xvf jp.tar`4. tar.gz**ÊâìÂåÖ**`tar -zcvf ÂéãÁº©ÂåÖÂêç.tar.gz ÂéüÊñá‰ª∂`**Ëß£Âéã**`tar -zxvf ÂéãÁº©ÂåÖÂêç.tar.gz`#### ÂÖ≥Êú∫„ÄÅÈáçÂêØ`shutdown [ÈÄâÈ°π][Êó∂Èó¥]`**ÈÄâÈ°πÔºö**+ -c ÂèñÊ∂àÂâç‰∏Ä‰∏™ÂÖ≥Êú∫ÂëΩ‰ª§+ -h ÂÖ≥Êú∫+ -r ÈáçÂêØ+ init 6 ÈáçÂêØ+ init 0 ÂÖ≥Êú∫+ logout ÈÄÄÂá∫ÁôªÈôÜ#### Êü•ÁúãÁî®Êà∑‰ø°ÊÅØ`w`„ÄÅ`who`„ÄÅ`last`„ÄÅ`lastlog`#### ËæìÂá∫ÈáçÂÆöÂêë`ÂëΩ‰ª§&gt;Êñá‰ª∂` ‰ª•Ë¶ÜÁõñÁöÑÊñπÂºèÔºåÊääÊ≠£Á°ÆÁöÑÂëΩ‰ª§ËæìÂá∫Âà∞ÊåáÂÆöÊñá‰ª∂`ÂëΩ‰ª§&gt;&gt;Êñá‰ª∂` ‰ª•ËøΩÂä†ÁöÑÊñπÂºèÔºåÊääÊ≠£Á°ÆÁöÑÂëΩ‰ª§ËæìÂá∫Âà∞ÊåáÂÆöÊñá‰ª∂„ÄÅ`ÈîôËØØÂëΩ‰ª§ 2&gt; Êñá‰ª∂` ‰ª•Ë¶ÜÁõñÁöÑÊñπÂºèÊääÈîôËØØÁöÑÂëΩ‰ª§Ë¶ÜÁõñÂà∞ÊåáÂÆöÊñá‰ª∂`ÈîôËØØÂëΩ‰ª§ 2&gt;&gt; Êñá‰ª∂` ‰ª•ËøΩÂáªÁöÑÊñπÂºèÊääÈîôËØØÁöÑÂëΩ‰ª§Ë¶ÜÁõñÂà∞ÊåáÂÆöÊñá‰ª∂`ÂëΩ‰ª§&gt;&gt;Êñá‰ª∂ 2&gt;&amp;1` ÂêåÊó∂ËøΩÂä†Ê≠£Á°ÆÂëΩ‰ª§ÂíåÈîôËØØÂëΩ‰ª§Âà∞ ÊåáÂÆöÊñá‰ª∂`ÂëΩ‰ª§ &gt;&gt;Êñá‰ª∂1 2&gt;&gt;Êñá‰ª∂2` ÊääÊ≠£Á°ÆÁöÑÂëΩ‰ª§ËæìÂá∫Âà∞Êñá‰ª∂1ÈîôËØØÁöÑÊñá‰ª∂2#### ÁΩëÁªúÁõ∏ÂÖ≥1. ifconfigÊü•Áúãip‰∏æ‰∏™‰æãÂ≠êÔºö ifconfig&gt;&gt; ip.log cat ip.log 2. Êü•ÁúãÁΩëÁªúÁä∂ÊÄÅ `netstat [ÈÄâÈ°π]` ÈÄâÈ°πÔºö + -t: ÂàóÂá∫tcp ÂçèËÆÆÁ´ØÂè£ + -u: ÂàóÂá∫updÂçèËÆÆÁ´ØÂè£ + -n ipÂú∞ÂùÄ‰∏™Á´ØÂè£Âè∑ + -l ÂàóÂá∫ÁõëÂê¨Áä∂ÊÄÅÁöÑ + -a ÊâÄÊúâ 3. Êü•ÁúãË∑ØÁî±ÂàóË°® `netstat -rn` ÊàñËÄÖ `route -n` 4. Êü•ÁúãÊüêÂüüÂêç‰∏éËá™Â∑±ÁöÑÁîµËÑëÁöÑÁΩëÁªúÁä∂ÊÄÅ `ping www.baidu.com` #### viÁºñËæëÂô® viÁöÑÂçáÁ∫ßÁâàÊòØvim 1. vimÁöÑÊìç‰ΩúÊ®°Âºè `commond mode` ÂëΩ‰ª§Ê®°Âºè `inser tmode` ÁºñËæëÊ®°Âºè `lastline mode` Â∫ïË°åÊ®°Âºè 2. Ê®°ÂºèÂàáÊç¢ `i` ËøõÂÖ•ÁºñËæëÊ®°Âºè `esc` ËøõÂÖ•ÂëΩ‰ª§Ë°åÊ®°Âºè 3. ÂëΩ‰ª§Ê®°Âºè `vim [Êñá‰ª∂]` ËøõÂÖ•Êñá‰ª∂ÊàñËÄÖÂàõÂª∫Êñá‰ª∂ÔºàÊñá‰ª∂‰∏çÂ≠òÂú®ÁöÑÊÉÖÂÜµ‰∏ãÔºâ `vim + [Êñá‰ª∂Âêç]` ËøõÂÖ•Êñá‰ª∂Â∞æÈÉ® `vim +/[Â≠óÁ¨¶‰∏≤] [Êñá‰ª∂Âêç]` ÂÖâÊ†áÂÆö‰ΩçÂà∞Êñá‰ª∂Á¨¨‰∏ÄÊ¨°Âá∫Áé∞ËØ•Â≠óÁ¨¶‰∏≤ÁöÑ‰ΩçÁΩÆ 4. Â∫ïË°åÊ®°Âºè `:w` ‰øùÂ≠ò `:q `ÈÄÄÂá∫ `:!` Âº∫Âà∂ `:15` ÂÆö‰ΩçÁöÑÁ¨¨15Ë°å `/[Â≠óÁ¨¶‰∏≤]` ÂÖâÊ†á‰ΩçÁΩÆÂêëÂêéÊêúÁ¥¢ËØ•Â≠óÁ¨¶‰∏≤ `?[Â≠óÁ¨¶‰∏≤]` ÂÖâÊ†á‰ΩçÁΩÆÂêëÂâçÊêúÁ¥¢ËØ•Â≠óÁ¨¶‰∏≤ `dd `Âà†Èô§ÂÖâÊ†áÊâÄÂú®Ë°å `ctr+f` Âêë‰∏ãÁøªÈ°µ `ctr+b` Âêë‰∏äÁøªÈ°µ #### Â∏∏Áî®Êìç‰ΩúÂø´Êç∑ÈîÆ `ctr+c` ÁªàÊ≠¢ÂΩìÂâçÂëΩ‰ª§ `ctr+l` Ê∏ÖÂ±è Áõ∏ÂΩì‰∫é clear `ctr+a` ÂÖâÊ†áÁßªÂà∞Ë°åÈ¶ñ `ctr+e` ÂÖâÊ†áÁßªÂà∞Ë°åÂ∞æ `ctr+u` ÊääÂÖâÊ†áÊâÄÂú®‰ΩçÁΩÆÂà†Èô§Âà∞Ë°åÈ¶ñ `ctr+z` ÊääÂëΩ‰ª§ÊîæÂÖ•ÂêéÂè∞ `ctr+r` Âú®ÂéÜÂè≤ÂëΩ‰ª§‰∏≠ÊêúÁ¥¢]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java - CompletableFuture]]></title>
    <url>%2Fposts%2Fcad2f756.html</url>
    <content type="text"><![CDATA[CompletableFutureÊòØJava8‰∏≠ÂØπFutureÁöÑÂ¢ûÂº∫„ÄÇÂÆûÁé∞CompletionStageÊé•Âè£(40‰Ωô‰∏™ÊñπÊ≥ï)ÔºåÂ§ßÂ§öÊï∞ÊñπÊ≥ïÂ§öÊï∞Â∫îÁî®Âú®ÂáΩÊï∞ÂºèÁºñÁ®ã‰∏≠ÔºåÂπ∂‰∏îÊîØÊåÅÊµÅÂºèË∞ÉÁî®„ÄÇ ÁÆÄÂçïÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930public class CompletableFutureTest implements Runnable &#123; CompletableFuture&lt;Integer&gt; completableFuture = null; public CompletableFutureTest(CompletableFuture&lt;Integer&gt; completableFuture) &#123; this.completableFuture = completableFuture; &#125; @Override public void run() &#123; int result = 0; try &#123; result = completableFuture.get() * completableFuture.get(); &#125; catch (Exception e) &#123; &#125; System.out.println(result); &#125; public static void main(String[] args) throws InterruptedException, ExecutionException &#123; final CompletableFuture&lt;Integer&gt; future = new CompletableFuture&lt;&gt;(); new Thread(new CompletableFutureTest(future)).start(); //Ê®°ÊãüÈïøÊó∂Èó¥ÁöÑËÆ°ÁÆóËøáÁ®ã Thread.sleep(1000); //ÂëäÁü•ÂÆåÊàêÁªìÊûú future.complete(60); &#125;&#125; FutureÊúÄ‰ª§‰∫∫ËØüÁóÖÁöÑÂ∞±ÊòØË¶ÅÁ≠âÂæÖÔºåË¶ÅËá™Â∑±ÂéªÊ£ÄÊü•‰ªªÂä°ÊòØÂê¶ÂÆåÊàê‰∫ÜÔºåÂú®Future‰∏≠Ôºå‰ªªÂä°ÂÆåÊàêÁöÑÊó∂Èó¥ÊòØ‰∏çÂèØÊéßÁöÑ„ÄÇËÄåCompletableFutureÁöÑÊúÄÂ§ßÊîπËøõÂú®‰∫éÔºå‰ªªÂä°ÂÆåÊàêÁöÑÊó∂Èó¥‰πüÂºÄÊîæ‰∫ÜÂá∫Êù•„ÄÇ CompletableFutureÁöÑÂºÇÊ≠•ÊâßË°åÔºö 12345678910111213141516public static Integer calc(Integer param) &#123; try &#123; //Ê®°ÊãüÈïøÊó∂Èó¥ÁöÑÊâßË°å Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; &#125; return param * param;&#125;public static void main(String[] args) throws InterruptedException, ExecutionException &#123; //ÂºÇÊ≠•Ë∞ÉÁî® final CompletableFuture&lt;Integer&gt; future2 = CompletableFuture.supplyAsync(() -&gt; calc(50)); System.out.println(future2.get());&#125; CompletableFutureÁöÑÊµÅÂºèË∞ÉÁî®Ôºö 1234567891011121314151617181920public static Integer calc(Integer param) &#123; try &#123; //Ê®°ÊãüÈïøÊó∂Èó¥ÁöÑÊâßË°å Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; &#125; return param * param;&#125;public static void main(String[] args) throws InterruptedException, ExecutionException &#123; //ÊµÅÂºèË∞ÉÁî® CompletableFuture&lt;Void&gt; future3 = CompletableFuture.supplyAsync(() -&gt; calc(40)) .thenApply((i) -&gt; Integer.toString(i)) .thenApply((str) -&gt; "\"" + str + "\"") .thenAccept(System.out::println); future3.get();&#125; ÁªÑÂêàÂ§ö‰∏™CompletableFutureÔºö 123456789101112public static Integer calc2(Integer param) &#123; return param / 2;&#125;public static void main(String[] args) throws InterruptedException, ExecutionException &#123; //ÁªÑÂêàÂ§ö‰∏™CompletableFuture CompletableFuture&lt;Void&gt; future4 = CompletableFuture.supplyAsync(() -&gt; calc2(100)) .thenCompose((i) -&gt; CompletableFuture.supplyAsync(() -&gt; calc2(i))) .thenApply((str) -&gt; "\"" + str + "\"") .thenAccept(System.out::println); future4.get();&#125; CompletableFutureË∑üÊÄßËÉΩ‰∏äÂÖ≥Á≥ª‰∏çÂ§ßÔºåÊõ¥Â§öÁöÑÊòØ‰∏∫‰∫ÜÊîØÊåÅÂáΩÊï∞ÂºèÁºñÁ®ãÔºåÂú®ÂäüËÉΩ‰∏äÁöÑÂ¢ûÂº∫„ÄÇÂΩìÁÑ∂ÂºÄÊîæ‰∫ÜÂÆåÊàêÊó∂Èó¥ÁöÑËÆæÁΩÆÊòØ‰∏ÄÂ§ß‰∫ÆÁÇπ„ÄÇ ÊºîÁ§∫ÁöÑÂÆåÊï¥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869package main.java.com.study.completableFuture;import java.util.concurrent.CompletableFuture;import java.util.concurrent.ExecutionException;/** * @author: whb * @description: Â¢ûÂº∫ÁâàFutureÊµãËØïÁ±ª */public class CompletableFutureTest implements Runnable &#123; CompletableFuture&lt;Integer&gt; completableFuture = null; public CompletableFutureTest(CompletableFuture&lt;Integer&gt; completableFuture) &#123; this.completableFuture = completableFuture; &#125; @Override public void run() &#123; int result = 0; try &#123; result = completableFuture.get() * completableFuture.get(); &#125; catch (Exception e) &#123; &#125; System.out.println(result); &#125; public static Integer calc(Integer param) &#123; try &#123; //Ê®°ÊãüÈïøÊó∂Èó¥ÁöÑÊâßË°å Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; &#125; return param * param; &#125; public static Integer calc2(Integer param) &#123; return param / 2; &#125; public static void main(String[] args) throws InterruptedException, ExecutionException &#123; final CompletableFuture&lt;Integer&gt; future = new CompletableFuture&lt;&gt;(); new Thread(new CompletableFutureTest(future)).start(); //Ê®°ÊãüÈïøÊó∂Èó¥ÁöÑËÆ°ÁÆóËøáÁ®ã Thread.sleep(1000); //ÂëäÁü•ÂÆåÊàêÁªìÊûú future.complete(60); //ÂºÇÊ≠•Ë∞ÉÁî® final CompletableFuture&lt;Integer&gt; future2 = CompletableFuture.supplyAsync(() -&gt; calc(50)); System.out.println(future2.get()); //ÊµÅÂºèË∞ÉÁî® CompletableFuture&lt;Void&gt; future3 = CompletableFuture.supplyAsync(() -&gt; calc(40)) .thenApply((i) -&gt; Integer.toString(i)) .thenApply((str) -&gt; "\"" + str + "\"") .thenAccept(System.out::println); future3.get(); //ÁªÑÂêàÂ§ö‰∏™CompletableFuture CompletableFuture&lt;Void&gt; future4 = CompletableFuture.supplyAsync(() -&gt; calc2(100)) .thenCompose((i) -&gt; CompletableFuture.supplyAsync(() -&gt; calc2(i))) .thenApply((str) -&gt; "\"" + str + "\"") .thenAccept(System.out::println); future4.get(); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-12‰πã-Callable„ÄÅFuture„ÄÅFutureTask]]></title>
    <url>%2Fposts%2F75995567.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ ‰ªéJava 1.5ÂºÄÂßãÔºåÂºÄÂßãÊèê‰æõ‰∫ÜCallableÂíåFutureÔºåÈÄöËøáÂÆÉ‰ª¨ÂèØ‰ª•Âú®‰ªªÂä°ÊâßË°åÂÆåÊØï‰πãÂêéÂæóÂà∞‰ªªÂä°ÊâßË°åÁªìÊûú„ÄÇ ÂØπÊØîRunnableÂíåCallbale RunnableÊòØÂú®java.lang.RunnableÂåÖ‰∏ãÈù¢ÔºåÊ≤°ÊúâËøîÂõûÂÄºÔºåËÄåCallableÊòØÂú®java.util.concurrentÂåÖ‰∏ãÈù¢ÔºàËØ¥ÊòéCallableÊòØ‰∏∫Âπ∂ÂèëÁºñÁ®ãÂÅöÂáÜÂ§áÁöÑÔºâÂèØ‰ª•ÊúâËøîÂõûÂÄº„ÄÇ Callable‰∏çËÉΩ‰ΩøÁî®ThreadÊù•Áõ¥Êé•ÊâßË°åÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÈù¢‰ΩøÁî®ExecutorService‰∏≠ÁöÑsubmitÊñπÊ≥ïÁ±ªÊâßË°åÔºåRunnable‰ΩøÁî®ExecutorServiceÁöÑexecuteÊù•ÊâßË°å„ÄÇ RunnableÊé•Âè£ÈáåÈù¢Êúâ‰∏Ä‰∏™run()ÊñπÊ≥ïÔºåÊó†ËøîÂõûÂÄºÔºõCallableÊé•Âè£ÈáåÈù¢Êúâ‰∏Ä‰∏™call()ÔºåÊúâËøîÂõûÂÄºÔºåÂèØ‰ª•ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ Future FutureÂ∞±ÊòØÂØπ‰∫éÂÖ∑‰ΩìÁöÑRunnableÊàñËÄÖCallable‰ªªÂä°ÁöÑÊâßË°åÁªìÊûúËøõË°åÂèñÊ∂à„ÄÅÊü•ËØ¢ÊòØÂê¶ÂÆåÊàê„ÄÅËé∑ÂèñÁªìÊûú„ÄÇÂøÖË¶ÅÊó∂ÂèØ‰ª•ÈÄöËøágetÊñπÊ≥ïËé∑ÂèñÊâßË°åÁªìÊûúÔºåËØ•ÊñπÊ≥ï‰ºöÈòªÂ°ûÁõ¥Âà∞‰ªªÂä°ËøîÂõûÁªìÊûú„ÄÇ Âú®FutureÊé•Âè£‰∏≠Â£∞Êòé‰∫Ü5‰∏™ÊñπÊ≥ïÔºå‰æùÊ¨°Ëß£ÈáäÊØè‰∏™ÊñπÊ≥ïÁöÑ‰ΩúÁî®Ôºö cancelÊñπÊ≥ïÁî®Êù•ÂèñÊ∂à‰ªªÂä°ÔºåÂ¶ÇÊûúÂèñÊ∂à‰ªªÂä°ÊàêÂäüÂàôËøîÂõûtrueÔºåÂ¶ÇÊûúÂèñÊ∂à‰ªªÂä°Â§±Ë¥•ÂàôËøîÂõûfalse„ÄÇÂèÇÊï∞mayInterruptIfRunningË°®Á§∫ÊòØÂê¶ÂÖÅËÆ∏ÂèñÊ∂àÊ≠£Âú®ÊâßË°åÂç¥Ê≤°ÊúâÊâßË°åÂÆåÊØïÁöÑ‰ªªÂä°ÔºåÂ¶ÇÊûúËÆæÁΩÆtrueÔºåÂàôË°®Á§∫ÂèØ‰ª•ÂèñÊ∂àÊ≠£Âú®ÊâßË°åËøáÁ®ã‰∏≠ÁöÑ‰ªªÂä°„ÄÇÂ¶ÇÊûú‰ªªÂä°Â∑≤ÁªèÂÆåÊàêÔºåÂàôÊó†ËÆ∫mayInterruptIfRunning‰∏∫trueËøòÊòØfalseÔºåÊ≠§ÊñπÊ≥ïËÇØÂÆöËøîÂõûfalseÔºåÂç≥Â¶ÇÊûúÂèñÊ∂àÂ∑≤ÁªèÂÆåÊàêÁöÑ‰ªªÂä°‰ºöËøîÂõûfalseÔºõÂ¶ÇÊûú‰ªªÂä°Ê≠£Âú®ÊâßË°åÔºåËã•mayInterruptIfRunningËÆæÁΩÆ‰∏∫trueÔºåÂàôËøîÂõûtrueÔºåËã•mayInterruptIfRunningËÆæÁΩÆ‰∏∫falseÔºåÂàôËøîÂõûfalseÔºõÂ¶ÇÊûú‰ªªÂä°ËøòÊ≤°ÊúâÊâßË°åÔºåÂàôÊó†ËÆ∫mayInterruptIfRunning‰∏∫trueËøòÊòØfalseÔºåËÇØÂÆöËøîÂõûtrue„ÄÇ isCancelledÊñπÊ≥ïË°®Á§∫‰ªªÂä°ÊòØÂê¶Ë¢´ÂèñÊ∂àÊàêÂäüÔºåÂ¶ÇÊûúÂú®‰ªªÂä°Ê≠£Â∏∏ÂÆåÊàêÂâçË¢´ÂèñÊ∂àÊàêÂäüÔºåÂàôËøîÂõû true„ÄÇ isDoneÊñπÊ≥ïË°®Á§∫‰ªªÂä°ÊòØÂê¶Â∑≤ÁªèÂÆåÊàêÔºåËã•‰ªªÂä°ÂÆåÊàêÔºåÂàôËøîÂõûtrueÔºõ get()ÊñπÊ≥ïÁî®Êù•Ëé∑ÂèñÊâßË°åÁªìÊûúÔºåËøô‰∏™ÊñπÊ≥ï‰ºö‰∫ßÁîüÈòªÂ°ûÔºå‰ºö‰∏ÄÁõ¥Á≠âÂà∞‰ªªÂä°ÊâßË°åÂÆåÊØïÊâçËøîÂõûÔºõ get(long timeout, TimeUnit unit)Áî®Êù•Ëé∑ÂèñÊâßË°åÁªìÊûúÔºåÂ¶ÇÊûúÂú®ÊåáÂÆöÊó∂Èó¥ÂÜÖÔºåËøòÊ≤°Ëé∑ÂèñÂà∞ÁªìÊûúÔºåÂ∞±Áõ¥Êé•ËøîÂõûnull„ÄÇ ‰πüÂ∞±ÊòØËØ¥FutureÊèê‰æõ‰∫Ü‰∏âÁßçÂäüËÉΩÔºö 1ÔºâÂà§Êñ≠‰ªªÂä°ÊòØÂê¶ÂÆåÊàêÔºõ 2ÔºâËÉΩÂ§ü‰∏≠Êñ≠‰ªªÂä°Ôºõ 3ÔºâËÉΩÂ§üËé∑Âèñ‰ªªÂä°ÊâßË°åÁªìÊûú„ÄÇ Âõ†‰∏∫FutureÂè™ÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÊâÄ‰ª•ÊòØÊó†Ê≥ïÁõ¥Êé•Áî®Êù•ÂàõÂª∫ÂØπË±°‰ΩøÁî®ÁöÑÔºåÂõ†Ê≠§Â∞±Êúâ‰∫ÜFutureTask„ÄÇ FutureTask ÂÖàÊù•Áúã‰∏Ä‰∏ãFutureTaskÁöÑÂÆûÁé∞Ôºö 1public class FutureTask&lt;V&gt; implements RunnableFuture&lt;V&gt; FutureTaskÁ±ªÂÆûÁé∞‰∫ÜRunnableFutureÊé•Âè£ÔºåÁúã‰∏Ä‰∏ãRunnableFutureÊé•Âè£ÁöÑÂÆûÁé∞Ôºö 123public interface RunnableFuture&lt;V&gt; extends Runnable, Future&lt;V&gt; &#123; void run();&#125; ÂèØ‰ª•ÁúãÂá∫RunnableFutureÁªßÊâø‰∫ÜRunnableÊé•Âè£ÂíåFutureÊé•Âè£ÔºåËÄåFutureTaskÂÆûÁé∞‰∫ÜRunnableFutureÊé•Âè£„ÄÇÊâÄ‰ª•ÂÆÉÊó¢ÂèØ‰ª•‰Ωú‰∏∫RunnableË¢´Á∫øÁ®ãÊâßË°åÔºåÂèàÂèØ‰ª•‰Ωú‰∏∫FutureÂæóÂà∞CallableÁöÑËøîÂõûÂÄº„ÄÇ FutureTaskÊèê‰æõ‰∫Ü2‰∏™ÊûÑÈÄ†Âô®Ôºö 1234public FutureTask(Callable&lt;V&gt; callable) &#123;&#125;public FutureTask(Runnable runnable, V result) &#123;&#125; ‰∫ãÂÆû‰∏äÔºåFutureTaskÊòØFutureÊé•Âè£ÁöÑ‰∏Ä‰∏™ÂîØ‰∏ÄÂÆûÁé∞Á±ª„ÄÇ ‰ΩøÁî®Á§∫‰æã ‰ΩøÁî®Callable+FutureËé∑ÂèñÊâßË°åÁªìÊûú 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package main.java.com.study.thread;import java.util.concurrent.*;/** * @author: whb * @description: ‰ΩøÁî®Callable+FutureËé∑ÂèñÊâßË°åÁªìÊûú */public class TestCallableFuture &#123; public static void main(String[] args) &#123; ExecutorService executor = Executors.newCachedThreadPool(); Task task = new Task(); Future&lt;Integer&gt; result = executor.submit(task); executor.shutdown(); try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e1) &#123; e1.printStackTrace(); &#125; System.out.println("‰∏ªÁ∫øÁ®ãÂú®ÊâßË°å‰ªªÂä°"); try &#123; System.out.println("taskËøêË°åÁªìÊûú" + result.get()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; System.out.println("ÊâÄÊúâ‰ªªÂä°ÊâßË°åÂÆåÊØï"); &#125;&#125;class Task implements Callable&lt;Integer&gt; &#123; @Override public Integer call() throws Exception &#123; System.out.println("Â≠êÁ∫øÁ®ãÂú®ËøõË°åËÆ°ÁÆó"); Thread.sleep(3000); int sum = 0; for (int i = 0; i &lt; 100; i++) &#123; sum += i; &#125; return sum; &#125;&#125; ÊâßË°åÁªìÊûúÔºö 1234Â≠êÁ∫øÁ®ãÂú®ËøõË°åËÆ°ÁÆó‰∏ªÁ∫øÁ®ãÂú®ÊâßË°å‰ªªÂä°taskËøêË°åÁªìÊûú4950ÊâÄÊúâ‰ªªÂä°ÊâßË°åÂÆåÊØï ‰ΩøÁî®Callable+FutureTaskËé∑ÂèñÊâßË°åÁªìÊûú 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package main.java.com.study.thread;import java.util.concurrent.*;/** * @author: whb * @description: ‰ΩøÁî®Callable+FutureTaskËé∑ÂèñÊâßË°åÁªìÊûú */public class TestCallableFutureTask &#123; public static void main(String[] args) &#123; //Á¨¨‰∏ÄÁßçÊñπÂºè ExecutorService executor = Executors.newCachedThreadPool(); Task2 task = new Task2(); FutureTask&lt;Integer&gt; futureTask = new FutureTask&lt;Integer&gt;(task); executor.submit(futureTask); executor.shutdown(); //Á¨¨‰∫åÁßçÊñπÂºèÔºåÊ≥®ÊÑèËøôÁßçÊñπÂºèÂíåÁ¨¨‰∏ÄÁßçÊñπÂºèÊïàÊûúÊòØÁ±ª‰ººÁöÑÔºåÂè™‰∏çËøá‰∏Ä‰∏™‰ΩøÁî®ÁöÑÊòØExecutorServiceÔºå‰∏Ä‰∏™‰ΩøÁî®ÁöÑÊòØThread /*Task task = new Task(); FutureTask&lt;Integer&gt; futureTask = new FutureTask&lt;Integer&gt;(task); Thread thread = new Thread(futureTask); thread.start();*/ try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e1) &#123; e1.printStackTrace(); &#125; System.out.println("‰∏ªÁ∫øÁ®ãÂú®ÊâßË°å‰ªªÂä°"); try &#123; System.out.println("taskËøêË°åÁªìÊûú" + futureTask.get()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; System.out.println("ÊâÄÊúâ‰ªªÂä°ÊâßË°åÂÆåÊØï"); &#125;&#125;class Task2 implements Callable&lt;Integer&gt; &#123; @Override public Integer call() throws Exception &#123; System.out.println("Â≠êÁ∫øÁ®ãÂú®ËøõË°åËÆ°ÁÆó"); Thread.sleep(3000); int sum = 0; for (int i = 0; i &lt; 100; i++) sum += i; return sum; &#125;&#125; ÊâßË°åÁªìÊûúÔºö 1234Â≠êÁ∫øÁ®ãÂú®ËøõË°åËÆ°ÁÆó‰∏ªÁ∫øÁ®ãÂú®ÊâßË°å‰ªªÂä°taskËøêË°åÁªìÊûú4950ÊâÄÊúâ‰ªªÂä°ÊâßË°åÂÆåÊØï Â¶ÇÊûú‰∏∫‰∫ÜÂèØÂèñÊ∂àÊÄßËÄå‰ΩøÁî® Future ‰ΩÜÂèà‰∏çÊèê‰æõÂèØÁî®ÁöÑÁªìÊûúÔºåÂàôÂèØ‰ª•Â£∞Êòé Future&lt;?&gt; ÂΩ¢ÂºèÁ±ªÂûã„ÄÅÂπ∂ËøîÂõû null ‰Ωú‰∏∫Â∫ïÂ±Ç‰ªªÂä°ÁöÑÁªìÊûú„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-11‰πã-Áîü‰∫ßËÄÖÊ∂àË¥πËÄÖÊ®°Âûã]]></title>
    <url>%2Fposts%2F4189fc6.html</url>
    <content type="text"><![CDATA[Áîü‰∫ßËÄÖ/Ê∂àË¥πËÄÖÊ®°Âûã Áîü‰∫ß/Ê∂àË¥πËÄÖÈóÆÈ¢òÊòØ‰∏™ÈùûÂ∏∏ÂÖ∏ÂûãÁöÑÂ§öÁ∫øÁ®ãÈóÆÈ¢òÔºåÊ∂âÂèäÂà∞ÁöÑÂØπË±°ÂåÖÊã¨‚ÄúÁîü‰∫ßËÄÖ‚Äù„ÄÅ‚ÄúÊ∂àË¥πËÄÖ‚Äù„ÄÅ‚Äú‰ªìÂ∫ì‚ÄùÂíå‚Äú‰∫ßÂìÅ‚Äù„ÄÇ‰ªñ‰ª¨‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ãÔºö Áîü‰∫ßËÄÖ‰ªÖ‰ªÖÂú®‰ªìÂÇ®Êú™Êª°Êó∂ÂÄôÁîü‰∫ßÔºå‰ªìÊª°ÂàôÂÅúÊ≠¢Áîü‰∫ß„ÄÇ Ê∂àË¥πËÄÖ‰ªÖ‰ªÖÂú®‰ªìÂÇ®Êúâ‰∫ßÂìÅÊó∂ÂÄôÊâçËÉΩÊ∂àË¥πÔºå‰ªìÁ©∫ÂàôÁ≠âÂæÖ„ÄÇ ÂΩìÊ∂àË¥πËÄÖÂèëÁé∞‰ªìÂÇ®Ê≤°‰∫ßÂìÅÂèØÊ∂àË¥πÊó∂ÂÄô‰ºöÈÄöÁü•Áîü‰∫ßËÄÖÁîü‰∫ß„ÄÇ Áîü‰∫ßËÄÖÂú®Áîü‰∫ßÂá∫ÂèØÊ∂àË¥π‰∫ßÂìÅÊó∂ÂÄôÔºåÂ∫îËØ•ÈÄöÁü•Á≠âÂæÖÁöÑÊ∂àË¥πËÄÖÂéªÊ∂àË¥π„ÄÇ Á§∫‰æã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140package main.java.com.study.thread;/** * @author: whb * @description: Áîü‰∫ßËÄÖÊ∂àË¥πËÄÖÊ®°ÂûãÊµãËØï */public class ProducerConsumerDemo &#123; public static void main(String[] args) &#123; Depot mDepot = new Depot(100); Producer mPro = new Producer(mDepot); Customer mCus = new Customer(mDepot); mPro.produce(60); mPro.produce(120); mCus.consume(90); mCus.consume(150); mPro.produce(110); &#125;&#125;/** * ‰ªìÂ∫ì */class Depot &#123; /** * ‰ªìÂ∫ìÁöÑÂÆπÈáè */ private int capacity; /** * ‰ªìÂ∫ìÁöÑÂÆûÈôÖÊï∞Èáè */ private int size; public Depot(int capacity) &#123; this.capacity = capacity; this.size = 0; &#125; /** * Áîü‰∫ß * * @param val */ public synchronized void produce(int val) &#123; try &#123; // left Ë°®Á§∫‚ÄúÊÉ≥Ë¶ÅÁîü‰∫ßÁöÑÊï∞Èáè‚Äù(ÊúâÂèØËÉΩÁîü‰∫ßÈáèÂ§™Â§öÔºåÈúÄÂ§öÊ≠§Áîü‰∫ß) int left = val; while (left &gt; 0) &#123; // Â∫ìÂ≠òÂ∑≤Êª°Êó∂ÔºåÁ≠âÂæÖ‚ÄúÊ∂àË¥πËÄÖ‚ÄùÊ∂àË¥π‰∫ßÂìÅ„ÄÇ while (size &gt;= capacity) &#123; wait(); &#125; // Ëé∑Âèñ‚ÄúÂÆûÈôÖÁîü‰∫ßÁöÑÊï∞Èáè‚Äù(Âç≥Â∫ìÂ≠ò‰∏≠Êñ∞Â¢ûÁöÑÊï∞Èáè) // Â¶ÇÊûú‚ÄúÂ∫ìÂ≠ò‚Äù+‚ÄúÊÉ≥Ë¶ÅÁîü‰∫ßÁöÑÊï∞Èáè‚Äù&gt;‚ÄúÊÄªÁöÑÂÆπÈáè‚ÄùÔºåÂàô‚ÄúÂÆûÈôÖÂ¢ûÈáè‚Äù=‚ÄúÊÄªÁöÑÂÆπÈáè‚Äù-‚ÄúÂΩìÂâçÂÆπÈáè‚Äù„ÄÇ(Ê≠§Êó∂Â°´Êª°‰ªìÂ∫ì) // Âê¶Âàô‚ÄúÂÆûÈôÖÂ¢ûÈáè‚Äù=‚ÄúÊÉ≥Ë¶ÅÁîü‰∫ßÁöÑÊï∞Èáè‚Äù int inc = (size + left) &gt; capacity ? (capacity - size) : left; size += inc; left -= inc; System.out.printf("%s produce(%3d) --&gt; left=%3d, inc=%3d, size=%3d\n", Thread.currentThread().getName(), val, left, inc, size); // ÈÄöÁü•‚ÄúÊ∂àË¥πËÄÖ‚ÄùÂèØ‰ª•Ê∂àË¥π‰∫Ü„ÄÇ notifyAll(); &#125; &#125; catch (InterruptedException e) &#123; &#125; &#125; /** * Ê∂àË¥π * * @param val */ public synchronized void consume(int val) &#123; try &#123; // left Ë°®Á§∫‚ÄúÂÆ¢Êà∑Ë¶ÅÊ∂àË¥πÊï∞Èáè‚Äù(ÊúâÂèØËÉΩÊ∂àË¥πÈáèÂ§™Â§ßÔºåÂ∫ìÂ≠ò‰∏çÂ§üÔºåÈúÄÂ§öÊ≠§Ê∂àË¥π) int left = val; while (left &gt; 0) &#123; // Â∫ìÂ≠ò‰∏∫0Êó∂ÔºåÁ≠âÂæÖ‚ÄúÁîü‰∫ßËÄÖ‚ÄùÁîü‰∫ß‰∫ßÂìÅ„ÄÇ while (size &lt;= 0) &#123; wait(); &#125; // Ëé∑Âèñ‚ÄúÂÆûÈôÖÊ∂àË¥πÁöÑÊï∞Èáè‚Äù(Âç≥Â∫ìÂ≠ò‰∏≠ÂÆûÈôÖÂáèÂ∞ëÁöÑÊï∞Èáè) // Â¶ÇÊûú‚ÄúÂ∫ìÂ≠ò‚Äù&lt;‚ÄúÂÆ¢Êà∑Ë¶ÅÊ∂àË¥πÁöÑÊï∞Èáè‚ÄùÔºåÂàô‚ÄúÂÆûÈôÖÊ∂àË¥πÈáè‚Äù=‚ÄúÂ∫ìÂ≠ò‚ÄùÔºõ // Âê¶ÂàôÔºå‚ÄúÂÆûÈôÖÊ∂àË¥πÈáè‚Äù=‚ÄúÂÆ¢Êà∑Ë¶ÅÊ∂àË¥πÁöÑÊï∞Èáè‚Äù„ÄÇ int dec = (size &lt; left) ? size : left; size -= dec; left -= dec; System.out.printf("%s consume(%3d) &lt;-- left=%3d, dec=%3d, size=%3d\n", Thread.currentThread().getName(), val, left, dec, size); notifyAll(); &#125; &#125; catch (InterruptedException e) &#123; &#125; &#125; @Override public String toString() &#123; return "capacity:" + capacity + ", actual size:" + size; &#125;&#125;/** * Áîü‰∫ßËÄÖ */class Producer &#123; private Depot depot; public Producer(Depot depot) &#123; this.depot = depot; &#125; /** * Ê∂àË¥π‰∫ßÂìÅÔºöÊñ∞Âª∫‰∏Ä‰∏™Á∫øÁ®ãÂêë‰ªìÂ∫ì‰∏≠Áîü‰∫ß‰∫ßÂìÅ„ÄÇ * * @param val */ public void produce(final int val) &#123; new Thread(() -&gt; depot.produce(val)).start(); &#125;&#125;/** * Ê∂àË¥πËÄÖ */class Customer &#123; private Depot depot; public Customer(Depot depot) &#123; this.depot = depot; &#125; /** * Ê∂àË¥π‰∫ßÂìÅÔºöÊñ∞Âª∫‰∏Ä‰∏™Á∫øÁ®ã‰ªé‰ªìÂ∫ì‰∏≠Ê∂àË¥π‰∫ßÂìÅ„ÄÇ * * @param val */ public void consume(final int val) &#123; new Thread(() -&gt; depot.consume(val)).start(); &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËØ¥ÊòéÔºö &lt;/span&gt; ProducerÊòØ‚ÄúÁîü‰∫ßËÄÖ‚ÄùÁ±ªÔºåÂÆÉ‰∏é‚Äú‰ªìÂ∫ì(depot)‚ÄùÂÖ≥ËÅî„ÄÇÂΩìË∞ÉÁî®‚ÄúÁîü‰∫ßËÄÖ‚ÄùÁöÑproduce()ÊñπÊ≥ïÊó∂ÔºåÂÆÉ‰ºöÊñ∞Âª∫‰∏Ä‰∏™Á∫øÁ®ãÂπ∂Âêë‚Äú‰ªìÂ∫ì‚Äù‰∏≠Áîü‰∫ß‰∫ßÂìÅ„ÄÇ CustomerÊòØ‚ÄúÊ∂àË¥πËÄÖ‚ÄùÁ±ªÔºåÂÆÉ‰∏é‚Äú‰ªìÂ∫ì(depot)‚ÄùÂÖ≥ËÅî„ÄÇÂΩìË∞ÉÁî®‚ÄúÊ∂àË¥πËÄÖ‚ÄùÁöÑconsume()ÊñπÊ≥ïÊó∂ÔºåÂÆÉ‰ºöÊñ∞Âª∫‰∏Ä‰∏™Á∫øÁ®ãÂπ∂Ê∂àË¥π‚Äú‰ªìÂ∫ì‚Äù‰∏≠ÁöÑ‰∫ßÂìÅ„ÄÇ DepotÊòØ‚Äú‰ªìÂ∫ì‚ÄùÁ±ªÔºå‰ªìÂ∫ì‰∏≠ËÆ∞ÂΩï‚Äú‰ªìÂ∫ìÁöÑÂÆπÈáè(capacity)‚Äù‰ª•Âèä‚Äú‰ªìÂ∫ì‰∏≠ÂΩìÂâç‰∫ßÂìÅÊï∞ÁõÆ(size)‚Äù„ÄÇ ‚Äú‰ªìÂ∫ì‚ÄùÁ±ªÁöÑÁîü‰∫ßÊñπÊ≥ïproduce()ÂíåÊ∂àË¥πÊñπÊ≥ïconsume()ÊñπÊ≥ïÈÉΩÊòØsynchronizedÊñπÊ≥ïÔºåËøõÂÖ•synchronizedÊñπÊ≥ï‰ΩìÔºåÊÑèÂë≥ÁùÄËøô‰∏™Á∫øÁ®ãËé∑ÂèñÂà∞‰∫ÜËØ•‚Äú‰ªìÂ∫ì‚ÄùÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ„ÄÇËøô‰πüÂ∞±ÊòØËØ¥ÔºåÂêå‰∏ÄÊó∂Èó¥ÔºåÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁ∫øÁ®ãÂè™ËÉΩÊúâ‰∏Ä‰∏™ËÉΩËøêË°å„ÄÇÈÄöËøáÂêåÊ≠•ÈîÅÔºåÂÆûÁé∞‰∫ÜÂØπ‚ÄúÊÆãÈÖ∑‚ÄùÁöÑ‰∫íÊñ•ËÆøÈóÆ„ÄÇ ÂØπ‰∫éÁîü‰∫ßÊñπÊ≥ïproduce()ËÄåË®ÄÔºöÂΩì‰ªìÂ∫ìÊª°Êó∂ÔºåÁîü‰∫ßËÄÖÁ∫øÁ®ãÁ≠âÂæÖÔºåÈúÄË¶ÅÁ≠âÂæÖÊ∂àË¥πËÄÖÊ∂àË¥π‰∫ßÂìÅ‰πãÂêéÔºåÁîü‰∫ßÁ∫øÁ®ãÊâçËÉΩÁîü‰∫ßÔºõÁîü‰∫ßËÄÖÁ∫øÁ®ãÁîü‰∫ßÂÆå‰∫ßÂìÅ‰πãÂêéÔºå‰ºöÈÄöËøánotifyAll()Âî§ÈÜíÂêåÊ≠•ÈîÅ‰∏äÁöÑÊâÄÊúâÁ∫øÁ®ãÔºåÂåÖÊã¨‚ÄúÊ∂àË¥πËÄÖÁ∫øÁ®ã‚ÄùÔºåÂç≥Êàë‰ª¨ÊâÄËØ¥ÁöÑ‚ÄúÈÄöÁü•Ê∂àË¥πËÄÖËøõË°åÊ∂àË¥π‚Äù„ÄÇ ÂØπ‰∫éÊ∂àË¥πÊñπÊ≥ïconsume()ËÄåË®ÄÔºöÂΩì‰ªìÂ∫ì‰∏∫Á©∫Êó∂ÔºåÊ∂àË¥πËÄÖÁ∫øÁ®ãÁ≠âÂæÖÔºåÈúÄË¶ÅÁ≠âÂæÖÁîü‰∫ßËÄÖÁîü‰∫ß‰∫ßÂìÅ‰πãÂêéÔºåÊ∂àË¥πËÄÖÁ∫øÁ®ãÊâçËÉΩÊ∂àË¥πÔºõÊ∂àË¥πËÄÖÁ∫øÁ®ãÊ∂àË¥πÂÆå‰∫ßÂìÅ‰πãÂêéÔºå‰ºöÈÄöËøánotifyAll()Âî§ÈÜíÂêåÊ≠•ÈîÅ‰∏äÁöÑÊâÄÊúâÁ∫øÁ®ãÔºåÂåÖÊã¨‚ÄúÁîü‰∫ßËÄÖÁ∫øÁ®ã‚ÄùÔºåÂç≥Êàë‰ª¨ÊâÄËØ¥ÁöÑ‚ÄúÈÄöÁü•Áîü‰∫ßËÄÖËøõË°åÁîü‰∫ß‚Äù„ÄÇ &lt;span id=&quot;inline-green&quot;&gt; (Êüê‰∏ÄÊ¨°)ËøêË°åÁªìÊûúÔºö &lt;/span&gt; Thread-0 produce( 60) --&gt; left= 0, inc= 60, size= 60 Thread-4 produce(110) --&gt; left= 70, inc= 40, size=100 Thread-3 consume(150) &lt;-- left= 50, dec=100, size= 0 Thread-1 produce(120) --&gt; left= 20, inc=100, size=100 Thread-2 consume( 90) &lt;-- left= 0, dec= 90, size= 10 Thread-3 consume(150) &lt;-- left= 40, dec= 10, size= 0 Thread-4 produce(110) --&gt; left= 0, inc= 70, size= 70 Thread-3 consume(150) &lt;-- left= 0, dec= 40, size= 30 Thread-1 produce(120) --&gt; left= 0, inc= 20, size= 50]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè]]></title>
    <url>%2Fposts%2F2d3dc485.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ ÂÆö‰πâ‰∏Ä‰∏™Êìç‰Ωú‰∏≠ÁÆóÊ≥ïÁöÑÊ°ÜÊû∂ÔºåËÄåÂ∞Ü‰∏Ä‰∫õÊ≠•È™§Âª∂ËøüÂà∞Â≠êÁ±ª‰∏≠„ÄÇÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè‰ΩøÂæóÂ≠êÁ±ªÂèØ‰ª•‰∏çÊîπÂèò‰∏Ä‰∏™ÁÆóÊ≥ïÁöÑÁªìÊûÑÂç≥ÂèØÈáçÂÆö‰πâËØ•ÁÆóÊ≥ïÁöÑÊüê‰∫õÁâπÂÆöÊ≠•È™§„ÄÇÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊòØ‰∏ÄÁßçÂü∫‰∫éÁªßÊâøÁöÑ‰ª£Á†ÅÂ§çÁî®ÊäÄÊúØÔºåÂÆÉÊòØ‰∏ÄÁßçÁ±ªË°å‰∏∫ÂûãÊ®°Âºè„ÄÇ ‰∏ªË¶Å‰ΩúÁî® ÂΩìÂÆåÊàê‰∏Ä‰∏™Êìç‰ΩúÂÖ∑ÊúâÂõ∫ÂÆöÁöÑÊµÅÁ®ãÊó∂ÔºåÁî±ÊäΩË±°Âõ∫ÂÆöÊµÅÁ®ãÊ≠•È™§ÔºåÂÖ∑‰ΩìÊ≠•È™§‰∫§ÁªôÂ≠êÁ±ªËøõË°åÂÖ∑‰ΩìÂÆûÁé∞ÔºàÂõ∫ÂÆöÁöÑÊµÅÁ®ãÔºå‰∏çÂêåÁöÑÂÆûÁé∞Ôºâ„ÄÇ UMLÁ±ªÂõæ ËßíËâ≤ AbstractClassÔºàÊäΩË±°Á±ªÔºâÔºöÂú®ÊäΩË±°Á±ª‰∏≠ÂÆö‰πâ‰∫Ü‰∏ÄÁ≥ªÂàóÂü∫Êú¨Êìç‰Ωú(PrimitiveOperations)ÔºåËøô‰∫õÂü∫Êú¨Êìç‰ΩúÂèØ‰ª•ÊòØÂÖ∑‰ΩìÁöÑÔºå‰πüÂèØ‰ª•ÊòØÊäΩË±°ÁöÑÔºåÊØè‰∏Ä‰∏™Âü∫Êú¨Êìç‰ΩúÂØπÂ∫îÁÆóÊ≥ïÁöÑ‰∏Ä‰∏™Ê≠•È™§ÔºåÂú®ÂÖ∂Â≠êÁ±ª‰∏≠ÂèØ‰ª•ÈáçÂÆö‰πâÊàñÂÆûÁé∞Ëøô‰∫õÊ≠•È™§„ÄÇÂêåÊó∂ÔºåÂú®ÊäΩË±°Á±ª‰∏≠ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Ê®°ÊùøÊñπÊ≥ï(Template Method)ÔºåÁî®‰∫éÂÆö‰πâ‰∏Ä‰∏™ÁÆóÊ≥ïÁöÑÊ°ÜÊû∂ÔºåÊ®°ÊùøÊñπÊ≥ï‰∏ç‰ªÖÂèØ‰ª•Ë∞ÉÁî®Âú®ÊäΩË±°Á±ª‰∏≠ÂÆûÁé∞ÁöÑÂü∫Êú¨ÊñπÊ≥ïÔºå‰πüÂèØ‰ª•Ë∞ÉÁî®Âú®ÊäΩË±°Á±ªÁöÑÂ≠êÁ±ª‰∏≠ÂÆûÁé∞ÁöÑÂü∫Êú¨ÊñπÊ≥ïÔºåËøòÂèØ‰ª•Ë∞ÉÁî®ÂÖ∂‰ªñÂØπË±°‰∏≠ÁöÑÊñπÊ≥ï„ÄÇ ConcreteClassÔºàÂÖ∑‰ΩìÂ≠êÁ±ªÔºâÔºöÂÆÉÊòØÊäΩË±°Á±ªÁöÑÂ≠êÁ±ªÔºåÁî®‰∫éÂÆûÁé∞Âú®Áà∂Á±ª‰∏≠Â£∞ÊòéÁöÑÊäΩË±°Âü∫Êú¨Êìç‰Ωú‰ª•ÂÆåÊàêÂ≠êÁ±ªÁâπÂÆöÁÆóÊ≥ïÁöÑÊ≠•È™§Ôºå‰πüÂèØ‰ª•Ë¶ÜÁõñÂú®Áà∂Á±ª‰∏≠Â∑≤ÁªèÂÆûÁé∞ÁöÑÂÖ∑‰ΩìÂü∫Êú¨Êìç‰Ωú„ÄÇ Ê®°ÂºèÂéüÁêÜ ‰∏Ä‰∏™Ê®°ÊùøÊñπÊ≥ïÊòØÂÆö‰πâÂú®ÊäΩË±°Á±ª‰∏≠ÁöÑ„ÄÅÊääÂü∫Êú¨Êìç‰ΩúÊñπÊ≥ïÁªÑÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ÊÄªÁÆóÊ≥ïÊàñ‰∏Ä‰∏™ÊÄªË°å‰∏∫ÁöÑÊñπÊ≥ï„ÄÇËøô‰∏™Ê®°ÊùøÊñπÊ≥ïÂÆö‰πâÂú®ÊäΩË±°Á±ª‰∏≠ÔºåÂπ∂Áî±Â≠êÁ±ª‰∏çÂä†‰ª•‰øÆÊîπÂú∞ÂÆåÂÖ®ÁªßÊâø‰∏ãÊù•„ÄÇÊ®°ÊùøÊñπÊ≥ïÊòØ‰∏Ä‰∏™ÂÖ∑‰ΩìÊñπÊ≥ïÔºåÂÆÉÁªôÂá∫‰∫Ü‰∏Ä‰∏™È°∂Â±ÇÈÄªËæëÊ°ÜÊû∂ÔºåËÄåÈÄªËæëÁöÑÁªÑÊàêÊ≠•È™§Âú®ÊäΩË±°Á±ª‰∏≠ÂèØ‰ª•ÊòØÂÖ∑‰ΩìÊñπÊ≥ïÔºå‰πüÂèØ‰ª•ÊòØÊäΩË±°ÊñπÊ≥ï„ÄÇ Âü∫Êú¨ÊñπÊ≥ïÊòØÂÆûÁé∞ÁÆóÊ≥ïÂêÑ‰∏™Ê≠•È™§ÁöÑÊñπÊ≥ïÔºåÊòØÊ®°ÊùøÊñπÊ≥ïÁöÑÁªÑÊàêÈÉ®ÂàÜ„ÄÇÂü∫Êú¨ÊñπÊ≥ïÂèàÂèØ‰ª•ÂàÜ‰∏∫‰∏âÁßçÔºöÊäΩË±°ÊñπÊ≥ï(Abstract Method)„ÄÅÂÖ∑‰ΩìÊñπÊ≥ï(Concrete Method)ÂíåÈí©Â≠êÊñπÊ≥ï(Hook Method)„ÄÇ ÊäΩË±°ÊñπÊ≥ïÔºö‰∏Ä‰∏™ÊäΩË±°ÊñπÊ≥ïÁî±ÊäΩË±°Á±ªÂ£∞Êòé„ÄÅÁî±ÂÖ∂ÂÖ∑‰ΩìÂ≠êÁ±ªÂÆûÁé∞„ÄÇ ÂÖ∑‰ΩìÊñπÊ≥ïÔºö‰∏Ä‰∏™ÂÖ∑‰ΩìÊñπÊ≥ïÁî±‰∏Ä‰∏™ÊäΩË±°Á±ªÊàñÂÖ∑‰ΩìÁ±ªÂ£∞ÊòéÂπ∂ÂÆûÁé∞ÔºåÂÖ∂Â≠êÁ±ªÂèØ‰ª•ËøõË°åË¶ÜÁõñ‰πüÂèØ‰ª•Áõ¥Êé•ÁªßÊâø„ÄÇ Èí©Â≠êÊñπÊ≥ïÔºöÂèØ‰ª•‰∏é‰∏Ä‰∫õÂÖ∑‰ΩìÊ≠•È™§ ‚ÄúÊåÇÈí©‚Äù Ôºå‰ª•ÂÆûÁé∞Âú®‰∏çÂêåÊù°‰ª∂‰∏ãÊâßË°åÊ®°ÊùøÊñπÊ≥ï‰∏≠ÁöÑ‰∏çÂêåÊ≠•È™§„ÄÇ Ê®°Âºè‰ºòÁÇπ ÊèêÈ´ò‰ª£Á†ÅÂ§çÁî®ÊÄßÔºöÂ∞ÜÁõ∏ÂêåÈÉ®ÂàÜÁöÑ‰ª£Á†ÅÊîæÂú®ÊäΩË±°ÁöÑÁà∂Á±ª‰∏≠„ÄÇ ÊèêÈ´ò‰∫ÜÊãìÂ±ïÊÄßÔºöÂ∞Ü‰∏çÂêåÁöÑ‰ª£Á†ÅÊîæÂÖ•‰∏çÂêåÁöÑÂ≠êÁ±ª‰∏≠ÔºåÈÄöËøáÂØπÂ≠êÁ±ªÁöÑÊâ©Â±ïÂ¢ûÂä†Êñ∞ÁöÑË°å‰∏∫„ÄÇ ÂÆûÁé∞‰∫ÜÂèçÂêëÊéßÂà∂ÔºöÈÄöËøá‰∏Ä‰∏™Áà∂Á±ªË∞ÉÁî®ÂÖ∂Â≠êÁ±ªÁöÑÊìç‰ΩúÔºåÈÄöËøáÂØπÂ≠êÁ±ªÁöÑÊâ©Â±ïÂ¢ûÂä†Êñ∞ÁöÑË°å‰∏∫ÔºåÂÆûÁé∞‰∫ÜÂèçÂêëÊéßÂà∂ÔºåÁ¨¶Âêà‚ÄúÂçï‰∏ÄËÅåË¥£‚ÄùÂíå‚ÄúÂºÄÈó≠ÂéüÂàô‚Äù Ê®°ÂºèÁº∫ÁÇπ ÂºïÂÖ•‰∫ÜÊäΩË±°Á±ªÔºåÊØè‰∏Ä‰∏™‰∏çÂêåÁöÑÂÆûÁé∞ÈÉΩÈúÄË¶Å‰∏Ä‰∏™Â≠êÁ±ªÊù•ÂÆûÁé∞ÔºåÂØºËá¥Á±ªÁöÑ‰∏™Êï∞Â¢ûÂä†Ôºå‰ªéËÄåÂ¢ûÂä†‰∫ÜÁ≥ªÁªüÂÆûÁé∞ÁöÑÂ§çÊùÇÂ∫¶„ÄÇ ÈÄÇÁî®Âú∫ÊôØ ‰∏ÄÊ¨°ÊÄßÂÆûÁé∞‰∏Ä‰∏™ÁÆóÊ≥ïÁöÑ‰∏çÂèòÈÉ®ÂàÜÔºåÂπ∂Â∞ÜÂèØÂèòÁöÑË°å‰∏∫ÁïôÁªôÂ≠êÁ±ªÊù•ÂÆûÁé∞„ÄÇ ÂêÑÂ≠êÁ±ª‰∏≠ÂÖ¨ÂÖ±ÁöÑË°å‰∏∫Â∫îË¢´ÊèêÂèñÂá∫Êù•Âπ∂ÈõÜ‰∏≠Âà∞‰∏Ä‰∏™ÂÖ¨ÂÖ±Áà∂Á±ª‰∏≠‰ª•ÈÅøÂÖç‰ª£Á†ÅÈáçÂ§ç„ÄÇ ÈúÄË¶ÅÈÄöËøáÂ≠êÁ±ªÊù•ÂÜ≥ÂÆöÁà∂Á±ªÁÆóÊ≥ï‰∏≠Êüê‰∏™Ê≠•È™§ÊòØÂê¶ÊâßË°åÔºåÂÆûÁé∞Â≠êÁ±ªÂØπÁà∂Á±ªÁöÑÂèçÂêëÊéßÂà∂„ÄÇ ‰ΩøÁî®Ê≠•È™§ ÊäΩË±°Ê®°ÊùøÁ±ª 12345678910111213141516171819202122232425262728package main.java.com.study.designPatterns.templateMethod.demoOne;/** * @author: whb * @description: ÊäΩË±°Ê®°ÊùøÁ±ªÔºåÂÆö‰πâ‰∫Ü‰∏ÄÂ•óÁÆóÊ≥ïÊ°ÜÊû∂/ÊµÅÁ®ãÔºõ */public abstract class AbstractClass &#123; protected void step1() &#123; System.out.println("AbstractClass:step1"); &#125; protected void step2() &#123; System.out.println("AbstractClass:step2"); &#125; protected void step3() &#123; System.out.println("AbstractClass:step3"); &#125; /** * Âõ∫ÂÆöÁÆóÊ≥ïÔºåÂ£∞Êòé‰∏∫finalÊñπÊ≥ïÔºåÈÅøÂÖçÂ≠êÁ±ªË¶ÜÂÜô */ public final void templateMehthod() &#123; this.step1(); this.step2(); this.step3(); &#125;&#125; ÂÖ∑‰ΩìÂÆûÁé∞Á±ª 12345678910111213141516171819202122232425package main.java.com.study.designPatterns.templateMethod.demoOne;/** * @author: whb * @description: ÂÖ∑‰ΩìÂÆûÁé∞Á±ªA */public class ConcreteClassA extends AbstractClass &#123; @Override protected void step1() &#123; System.out.println("ConcreateClassA:step1"); &#125;&#125;package main.java.com.study.designPatterns.templateMethod.demoOne;/** * @author: whb * @description: ÂÖ∑‰ΩìÂÆûÁé∞Á±ªB */public class ConcreteClassB extends AbstractClass &#123; @Override protected void step2() &#123; System.out.println("ConcreateClassB:step2"); &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® 1234567891011121314package main.java.com.study.designPatterns.templateMethod.demoOne;/** * @author: whb * @description: ÊµãËØïÁ±ª */public class Client &#123; public static void main(String[] args) &#123; AbstractClass abc = new ConcreteClassA(); abc.templateMehthod(); abc = new ConcreteClassB(); abc.templateMehthod(); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÊçÆÂ∫ìÈîÅÊú∫Âà∂Âèä‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´]]></title>
    <url>%2Fposts%2F57a9974a.html</url>
    <content type="text"><![CDATA[ÂâçË®Ä Áî®T1‰ª£Ë°®‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊâßË°åËØ∑Ê±ÇÔºåT2‰ª£Ë°®Âè¶‰∏Ä‰∏™ËØ∑Ê±ÇÔºå‰πüÂèØ‰ª•ÁêÜËß£‰∏∫T1‰∏∫‰∏Ä‰∏™Á∫øÁ®ãÔºåT2 ‰∏∫Âè¶‰∏Ä‰∏™Á∫øÁ®ã„ÄÇT3,T4‰ª•Ê≠§Á±ªÊé®„ÄÇ ÈîÅÁöÑÁßçÁ±ª ÂÖ±‰∫´ÈîÅ(Shared lock) &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã1Ôºö 12T1: select * from table (ËØ∑ÊÉ≥Ë±°ÂÆÉÈúÄË¶ÅÊâßË°å1‰∏™Â∞èÊó∂‰πã‰πÖÔºåÂêéÈù¢ÁöÑsqlËØ≠Âè•ËØ∑ÈÉΩËøô‰πàÊÉ≥Ë±°ÔºâT2: update table set column1=&apos;hello&apos; &lt;i class=&quot;fa fa-cog&quot;&gt;&lt;/i&gt; ËøáÁ®ãÔºö T1ËøêË°å ÔºàÂä†ÂÖ±‰∫´ÈîÅ)T2ËøêË°åIf T1 ËøòÊ≤°ÊâßË°åÂÆåT2Á≠â......elseÈîÅË¢´ÈáäÊîæT2ÊâßË°åendif T2‰πãÊâÄ‰ª•Ë¶ÅÁ≠âÔºåÊòØÂõ†‰∏∫T2Âú®ÊâßË°åupdateÂâçÔºåËØïÂõæÂØπtableË°®Âä†‰∏Ä‰∏™Êéí‰ªñÈîÅÔºåËÄåÊï∞ÊçÆÂ∫ìËßÑÂÆöÂêå‰∏ÄËµÑÊ∫ê‰∏ä‰∏çËÉΩÂêåÊó∂ÂÖ±Â≠òÂÖ±‰∫´ÈîÅÂíåÊéí‰ªñÈîÅ„ÄÇÊâÄ‰ª•T2ÂøÖÈ°ªÁ≠âT1ÊâßË°åÂÆåÔºåÈáäÊîæ‰∫ÜÂÖ±‰∫´ÈîÅÔºåÊâçËÉΩÂä†‰∏äÊéí‰ªñÈîÅÔºåÁÑ∂ÂêéÊâçËÉΩÂºÄÂßãÊâßË°åupdateËØ≠Âè•„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã2Ôºö 12T1: select * from tableT2: select * from table ËøôÈáåT2‰∏çÁî®Á≠âÂæÖT1ÊâßË°åÂÆåÔºåËÄåÊòØÂèØ‰ª•È©¨‰∏äÊâßË°å„ÄÇ &lt;i class=&quot;fa fa-cog&quot;&gt;&lt;/i&gt; ÂàÜÊûêÔºö T1ËøêË°åÔºåÂàôtableË¢´Âä†ÈîÅÔºåÊØîÂ¶ÇÂè´lockAÔºåT2ËøêË°åÔºåÂÜçÂØπtableÂä†‰∏Ä‰∏™ÂÖ±‰∫´ÈîÅÔºåÊØîÂ¶ÇÂè´lockB„ÄÇ‰∏§‰∏™ÈîÅÊòØÂèØ‰ª•ÂêåÊó∂Â≠òÂú®‰∫éÂêå‰∏ÄËµÑÊ∫ê‰∏äÁöÑÔºàÊØîÂ¶ÇÂêå‰∏Ä‰∏™Ë°®‰∏äÔºâ„ÄÇËøôË¢´Áß∞‰∏∫ÂÖ±‰∫´ÈîÅ‰∏éÂÖ±‰∫´ÈîÅÂÖºÂÆπ„ÄÇËøôÊÑèÂë≥ÁùÄÂÖ±‰∫´ÈîÅ‰∏çÈòªÊ≠¢ÂÖ∂ÂÆÉsessionÂêåÊó∂ËØªËµÑÊ∫êÔºå‰ΩÜÈòªÊ≠¢ÂÖ∂ÂÆÉsession update &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã3Ôºö 123T1: select * from tableT2: select * from tableT3: update table set column1=&apos;hello&apos; ËøôÊ¨°ÔºåT2‰∏çÁî®Á≠âT1ËøêË°åÂÆåÂ∞±ËÉΩËøêË°åÔºåT3Âç¥Ë¶ÅÁ≠âT1ÂíåT2ÈÉΩËøêË°åÂÆåÊâçËÉΩËøêË°å„ÄÇ Âõ†‰∏∫T3ÂøÖÈ°ªÁ≠âT1ÂíåT2ÁöÑÂÖ±‰∫´ÈîÅÂÖ®ÈÉ®ÈáäÊîæÊâçËÉΩËøõË°åÂä†Êéí‰ªñÈîÅÁÑ∂ÂêéÊâßË°åupdateÊìç‰Ωú„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã4ÔºöÔºàÊ≠ªÈîÅÁöÑÂèëÁîüÔºâ 12345678T1:begin transelect * from table (holdlock) (holdlockÊÑèÊÄùÊòØÂä†ÂÖ±‰∫´ÈîÅÔºåÁõ¥Âà∞‰∫ãÁâ©ÁªìÊùüÊâçÈáäÊîæ)update table set column1=&apos;hello&apos;T2:begin transelect * from table(holdlock)update table set column1=&apos;world&apos; ÂÅáËÆæT1ÂíåT2ÂêåÊó∂ËææÂà∞selectÔºåT1ÂØπtableÂä†ÂÖ±‰∫´ÈîÅÔºåT2‰πüÂØπÂä†ÂÖ±‰∫´ÈîÅÔºåÂΩìT1ÁöÑselectÊâßË°åÂÆåÔºåÂáÜÂ§áÊâßË°åupdateÊó∂ÔºåÊ†πÊçÆÈîÅÊú∫Âà∂ÔºåT1ÁöÑÂÖ±‰∫´ÈîÅÈúÄË¶ÅÂçáÁ∫ßÂà∞Êéí‰ªñÈîÅÊâçËÉΩÊâßË°åÊé•‰∏ãÊù•ÁöÑupdate.Âú®ÂçáÁ∫ßÊéí‰ªñÈîÅÂâçÔºåÂøÖÈ°ªÁ≠âtable‰∏äÁöÑÂÖ∂ÂÆÉÂÖ±‰∫´ÈîÅÈáäÊîæÔºå‰ΩÜÂõ†‰∏∫holdlockËøôÊ†∑ÁöÑÂÖ±‰∫´ÈîÅÂè™ÊúâÁ≠â‰∫ãÂä°ÁªìÊùüÂêéÊâçÈáäÊîæÔºåÊâÄ‰ª•Âõ†‰∏∫T2ÁöÑÂÖ±‰∫´ÈîÅ‰∏çÈáäÊîæËÄåÂØºËá¥T1Á≠â(Á≠âT2ÈáäÊîæÂÖ±‰∫´ÈîÅÔºåËá™Â∑±Â•ΩÂçáÁ∫ßÊàêÊéí‰ªñÈîÅÔºâÔºåÂêåÁêÜÔºå‰πüÂõ†‰∏∫T1ÁöÑÂÖ±‰∫´ÈîÅ‰∏çÈáäÊîæËÄåÂØºËá¥T2Á≠â„ÄÇÊ≠ªÈîÅ‰∫ßÁîü‰∫Ü„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã5Ôºö 123456T1:begin tranupdate table set column1=&apos;hello&apos; where id=10T2:begin tranupdate table set column1=&apos;world&apos; where id=20 ËøôÁßçËØ≠Âè•ËôΩÁÑ∂ÊúÄ‰∏∫Â∏∏ËßÅÔºåÂæàÂ§ö‰∫∫ËßâÂæóÂÆÉÊúâÊú∫‰ºö‰∫ßÁîüÊ≠ªÈîÅÔºå‰ΩÜÂÆûÈôÖ‰∏äË¶ÅÁúãÊÉÖÂÜµÔºåÂ¶ÇÊûúidÊòØ‰∏ªÈîÆ‰∏äÈù¢ÊúâÁ¥¢ÂºïÔºåÈÇ£‰πàT1‰ºö‰∏Ä‰∏ãÂ≠êÊâæÂà∞ËØ•Êù°ËÆ∞ÂΩï(id=10ÁöÑËÆ∞ÂΩïÔºâÔºåÁÑ∂ÂêéÂØπËØ•Êù°ËÆ∞ÂΩïÂä†Êéí‰ªñÈîÅÔºåT2ÔºåÂêåÊ†∑Ôºå‰∏Ä‰∏ãÂ≠êÈÄöËøáÁ¥¢ÂºïÂÆö‰ΩçÂà∞ËÆ∞ÂΩïÔºåÁÑ∂ÂêéÂØπid=20ÁöÑËÆ∞ÂΩïÂä†Êéí‰ªñÈîÅÔºåËøôÊ†∑T1ÂíåT2ÂêÑÊõ¥Êñ∞ÂêÑÁöÑÔºå‰∫í‰∏çÂΩ±Âìç„ÄÇT2‰πü‰∏çÈúÄË¶ÅÁ≠â„ÄÇ ‰ΩÜÂ¶ÇÊûúidÊòØÊôÆÈÄöÁöÑ‰∏ÄÂàóÔºåÊ≤°ÊúâÁ¥¢Âºï„ÄÇÈÇ£‰πàÂΩìT1ÂØπid=10Ëøô‰∏ÄË°åÂä†Êéí‰ªñÈîÅÂêéÔºåT2‰∏∫‰∫ÜÊâæÂà∞id=20ÔºåÈúÄË¶ÅÂØπÂÖ®Ë°®Êâ´ÊèèÔºåÈÇ£‰πàÂ∞±‰ºöÈ¢ÑÂÖàÂØπË°®Âä†‰∏äÂÖ±‰∫´ÈîÅÊàñÊõ¥Êñ∞ÈîÅÊàñÊéí‰ªñÈîÅ(‰æùËµñ‰∫éÊï∞ÊçÆÂ∫ìÊâßË°åÁ≠ñÁï•ÂíåÊñπÂºèÔºåÊØîÂ¶ÇÁ¨¨‰∏ÄÊ¨°ÊâßË°åÂíåÁ¨¨‰∫åÊ¨°ÊâßË°åÊï∞ÊçÆÂ∫ìÊâßË°åÁ≠ñÁï•Â∞±‰ºö‰∏çÂêåÔºâ„ÄÇ‰ΩÜÂõ†‰∏∫T1Â∑≤Áªè‰∏∫‰∏ÄÊù°ËÆ∞ÂΩïÂä†‰∫ÜÊéí‰ªñÈîÅÔºåÂØºËá¥T2ÁöÑÂÖ®Ë°®Êâ´ÊèèËøõË°å‰∏ç‰∏ãÂéªÔºåÂ∞±ÂØºËá¥T2Á≠âÂæÖ„ÄÇ Ê≠ªÈîÅÊÄé‰πàËß£ÂÜ≥Âë¢Ôºü‰∏ÄÁßçÂäûÊ≥ïÊòØÔºåÂ¶Ç‰∏ãÔºö &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã6Ôºö 12345678T1:begin transelect * from table(xlock) (xlockÊÑèÊÄùÊòØÁõ¥Êé•ÂØπË°®Âä†Êéí‰ªñÈîÅ)update table set column1=&apos;hello&apos;T2:begin transelect * from table(xlock)update table set column1=&apos;world&apos; ÂΩìT1ÁöÑselect ÊâßË°åÊó∂ÔºåÁõ¥Êé•ÂØπË°®Âä†‰∏ä‰∫ÜÊéí‰ªñÈîÅÔºåT2Âú®ÊâßË°åselectÊó∂ÔºåÂ∞±ÈúÄË¶ÅÁ≠âT1‰∫ãÂä°ÂÆåÂÖ®ÊâßË°åÂÆåÊâçËÉΩÊâßË°å„ÄÇÊéíÈô§‰∫ÜÊ≠ªÈîÅÂèëÁîü„ÄÇ‰ΩÜÂΩìÁ¨¨‰∏â‰∏™userËøáÊù•ÊÉ≥ÊâßË°å‰∏Ä‰∏™Êü•ËØ¢ËØ≠Âè•Êó∂Ôºå‰πüÂõ†‰∏∫Êéí‰ªñÈîÅÁöÑÂ≠òÂú®ËÄå‰∏çÂæó‰∏çÁ≠âÂæÖÔºåÁ¨¨Âõõ‰∏™„ÄÅÁ¨¨‰∫î‰∏™user‰πü‰ºöÂõ†Ê≠§ËÄåÁ≠âÂæÖ„ÄÇÂú®Â§ßÂπ∂ÂèëÊÉÖÂÜµ‰∏ãÔºåËÆ©Â§ßÂÆ∂Á≠âÂæÖÊòæÂæóÊÄßËÉΩÂ∞±Â§™ÂèãÂ•Ω‰∫ÜÔºåÊâÄ‰ª•ÔºåËøôÈáåÂºïÂÖ•‰∫ÜÊõ¥Êñ∞ÈîÅ„ÄÇ Êõ¥Êñ∞ÈîÅ(Update lock) ‰∏∫Ëß£ÂÜ≥Ê≠ªÈîÅÔºåÂºïÂÖ•Êõ¥Êñ∞ÈîÅ„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã7Ôºö 12345678T1:begin transelect * from table(updlock) (Âä†Êõ¥Êñ∞ÈîÅ)update table set column1=&apos;hello&apos;T2:begin transelect * from table(updlock)update table set column1=&apos;world&apos; Êõ¥Êñ∞ÈîÅÁöÑÊÑèÊÄùÊòØÔºö‚ÄúÊàëÁé∞Âú®Âè™ÊÉ≥ËØªÔºå‰Ω†‰ª¨Âà´‰∫∫‰πüÂèØ‰ª•ËØªÔºå‰ΩÜÊàëÂ∞ÜÊù•ÂèØËÉΩ‰ºöÂÅöÊõ¥Êñ∞Êìç‰ΩúÔºåÊàëÂ∑≤ÁªèËé∑Âèñ‰∫Ü‰ªéÂÖ±‰∫´ÈîÅÔºàÁî®Êù•ËØªÔºâÂà∞Êéí‰ªñÈîÅÔºàÁî®Êù•Êõ¥Êñ∞ÔºâÁöÑËµÑÊ†º‚Äù„ÄÇ‰∏Ä‰∏™‰∫ãÁâ©Âè™ËÉΩÊúâ‰∏Ä‰∏™Êõ¥Êñ∞ÈîÅËé∑Ê≠§ËµÑÊ†º„ÄÇ T1ÊâßË°åselectÔºåÂä†Êõ¥Êñ∞ÈîÅ„ÄÇ T2ËøêË°åÔºåÂáÜÂ§áÂä†Êõ¥Êñ∞ÈîÅÔºå‰ΩÜÂèëÁé∞Â∑≤ÁªèÊúâ‰∏Ä‰∏™Êõ¥Êñ∞ÈîÅÂú®ÈÇ£ÂÑø‰∫ÜÔºåÂè™Â•ΩÁ≠â„ÄÇ ÂΩìÂêéÊù•Êúâuser3„ÄÅuser4...ÈúÄË¶ÅÊü•ËØ¢tableË°®‰∏≠ÁöÑÊï∞ÊçÆÊó∂ÔºåÂπ∂‰∏ç‰ºöÂõ†‰∏∫T1ÁöÑselectÂú®ÊâßË°åÂ∞±Ë¢´ÈòªÂ°ûÔºåÁÖßÊ†∑ËÉΩÊü•ËØ¢ÔºåÁõ∏ÊØîËµ∑‰æã6ÔºåËøôÊèêÈ´ò‰∫ÜÊïàÁéá„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã8Ôºö 123T1: select * from table(updlock) (Âä†Êõ¥Êñ∞ÈîÅÔºâT2: select * from table(updlock) (Á≠âÂæÖÔºåÁõ¥Âà∞T1ÈáäÊîæÊõ¥Êñ∞ÈîÅÔºåÂõ†‰∏∫Âêå‰∏ÄÊó∂Èó¥‰∏çËÉΩÂú®Âêå‰∏ÄËµÑÊ∫ê‰∏äÊúâ‰∏§‰∏™Êõ¥Êñ∞ÈîÅÔºâT3: select * from table (Âä†ÂÖ±‰∫´ÈîÅÔºå‰ΩÜ‰∏çÁî®Á≠âupdlockÈáäÊîæÔºåÂ∞±ÂèØ‰ª•ËØªÔºâ Ëøô‰∏™‰æãÂ≠êÊòØËØ¥ÊòéÔºöÂÖ±‰∫´ÈîÅÂíåÊõ¥Êñ∞ÈîÅÂèØ‰ª•ÂêåÊó∂Âú®Âêå‰∏Ä‰∏™ËµÑÊ∫ê‰∏ä„ÄÇËøôË¢´Áß∞‰∏∫ÂÖ±‰∫´ÈîÅÂíåÊõ¥Êñ∞ÈîÅÊòØÂÖºÂÆπÁöÑ„ÄÇ Êéí‰ªñÈîÅÔºàÁã¨Âç†ÈîÅÔºåExclusive Locks) ÂÖ∂ÂÆÉ‰∫ãÂä°Êó¢‰∏çËÉΩËØªÔºåÂèà‰∏çËÉΩÊîπÊéí‰ªñÈîÅÈîÅÂÆöÁöÑËµÑÊ∫ê„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã9Ôºö 12345678T1:beginselect * from table(updlock) (Âä†Êõ¥Êñ∞ÈîÅÔºâupdate table set column1=&apos;hello&apos; (ÈáçÁÇπÔºöËøôÈáåT1ÂÅöupdateÊó∂Ôºå‰∏çÈúÄË¶ÅÁ≠âT2ÈáäÊîæ‰ªÄ‰πàÔºåËÄåÊòØÁõ¥Êé•ÊääÊõ¥Êñ∞ÈîÅÂçáÁ∫ß‰∏∫Êéí‰ªñÈîÅÔºåÁÑ∂ÂêéÊâßË°åupdate)T2:beginselect * from table (T1Âä†ÁöÑÊõ¥Êñ∞ÈîÅ‰∏çÂΩ±ÂìçT2ËØªÂèñÔºâupdate table set column1=&apos;world&apos; (T2ÁöÑupdateÈúÄË¶ÅÁ≠âT1ÁöÑupdateÂÅöÂÆåÊâçËÉΩÊâßË°å) Á¨¨‰∏ÄÁßçÊÉÖÂÜµÔºöT1ÂÖàËææÔºåT2Á¥ßÊé•Âà∞ËææÔºõÂú®ËøôÁßçÊÉÖÂÜµ‰∏≠ÔºåT1ÂÖàÂØπË°®Âä†Êõ¥Êñ∞ÈîÅÔºåT2ÂØπË°®Âä†ÂÖ±‰∫´ÈîÅÔºåÂÅáËÆæT2ÁöÑselectÂÖàÊâßË°åÂÆåÔºåÂáÜÂ§áÊâßË°åupdateÔºåÂèëÁé∞Â∑≤ÊúâÊõ¥Êñ∞ÈîÅÂ≠òÂú®ÔºåT2Á≠â„ÄÇT1ËøôÊó∂ÊâçÊâßË°åÂÆåselectÔºåÂáÜÂ§áÊâßË°åupdateÔºåÊõ¥Êñ∞ÈîÅÂçáÁ∫ß‰∏∫Êéí‰ªñÈîÅÔºåÁÑ∂ÂêéÊâßË°åupdateÔºåÊâßË°åÂÆåÊàêÔºå‰∫ãÂä°ÁªìÊùüÔºåÈáäÊîæÈîÅÔºåT2ÊâçËΩÆÂà∞ÊâßË°åupdate„ÄÇ Á¨¨‰∫åÁßçÊÉÖÂÜµÔºöT2ÂÖàËææÔºåT1Á¥ßÊé•ËææÔºõÂú®ËøôÁßçÊÉÖÂÜµÔºåT2ÂÖàÂØπË°®Âä†ÂÖ±‰∫´ÈîÅÔºåT1Âà∞ËææÂêéÔºåT1ÂØπË°®Âä†Êõ¥Êñ∞ÈîÅÔºåÂÅáËÆæT2 selectÂÖàÁªìÊùüÔºåÂáÜÂ§áupdateÔºåÂèëÁé∞Â∑≤ÊúâÊõ¥Êñ∞ÈîÅÔºåÂàôÁ≠âÂæÖÔºåÂêéÈù¢Ê≠•È™§Â∞±Ë∑üÁ¨¨‰∏ÄÁßçÊÉÖÂÜµ‰∏ÄÊ†∑‰∫Ü„ÄÇ Ëøô‰∏™‰æãÂ≠êÊòØËØ¥ÊòéÔºöÊéí‰ªñÈîÅ‰∏éÊõ¥Êñ∞ÈîÅÊòØ‰∏çÂÖºÂÆπÁöÑÔºåÂÆÉ‰ª¨‰∏çËÉΩÂêåÊó∂Âä†Âú®Âêå‰∏ÄËµÑÊ∫ê‰∏ä„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã10Ôºö 12T1: update table set column1=&apos;hello&apos; where id&lt;1000T2: update table set column1=&apos;world&apos; where id&gt;1000 ÂÅáËÆæT1ÂÖàËææÔºåT2ÈöèÂêéËá≥ÔºåËøô‰∏™ËøáÁ®ã‰∏≠T1‰ºöÂØπid&lt;1000ÁöÑËÆ∞ÂΩïÊñΩÂä†Êéí‰ªñÈîÅ.‰ΩÜ‰∏ç‰ºöÈòªÂ°ûT2ÁöÑupdate„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã11Ôºö(ÂÅáËÆæidÈÉΩÊòØËá™Â¢ûÈïø‰∏îËøûÁª≠ÁöÑÔºâ 12T1: update table set column1=&apos;hello&apos; where id&lt;1000T2: update table set column1=&apos;world&apos; where id&gt;900 Â¶ÇÂêå‰æã10ÔºåT1ÂÖàËææÔºåT2Á´ãÂàª‰πüÂà∞ÔºåT1Âä†ÁöÑÊéí‰ªñÈîÅ‰ºöÈòªÂ°ûT2ÁöÑupdate„ÄÇ ÊÑèÂêëÈîÅ(Intent Locks) ÊÑèÂêëÈîÅÂ∞±ÊòØËØ¥Âú®Â±ãÔºàÊØîÂ¶Ç‰ª£Ë°®‰∏Ä‰∏™Ë°®ÔºâÈó®Âè£ËÆæÁΩÆ‰∏Ä‰∏™Ê†áËØÜÔºåËØ¥ÊòéÂ±ãÂ≠êÈáåÊúâ‰∫∫ÔºàÊØîÂ¶Ç‰ª£Ë°®Êüê‰∫õËÆ∞ÂΩïÔºâË¢´ÈîÅ‰Ωè‰∫Ü„ÄÇÂè¶‰∏Ä‰∏™‰∫∫ÊÉ≥Áü•ÈÅìÂ±ãÂ≠êÈáåÊòØÂê¶Êúâ‰∫∫Ë¢´ÈîÅÔºå‰∏çÁî®ËøõÂ±ãÂ≠êÈáå‰∏Ä‰∏™‰∏™ÂéªÊü•ÔºåÁõ¥Êé•ÁúãÈó®Âè£Ê†áËØÜÂ∞±Ë°å‰∫Ü„ÄÇ ÂΩì‰∏Ä‰∏™Ë°®‰∏≠ÁöÑÊüê‰∏ÄË°åË¢´Âä†‰∏äÊéí‰ªñÈîÅÂêéÔºåËØ•Ë°®Â∞±‰∏çËÉΩÂÜçË¢´Âä†Ë°®ÈîÅ„ÄÇÊï∞ÊçÆÂ∫ìÁ®ãÂ∫èÂ¶Ç‰ΩïÁü•ÈÅìËØ•Ë°®‰∏çËÉΩË¢´Âä†Ë°®ÈîÅÔºü‰∏ÄÁßçÊñπÂºèÊòØÈÄêÊù°ÁöÑÂà§Êñ≠ËØ•Ë°®ÁöÑÊØè‰∏ÄÊù°ËÆ∞ÂΩïÊòØÂê¶Â∑≤ÁªèÊúâÊéí‰ªñÈîÅÔºåÂè¶‰∏ÄÁßçÊñπÂºèÊòØÁõ¥Êé•Âú®Ë°®Ëøô‰∏ÄÂ±ÇÁ∫ßÊ£ÄÊü•Ë°®Êú¨Ë∫´ÊòØÂê¶ÊúâÊÑèÂêëÈîÅÔºå‰∏çÈúÄË¶ÅÈÄêÊù°Âà§Êñ≠„ÄÇÊòæÁÑ∂ÂêéËÄÖÊïàÁéáÈ´ò„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã12Ôºö 1234T1: begin transelect * from table (xlock) where id=10 --ÊÑèÊÄùÊòØÂØπid=10Ëøô‰∏ÄË°åÂº∫Âä†Êéí‰ªñÈîÅT2: begin transelect * from table (tablock) --ÊÑèÊÄùÊòØË¶ÅÂä†Ë°®Á∫ßÈîÅ ÂÅáËÆæT1ÂÖàÊâßË°åÔºåT2ÂêéÊâßË°åÔºåT2ÊâßË°åÊó∂ÔºåÊ¨≤Âä†Ë°®ÈîÅÔºå‰∏∫Âà§Êñ≠ÊòØÂê¶ÂèØ‰ª•Âä†Ë°®ÈîÅÔºåÊï∞ÊçÆÂ∫ìÁ≥ªÁªüË¶ÅÈÄêÊù°Âà§Êñ≠tableË°®ÊØèË°åËÆ∞ÂΩïÊòØÂê¶Â∑≤ÊúâÊéí‰ªñÈîÅÔºåÂ¶ÇÊûúÂèëÁé∞ÂÖ∂‰∏≠‰∏ÄË°åÂ∑≤ÁªèÊúâÊéí‰ªñÈîÅ‰∫ÜÔºåÂ∞±‰∏çÂÖÅËÆ∏ÂÜçÂä†Ë°®ÈîÅ‰∫Ü„ÄÇÂè™ÊòØËøôÊ†∑ÈÄêÊù°Âà§Êñ≠ÊïàÁéáÂ§™‰Ωé‰∫Ü„ÄÇ ÂÆûÈôÖ‰∏äÔºåÊï∞ÊçÆÂ∫ìÁ≥ªÁªü‰∏çÊòØËøôÊ†∑Â∑•‰ΩúÁöÑ„ÄÇÂΩìT1ÁöÑselectÊâßË°åÊó∂ÔºåÁ≥ªÁªüÂØπË°®tableÁöÑid=10ÁöÑËøô‰∏ÄË°åÂä†‰∫ÜÊéí‰ªñÈîÅÔºåËøòÂêåÊó∂ÊÇÑÊÇÑÁöÑÂØπÊï¥‰∏™Ë°®Âä†‰∫ÜÊÑèÂêëÊéí‰ªñÈîÅ(IX)ÔºåÂΩìT2ÊâßË°åË°®ÈîÅÊó∂ÔºåÂè™ÈúÄË¶ÅÁúãÂà∞Ëøô‰∏™Ë°®Â∑≤ÁªèÊúâÊÑèÂêëÊéí‰ªñÈîÅÂ≠òÂú®ÔºåÂ∞±Áõ¥Êé•Á≠âÂæÖÔºåËÄå‰∏çÈúÄË¶ÅÈÄêÊù°Ê£ÄÊü•ËµÑÊ∫ê‰∫Ü„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã13Ôºö 1234T1: begin tranupdate table set column1=&apos;hello&apos; where id=1T2: begin tranupdate table set column1=&apos;world&apos; where id=1 Ëøô‰∏™‰æãÂ≠êÂíå‰∏äÈù¢ÁöÑ‰æãÂ≠êÂÆûÈôÖÊïàÊûúÁõ∏ÂêåÔºåT1ÊâßË°åÔºåÁ≥ªÁªüÂêåÊó∂ÂØπË°åÂä†Êéí‰ªñÈîÅ„ÄÅÂØπÈ°µÂä†ÊÑèÂêëÊéí‰ªñÈîÅ„ÄÅÂØπË°®Âä†ÊÑèÂêëÊéí‰ªñÈîÅ„ÄÇ ËÆ°ÂàíÈîÅ(Schema Locks) &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã14Ôºö 1alter table .... (Âä†schema locksÔºåÁß∞‰πã‰∏∫Schema modification (Sch-M) locks DDLËØ≠Âè•ÈÉΩ‰ºöÂä†Sch-MÈîÅÔºåËØ•ÈîÅ‰∏çÂÖÅËÆ∏‰ªª‰ΩïÂÖ∂ÂÆÉsessionËøûÊé•ËØ•Ë°®„ÄÇËøûÈÉΩËøû‰∏ç‰∫ÜËøô‰∏™Ë°®‰∫ÜÔºåÂΩìÁÑ∂Êõ¥‰∏çÁî®ËØ¥ÊÉ≥ÂØπËØ•Ë°®ÊâßË°å‰ªÄ‰πàsqlËØ≠Âè•‰∫Ü„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã15Ôºö Áî®jdbcÂêëÊï∞ÊçÆÂ∫ìÂèëÈÄÅ‰∫Ü‰∏ÄÊù°Êñ∞ÁöÑsqlËØ≠Âè•ÔºåÊï∞ÊçÆÂ∫ìË¶ÅÂÖàÂØπ‰πãËøõË°åÁºñËØëÔºåÂú®ÁºñËØëÊúüÈó¥Ôºå‰πü‰ºöÂä†ÈîÅÔºåÁß∞‰πã‰∏∫ÔºöSchema stability (Sch-S) locks„ÄÇ 1select * from tableA ÁºñËØëËøôÊù°ËØ≠Âè•ËøáÁ®ã‰∏≠ÔºåÂÖ∂ÂÆÉsessionÂèØ‰ª•ÂØπË°®tableAÂÅö‰ªª‰ΩïÊìç‰Ωú(update,deleteÔºåÂä†Êéí‰ªñÈîÅÁ≠âÁ≠âÔºâÔºå‰ΩÜ‰∏çËÉΩÂÅöDDL(ÊØîÂ¶Çalter table)Êìç‰Ωú„ÄÇ Bulk Update Locks ‰∏ªË¶ÅÂú®ÊâπÈáèÂØºÊï∞ÊçÆÊó∂Áî®ÔºàÊØîÂ¶ÇÁî®Á±ª‰ºº‰∫éoracle‰∏≠ÁöÑimp/expÁöÑbcpÂëΩ‰ª§Ôºâ„ÄÇ ‰ΩïÊó∂Âä†ÈîÅ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã16Ôºö 12345T1: begin tranupdate table set column1=&apos;hello&apos; where id=1T2: SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED -- ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´‰∏∫ÂÖÅËÆ∏ËÑèËØªselect * from table where id=1 ËøôÈáåÔºåT2ÁöÑselectÂèØ‰ª•Êü•Âá∫ÁªìÊûú„ÄÇÂ¶ÇÊûú‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´‰∏çËÆæ‰∏∫ËÑèËØªÔºåÂàôT2‰ºöÁ≠âT1‰∫ãÂä°ÊâßË°åÂÆåÊâçËÉΩËØªÂá∫ÁªìÊûú„ÄÇ Êï∞ÊçÆÂ∫ìÂ¶Ç‰ΩïËá™Âä®Âä†ÈîÅÁöÑÔºü T1ÊâßË°åÔºåÊï∞ÊçÆÂ∫ìËá™Âä®Âä†Êéí‰ªñÈîÅ T2ÊâßË°åÔºåÊï∞ÊçÆÂ∫ìÂèëÁé∞‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÂÖÅËÆ∏ËÑèËØªÔºå‰æø‰∏çÂä†ÂÖ±‰∫´ÈîÅ„ÄÇ‰∏çÂä†ÂÖ±‰∫´ÈîÅÔºåÂàô‰∏ç‰ºö‰∏éÂ∑≤ÊúâÁöÑÊéí‰ªñÈîÅÂÜ≤Á™ÅÔºåÊâÄ‰ª•ÂèØ‰ª•ËÑèËØª„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã17Ôºö 123T1: begin tranupdate table set column1=&apos;hello&apos; where id=1T2: select * from table where id=1 ‚ÄìÊú™ÊåáÂÆöÈöîÁ¶ªÁ∫ßÂà´ÔºåÂàô‰ΩøÁî®Á≥ªÁªüÈªòËÆ§ÈöîÁ¶ªÁ∫ßÂà´ÔºåÂÆÉ‰∏çÂÖÅËÆ∏ËÑèËØª Â¶ÇÊûú‰∫ãÂä°Á∫ßÂà´‰∏çËÆæ‰∏∫ËÑèËØªÔºåÂàôÔºöT1ÊâßË°åÔºåÊï∞ÊçÆÂ∫ìËá™Âä®Âä†Êéí‰ªñÈîÅT2ÊâßË°åÔºåÊï∞ÊçÆÂ∫ìÂèëÁé∞‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´‰∏çÂÖÅËÆ∏ËÑèËØªÔºå‰æøÂáÜÂ§á‰∏∫Ê≠§Ê¨°selectËøáÁ®ãÂä†ÂÖ±‰∫´ÈîÅÔºå‰ΩÜÂèëÁé∞Âä†‰∏ç‰∏äÔºåÂõ†‰∏∫Â∑≤ÁªèÊúâÊéí‰ªñÈîÅ‰∫ÜÔºåÊâÄ‰ª•Â∞±Á≠âÂà∞T1ÊâßË°åÂÆåÔºåÈáäÊîæ‰∫ÜÊéí‰ªñÈîÅÔºåT2ÊâçÂä†‰∏ä‰∫ÜÂÖ±‰∫´ÈîÅÔºåÁÑ∂ÂêéÂºÄÂßãËØª.... ÈîÅÁöÑÁ≤íÂ∫¶ ÈîÅÁöÑÁ≤íÂ∫¶Â∞±ÊòØÊåáÈîÅÁöÑÁîüÊïàËåÉÂõ¥ÔºåÂ∞±ÊòØËØ¥ÊòØË°åÈîÅÔºåËøòÊòØÈ°µÈîÅÔºåËøòÊòØÊï¥Ë°®ÈîÅ. ÈîÅÁöÑÁ≤íÂ∫¶ÂêåÊ†∑Êó¢ÂèØ‰ª•Áî±Êï∞ÊçÆÂ∫ìËá™Âä®ÁÆ°ÁêÜÔºå‰πüÂèØ‰ª•ÈÄöËøáÊâãÂ∑•ÊåáÂÆöhintÊù•ÁÆ°ÁêÜ„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã18Ôºö 12T1: select * from table (paglock)T2: update table set column1=&apos;hello&apos; where id&gt;10 T1ÊâßË°åÊó∂Ôºå‰ºöÂÖàÂØπÁ¨¨‰∏ÄÈ°µÂä†ÈîÅÔºåËØªÂÆåÁ¨¨‰∏ÄÈ°µÂêéÔºåÈáäÊîæÈîÅÔºåÂÜçÂØπÁ¨¨‰∫åÈ°µÂä†ÈîÅÔºå‰æùÊ≠§Á±ªÊé®„ÄÇÂÅáËÆæÂâç10Ë°åËÆ∞ÂΩïÊÅ∞Â•ΩÊòØ‰∏ÄÈ°µ(ÂΩìÁÑ∂Ôºå‰∏ÄËà¨‰∏çÂèØËÉΩ‰∏ÄÈ°µÂè™Êúâ10Ë°åËÆ∞ÂΩïÔºâÔºåÈÇ£‰πàT1ÊâßË°åÂà∞Á¨¨‰∏ÄÈ°µÊü•ËØ¢Êó∂ÔºåÂπ∂‰∏ç‰ºöÈòªÂ°ûT2ÁöÑÊõ¥Êñ∞„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã19Ôºö 12T1: select * from table (rowlock)T2: update table set column1=&apos;hello&apos; where id=10 T1ÊâßË°åÊó∂ÔºåÂØπÊØèË°åÂä†ÂÖ±‰∫´ÈîÅÔºåËØªÂèñÔºåÁÑ∂ÂêéÈáäÊîæÔºåÂÜçÂØπ‰∏ã‰∏ÄË°åÂä†ÈîÅ;T2ÊâßË°åÊó∂Ôºå‰ºöÂØπid=10ÁöÑÈÇ£‰∏ÄË°åËØïÂõæÂä†ÈîÅÔºåÂè™Ë¶ÅËØ•Ë°åÊ≤°ÊúâË¢´T1Âä†‰∏äË°åÈîÅÔºåT2Â∞±ÂèØ‰ª•È°∫Âà©ÊâßË°åupdateÊìç‰Ωú„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã20Ôºö 12T1: select * from table (tablock)T2: update table set column1=&apos;hello&apos; where id = 10 T1ÊâßË°åÔºåÂØπÊï¥‰∏™Ë°®Âä†ÂÖ±‰∫´ÈîÅ. T1ÂøÖÈ°ªÂÆåÂÖ®Êü•ËØ¢ÂÆåÔºåT2ÊâçÂèØ‰ª•ÂÖÅËÆ∏Âä†ÈîÅÔºåÂπ∂ÂºÄÂßãÊõ¥Êñ∞„ÄÇ ÈîÅ‰∏é‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÁöÑ‰ºòÂÖàÁ∫ß ÊâãÂ∑•ÊåáÂÆöÁöÑÈîÅ‰ºòÂÖà„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã21Ôºö 1234567T1: SET TRANSACTION ISOLATION LEVEL SERIALIZABLEBEGIN TRANSACTIONSELECT * FROM table (NOLOCK)T2: update table set column1=&apos;hello&apos; where id=10 T1ÊòØ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´‰∏∫ÊúÄÈ´òÁ∫ßÔºå‰∏≤Ë°åÈîÅÔºåÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÊú¨Â∫îÂØπÂêéÈù¢ÁöÑselectËØ≠Âè•Ëá™Âä®Âä†Ë°®Á∫ßÈîÅÔºå‰ΩÜÂõ†‰∏∫ÊâãÂ∑•ÊåáÂÆö‰∫ÜNOLOCKÔºåÊâÄ‰ª•ËØ•selectËØ≠Âè•‰∏ç‰ºöÂä†‰ªª‰ΩïÈîÅÔºåÊâÄ‰ª•T2‰πüÂ∞±‰∏ç‰ºöÊúâ‰ªª‰ΩïÈòªÂ°û„ÄÇ Êï∞ÊçÆÂ∫ìÂÖ∂‰ªñÈîÅÂèäÂÖ∂Âå∫Âà´ holdlock ÂØπË°®Âä†ÂÖ±‰∫´ÈîÅÔºå‰∏î‰∫ãÂä°Ôºàcommit/rollbackÔºâ‰∏çÂÆåÊàêÔºåÂÖ±‰∫´ÈîÅ‰∏çÈáäÊîæ„ÄÇ tablock ÂØπË°®Âä†ÂÖ±‰∫´ÈîÅÔºåÂè™Ë¶Åstatement‰∏çÂÆåÊàêÔºåÂÖ±‰∫´ÈîÅ‰∏çÈáäÊîæ„ÄÇ tablock &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã22Ôºö 123456T1:begin transelect * from table (tablock)T2:begin tranupdate table set column1=&apos;hello&apos; where id = 10 T1ÊâßË°åÂÆåselectÔºåÂ∞±‰ºöÈáäÊîæÂÖ±‰∫´ÈîÅÔºåÁÑ∂ÂêéT2Â∞±ÂèØ‰ª•ÊâßË°åupdate„ÄÇ holdlock &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã23Ôºö 123456T1:begin transelect * from table (holdlock)T2:begin tranupdate table set column1=&apos;hello&apos; where id = 10 T1ÊâßË°åÂÆåselectÔºåÂÖ±‰∫´ÈîÅ‰ªçÁÑ∂‰∏ç‰ºöÈáäÊîæÔºå‰ªçÁÑ∂‰ºöË¢´hold(ÊåÅÊúâÔºâÔºåT2‰πüÂõ†Ê≠§ÂøÖÈ°ªÁ≠âÂæÖËÄå‰∏çËÉΩupdate. ÂΩìT1ÊúÄÂêéÊâßË°å‰∫ÜcommitÊàñrollbackËØ¥ÊòéËøô‰∏Ä‰∏™‰∫ãÂä°ÁªìÊùü‰∫ÜÔºåT2ÊâçÂèñÂæóÊâßË°åÊùÉ„ÄÇ TABLOCKX ÂØπË°®Âä†Êéí‰ªñÈîÅ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã24Ôºö 1T1: select * from table(tablockx) (Âº∫Ë°åÂä†Êéí‰ªñÈîÅÔºâ ÂÖ∂ÂÆÉsessionÂ∞±Êó†Ê≥ïÂØπËøô‰∏™Ë°®ËøõË°åËØªÂíåÊõ¥Êñ∞‰∫ÜÔºåÈô§ÈùûT1ÊâßË°åÂÆå‰∫ÜÔºåÂ∞±‰ºöËá™Âä®ÈáäÊîæÊéí‰ªñÈîÅ„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã25Ôºö 12T1: begin transelect * from table(tablockx) ÂçïÂçïselectÊâßË°åÂÆåËøò‰∏çË°åÔºåÂøÖÈ°ªÊï¥‰∏™‰∫ãÂä°ÂÆåÊàêÔºàcommitÊàñrollbackÂêéÔºâÊâç‰ºöÈáäÊîæÊéí‰ªñÈîÅ„ÄÇ xlock Âä†Êéí‰ªñÈîÅ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã26Ôºö 1select * from table(xlock paglock) ÂØπpageÂä†Êéí‰ªñÈîÅ xlockËøòÂèØËøô‰πàÁî®Ôºö 1select * from table(xlock tablock) ÊïàÊûúÁ≠âÂêå‰∫é 1select * from table(tablockx) ÈîÅÁöÑË∂ÖÊó∂Á≠âÂæÖ SET LOCK_TIMEOUT 4000 Áî®Êù•ËÆæÁΩÆÈîÅÁ≠âÂæÖÊó∂Èó¥ÔºåÂçï‰ΩçÊòØÊØ´ÁßíÔºå4000ÊÑèÂë≥ÁùÄÁ≠âÂæÖ4ÁßíÂèØ‰ª•Áî®select @@LOCK_TIMEOUTÊü•ÁúãÂΩìÂâçsessionÁöÑÈîÅË∂ÖÊó∂ËÆæÁΩÆ„ÄÇ-1 ÊÑèÂë≥ÁùÄÊ∞∏ËøúÁ≠âÂæÖ„ÄÇ &lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; ‰æã27Ôºö 1234T1: begin tranudpate table set column1=&apos;hello&apos; where id = 10T2: set lock_timeout 4000select * from table wehre id = 10 T2ÊâßË°åÊó∂Ôºå‰ºöÁ≠âÂæÖT1ÈáäÊîæÊéí‰ªñÈîÅÔºåÁ≠â‰∫Ü4ÁßíÈíüÔºåÂ¶ÇÊûúT1ËøòÊ≤°ÊúâÈáäÊîæÊéí‰ªñÈîÅÔºåT2Â∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏Ôºö Lock request time out period exceeded„ÄÇ ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ SQLÊ†áÂáÜËßÑÂÆö‰∫ÜÂõõ‰∏™ÈöîÁ¶ªÊ∞¥Âπ≥Ôºö READ_UNCOMMITTEDÔºàËØªÊú™Êèê‰∫§Ôºâ Ôºö‰∫ãÂä°‰∏≠ÁöÑ‰øÆÊîπÔºåÂç≥‰ΩøÊ≤°ÊúâÊèê‰∫§ÔºåÂÖ∂‰ªñ‰∫ãÂä°‰πüÂèØ‰ª•ÁúãÂæóÂà∞Ôºå‰ºöÂØºËá¥‚ÄúËÑèËØª‚Äù„ÄÅ‚ÄúÂπªËØª‚ÄùÂíå‚Äú‰∏çÂèØÈáçÂ§çËØª‚Äù„ÄÇREAD_COMMITTEDÔºàËØªÂ∑≤Êèê‰∫§ÔºâÔºöÂ§ßÂ§öÊï∞‰∏ªÊµÅÊï∞ÊçÆÂ∫ìÁöÑÈªòËÆ§‰∫ãÂä°Á≠âÁ∫ßÔºå‰øùËØÅ‰∫Ü‰∏Ä‰∏™‰∫ãÂä°‰∏ç‰ºöËØªÂà∞Âè¶‰∏Ä‰∏™Âπ∂Ë°å‰∫ãÂä°Â∑≤‰øÆÊîπ‰ΩÜÊú™Êèê‰∫§ÁöÑÊï∞ÊçÆÔºåÈÅøÂÖç‰∫Ü‚ÄúËÑèËØª‚ÄùÔºå‰ΩÜ‰∏çËÉΩÈÅøÂÖç‚ÄúÂπªËØª‚ÄùÂíå‚Äú‰∏çÂèØÈáçÂ§çËØª‚Äù„ÄÇËØ•Á∫ßÂà´ÈÄÇÁî®‰∫éÂ§ßÂ§öÊï∞Á≥ªÁªüÔºåÂ¶ÇOracle„ÄÅSQLServerÁ≠â„ÄÇREPETABLE_READÔºàÈáçÂ§çËØªÔºâ Ôºö‰øùËØÅ‰∫Ü‰∏Ä‰∏™‰∫ãÂä°‰∏ç‰ºö‰øÆÊîπÂ∑≤ÁªèÁî±Âè¶‰∏Ä‰∏™‰∫ãÂä°ËØªÂèñ‰ΩÜÊú™Êèê‰∫§ÔºàÂõûÊªöÔºâÁöÑÊï∞ÊçÆ„ÄÇÈÅøÂÖç‰∫Ü‚ÄúËÑèËØª‚ÄùÂíå‚Äú‰∏çÂèØÈáçÂ§çËØª‚ÄùÁöÑÊÉÖÂÜµÔºå‰ΩÜ‰∏çËÉΩÈÅøÂÖç‚ÄúÂπªËØª‚Äù„ÄÇMySQLÈªòËÆ§Â∞±ÊòØËøôÁßçÈöîÁ¶ªÁ∫ßÂà´„ÄÇSERIALIZABLEÔºà‰∏≤Ë°åÂåñÔºâÔºöÊúÄ‰∏•Ê†ºÁöÑÁ∫ßÂà´Ôºå‰∫ãÂä°‰∏≤Ë°åÊâßË°åÔºåËµÑÊ∫êÊ∂àËÄóÊúÄÂ§ßÔºõ ËÑèËØª ËÑèËØªÂèëÁîüÂú®ÔºöÂΩì‰∏Ä‰∏™‰∫ãÂä°ÂÖÅËÆ∏ËØªÂèñ‰∏Ä‰∏™Ë¢´ÂÖ∂‰ªñ‰∫ãÂä°ÊîπÂèò‰ΩÜÊòØÊú™Êèê‰∫§ÁöÑÁä∂ÊÄÅÊó∂ÔºåËøôÊòØÂõ†‰∏∫Âπ∂Ê≤°ÊúâÈîÅÈòªÊ≠¢ËØªÂèñ„ÄÇ Â¶Ç‰∏äÂõæÔºåÁ¨¨‰∫å‰∏™‰∫ãÂä°ËØªÂèñ‰∫Ü‰∏Ä‰∏™Âπ∂‰∏ç‰∏ÄËá¥ÁöÑÂÄº„ÄÇ‰∏ç‰∏ÄËá¥ÁöÑÊÑèÊÄùÊòØÔºåËøô‰∏™ÂÄºÊòØÊó†ÊïàÁöÑÔºåÂõ†‰∏∫‰øÆÊîπËøô‰∏™ÂÄºÁöÑÁ¨¨‰∏Ä‰∏™‰∫ãÂä°Â∑≤ÁªèÂõûÊªöÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÁ¨¨‰∏Ä‰∏™‰∫ãÂä°‰øÆÊîπ‰∫ÜËøô‰∏™ÂÄºÔºå‰ΩÜÊòØÊú™Êèê‰∫§Á°ÆËÆ§ÔºåÂç¥Ë¢´Á¨¨‰∫å‰∏™‰∫ãÂä°ËØªÂèñÔºåÁ¨¨‰∏Ä‰∏™‰∫ãÂä°ÂèàÊîæÂºÉ‰øÆÊîπÔºåËÄåÁ¨¨‰∫å‰∏™‰∫ãÂä°Â∞±ÂæóÂà∞‰∏Ä‰∏™ËÑèÊï∞ÊçÆ„ÄÇ ‰∏çÂèØÈáçÂ§çËØª ÂèçÂ§çËØªÂêå‰∏Ä‰∏™Êï∞ÊçÆÂç¥ÂæóÂà∞‰∏çÂêåÁöÑÁªìÊûúÔºåËøôÊòØÂõ†‰∏∫Âú®ÂèçÂ§çÂá†Ê¨°ËØªÂèñÁöÑËøáÁ®ã‰∏≠ÔºåÊï∞ÊçÆË¢´‰øÆÊîπ‰∫ÜÔºåËøôÂ∞±ÂØºËá¥Êàë‰ª¨‰ΩøÁî®‰∫ÜstaleÊï∞ÊçÆÔºåËøôÂèØ‰ª•ÈÄöËøá‰∏Ä‰∏™ÂÖ±‰∫´ËØªÈîÅÊù•ÈÅøÂÖç„ÄÇËøôÊòØÈöîÁ¶ªÁ∫ßÂà´READ_COMMITTED‰ºöÂØºËá¥ÂèØÈáçÂ§çËØªÁöÑÂéüÂõ†„ÄÇËÆæÁΩÆÂÖ±‰∫´ËØªÈîÅ‰πüÂ∞±ÊòØÈöîÁ¶ªÁ∫ßÂà´ÊèêÈ´òÂà∞REPETABLE_READ„ÄÇ ÂπªËØª ÂΩìÁ¨¨‰∫å‰∏™‰∫ãÂä°ÊèíÂÖ•‰∏ÄË°åËÆ∞ÂΩïÔºåËÄåÊ≠£Â•Ω‰πãÂâçÁ¨¨‰∏Ä‰∏™‰∫ãÂä°Êü•ËØ¢‰∫ÜÂ∫îËØ•ÂåÖÂê´Ëøô‰∏™Êñ∞Á∫™ÂΩïÁöÑÊï∞ÊçÆÔºåÈÇ£‰πàËøô‰∏™Êü•ËØ¢‰∫ãÂä°ÁöÑÁªìÊûúÈáåËÇØÂÆöÊ≤°ÊúâÂåÖÂê´Ëøô‰∏™ÂàöÂàöÊñ∞ÊèíÂÖ•ÁöÑÊï∞ÊçÆÔºåËøôÊó∂ÂπªÂΩ±ËØªÂèëÁîü‰∫ÜÔºåÈÄöËøáÂèòÂåñÈîÅÂíåpredicate lockingÈÅøÂÖç„ÄÇ ÊÄªÁªì ‰∏çÂèØÈáçÂ§çËØªÂíåÂπªËØªÁöÑÂå∫Âà´ÊòØÔºöÂâçËÄÖÊòØÊåáËØªÂà∞‰∫ÜÂ∑≤ÁªèÊèê‰∫§ÁöÑ‰∫ãÂä°ÁöÑÊõ¥ÊîπÊï∞ÊçÆÔºàupdateÊàñdeleteÔºâÔºåÂêéËÄÖÊòØÊåáËØªÂà∞‰∫ÜÂÖ∂‰ªñÂ∑≤ÁªèÊèê‰∫§‰∫ãÂä°ÁöÑÊñ∞Â¢ûÊï∞ÊçÆÔºàinsertÔºâ„ÄÇ ÂØπ‰∫éËøô‰∏§ÁßçÈóÆÈ¢òËß£ÂÜ≥ÈááÁî®‰∏çÂêåÁöÑÂäûÊ≥ïÔºåÈò≤Ê≠¢ËØªÂà∞Êõ¥ÊîπÊï∞ÊçÆÔºåÂè™ÈúÄÂØπÊìç‰ΩúÁöÑÊï∞ÊçÆÊ∑ªÂä†Ë°åÁ∫ßÈîÅÔºåÈò≤Ê≠¢Êìç‰Ωú‰∏≠ÁöÑÊï∞ÊçÆÂèëÁîüÂèòÂåñÔºõ Èò≤Ê≠¢ËØªÂà∞Êñ∞Â¢ûÊï∞ÊçÆÔºåÂæÄÂæÄÈúÄË¶ÅÊ∑ªÂä†Ë°®Á∫ßÈîÅÔºåÂ∞ÜÊï¥Âº†Ë°®ÈîÅÂÆöÔºåÈò≤Ê≠¢Êñ∞Â¢ûÊï∞ÊçÆÔºàoracleÈááÁî®Â§öÁâàÊú¨Êï∞ÊçÆÁöÑÊñπÂºèÂÆûÁé∞Ôºâ„ÄÇ READ_COMMITED ÊòØÊØîËæÉÊ≠£Á°ÆÁöÑÈÄâÊã©ÔºåÂõ†‰∏∫SERIALIZABLEËôΩÁÑ∂ËÉΩÂú®‰∏çÂêå‰∫ãÂä°ÂèëÁîüÊó∂ÈÅøÂÖçstaleÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØÈÅøÂÖç‰∏äËø∞‰∏¢Â§±ÂàöÂàö‰øÆÊîπÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØÊÄßËÉΩÊòØÊúÄ‰ΩéÁöÑÔºåÂõ†‰∏∫ÊòØ‰∏ÄÁßçÊúÄÂ§ßÂåñÁöÑ‰∏≤Ë°å„ÄÇ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
      </categories>
      <tags>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-10‰πã-Á∫øÁ®ã‰ºòÂÖàÁ∫ßÂíåÂÆàÊä§Á∫øÁ®ã]]></title>
    <url>%2Fposts%2Ffc4de834.html</url>
    <content type="text"><![CDATA[Á∫øÁ®ã‰ºòÂÖàÁ∫ß java ‰∏≠ÁöÑÁ∫øÁ®ã‰ºòÂÖàÁ∫ßÁöÑËåÉÂõ¥ÊòØ1ÔΩû10ÔºåÈªòËÆ§ÁöÑ‰ºòÂÖàÁ∫ßÊòØ5„ÄÇ‚ÄúÈ´ò‰ºòÂÖàÁ∫ßÁ∫øÁ®ã‚Äù‰ºö‰ºòÂÖà‰∫é‚Äú‰Ωé‰ºòÂÖàÁ∫ßÁ∫øÁ®ã‚ÄùÊâßË°å„ÄÇ java ‰∏≠Êúâ‰∏§ÁßçÁ∫øÁ®ãÔºöÁî®Êà∑Á∫øÁ®ãÂíåÂÆàÊä§Á∫øÁ®ã„ÄÇÂèØ‰ª•ÈÄöËøáisDaemon()ÊñπÊ≥ïÊù•Âå∫Âà´ÂÆÉ‰ª¨ÔºöÂ¶ÇÊûúËøîÂõûfalseÔºåÂàôËØ¥ÊòéËØ•Á∫øÁ®ãÊòØ‚ÄúÁî®Êà∑Á∫øÁ®ã‚ÄùÔºõÂê¶ÂàôÂ∞±ÊòØ‚ÄúÂÆàÊä§Á∫øÁ®ã‚Äù„ÄÇ Áî®Êà∑Á∫øÁ®ã‰∏ÄËà¨Áî®Êà∑ÊâßË°åÁî®Êà∑Á∫ß‰ªªÂä°ÔºåËÄåÂÆàÊä§Á∫øÁ®ã‰πüÂ∞±ÊòØ‚ÄúÂêéÂè∞Á∫øÁ®ã‚ÄùÔºå‰∏ÄËà¨Áî®Êù•ÊâßË°åÂêéÂè∞‰ªªÂä°„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºöJavaËôöÊãüÊú∫Âú®‚ÄúÁî®Êà∑Á∫øÁ®ã‚ÄùÈÉΩÁªìÊùüÂêé‰ºöÂêéÈÄÄÂá∫„ÄÇ JDK ‰∏≠ÂÖ≥‰∫éÁ∫øÁ®ã‰ºòÂÖàÁ∫ßÂíåÂÆàÊä§Á∫øÁ®ãÁöÑ‰ªãÁªçÂ¶Ç‰∏ãÔºö 1234567Every thread has a priority. Threads with higher priority are executed in preference to threads with lower priority. Each thread may or may not also be marked as a daemon. When code running in some thread creates a new Thread object, the new thread has its priority initially set equal to the priority of the creating thread, and is a daemon thread if and only if the creating thread is a daemon.When a Java Virtual Machine starts up, there is usually a single non-daemon thread (which typically calls the method named main of some designated class). The Java Virtual Machine continues to execute threads until either of the following occurs:The exit method of class Runtime has been called and the security manager has permitted the exit operation to take place.All threads that are not daemon threads have died, either by returning from the call to the run method or by throwing an exception that propagates beyond the run method. Marks this thread as either a daemon thread or a user thread. The Java Virtual Machine exits when the only threads running are all daemon threads. Â§ßËá¥ÊÑèÊÄùÊòØÔºö 1234567ÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™‰ºòÂÖàÁ∫ß„ÄÇ‚ÄúÈ´ò‰ºòÂÖàÁ∫ßÁ∫øÁ®ã‚Äù‰ºö‰ºòÂÖà‰∫é‚Äú‰Ωé‰ºòÂÖàÁ∫ßÁ∫øÁ®ã‚ÄùÊâßË°å„ÄÇÊØè‰∏™Á∫øÁ®ãÈÉΩÂèØ‰ª•Ë¢´Ê†áËÆ∞‰∏∫‰∏Ä‰∏™ÂÆàÊä§ËøõÁ®ãÊàñÈùûÂÆàÊä§ËøõÁ®ã„ÄÇÂú®‰∏Ä‰∫õËøêË°åÁöÑ‰∏ªÁ∫øÁ®ã‰∏≠ÂàõÂª∫Êñ∞ÁöÑÂ≠êÁ∫øÁ®ãÊó∂ÔºåÂ≠êÁ∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ßË¢´ËÆæÁΩÆ‰∏∫Á≠â‰∫é‚ÄúÂàõÂª∫ÂÆÉÁöÑ‰∏ªÁ∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ß‚ÄùÔºåÂΩì‰∏î‰ªÖÂΩì‚ÄúÂàõÂª∫ÂÆÉÁöÑ‰∏ªÁ∫øÁ®ãÊòØÂÆàÊä§Á∫øÁ®ã‚ÄùÊó∂‚ÄúÂ≠êÁ∫øÁ®ãÊâç‰ºöÊòØÂÆàÊä§Á∫øÁ®ã‚Äù„ÄÇÂΩìJavaËôöÊãüÊú∫ÂêØÂä®Êó∂ÔºåÈÄöÂ∏∏Êúâ‰∏Ä‰∏™Âçï‰∏ÄÁöÑÈùûÂÆàÊä§Á∫øÁ®ãÔºàËØ•Á∫øÁ®ãÈÄöËøáÊòØÈÄöËøámain()ÊñπÊ≥ïÂêØÂä®Ôºâ„ÄÇJVM‰ºö‰∏ÄÁõ¥ËøêË°åÁõ¥Âà∞‰∏ãÈù¢ÁöÑ‰ªªÊÑè‰∏Ä‰∏™Êù°‰ª∂ÂèëÁîüÔºåJVMÂ∞±‰ºöÁªàÊ≠¢ËøêË°åÔºö(01) Ë∞ÉÁî®‰∫Üexit()ÊñπÊ≥ïÔºåÂπ∂‰∏îexit()ÊúâÊùÉÈôêË¢´Ê≠£Â∏∏ÊâßË°å„ÄÇ(02) ÊâÄÊúâÁöÑ‚ÄúÈùûÂÆàÊä§Á∫øÁ®ã‚ÄùÈÉΩÊ≠ª‰∫Ü(Âç≥JVM‰∏≠‰ªÖ‰ªÖÂè™Êúâ‚ÄúÂÆàÊä§Á∫øÁ®ã‚Äù)„ÄÇÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩË¢´Ê†áËÆ∞‰∏∫‚ÄúÂÆàÊä§Á∫øÁ®ã‚ÄùÊàñ‚ÄúÁî®Êà∑Á∫øÁ®ã‚Äù„ÄÇÂΩìÂè™ÊúâÂÆàÊä§Á∫øÁ®ãËøêË°åÊó∂ÔºåJVM‰ºöËá™Âä®ÈÄÄÂá∫„ÄÇ Á∫øÁ®ã‰ºòÂÖàÁ∫ßÁöÑÁ§∫‰æã 12345678910111213141516171819202122232425262728293031323334353637383940package main.java.com.study.thread.priority;/** * @author: whb * @description: Á∫øÁ®ã‰ºòÂÖàÁ∫ßÊµãËØï */public class PriorityDemo &#123; public static void main(String[] args) &#123; System.out.println(Thread.currentThread().getName() + "(" + Thread.currentThread().getPriority() + ")"); // Êñ∞Âª∫Á∫øÁ®ãt1 Thread t1 = new MyThread("t1"); // Êñ∞Âª∫Á∫øÁ®ãt2 Thread t2 = new MyThread("t2"); // ËÆæÁΩÆt1ÁöÑ‰ºòÂÖàÁ∫ß‰∏∫1 t1.setPriority(1); // ËÆæÁΩÆt2ÁöÑ‰ºòÂÖàÁ∫ß‰∏∫10 t2.setPriority(10); // ÂêØÂä®t1 t1.start(); // ÂêØÂä®t2 t2.start(); &#125;&#125;class MyThread extends Thread &#123; public MyThread(String name) &#123; super(name); &#125; @Override public void run() &#123; for (int i = 0; i &lt; 5; i++) &#123; System.out.println(Thread.currentThread().getName() + "(" + Thread.currentThread().getPriority() + ")" + ", loop " + i); &#125; &#125;&#125;; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 1234567891011main(5)t1(1), loop 0t2(10), loop 0t1(1), loop 1t1(1), loop 2t1(1), loop 3t2(10), loop 1t1(1), loop 4t2(10), loop 2t2(10), loop 3t2(10), loop 4 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; ‰∏ªÁ∫øÁ®ãmainÁöÑ‰ºòÂÖàÁ∫ßÊòØ5„ÄÇ t1ÁöÑ‰ºòÂÖàÁ∫ßË¢´ËÆæ‰∏∫1ÔºåËÄåt2ÁöÑ‰ºòÂÖàÁ∫ßË¢´ËÆæ‰∏∫10„ÄÇcpuÂú®ÊâßË°åt1Âíåt2ÁöÑÊó∂ÂÄôÔºåÊ†πÊçÆÊó∂Èó¥ÁâáËΩÆÂæ™Ë∞ÉÂ∫¶ÔºåÊâÄ‰ª•ËÉΩÂ§üÂπ∂ÂèëÊâßË°å„ÄÇ ÂÆàÊä§Á∫øÁ®ãÁöÑÁ§∫‰æã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package main.java.com.study.thread.priority;/** * @author: whb * @description: ÂÆàÊä§Á∫øÁ®ãÁ§∫‰æã */public class DaemonDemo &#123; public static void main(String[] args) &#123; System.out.println(Thread.currentThread().getName() + "(isDaemon=" + Thread.currentThread().isDaemon() + ")"); // Êñ∞Âª∫Á∫øÁ®ãt1 Thread t1 = new MyThread2("t1"); // Êñ∞Âª∫Á∫øÁ®ãt2 Thread t2 = new MyDaemon("t2"); // ËÆæÁΩÆt2‰∏∫ÂÆàÊä§Á∫øÁ®ã t2.setDaemon(true); // ÂêØÂä®t1 t1.start(); // ÂêØÂä®t2 t2.start(); &#125;&#125;class MyThread2 extends Thread &#123; public MyThread2(String name) &#123; super(name); &#125; @Override public void run() &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; Thread.sleep(3); System.out.println(this.getName() + "(isDaemon=" + this.isDaemon() + ")" + ", loop " + i); &#125; &#125; catch (InterruptedException e) &#123; &#125; &#125;&#125;;class MyDaemon extends Thread &#123; public MyDaemon(String name) &#123; super(name); &#125; @Override public void run() &#123; try &#123; for (int i = 0; i &lt; 10000; i++) &#123; Thread.sleep(1); System.out.println(this.getName() + "(isDaemon=" + this.isDaemon() + ")" + ", loop " + i); &#125; &#125; catch (InterruptedException e) &#123; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910111213141516main(isDaemon=false)t2(isDaemon=true), loop 0t2(isDaemon=true), loop 1t1(isDaemon=false), loop 0t2(isDaemon=true), loop 2t1(isDaemon=false), loop 1t2(isDaemon=true), loop 3t2(isDaemon=true), loop 4t1(isDaemon=false), loop 2t2(isDaemon=true), loop 5t2(isDaemon=true), loop 6t2(isDaemon=true), loop 7t1(isDaemon=false), loop 3t2(isDaemon=true), loop 8t2(isDaemon=true), loop 9t1(isDaemon=false), loop 4 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; ‰∏ªÁ∫øÁ®ãmainÊòØÁî®Êà∑Á∫øÁ®ãÔºåÂÆÉÂàõÂª∫ÁöÑÂ≠êÁ∫øÁ®ãt1‰πüÊòØÁî®Êà∑Á∫øÁ®ã„ÄÇ t2ÊòØÂÆàÊä§Á∫øÁ®ã„ÄÇÂú®‚Äú‰∏ªÁ∫øÁ®ãmain‚ÄùÂíå‚ÄúÂ≠êÁ∫øÁ®ãt1‚Äù(ÂÆÉ‰ª¨ÈÉΩÊòØÁî®Êà∑Á∫øÁ®ã)ÊâßË°åÂÆåÊØïÔºåÂè™Ââ©t2Ëøô‰∏™ÂÆàÊä§Á∫øÁ®ãÁöÑÊó∂ÂÄôÔºåJVMËá™Âä®ÈÄÄÂá∫„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-09‰πã-Á∫øÁ®ã‰∏≠Êñ≠ÂíåÁªàÊ≠¢ÊñπÂºè]]></title>
    <url>%2Fposts%2Fbafe248a.html</url>
    <content type="text"><![CDATA[interrupt()ËØ¥Êòé ÂÖ≥‰∫éinterrupt()ÔºåjavaÁöÑdjkÊñáÊ°£ÊèèËø∞Â¶Ç‰∏ãÔºöhttp://docs.oracle.com/javase/7/docs/api/ Interrupts this thread. Unless the current thread is interrupting itself, which is always permitted, the checkAccess method of this thread is invoked, which may cause a SecurityException to be thrown. If this thread is blocked in an invocation of the wait(), wait(long), or wait(long, int) methods of the Object class, or of the join(), join(long), join(long, int), sleep(long), or sleep(long, int), methods of this class, then its interrupt status will be cleared and it will receive an InterruptedException. If this thread is blocked in an I/O operation upon an interruptible channel then the channel will be closed, the thread's interrupt status will be set, and the thread will receive a ClosedByInterruptException. If this thread is blocked in a Selector then the thread's interrupt status will be set and it will return immediately from the selection operation, possibly with a non-zero value, just as if the selector's wakeup method were invoked. If none of the previous conditions hold then this thread's interrupt status will be set. Interrupting a thread that is not alive need not have any effect. Â§ßËá¥ÊÑèÊÄùÊòØÔºö interrupt()ÁöÑ‰ΩúÁî®ÊòØ‰∏≠Êñ≠Êú¨Á∫øÁ®ã„ÄÇ Êú¨Á∫øÁ®ã‰∏≠Êñ≠Ëá™Â∑±ÊòØË¢´ÂÖÅËÆ∏ÁöÑÔºõÂÖ∂ÂÆÉÁ∫øÁ®ãË∞ÉÁî®Êú¨Á∫øÁ®ãÁöÑinterrupt()ÊñπÊ≥ïÊó∂Ôºå‰ºöÈÄöËøácheckAccess()Ê£ÄÊü•ÊùÉÈôê„ÄÇËøôÊúâÂèØËÉΩÊäõÂá∫SecurityExceptionÂºÇÂ∏∏„ÄÇ Â¶ÇÊûúÊú¨Á∫øÁ®ãÊòØÂ§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºöË∞ÉÁî®Á∫øÁ®ãÁöÑwait(), wait(long)Êàñwait(long, int)‰ºöËÆ©ÂÆÉËøõÂÖ•Á≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅÔºåÊàñËÄÖË∞ÉÁî®Á∫øÁ®ãÁöÑjoin(), join(long), join(long, int), sleep(long), sleep(long, int)‰πü‰ºöËÆ©ÂÆÉËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅ„ÄÇËã•Á∫øÁ®ãÂú®ÈòªÂ°ûÁä∂ÊÄÅÊó∂ÔºåË∞ÉÁî®‰∫ÜÂÆÉÁöÑinterrupt()ÊñπÊ≥ïÔºåÈÇ£‰πàÂÆÉÁöÑ‚Äú‰∏≠Êñ≠Áä∂ÊÄÅ‚Äù‰ºöË¢´Ê∏ÖÈô§Âπ∂‰∏î‰ºöÊî∂Âà∞‰∏Ä‰∏™InterruptedExceptionÂºÇÂ∏∏„ÄÇ‰æãÂ¶ÇÔºåÁ∫øÁ®ãÈÄöËøáwait()ËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÔºåÊ≠§Êó∂ÈÄöËøáinterrupt()‰∏≠Êñ≠ËØ•Á∫øÁ®ãÔºõË∞ÉÁî®interrupt()‰ºöÁ´ãÂç≥Â∞ÜÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Ê†áËÆ∞ËÆæ‰∏∫‚Äútrue‚ÄùÔºå‰ΩÜÊòØÁî±‰∫éÁ∫øÁ®ãÂ§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÊâÄ‰ª•ËØ•‚Äú‰∏≠Êñ≠Ê†áËÆ∞‚Äù‰ºöÁ´ãÂç≥Ë¢´Ê∏ÖÈô§‰∏∫‚Äúfalse‚ÄùÔºåÂêåÊó∂Ôºå‰ºö‰∫ßÁîü‰∏Ä‰∏™InterruptedExceptionÁöÑÂºÇÂ∏∏„ÄÇ Â¶ÇÊûúÁ∫øÁ®ãË¢´ÈòªÂ°ûÂú®‰∏Ä‰∏™SelectorÈÄâÊã©Âô®‰∏≠ÔºåÈÇ£‰πàÈÄöËøáinterrupt()‰∏≠Êñ≠ÂÆÉÊó∂ÔºõÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Ê†áËÆ∞‰ºöË¢´ËÆæÁΩÆ‰∏∫trueÔºåÂπ∂‰∏îÂÆÉ‰ºöÁ´ãÂç≥‰ªéÈÄâÊã©Êìç‰Ωú‰∏≠ËøîÂõû„ÄÇ Â¶ÇÊûú‰∏çÂ±û‰∫éÂâçÈù¢ÊâÄËØ¥ÁöÑÊÉÖÂÜµÔºåÈÇ£‰πàÈÄöËøáinterrupt()‰∏≠Êñ≠Á∫øÁ®ãÊó∂ÔºåÂÆÉÁöÑ‰∏≠Êñ≠Ê†áËÆ∞‰ºöË¢´ËÆæÁΩÆ‰∏∫‚Äútrue‚Äù„ÄÇ ‰∏≠Êñ≠‰∏Ä‰∏™‚ÄúÂ∑≤ÁªàÊ≠¢ÁöÑÁ∫øÁ®ã‚Äù‰∏ç‰ºö‰∫ßÁîü‰ªª‰ΩïÊìç‰Ωú„ÄÇ ÁªàÊ≠¢Á∫øÁ®ãÁöÑÊñπÂºè ÁªàÊ≠¢Â§Ñ‰∫é‚ÄúÈòªÂ°ûÁä∂ÊÄÅ‚ÄùÁöÑÁ∫øÁ®ã ÈÄöÂ∏∏ÔºåÊàë‰ª¨ÈÄöËøá‚Äú‰∏≠Êñ≠‚ÄùÊñπÂºèÁªàÊ≠¢Â§Ñ‰∫é‚ÄúÈòªÂ°ûÁä∂ÊÄÅ‚ÄùÁöÑÁ∫øÁ®ã„ÄÇ ÂΩìÁ∫øÁ®ãÁî±‰∫éË¢´Ë∞ÉÁî®‰∫Üsleep(), wait(), join()Á≠âÊñπÊ≥ïËÄåËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÔºõËã•Ê≠§Êó∂Ë∞ÉÁî®Á∫øÁ®ãÁöÑinterrupt()Â∞ÜÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Ê†áËÆ∞ËÆæ‰∏∫true„ÄÇÁî±‰∫éÂ§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºå‰∏≠Êñ≠Ê†áËÆ∞‰ºöË¢´Ê∏ÖÈô§ÔºåÂêåÊó∂‰∫ßÁîü‰∏Ä‰∏™InterruptedExceptionÂºÇÂ∏∏„ÄÇÂ∞ÜInterruptedExceptionÊîæÂú®ÈÄÇÂΩìÁöÑ‰∏∫Ê≠¢Â∞±ËÉΩÁªàÊ≠¢Á∫øÁ®ãÔºåÂΩ¢ÂºèÂ¶Ç‰∏ãÔºö 12345678910@Overridepublic void run() &#123; try &#123; while (true) &#123; // ÊâßË°å‰ªªÂä°... &#125; &#125; catch (InterruptedException ie) &#123; // Áî±‰∫é‰∫ßÁîüInterruptedExceptionÂºÇÂ∏∏ÔºåÈÄÄÂá∫while(true)Âæ™ÁéØÔºåÁ∫øÁ®ãÁªàÊ≠¢ÔºÅ &#125;&#125; &lt;span id=&quot;inline-green&quot;&gt; ËØ¥ÊòéÔºö &lt;/span&gt; &lt;p id=&quot;div-border-left-red&quot;&gt; Âú®while(true)‰∏≠‰∏çÊñ≠ÁöÑÊâßË°å‰ªªÂä°ÔºåÂΩìÁ∫øÁ®ãÂ§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÊó∂ÔºåË∞ÉÁî®Á∫øÁ®ãÁöÑinterrupt()‰∫ßÁîüInterruptedException‰∏≠Êñ≠„ÄÇ‰∏≠Êñ≠ÁöÑÊçïËé∑Âú®while(true)‰πãÂ§ñÔºåËøôÊ†∑Â∞±ÈÄÄÂá∫‰∫Üwhile(true)Âæ™ÁéØÔºÅ &lt;/p&gt; &lt;span id=&quot;inline-purple&quot;&gt; Ê≥®ÊÑèÔºö &lt;/span&gt; &lt;p id=&quot;div-border-left-blue&quot;&gt; ÂØπInterruptedExceptionÁöÑÊçïËé∑Âä°‰∏ÄËà¨ÊîæÂú®while(true)Âæ™ÁéØ‰ΩìÁöÑÂ§ñÈù¢ÔºåËøôÊ†∑ÔºåÂú®‰∫ßÁîüÂºÇÂ∏∏Êó∂Â∞±ÈÄÄÂá∫‰∫Üwhile(true)Âæ™ÁéØ„ÄÇÂê¶ÂàôÔºåInterruptedExceptionÂú®while(true)Âæ™ÁéØ‰Ωì‰πãÂÜÖÔºåÂ∞±ÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÊ∑ªÂä†ÈÄÄÂá∫Â§ÑÁêÜ„ÄÇ &lt;/p&gt; ÂΩ¢ÂºèÂ¶Ç‰∏ãÔºö 123456789101112@Overridepublic void run() &#123; while (true) &#123; try &#123; // ÊâßË°å‰ªªÂä°... &#125; catch (InterruptedException ie) &#123; // InterruptedExceptionÂú®while(true)Âæ™ÁéØ‰ΩìÂÜÖ„ÄÇ // ÂΩìÁ∫øÁ®ã‰∫ßÁîü‰∫ÜInterruptedExceptionÂºÇÂ∏∏Êó∂Ôºåwhile(true)‰ªçËÉΩÁªßÁª≠ËøêË°åÔºÅÈúÄË¶ÅÊâãÂä®ÈÄÄÂá∫ break; &#125; &#125;&#125; &lt;span id=&quot;inline-green&quot;&gt; ËØ¥ÊòéÔºö&lt;/span&gt; &lt;p id=&quot;div-border-left-red&quot;&gt; ‰∏äÈù¢ÁöÑInterruptedExceptionÂºÇÂ∏∏ÁöÑÊçïËé∑Âú®whle(true)‰πãÂÜÖ„ÄÇÂΩì‰∫ßÁîüInterruptedExceptionÂºÇÂ∏∏Êó∂ÔºåË¢´catchÂ§ÑÁêÜ‰πãÂ§ñÔºå‰ªçÁÑ∂Âú®while(true)Âæ™ÁéØ‰ΩìÂÜÖÔºõË¶ÅÈÄÄÂá∫while(true)Âæ™ÁéØ‰ΩìÔºåÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÊâßË°åÈÄÄÂá∫while(true)ÁöÑÊìç‰Ωú„ÄÇ &lt;/p&gt; ÁªàÊ≠¢Â§Ñ‰∫é‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùÁöÑÁ∫øÁ®ã ÈÄöÂ∏∏ÔºåÊàë‰ª¨ÈÄöËøá‚ÄúÊ†áËÆ∞‚ÄùÊñπÂºèÁªàÊ≠¢Â§Ñ‰∫é‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùÁöÑÁ∫øÁ®ã„ÄÇÂÖ∂‰∏≠ÔºåÂåÖÊã¨‚Äú‰∏≠Êñ≠Ê†áËÆ∞‚ÄùÂíå‚ÄúÈ¢ùÂ§ñÊ∑ªÂä†Ê†áËÆ∞‚Äù„ÄÇ ÈÄöËøá‚Äú‰∏≠Êñ≠Ê†áËÆ∞‚ÄùÁªàÊ≠¢Á∫øÁ®ã ÂΩ¢ÂºèÂ¶Ç‰∏ãÔºö 123456@Overridepublic void run() &#123; while (!isInterrupted()) &#123; // ÊâßË°å‰ªªÂä°... &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËØ¥ÊòéÔºö &lt;/span&gt; &lt;p id=&quot;div-border-left-green&quot;&gt; isInterrupted()ÊòØÂà§Êñ≠Á∫øÁ®ãÁöÑ‰∏≠Êñ≠Ê†áËÆ∞ÊòØ‰∏çÊòØ‰∏∫true„ÄÇÂΩìÁ∫øÁ®ãÂ§Ñ‰∫éËøêË°åÁä∂ÊÄÅÔºåÂπ∂‰∏îÊàë‰ª¨ÈúÄË¶ÅÁªàÊ≠¢ÂÆÉÊó∂ÔºõÂèØ‰ª•Ë∞ÉÁî®Á∫øÁ®ãÁöÑinterrupt()ÊñπÊ≥ïÔºå‰ΩøÁî®Á∫øÁ®ãÁöÑ‰∏≠Êñ≠Ê†áËÆ∞‰∏∫trueÔºåÂç≥isInterrupted()‰ºöËøîÂõûtrue„ÄÇÊ≠§Êó∂ÔºåÂ∞±‰ºöÈÄÄÂá∫whileÂæ™ÁéØ„ÄÇ &lt;/p&gt; &lt;font color=&quot;red&quot;&gt; Ê≥®ÊÑèÔºöinterrupt()Âπ∂‰∏ç‰ºöÁªàÊ≠¢Â§Ñ‰∫é‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùÁöÑÁ∫øÁ®ãÔºÅÂÆÉ‰ºöÂ∞ÜÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Ê†áËÆ∞ËÆæ‰∏∫true„ÄÇ &lt;/font&gt; ÈÄöËøá‚ÄúÈ¢ùÂ§ñÊ∑ªÂä†Ê†áËÆ∞‚Äù ÂΩ¢ÂºèÂ¶Ç‰∏ãÔºö 1234567891011private volatile boolean flag= true;protected void stopTask() &#123; flag = false;&#125;@Overridepublic void run() &#123; while (flag) &#123; // ÊâßË°å‰ªªÂä°... &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËØ¥ÊòéÔºö &lt;/span&gt; &lt;p id=&quot;div-border-left-green&quot;&gt; Á∫øÁ®ã‰∏≠Êúâ‰∏Ä‰∏™flagÊ†áËÆ∞ÔºåÂÆÉÁöÑÈªòËÆ§ÂÄºÊòØtrueÔºõÂπ∂‰∏îÊàë‰ª¨Êèê‰æõstopTask()Êù•ËÆæÁΩÆflagÊ†áËÆ∞„ÄÇÂΩìÊàë‰ª¨ÈúÄË¶ÅÁªàÊ≠¢ËØ•Á∫øÁ®ãÊó∂ÔºåË∞ÉÁî®ËØ•Á∫øÁ®ãÁöÑstopTask()ÊñπÊ≥ïÂ∞±ÂèØ‰ª•ËÆ©Á∫øÁ®ãÈÄÄÂá∫whileÂæ™ÁéØ„ÄÇ &lt;/p&gt; &lt;font color=&quot;red&quot;&gt; Ê≥®ÊÑèÔºöÂ∞ÜflagÂÆö‰πâ‰∏∫volatileÁ±ªÂûãÔºåÊòØ‰∏∫‰∫Ü‰øùËØÅflagÁöÑÂèØËßÅÊÄß„ÄÇÂç≥ÂÖ∂ÂÆÉÁ∫øÁ®ãÈÄöËøástopTask()‰øÆÊîπ‰∫Üflag‰πãÂêéÔºåÊú¨Á∫øÁ®ãËÉΩÁúãÂà∞‰øÆÊîπÂêéÁöÑflagÁöÑÂÄº„ÄÇ &lt;/font&gt; ÁªºÂêàÁ∫øÁ®ãÂ§Ñ‰∫é‚ÄúÈòªÂ°ûÁä∂ÊÄÅ‚ÄùÂíå‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùÁöÑÁªàÊ≠¢ÊñπÂºèÔºåÊØîËæÉ &lt;span id=&quot;inline-purple&quot;&gt; ÈÄöÁî®ÁöÑÁªàÊ≠¢Á∫øÁ®ãÁöÑÂΩ¢Âºè &lt;/span&gt; Â¶Ç‰∏ãÔºö 1234567891011@Overridepublic void run() &#123; try &#123; // 1. isInterrupted()‰øùËØÅÔºåÂè™Ë¶Å‰∏≠Êñ≠Ê†áËÆ∞‰∏∫trueÂ∞±ÁªàÊ≠¢Á∫øÁ®ã„ÄÇ while (!isInterrupted()) &#123; // ÊâßË°å‰ªªÂä°... &#125; &#125; catch (InterruptedException ie) &#123; // 2. InterruptedExceptionÂºÇÂ∏∏‰øùËØÅÔºåÂΩìInterruptedExceptionÂºÇÂ∏∏‰∫ßÁîüÊó∂ÔºåÁ∫øÁ®ãË¢´ÁªàÊ≠¢„ÄÇ &#125;&#125; ÁªàÊ≠¢Á∫øÁ®ãÁöÑÁ§∫‰æã È¶ñÂÖàÂÆö‰πâÁ∫øÁ®ãÂØπË±°MyThread 1234567891011121314151617181920212223242526package main.java.com.study.thread.interrupt;/** * @author: whb * @description: Á∫øÁ®ãÂØπË±° */public class MyThread extends Thread &#123; public MyThread(String name) &#123; super(name); &#125; @Override public void run() &#123; int i = 0; while (!isInterrupted()) &#123; try &#123; Thread.sleep(100); &#125; catch (InterruptedException ie) &#123; System.out.println(Thread.currentThread().getName() + " (" + this.getState() + ") catch InterruptedException."); &#125; i++; System.out.println(Thread.currentThread().getName() + " (" + this.getState() + ") loop " + i); &#125; &#125;&#125; 123456789101112131415161718192021222324252627282930package main.java.com.study.thread.interrupt;/** * @author: whb * @description: Á∫øÁ®ãÁªàÊ≠¢Á§∫‰æã1 */public class Demo1 &#123; public static void main(String[] args) &#123; try &#123; // Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt1‚Äù Thread t1 = new MyThread("t1"); System.out.println(t1.getName() + " (" + t1.getState() + ") is new."); t1.start(); // ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù System.out.println(t1.getName() + " (" + t1.getState() + ") is started."); // ‰∏ªÁ∫øÁ®ã‰ºëÁú†300msÔºåÁÑ∂Âêé‰∏ªÁ∫øÁ®ãÁªôt1Âèë‚Äú‰∏≠Êñ≠‚ÄùÊåá‰ª§„ÄÇ Thread.sleep(300); t1.interrupt(); System.out.println(t1.getName() + " (" + t1.getState() + ") is interrupted."); // ‰∏ªÁ∫øÁ®ã‰ºëÁú†300msÔºåÁÑ∂ÂêéÊü•Áúãt1ÁöÑÁä∂ÊÄÅ„ÄÇ Thread.sleep(300); System.out.println(t1.getName() + " (" + t1.getState() + ") is interrupted now."); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 1234567t1 (NEW) is new.t1 (RUNNABLE) is started.t1 (RUNNABLE) loop 1t1 (RUNNABLE) loop 2t1 (TIMED_WAITING) is interrupted.t1 (RUNNABLE) catch InterruptedException.t1 (TERMINATED) is interrupted now. &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; ‰∏ªÁ∫øÁ®ãmain‰∏≠ÈÄöËøánew MyThread(&quot;t1&quot;)ÂàõÂª∫Á∫øÁ®ãt1Ôºå‰πãÂêéÈÄöËøát1.start()ÂêØÂä®Á∫øÁ®ãt1„ÄÇ t1ÂêØÂä®‰πãÂêéÔºå‰ºö‰∏çÊñ≠ÁöÑÊ£ÄÊü•ÂÆÉÁöÑ‰∏≠Êñ≠Ê†áËÆ∞ÔºåÂ¶ÇÊûú‰∏≠Êñ≠Ê†áËÆ∞‰∏∫‚Äúfalse‚ÄùÔºõÂàô‰ºëÁú†100ms„ÄÇ t1‰ºëÁú†‰πãÂêéÔºå‰ºöÂàáÊç¢Âà∞‰∏ªÁ∫øÁ®ãmainÔºõ‰∏ªÁ∫øÁ®ãÂÜçÊ¨°ËøêË°åÊó∂Ôºå‰ºöÊâßË°åt1.interrupt()‰∏≠Êñ≠Á∫øÁ®ãt1„ÄÇt1Êî∂Âà∞‰∏≠Êñ≠Êåá‰ª§‰πãÂêéÔºå‰ºöÂ∞Üt1ÁöÑ‰∏≠Êñ≠Ê†áËÆ∞ËÆæÁΩÆ‚Äúfalse‚ÄùÔºåËÄå‰∏î‰ºöÊäõÂá∫InterruptedExceptionÂºÇÂ∏∏„ÄÇÂú®t1ÁöÑrun()ÊñπÊ≥ï‰∏≠ÔºåÊòØÂú®Âæ™ÁéØ‰Ωìwhile‰πãÂ§ñÊçïËé∑ÁöÑÂºÇÂ∏∏ÔºõÂõ†Ê≠§Âæ™ÁéØË¢´ÁªàÊ≠¢„ÄÇ ÂØπ‰∏äÈù¢ÁöÑ‰ª£Á†ÅËøõË°åÂ∞èÂ∞èÁöÑ‰øÆÊîπÔºåÂ∞Ürun()ÊñπÊ≥ï‰∏≠ÊçïËé∑InterruptedExceptionÂºÇÂ∏∏ÁöÑ‰ª£Á†ÅÂùóÁßªÂà∞whileÂæ™ÁéØ‰ΩìÂÜÖ„ÄÇ 12345678910111213141516171819202122232425262728293031package main.java.com.study.thread.interrupt;/** * @author: whb * @description: Á∫øÁ®ãÁªàÊ≠¢Á§∫‰æã2 */public class Demo2 &#123; public static void main(String[] args) &#123; try &#123; // Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt1‚Äù Thread t1 = new MyThread("t1"); System.out.println(t1.getName() + " (" + t1.getState() + ") is new."); // ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù t1.start(); System.out.println(t1.getName() + " (" + t1.getState() + ") is started."); // ‰∏ªÁ∫øÁ®ã‰ºëÁú†300msÔºåÁÑ∂Âêé‰∏ªÁ∫øÁ®ãÁªôt1Âèë‚Äú‰∏≠Êñ≠‚ÄùÊåá‰ª§„ÄÇ Thread.sleep(300); t1.interrupt(); System.out.println(t1.getName() + " (" + t1.getState() + ") is interrupted."); // ‰∏ªÁ∫øÁ®ã‰ºëÁú†300msÔºåÁÑ∂ÂêéÊü•Áúãt1ÁöÑÁä∂ÊÄÅ„ÄÇ Thread.sleep(300); System.out.println(t1.getName() + " (" + t1.getState() + ") is interrupted now."); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 123456789101112131415t1 (NEW) is new.t1 (RUNNABLE) is started.t1 (RUNNABLE) loop 1t1 (RUNNABLE) loop 2t1 (TIMED_WAITING) is interrupted.t1 (RUNNABLE) catch InterruptedException.t1 (RUNNABLE) loop 3t1 (RUNNABLE) loop 4t1 (RUNNABLE) loop 5t1 (TIMED_WAITING) is interrupted now.t1 (RUNNABLE) loop 6t1 (RUNNABLE) loop 7t1 (RUNNABLE) loop 8t1 (RUNNABLE) loop 9... &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; &lt;font color=&quot;red&quot;&gt; Á®ãÂ∫èËøõÂÖ•‰∫ÜÊ≠ªÂæ™ÁéØÔºÅ &lt;/font&gt; ‰∏∫‰ªÄ‰πà‰ºöËøôÊ†∑Âë¢ÔºüËøôÊòØÂõ†‰∏∫Ôºåt1Âú®‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÊó∂ÔºåË¢´interrupt()‰∏≠Êñ≠ÔºõÊ≠§Êó∂Ôºå‰ºöÊ∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞„ÄåÂç≥isInterrupted()‰ºöËøîÂõûfalse„ÄçÔºåËÄå‰∏î‰ºöÊäõÂá∫InterruptedExceptionÂºÇÂ∏∏„ÄåËØ•ÂºÇÂ∏∏Âú®whileÂæ™ÁéØ‰ΩìÂÜÖË¢´ÊçïËé∑„Äç„ÄÇÂõ†Ê≠§Ôºåt1ÁêÜÊâÄÂΩìÁÑ∂ÁöÑ‰ºöËøõÂÖ•Ê≠ªÂæ™ÁéØ‰∫Ü„ÄÇ &lt;p id=&quot;div-border-left-red&quot;&gt; Ëß£ÂÜ≥ËØ•ÈóÆÈ¢òÔºåÈúÄË¶ÅÂú®ÊçïËé∑ÂºÇÂ∏∏Êó∂ÔºåÈ¢ùÂ§ñÁöÑËøõË°åÈÄÄÂá∫whileÂæ™ÁéØÁöÑÂ§ÑÁêÜ„ÄÇ‰æãÂ¶ÇÔºåÂú®MyThreadÁöÑcatch(InterruptedException)‰∏≠Ê∑ªÂä†break Êàñ returnÂ∞±ËÉΩËß£ÂÜ≥ËØ•ÈóÆÈ¢ò„ÄÇ &lt;/p&gt; ‰∏ãÈù¢ÊòØÈÄöËøá‚ÄúÈ¢ùÂ§ñÊ∑ªÂä†Ê†áËÆ∞‚ÄùÁöÑÊñπÂºèÁªàÊ≠¢‚ÄúÁä∂ÊÄÅÁä∂ÊÄÅ‚ÄùÁöÑÁ∫øÁ®ãÁöÑÁ§∫‰æãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859package main.java.com.study.thread.interrupt;/** * @author: whb * @description: Á∫øÁ®ãÁªàÊ≠¢Á§∫‰æã3 */public class Demo3 &#123; public static void main(String[] args) &#123; try &#123; // Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt1‚Äù TestThread t1 = new TestThread("t1"); System.out.println(t1.getName() + " (" + t1.getState() + ") is new."); t1.start(); // ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù System.out.println(t1.getName() + " (" + t1.getState() + ") is started."); // ‰∏ªÁ∫øÁ®ã‰ºëÁú†300msÔºåÁÑ∂Âêé‰∏ªÁ∫øÁ®ãÁªôt1Âèë‚Äú‰∏≠Êñ≠‚ÄùÊåá‰ª§„ÄÇ Thread.sleep(300); t1.stopTask(); System.out.println(t1.getName() + " (" + t1.getState() + ") is interrupted."); // ‰∏ªÁ∫øÁ®ã‰ºëÁú†300msÔºåÁÑ∂ÂêéÊü•Áúãt1ÁöÑÁä∂ÊÄÅ„ÄÇ Thread.sleep(300); System.out.println(t1.getName() + " (" + t1.getState() + ") is interrupted now."); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;class TestThread extends Thread &#123; private volatile boolean flag = true; public void stopTask() &#123; flag = false; &#125; public TestThread(String name) &#123; super(name); &#125; @Override public void run() &#123; synchronized (this) &#123; try &#123; int i = 0; while (flag) &#123; Thread.sleep(100); i++; System.out.println(Thread.currentThread().getName() + " (" + this.getState() + ") loop " + i); &#125; &#125; catch (InterruptedException ie) &#123; System.out.println(Thread.currentThread().getName() + " (" + this.getState() + ") catch InterruptedException."); &#125; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 1234567t1 (NEW) is new.t1 (RUNNABLE) is started.t1 (RUNNABLE) loop 1t1 (RUNNABLE) loop 2t1 (TIMED_WAITING) is interrupted.t1 (RUNNABLE) loop 3t1 (TERMINATED) is interrupted now. interrupted() Âíå isInterrupted()ÁöÑÂå∫Âà´ interrupted() Âíå isInterrupted()ÈÉΩËÉΩÂ§üÁî®‰∫éÊ£ÄÊµãÂØπË±°ÁöÑ‚Äú‰∏≠Êñ≠Ê†áËÆ∞‚Äù„ÄÇ Âå∫Âà´ÊòØÔºåinterrupted()Èô§‰∫ÜËøîÂõû‰∏≠Êñ≠Ê†áËÆ∞‰πãÂ§ñÔºåÂÆÉËøò‰ºöÊ∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞(Âç≥Â∞Ü‰∏≠Êñ≠Ê†áËÆ∞ËÆæ‰∏∫false)ÔºõËÄåisInterrupted()‰ªÖ‰ªÖËøîÂõû‰∏≠Êñ≠Ê†áËÆ∞„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂÜÖÂ≠òÊ®°Âûã-ÂÜÖÂÆπÊÄªÁªì]]></title>
    <url>%2Fposts%2Fc0ec3ded.html</url>
    <content type="text"><![CDATA[Â§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°Âûã È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°ÂûãÊòØ‰∏Ä‰∏™ÁêÜËÆ∫ÂèÇËÄÉÊ®°ÂûãÔºåJMM ÂíåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÂú®ËÆæËÆ°Êó∂ÈÄöÂ∏∏‰ºöÊääÈ°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã‰Ωú‰∏∫ÂèÇÁÖß„ÄÇJMM ÂíåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÂú®ËÆæËÆ°Êó∂‰ºöÂØπÈ°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°ÂûãÂÅö‰∏Ä‰∫õÊîæÊùæÔºåÂõ†‰∏∫Â¶ÇÊûúÂÆåÂÖ®ÊåâÁÖßÈ°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°ÂûãÊù•ÂÆûÁé∞Â§ÑÁêÜÂô®Âíå JMMÔºåÈÇ£‰πàÂæàÂ§öÁöÑÂ§ÑÁêÜÂô®ÂíåÁºñËØëÂô®‰ºòÂåñÈÉΩË¶ÅË¢´Á¶ÅÊ≠¢ÔºåËøôÂØπÊâßË°åÊÄßËÉΩÂ∞Ü‰ºöÊúâÂæàÂ§ßÁöÑÂΩ±Âìç„ÄÇ Ê†πÊçÆÂØπ‰∏çÂêåÁ±ªÂûãËØª / ÂÜôÊìç‰ΩúÁªÑÂêàÁöÑÊâßË°åÈ°∫Â∫èÁöÑÊîæÊùæÔºåÂèØ‰ª•ÊääÂ∏∏ËßÅÂ§ÑÁêÜÂô®ÁöÑÂÜÖÂ≠òÊ®°ÂûãÂàíÂàÜ‰∏∫‰∏ãÈù¢Âá†ÁßçÁ±ªÂûãÔºö ÊîæÊùæÁ®ãÂ∫è‰∏≠ÂÜô - ËØªÊìç‰ΩúÁöÑÈ°∫Â∫èÔºåÁî±Ê≠§‰∫ßÁîü‰∫Ü total store ordering ÂÜÖÂ≠òÊ®°ÂûãÔºàÁÆÄÁß∞‰∏∫ TSOÔºâ„ÄÇ Âú®ÂâçÈù¢ 1 ÁöÑÂü∫Á°Ä‰∏äÔºåÁªßÁª≠ÊîæÊùæÁ®ãÂ∫è‰∏≠ÂÜô - ÂÜôÊìç‰ΩúÁöÑÈ°∫Â∫èÔºåÁî±Ê≠§‰∫ßÁîü‰∫Ü partial store order ÂÜÖÂ≠òÊ®°ÂûãÔºàÁÆÄÁß∞‰∏∫ PSOÔºâ„ÄÇ Âú®ÂâçÈù¢ 1 Âíå 2 ÁöÑÂü∫Á°Ä‰∏äÔºåÁªßÁª≠ÊîæÊùæÁ®ãÂ∫è‰∏≠ËØª - ÂÜôÂíåËØª - ËØªÊìç‰ΩúÁöÑÈ°∫Â∫èÔºåÁî±Ê≠§‰∫ßÁîü‰∫Ü relaxed memory order ÂÜÖÂ≠òÊ®°ÂûãÔºàÁÆÄÁß∞‰∏∫ RMOÔºâÂíå PowerPC ÂÜÖÂ≠òÊ®°Âûã„ÄÇ Ê≥®ÊÑèÔºåËøôÈáåÂ§ÑÁêÜÂô®ÂØπËØª / ÂÜôÊìç‰ΩúÁöÑÊîæÊùæÔºåÊòØ‰ª•‰∏§‰∏™Êìç‰Ωú‰πãÈó¥‰∏çÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÊÄß‰∏∫ÂâçÊèêÁöÑÔºàÂõ†‰∏∫Â§ÑÁêÜÂô®Ë¶ÅÈÅµÂÆà as-if-serial ËØ≠‰πâÔºåÂ§ÑÁêÜÂô®‰∏ç‰ºöÂØπÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÊÄßÁöÑ‰∏§‰∏™ÂÜÖÂ≠òÊìç‰ΩúÂÅöÈáçÊéíÂ∫èÔºâ„ÄÇ Â∏∏ËßÅÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÁöÑÁªÜËäÇÁâπÂæÅÔºö ÂÜÖÂ≠òÊ®°ÂûãÂêçÁß∞ ÂØπÂ∫îÁöÑÂ§ÑÁêÜÂô® Store-LoadÈáçÊéíÂ∫è Store-StoreÈáçÊéíÂ∫è Load-LoadÂíåLoad-StoreÈáçÊéíÂ∫è ÂèØ‰ª•Êõ¥Êó©ËØªÂèñÂà∞ÂÖ∂‰ªñÂ§ÑÁêÜÂô®ÁöÑÂÜô ÂèØ‰ª•Êõ¥Êó©ËØªÂèñÂà∞ÂΩìÂâçÂ§ÑÁêÜÂô®ÁöÑÂÜô TSO sparc-TSO X64 Y Y PSO sparc-PSO Y Y Y RMO ia64 Y Y Y Y PowerPC PowerPC Y Y Y Y Y Âú®Ëøô‰∏™Ë°®Ê†º‰∏≠ÔºåÂèØ‰ª•ÁúãÂà∞ÊâÄÊúâÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÈÉΩÂÖÅËÆ∏ÂÜô - ËØªÈáçÊéíÂ∫èÔºåÂéüÂõ†ÔºöÂÆÉ‰ª¨ÈÉΩ‰ΩøÁî®‰∫ÜÂÜôÁºìÂ≠òÂå∫ÔºåÂÜôÁºìÂ≠òÂå∫ÂèØËÉΩÂØºËá¥ÂÜô - ËØªÊìç‰ΩúÈáçÊéíÂ∫è„ÄÇÂêåÊó∂ÔºåÂèØ‰ª•ÁúãÂà∞Ëøô‰∫õÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÈÉΩÂÖÅËÆ∏Êõ¥Êó©ËØªÂà∞ÂΩìÂâçÂ§ÑÁêÜÂô®ÁöÑÂÜôÔºåÂéüÂõ†ÂêåÊ†∑ÊòØÂõ†‰∏∫ÂÜôÁºìÂ≠òÂå∫ÔºöÁî±‰∫éÂÜôÁºìÂ≠òÂå∫‰ªÖÂØπÂΩìÂâçÂ§ÑÁêÜÂô®ÂèØËßÅÔºåËøô‰∏™ÁâπÊÄßÂØºËá¥ÂΩìÂâçÂ§ÑÁêÜÂô®ÂèØ‰ª•ÊØîÂÖ∂‰ªñÂ§ÑÁêÜÂô®ÂÖàÁúãÂà∞‰∏¥Êó∂‰øùÂ≠òÂú®Ëá™Â∑±ÁöÑÂÜôÁºìÂ≠òÂå∫‰∏≠ÁöÑÂÜô„ÄÇ ‰∏äÈù¢Ë°®Ê†º‰∏≠ÁöÑÂêÑÁßçÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÔºå‰ªé‰∏äÂà∞‰∏ãÔºåÊ®°ÂûãÁî±Âº∫ÂèòÂº±„ÄÇË∂äÊòØËøΩÊ±ÇÊÄßËÉΩÁöÑÂ§ÑÁêÜÂô®ÔºåÂÜÖÂ≠òÊ®°ÂûãËÆæËÆ°ÁöÑ‰ºöË∂äÂº±„ÄÇÂõ†‰∏∫Ëøô‰∫õÂ§ÑÁêÜÂô®Â∏åÊúõÂÜÖÂ≠òÊ®°ÂûãÂØπÂÆÉ‰ª¨ÁöÑÊùüÁºöË∂äÂ∞ëË∂äÂ•ΩÔºåËøôÊ†∑ÂÆÉ‰ª¨Â∞±ÂèØ‰ª•ÂÅöÂ∞ΩÂèØËÉΩÂ§öÁöÑ‰ºòÂåñÊù•ÊèêÈ´òÊÄßËÉΩ„ÄÇ Áî±‰∫éÂ∏∏ËßÅÁöÑÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÊØî JMM Ë¶ÅÂº±Ôºåjava ÁºñËØëÂô®Âú®ÁîüÊàêÂ≠óËäÇÁ†ÅÊó∂Ôºå‰ºöÂú®ÊâßË°åÊåá‰ª§Â∫èÂàóÁöÑÈÄÇÂΩì‰ΩçÁΩÆÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÊù•ÈôêÂà∂Â§ÑÁêÜÂô®ÁöÑÈáçÊéíÂ∫è„ÄÇÂêåÊó∂ÔºåÁî±‰∫éÂêÑÁßçÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÁöÑÂº∫Âº±Âπ∂‰∏çÁõ∏ÂêåÔºå‰∏∫‰∫ÜÂú®‰∏çÂêåÁöÑÂ§ÑÁêÜÂô®Âπ≥Âè∞ÂêëÁ®ãÂ∫èÂëòÂ±ïÁ§∫‰∏Ä‰∏™‰∏ÄËá¥ÁöÑÂÜÖÂ≠òÊ®°ÂûãÔºåJMM Âú®‰∏çÂêåÁöÑÂ§ÑÁêÜÂô®‰∏≠ÈúÄË¶ÅÊèíÂÖ•ÁöÑÂÜÖÂ≠òÂ±èÈöúÁöÑÊï∞ÈáèÂíåÁßçÁ±ª‰πü‰∏çÁõ∏Âêå„ÄÇ ‰∏ãÂõæÂ±ïÁ§∫‰∫Ü JMM Âú®‰∏çÂêåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°Âûã‰∏≠ÈúÄË¶ÅÊèíÂÖ•ÁöÑÂÜÖÂ≠òÂ±èÈöúÁöÑÁ§∫ÊÑèÂõæÔºö Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåJMM Â±èËîΩ‰∫Ü‰∏çÂêåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÁöÑÂ∑ÆÂºÇÔºåÂÆÉÂú®‰∏çÂêåÁöÑÂ§ÑÁêÜÂô®Âπ≥Âè∞‰πã‰∏ä‰∏∫ java Á®ãÂ∫èÂëòÂëàÁé∞‰∫Ü‰∏Ä‰∏™‰∏ÄËá¥ÁöÑÂÜÖÂ≠òÊ®°Âûã„ÄÇ JMM„ÄÅÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°Âûã‰∏éÈ°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã‰πãÈó¥ÁöÑÂÖ≥Á≥ª JMM ÊòØ‰∏Ä‰∏™ËØ≠Ë®ÄÁ∫ßÁöÑÂÜÖÂ≠òÊ®°ÂûãÔºåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÊòØÁ°¨‰ª∂Á∫ßÁöÑÂÜÖÂ≠òÊ®°ÂûãÔºåÈ°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°ÂûãÊòØ‰∏Ä‰∏™ÁêÜËÆ∫ÂèÇËÄÉÊ®°Âûã„ÄÇ‰∏ãÈù¢ÊòØËØ≠Ë®ÄÂÜÖÂ≠òÊ®°ÂûãÔºåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÂíåÈ°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°ÂûãÁöÑÂº∫Âº±ÂØπÊØîÁ§∫ÊÑèÂõæÔºö ‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºöÂ∏∏ËßÅÁöÑ 4 ÁßçÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÊØîÂ∏∏Áî®ÁöÑ 3 ‰∏≠ËØ≠Ë®ÄÂÜÖÂ≠òÊ®°ÂûãË¶ÅÂº±ÔºåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÂíåËØ≠Ë®ÄÂÜÖÂ≠òÊ®°ÂûãÈÉΩÊØîÈ°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°ÂûãË¶ÅÂº±„ÄÇÂêåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°Âûã‰∏ÄÊ†∑ÔºåË∂äÊòØËøΩÊ±ÇÊâßË°åÊÄßËÉΩÁöÑËØ≠Ë®ÄÔºåÂÜÖÂ≠òÊ®°ÂûãËÆæËÆ°ÁöÑ‰ºöË∂äÂº±„ÄÇ JMMÁöÑËÆæËÆ° ‰ªé JMM ËÆæËÆ°ËÄÖÁöÑËßíÂ∫¶Êù•ËØ¥ÔºåÂú®ËÆæËÆ° JMM Êó∂ÔºåÈúÄË¶ÅËÄÉËôë‰∏§‰∏™ÂÖ≥ÈîÆÂõ†Á¥†Ôºö Á®ãÂ∫èÂëòÂØπÂÜÖÂ≠òÊ®°ÂûãÁöÑ‰ΩøÁî®„ÄÇÁ®ãÂ∫èÂëòÂ∏åÊúõÂÜÖÂ≠òÊ®°ÂûãÊòì‰∫éÁêÜËß£ÔºåÊòì‰∫éÁºñÁ®ã„ÄÇÁ®ãÂ∫èÂëòÂ∏åÊúõÂü∫‰∫é‰∏Ä‰∏™Âº∫ÂÜÖÂ≠òÊ®°ÂûãÊù•ÁºñÂÜô‰ª£Á†Å„ÄÇ ÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÂØπÂÜÖÂ≠òÊ®°ÂûãÁöÑÂÆûÁé∞„ÄÇÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®Â∏åÊúõÂÜÖÂ≠òÊ®°ÂûãÂØπÂÆÉ‰ª¨ÁöÑÊùüÁºöË∂äÂ∞ëË∂äÂ•ΩÔºåËøôÊ†∑ÂÆÉ‰ª¨Â∞±ÂèØ‰ª•ÂÅöÂ∞ΩÂèØËÉΩÂ§öÁöÑ‰ºòÂåñÊù•ÊèêÈ´òÊÄßËÉΩ„ÄÇÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®Â∏åÊúõÂÆûÁé∞‰∏Ä‰∏™Âº±ÂÜÖÂ≠òÊ®°Âûã„ÄÇ Áî±‰∫éËøô‰∏§‰∏™Âõ†Á¥†‰∫íÁõ∏ÁüõÁõæÔºåÊâÄ‰ª• JSR-133 ‰∏ìÂÆ∂ÁªÑÂú®ËÆæËÆ° JMM Êó∂ÁöÑÊ†∏ÂøÉÁõÆÊ†áÂ∞±ÊòØÊâæÂà∞‰∏Ä‰∏™Â•ΩÁöÑÂπ≥Ë°°ÁÇπÔºö‰∏ÄÊñπÈù¢Ë¶Å‰∏∫Á®ãÂ∫èÂëòÊèê‰æõË∂≥Â§üÂº∫ÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅÔºõÂè¶‰∏ÄÊñπÈù¢ÔºåÂØπÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÁöÑÈôêÂà∂Ë¶ÅÂ∞ΩÂèØËÉΩÁöÑÊîæÊùæ„ÄÇ JSR-133 ÊòØÂ¶Ç‰ΩïÂÆûÁé∞Ëøô‰∏ÄÁõÆÊ†áÁöÑÔºüÁ≠îÊ°àÊòØÔºöhappens-beforeËßÑÂàô„ÄÇ JMM Êää happens- before Ë¶ÅÊ±ÇÁ¶ÅÊ≠¢ÁöÑÈáçÊéíÂ∫èÂàÜ‰∏∫‰∫Ü‰∏ãÈù¢‰∏§Á±ªÔºö ‰ºöÊîπÂèòÁ®ãÂ∫èÊâßË°åÁªìÊûúÁöÑÈáçÊéíÂ∫è„ÄÇ ‰∏ç‰ºöÊîπÂèòÁ®ãÂ∫èÊâßË°åÁªìÊûúÁöÑÈáçÊéíÂ∫è„ÄÇ JMM ÂØπËøô‰∏§Áßç‰∏çÂêåÊÄßË¥®ÁöÑÈáçÊéíÂ∫èÔºåÈááÂèñ‰∫Ü‰∏çÂêåÁöÑÁ≠ñÁï•Ôºö ÂØπ‰∫é‰ºöÊîπÂèòÁ®ãÂ∫èÊâßË°åÁªìÊûúÁöÑÈáçÊéíÂ∫èÔºåJMM Ë¶ÅÊ±ÇÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÂøÖÈ°ªÁ¶ÅÊ≠¢ËøôÁßçÈáçÊéíÂ∫è„ÄÇ ÂØπ‰∫é‰∏ç‰ºöÊîπÂèòÁ®ãÂ∫èÊâßË°åÁªìÊûúÁöÑÈáçÊéíÂ∫èÔºåJMM ÂØπÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰∏ç‰ΩúË¶ÅÊ±ÇÔºàJMM ÂÖÅËÆ∏ËøôÁßçÈáçÊéíÂ∫èÔºâ ‰∏ãÈù¢ÊòØ JMM ÁöÑËÆæËÆ°Á§∫ÊÑèÂõæÔºö ‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫‰∏§ÁÇπÔºö JMM ÂêëÁ®ãÂ∫èÂëòÊèê‰æõÁöÑ happens- before ËßÑÂàôËÉΩÊª°Ë∂≥Á®ãÂ∫èÂëòÁöÑÈúÄÊ±Ç„ÄÇJMM ÁöÑ happens- before ËßÑÂàô‰∏ç‰ΩÜÁÆÄÂçïÊòìÊáÇÔºåËÄå‰∏î‰πüÂêëÁ®ãÂ∫èÂëòÊèê‰æõ‰∫ÜË∂≥Â§üÂº∫ÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅ„ÄÇ JMM ÂØπÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÁöÑÊùüÁºöÂ∑≤ÁªèÂ∞ΩÂèØËÉΩÁöÑÂ∞ë„ÄÇJMM ÂÖ∂ÂÆûÊòØÂú®ÈÅµÂæ™‰∏Ä‰∏™Âü∫Êú¨ÂéüÂàôÔºöÂè™Ë¶Å‰∏çÊîπÂèòÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûúÔºàÊåáÁöÑÊòØÂçïÁ∫øÁ®ãÁ®ãÂ∫èÂíåÊ≠£Á°ÆÂêåÊ≠•ÁöÑÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÔºâÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÊÄé‰πà‰ºòÂåñÈÉΩË°å„ÄÇÊØîÂ¶ÇÔºåÂ¶ÇÊûúÁºñËØëÂô®ÁªèËøáÁªÜËá¥ÁöÑÂàÜÊûêÂêéÔºåËÆ§ÂÆö‰∏Ä‰∏™ÈîÅÂè™‰ºöË¢´Âçï‰∏™Á∫øÁ®ãËÆøÈóÆÔºåÈÇ£‰πàËøô‰∏™ÈîÅÂèØ‰ª•Ë¢´Ê∂àÈô§„ÄÇÂÜçÊØîÂ¶ÇÔºåÂ¶ÇÊûúÁºñËØëÂô®ÁªèËøáÁªÜËá¥ÁöÑÂàÜÊûêÂêéÔºåËÆ§ÂÆö‰∏Ä‰∏™ volatile ÂèòÈáè‰ªÖ‰ªÖÂè™‰ºöË¢´Âçï‰∏™Á∫øÁ®ãËÆøÈóÆÔºåÈÇ£‰πàÁºñËØëÂô®ÂèØ‰ª•ÊääËøô‰∏™ volatile ÂèòÈáèÂΩì‰Ωú‰∏Ä‰∏™ÊôÆÈÄöÂèòÈáèÊù•ÂØπÂæÖ„ÄÇËøô‰∫õ‰ºòÂåñÊó¢‰∏ç‰ºöÊîπÂèòÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûúÔºåÂèàËÉΩÊèêÈ´òÁ®ãÂ∫èÁöÑÊâßË°åÊïàÁéá„ÄÇ JMMÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅ Java Á®ãÂ∫èÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅÊåâÁ®ãÂ∫èÁ±ªÂûãÂèØ‰ª•ÂàÜ‰∏∫‰∏ãÂàó‰∏âÁ±ªÔºö ÂçïÁ∫øÁ®ãÁ®ãÂ∫è„ÄÇÂçïÁ∫øÁ®ãÁ®ãÂ∫è‰∏ç‰ºöÂá∫Áé∞ÂÜÖÂ≠òÂèØËßÅÊÄßÈóÆÈ¢ò„ÄÇÁºñËØëÂô®Ôºåruntime ÂíåÂ§ÑÁêÜÂô®‰ºöÂÖ±ÂêåÁ°Æ‰øùÂçïÁ∫øÁ®ãÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûú‰∏éËØ•Á®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰∏≠ÁöÑÊâßË°åÁªìÊûúÁõ∏Âêå„ÄÇ Ê≠£Á°ÆÂêåÊ≠•ÁöÑÂ§öÁ∫øÁ®ãÁ®ãÂ∫è„ÄÇÊ≠£Á°ÆÂêåÊ≠•ÁöÑÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÁöÑÊâßË°åÂ∞ÜÂÖ∑ÊúâÈ°∫Â∫è‰∏ÄËá¥ÊÄßÔºàÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûú‰∏éËØ•Á®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã‰∏≠ÁöÑÊâßË°åÁªìÊûúÁõ∏ÂêåÔºâ„ÄÇËøôÊòØ JMM ÂÖ≥Ê≥®ÁöÑÈáçÁÇπÔºåJMM ÈÄöËøáÈôêÂà∂ÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÁöÑÈáçÊéíÂ∫èÊù•‰∏∫Á®ãÂ∫èÂëòÊèê‰æõÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅ„ÄÇ Êú™ÂêåÊ≠• / Êú™Ê≠£Á°ÆÂêåÊ≠•ÁöÑÂ§öÁ∫øÁ®ãÁ®ãÂ∫è„ÄÇJMM ‰∏∫ÂÆÉ‰ª¨Êèê‰æõ‰∫ÜÊúÄÂ∞èÂÆâÂÖ®ÊÄß‰øùÈöúÔºöÁ∫øÁ®ãÊâßË°åÊó∂ËØªÂèñÂà∞ÁöÑÂÄºÔºåË¶Å‰πàÊòØ‰πãÂâçÊüê‰∏™Á∫øÁ®ãÂÜôÂÖ•ÁöÑÂÄºÔºåË¶Å‰πàÊòØÈªòËÆ§ÂÄºÔºà0ÔºånullÔºåfalseÔºâ„ÄÇ ‰∏ãÂõæÂ±ïÁ§∫‰∫ÜËøô‰∏âÁ±ªÁ®ãÂ∫èÂú® JMM ‰∏≠‰∏éÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã‰∏≠ÁöÑÊâßË°åÁªìÊûúÁöÑÂºÇÂêåÔºö Âè™Ë¶ÅÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÊòØÊ≠£Á°ÆÂêåÊ≠•ÁöÑÔºåJMM ‰øùËØÅËØ•Á®ãÂ∫èÂú®‰ªªÊÑèÁöÑÂ§ÑÁêÜÂô®Âπ≥Âè∞‰∏äÁöÑÊâßË°åÁªìÊûúÔºå‰∏éËØ•Á®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã‰∏≠ÁöÑÊâßË°åÁªìÊûú‰∏ÄËá¥„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>JMM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JMM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-08‰πã-Á∫øÁ®ãJoin]]></title>
    <url>%2Fposts%2F38c1adea.html</url>
    <content type="text"><![CDATA[join()‰ªãÁªç join() ÁöÑ‰ΩúÁî®ÔºöËÆ©‚Äú‰∏ªÁ∫øÁ®ã‚ÄùÁ≠âÂæÖ‚ÄúÂ≠êÁ∫øÁ®ã‚ÄùÁªìÊùü‰πãÂêéÊâçËÉΩÁªßÁª≠ËøêË°å„ÄÇÈÄöËøá‰æãÂ≠êÊù•ÁêÜËß£Ôºö 123456789101112131415// ‰∏ªÁ∫øÁ®ãpublic class Father extends Thread &#123; public void run() &#123; Son s = new Son(); s.start(); s.join(); ... &#125;&#125;// Â≠êÁ∫øÁ®ãpublic class Son extends Thread &#123; public void run() &#123; ... &#125;&#125; &lt;span id=&quot;inline-purple&quot;&gt; ËØ¥ÊòéÔºö &lt;/span&gt; ‰∏äÈù¢ÁöÑÊúâ‰∏§‰∏™Á±ªFather(‰∏ªÁ∫øÁ®ãÁ±ª)ÂíåSon(Â≠êÁ∫øÁ®ãÁ±ª)„ÄÇÂõ†‰∏∫SonÊòØÂú®Father‰∏≠ÂàõÂª∫Âπ∂ÂêØÂä®ÁöÑÔºåÊâÄ‰ª•ÔºåFatherÊòØ‰∏ªÁ∫øÁ®ãÁ±ªÔºåSonÊòØÂ≠êÁ∫øÁ®ãÁ±ª„ÄÇ Âú®Father‰∏ªÁ∫øÁ®ã‰∏≠ÔºåÈÄöËøánew Son()Êñ∞Âª∫‚ÄúÂ≠êÁ∫øÁ®ãs‚Äù„ÄÇÊé•ÁùÄÈÄöËøás.start()ÂêØÂä®‚ÄúÂ≠êÁ∫øÁ®ãs‚ÄùÔºåÂπ∂‰∏îË∞ÉÁî®s.join()„ÄÇÂú®Ë∞ÉÁî®s.join()‰πãÂêéÔºåFather‰∏ªÁ∫øÁ®ã‰ºö‰∏ÄÁõ¥Á≠âÂæÖÔºåÁõ¥Âà∞‚ÄúÂ≠êÁ∫øÁ®ãs‚ÄùËøêË°åÂÆåÊØïÔºõÂú®‚ÄúÂ≠êÁ∫øÁ®ãs‚ÄùËøêË°åÂÆåÊØï‰πãÂêéÔºåFather‰∏ªÁ∫øÁ®ãÊâçËÉΩÊé•ÁùÄËøêË°å„ÄÇ Ëøô‰πüÂ∞±ÊòØÊàë‰ª¨ÊâÄËØ¥ÁöÑ‚Äújoin()ÁöÑ‰ΩúÁî®ÔºåÊòØËÆ©‰∏ªÁ∫øÁ®ã‰ºöÁ≠âÂæÖÂ≠êÁ∫øÁ®ãÁªìÊùü‰πãÂêéÊâçËÉΩÁªßÁª≠ËøêË°å‚ÄùÔºÅ join()Ê∫êÁ†ÅÂàÜÊûê 12345678910111213141516171819202122232425262728public final void join() throws InterruptedException &#123; join(0);&#125;public final synchronized void join(long millis)throws InterruptedException &#123; long base = System.currentTimeMillis(); long now = 0; if (millis &lt; 0) &#123; throw new IllegalArgumentException("timeout value is negative"); &#125; if (millis == 0) &#123; while (isAlive()) &#123; wait(0); &#125; &#125; else &#123; while (isAlive()) &#123; long delay = millis - now; if (delay &lt;= 0) &#123; break; &#125; wait(delay); now = System.currentTimeMillis() - base; &#125; &#125;&#125; &lt;span id=&quot;inline-purple&quot;&gt;ËØ¥ÊòéÔºö &lt;/span&gt; ‰ªé‰ª£Á†Å‰∏≠ÔºåÂèØ‰ª•ÂèëÁé∞„ÄÇÂΩìmillis==0Êó∂Ôºå‰ºöËøõÂÖ•while(isAlive())Âæ™ÁéØÔºõÂç≥Âè™Ë¶ÅÂ≠êÁ∫øÁ®ãÊòØÊ¥ªÁöÑÔºå‰∏ªÁ∫øÁ®ãÂ∞±‰∏çÂÅúÁöÑÁ≠âÂæÖ„ÄÇ Ê†πÊçÆ‰∏äÈù¢Ëß£Èáäjoin()‰ΩúÁî®Êó∂ÁöÑ‰ª£Á†ÅÊù•ÁêÜËß£join()ÁöÑÁî®Ê≥ïÔºÅ &lt;span id=&quot;inline-blue&quot;&gt; ÈóÆÈ¢òÔºö &lt;/span&gt; &lt;p id=&quot;div-border-left-red&quot;&gt;ËôΩÁÑ∂s.join()Ë¢´Ë∞ÉÁî®ÁöÑÂú∞ÊñπÊòØÂèëÁîüÂú®‚ÄúFather‰∏ªÁ∫øÁ®ã‚Äù‰∏≠Ôºå‰ΩÜÊòØs.join()ÊòØÈÄöËøá‚ÄúÂ≠êÁ∫øÁ®ãs‚ÄùÂéªË∞ÉÁî®ÁöÑjoin()„ÄÇÈÇ£‰πàÔºåjoin()ÊñπÊ≥ï‰∏≠ÁöÑisAlive()Â∫îËØ•ÊòØÂà§Êñ≠‚ÄúÂ≠êÁ∫øÁ®ãs‚ÄùÊòØ‰∏çÊòØAliveÁä∂ÊÄÅÔºõÂØπÂ∫îÁöÑwait(0)‰πüÂ∫îËØ•ÊòØ‚ÄúËÆ©Â≠êÁ∫øÁ®ãs‚ÄùÁ≠âÂæÖÊâçÂØπ„ÄÇ‰ΩÜÂ¶ÇÊûúÊòØËøôÊ†∑ÁöÑËØùÔºås.join()ÁöÑ‰ΩúÁî®ÊÄé‰πàÂèØËÉΩÊòØ‚ÄúËÆ©‰∏ªÁ∫øÁ®ãÁ≠âÂæÖÔºåÁõ¥Âà∞Â≠êÁ∫øÁ®ãsÂÆåÊàê‰∏∫Ê≠¢‚ÄùÂë¢ÔºåÂ∫îËØ•ÊòØËÆ©&quot;Â≠êÁ∫øÁ®ãÁ≠âÂæÖÊâçÂØπ(Âõ†‰∏∫Ë∞ÉÁî®Â≠êÁ∫øÁ®ãÂØπË±°sÁöÑwaitÊñπÊ≥ïÂòõ)&quot;Ôºü&lt;/p&gt; &lt;span id=&quot;inline-green&quot;&gt; Á≠îÊ°àÔºö &lt;/span&gt; &lt;p id=&quot;div-border-left-green&quot;&gt;wait()ÁöÑ‰ΩúÁî®ÊòØËÆ©‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÁ≠âÂæÖÔºåËÄåËøôÈáåÁöÑ‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÊòØÊåáÂΩìÂâçÂú®CPU‰∏äËøêË°åÁöÑÁ∫øÁ®ã„ÄÇÊâÄ‰ª•ÔºåËôΩÁÑ∂ÊòØË∞ÉÁî®Â≠êÁ∫øÁ®ãÁöÑwait()ÊñπÊ≥ïÔºå‰ΩÜÊòØÂÆÉÊòØÈÄöËøá‚Äú‰∏ªÁ∫øÁ®ã‚ÄùÂéªË∞ÉÁî®ÁöÑÔºõÊâÄ‰ª•Ôºå‰ºëÁú†ÁöÑÊòØ‰∏ªÁ∫øÁ®ãÔºåËÄå‰∏çÊòØ‚ÄúÂ≠êÁ∫øÁ®ã‚ÄùÔºÅ&lt;/p&gt; join()Á§∫‰æã 12345678910111213141516171819202122232425262728293031323334353637383940package main.java.com.study.thread.join;/** * @author: whb * @description: join() ÁöÑ‰ΩúÁî®ÔºöËÆ©‚Äú‰∏ªÁ∫øÁ®ã‚ÄùÁ≠âÂæÖ‚ÄúÂ≠êÁ∫øÁ®ã‚ÄùÁªìÊùü‰πãÂêéÊâçËÉΩÁªßÁª≠ËøêË°å„ÄÇ */public class JoinTest &#123; public static void main(String[] args) &#123; try &#123; // Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt1‚Äù ThreadA t1 = new ThreadA("t1"); t1.start(); // ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù t1.join(); // Â∞Ü‚ÄúÁ∫øÁ®ãt1‚ÄùÂä†ÂÖ•Âà∞‚Äú‰∏ªÁ∫øÁ®ãmain‚Äù‰∏≠ÔºåÂπ∂‰∏î‚Äú‰∏ªÁ∫øÁ®ãmain()‰ºöÁ≠âÂæÖÂÆÉÁöÑÂÆåÊàê‚Äù System.out.printf("%s finish\n", Thread.currentThread().getName()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; static class ThreadA extends Thread &#123; public ThreadA(String name) &#123; super(name); &#125; @Override public void run() &#123; System.out.printf("%s start\n", this.getName()); // Âª∂Êó∂Êìç‰Ωú for (int i = 0; i &lt; 1000000; i++) &#123; ; &#125; System.out.printf("%s finish\n", this.getName()); &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 123t1 startt1 finishmain finish &lt;span id=&quot;inline-green&quot;&gt; ËøêË°åÁªìÊûúÔºö&lt;/span&gt; (01) Âú®‚Äú‰∏ªÁ∫øÁ®ãmain‚Äù‰∏≠ÈÄöËøá new ThreadA(&quot;t1&quot;) Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt1‚Äù„ÄÇ Êé•ÁùÄÔºåÈÄöËøá t1.start() ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚ÄùÔºåÂπ∂ÊâßË°åt1.join()„ÄÇ (02) ÊâßË°åt1.join()‰πãÂêéÔºå‚Äú‰∏ªÁ∫øÁ®ãmain‚Äù‰ºöËøõÂÖ•‚ÄúÈòªÂ°ûÁä∂ÊÄÅ‚ÄùÁ≠âÂæÖt1ËøêË°åÁªìÊùü„ÄÇ‚ÄúÂ≠êÁ∫øÁ®ãt1‚ÄùÁªìÊùü‰πãÂêéÔºå‰ºöÂî§ÈÜí‚Äú‰∏ªÁ∫øÁ®ãmain‚ÄùÔºå‚Äú‰∏ªÁ∫øÁ®ã‚ÄùÈáçÊñ∞Ëé∑ÂèñcpuÊâßË°åÊùÉÔºåÁªßÁª≠ËøêË°å„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂÜÖÂ≠òÊ®°Âûã-ÁêÜËß£final]]></title>
    <url>%2Fposts%2F5a0704df.html</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ ‰∏éÈîÅÂíå volatile Áõ∏ÊØîËæÉÔºåÂØπ final ÂüüÁöÑËØªÂíåÂÜôÊõ¥ÂÉèÊòØÊôÆÈÄöÁöÑÂèòÈáèËÆøÈóÆ„ÄÇÂØπ‰∫é final ÂüüÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®Ë¶ÅÈÅµÂÆà‰∏§‰∏™ÈáçÊéíÂ∫èËßÑÂàôÔºö Âú®ÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÂØπ‰∏Ä‰∏™ final ÂüüÁöÑÂÜôÂÖ•Ôºå‰∏éÈöèÂêéÊääËøô‰∏™Ë¢´ÊûÑÈÄ†ÂØπË±°ÁöÑÂºïÁî®ËµãÂÄºÁªô‰∏Ä‰∏™ÂºïÁî®ÂèòÈáèÔºåËøô‰∏§‰∏™Êìç‰Ωú‰πãÈó¥‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇ ÂàùÊ¨°ËØª‰∏Ä‰∏™ÂåÖÂê´ final ÂüüÁöÑÂØπË±°ÁöÑÂºïÁî®Ôºå‰∏éÈöèÂêéÂàùÊ¨°ËØªËøô‰∏™ final ÂüüÔºåËøô‰∏§‰∏™Êìç‰Ωú‰πãÈó¥‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇ Á§∫‰æã‰ª£Á†ÅÔºö 1234567891011121314151617181920public class FinalExample &#123; int i; // ÊôÆÈÄöÂèòÈáè final int j; //final ÂèòÈáè static FinalExample obj; public void FinalExample () &#123; // ÊûÑÈÄ†ÂáΩÊï∞ i = 1; // ÂÜôÊôÆÈÄöÂüü j = 2; // ÂÜô final Âüü &#125; public static void writer () &#123; // ÂÜôÁ∫øÁ®ã A ÊâßË°å obj = new FinalExample (); &#125; public static void reader () &#123; // ËØªÁ∫øÁ®ã B ÊâßË°å FinalExample object = obj; // ËØªÂØπË±°ÂºïÁî® int a = object.i; // ËØªÊôÆÈÄöÂüü int b = object.j; // ËØª final Âüü &#125;&#125; ËøôÈáåÂÅáËÆæ‰∏Ä‰∏™Á∫øÁ®ã A ÊâßË°å writer () ÊñπÊ≥ïÔºåÈöèÂêéÂè¶‰∏Ä‰∏™Á∫øÁ®ã B ÊâßË°å reader () ÊñπÊ≥ï„ÄÇ ÂÜôfinalÂüüÁöÑÈáçÊéíÂ∫èËßÑÂàô ÂÜô final ÂüüÁöÑÈáçÊéíÂ∫èËßÑÂàôÁ¶ÅÊ≠¢Êää final ÂüüÁöÑÂÜôÈáçÊéíÂ∫èÂà∞ÊûÑÈÄ†ÂáΩÊï∞‰πãÂ§ñ„ÄÇËøô‰∏™ËßÑÂàôÁöÑÂÆûÁé∞ÂåÖÂê´‰∏ãÈù¢ 2 ‰∏™ÊñπÈù¢Ôºö JMM Á¶ÅÊ≠¢ÁºñËØëÂô®Êää final ÂüüÁöÑÂÜôÈáçÊéíÂ∫èÂà∞ÊûÑÈÄ†ÂáΩÊï∞‰πãÂ§ñ„ÄÇ ÁºñËØëÂô®‰ºöÂú® final ÂüüÁöÑÂÜô‰πãÂêéÔºåÊûÑÈÄ†ÂáΩÊï∞ return ‰πãÂâçÔºåÊèíÂÖ•‰∏Ä‰∏™ StoreStore Â±èÈöú„ÄÇËøô‰∏™Â±èÈöúÁ¶ÅÊ≠¢Â§ÑÁêÜÂô®Êää final ÂüüÁöÑÂÜôÈáçÊéíÂ∫èÂà∞ÊûÑÈÄ†ÂáΩÊï∞‰πãÂ§ñ„ÄÇ Áé∞Âú®ÂàÜÊûê writer () ÊñπÊ≥ïÔºöfinalExample = new FinalExample ()„ÄÇËøôË°å‰ª£Á†ÅÂåÖÂê´‰∏§‰∏™Ê≠•È™§Ôºö ÊûÑÈÄ†‰∏Ä‰∏™ FinalExample Á±ªÂûãÁöÑÂØπË±°Ôºõ ÊääËøô‰∏™ÂØπË±°ÁöÑÂºïÁî®ËµãÂÄºÁªôÂºïÁî®ÂèòÈáè obj„ÄÇ ÂÅáËÆæÁ∫øÁ®ã B ËØªÂØπË±°ÂºïÁî®‰∏éËØªÂØπË±°ÁöÑÊàêÂëòÂüü‰πãÈó¥Ê≤°ÊúâÈáçÊéíÂ∫èÔºå‰∏ãÂõæÊòØ‰∏ÄÁßçÂèØËÉΩÁöÑÊâßË°åÊó∂Â∫èÔºö Âú®‰∏äÂõæ‰∏≠ÔºåÂÜôÊôÆÈÄöÂüüÁöÑÊìç‰ΩúË¢´ÁºñËØëÂô®ÈáçÊéíÂ∫èÂà∞‰∫ÜÊûÑÈÄ†ÂáΩÊï∞‰πãÂ§ñÔºåËØªÁ∫øÁ®ã B ÈîôËØØÁöÑËØªÂèñ‰∫ÜÊôÆÈÄöÂèòÈáè i ÂàùÂßãÂåñ‰πãÂâçÁöÑÂÄº„ÄÇËÄåÂÜô final ÂüüÁöÑÊìç‰ΩúÔºåË¢´ÂÜô final ÂüüÁöÑÈáçÊéíÂ∫èËßÑÂàô‚ÄúÈôêÂÆö‚ÄùÂú®‰∫ÜÊûÑÈÄ†ÂáΩÊï∞‰πãÂÜÖÔºåËØªÁ∫øÁ®ã B Ê≠£Á°ÆÁöÑËØªÂèñ‰∫Ü final ÂèòÈáèÂàùÂßãÂåñ‰πãÂêéÁöÑÂÄº„ÄÇ ÂÜô final ÂüüÁöÑÈáçÊéíÂ∫èËßÑÂàôÂèØ‰ª•Á°Æ‰øùÔºöÂú®ÂØπË±°ÂºïÁî®‰∏∫‰ªªÊÑèÁ∫øÁ®ãÂèØËßÅ‰πãÂâçÔºåÂØπË±°ÁöÑ final ÂüüÂ∑≤ÁªèË¢´Ê≠£Á°ÆÂàùÂßãÂåñËøá‰∫ÜÔºåËÄåÊôÆÈÄöÂüü‰∏çÂÖ∑ÊúâËøô‰∏™‰øùÈöú„ÄÇ‰ª•‰∏äÂõæ‰∏∫‰æãÔºåÂú®ËØªÁ∫øÁ®ã B‚ÄúÁúãÂà∞‚ÄùÂØπË±°ÂºïÁî® obj Êó∂ÔºåÂæàÂèØËÉΩ obj ÂØπË±°ËøòÊ≤°ÊúâÊûÑÈÄ†ÂÆåÊàêÔºàÂØπÊôÆÈÄöÂüü i ÁöÑÂÜôÊìç‰ΩúË¢´ÈáçÊéíÂ∫èÂà∞ÊûÑÈÄ†ÂáΩÊï∞Â§ñÔºåÊ≠§Êó∂ÂàùÂßãÂÄº 2 ËøòÊ≤°ÊúâÂÜôÂÖ•ÊôÆÈÄöÂüü iÔºâ„ÄÇ ËØªfinalÂüüÁöÑÈáçÊéíÂ∫èËßÑÂàô Âú®‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÔºåÂàùÊ¨°ËØªÂØπË±°ÂºïÁî®‰∏éÂàùÊ¨°ËØªËØ•ÂØπË±°ÂåÖÂê´ÁöÑ final ÂüüÔºåJMM Á¶ÅÊ≠¢Â§ÑÁêÜÂô®ÈáçÊéíÂ∫èËøô‰∏§‰∏™Êìç‰ΩúÔºàËøô‰∏™ËßÑÂàô‰ªÖ‰ªÖÈíàÂØπÂ§ÑÁêÜÂô®Ôºâ„ÄÇÁºñËØëÂô®‰ºöÂú®ËØª final ÂüüÊìç‰ΩúÁöÑÂâçÈù¢ÊèíÂÖ•‰∏Ä‰∏™ LoadLoad Â±èÈöú„ÄÇ ÂàùÊ¨°ËØªÂØπË±°ÂºïÁî®‰∏éÂàùÊ¨°ËØªËØ•ÂØπË±°ÂåÖÂê´ÁöÑ final ÂüüÔºåËøô‰∏§‰∏™Êìç‰Ωú‰πãÈó¥Â≠òÂú®Èó¥Êé•‰æùËµñÂÖ≥Á≥ª„ÄÇÁî±‰∫éÁºñËØëÂô®ÈÅµÂÆàÈó¥Êé•‰æùËµñÂÖ≥Á≥ªÔºåÂõ†Ê≠§ÁºñËØëÂô®‰∏ç‰ºöÈáçÊéíÂ∫èËøô‰∏§‰∏™Êìç‰Ωú„ÄÇÂ§ßÂ§öÊï∞Â§ÑÁêÜÂô®‰πü‰ºöÈÅµÂÆàÈó¥Êé•‰æùËµñÔºåÂ§ßÂ§öÊï∞Â§ÑÁêÜÂô®‰πü‰∏ç‰ºöÈáçÊéíÂ∫èËøô‰∏§‰∏™Êìç‰Ωú„ÄÇ‰ΩÜÊúâÂ∞ëÊï∞Â§ÑÁêÜÂô®ÂÖÅËÆ∏ÂØπÂ≠òÂú®Èó¥Êé•‰æùËµñÂÖ≥Á≥ªÁöÑÊìç‰ΩúÂÅöÈáçÊéíÂ∫èÔºàÊØîÂ¶Ç alpha Â§ÑÁêÜÂô®ÔºâÔºåËøô‰∏™ËßÑÂàôÂ∞±ÊòØ‰∏ìÈó®Áî®Êù•ÈíàÂØπËøôÁßçÂ§ÑÁêÜÂô®„ÄÇ reader() ÊñπÊ≥ïÂåÖÂê´‰∏â‰∏™Êìç‰ΩúÔºö ÂàùÊ¨°ËØªÂºïÁî®ÂèòÈáè obj; ÂàùÊ¨°ËØªÂºïÁî®ÂèòÈáè obj ÊåáÂêëÂØπË±°ÁöÑÊôÆÈÄöÂüü j„ÄÇ ÂàùÊ¨°ËØªÂºïÁî®ÂèòÈáè obj ÊåáÂêëÂØπË±°ÁöÑ final Âüü i„ÄÇ Áé∞Âú®ÂÅáËÆæÂÜôÁ∫øÁ®ã A Ê≤°ÊúâÂèëÁîü‰ªª‰ΩïÈáçÊéíÂ∫èÔºåÂêåÊó∂Á®ãÂ∫èÂú®‰∏çÈÅµÂÆàÈó¥Êé•‰æùËµñÁöÑÂ§ÑÁêÜÂô®‰∏äÊâßË°åÔºå‰∏ãÈù¢ÊòØ‰∏ÄÁßçÂèØËÉΩÁöÑÊâßË°åÊó∂Â∫èÔºö Âú®‰∏äÂõæ‰∏≠ÔºåËØªÂØπË±°ÁöÑÊôÆÈÄöÂüüÁöÑÊìç‰ΩúË¢´Â§ÑÁêÜÂô®ÈáçÊéíÂ∫èÂà∞ËØªÂØπË±°ÂºïÁî®‰πãÂâç„ÄÇËØªÊôÆÈÄöÂüüÊó∂ÔºåËØ•ÂüüËøòÊ≤°ÊúâË¢´ÂÜôÁ∫øÁ®ã A ÂÜôÂÖ•ÔºåËøôÊòØ‰∏Ä‰∏™ÈîôËØØÁöÑËØªÂèñÊìç‰Ωú„ÄÇËÄåËØª final ÂüüÁöÑÈáçÊéíÂ∫èËßÑÂàô‰ºöÊääËØªÂØπË±° final ÂüüÁöÑÊìç‰Ωú‚ÄúÈôêÂÆö‚ÄùÂú®ËØªÂØπË±°ÂºïÁî®‰πãÂêéÔºåÊ≠§Êó∂ËØ• final ÂüüÂ∑≤ÁªèË¢´ A Á∫øÁ®ãÂàùÂßãÂåñËøá‰∫ÜÔºåËøôÊòØ‰∏Ä‰∏™Ê≠£Á°ÆÁöÑËØªÂèñÊìç‰Ωú„ÄÇ ËØª final ÂüüÁöÑÈáçÊéíÂ∫èËßÑÂàôÂèØ‰ª•Á°Æ‰øùÔºöÂú®ËØª‰∏Ä‰∏™ÂØπË±°ÁöÑ final Âüü‰πãÂâçÔºå‰∏ÄÂÆö‰ºöÂÖàËØªÂåÖÂê´Ëøô‰∏™ final ÂüüÁöÑÂØπË±°ÁöÑÂºïÁî®„ÄÇÂú®Ëøô‰∏™Á§∫‰æãÁ®ãÂ∫è‰∏≠ÔºåÂ¶ÇÊûúËØ•ÂºïÁî®‰∏ç‰∏∫ nullÔºåÈÇ£‰πàÂºïÁî®ÂØπË±°ÁöÑ final Âüü‰∏ÄÂÆöÂ∑≤ÁªèË¢´ A Á∫øÁ®ãÂàùÂßãÂåñËøá‰∫Ü„ÄÇ finalÂüüÊòØÂºïÁî®Á±ªÂûã 1234567891011121314151617181920212223public class FinalReferenceExample &#123; final int[] intArray; //final ÊòØÂºïÁî®Á±ªÂûã static FinalReferenceExample obj; public FinalReferenceExample () &#123; // ÊûÑÈÄ†ÂáΩÊï∞ intArray = new int[1]; //1 intArray[0] = 1; //2 &#125; public static void writerOne () &#123; // ÂÜôÁ∫øÁ®ã A ÊâßË°å obj = new FinalReferenceExample (); //3 &#125; public static void writerTwo () &#123; // ÂÜôÁ∫øÁ®ã B ÊâßË°å obj.intArray[0] = 2; //4 &#125; public static void reader () &#123; // ËØªÁ∫øÁ®ã C ÊâßË°å if (obj != null) &#123; //5 int temp1 = obj.intArray[0]; //6 &#125; &#125;&#125; ËøôÈáå final Âüü‰∏∫‰∏Ä‰∏™ÂºïÁî®Á±ªÂûãÔºåÂÆÉÂºïÁî®‰∏Ä‰∏™ int ÂûãÁöÑÊï∞ÁªÑÂØπË±°„ÄÇÂØπ‰∫éÂºïÁî®Á±ªÂûãÔºåÂÜô final ÂüüÁöÑÈáçÊéíÂ∫èËßÑÂàôÂØπÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®Â¢ûÂä†‰∫ÜÂ¶Ç‰∏ãÁ∫¶ÊùüÔºö Âú®ÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÂØπ‰∏Ä‰∏™ final ÂºïÁî®ÁöÑÂØπË±°ÁöÑÊàêÂëòÂüüÁöÑÂÜôÂÖ•Ôºå‰∏éÈöèÂêéÂú®ÊûÑÈÄ†ÂáΩÊï∞Â§ñÊääËøô‰∏™Ë¢´ÊûÑÈÄ†ÂØπË±°ÁöÑÂºïÁî®ËµãÂÄºÁªô‰∏Ä‰∏™ÂºïÁî®ÂèòÈáèÔºåËøô‰∏§‰∏™Êìç‰Ωú‰πãÈó¥‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇ ÂØπ‰∏äÈù¢ÁöÑÁ§∫‰æãÁ®ãÂ∫èÔºåÂÅáËÆæÈ¶ñÂÖàÁ∫øÁ®ã A ÊâßË°å writerOne() ÊñπÊ≥ïÔºåÊâßË°åÂÆåÂêéÁ∫øÁ®ã B ÊâßË°å writerTwo() ÊñπÊ≥ïÔºåÊâßË°åÂÆåÂêéÁ∫øÁ®ã C ÊâßË°å reader () ÊñπÊ≥ï„ÄÇ‰∏ãÈù¢ÊòØ‰∏ÄÁßçÂèØËÉΩÁöÑÁ∫øÁ®ãÊâßË°åÊó∂Â∫èÔºö Âú®‰∏äÂõæ‰∏≠Ôºå1 ÊòØÂØπ final ÂüüÁöÑÂÜôÂÖ•Ôºå2 ÊòØÂØπËøô‰∏™ final ÂüüÂºïÁî®ÁöÑÂØπË±°ÁöÑÊàêÂëòÂüüÁöÑÂÜôÂÖ•Ôºå3 ÊòØÊääË¢´ÊûÑÈÄ†ÁöÑÂØπË±°ÁöÑÂºïÁî®ËµãÂÄºÁªôÊüê‰∏™ÂºïÁî®ÂèòÈáè„ÄÇËøôÈáåÈô§‰∫ÜÂâçÈù¢ÊèêÂà∞ÁöÑ 1 ‰∏çËÉΩÂíå 3 ÈáçÊéíÂ∫èÂ§ñÔºå2 Âíå 3 ‰πü‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇ JMM ÂèØ‰ª•Á°Æ‰øùËØªÁ∫øÁ®ã C Ëá≥Â∞ëËÉΩÁúãÂà∞ÂÜôÁ∫øÁ®ã A Âú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂØπ final ÂºïÁî®ÂØπË±°ÁöÑÊàêÂëòÂüüÁöÑÂÜôÂÖ•„ÄÇÂç≥ C Ëá≥Â∞ëËÉΩÁúãÂà∞Êï∞ÁªÑ‰∏ãÊ†á 0 ÁöÑÂÄº‰∏∫ 1„ÄÇËÄåÂÜôÁ∫øÁ®ã B ÂØπÊï∞ÁªÑÂÖÉÁ¥†ÁöÑÂÜôÂÖ•ÔºåËØªÁ∫øÁ®ã C ÂèØËÉΩÁúãÁöÑÂà∞Ôºå‰πüÂèØËÉΩÁúã‰∏çÂà∞„ÄÇJMM ‰∏ç‰øùËØÅÁ∫øÁ®ã B ÁöÑÂÜôÂÖ•ÂØπËØªÁ∫øÁ®ã C ÂèØËßÅÔºåÂõ†‰∏∫ÂÜôÁ∫øÁ®ã B ÂíåËØªÁ∫øÁ®ã C ‰πãÈó¥Â≠òÂú®Êï∞ÊçÆÁ´û‰∫âÔºåÊ≠§Êó∂ÁöÑÊâßË°åÁªìÊûú‰∏çÂèØÈ¢ÑÁü•„ÄÇ ‰∏∫‰ªÄ‰πàfinalÂºïÁî®‰∏çËÉΩ‰ªéÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÈÄ∏Âá∫ ÂÜô final ÂüüÁöÑÈáçÊéíÂ∫èËßÑÂàôÂèØ‰ª•Á°Æ‰øùÔºöÂú®ÂºïÁî®ÂèòÈáè‰∏∫‰ªªÊÑèÁ∫øÁ®ãÂèØËßÅ‰πãÂâçÔºåËØ•ÂºïÁî®ÂèòÈáèÊåáÂêëÁöÑÂØπË±°ÁöÑ final ÂüüÂ∑≤ÁªèÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ë¢´Ê≠£Á°ÆÂàùÂßãÂåñËøá‰∫Ü„ÄÇÂÖ∂ÂÆûË¶ÅÂæóÂà∞Ëøô‰∏™ÊïàÊûúÔºåËøòÈúÄË¶Å‰∏Ä‰∏™‰øùËØÅÔºöÂú®ÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÈÉ®Ôºå‰∏çËÉΩËÆ©Ëøô‰∏™Ë¢´ÊûÑÈÄ†ÂØπË±°ÁöÑÂºïÁî®‰∏∫ÂÖ∂‰ªñÁ∫øÁ®ãÂèØËßÅÔºå‰πüÂ∞±ÊòØÂØπË±°ÂºïÁî®‰∏çËÉΩÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠‚ÄúÈÄ∏Âá∫‚Äù„ÄÇÁ§∫‰æãÂ¶Ç‰∏ãÔºö 12345678910111213141516171819public class FinalReferenceEscapeExample &#123; final int i; static FinalReferenceEscapeExample obj; public FinalReferenceEscapeExample () &#123; i = 1; //1 ÂÜô final Âüü obj = this; //2 this ÂºïÁî®Âú®Ê≠§‚ÄúÈÄ∏Âá∫‚Äù &#125; public static void writer() &#123; new FinalReferenceEscapeExample (); &#125; public static void reader &#123; if (obj != null) &#123; //3 int temp = obj.i; //4 &#125; &#125;&#125; ÂÅáËÆæ‰∏Ä‰∏™Á∫øÁ®ã A ÊâßË°å writer() ÊñπÊ≥ïÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ã B ÊâßË°å reader() ÊñπÊ≥ï„ÄÇËøôÈáåÁöÑÊìç‰Ωú 2 ‰ΩøÂæóÂØπË±°ËøòÊú™ÂÆåÊàêÊûÑÈÄ†ÂâçÂ∞±‰∏∫Á∫øÁ®ã B ÂèØËßÅ„ÄÇÂç≥‰ΩøËøôÈáåÁöÑÊìç‰Ωú 2 ÊòØÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊúÄÂêé‰∏ÄÊ≠•Ôºå‰∏îÂç≥‰ΩøÂú®Á®ãÂ∫è‰∏≠Êìç‰Ωú 2 ÊéíÂú®Êìç‰Ωú 1 ÂêéÈù¢ÔºåÊâßË°å read() ÊñπÊ≥ïÁöÑÁ∫øÁ®ã‰ªçÁÑ∂ÂèØËÉΩÊó†Ê≥ïÁúãÂà∞ final ÂüüË¢´ÂàùÂßãÂåñÂêéÁöÑÂÄºÔºåÂõ†‰∏∫ËøôÈáåÁöÑÊìç‰Ωú 1 ÂíåÊìç‰Ωú 2 ‰πãÈó¥ÂèØËÉΩË¢´ÈáçÊéíÂ∫è„ÄÇÂÆûÈôÖÁöÑÊâßË°åÊó∂Â∫èÂèØËÉΩÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºöÂú®ÊûÑÈÄ†ÂáΩÊï∞ËøîÂõûÂâçÔºåË¢´ÊûÑÈÄ†ÂØπË±°ÁöÑÂºïÁî®‰∏çËÉΩ‰∏∫ÂÖ∂‰ªñÁ∫øÁ®ãÂèØËßÅÔºåÂõ†‰∏∫Ê≠§Êó∂ÁöÑ final ÂüüÂèØËÉΩËøòÊ≤°ÊúâË¢´ÂàùÂßãÂåñ„ÄÇÂú®ÊûÑÈÄ†ÂáΩÊï∞ËøîÂõûÂêéÔºå‰ªªÊÑèÁ∫øÁ®ãÈÉΩÂ∞Ü‰øùËØÅËÉΩÁúãÂà∞ final ÂüüÊ≠£Á°ÆÂàùÂßãÂåñ‰πãÂêéÁöÑÂÄº„ÄÇ JSR-133‰∏∫‰ªÄ‰πàË¶ÅÂ¢ûÂº∫finalËØ≠‰πâ Âú®ÊóßÁöÑ Java ÂÜÖÂ≠òÊ®°Âûã‰∏≠ ÔºåÊúÄ‰∏•ÈáçÁöÑ‰∏Ä‰∏™Áº∫Èô∑Â∞±ÊòØÁ∫øÁ®ãÂèØËÉΩÁúãÂà∞ final ÂüüÁöÑÂÄº‰ºöÊîπÂèò„ÄÇÊØîÂ¶ÇÔºå‰∏Ä‰∏™Á∫øÁ®ãÂΩìÂâçÁúãÂà∞‰∏Ä‰∏™Êï¥ÂΩ¢ final ÂüüÁöÑÂÄº‰∏∫ 0ÔºàËøòÊú™ÂàùÂßãÂåñ‰πãÂâçÁöÑÈªòËÆ§ÂÄºÔºâÔºåËøá‰∏ÄÊÆµÊó∂Èó¥‰πãÂêéËøô‰∏™Á∫øÁ®ãÂÜçÂéªËØªËøô‰∏™ final ÂüüÁöÑÂÄºÊó∂ÔºåÂç¥ÂèëÁé∞ÂÄºÂèò‰∏∫‰∫Ü 1ÔºàË¢´Êüê‰∏™Á∫øÁ®ãÂàùÂßãÂåñ‰πãÂêéÁöÑÂÄºÔºâ„ÄÇÊúÄÂ∏∏ËßÅÁöÑ‰æãÂ≠êÂ∞±ÊòØÂú®ÊóßÁöÑ Java ÂÜÖÂ≠òÊ®°Âûã‰∏≠ÔºåString ÁöÑÂÄºÂèØËÉΩ‰ºöÊîπÂèò„ÄÇ ‰∏∫‰∫Ü‰øÆË°•Ëøô‰∏™ÊºèÊ¥ûÔºåJSR-133 ‰∏ìÂÆ∂ÁªÑÂ¢ûÂº∫‰∫Ü final ÁöÑËØ≠‰πâ„ÄÇÈÄöËøá‰∏∫ final ÂüüÂ¢ûÂä†ÂÜôÂíåËØªÈáçÊéíÂ∫èËßÑÂàôÔºåÂèØ‰ª•‰∏∫ java Á®ãÂ∫èÂëòÊèê‰æõÂàùÂßãÂåñÂÆâÂÖ®‰øùËØÅÔºöÂè™Ë¶ÅÂØπË±°ÊòØÊ≠£Á°ÆÊûÑÈÄ†ÁöÑÔºàË¢´ÊûÑÈÄ†ÂØπË±°ÁöÑÂºïÁî®Âú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ê≤°Êúâ‚ÄúÈÄ∏Âá∫‚ÄùÔºâÔºåÈÇ£‰πà‰∏çÈúÄË¶Å‰ΩøÁî®ÂêåÊ≠•ÔºàÊåá lock Âíå volatile ÁöÑ‰ΩøÁî®ÔºâÔºåÂ∞±ÂèØ‰ª•‰øùËØÅ‰ªªÊÑèÁ∫øÁ®ãÈÉΩËÉΩÁúãÂà∞Ëøô‰∏™ final ÂüüÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ë¢´ÂàùÂßãÂåñ‰πãÂêéÁöÑÂÄº„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>JMM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JMM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂÜÖÂ≠òÊ®°Âûã-ÁêÜËß£ÈîÅ]]></title>
    <url>%2Fposts%2Fa87ac669.html</url>
    <content type="text"><![CDATA[ÈîÅÁöÑhappens-beforeÂÖ≥Á≥ª ÈîÅÊòØ java Âπ∂ÂèëÁºñÁ®ã‰∏≠ÊúÄÈáçË¶ÅÁöÑÂêåÊ≠•Êú∫Âà∂„ÄÇÈîÅÈô§‰∫ÜËÆ©‰∏¥ÁïåÂå∫‰∫íÊñ•ÊâßË°åÂ§ñÔºåËøòÂèØ‰ª•ËÆ©ÈáäÊîæÈîÅÁöÑÁ∫øÁ®ãÂêëËé∑ÂèñÂêå‰∏Ä‰∏™ÈîÅÁöÑÁ∫øÁ®ãÂèëÈÄÅÊ∂àÊÅØ„ÄÇ 123456789101112class MonitorExample &#123; int a = 0; public synchronized void writer() &#123; //1 a++; //2 &#125; //3 public synchronized void reader() &#123; //4 int i = a; //5 ‚Ä¶‚Ä¶ &#125; //6&#125; ÂÅáËÆæÁ∫øÁ®ã A ÊâßË°å writer() ÊñπÊ≥ïÔºåÈöèÂêéÁ∫øÁ®ã B ÊâßË°å reader() ÊñπÊ≥ï„ÄÇÊ†πÊçÆ happens before ËßÑÂàôÔºåËøô‰∏™ËøáÁ®ãÂåÖÂê´ÁöÑ happens before ÂÖ≥Á≥ªÂèØ‰ª•ÂàÜ‰∏∫‰∏§Á±ªÔºö Ê†πÊçÆÁ®ãÂ∫èÊ¨°Â∫èËßÑÂàôÔºå1 happens before 2, 2 happens before 3; 4 happens before 5, 5 happens before 6„ÄÇ Ê†πÊçÆÁõëËßÜÂô®ÈîÅËßÑÂàôÔºå3 happens before 4„ÄÇ Ê†πÊçÆ happens before ÁöÑ‰º†ÈÄíÊÄßÔºå2 happens before 5„ÄÇ ‰∏äËø∞ happens-before ÂÖ≥Á≥ªÂõæÂ¶Ç‰∏ãÔºö ‰∏äÂõæ‰∏≠ÔºåÊØè‰∏Ä‰∏™ÁÆ≠Â§¥ÈìæÊé•ÁöÑ‰∏§‰∏™ËäÇÁÇπÔºå‰ª£Ë°®‰∫Ü‰∏Ä‰∏™ happens before ÂÖ≥Á≥ª„ÄÇÈªëËâ≤ÁÆ≠Â§¥Ë°®Á§∫Á®ãÂ∫èÈ°∫Â∫èËßÑÂàôÔºõÊ©ôËâ≤ÁÆ≠Â§¥Ë°®Á§∫ÁõëËßÜÂô®ÈîÅËßÑÂàôÔºõËìùËâ≤ÁÆ≠Â§¥Ë°®Á§∫ÁªÑÂêàËøô‰∫õËßÑÂàôÂêéÊèê‰æõÁöÑ happens before ‰øùËØÅ„ÄÇ ‰∏äÂõæË°®Á§∫Âú®Á∫øÁ®ã A ÈáäÊîæ‰∫ÜÈîÅ‰πãÂêéÔºåÈöèÂêéÁ∫øÁ®ã B Ëé∑ÂèñÂêå‰∏Ä‰∏™ÈîÅ„ÄÇÂú®‰∏äÂõæ‰∏≠Ôºå2 happens before 5„ÄÇÂõ†Ê≠§ÔºåÁ∫øÁ®ã A Âú®ÈáäÊîæÈîÅ‰πãÂâçÊâÄÊúâÂèØËßÅÁöÑÂÖ±‰∫´ÂèòÈáèÔºåÂú®Á∫øÁ®ã B Ëé∑ÂèñÂêå‰∏Ä‰∏™ÈîÅ‰πãÂêéÔºåÂ∞ÜÁ´ãÂàªÂèòÂæóÂØπ B Á∫øÁ®ãÂèØËßÅ„ÄÇ ÈîÅÁöÑÂÜÖÂ≠òËØ≠‰πâ ÈîÅÈáäÊîæÁöÑÂÜÖÂ≠òËØ≠‰πâ ÂΩìÁ∫øÁ®ãÈáäÊîæÈîÅÊó∂ÔºåJMM ‰ºöÊääËØ•Á∫øÁ®ãÂØπÂ∫îÁöÑÊú¨Âú∞ÂÜÖÂ≠ò‰∏≠ÁöÑÂÖ±‰∫´ÂèòÈáèÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠„ÄÇ‰ª•‰∏äÈù¢ÁöÑÁ®ãÂ∫è‰∏∫‰æãÔºåA Á∫øÁ®ãÈáäÊîæÈîÅÂêéÔºåÂÖ±‰∫´Êï∞ÊçÆÁöÑÁä∂ÊÄÅÁ§∫ÊÑèÂõæÂ¶Ç‰∏ãÔºö ÈîÅËé∑ÂèñÁöÑÂÜÖÂ≠òËØ≠‰πâ ÂΩìÁ∫øÁ®ãËé∑ÂèñÈîÅÊó∂ÔºåJMM ‰ºöÊääËØ•Á∫øÁ®ãÂØπÂ∫îÁöÑÊú¨Âú∞ÂÜÖÂ≠òÁΩÆ‰∏∫Êó†Êïà„ÄÇ‰ªéËÄå‰ΩøÂæóË¢´ÁõëËßÜÂô®‰øùÊä§ÁöÑ‰∏¥ÁïåÂå∫‰ª£Á†ÅÂøÖÈ°ªË¶Å‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠ÂéªËØªÂèñÂÖ±‰∫´ÂèòÈáè„ÄÇ‰∏ãÈù¢ÊòØÈîÅËé∑ÂèñÁöÑÁä∂ÊÄÅÁ§∫ÊÑèÂõæÔºö ÂØπÊØîÈîÅÈáäÊîæ - Ëé∑ÂèñÁöÑÂÜÖÂ≠òËØ≠‰πâ‰∏é volatile ÂÜô - ËØªÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåÂèØ‰ª•ÁúãÂá∫ÔºöÈîÅÈáäÊîæ‰∏é volatile ÂÜôÊúâÁõ∏ÂêåÁöÑÂÜÖÂ≠òËØ≠‰πâÔºõÈîÅËé∑Âèñ‰∏é volatile ËØªÊúâÁõ∏ÂêåÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇ ÈîÅÂÜÖÂ≠òËØ≠‰πâÁöÑÂÆûÁé∞ 1234567891011121314151617181920212223class ReentrantLockExample &#123; int a = 0; ReentrantLock lock = new ReentrantLock(); public void writer() &#123; lock.lock(); // Ëé∑ÂèñÈîÅ try &#123; a++; &#125; finally &#123; lock.unlock(); // ÈáäÊîæÈîÅ &#125; &#125; public void reader () &#123; lock.lock(); // Ëé∑ÂèñÈîÅ try &#123; int i = a; ‚Ä¶‚Ä¶ &#125; finally &#123; lock.unlock(); // ÈáäÊîæÈîÅ &#125; &#125;&#125; Âú® ReentrantLock ‰∏≠ÔºåË∞ÉÁî® lock() ÊñπÊ≥ïËé∑ÂèñÈîÅÔºõË∞ÉÁî® unlock() ÊñπÊ≥ïÈáäÊîæÈîÅ„ÄÇ ReentrantLock ÁöÑÂÆûÁé∞‰æùËµñ‰∫é java ÂêåÊ≠•Âô®Ê°ÜÊû∂ AbstractQueuedSynchronizerÔºàÁÆÄÁß∞ AQSÔºâ„ÄÇAQS ‰ΩøÁî®‰∏Ä‰∏™Êï¥ÂûãÁöÑ volatile ÂèòÈáèÔºàÂëΩÂêç‰∏∫ stateÔºâÊù•Áª¥Êä§ÂêåÊ≠•Áä∂ÊÄÅÔºåÈ©¨‰∏äÊàë‰ª¨‰ºöÁúãÂà∞ÔºåËøô‰∏™ volatile ÂèòÈáèÊòØ ReentrantLock ÂÜÖÂ≠òËØ≠‰πâÂÆûÁé∞ÁöÑÂÖ≥ÈîÆ„ÄÇ ‰∏ãÈù¢ÊòØ ReentrantLock ÁöÑÁ±ªÂõæÔºà‰ªÖÈÉ®ÂàÜÔºâÔºö ReentrantLock ÂàÜ‰∏∫ÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÔºåÈ¶ñÂÖàÂàÜÊûêÂÖ¨Âπ≥ÈîÅ„ÄÇ ‰ΩøÁî®ÂÖ¨Âπ≥ÈîÅÊó∂ÔºåÂä†ÈîÅÊñπÊ≥ï lock() ÁöÑÊñπÊ≥ïË∞ÉÁî®ËΩ®ËøπÂ¶Ç‰∏ãÔºö ReentrantLock : lock() FairSync : lock() AbstractQueuedSynchronizer : acquire(int arg) ReentrantLock : tryAcquire(int acquires) Âú®Á¨¨ 4 Ê≠•ÁúüÊ≠£ÂºÄÂßãÂä†ÈîÅÔºå‰∏ãÈù¢ÊòØËØ•ÊñπÊ≥ïÁöÑÊ∫ê‰ª£Á†ÅÔºö 12345678910111213141516171819protected final boolean tryAcquire(int acquires) &#123; final Thread current = Thread.currentThread(); int c = getState(); // Ëé∑ÂèñÈîÅÁöÑÂºÄÂßãÔºåÈ¶ñÂÖàËØª volatile ÂèòÈáè state if (c == 0) &#123; if (isFirst(current) &amp;&amp; compareAndSetState(0, acquires)) &#123; setExclusiveOwnerThread(current); return true; &#125; &#125; else if (current == getExclusiveOwnerThread()) &#123; int nextc = c + acquires; if (nextc &lt; 0) throw new Error("Maximum lock count exceeded"); setState(nextc); return true; &#125; return false;&#125; ‰ªé‰∏äÈù¢Ê∫ê‰ª£Á†Å‰∏≠Êàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåÂä†ÈîÅÊñπÊ≥ïÈ¶ñÂÖàËØª volatile ÂèòÈáè state„ÄÇ Âú®‰ΩøÁî®ÂÖ¨Âπ≥ÈîÅÊó∂ÔºåËß£ÈîÅÊñπÊ≥ï unlock() ÁöÑÊñπÊ≥ïË∞ÉÁî®ËΩ®ËøπÂ¶Ç‰∏ãÔºö ReentrantLock : unlock() AbstractQueuedSynchronizer : release(int arg) Sync : tryRelease(int releases) Âú®Á¨¨ 3 Ê≠•ÁúüÊ≠£ÂºÄÂßãÈáäÊîæÈîÅÔºå‰∏ãÈù¢ÊòØËØ•ÊñπÊ≥ïÁöÑÊ∫ê‰ª£Á†ÅÔºö 123456789101112protected final boolean tryRelease(int releases) &#123; int c = getState() - releases; if (Thread.currentThread() != getExclusiveOwnerThread()) throw new IllegalMonitorStateException(); boolean free = false; if (c == 0) &#123; free = true; setExclusiveOwnerThread(null); &#125; setState(c); // ÈáäÊîæÈîÅÁöÑÊúÄÂêéÔºåÂÜô volatile ÂèòÈáè state return free;&#125; ‰ªé‰∏äÈù¢ÁöÑÊ∫ê‰ª£Á†ÅÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåÂú®ÈáäÊîæÈîÅÁöÑÊúÄÂêéÂÜô volatile ÂèòÈáè state„ÄÇ ÂÖ¨Âπ≥ÈîÅÂú®ÈáäÊîæÈîÅÁöÑÊúÄÂêéÂÜô volatile ÂèòÈáè stateÔºõÂú®Ëé∑ÂèñÈîÅÊó∂È¶ñÂÖàËØªËøô‰∏™ volatile ÂèòÈáè„ÄÇÊ†πÊçÆ volatile ÁöÑ happens-before ËßÑÂàôÔºåÈáäÊîæÈîÅÁöÑÁ∫øÁ®ãÂú®ÂÜô volatile ÂèòÈáè‰πãÂâçÂèØËßÅÁöÑÂÖ±‰∫´ÂèòÈáèÔºåÂú®Ëé∑ÂèñÈîÅÁöÑÁ∫øÁ®ãËØªÂèñÂêå‰∏Ä‰∏™ volatile ÂèòÈáèÂêéÂ∞ÜÁ´ãÂç≥ÂèòÁöÑÂØπËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ãÂèØËßÅ„ÄÇ Áé∞Âú®ÂàÜÊûêÈùûÂÖ¨Âπ≥ÈîÅÁöÑÂÜÖÂ≠òËØ≠‰πâÁöÑÂÆûÁé∞„ÄÇ ÈùûÂÖ¨Âπ≥ÈîÅÁöÑÈáäÊîæÂíåÂÖ¨Âπ≥ÈîÅÂÆåÂÖ®‰∏ÄÊ†∑ÔºåÊâÄ‰ª•ËøôÈáå‰ªÖ‰ªÖÂàÜÊûêÈùûÂÖ¨Âπ≥ÈîÅÁöÑËé∑Âèñ„ÄÇ ‰ΩøÁî®ÂÖ¨Âπ≥ÈîÅÊó∂ÔºåÂä†ÈîÅÊñπÊ≥ï lock() ÁöÑÊñπÊ≥ïË∞ÉÁî®ËΩ®ËøπÂ¶Ç‰∏ãÔºö ReentrantLock : lock() NonfairSync : lock() AbstractQueuedSynchronizer : compareAndSetState(int expect, int update) Âú®Á¨¨ 3 Ê≠•ÁúüÊ≠£ÂºÄÂßãÂä†ÈîÅÔºå‰∏ãÈù¢ÊòØËØ•ÊñπÊ≥ïÁöÑÊ∫ê‰ª£Á†ÅÔºö 123protected final boolean compareAndSetState(int expect, int update) &#123; return unsafe.compareAndSwapInt(this, stateOffset, expect, update);&#125; ËØ•ÊñπÊ≥ï‰ª•ÂéüÂ≠êÊìç‰ΩúÁöÑÊñπÂºèÊõ¥Êñ∞ state ÂèòÈáèÔºåJDK ÊñáÊ°£ÂØπËØ•ÊñπÊ≥ïÁöÑËØ¥ÊòéÂ¶Ç‰∏ãÔºöÂ¶ÇÊûúÂΩìÂâçÁä∂ÊÄÅÂÄºÁ≠â‰∫éÈ¢ÑÊúüÂÄºÔºåÂàô‰ª•ÂéüÂ≠êÊñπÂºèÂ∞ÜÂêåÊ≠•Áä∂ÊÄÅËÆæÁΩÆ‰∏∫ÁªôÂÆöÁöÑÊõ¥Êñ∞ÂÄº„ÄÇÊ≠§Êìç‰ΩúÂÖ∑Êúâ volatile ËØªÂíåÂÜôÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇ ÂâçÊñáËØ¥ËøáÔºåÁºñËØëÂô®‰∏ç‰ºöÂØπ volatile ËØª‰∏é volatile ËØªÂêéÈù¢ÁöÑ‰ªªÊÑèÂÜÖÂ≠òÊìç‰ΩúÈáçÊéíÂ∫èÔºõÁºñËØëÂô®‰∏ç‰ºöÂØπ volatile ÂÜô‰∏é volatile ÂÜôÂâçÈù¢ÁöÑ‰ªªÊÑèÂÜÖÂ≠òÊìç‰ΩúÈáçÊéíÂ∫è„ÄÇÁªÑÂêàËøô‰∏§‰∏™Êù°‰ª∂ÔºåÊÑèÂë≥ÁùÄ‰∏∫‰∫ÜÂêåÊó∂ÂÆûÁé∞ volatile ËØªÂíå volatile ÂÜôÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåÁºñËØëÂô®‰∏çËÉΩÂØπ CAS ‰∏é CAS ÂâçÈù¢ÂíåÂêéÈù¢ÁöÑ‰ªªÊÑèÂÜÖÂ≠òÊìç‰ΩúÈáçÊéíÂ∫è„ÄÇ ÂØπÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÁöÑÂÜÖÂ≠òËØ≠‰πâÂÅö‰∏™ÊÄªÁªìÔºö ÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÈáäÊîæÊó∂ÔºåÊúÄÂêéÈÉΩË¶ÅÂÜô‰∏Ä‰∏™ volatile ÂèòÈáè state„ÄÇ ÂÖ¨Âπ≥ÈîÅËé∑ÂèñÊó∂ÔºåÈ¶ñÂÖà‰ºöÂéªËØªËøô‰∏™ volatile ÂèòÈáè„ÄÇ ÈùûÂÖ¨Âπ≥ÈîÅËé∑ÂèñÊó∂ÔºåÈ¶ñÂÖà‰ºöÁî® CAS Êõ¥Êñ∞Ëøô‰∏™ volatile ÂèòÈáè, Ëøô‰∏™Êìç‰ΩúÂêåÊó∂ÂÖ∑Êúâ volatile ËØªÂíå volatile ÂÜôÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇ ‰ªéÂØπ ReentrantLock ÁöÑÂàÜÊûêÂèØ‰ª•ÁúãÂá∫ÔºåÈîÅÈáäÊîæ - Ëé∑ÂèñÁöÑÂÜÖÂ≠òËØ≠‰πâÁöÑÂÆûÁé∞Ëá≥Â∞ëÊúâ‰∏ãÈù¢‰∏§ÁßçÊñπÂºèÔºö Âà©Áî® volatile ÂèòÈáèÁöÑÂÜô - ËØªÊâÄÂÖ∑ÊúâÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇ Âà©Áî® CAS ÊâÄÈôÑÂ∏¶ÁöÑ volatile ËØªÂíå volatile ÂÜôÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇ J.U.CÂåÖÁöÑÂÆûÁé∞ Áî±‰∫é java ÁöÑ CAS ÂêåÊó∂ÂÖ∑Êúâ volatile ËØªÂíå volatile ÂÜôÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåÂõ†Ê≠§ Java Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°Áé∞Âú®Êúâ‰∫Ü‰∏ãÈù¢ÂõõÁßçÊñπÂºèÔºö A Á∫øÁ®ãÂÜô volatile ÂèòÈáèÔºåÈöèÂêé B Á∫øÁ®ãËØªËøô‰∏™ volatile ÂèòÈáè„ÄÇ A Á∫øÁ®ãÂÜô volatile ÂèòÈáèÔºåÈöèÂêé B Á∫øÁ®ãÁî® CAS Êõ¥Êñ∞Ëøô‰∏™ volatile ÂèòÈáè„ÄÇ A Á∫øÁ®ãÁî® CAS Êõ¥Êñ∞‰∏Ä‰∏™ volatile ÂèòÈáèÔºåÈöèÂêé B Á∫øÁ®ãÁî® CAS Êõ¥Êñ∞Ëøô‰∏™ volatile ÂèòÈáè„ÄÇ A Á∫øÁ®ãÁî® CAS Êõ¥Êñ∞‰∏Ä‰∏™ volatile ÂèòÈáèÔºåÈöèÂêé B Á∫øÁ®ãËØªËøô‰∏™ volatile ÂèòÈáè„ÄÇ Java ÁöÑ CAS ‰ºö‰ΩøÁî®Áé∞‰ª£Â§ÑÁêÜÂô®‰∏äÊèê‰æõÁöÑÈ´òÊïàÊú∫Âô®Á∫ßÂà´ÂéüÂ≠êÊåá‰ª§ÔºåËøô‰∫õÂéüÂ≠êÊåá‰ª§‰ª•ÂéüÂ≠êÊñπÂºèÂØπÂÜÖÂ≠òÊâßË°åËØª - Êîπ - ÂÜôÊìç‰ΩúÔºåËøôÊòØÂú®Â§öÂ§ÑÁêÜÂô®‰∏≠ÂÆûÁé∞ÂêåÊ≠•ÁöÑÂÖ≥ÈîÆÔºà‰ªéÊú¨Ë¥®‰∏äÊù•ËØ¥ÔºåËÉΩÂ§üÊîØÊåÅÂéüÂ≠êÊÄßËØª - Êîπ - ÂÜôÊåá‰ª§ÁöÑËÆ°ÁÆóÊú∫Âô®ÔºåÊòØÈ°∫Â∫èËÆ°ÁÆóÂõæÁÅµÊú∫ÁöÑÂºÇÊ≠•Á≠â‰ª∑Êú∫Âô®ÔºåÂõ†Ê≠§‰ªª‰ΩïÁé∞‰ª£ÁöÑÂ§öÂ§ÑÁêÜÂô®ÈÉΩ‰ºöÂéªÊîØÊåÅÊüêÁßçËÉΩÂØπÂÜÖÂ≠òÊâßË°åÂéüÂ≠êÊÄßËØª - Êîπ - ÂÜôÊìç‰ΩúÁöÑÂéüÂ≠êÊåá‰ª§Ôºâ„ÄÇÂêåÊó∂Ôºåvolatile ÂèòÈáèÁöÑËØª / ÂÜôÂíå CAS ÂèØ‰ª•ÂÆûÁé∞Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇÊääËøô‰∫õÁâπÊÄßÊï¥ÂêàÂú®‰∏ÄËµ∑ÔºåÂ∞±ÂΩ¢Êàê‰∫ÜÊï¥‰∏™ J.U.C ÂåÖÂæó‰ª•ÂÆûÁé∞ÁöÑÂü∫Áü≥„ÄÇÂ¶ÇÊûú‰ªîÁªÜÂàÜÊûê J.U.C ÂåÖÁöÑÊ∫ê‰ª£Á†ÅÂÆûÁé∞Ôºå‰ºöÂèëÁé∞‰∏Ä‰∏™ÈÄöÁî®ÂåñÁöÑÂÆûÁé∞Ê®°ÂºèÔºö È¶ñÂÖàÔºåÂ£∞ÊòéÂÖ±‰∫´ÂèòÈáè‰∏∫ volatileÔºõ ÁÑ∂ÂêéÔºå‰ΩøÁî® CAS ÁöÑÂéüÂ≠êÊù°‰ª∂Êõ¥Êñ∞Êù•ÂÆûÁé∞Á∫øÁ®ã‰πãÈó¥ÁöÑÂêåÊ≠•Ôºõ ÂêåÊó∂ÔºåÈÖçÂêà‰ª• volatile ÁöÑËØª / ÂÜôÂíå CAS ÊâÄÂÖ∑ÊúâÁöÑ volatile ËØªÂíåÂÜôÁöÑÂÜÖÂ≠òËØ≠‰πâÊù•ÂÆûÁé∞Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇ AQSÔºåÈùûÈòªÂ°ûÊï∞ÊçÆÁªìÊûÑÂíåÂéüÂ≠êÂèòÈáèÁ±ªÔºàjava.util.concurrent.atomic ÂåÖ‰∏≠ÁöÑÁ±ªÔºâÔºåËøô‰∫õ J.U.C ÂåÖ‰∏≠ÁöÑÂü∫Á°ÄÁ±ªÈÉΩÊòØ‰ΩøÁî®ËøôÁßçÊ®°ÂºèÊù•ÂÆûÁé∞ÁöÑÔºåËÄå J.U.C ÂåÖ‰∏≠ÁöÑÈ´òÂ±ÇÁ±ªÂèàÊòØ‰æùËµñ‰∫éËøô‰∫õÂü∫Á°ÄÁ±ªÊù•ÂÆûÁé∞ÁöÑ„ÄÇ‰ªéÊï¥‰ΩìÊù•ÁúãÔºåJ.U.C ÂåÖÁöÑÂÆûÁé∞Á§∫ÊÑèÂõæÂ¶Ç‰∏ãÔºö]]></content>
      <categories>
        <category>Java</category>
        <category>JMM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JMM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂÜÖÂ≠òÊ®°Âûã-È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã]]></title>
    <url>%2Fposts%2F60b19e41.html</url>
    <content type="text"><![CDATA[È°∫Â∫è‰∏ÄËá¥ÊÄß‰øùËØÅ ÂΩìÁ®ãÂ∫èÊú™Ê≠£Á°ÆÂêåÊ≠•Êó∂ÔºåÂ∞±‰ºöÂ≠òÂú®Êï∞ÊçÆÁ´û‰∫â„ÄÇjava ÂÜÖÂ≠òÊ®°ÂûãËßÑËåÉÂØπÊï∞ÊçÆÁ´û‰∫âÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö Âú®‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÂÜô‰∏Ä‰∏™ÂèòÈáèÔºåÂú®Âè¶‰∏Ä‰∏™Á∫øÁ®ãËØªÂêå‰∏Ä‰∏™ÂèòÈáèÔºåËÄå‰∏îÂÜôÂíåËØªÊ≤°ÊúâÈÄöËøáÂêåÊ≠•Êù•ÊéíÂ∫è„ÄÇ ÂΩì‰ª£Á†Å‰∏≠ÂåÖÂê´Êï∞ÊçÆÁ´û‰∫âÊó∂ÔºåÁ®ãÂ∫èÁöÑÊâßË°åÂæÄÂæÄ‰∫ßÁîüËøùÂèçÁõ¥ËßâÁöÑÁªìÊûú„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Â§öÁ∫øÁ®ãÁ®ãÂ∫èËÉΩÊ≠£Á°ÆÂêåÊ≠•ÔºåËøô‰∏™Á®ãÂ∫èÂ∞ÜÊòØ‰∏Ä‰∏™Ê≤°ÊúâÊï∞ÊçÆÁ´û‰∫âÁöÑÁ®ãÂ∫è„ÄÇ JMM ÂØπÊ≠£Á°ÆÂêåÊ≠•ÁöÑÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏ÄËá¥ÊÄßÂÅö‰∫ÜÂ¶Ç‰∏ã‰øùËØÅÔºö Â¶ÇÊûúÁ®ãÂ∫èÊòØÊ≠£Á°ÆÂêåÊ≠•ÁöÑÔºåÁ®ãÂ∫èÁöÑÊâßË°åÂ∞ÜÂÖ∑ÊúâÈ°∫Â∫è‰∏ÄËá¥ÊÄßÔºàsequentially consistentÔºâ-- Âç≥Á®ãÂ∫èÁöÑÊâßË°åÁªìÊûú‰∏éËØ•Á®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã‰∏≠ÁöÑÊâßË°åÁªìÊûúÁõ∏Âêå„ÄÇËøôÈáåÁöÑÂêåÊ≠•ÊòØÊåáÂπø‰πâ‰∏äÁöÑÂêåÊ≠•ÔºåÂåÖÊã¨ÂØπÂ∏∏Áî®ÂêåÊ≠•ÂéüËØ≠ÔºàlockÔºåvolatile Âíå finalÔºâÁöÑÊ≠£Á°Æ‰ΩøÁî®„ÄÇ È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°ÂûãÊòØÁêÜËÆ∫ÂèÇËÄÉÊ®°ÂûãÔºåÂÆÉ‰∏∫Á®ãÂ∫èÂëòÊèê‰æõ‰∫ÜÊûÅÂº∫ÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅ„ÄÇÈ°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°ÂûãÊúâ‰∏§Â§ßÁâπÊÄßÔºö ‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúÂøÖÈ°ªÊåâÁÖßÁ®ãÂ∫èÁöÑÈ°∫Â∫èÊù•ÊâßË°å„ÄÇ Ôºà‰∏çÁÆ°Á®ãÂ∫èÊòØÂê¶ÂêåÊ≠•ÔºâÊâÄÊúâÁ∫øÁ®ãÈÉΩÂè™ËÉΩÁúãÂà∞‰∏Ä‰∏™Âçï‰∏ÄÁöÑÊìç‰ΩúÊâßË°åÈ°∫Â∫è„ÄÇÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã‰∏≠ÔºåÊØè‰∏™Êìç‰ΩúÈÉΩÂøÖÈ°ªÂéüÂ≠êÊâßË°å‰∏îÁ´ãÂàªÂØπÊâÄÊúâÁ∫øÁ®ãÂèØËßÅ„ÄÇ È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã‰∏∫Á®ãÂ∫èÂëòÊèê‰æõÁöÑËßÜÂõæÂ¶Ç‰∏ãÔºö Âú®Ê¶ÇÂøµ‰∏äÔºåÈ°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°ÂûãÊúâ‰∏Ä‰∏™Âçï‰∏ÄÁöÑÂÖ®Â±ÄÂÜÖÂ≠òÔºåËøô‰∏™ÂÜÖÂ≠òÈÄöËøá‰∏Ä‰∏™Â∑¶Âè≥ÊëÜÂä®ÁöÑÂºÄÂÖ≥ÂèØ‰ª•ËøûÊé•Âà∞‰ªªÊÑè‰∏Ä‰∏™Á∫øÁ®ã„ÄÇÂêåÊó∂ÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÂøÖÈ°ªÊåâÁ®ãÂ∫èÁöÑÈ°∫Â∫èÊù•ÊâßË°åÂÜÖÂ≠òËØª / ÂÜôÊìç‰Ωú„ÄÇÂú®‰ªªÊÑèÊó∂Èó¥ÁÇπÊúÄÂ§öÂè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•ËøûÊé•Âà∞ÂÜÖÂ≠ò„ÄÇÂΩìÂ§ö‰∏™Á∫øÁ®ãÂπ∂ÂèëÊâßË°åÊó∂ÔºåÂõæ‰∏≠ÁöÑÂºÄÂÖ≥Ë£ÖÁΩÆËÉΩÊääÊâÄÊúâÁ∫øÁ®ãÁöÑÊâÄÊúâÂÜÖÂ≠òËØª / ÂÜôÊìç‰Ωú‰∏≤Ë°åÂåñ„ÄÇ Á§∫‰æãÔºöÂÅáËÆæÊúâ‰∏§‰∏™Á∫øÁ®ã A Âíå B Âπ∂ÂèëÊâßË°å„ÄÇÂÖ∂‰∏≠ A Á∫øÁ®ãÊúâ‰∏â‰∏™Êìç‰ΩúÔºåÂÆÉ‰ª¨Âú®Á®ãÂ∫è‰∏≠ÁöÑÈ°∫Â∫èÊòØÔºöA1-&gt;A2-&gt;A3„ÄÇB Á∫øÁ®ã‰πüÊúâ‰∏â‰∏™Êìç‰ΩúÔºåÂÆÉ‰ª¨Âú®Á®ãÂ∫è‰∏≠ÁöÑÈ°∫Â∫èÊòØÔºöB1-&gt;B2-&gt;B3„ÄÇ ÂÅáËÆæËøô‰∏§‰∏™Á∫øÁ®ã‰ΩøÁî®ÁõëËßÜÂô®Êù•Ê≠£Á°ÆÂêåÊ≠•ÔºöA Á∫øÁ®ãÁöÑ‰∏â‰∏™Êìç‰ΩúÊâßË°åÂêéÈáäÊîæÁõëËßÜÂô®ÔºåÈöèÂêé B Á∫øÁ®ãËé∑ÂèñÂêå‰∏Ä‰∏™ÁõëËßÜÂô®„ÄÇÈÇ£‰πàÁ®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰∏≠ÁöÑÊâßË°åÊïàÊûúÂ∞ÜÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ÂÜçÂÅáËÆæËøô‰∏§‰∏™Á∫øÁ®ãÊ≤°ÊúâÂÅöÂêåÊ≠•Ôºå‰∏ãÈù¢ÊòØËøô‰∏™Êú™ÂêåÊ≠•Á®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰∏≠ÁöÑÊâßË°åÁ§∫ÊÑèÂõæÔºö Êú™ÂêåÊ≠•Á®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰∏≠ËôΩÁÑ∂Êï¥‰ΩìÊâßË°åÈ°∫Â∫èÊòØÊó†Â∫èÁöÑÔºå‰ΩÜÊâÄÊúâÁ∫øÁ®ãÈÉΩÂè™ËÉΩÁúãÂà∞‰∏Ä‰∏™‰∏ÄËá¥ÁöÑÊï¥‰ΩìÊâßË°åÈ°∫Â∫è„ÄÇ‰ª•‰∏äÂõæ‰∏∫‰æãÔºåÁ∫øÁ®ã A Âíå B ÁúãÂà∞ÁöÑÊâßË°åÈ°∫Â∫èÈÉΩÊòØÔºöB1-&gt;A1-&gt;A2-&gt;B2-&gt;A3-&gt;B3„ÄÇ‰πãÊâÄ‰ª•ËÉΩÂæóÂà∞Ëøô‰∏™‰øùËØÅÊòØÂõ†‰∏∫È°∫Â∫è‰∏ÄËá¥ÊÄßÂÜÖÂ≠òÊ®°Âûã‰∏≠ÁöÑÊØè‰∏™Êìç‰ΩúÂøÖÈ°ªÁ´ãÂç≥ÂØπ‰ªªÊÑèÁ∫øÁ®ãÂèØËßÅ„ÄÇ ‰ΩÜÊòØÔºåÂú® JMM ‰∏≠Â∞±Ê≤°ÊúâËøô‰∏™‰øùËØÅ„ÄÇÊú™ÂêåÊ≠•Á®ãÂ∫èÂú® JMM ‰∏≠‰∏ç‰ΩÜÊï¥‰ΩìÁöÑÊâßË°åÈ°∫Â∫èÊòØÊó†Â∫èÁöÑÔºåËÄå‰∏îÊâÄÊúâÁ∫øÁ®ãÁúãÂà∞ÁöÑÊìç‰ΩúÊâßË°åÈ°∫Â∫è‰πüÂèØËÉΩ‰∏ç‰∏ÄËá¥„ÄÇÊØîÂ¶ÇÔºåÂú®ÂΩìÂâçÁ∫øÁ®ãÊääÂÜôËøáÁöÑÊï∞ÊçÆÁºìÂ≠òÂú®Êú¨Âú∞ÂÜÖÂ≠ò‰∏≠Ôºå‰∏îËøòÊ≤°ÊúâÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò‰πãÂâçÔºåËøô‰∏™ÂÜôÊìç‰Ωú‰ªÖÂØπÂΩìÂâçÁ∫øÁ®ãÂèØËßÅÔºõ‰ªéÂÖ∂‰ªñÁ∫øÁ®ãÁöÑËßíÂ∫¶Êù•ËßÇÂØüÔºå‰ºöËÆ§‰∏∫Ëøô‰∏™ÂÜôÊìç‰ΩúÊ†πÊú¨ËøòÊ≤°ÊúâË¢´ÂΩìÂâçÁ∫øÁ®ãÊâßË°å„ÄÇÂè™ÊúâÂΩìÂâçÁ∫øÁ®ãÊääÊú¨Âú∞ÂÜÖÂ≠ò‰∏≠ÂÜôËøáÁöÑÊï∞ÊçÆÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò‰πãÂêéÔºåËøô‰∏™ÂÜôÊìç‰ΩúÊâçËÉΩÂØπÂÖ∂‰ªñÁ∫øÁ®ãÂèØËßÅ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂΩìÂâçÁ∫øÁ®ãÂíåÂÖ∂ÂÆÉÁ∫øÁ®ãÁúãÂà∞ÁöÑÊìç‰ΩúÊâßË°åÈ°∫Â∫èÂ∞Ü‰∏ç‰∏ÄËá¥„ÄÇ ÂêåÊ≠•Á®ãÂ∫èÁöÑÈ°∫Â∫è‰∏ÄËá¥ÊÄß 12345678910111213141516class SynchronizedExample &#123; int a = 0; boolean flag = false; public synchronized void writer() &#123; a = 1; flag = true; &#125; public synchronized void reader() &#123; if (flag) &#123; int i = a; ‚Ä¶‚Ä¶ &#125; &#125;&#125; Á§∫‰æã‰ª£Á†Å‰∏≠ÔºåÂÅáËÆæ A Á∫øÁ®ãÊâßË°å writer() ÊñπÊ≥ïÂêéÔºåB Á∫øÁ®ãÊâßË°å reader() ÊñπÊ≥ï„ÄÇËøôÊòØ‰∏Ä‰∏™Ê≠£Á°ÆÂêåÊ≠•ÁöÑÂ§öÁ∫øÁ®ãÁ®ãÂ∫è„ÄÇÊ†πÊçÆ JMM ËßÑËåÉÔºåËØ•Á®ãÂ∫èÁöÑÊâßË°åÁªìÊûúÂ∞Ü‰∏éËØ•Á®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰∏≠ÁöÑÊâßË°åÁªìÊûúÁõ∏Âêå„ÄÇÂ¶Ç‰∏ãÊâßË°åÂØπÊØîÂõæÔºö Âú®È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰∏≠ÔºåÊâÄÊúâÊìç‰ΩúÂÆåÂÖ®ÊåâÁ®ãÂ∫èÁöÑÈ°∫Â∫è‰∏≤Ë°åÊâßË°å„ÄÇËÄåÂú® JMM ‰∏≠Ôºå‰∏¥ÁïåÂå∫ÂÜÖÁöÑ‰ª£Á†ÅÂèØ‰ª•ÈáçÊéíÂ∫èÔºà‰ΩÜ JMM ‰∏çÂÖÅËÆ∏‰∏¥ÁïåÂå∫ÂÜÖÁöÑ‰ª£Á†Å‚ÄúÈÄ∏Âá∫‚ÄùÂà∞‰∏¥ÁïåÂå∫‰πãÂ§ñÔºåÈÇ£Ê†∑‰ºöÁ†¥ÂùèÁõëËßÜÂô®ÁöÑËØ≠‰πâÔºâ„ÄÇJMM ‰ºöÂú®ÈÄÄÂá∫ÁõëËßÜÂô®ÂíåËøõÂÖ•ÁõëËßÜÂô®Ëøô‰∏§‰∏™ÂÖ≥ÈîÆÊó∂Èó¥ÁÇπÂÅö‰∏Ä‰∫õÁâπÂà´Â§ÑÁêÜÔºå‰ΩøÂæóÁ∫øÁ®ãÂú®Ëøô‰∏§‰∏™Êó∂Èó¥ÁÇπÂÖ∑Êúâ‰∏éÈ°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°ÂûãÁõ∏ÂêåÁöÑÂÜÖÂ≠òËßÜÂõæ„ÄÇËôΩÁÑ∂Á∫øÁ®ã A Âú®‰∏¥ÁïåÂå∫ÂÜÖÂÅö‰∫ÜÈáçÊéíÂ∫èÔºå‰ΩÜÁî±‰∫éÁõëËßÜÂô®ÁöÑ‰∫íÊñ•ÊâßË°åÁöÑÁâπÊÄßÔºåËøôÈáåÁöÑÁ∫øÁ®ã B Ê†πÊú¨Êó†Ê≥ï‚ÄúËßÇÂØü‚ÄùÂà∞Á∫øÁ®ã A Âú®‰∏¥ÁïåÂå∫ÂÜÖÁöÑÈáçÊéíÂ∫è„ÄÇËøôÁßçÈáçÊéíÂ∫èÊó¢ÊèêÈ´ò‰∫ÜÊâßË°åÊïàÁéáÔºåÂèàÊ≤°ÊúâÊîπÂèòÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûú„ÄÇ ‰ªéËøôÈáåÂèØ‰ª•ÁúãÂà∞ JMM Âú®ÂÖ∑‰ΩìÂÆûÁé∞‰∏äÁöÑÂü∫Êú¨ÊñπÈíàÔºöÂú®‰∏çÊîπÂèòÔºàÊ≠£Á°ÆÂêåÊ≠•ÁöÑÔºâÁ®ãÂ∫èÊâßË°åÁªìÊûúÁöÑÂâçÊèê‰∏ãÔºåÂ∞ΩÂèØËÉΩÁöÑ‰∏∫ÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÁöÑ‰ºòÂåñÊâìÂºÄÊñπ‰æø‰πãÈó®„ÄÇ Êú™ÂêåÊ≠•Á®ãÂ∫èÁöÑÊâßË°åÁâπÊÄß ÂØπ‰∫éÊú™ÂêåÊ≠•ÊàñÊú™Ê≠£Á°ÆÂêåÊ≠•ÁöÑÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÔºåJMM Âè™Êèê‰æõÊúÄÂ∞èÂÆâÂÖ®ÊÄßÔºöÁ∫øÁ®ãÊâßË°åÊó∂ËØªÂèñÂà∞ÁöÑÂÄºÔºåË¶Å‰πàÊòØ‰πãÂâçÊüê‰∏™Á∫øÁ®ãÂÜôÂÖ•ÁöÑÂÄºÔºåË¶Å‰πàÊòØÈªòËÆ§ÂÄºÔºà0ÔºånullÔºåfalseÔºâÔºåJMM ‰øùËØÅÁ∫øÁ®ãËØªÊìç‰ΩúËØªÂèñÂà∞ÁöÑÂÄº‰∏ç‰ºöÊó†‰∏≠ÁîüÊúâÔºàout of thin airÔºâÁöÑÂÜíÂá∫Êù•„ÄÇ‰∏∫‰∫ÜÂÆûÁé∞ÊúÄÂ∞èÂÆâÂÖ®ÊÄßÔºåJVM Âú®Â†Ü‰∏äÂàÜÈÖçÂØπË±°Êó∂ÔºåÈ¶ñÂÖà‰ºöÊ∏ÖÈõ∂ÂÜÖÂ≠òÁ©∫Èó¥ÔºåÁÑ∂ÂêéÊâç‰ºöÂú®‰∏äÈù¢ÂàÜÈÖçÂØπË±°ÔºàJVM ÂÜÖÈÉ®‰ºöÂêåÊ≠•Ëøô‰∏§‰∏™Êìç‰ΩúÔºâ„ÄÇÂõ†Ê≠§ÔºåÂú®Â∑≤Ê∏ÖÈõ∂ÁöÑÂÜÖÂ≠òÁ©∫Èó¥Ôºàpre-zeroed memoryÔºâÂàÜÈÖçÂØπË±°Êó∂ÔºåÂüüÁöÑÈªòËÆ§ÂàùÂßãÂåñÂ∑≤ÁªèÂÆåÊàê‰∫Ü„ÄÇ JMM ‰∏ç‰øùËØÅÊú™ÂêåÊ≠•Á®ãÂ∫èÁöÑÊâßË°åÁªìÊûú‰∏éËØ•Á®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰∏≠ÁöÑÊâßË°åÁªìÊûú‰∏ÄËá¥„ÄÇÂõ†‰∏∫Êú™ÂêåÊ≠•Á®ãÂ∫èÂú®È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰∏≠ÊâßË°åÊó∂ÔºåÊï¥‰Ωì‰∏äÊòØÊó†Â∫èÁöÑÔºåÂÖ∂ÊâßË°åÁªìÊûúÊó†Ê≥ïÈ¢ÑÁü•„ÄÇ‰øùËØÅÊú™ÂêåÊ≠•Á®ãÂ∫èÂú®‰∏§‰∏™Ê®°Âûã‰∏≠ÁöÑÊâßË°åÁªìÊûú‰∏ÄËá¥ÊØ´Êó†ÊÑè‰πâ„ÄÇ ÂíåÈ°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰∏ÄÊ†∑ÔºåÊú™ÂêåÊ≠•Á®ãÂ∫èÂú® JMM ‰∏≠ÁöÑÊâßË°åÊó∂ÔºåÊï¥‰Ωì‰∏ä‰πüÊòØÊó†Â∫èÁöÑÔºåÂÖ∂ÊâßË°åÁªìÊûú‰πüÊó†Ê≥ïÈ¢ÑÁü•„ÄÇÂêåÊó∂ÔºåÊú™ÂêåÊ≠•Á®ãÂ∫èÂú®Ëøô‰∏§‰∏™Ê®°Âûã‰∏≠ÁöÑÊâßË°åÁâπÊÄßÊúâ‰∏ãÈù¢Âá†‰∏™Â∑ÆÂºÇÔºö È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰øùËØÅÂçïÁ∫øÁ®ãÂÜÖÁöÑÊìç‰Ωú‰ºöÊåâÁ®ãÂ∫èÁöÑÈ°∫Â∫èÊâßË°åÔºåËÄå JMM ‰∏ç‰øùËØÅÂçïÁ∫øÁ®ãÂÜÖÁöÑÊìç‰Ωú‰ºöÊåâÁ®ãÂ∫èÁöÑÈ°∫Â∫èÊâßË°åËø∞„ÄÇ È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰øùËØÅÊâÄÊúâÁ∫øÁ®ãÂè™ËÉΩÁúãÂà∞‰∏ÄËá¥ÁöÑÊìç‰ΩúÊâßË°åÈ°∫Â∫èÔºåËÄå JMM ‰∏ç‰øùËØÅÊâÄÊúâÁ∫øÁ®ãËÉΩÁúãÂà∞‰∏ÄËá¥ÁöÑÊìç‰ΩúÊâßË°åÈ°∫Â∫è„ÄÇ„ÄÇ JMM ‰∏ç‰øùËØÅÂØπ 64 ‰ΩçÁöÑ long ÂûãÂíå double ÂûãÂèòÈáèÁöÑËØª / ÂÜôÊìç‰ΩúÂÖ∑ÊúâÂéüÂ≠êÊÄßÔºåËÄåÈ°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã‰øùËØÅÂØπÊâÄÊúâÁöÑÂÜÖÂ≠òËØª / ÂÜôÊìç‰ΩúÈÉΩÂÖ∑ÊúâÂéüÂ≠êÊÄß„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>JMM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JMM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂÜÖÂ≠òÊ®°Âûã-Êåá‰ª§ÈáçÊéíÂ∫è]]></title>
    <url>%2Fposts%2F60874885.html</url>
    <content type="text"><![CDATA[Êï∞ÊçÆ‰æùËµñÊÄß Â¶ÇÊûú‰∏§‰∏™Êìç‰ΩúËÆøÈóÆÂêå‰∏Ä‰∏™ÂèòÈáèÔºå‰∏îËøô‰∏§‰∏™Êìç‰Ωú‰∏≠Êúâ‰∏Ä‰∏™‰∏∫ÂÜôÊìç‰ΩúÔºåÊ≠§Êó∂Ëøô‰∏§‰∏™Êìç‰Ωú‰πãÈó¥Â∞±Â≠òÂú®Êï∞ÊçÆ‰æùËµñÊÄß„ÄÇÊï∞ÊçÆ‰æùËµñÂàÜ‰∏ãÂàó‰∏âÁßçÁ±ªÂûãÔºö ÂêçÁß∞ ‰ª£Á†ÅÁ§∫‰æã ËØ¥Êòé ÂÜôÂêéËØª a = 1;b = a; ÂÜô‰∏Ä‰∏™ÂèòÈáè‰πãÂêéÔºåÂÜçËØªËøô‰∏™ÂèòÈáè„ÄÇ ÂÜôÂêéÂÜô a = 1;a = 2; ÂÜô‰∏Ä‰∏™ÂèòÈáèÂêéÔºåÂÜçÂÜôËøô‰∏™ÂèòÈáè„ÄÇ ËØªÂêéÂÜô a = b;b = 1; ËØª‰∏Ä‰∏™ÂèòÈáè‰πãÂêéÔºåÂÜçÂÜôËøô‰∏™ÂèòÈáè„ÄÇ ‰∏äÈù¢‰∏âÁßçÊÉÖÂÜµÔºåÂè™Ë¶ÅÈáçÊéíÂ∫è‰∏§‰∏™Êìç‰ΩúÁöÑÊâßË°åÈ°∫Â∫èÔºåÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûúÂ∞Ü‰ºöË¢´ÊîπÂèò„ÄÇ ÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÂèØËÉΩ‰ºöÂØπÊìç‰ΩúÂÅöÈáçÊéíÂ∫è„ÄÇÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®Âú®ÈáçÊéíÂ∫èÊó∂Ôºå‰ºöÈÅµÂÆàÊï∞ÊçÆ‰æùËµñÊÄßÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰∏ç‰ºöÊîπÂèòÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÁöÑ‰∏§‰∏™Êìç‰ΩúÁöÑÊâßË°åÈ°∫Â∫è„ÄÇ Ê≥®ÊÑèÔºåËøôÈáåÊâÄËØ¥ÁöÑÊï∞ÊçÆ‰æùËµñÊÄß‰ªÖÈíàÂØπÂçï‰∏™Â§ÑÁêÜÂô®‰∏≠ÊâßË°åÁöÑÊåá‰ª§Â∫èÂàóÂíåÂçï‰∏™Á∫øÁ®ã‰∏≠ÊâßË°åÁöÑÊìç‰ΩúÔºå‰∏çÂêåÂ§ÑÁêÜÂô®‰πãÈó¥Âíå‰∏çÂêåÁ∫øÁ®ã‰πãÈó¥ÁöÑÊï∞ÊçÆ‰æùËµñÊÄß‰∏çË¢´ÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ËÄÉËôë„ÄÇ as-if-serialËØ≠‰πâ as-if-serial ËØ≠‰πâÊòØÊåáÔºö‰∏çÁÆ°ÊÄé‰πàÈáçÊéíÂ∫èÔºàÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰∏∫‰∫ÜÊèêÈ´òÂπ∂Ë°åÂ∫¶ÔºâÔºåÔºàÂçïÁ∫øÁ®ãÔºâÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûú‰∏çËÉΩË¢´ÊîπÂèò„ÄÇÁºñËØëÂô®Ôºåruntime ÂíåÂ§ÑÁêÜÂô®ÈÉΩÂøÖÈ°ªÈÅµÂÆà as-if-serial ËØ≠‰πâ„ÄÇ ‰∏∫‰∫ÜÈÅµÂÆà as-if-serial ËØ≠‰πâÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰∏ç‰ºöÂØπÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÁöÑÊìç‰ΩúÂÅöÈáçÊéíÂ∫èÔºåÂõ†‰∏∫ËøôÁßçÈáçÊéíÂ∫è‰ºöÊîπÂèòÊâßË°åÁªìÊûú„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊìç‰Ωú‰πãÈó¥‰∏çÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÔºåËøô‰∫õÊìç‰ΩúÂèØËÉΩË¢´ÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫è„ÄÇÂ¶Ç‰∏ãËÆ°ÁÆóÂúÜÈù¢ÁßØÁöÑ‰ª£Á†ÅÁ§∫‰æãÔºö 123double pi = 3.14; //Adouble r = 1.0; //Bdouble area = pi * r * r; //C ‰∏äÈù¢‰∏â‰∏™Êìç‰ΩúÁöÑÊï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåA Âíå C ‰πãÈó¥Â≠òÂú®Êï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÔºåÂêåÊó∂ B Âíå C ‰πãÈó¥‰πüÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÂÖ≥Á≥ª„ÄÇÂõ†Ê≠§Âú®ÊúÄÁªàÊâßË°åÁöÑÊåá‰ª§Â∫èÂàó‰∏≠ÔºåC ‰∏çËÉΩË¢´ÈáçÊéíÂ∫èÂà∞ A Âíå B ÁöÑÂâçÈù¢ÔºàC ÊéíÂà∞ A Âíå B ÁöÑÂâçÈù¢ÔºåÁ®ãÂ∫èÁöÑÁªìÊûúÂ∞Ü‰ºöË¢´ÊîπÂèòÔºâ„ÄÇ‰ΩÜ A Âíå B ‰πãÈó¥Ê≤°ÊúâÊï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÂèØ‰ª•ÈáçÊéíÂ∫è A Âíå B ‰πãÈó¥ÁöÑÊâßË°åÈ°∫Â∫è„ÄÇ‰∏ãÂõæÊòØËØ•Á®ãÂ∫èÁöÑ‰∏§ÁßçÊâßË°åÈ°∫Â∫èÔºö as-if-serial ËØ≠‰πâÊääÂçïÁ∫øÁ®ãÁ®ãÂ∫è‰øùÊä§‰∫ÜËµ∑Êù•ÔºåÈÅµÂÆà as-if-serial ËØ≠‰πâÁöÑÁºñËØëÂô®Ôºåruntime ÂíåÂ§ÑÁêÜÂô®ÂÖ±Âêå‰∏∫ÁºñÂÜôÂçïÁ∫øÁ®ãÁ®ãÂ∫èÁöÑÁ®ãÂ∫èÂëòÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂπªËßâÔºöÂçïÁ∫øÁ®ãÁ®ãÂ∫èÊòØÊåâÁ®ãÂ∫èÁöÑÈ°∫Â∫èÊù•ÊâßË°åÁöÑ„ÄÇas-if-serial ËØ≠‰πâ‰ΩøÂçïÁ∫øÁ®ãÁ®ãÂ∫èÂëòÊó†ÈúÄÊãÖÂøÉÈáçÊéíÂ∫è‰ºöÂπ≤Êâ∞‰ªñ‰ª¨Ôºå‰πüÊó†ÈúÄÊãÖÂøÉÂÜÖÂ≠òÂèØËßÅÊÄßÈóÆÈ¢ò„ÄÇ Á®ãÂ∫èÈ°∫Â∫èËßÑÂàô Ê†πÊçÆ happens- before ÁöÑÁ®ãÂ∫èÈ°∫Â∫èËßÑÂàôÔºå‰∏äÈù¢ËÆ°ÁÆóÂúÜÁöÑÈù¢ÁßØÁöÑÁ§∫‰æã‰ª£Á†ÅÂ≠òÂú®‰∏â‰∏™ happens- before ÂÖ≥Á≥ªÔºö A happens- before BÔºõ B happens- before CÔºõ A happens- before CÔºõ ËøôÈáåÁöÑÁ¨¨ 3 ‰∏™ happens- before ÂÖ≥Á≥ªÔºåÊòØÊ†πÊçÆ happens- before ÁöÑ‰º†ÈÄíÊÄßÊé®ÂØºÂá∫Êù•ÁöÑ„ÄÇ ËøôÈáå A happens- before BÔºå‰ΩÜÂÆûÈôÖÊâßË°åÊó∂ B Âç¥ÂèØ‰ª•ÊéíÂú® A ‰πãÂâçÊâßË°å„ÄÇÊ†πÊçÆhappens-beforeËßÑÂàôÔºåÂ¶ÇÊûú A happens- before BÔºåJMM Âπ∂‰∏çË¶ÅÊ±Ç A ‰∏ÄÂÆöË¶ÅÂú® B ‰πãÂâçÊâßË°å„ÄÇJMM ‰ªÖ‰ªÖË¶ÅÊ±ÇÂâç‰∏Ä‰∏™Êìç‰ΩúÔºàÊâßË°åÁöÑÁªìÊûúÔºâÂØπÂêé‰∏Ä‰∏™Êìç‰ΩúÂèØËßÅÔºå‰∏îÂâç‰∏Ä‰∏™Êìç‰ΩúÊåâÈ°∫Â∫èÊéíÂú®Á¨¨‰∫å‰∏™Êìç‰Ωú‰πãÂâç„ÄÇËøôÈáåÊìç‰Ωú A ÁöÑÊâßË°åÁªìÊûú‰∏çÈúÄË¶ÅÂØπÊìç‰Ωú B ÂèØËßÅÔºõËÄå‰∏îÈáçÊéíÂ∫èÊìç‰Ωú A ÂíåÊìç‰Ωú B ÂêéÁöÑÊâßË°åÁªìÊûúÔºå‰∏éÊìç‰Ωú A ÂíåÊìç‰Ωú B Êåâ happens- before È°∫Â∫èÊâßË°åÁöÑÁªìÊûú‰∏ÄËá¥„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåJMM ‰ºöËÆ§‰∏∫ËøôÁßçÈáçÊéíÂ∫èÂπ∂‰∏çÈùûÊ≥ïÔºànot illegalÔºâÔºåJMM ÂÖÅËÆ∏ËøôÁßçÈáçÊéíÂ∫è„ÄÇ Âú®ËÆ°ÁÆóÊú∫‰∏≠ÔºåËΩØ‰ª∂ÊäÄÊúØÂíåÁ°¨‰ª∂ÊäÄÊúØÊúâ‰∏Ä‰∏™ÂÖ±ÂêåÁöÑÁõÆÊ†áÔºöÂú®‰∏çÊîπÂèòÁ®ãÂ∫èÊâßË°åÁªìÊûúÁöÑÂâçÊèê‰∏ãÔºåÂ∞ΩÂèØËÉΩÁöÑÂºÄÂèëÂπ∂Ë°åÂ∫¶„ÄÇÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÈÅµ‰ªéËøô‰∏ÄÁõÆÊ†áÔºå‰ªé happens- before ÁöÑÂÆö‰πâÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåJMM ÂêåÊ†∑ÈÅµ‰ªéËøô‰∏ÄÁõÆÊ†á„ÄÇ ÈáçÊéíÂ∫èÂØπÂ§öÁ∫øÁ®ãÁöÑÂΩ±Âìç 12345678910111213141516class ReorderExample &#123; int a = 0; boolean flag = false; public void writer() &#123; a = 1; //1 flag = true; //2 &#125; Public void reader() &#123; if (flag) &#123; //3 int i = a * a; //4 ‚Ä¶‚Ä¶ &#125; &#125;&#125; flag ÂèòÈáèÊòØ‰∏™Ê†áËÆ∞ÔºåÁî®Êù•Ê†áËØÜÂèòÈáè a ÊòØÂê¶Â∑≤Ë¢´ÂÜôÂÖ•„ÄÇËøôÈáåÂÅáËÆæÊúâ‰∏§‰∏™Á∫øÁ®ã A Âíå BÔºåA È¶ñÂÖàÊâßË°å writer() ÊñπÊ≥ïÔºåÈöèÂêé B Á∫øÁ®ãÊé•ÁùÄÊâßË°å reader() ÊñπÊ≥ï„ÄÇÁ∫øÁ®ã B Âú®ÊâßË°åÊìç‰Ωú 4 Êó∂ÔºåËÉΩÂê¶ÁúãÂà∞Á∫øÁ®ã A Âú®Êìç‰Ωú 1 ÂØπÂÖ±‰∫´ÂèòÈáè a ÁöÑÂÜôÂÖ•Ôºü Á≠îÊ°àÊòØÔºö‰∏ç‰∏ÄÂÆöËÉΩÁúãÂà∞„ÄÇ Áî±‰∫éÊìç‰Ωú 1 ÂíåÊìç‰Ωú 2 Ê≤°ÊúâÊï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÂèØ‰ª•ÂØπËøô‰∏§‰∏™Êìç‰ΩúÈáçÊéíÂ∫èÔºõÂêåÊ†∑ÔºåÊìç‰Ωú 3 ÂíåÊìç‰Ωú 4 Ê≤°ÊúâÊï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰πüÂèØ‰ª•ÂØπËøô‰∏§‰∏™Êìç‰ΩúÈáçÊéíÂ∫è„ÄÇ‰∏ãÈù¢Êù•ÁúãÁúãÔºåÂΩìÊìç‰Ωú 1 ÂíåÊìç‰Ωú 2 ÈáçÊéíÂ∫èÊó∂ÔºåÂèØËÉΩ‰ºö‰∫ßÁîü‰ªÄ‰πàÊïàÊûúÔºüÂ¶Ç‰∏ãÂõæÔºö Êìç‰Ωú 1 ÂíåÊìç‰Ωú 2 ÂÅö‰∫ÜÈáçÊéíÂ∫è„ÄÇÁ®ãÂ∫èÊâßË°åÊó∂ÔºåÁ∫øÁ®ã A È¶ñÂÖàÂÜôÊ†áËÆ∞ÂèòÈáè flagÔºåÈöèÂêéÁ∫øÁ®ã B ËØªËøô‰∏™ÂèòÈáè„ÄÇÁî±‰∫éÊù°‰ª∂Âà§Êñ≠‰∏∫ÁúüÔºåÁ∫øÁ®ã B Â∞ÜËØªÂèñÂèòÈáè a„ÄÇÊ≠§Êó∂ÔºåÂèòÈáè a ËøòÊ†πÊú¨Ê≤°ÊúâË¢´Á∫øÁ®ã A ÂÜôÂÖ•ÔºåÂú®ËøôÈáåÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÁöÑËØ≠‰πâË¢´ÈáçÊéíÂ∫èÁ†¥Âùè‰∫ÜÔºÅ &lt;font color=&quot;red&quot;&gt;‚ÄªÊ≥®ÔºöÁ∫¢Ëâ≤ÁöÑËôöÁÆ≠Á∫øË°®Á§∫ÈîôËØØÁöÑËØªÊìç‰ΩúÔºåÁî®ÁªøËâ≤ÁöÑËôöÁÆ≠Á∫øË°®Á§∫Ê≠£Á°ÆÁöÑËØªÊìç‰Ωú„ÄÇ&lt;/font&gt; ‰∏ãÈù¢ÂÜçÁúãÁúãÔºåÂΩìÊìç‰Ωú 3 ÂíåÊìç‰Ωú 4 ÈáçÊéíÂ∫èÊó∂‰ºö‰∫ßÁîü‰ªÄ‰πàÊïàÊûúÔºàÂÄüÂä©Ëøô‰∏™ÈáçÊéíÂ∫èÔºåÂèØ‰ª•È°∫‰æøËØ¥ÊòéÊéßÂà∂‰æùËµñÊÄßÔºâ„ÄÇÂ¶Ç‰∏ãÂõæÔºö Âú®Á®ãÂ∫è‰∏≠ÔºåÊìç‰Ωú 3 ÂíåÊìç‰Ωú 4 Â≠òÂú®ÊéßÂà∂‰æùËµñÂÖ≥Á≥ª„ÄÇÂΩì‰ª£Á†Å‰∏≠Â≠òÂú®ÊéßÂà∂‰æùËµñÊÄßÊó∂Ôºå‰ºöÂΩ±ÂìçÊåá‰ª§Â∫èÂàóÊâßË°åÁöÑÂπ∂Ë°åÂ∫¶„ÄÇ‰∏∫Ê≠§ÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰ºöÈááÁî®ÁåúÊµãÔºàSpeculationÔºâÊâßË°åÊù•ÂÖãÊúçÊéßÂà∂Áõ∏ÂÖ≥ÊÄßÂØπÂπ∂Ë°åÂ∫¶ÁöÑÂΩ±Âìç„ÄÇ‰ª•Â§ÑÁêÜÂô®ÁöÑÁåúÊµãÊâßË°å‰∏∫‰æãÔºåÊâßË°åÁ∫øÁ®ã B ÁöÑÂ§ÑÁêÜÂô®ÂèØ‰ª•ÊèêÂâçËØªÂèñÂπ∂ËÆ°ÁÆó a*aÔºåÁÑ∂ÂêéÊääËÆ°ÁÆóÁªìÊûú‰∏¥Êó∂‰øùÂ≠òÂà∞‰∏Ä‰∏™Âêç‰∏∫ÈáçÊéíÂ∫èÁºìÂÜ≤Ôºàreorder buffer ROBÔºâÁöÑÁ°¨‰ª∂ÁºìÂ≠ò‰∏≠„ÄÇÂΩìÊé•‰∏ãÊù•Êìç‰Ωú 3 ÁöÑÊù°‰ª∂Âà§Êñ≠‰∏∫ÁúüÊó∂ÔºåÂ∞±ÊääËØ•ËÆ°ÁÆóÁªìÊûúÂÜôÂÖ•ÂèòÈáè i ‰∏≠„ÄÇ ‰ªéÂõæ‰∏≠Êàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåÁåúÊµãÊâßË°åÂÆûË¥®‰∏äÂØπÊìç‰Ωú 3 Âíå 4 ÂÅö‰∫ÜÈáçÊéíÂ∫è„ÄÇÈáçÊéíÂ∫èÂú®ËøôÈáåÁ†¥Âùè‰∫ÜÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÁöÑËØ≠‰πâÔºÅ Âú®ÂçïÁ∫øÁ®ãÁ®ãÂ∫è‰∏≠ÔºåÂØπÂ≠òÂú®ÊéßÂà∂‰æùËµñÁöÑÊìç‰ΩúÈáçÊéíÂ∫èÔºå‰∏ç‰ºöÊîπÂèòÊâßË°åÁªìÊûúÔºàËøô‰πüÊòØ as-if-serial ËØ≠‰πâÂÖÅËÆ∏ÂØπÂ≠òÂú®ÊéßÂà∂‰æùËµñÁöÑÊìç‰ΩúÂÅöÈáçÊéíÂ∫èÁöÑÂéüÂõ†ÔºâÔºõ‰ΩÜÂú®Â§öÁ∫øÁ®ãÁ®ãÂ∫è‰∏≠ÔºåÂØπÂ≠òÂú®ÊéßÂà∂‰æùËµñÁöÑÊìç‰ΩúÈáçÊéíÂ∫èÔºåÂèØËÉΩ‰ºöÊîπÂèòÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûú„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>JMM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JMM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-ÊäΩË±°Â∑•ÂéÇÊ®°Âºè]]></title>
    <url>%2Fposts%2F5a86ebac.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ ÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÔºåÂç≥Abstract Factory PatternÔºåÊèê‰æõ‰∏Ä‰∏™ÂàõÂª∫‰∏ÄÁ≥ªÂàóÁõ∏ÂÖ≥ÊàñÁõ∏‰∫í‰æùËµñÂØπË±°ÁöÑÊé•Âè£ÔºåËÄåÊó†È°ªÊåáÂÆöÂÆÉ‰ª¨ÂÖ∑‰ΩìÁöÑÁ±ªÔºõÂÖ∑‰ΩìÁöÑÂ∑•ÂéÇË¥üË¥£ÂÆûÁé∞ÂÖ∑‰ΩìÁöÑ‰∫ßÂìÅÂÆû‰æã„ÄÇ ‰∏ªË¶Å‰ΩúÁî® ÂÖÅËÆ∏‰ΩøÁî®ÊäΩË±°ÁöÑÊé•Âè£Êù•ÂàõÂª∫‰∏ÄÁªÑÁõ∏ÂÖ≥‰∫ßÂìÅÔºåËÄå‰∏çÈúÄË¶ÅÁü•ÈÅìÊàñÂÖ≥ÂøÉÂÆûÈôÖÁîü‰∫ßÂá∫ÁöÑÂÖ∑‰Ωì‰∫ßÂìÅÊòØ‰ªÄ‰πàÔºåËøôÊ†∑Â∞±ÂèØ‰ª•‰ªéÂÖ∑‰Ωì‰∫ßÂìÅ‰∏≠Ë¢´Ëß£ËÄ¶„ÄÇ Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò Ëß£ÂÜ≥Â∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÁöÑÁº∫ÁÇπÔºöÊØè‰∏™Â∑•ÂéÇÂè™ËÉΩÂàõÂª∫‰∏ÄÁ±ª‰∫ßÂìÅ„ÄÇ Ê®°ÂºèÂéüÁêÜ UMLÁ±ªÂõæ Ê®°ÂºèÁªÑÊàê ÁªÑÊàêÔºàËßíËâ≤Ôºâ ÂÖ≥Á≥ª ‰ΩúÁî® ÊäΩË±°‰∫ßÂìÅÊóèÔºàAbstractProductÔºâ ÊäΩË±°‰∫ßÂìÅÁöÑÁà∂Á±ª ÊèèËø∞ÊäΩË±°‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£ ÊäΩË±°‰∫ßÂìÅÔºàProductÔºâ ÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÁà∂Á±ª ÊèèËø∞ÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£ ÂÖ∑‰Ωì‰∫ßÂìÅÔºàConcrete ProductÔºâ ÊäΩË±°‰∫ßÂìÅÁöÑÂ≠êÁ±ªÔºõ Â∑•ÂéÇÁ±ªÂàõÂª∫ÁöÑÁõÆÊ†áÁ±ª ÊèèËø∞Áîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ ÊäΩË±°Â∑•ÂéÇÔºàCreatorÔºâ ÂÖ∑‰ΩìÂ∑•ÂéÇÁöÑÁà∂Á±ª ÊèèËø∞ÂÖ∑‰ΩìÂ∑•ÂéÇÁöÑÂÖ¨ÂÖ±Êé•Âè£ ÂÖ∑‰ΩìÂ∑•ÂéÇÔºàConcrete CreatorÔºâ ÊäΩË±°Â∑•ÂéÇÁöÑÂ≠êÁ±ªÔºõ Ë¢´Â§ñÁïåË∞ÉÁî® ÊèèËø∞ÂÖ∑‰ΩìÂ∑•ÂéÇÔºõ ÂÆûÁé∞FactoryMethodÂ∑•ÂéÇÊñπÊ≥ïÂàõÂª∫‰∫ßÂìÅÁöÑÂÆû‰æã Â¶Ç‰ΩïÁêÜËß£ÊäΩË±°‰∫ßÂìÅÊóè„ÄÅÊäΩË±°‰∫ßÂìÅÂíåÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂå∫Âà´Âë¢ÔºüËØ∑Áúã‰∏ãÂõæÔºö ‰ΩøÁî®Ê≠•È™§ ÂàõÂª∫ÊäΩË±°Â∑•ÂéÇÁ±ªÔºåÂÆö‰πâÂÖ∑‰ΩìÂ∑•ÂéÇÁöÑÂÖ¨ÂÖ±Êé•Âè£Ôºõ ÂàõÂª∫ÊäΩË±°‰∫ßÂìÅÊóèÁ±ª ÔºåÂÆö‰πâÊäΩË±°‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£Ôºõ ÂàõÂª∫ÊäΩË±°‰∫ßÂìÅÁ±ª ÔºàÁªßÊâøÊäΩË±°‰∫ßÂìÅÊóèÁ±ªÔºâÔºåÂÆö‰πâÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£Ôºõ ÂàõÂª∫ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÔºàÁªßÊâøÊäΩË±°‰∫ßÂìÅÁ±ªÔºâ &amp; ÂÆö‰πâÁîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅÔºõ ÂàõÂª∫ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÔºàÁªßÊâøÊäΩË±°Â∑•ÂéÇÁ±ªÔºâÔºåÂÆö‰πâÂàõÂª∫ÂØπÂ∫îÂÖ∑‰Ωì‰∫ßÂìÅÂÆû‰æãÁöÑÊñπÊ≥ïÔºõ ÂÆ¢Êà∑Á´ØÈÄöËøáÂÆû‰æãÂåñÂÖ∑‰ΩìÁöÑÂ∑•ÂéÇÁ±ªÔºåÂπ∂Ë∞ÉÁî®ÂÖ∂ÂàõÂª∫‰∏çÂêåÁõÆÊ†á‰∫ßÂìÅÁöÑÊñπÊ≥ïÂàõÂª∫‰∏çÂêåÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÁöÑÂÆû‰æã Ê®°Âºè‰ºòÁÇπ Èôç‰ΩéËÄ¶Âêà ÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÂ∞ÜÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂàõÂª∫Âª∂ËøüÂà∞ÂÖ∑‰ΩìÂ∑•ÂéÇÁöÑÂ≠êÁ±ª‰∏≠ÔºåËøôÊ†∑Â∞ÜÂØπË±°ÁöÑÂàõÂª∫Â∞ÅË£ÖËµ∑Êù•ÔºåÂèØ‰ª•ÂáèÂ∞ëÂÆ¢Êà∑Á´Ø‰∏éÂÖ∑‰Ωì‰∫ßÂìÅÁ±ª‰πãÈó¥ÁöÑ‰æùËµñÔºå‰ªéËÄå‰ΩøÁ≥ªÁªüËÄ¶ÂêàÂ∫¶‰ΩéÔºåËøôÊ†∑Êõ¥ÊúâÂà©‰∫éÂêéÊúüÁöÑÁª¥Êä§ÂíåÊâ©Â±ï„ÄÇ Êõ¥Á¨¶ÂêàÂºÄ-Èó≠ÂéüÂàô Êñ∞Â¢û‰∏ÄÁßç‰∫ßÂìÅÁ±ªÊó∂ÔºåÂè™ÈúÄË¶ÅÂ¢ûÂä†Áõ∏Â∫îÁöÑÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÂíåÁõ∏Â∫îÁöÑÂ∑•ÂéÇÂ≠êÁ±ªÂç≥ÂèØ„ÄÇ Á¨¶ÂêàÂçï‰∏ÄËÅåË¥£ÂéüÂàô ÊØè‰∏™ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÂè™Ë¥üË¥£ÂàõÂª∫ÂØπÂ∫îÁöÑ‰∫ßÂìÅ„ÄÇ ‰∏ç‰ΩøÁî®ÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ïÔºåÂèØ‰ª•ÂΩ¢ÊàêÂü∫‰∫éÁªßÊâøÁöÑÁ≠âÁ∫ßÁªìÊûÑ„ÄÇ Ê®°ÂºèÁº∫ÁÇπ ÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÂæàÈöæÊîØÊåÅÊñ∞ÁßçÁ±ª‰∫ßÂìÅÁöÑÂèòÂåñ„ÄÇËøôÊòØÂõ†‰∏∫ÊäΩË±°Â∑•ÂéÇÊé•Âè£‰∏≠Â∑≤ÁªèÁ°ÆÂÆö‰∫ÜÂèØ‰ª•Ë¢´ÂàõÂª∫ÁöÑ‰∫ßÂìÅÈõÜÂêàÔºåÂ¶ÇÊûúÈúÄË¶ÅÊ∑ªÂä†Êñ∞‰∫ßÂìÅÔºåÊ≠§Êó∂Â∞±ÂøÖÈ°ªÂéª‰øÆÊîπÊäΩË±°Â∑•ÂéÇÁöÑÊé•Âè£ÔºåËøôÊ†∑Â∞±Ê∂âÂèäÂà∞ÊäΩË±°Â∑•ÂéÇÁ±ªÁöÑ‰ª•ÂèäÊâÄÊúâÂ≠êÁ±ªÁöÑÊîπÂèòÔºåËøôÊ†∑‰πüÂ∞±ËøùËÉå‰∫Ü‚ÄúÂºÄÊîæ‚Äî‚ÄîÂ∞ÅÈó≠‚ÄùÂéüÂàô„ÄÇ Â∫îÁî®Âú∫ÊôØ ‰∏Ä‰∏™Á≥ªÁªü‰∏çË¶ÅÊ±Ç‰æùËµñ‰∫ßÂìÅÁ±ªÂÆû‰æãÂ¶Ç‰ΩïË¢´ÂàõÂª∫„ÄÅÁªÑÂêàÂíåË°®ËææÁöÑË°®ËææÔºåËøôÁÇπ‰πüÊòØÊâÄÊúâÂ∑•ÂéÇÊ®°ÂºèÂ∫îÁî®ÁöÑÂâçÊèê„ÄÇ Ëøô‰∏™Á≥ªÁªüÊúâÂ§ö‰∏™Á≥ªÂàó‰∫ßÂìÅÔºåËÄåÁ≥ªÁªü‰∏≠Âè™Ê∂àË¥πÂÖ∂‰∏≠Êüê‰∏ÄÁ≥ªÂàó‰∫ßÂìÅ„ÄÇ Á≥ªÁªüË¶ÅÊ±ÇÊèê‰æõ‰∏Ä‰∏™‰∫ßÂìÅÁ±ªÁöÑÂ∫ìÔºåÊâÄÊúâ‰∫ßÂìÅ‰ª•ÂêåÊ†∑ÁöÑÊé•Âè£Âá∫Áé∞ÔºåÂÆ¢Êà∑Á´Ø‰∏çÈúÄË¶Å‰æùËµñÂÖ∑‰ΩìÂÆûÁé∞„ÄÇ Ê®°ÂºèÁ§∫‰æã Á§∫‰æãËÉåÊôØ ËÉåÊôØÔºöÂÅáËÆæÊúâ‰∏§Èó¥Â°ëÊñôÂä†Â∑•ÂéÇÔºàAÂéÇ‰ªÖÁîü‰∫ßÂÆπÂô®Á±ª‰∫ßÂìÅÔºõBÂéÇ‰ªÖÁîü‰∫ßÊ®°ÂÖ∑Á±ª‰∫ßÂìÅÔºâÔºõÈöèÁùÄÂÆ¢Êà∑ÈúÄÊ±ÇÁöÑÂèòÂåñÔºåAÂéÇÊâÄÂú®Âú∞ÁöÑÂÆ¢Êà∑ÈúÄË¶Å‰πüÊ®°ÂÖ∑Á±ª‰∫ßÂìÅÔºåBÂéÇÊâÄÂú®Âú∞ÁöÑÂÆ¢Êà∑‰πüÈúÄË¶ÅÂÆπÂô®Á±ª‰∫ßÂìÅÔºõ ÂÜ≤Á™ÅÔºöÊ≤°ÊúâËµÑÊ∫êÔºàËµÑÈáë+Áßü‰ΩçÔºâÂú®ÂΩìÂú∞ÂàÜÂà´ÂºÄËÆæÂ§ö‰∏ÄÂÆ∂Ê≥®Â°ëÂàÜÂéÇ Ëß£ÂÜ≥ÊñπÊ°àÔºöÂú®ÂéüÊúâÁöÑ‰∏§ÂÆ∂Â°ëÊñôÂéÇÈáåÂ¢ûËÆæÁîü‰∫ßÈúÄÊ±ÇÁöÑÂäüËÉΩÔºåÂç≥AÂéÇËÉΩÁîü‰∫ßÂÆπÂô®+Ê®°ÂÖ∑‰∫ßÂìÅÔºõBÂéÇÈó¥ËÉΩÁîü‰∫ßÊ®°ÂÖ∑+ÂÆπÂô®‰∫ßÂìÅ„ÄÇ ÊäΩË±°Â∑•ÂéÇÁ±ª 123456789101112131415161718192021package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÊäΩË±°Â∑•ÂéÇÁ±ªÔºåÂÆö‰πâÂÖ∑‰ΩìÂ∑•ÂéÇÁöÑÂÖ¨ÂÖ±Êé•Âè£ */public abstract class Factory &#123; /** * Áîü‰∫ßÂÆπÂô® * * @return */ public abstract AbstractProduct manufactureContainer(); /** * Áîü‰∫ßÊ®°ÂÖ∑ * * @return */ public abstract AbstractProduct manufactureMould();&#125; ÊäΩË±°‰∫ßÂìÅÊóèÁ±ª 123456789101112package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÊäΩË±°‰∫ßÂìÅÊóèÁ±ª ÔºåÂÆö‰πâÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£Ôºõ */public abstract class AbstractProduct &#123; /** * Â±ïÁ§∫‰∫ßÂìÅ */ public abstract void show();&#125; ÊäΩË±°‰∫ßÂìÅÁ±ª ÂÆπÂô®‰∫ßÂìÅÊäΩË±°Á±ª 12345678910package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÊäΩË±°‰∫ßÂìÅÁ±ª--ÂÆπÂô® ÔºåÂÆö‰πâÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£ */public abstract class ContainerProduct extends AbstractProduct &#123; @Override public abstract void show();&#125; Ê®°ÂÖ∑‰∫ßÂìÅÊäΩË±°Á±ª 12345678910package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÊäΩË±°‰∫ßÂìÅÁ±ª--Ê®°ÂÖ∑ ÔºåÂÆö‰πâÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£ */public abstract class MouldProduct extends AbstractProduct &#123; @Override public abstract void show();&#125; ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ª ÂÆπÂô®‰∫ßÂìÅAÁ±ª 123456789101112package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ª--ÂÆπÂô®AÔºàÁªßÊâøÊäΩË±°‰∫ßÂìÅÁ±ªÔºâÔºå ÂÆö‰πâÁîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ */public class ContainerProductA extends ContainerProduct &#123; @Override public void show() &#123; System.out.println("Áîü‰∫ßÂá∫‰∫ÜÂÆπÂô®‰∫ßÂìÅA..."); &#125;&#125; ÂÆπÂô®‰∫ßÂìÅBÁ±ª 123456789101112package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ª-ÂÆπÂô®BÔºàÁªßÊâøÊäΩË±°‰∫ßÂìÅÁ±ªÔºâÔºå ÂÆö‰πâÁîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ */public class ContainerProductB extends ContainerProduct &#123; @Override public void show() &#123; System.out.println("Áîü‰∫ßÂá∫‰∫ÜÂÆπÂô®‰∫ßÂìÅB..."); &#125;&#125; Ê®°ÂÖ∑‰∫ßÂìÅAÁ±ª 12345678910111213package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ª--Ê®°ÂÖ∑AÔºàÁªßÊâøÊäΩË±°‰∫ßÂìÅÁ±ªÔºâÔºå ÂÆö‰πâÁîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ */public class MouldProductA extends MouldProduct &#123; @Override public void show() &#123; System.out.println("Áîü‰∫ßÂá∫‰∫ÜÊ®°ÂÖ∑‰∫ßÂìÅA..."); &#125;&#125; Ê®°ÂÖ∑‰∫ßÂìÅBÁ±ª 12345678910111213package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ª--Ê®°ÂÖ∑BÔºàÁªßÊâøÊäΩË±°‰∫ßÂìÅÁ±ªÔºâÔºå ÂÆö‰πâÁîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ */public class MouldProductB extends MouldProduct &#123; @Override public void show() &#123; System.out.println("Áîü‰∫ßÂá∫‰∫ÜÊ®°ÂÖ∑‰∫ßÂìÅB..."); &#125;&#125; ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ª AÂéÇ - Áîü‰∫ßÊ®°ÂÖ∑+ÂÆπÂô®‰∫ßÂìÅ 12345678910111213141516171819package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÔºàÁªßÊâøÊäΩË±°Â∑•ÂéÇÁ±ªÔºâÔºåÂÆö‰πâÂàõÂª∫ÂØπÂ∫îÂÖ∑‰Ωì‰∫ßÂìÅÂÆû‰æãÁöÑÊñπÊ≥ï * AÂéÇ - Áîü‰∫ßÊ®°ÂÖ∑+ÂÆπÂô®‰∫ßÂìÅ */public class FactoryA extends Factory &#123; @Override public AbstractProduct manufactureContainer() &#123; return new ContainerProductA(); &#125; @Override public AbstractProduct manufactureMould() &#123; return new MouldProductA(); &#125;&#125; BÂéÇ - Áîü‰∫ßÊ®°ÂÖ∑+ÂÆπÂô®‰∫ßÂìÅ 12345678910111213141516171819package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÔºàÁªßÊâøÊäΩË±°Â∑•ÂéÇÁ±ªÔºâÔºåÂÆö‰πâÂàõÂª∫ÂØπÂ∫îÂÖ∑‰Ωì‰∫ßÂìÅÂÆû‰æãÁöÑÊñπÊ≥ï * BÂéÇ - Áîü‰∫ßÊ®°ÂÖ∑+ÂÆπÂô®‰∫ßÂìÅ */public class FactoryB extends Factory &#123; @Override public AbstractProduct manufactureContainer() &#123; return new ContainerProductB(); &#125; @Override public AbstractProduct manufactureMould() &#123; return new MouldProductB(); &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® 12345678910111213141516171819202122package main.java.com.study.designPatterns.factory.abstracts.demoOne;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class Client &#123; public static void main(String[] args) &#123; FactoryA mFactoryA = new FactoryA(); FactoryB mFactoryB = new FactoryB(); //AÂéÇÂΩìÂú∞ÂÆ¢Êà∑ÈúÄË¶ÅÂÆπÂô®‰∫ßÂìÅA mFactoryA.manufactureContainer().show(); //AÂéÇÂΩìÂú∞ÂÆ¢Êà∑ÈúÄË¶ÅÊ®°ÂÖ∑‰∫ßÂìÅA mFactoryA.manufactureMould().show(); //BÂéÇÂΩìÂú∞ÂÆ¢Êà∑ÈúÄË¶ÅÂÆπÂô®‰∫ßÂìÅB mFactoryB.manufactureContainer().show(); //BÂéÇÂΩìÂú∞ÂÆ¢Êà∑ÈúÄË¶ÅÊ®°ÂÖ∑‰∫ßÂìÅB mFactoryB.manufactureMould().show(); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂÜÖÂ≠òÊ®°Âûã-ÁêÜËß£Volatile]]></title>
    <url>%2Fposts%2Fe72020d.html</url>
    <content type="text"><![CDATA[volatileÁâπÊÄß ÂΩìÂ£∞ÊòéÂÖ±‰∫´ÂèòÈáè‰∏∫ volatile ÂêéÔºåÂØπËøô‰∏™ÂèòÈáèÁöÑËØª / ÂÜôÂ∞Ü‰ºöÂæàÁâπÂà´„ÄÇÁêÜËß£ volatile ÁâπÊÄßÁöÑ‰∏Ä‰∏™Â•ΩÊñπÊ≥ïÊòØÔºöÊääÂØπ volatile ÂèòÈáèÁöÑÂçï‰∏™ËØª / ÂÜôÔºåÁúãÊàêÊòØ‰ΩøÁî®Âêå‰∏Ä‰∏™ÁõëËßÜÂô®ÈîÅÂØπËøô‰∫õÂçï‰∏™ËØª / ÂÜôÊìç‰ΩúÂÅö‰∫ÜÂêåÊ≠•„ÄÇÂ¶Ç‰∏ãÁ§∫‰æã‰ª£Á†ÅÔºö 12345678910111213141516class VolatileFeaturesExample &#123; volatile long vl = 0L; // ‰ΩøÁî® volatile Â£∞Êòé 64 ‰ΩçÁöÑ long ÂûãÂèòÈáè public void set(long l) &#123; vl = l; // Âçï‰∏™ volatile ÂèòÈáèÁöÑÂÜô &#125; public void getAndIncrement () &#123; vl++; // Â§çÂêàÔºàÂ§ö‰∏™Ôºâvolatile ÂèòÈáèÁöÑËØª / ÂÜô &#125; public long get() &#123; return vl; // Âçï‰∏™ volatile ÂèòÈáèÁöÑËØª &#125;&#125; ÂÅáËÆæÊúâÂ§ö‰∏™Á∫øÁ®ãÂàÜÂà´Ë∞ÉÁî®‰∏äÈù¢Á®ãÂ∫èÁöÑ‰∏â‰∏™ÊñπÊ≥ïÔºåËøô‰∏™Á®ãÂ∫èÂú®ËØ≠ÊÑè‰∏äÂíå‰∏ãÈù¢Á®ãÂ∫èÁ≠â‰ª∑Ôºö 1234567891011121314151617class VolatileFeaturesExample &#123; long vl = 0L; // 64 ‰ΩçÁöÑ long ÂûãÊôÆÈÄöÂèòÈáè public synchronized void set(long l) &#123; // ÂØπÂçï‰∏™ÁöÑÊôÆÈÄö ÂèòÈáèÁöÑÂÜôÁî®Âêå‰∏Ä‰∏™ÁõëËßÜÂô®ÂêåÊ≠• vl = l; &#125; public void getAndIncrement () &#123; // ÊôÆÈÄöÊñπÊ≥ïË∞ÉÁî® long temp = get(); // Ë∞ÉÁî®Â∑≤ÂêåÊ≠•ÁöÑËØªÊñπÊ≥ï temp += 1L; // ÊôÆÈÄöÂÜôÊìç‰Ωú set(temp); // Ë∞ÉÁî®Â∑≤ÂêåÊ≠•ÁöÑÂÜôÊñπÊ≥ï &#125; public synchronized long get() &#123; // ÂØπÂçï‰∏™ÁöÑÊôÆÈÄöÂèòÈáèÁöÑËØªÁî®Âêå‰∏Ä‰∏™ÁõëËßÜÂô®ÂêåÊ≠• return vl; &#125;&#125; Â¶ÇÁ§∫‰æãÁ®ãÂ∫èÊâÄÁ§∫ÔºåÂØπ‰∏Ä‰∏™ volatile ÂèòÈáèÁöÑÂçï‰∏™ËØª / ÂÜôÊìç‰ΩúÔºå‰∏éÂØπ‰∏Ä‰∏™ÊôÆÈÄöÂèòÈáèÁöÑËØª / ÂÜôÊìç‰Ωú‰ΩøÁî®Âêå‰∏Ä‰∏™ÁõëËßÜÂô®ÈîÅÊù•ÂêåÊ≠•ÔºåÂÆÉ‰ª¨‰πãÈó¥ÁöÑÊâßË°åÊïàÊûúÁõ∏Âêå„ÄÇ ÁõëËßÜÂô®ÈîÅÁöÑ happens-before ËßÑÂàô‰øùËØÅÈáäÊîæÁõëËßÜÂô®ÂíåËé∑ÂèñÁõëËßÜÂô®ÁöÑ‰∏§‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÂÜÖÂ≠òÂèØËßÅÊÄßÔºåËøôÊÑèÂë≥ÁùÄÂØπ‰∏Ä‰∏™ volatile ÂèòÈáèÁöÑËØªÔºåÊÄªÊòØËÉΩÁúãÂà∞Ôºà‰ªªÊÑèÁ∫øÁ®ãÔºâÂØπËøô‰∏™ volatile ÂèòÈáèÊúÄÂêéÁöÑÂÜôÂÖ•„ÄÇ ÁõëËßÜÂô®ÈîÅÁöÑËØ≠‰πâÂÜ≥ÂÆö‰∫Ü‰∏¥ÁïåÂå∫‰ª£Á†ÅÁöÑÊâßË°åÂÖ∑ÊúâÂéüÂ≠êÊÄß„ÄÇËøôÊÑèÂë≥ÁùÄÂç≥‰ΩøÊòØ 64 ‰ΩçÁöÑ long ÂûãÂíå double ÂûãÂèòÈáèÔºåÂè™Ë¶ÅÂÆÉÊòØ volatile ÂèòÈáèÔºåÂØπËØ•ÂèòÈáèÁöÑËØªÂÜôÂ∞±Â∞ÜÂÖ∑ÊúâÂéüÂ≠êÊÄß„ÄÇÂ¶ÇÊûúÊòØÂ§ö‰∏™ volatile Êìç‰ΩúÊàñÁ±ª‰ºº‰∫é volatile++ ËøôÁßçÂ§çÂêàÊìç‰ΩúÔºåËøô‰∫õÊìç‰ΩúÊï¥‰Ωì‰∏ä‰∏çÂÖ∑ÊúâÂéüÂ≠êÊÄß„ÄÇ ÁÆÄËÄåË®Ä‰πãÔºåvolatile ÂèòÈáèËá™Ë∫´ÂÖ∑Êúâ‰∏ãÂàóÁâπÊÄßÔºö ÂèØËßÅÊÄß„ÄÇÂØπ‰∏Ä‰∏™ volatile ÂèòÈáèÁöÑËØªÔºåÊÄªÊòØËÉΩÁúãÂà∞Ôºà‰ªªÊÑèÁ∫øÁ®ãÔºâÂØπËøô‰∏™ volatile ÂèòÈáèÊúÄÂêéÁöÑÂÜôÂÖ•„ÄÇ ÂéüÂ≠êÊÄßÔºöÂØπ‰ªªÊÑèÂçï‰∏™ volatile ÂèòÈáèÁöÑËØª / ÂÜôÂÖ∑ÊúâÂéüÂ≠êÊÄßÔºå‰ΩÜÁ±ª‰ºº‰∫é volatile++ ËøôÁßçÂ§çÂêàÊìç‰Ωú‰∏çÂÖ∑ÊúâÂéüÂ≠êÊÄß„ÄÇ volatileÁöÑhappens-beforeÂÖ≥Á≥ª ‰ªéÂÜÖÂ≠òËØ≠‰πâÁöÑËßíÂ∫¶Êù•ËØ¥Ôºåvolatile ‰∏éÁõëËßÜÂô®ÈîÅÊúâÁõ∏ÂêåÁöÑÊïàÊûúÔºövolatile ÂÜôÂíåÁõëËßÜÂô®ÁöÑÈáäÊîæÊúâÁõ∏ÂêåÁöÑÂÜÖÂ≠òËØ≠‰πâÔºõvolatile ËØª‰∏éÁõëËßÜÂô®ÁöÑËé∑ÂèñÊúâÁõ∏ÂêåÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇ 12345678910111213141516class VolatileExample &#123; int a = 0; volatile boolean flag = false; public void writer() &#123; a = 1; //1 flag = true; //2 &#125; public void reader() &#123; if (flag) &#123; //3 int i = a; //4 ‚Ä¶‚Ä¶ &#125; &#125;&#125; ÂÅáËÆæÁ∫øÁ®ã A ÊâßË°å writer() ÊñπÊ≥ï‰πãÂêéÔºåÁ∫øÁ®ã B ÊâßË°å reader() ÊñπÊ≥ï„ÄÇÊ†πÊçÆ happens before ËßÑÂàôÔºåËøô‰∏™ËøáÁ®ãÂª∫Á´ãÁöÑ happens before ÂÖ≥Á≥ªÂèØ‰ª•ÂàÜ‰∏∫‰∏§Á±ªÔºö Ê†πÊçÆÁ®ãÂ∫èÊ¨°Â∫èËßÑÂàôÔºå1 happens before 2; 3 happens before 4„ÄÇ Ê†πÊçÆ volatile ËßÑÂàôÔºå2 happens before 3„ÄÇ Ê†πÊçÆ happens before ÁöÑ‰º†ÈÄíÊÄßËßÑÂàôÔºå1 happens before 4„ÄÇ ‰∏äËø∞ happens before ÂÖ≥Á≥ªÁöÑÂõæÂΩ¢ÂåñË°®Áé∞ÂΩ¢ÂºèÂ¶Ç‰∏ãÔºö Âú®‰∏äÂõæ‰∏≠ÔºåÊØè‰∏Ä‰∏™ÁÆ≠Â§¥ÈìæÊé•ÁöÑ‰∏§‰∏™ËäÇÁÇπÔºå‰ª£Ë°®‰∫Ü‰∏Ä‰∏™ happens before ÂÖ≥Á≥ª„ÄÇÈªëËâ≤ÁÆ≠Â§¥Ë°®Á§∫Á®ãÂ∫èÈ°∫Â∫èËßÑÂàôÔºõÊ©ôËâ≤ÁÆ≠Â§¥Ë°®Á§∫ volatile ËßÑÂàôÔºõËìùËâ≤ÁÆ≠Â§¥Ë°®Á§∫ÁªÑÂêàËøô‰∫õËßÑÂàôÂêéÊèê‰æõÁöÑ happens before ‰øùËØÅ„ÄÇ ËøôÈáå A Á∫øÁ®ãÂÜô‰∏Ä‰∏™ volatile ÂèòÈáèÂêéÔºåB Á∫øÁ®ãËØªÂêå‰∏Ä‰∏™ volatile ÂèòÈáè„ÄÇA Á∫øÁ®ãÂú®ÂÜô volatile ÂèòÈáè‰πãÂâçÊâÄÊúâÂèØËßÅÁöÑÂÖ±‰∫´ÂèòÈáèÔºåÂú® B Á∫øÁ®ãËØªÂêå‰∏Ä‰∏™ volatile ÂèòÈáèÂêéÔºåÂ∞ÜÁ´ãÂç≥ÂèòÂæóÂØπ B Á∫øÁ®ãÂèØËßÅ„ÄÇ volatileÁöÑÂÜÖÂ≠òËØ≠‰πâ volatile ÂÜôÁöÑÂÜÖÂ≠òËØ≠‰πâÂ¶Ç‰∏ãÔºö ÂΩìÂÜô‰∏Ä‰∏™ volatile ÂèòÈáèÊó∂ÔºåJMM ‰ºöÊääËØ•Á∫øÁ®ãÂØπÂ∫îÁöÑÊú¨Âú∞ÂÜÖÂ≠ò‰∏≠ÁöÑÂÖ±‰∫´ÂèòÈáèÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò„ÄÇ ‰ª•‰∏äÈù¢Á§∫‰æãÁ®ãÂ∫è‰∏∫‰æãÔºåÂÅáËÆæÁ∫øÁ®ã A È¶ñÂÖàÊâßË°å writer() ÊñπÊ≥ïÔºåÈöèÂêéÁ∫øÁ®ã B ÊâßË°å reader() ÊñπÊ≥ïÔºåÂàùÂßãÊó∂‰∏§‰∏™Á∫øÁ®ãÁöÑÊú¨Âú∞ÂÜÖÂ≠ò‰∏≠ÁöÑ flag Âíå a ÈÉΩÊòØÂàùÂßãÁä∂ÊÄÅ„ÄÇ‰∏ãÂõæÊòØÁ∫øÁ®ã A ÊâßË°å volatile ÂÜôÂêéÔºåÂÖ±‰∫´ÂèòÈáèÁöÑÁä∂ÊÄÅÁ§∫ÊÑèÂõæÔºö Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÁ∫øÁ®ã A Âú®ÂÜô flag ÂèòÈáèÂêéÔºåÊú¨Âú∞ÂÜÖÂ≠ò A ‰∏≠Ë¢´Á∫øÁ®ã A Êõ¥Êñ∞ËøáÁöÑ‰∏§‰∏™ÂÖ±‰∫´ÂèòÈáèÁöÑÂÄºË¢´Âà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠„ÄÇÊ≠§Êó∂ÔºåÊú¨Âú∞ÂÜÖÂ≠ò A Âíå‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑÂÖ±‰∫´ÂèòÈáèÁöÑÂÄºÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ volatile ËØªÁöÑÂÜÖÂ≠òËØ≠‰πâÂ¶Ç‰∏ãÔºö ÂΩìËØª‰∏Ä‰∏™ volatile ÂèòÈáèÊó∂ÔºåJMM ‰ºöÊääËØ•Á∫øÁ®ãÂØπÂ∫îÁöÑÊú¨Âú∞ÂÜÖÂ≠òÁΩÆ‰∏∫Êó†Êïà„ÄÇÁ∫øÁ®ãÊé•‰∏ãÊù•Â∞Ü‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠ËØªÂèñÂÖ±‰∫´ÂèòÈáè„ÄÇ ‰∏ãÈù¢ÊòØÁ∫øÁ®ã B ËØªÂêå‰∏Ä‰∏™ volatile ÂèòÈáèÂêéÔºåÂÖ±‰∫´ÂèòÈáèÁöÑÁä∂ÊÄÅÁ§∫ÊÑèÂõæÔºö Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÂú®ËØª flag ÂèòÈáèÂêéÔºåÊú¨Âú∞ÂÜÖÂ≠ò B Â∑≤ÁªèË¢´ÁΩÆ‰∏∫Êó†Êïà„ÄÇÊ≠§Êó∂ÔºåÁ∫øÁ®ã B ÂøÖÈ°ª‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠ËØªÂèñÂÖ±‰∫´ÂèòÈáè„ÄÇÁ∫øÁ®ã B ÁöÑËØªÂèñÊìç‰ΩúÂ∞ÜÂØºËá¥Êú¨Âú∞ÂÜÖÂ≠ò B ‰∏é‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑÂÖ±‰∫´ÂèòÈáèÁöÑÂÄº‰πüÂèòÊàê‰∏ÄËá¥ÁöÑ‰∫Ü„ÄÇ Â¶ÇÊûúÊää volatile ÂÜôÂíå volatile ËØªËøô‰∏§‰∏™Ê≠•È™§ÁªºÂêàËµ∑Êù•ÁúãÁöÑËØùÔºåÂú®ËØªÁ∫øÁ®ã B ËØª‰∏Ä‰∏™ volatile ÂèòÈáèÂêéÔºåÂÜôÁ∫øÁ®ã A Âú®ÂÜôËøô‰∏™ volatile ÂèòÈáè‰πãÂâçÊâÄÊúâÂèØËßÅÁöÑÂÖ±‰∫´ÂèòÈáèÁöÑÂÄºÈÉΩÂ∞ÜÁ´ãÂç≥ÂèòÂæóÂØπËØªÁ∫øÁ®ã B ÂèØËßÅ„ÄÇ volatileÂÜÖÂ≠òËØ≠‰πâÂÆûÁé∞ ÈáçÊéíÂ∫èÂàÜ‰∏∫ÁºñËØëÂô®ÈáçÊéíÂ∫èÂíåÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫è„ÄÇ‰∏∫‰∫ÜÂÆûÁé∞ volatile ÂÜÖÂ≠òËØ≠‰πâÔºåJMM ‰ºöÂàÜÂà´ÈôêÂà∂Ëøô‰∏§ÁßçÁ±ªÂûãÁöÑÈáçÊéíÂ∫èÁ±ªÂûã„ÄÇ‰∏ãÈù¢ÊòØ JMM ÈíàÂØπÁºñËØëÂô®Âà∂ÂÆöÁöÑ volatile ÈáçÊéíÂ∫èËßÑÂàôË°®Ôºö ËÉΩÂê¶ÈáçÊéíÂ∫è Á¨¨‰∫å‰∏™Êìç‰Ωú Á¨¨‰∏Ä‰∏™Êìç‰Ωú ÊôÆÈÄöËØª / ÂÜô volatile ËØª volatile ÂÜô ÊôÆÈÄöËØª / ÂÜô NO volatile ËØª NO NO NO volatile ÂÜô NO NO ‰ªé‰∏äË°®ÂèØ‰ª•ÁúãÂá∫Ôºö ÂΩìÁ¨¨‰∫å‰∏™Êìç‰ΩúÊòØ volatile ÂÜôÊó∂Ôºå‰∏çÁÆ°Á¨¨‰∏Ä‰∏™Êìç‰ΩúÊòØ‰ªÄ‰πàÔºåÈÉΩ‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇËøô‰∏™ËßÑÂàôÁ°Æ‰øù volatile ÂÜô‰πãÂâçÁöÑÊìç‰Ωú‰∏ç‰ºöË¢´ÁºñËØëÂô®ÈáçÊéíÂ∫èÂà∞ volatile ÂÜô‰πãÂêé„ÄÇ ÂΩìÁ¨¨‰∏Ä‰∏™Êìç‰ΩúÊòØ volatile ËØªÊó∂Ôºå‰∏çÁÆ°Á¨¨‰∫å‰∏™Êìç‰ΩúÊòØ‰ªÄ‰πàÔºåÈÉΩ‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇËøô‰∏™ËßÑÂàôÁ°Æ‰øù volatile ËØª‰πãÂêéÁöÑÊìç‰Ωú‰∏ç‰ºöË¢´ÁºñËØëÂô®ÈáçÊéíÂ∫èÂà∞ volatile ËØª‰πãÂâç„ÄÇ ÂΩìÁ¨¨‰∏Ä‰∏™Êìç‰ΩúÊòØ volatile ÂÜôÔºåÁ¨¨‰∫å‰∏™Êìç‰ΩúÊòØ volatile ËØªÊó∂Ôºå‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇ ‰∏∫‰∫ÜÂÆûÁé∞ volatile ÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåÁºñËØëÂô®Âú®ÁîüÊàêÂ≠óËäÇÁ†ÅÊó∂Ôºå‰ºöÂú®Êåá‰ª§Â∫èÂàó‰∏≠ÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÊù•Á¶ÅÊ≠¢ÁâπÂÆöÁ±ªÂûãÁöÑÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫è„ÄÇÂØπ‰∫éÁºñËØëÂô®Êù•ËØ¥ÔºåÂèëÁé∞‰∏Ä‰∏™ÊúÄ‰ºòÂ∏ÉÁΩÆÊù•ÊúÄÂ∞èÂåñÊèíÂÖ•Â±èÈöúÁöÑÊÄªÊï∞Âá†‰πé‰∏çÂèØËÉΩÔºå‰∏∫Ê≠§ÔºåJMM ÈááÂèñ‰øùÂÆàÁ≠ñÁï•„ÄÇ‰∏ãÈù¢ÊòØÂü∫‰∫é‰øùÂÆàÁ≠ñÁï•ÁöÑ JMM ÂÜÖÂ≠òÂ±èÈöúÊèíÂÖ•Á≠ñÁï•Ôºö Âú®ÊØè‰∏™ volatile ÂÜôÊìç‰ΩúÁöÑÂâçÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreStore Â±èÈöú„ÄÇ Âú®ÊØè‰∏™ volatile ÂÜôÊìç‰ΩúÁöÑÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöú„ÄÇ Âú®ÊØè‰∏™ volatile ËØªÊìç‰ΩúÁöÑÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ LoadLoad Â±èÈöú„ÄÇ Âú®ÊØè‰∏™ volatile ËØªÊìç‰ΩúÁöÑÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ LoadStore Â±èÈöú„ÄÇ ‰∏äËø∞ÂÜÖÂ≠òÂ±èÈöúÊèíÂÖ•Á≠ñÁï•ÈùûÂ∏∏‰øùÂÆàÔºå‰ΩÜÂÆÉÂèØ‰ª•‰øùËØÅÂú®‰ªªÊÑèÂ§ÑÁêÜÂô®Âπ≥Âè∞Ôºå‰ªªÊÑèÁöÑÁ®ãÂ∫è‰∏≠ÈÉΩËÉΩÂæóÂà∞Ê≠£Á°ÆÁöÑ volatile ÂÜÖÂ≠òËØ≠‰πâ„ÄÇ ‰∏ãÈù¢ÊòØ‰øùÂÆàÁ≠ñÁï•‰∏ãÔºåvolatile ÂÜôÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÂêéÁîüÊàêÁöÑÊåá‰ª§Â∫èÂàóÁ§∫ÊÑèÂõæÔºö ‰∏äÂõæ‰∏≠ÁöÑ StoreStore Â±èÈöúÂèØ‰ª•‰øùËØÅÂú® volatile ÂÜô‰πãÂâçÔºåÂÖ∂ÂâçÈù¢ÁöÑÊâÄÊúâÊôÆÈÄöÂÜôÊìç‰ΩúÂ∑≤ÁªèÂØπ‰ªªÊÑèÂ§ÑÁêÜÂô®ÂèØËßÅ‰∫Ü„ÄÇËøôÊòØÂõ†‰∏∫ StoreStore Â±èÈöúÂ∞Ü‰øùÈöú‰∏äÈù¢ÊâÄÊúâÁöÑÊôÆÈÄöÂÜôÂú® volatile ÂÜô‰πãÂâçÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò„ÄÇ ËøôÈáåÊØîËæÉÊúâÊÑèÊÄùÁöÑÊòØ volatile ÂÜôÂêéÈù¢ÁöÑ StoreLoad Â±èÈöú„ÄÇËøô‰∏™Â±èÈöúÁöÑ‰ΩúÁî®ÊòØÈÅøÂÖç volatile ÂÜô‰∏éÂêéÈù¢ÂèØËÉΩÊúâÁöÑ volatile ËØª / ÂÜôÊìç‰ΩúÈáçÊéíÂ∫è„ÄÇÂõ†‰∏∫ÁºñËØëÂô®Â∏∏Â∏∏Êó†Ê≥ïÂáÜÁ°ÆÂà§Êñ≠Âú®‰∏Ä‰∏™ volatile ÂÜôÁöÑÂêéÈù¢ÔºåÊòØÂê¶ÈúÄË¶ÅÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöúÔºàÊØîÂ¶ÇÔºå‰∏Ä‰∏™ volatile ÂÜô‰πãÂêéÊñπÊ≥ïÁ´ãÂç≥ returnÔºâ„ÄÇ‰∏∫‰∫Ü‰øùËØÅËÉΩÊ≠£Á°ÆÂÆûÁé∞ volatile ÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåJMM Âú®ËøôÈáåÈááÂèñ‰∫Ü‰øùÂÆàÁ≠ñÁï•ÔºöÂú®ÊØè‰∏™ volatile ÂÜôÁöÑÂêéÈù¢ÊàñÂú®ÊØè‰∏™ volatile ËØªÁöÑÂâçÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöú„ÄÇ‰ªéÊï¥‰ΩìÊâßË°åÊïàÁéáÁöÑËßíÂ∫¶ËÄÉËôëÔºåJMM ÈÄâÊã©‰∫ÜÂú®ÊØè‰∏™ volatile ÂÜôÁöÑÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöú„ÄÇÂõ†‰∏∫ volatile ÂÜô - ËØªÂÜÖÂ≠òËØ≠‰πâÁöÑÂ∏∏ËßÅ‰ΩøÁî®Ê®°ÂºèÊòØÔºö‰∏Ä‰∏™ÂÜôÁ∫øÁ®ãÂÜô volatile ÂèòÈáèÔºåÂ§ö‰∏™ËØªÁ∫øÁ®ãËØªÂêå‰∏Ä‰∏™ volatile ÂèòÈáè„ÄÇÂΩìËØªÁ∫øÁ®ãÁöÑÊï∞ÈáèÂ§ßÂ§ßË∂ÖËøáÂÜôÁ∫øÁ®ãÊó∂ÔºåÈÄâÊã©Âú® volatile ÂÜô‰πãÂêéÊèíÂÖ• StoreLoad Â±èÈöúÂ∞ÜÂ∏¶Êù•ÂèØËßÇÁöÑÊâßË°åÊïàÁéáÁöÑÊèêÂçá„ÄÇ‰ªéËøôÈáåÂèØ‰ª•ÁúãÂà∞ JMM Âú®ÂÆûÁé∞‰∏äÁöÑ‰∏Ä‰∏™ÁâπÁÇπÔºöÈ¶ñÂÖàÁ°Æ‰øùÊ≠£Á°ÆÊÄßÔºåÁÑ∂ÂêéÂÜçÂéªËøΩÊ±ÇÊâßË°åÊïàÁéá„ÄÇ ‰∏ãÈù¢ÊòØÂú®‰øùÂÆàÁ≠ñÁï•‰∏ãÔºåvolatile ËØªÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÂêéÁîüÊàêÁöÑÊåá‰ª§Â∫èÂàóÁ§∫ÊÑèÂõæÔºö ‰∏äÂõæ‰∏≠ÁöÑ LoadLoad Â±èÈöúÁî®Êù•Á¶ÅÊ≠¢Â§ÑÁêÜÂô®Êää‰∏äÈù¢ÁöÑ volatile ËØª‰∏é‰∏ãÈù¢ÁöÑÊôÆÈÄöËØªÈáçÊéíÂ∫è„ÄÇLoadStore Â±èÈöúÁî®Êù•Á¶ÅÊ≠¢Â§ÑÁêÜÂô®Êää‰∏äÈù¢ÁöÑ volatile ËØª‰∏é‰∏ãÈù¢ÁöÑÊôÆÈÄöÂÜôÈáçÊéíÂ∫è„ÄÇ ‰∏äËø∞ volatile ÂÜôÂíå volatile ËØªÁöÑÂÜÖÂ≠òÂ±èÈöúÊèíÂÖ•Á≠ñÁï•ÈùûÂ∏∏‰øùÂÆà„ÄÇÂú®ÂÆûÈôÖÊâßË°åÊó∂ÔºåÂè™Ë¶Å‰∏çÊîπÂèò volatile ÂÜô - ËØªÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåÁºñËØëÂô®ÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÊÉÖÂÜµÁúÅÁï•‰∏çÂøÖË¶ÅÁöÑÂ±èÈöú„ÄÇ‰∏ãÈù¢ÈÄöËøáÁ§∫‰æã‰ª£Á†ÅÊù•ËØ¥ÊòéÔºö 123456789101112131415class VolatileBarrierExample &#123; int a; volatile int v1 = 1; volatile int v2 = 2; void readAndWrite() &#123; int i = v1; // Á¨¨‰∏Ä‰∏™ volatile ËØª int j = v2; // Á¨¨‰∫å‰∏™ volatile ËØª a = i + j; // ÊôÆÈÄöÂÜô v1 = i + 1; // Á¨¨‰∏Ä‰∏™ volatile ÂÜô v2 = j * 2; // Á¨¨‰∫å‰∏™ volatile ÂÜô &#125; ‚Ä¶ // ÂÖ∂‰ªñÊñπÊ≥ï &#125; ÈíàÂØπ readAndWrite() ÊñπÊ≥ïÔºåÁºñËØëÂô®Âú®ÁîüÊàêÂ≠óËäÇÁ†ÅÊó∂ÂèØ‰ª•ÂÅöÂ¶Ç‰∏ãÁöÑ‰ºòÂåñÔºö Ê≥®ÊÑèÔºåÊúÄÂêéÁöÑ StoreLoad Â±èÈöú‰∏çËÉΩÁúÅÁï•„ÄÇÂõ†‰∏∫Á¨¨‰∫å‰∏™ volatile ÂÜô‰πãÂêéÔºåÊñπÊ≥ïÁ´ãÂç≥ return„ÄÇÊ≠§Êó∂ÁºñËØëÂô®ÂèØËÉΩÊó†Ê≥ïÂáÜÁ°ÆÊñ≠ÂÆöÂêéÈù¢ÊòØÂê¶‰ºöÊúâ volatile ËØªÊàñÂÜôÔºå‰∏∫‰∫ÜÂÆâÂÖ®Ëµ∑ËßÅÔºåÁºñËØëÂô®Â∏∏Â∏∏‰ºöÂú®ËøôÈáåÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöú„ÄÇ ‰∏äÈù¢ÁöÑ‰ºòÂåñÊòØÈíàÂØπ‰ªªÊÑèÂ§ÑÁêÜÂô®Âπ≥Âè∞ÔºåÁî±‰∫é‰∏çÂêåÁöÑÂ§ÑÁêÜÂô®Êúâ‰∏çÂêå‚ÄúÊùæÁ¥ßÂ∫¶‚ÄùÁöÑÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÔºåÂÜÖÂ≠òÂ±èÈöúÁöÑÊèíÂÖ•ËøòÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÁöÑÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÁªßÁª≠‰ºòÂåñ„ÄÇ‰ª• x86 Â§ÑÁêÜÂô®‰∏∫‰æãÔºå‰∏äÂõæ‰∏≠Èô§ÊúÄÂêéÁöÑ StoreLoad Â±èÈöúÂ§ñÔºåÂÖ∂ÂÆÉÁöÑÂ±èÈöúÈÉΩ‰ºöË¢´ÁúÅÁï•„ÄÇ ÂâçÈù¢‰øùÂÆàÁ≠ñÁï•‰∏ãÁöÑ volatile ËØªÂíåÂÜôÔºåÂú® x86 Â§ÑÁêÜÂô®Âπ≥Âè∞ÂèØ‰ª•‰ºòÂåñÊàêÔºö ÂâçÈù¢ÊèêÂà∞ËøáÔºåx86 Â§ÑÁêÜÂô®‰ªÖ‰ºöÂØπÂÜô - ËØªÊìç‰ΩúÂÅöÈáçÊéíÂ∫è„ÄÇX86 ‰∏ç‰ºöÂØπËØª - ËØªÔºåËØª - ÂÜôÂíåÂÜô - ÂÜôÊìç‰ΩúÂÅöÈáçÊéíÂ∫èÔºåÂõ†Ê≠§Âú® x86 Â§ÑÁêÜÂô®‰∏≠‰ºöÁúÅÁï•ÊéâËøô‰∏âÁßçÊìç‰ΩúÁ±ªÂûãÂØπÂ∫îÁöÑÂÜÖÂ≠òÂ±èÈöú„ÄÇÂú® x86 ‰∏≠ÔºåJMM ‰ªÖÈúÄÂú® volatile ÂÜôÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™ StoreLoad Â±èÈöúÂç≥ÂèØÊ≠£Á°ÆÂÆûÁé∞ volatile ÂÜô - ËØªÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇËøôÊÑèÂë≥ÁùÄÂú® x86 Â§ÑÁêÜÂô®‰∏≠Ôºåvolatile ÂÜôÁöÑÂºÄÈîÄÊØî volatile ËØªÁöÑÂºÄÈîÄ‰ºöÂ§ßÂæàÂ§öÔºàÂõ†‰∏∫ÊâßË°å StoreLoad Â±èÈöúÂºÄÈîÄ‰ºöÊØîËæÉÂ§ßÔºâ„ÄÇ JSR-133 ‰∏∫‰ªÄ‰πàË¶ÅÂ¢ûÂº∫ volatile ÁöÑÂÜÖÂ≠òËØ≠‰πâ Âú® JSR-133 ‰πãÂâçÁöÑÊóß Java ÂÜÖÂ≠òÊ®°Âûã‰∏≠ÔºåËôΩÁÑ∂‰∏çÂÖÅËÆ∏ volatile ÂèòÈáè‰πãÈó¥ÈáçÊéíÂ∫èÔºå‰ΩÜÊóßÁöÑ Java ÂÜÖÂ≠òÊ®°ÂûãÂÖÅËÆ∏ volatile ÂèòÈáè‰∏éÊôÆÈÄöÂèòÈáè‰πãÈó¥ÈáçÊéíÂ∫è„ÄÇ Âõ†Ê≠§Âú®ÊóßÁöÑÂÜÖÂ≠òÊ®°Âûã‰∏≠ Ôºåvolatile ÁöÑÂÜô - ËØªÊ≤°ÊúâÁõëËßÜÂô®ÁöÑÈáäÊîæ - Ëé∑ÊâÄÂÖ∑ÊúâÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇ‰∏∫‰∫ÜÊèê‰æõ‰∏ÄÁßçÊØîÁõëËßÜÂô®ÈîÅÊõ¥ËΩªÈáèÁ∫ßÁöÑÁ∫øÁ®ã‰πãÈó¥ÈÄö‰ø°ÁöÑÊú∫Âà∂ÔºåJSR-133 ‰∏ìÂÆ∂ÁªÑÂÜ≥ÂÆöÂ¢ûÂº∫ volatile ÁöÑÂÜÖÂ≠òËØ≠‰πâÔºö‰∏•Ê†ºÈôêÂà∂ÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÂØπ volatile ÂèòÈáè‰∏éÊôÆÈÄöÂèòÈáèÁöÑÈáçÊéíÂ∫èÔºåÁ°Æ‰øù volatile ÁöÑÂÜô - ËØªÂíåÁõëËßÜÂô®ÁöÑÈáäÊîæ - Ëé∑Âèñ‰∏ÄÊ†∑ÔºåÂÖ∑ÊúâÁõ∏ÂêåÁöÑÂÜÖÂ≠òËØ≠‰πâ„ÄÇ‰ªéÁºñËØëÂô®ÈáçÊéíÂ∫èËßÑÂàôÂíåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÂ±èÈöúÊèíÂÖ•Á≠ñÁï•Êù•ÁúãÔºåÂè™Ë¶Å volatile ÂèòÈáè‰∏éÊôÆÈÄöÂèòÈáè‰πãÈó¥ÁöÑÈáçÊéíÂ∫èÂèØËÉΩ‰ºöÁ†¥Âùè volatile ÁöÑÂÜÖÂ≠òËØ≠ÊÑèÔºåËøôÁßçÈáçÊéíÂ∫èÂ∞±‰ºöË¢´ÁºñËØëÂô®ÈáçÊéíÂ∫èËßÑÂàôÂíåÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÂ±èÈöúÊèíÂÖ•Á≠ñÁï•Á¶ÅÊ≠¢„ÄÇ Áî±‰∫é volatile ‰ªÖ‰ªÖ‰øùËØÅÂØπÂçï‰∏™ volatile ÂèòÈáèÁöÑËØª / ÂÜôÂÖ∑ÊúâÂéüÂ≠êÊÄßÔºåËÄåÁõëËßÜÂô®ÈîÅÁöÑ‰∫íÊñ•ÊâßË°åÁöÑÁâπÊÄßÂèØ‰ª•Á°Æ‰øùÂØπÊï¥‰∏™‰∏¥ÁïåÂå∫‰ª£Á†ÅÁöÑÊâßË°åÂÖ∑ÊúâÂéüÂ≠êÊÄß„ÄÇÂú®ÂäüËÉΩ‰∏äÔºåÁõëËßÜÂô®ÈîÅÊØî volatile Êõ¥Âº∫Â§ßÔºõÂú®ÂèØ‰º∏Áº©ÊÄßÂíåÊâßË°åÊÄßËÉΩ‰∏äÔºåvolatile Êõ¥Êúâ‰ºòÂäø„ÄÇÂ¶ÇÊûúÊÉ≥Âú®Á®ãÂ∫è‰∏≠Áî® volatile ‰ª£ÊõøÁõëËßÜÂô®ÈîÅÔºåËØ∑‰∏ÄÂÆöË∞®ÊÖé„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>JMM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JMM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂÜÖÂ≠òÊ®°Âûã-Âü∫Á°ÄÂ≠¶‰π†]]></title>
    <url>%2Fposts%2Fd4946f29.html</url>
    <content type="text"><![CDATA[Âπ∂ÂèëÁºñÁ®ãÊ®°ÂûãÂàÜÁ±ª Âú®Âπ∂ÂèëÁºñÁ®ã‰∏≠ÔºåÈúÄË¶ÅÂ§ÑÁêÜ‰∏§‰∏™ÂÖ≥ÈîÆÈóÆÈ¢òÔºöÁ∫øÁ®ã‰πãÈó¥Â¶Ç‰ΩïÈÄö‰ø°ÂèäÁ∫øÁ®ã‰πãÈó¥Â¶Ç‰ΩïÂêåÊ≠•ÔºàËøôÈáåÁöÑÁ∫øÁ®ãÊòØÊåáÂπ∂ÂèëÊâßË°åÁöÑÊ¥ªÂä®ÂÆû‰ΩìÔºâ„ÄÇÈÄö‰ø°ÊòØÊåáÁ∫øÁ®ã‰πãÈó¥‰ª•‰ΩïÁßçÊú∫Âà∂Êù•‰∫§Êç¢‰ø°ÊÅØ„ÄÇÂú®ÂëΩ‰ª§ÂºèÁºñÁ®ã‰∏≠ÔºåÁ∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°Êú∫Âà∂Êúâ‰∏§ÁßçÔºöÂÖ±‰∫´ÂÜÖÂ≠òÂíåÊ∂àÊÅØ‰º†ÈÄí„ÄÇ Âú®ÂÖ±‰∫´ÂÜÖÂ≠òÁöÑÂπ∂ÂèëÊ®°ÂûãÈáåÔºåÁ∫øÁ®ã‰πãÈó¥ÂÖ±‰∫´Á®ãÂ∫èÁöÑÂÖ¨ÂÖ±Áä∂ÊÄÅÔºåÁ∫øÁ®ã‰πãÈó¥ÈÄöËøáÂÜô - ËØªÂÜÖÂ≠ò‰∏≠ÁöÑÂÖ¨ÂÖ±Áä∂ÊÄÅÊù•ÈöêÂºèËøõË°åÈÄö‰ø°„ÄÇÂú®Ê∂àÊÅØ‰º†ÈÄíÁöÑÂπ∂ÂèëÊ®°ÂûãÈáåÔºåÁ∫øÁ®ã‰πãÈó¥Ê≤°ÊúâÂÖ¨ÂÖ±Áä∂ÊÄÅÔºåÁ∫øÁ®ã‰πãÈó¥ÂøÖÈ°ªÈÄöËøáÊòéÁ°ÆÁöÑÂèëÈÄÅÊ∂àÊÅØÊù•ÊòæÂºèËøõË°åÈÄö‰ø°„ÄÇ ÂêåÊ≠•ÊòØÊåáÁ®ãÂ∫èÁî®‰∫éÊéßÂà∂‰∏çÂêåÁ∫øÁ®ã‰πãÈó¥Êìç‰ΩúÂèëÁîüÁõ∏ÂØπÈ°∫Â∫èÁöÑÊú∫Âà∂„ÄÇÂú®ÂÖ±‰∫´ÂÜÖÂ≠òÂπ∂ÂèëÊ®°ÂûãÈáåÔºåÂêåÊ≠•ÊòØÊòæÂºèËøõË°åÁöÑ„ÄÇÁ®ãÂ∫èÂëòÂøÖÈ°ªÊòæÂºèÊåáÂÆöÊüê‰∏™ÊñπÊ≥ïÊàñÊüêÊÆµ‰ª£Á†ÅÈúÄË¶ÅÂú®Á∫øÁ®ã‰πãÈó¥‰∫íÊñ•ÊâßË°å„ÄÇÂú®Ê∂àÊÅØ‰º†ÈÄíÁöÑÂπ∂ÂèëÊ®°ÂûãÈáåÔºåÁî±‰∫éÊ∂àÊÅØÁöÑÂèëÈÄÅÂøÖÈ°ªÂú®Ê∂àÊÅØÁöÑÊé•Êî∂‰πãÂâçÔºåÂõ†Ê≠§ÂêåÊ≠•ÊòØÈöêÂºèËøõË°åÁöÑ„ÄÇ Java ÁöÑÂπ∂ÂèëÈááÁî®ÁöÑÊòØÂÖ±‰∫´ÂÜÖÂ≠òÊ®°ÂûãÔºåJava Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°ÊÄªÊòØÈöêÂºèËøõË°åÔºåÊï¥‰∏™ÈÄö‰ø°ËøáÁ®ãÂØπÁ®ãÂ∫èÂëòÂÆåÂÖ®ÈÄèÊòé„ÄÇ JavaÂÜÖÂ≠òÊ®°ÂûãÁöÑÊäΩË±° Java Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°Áî± Java ÂÜÖÂ≠òÊ®°ÂûãÔºàÁÆÄÁß∞‰∏∫ JMMÔºâÊéßÂà∂ÔºåJMM ÂÜ≥ÂÆö‰∏Ä‰∏™Á∫øÁ®ãÂØπÂÖ±‰∫´ÂèòÈáèÁöÑÂÜôÂÖ•‰ΩïÊó∂ÂØπÂè¶‰∏Ä‰∏™Á∫øÁ®ãÂèØËßÅ„ÄÇ‰ªéÊäΩË±°ÁöÑËßíÂ∫¶Êù•ÁúãÔºåJMM ÂÆö‰πâ‰∫ÜÁ∫øÁ®ãÂíå‰∏ªÂÜÖÂ≠ò‰πãÈó¥ÁöÑÊäΩË±°ÂÖ≥Á≥ªÔºöÁ∫øÁ®ã‰πãÈó¥ÁöÑÂÖ±‰∫´ÂèòÈáèÂ≠òÂÇ®Âú®‰∏ªÂÜÖÂ≠òÔºàmain memoryÔºâ‰∏≠ÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™ÁßÅÊúâÁöÑÊú¨Âú∞ÂÜÖÂ≠òÔºàlocal memoryÔºâÔºåÊú¨Âú∞ÂÜÖÂ≠ò‰∏≠Â≠òÂÇ®‰∫ÜËØ•Á∫øÁ®ã‰ª•ËØª / ÂÜôÂÖ±‰∫´ÂèòÈáèÁöÑÂâØÊú¨„ÄÇÊú¨Âú∞ÂÜÖÂ≠òÊòØ JMM ÁöÑ‰∏Ä‰∏™ÊäΩË±°Ê¶ÇÂøµÔºåÂπ∂‰∏çÁúüÂÆûÂ≠òÂú®„ÄÇÂÆÉÊ∂µÁõñ‰∫ÜÁºìÂ≠òÔºåÂÜôÁºìÂÜ≤Âå∫ÔºåÂØÑÂ≠òÂô®‰ª•ÂèäÂÖ∂‰ªñÁöÑÁ°¨‰ª∂ÂíåÁºñËØëÂô®‰ºòÂåñ„ÄÇJava ÂÜÖÂ≠òÊ®°ÂûãÁöÑÊäΩË±°Á§∫ÊÑèÂõæÂ¶Ç‰∏ãÔºö ‰ªé‰∏äÂõæÊù•ÁúãÔºåÁ∫øÁ®ã A ‰∏éÁ∫øÁ®ã B ‰πãÈó¥Â¶ÇË¶ÅÈÄö‰ø°ÁöÑËØùÔºåÂøÖÈ°ªË¶ÅÁªèÂéÜ2‰∏™Ê≠•È™§Ôºö È¶ñÂÖàÔºåÁ∫øÁ®ã A ÊääÊú¨Âú∞ÂÜÖÂ≠ò A ‰∏≠Êõ¥Êñ∞ËøáÁöÑÂÖ±‰∫´ÂèòÈáèÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠Âéª„ÄÇ ÁÑ∂ÂêéÔºåÁ∫øÁ®ã B Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠ÂéªËØªÂèñÁ∫øÁ®ã A ‰πãÂâçÂ∑≤Êõ¥Êñ∞ËøáÁöÑÂÖ±‰∫´ÂèòÈáè„ÄÇ ‰∏ãÈù¢ÈÄöËøáÁ§∫ÊÑèÂõæÊù•ËØ¥ÊòéËøô‰∏§‰∏™Ê≠•È™§Ôºö Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÊú¨Âú∞ÂÜÖÂ≠ò A Âíå B Êúâ‰∏ªÂÜÖÂ≠ò‰∏≠ÂÖ±‰∫´ÂèòÈáè x ÁöÑÂâØÊú¨„ÄÇÂÅáËÆæÂàùÂßãÊó∂ÔºåËøô‰∏â‰∏™ÂÜÖÂ≠ò‰∏≠ÁöÑ x ÂÄºÈÉΩ‰∏∫ 0„ÄÇÁ∫øÁ®ã A Âú®ÊâßË°åÊó∂ÔºåÊääÊõ¥Êñ∞ÂêéÁöÑ x ÂÄºÔºàÂÅáËÆæÂÄº‰∏∫ 1Ôºâ‰∏¥Êó∂Â≠òÊîæÂú®Ëá™Â∑±ÁöÑÊú¨Âú∞ÂÜÖÂ≠ò A ‰∏≠„ÄÇÂΩìÁ∫øÁ®ã A ÂíåÁ∫øÁ®ã B ÈúÄË¶ÅÈÄö‰ø°Êó∂ÔºåÁ∫øÁ®ã A È¶ñÂÖà‰ºöÊääËá™Â∑±Êú¨Âú∞ÂÜÖÂ≠ò‰∏≠‰øÆÊîπÂêéÁöÑ x ÂÄºÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠ÔºåÊ≠§Êó∂‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑ x ÂÄºÂèò‰∏∫‰∫Ü 1„ÄÇÈöèÂêéÔºåÁ∫øÁ®ã B Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠ÂéªËØªÂèñÁ∫øÁ®ã A Êõ¥Êñ∞ÂêéÁöÑ x ÂÄºÔºåÊ≠§Êó∂Á∫øÁ®ã B ÁöÑÊú¨Âú∞ÂÜÖÂ≠òÁöÑ x ÂÄº‰πüÂèò‰∏∫‰∫Ü 1„ÄÇ ‰ªéÊï¥‰ΩìÊù•ÁúãÔºåËøô‰∏§‰∏™Ê≠•È™§ÂÆûË¥®‰∏äÊòØÁ∫øÁ®ã A Âú®ÂêëÁ∫øÁ®ã B ÂèëÈÄÅÊ∂àÊÅØÔºåËÄå‰∏îËøô‰∏™ÈÄö‰ø°ËøáÁ®ãÂøÖÈ°ªË¶ÅÁªèËøá‰∏ªÂÜÖÂ≠ò„ÄÇJMM ÈÄöËøáÊéßÂà∂‰∏ªÂÜÖÂ≠ò‰∏éÊØè‰∏™Á∫øÁ®ãÁöÑÊú¨Âú∞ÂÜÖÂ≠ò‰πãÈó¥ÁöÑ‰∫§‰∫íÔºåÊù•‰∏∫ java Á®ãÂ∫èÂëòÊèê‰æõÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅ„ÄÇ Êåá‰ª§ÈáçÊéíÂ∫è Âú®ÊâßË°åÁ®ãÂ∫èÊó∂‰∏∫‰∫ÜÊèêÈ´òÊÄßËÉΩÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®Â∏∏Â∏∏‰ºöÂØπÊåá‰ª§ÂÅöÈáçÊéíÂ∫è„ÄÇÈáçÊéíÂ∫èÂàÜ‰∏âÁßçÁ±ªÂûãÔºö ÁºñËØëÂô®‰ºòÂåñÁöÑÈáçÊéíÂ∫è„ÄÇÁºñËØëÂô®Âú®‰∏çÊîπÂèòÂçïÁ∫øÁ®ãÁ®ãÂ∫èËØ≠‰πâÁöÑÂâçÊèê‰∏ãÔºåÂèØ‰ª•ÈáçÊñ∞ÂÆâÊéíËØ≠Âè•ÁöÑÊâßË°åÈ°∫Â∫è„ÄÇ Êåá‰ª§Á∫ßÂπ∂Ë°åÁöÑÈáçÊéíÂ∫è„ÄÇÁé∞‰ª£Â§ÑÁêÜÂô®ÈááÁî®‰∫ÜÊåá‰ª§Á∫ßÂπ∂Ë°åÊäÄÊúØÔºàInstruction-Level ParallelismÔºå ILPÔºâÊù•Â∞ÜÂ§öÊù°Êåá‰ª§ÈáçÂè†ÊâßË°å„ÄÇÂ¶ÇÊûú‰∏çÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÊÄßÔºåÂ§ÑÁêÜÂô®ÂèØ‰ª•ÊîπÂèòËØ≠Âè•ÂØπÂ∫îÊú∫Âô®Êåá‰ª§ÁöÑÊâßË°åÈ°∫Â∫è„ÄÇ ÂÜÖÂ≠òÁ≥ªÁªüÁöÑÈáçÊéíÂ∫è„ÄÇÁî±‰∫éÂ§ÑÁêÜÂô®‰ΩøÁî®ÁºìÂ≠òÂíåËØª / ÂÜôÁºìÂÜ≤Âå∫ÔºåËøô‰ΩøÂæóÂä†ËΩΩÂíåÂ≠òÂÇ®Êìç‰ΩúÁúã‰∏äÂéªÂèØËÉΩÊòØÂú®‰π±Â∫èÊâßË°å„ÄÇ ‰∏äËø∞ÁöÑ1Â±û‰∫éÁºñËØëÂô®ÈáçÊéíÂ∫èÔºå2 Âíå 3Â±û‰∫éÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫è„ÄÇËøô‰∫õÈáçÊéíÂ∫èÈÉΩÂèØËÉΩ‰ºöÂØºËá¥Â§öÁ∫øÁ®ãÁ®ãÂ∫èÂá∫Áé∞ÂÜÖÂ≠òÂèØËßÅÊÄßÈóÆÈ¢ò„ÄÇÂØπ‰∫éÁºñËØëÂô®ÔºåJMM ÁöÑÁºñËØëÂô®ÈáçÊéíÂ∫èËßÑÂàô‰ºöÁ¶ÅÊ≠¢ÁâπÂÆöÁ±ªÂûãÁöÑÁºñËØëÂô®ÈáçÊéíÂ∫èÔºà‰∏çÊòØÊâÄÊúâÁöÑÁºñËØëÂô®ÈáçÊéíÂ∫èÈÉΩË¶ÅÁ¶ÅÊ≠¢Ôºâ„ÄÇÂØπ‰∫éÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫èÔºåJMM ÁöÑÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫èËßÑÂàô‰ºöË¶ÅÊ±Ç java ÁºñËØëÂô®Âú®ÁîüÊàêÊåá‰ª§Â∫èÂàóÊó∂ÔºåÊèíÂÖ•ÁâπÂÆöÁ±ªÂûãÁöÑÂÜÖÂ≠òÂ±èÈöúÔºàmemory barriersÔºåintel Áß∞‰πã‰∏∫ memory fenceÔºâÊåá‰ª§ÔºåÈÄöËøáÂÜÖÂ≠òÂ±èÈöúÊåá‰ª§Êù•Á¶ÅÊ≠¢ÁâπÂÆöÁ±ªÂûãÁöÑÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫èÔºà‰∏çÊòØÊâÄÊúâÁöÑÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫èÈÉΩË¶ÅÁ¶ÅÊ≠¢Ôºâ„ÄÇ JMM Â±û‰∫éËØ≠Ë®ÄÁ∫ßÁöÑÂÜÖÂ≠òÊ®°ÂûãÔºåÂÆÉÁ°Æ‰øùÂú®‰∏çÂêåÁöÑÁºñËØëÂô®Âíå‰∏çÂêåÁöÑÂ§ÑÁêÜÂô®Âπ≥Âè∞‰πã‰∏äÔºåÈÄöËøáÁ¶ÅÊ≠¢ÁâπÂÆöÁ±ªÂûãÁöÑÁºñËØëÂô®ÈáçÊéíÂ∫èÂíåÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫èÔºå‰∏∫Á®ãÂ∫èÂëòÊèê‰æõ‰∏ÄËá¥ÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅ„ÄÇ ÂÜÖÂ≠òÂ±èÈöúÊåá‰ª§ Áé∞‰ª£ÁöÑÂ§ÑÁêÜÂô®‰ΩøÁî®ÂÜôÁºìÂÜ≤Âå∫Êù•‰∏¥Êó∂‰øùÂ≠òÂêëÂÜÖÂ≠òÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇÂÜôÁºìÂÜ≤Âå∫ÂèØ‰ª•‰øùËØÅÊåá‰ª§ÊµÅÊ∞¥Á∫øÊåÅÁª≠ËøêË°åÔºåÂÆÉÂèØ‰ª•ÈÅøÂÖçÁî±‰∫éÂ§ÑÁêÜÂô®ÂÅúÈ°ø‰∏ãÊù•Á≠âÂæÖÂêëÂÜÖÂ≠òÂÜôÂÖ•Êï∞ÊçÆËÄå‰∫ßÁîüÁöÑÂª∂Ëøü„ÄÇÂêåÊó∂ÔºåÈÄöËøá‰ª•ÊâπÂ§ÑÁêÜÁöÑÊñπÂºèÂà∑Êñ∞ÂÜôÁºìÂÜ≤Âå∫Ôºå‰ª•ÂèäÂêàÂπ∂ÂÜôÁºìÂÜ≤Âå∫‰∏≠ÂØπÂêå‰∏ÄÂÜÖÂ≠òÂú∞ÂùÄÁöÑÂ§öÊ¨°ÂÜôÔºåÂèØ‰ª•ÂáèÂ∞ëÂØπÂÜÖÂ≠òÊÄªÁ∫øÁöÑÂç†Áî®„ÄÇËôΩÁÑ∂ÂÜôÁºìÂÜ≤Âå∫ÊúâËøô‰πàÂ§öÂ•ΩÂ§ÑÔºå‰ΩÜÊØè‰∏™Â§ÑÁêÜÂô®‰∏äÁöÑÂÜôÁºìÂÜ≤Âå∫Ôºå‰ªÖ‰ªÖÂØπÂÆÉÊâÄÂú®ÁöÑÂ§ÑÁêÜÂô®ÂèØËßÅ„ÄÇËøô‰∏™ÁâπÊÄß‰ºöÂØπÂÜÖÂ≠òÊìç‰ΩúÁöÑÊâßË°åÈ°∫Â∫è‰∫ßÁîüÈáçË¶ÅÁöÑÂΩ±ÂìçÔºöÂ§ÑÁêÜÂô®ÂØπÂÜÖÂ≠òÁöÑËØª / ÂÜôÊìç‰ΩúÁöÑÊâßË°åÈ°∫Â∫èÔºå‰∏ç‰∏ÄÂÆö‰∏éÂÜÖÂ≠òÂÆûÈôÖÂèëÁîüÁöÑËØª / ÂÜôÊìç‰ΩúÈ°∫Â∫è‰∏ÄËá¥ÔºÅÂ¶Ç‰∏ãÁ§∫‰æãÔºö ProcessorA ProcessorB a = 1; //A1x = b; //A2 b = 2; //B1y = a; //B2 ÂàùÂßãÁä∂ÊÄÅÔºöa = b = 0Â§ÑÁêÜÂô®ÂÖÅËÆ∏ÂæóÂà∞ÁªìÊûúÔºöx = y = 0 ÂÅáËÆæÂ§ÑÁêÜÂô® A ÂíåÂ§ÑÁêÜÂô® B ÊåâÁ®ãÂ∫èÁöÑÈ°∫Â∫èÂπ∂Ë°åÊâßË°åÂÜÖÂ≠òËÆøÈóÆÔºåÊúÄÁªàÂç¥ÂèØËÉΩÂæóÂà∞ x = y = 0 ÁöÑÁªìÊûú„ÄÇÂÖ∑‰ΩìÁöÑÂéüÂõ†Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ËøôÈáåÂ§ÑÁêÜÂô® A ÂíåÂ§ÑÁêÜÂô® B ÂèØ‰ª•ÂêåÊó∂ÊääÂÖ±‰∫´ÂèòÈáèÂÜôÂÖ•Ëá™Â∑±ÁöÑÂÜôÁºìÂÜ≤Âå∫ÔºàA1ÔºåB1ÔºâÔºåÁÑ∂Âêé‰ªéÂÜÖÂ≠ò‰∏≠ËØªÂèñÂè¶‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÔºàA2ÔºåB2ÔºâÔºåÊúÄÂêéÊâçÊääËá™Â∑±ÂÜôÁºìÂ≠òÂå∫‰∏≠‰øùÂ≠òÁöÑËÑèÊï∞ÊçÆÂà∑Êñ∞Âà∞ÂÜÖÂ≠ò‰∏≠ÔºàA3ÔºåB3Ôºâ„ÄÇÂΩì‰ª•ËøôÁßçÊó∂Â∫èÊâßË°åÊó∂ÔºåÁ®ãÂ∫èÂ∞±ÂèØ‰ª•ÂæóÂà∞ x = y = 0 ÁöÑÁªìÊûú„ÄÇ ‰ªéÂÜÖÂ≠òÊìç‰ΩúÂÆûÈôÖÂèëÁîüÁöÑÈ°∫Â∫èÊù•ÁúãÔºåÁõ¥Âà∞Â§ÑÁêÜÂô® A ÊâßË°å A3 Êù•Âà∑Êñ∞Ëá™Â∑±ÁöÑÂÜôÁºìÂ≠òÂå∫ÔºåÂÜôÊìç‰Ωú A1 ÊâçÁÆóÁúüÊ≠£ÊâßË°å‰∫Ü„ÄÇËôΩÁÑ∂Â§ÑÁêÜÂô® A ÊâßË°åÂÜÖÂ≠òÊìç‰ΩúÁöÑÈ°∫Â∫è‰∏∫ÔºöA1-&gt;A2Ôºå‰ΩÜÂÜÖÂ≠òÊìç‰ΩúÂÆûÈôÖÂèëÁîüÁöÑÈ°∫Â∫èÂç¥ÊòØÔºöA2-&gt;A1„ÄÇÊ≠§Êó∂ÔºåÂ§ÑÁêÜÂô® A ÁöÑÂÜÖÂ≠òÊìç‰ΩúÈ°∫Â∫èË¢´ÈáçÊéíÂ∫è‰∫ÜÔºàÂ§ÑÁêÜÂô® B ÁöÑÊÉÖÂÜµÂíåÂ§ÑÁêÜÂô® A ‰∏ÄÊ†∑Ôºâ„ÄÇ ËøôÈáåÁöÑÂÖ≥ÈîÆÊòØÔºåÁî±‰∫éÂÜôÁºìÂÜ≤Âå∫‰ªÖÂØπËá™Â∑±ÁöÑÂ§ÑÁêÜÂô®ÂèØËßÅÔºåÂÆÉ‰ºöÂØºËá¥Â§ÑÁêÜÂô®ÊâßË°åÂÜÖÂ≠òÊìç‰ΩúÁöÑÈ°∫Â∫èÂèØËÉΩ‰ºö‰∏éÂÜÖÂ≠òÂÆûÈôÖÁöÑÊìç‰ΩúÊâßË°åÈ°∫Â∫è‰∏ç‰∏ÄËá¥„ÄÇÁî±‰∫éÁé∞‰ª£ÁöÑÂ§ÑÁêÜÂô®ÈÉΩ‰ºö‰ΩøÁî®ÂÜôÁºìÂÜ≤Âå∫ÔºåÂõ†Ê≠§Áé∞‰ª£ÁöÑÂ§ÑÁêÜÂô®ÈÉΩ‰ºöÂÖÅËÆ∏ÂØπÂÜô - ËØªÊìçÂÅöÈáçÊéíÂ∫è„ÄÇ ‰∏ãÈù¢ÊòØÂ∏∏ËßÅÂ§ÑÁêÜÂô®ÂÖÅËÆ∏ÁöÑÈáçÊéíÂ∫èÁ±ªÂûãÁöÑÂàóË°®Ôºö Load-Load Load-Store Store-Store Store-Load Êï∞ÊçÆ‰æùËµñ sparc-TSO N N N Y N x86 N N N Y N ia64 N N N Y N PowerPC N N N Y N ‰∏äË°®ÂçïÂÖÉÊ†º‰∏≠ÁöÑ‚ÄúN‚ÄùË°®Á§∫Â§ÑÁêÜÂô®‰∏çÂÖÅËÆ∏‰∏§‰∏™Êìç‰ΩúÈáçÊéíÂ∫èÔºå‚ÄúY‚ÄùË°®Á§∫ÂÖÅËÆ∏ÈáçÊéíÂ∫è„ÄÇÂ∏∏ËßÅÁöÑÂ§ÑÁêÜÂô®ÈÉΩÂÖÅËÆ∏ Store-Load ÈáçÊéíÂ∫èÔºõÂ∏∏ËßÅÁöÑÂ§ÑÁêÜÂô®ÈÉΩ‰∏çÂÖÅËÆ∏ÂØπÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÁöÑÊìç‰ΩúÂÅöÈáçÊéíÂ∫è„ÄÇsparc-TSO Âíå x86 Êã•ÊúâÁõ∏ÂØπËæÉÂº∫ÁöÑÂ§ÑÁêÜÂô®ÂÜÖÂ≠òÊ®°ÂûãÔºåÂÆÉ‰ª¨‰ªÖÂÖÅËÆ∏ÂØπÂÜô - ËØªÊìç‰ΩúÂÅöÈáçÊéíÂ∫èÔºàÂõ†‰∏∫ÂÆÉ‰ª¨ÈÉΩ‰ΩøÁî®‰∫ÜÂÜôÁºìÂÜ≤Âå∫Ôºâ„ÄÇ ‰∏∫‰∫Ü‰øùËØÅÂÜÖÂ≠òÂèØËßÅÊÄßÔºåjava ÁºñËØëÂô®Âú®ÁîüÊàêÊåá‰ª§Â∫èÂàóÁöÑÈÄÇÂΩì‰ΩçÁΩÆ‰ºöÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÊåá‰ª§Êù•Á¶ÅÊ≠¢ÁâπÂÆöÁ±ªÂûãÁöÑÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫è„ÄÇJMM ÊääÂÜÖÂ≠òÂ±èÈöúÊåá‰ª§ÂàÜ‰∏∫‰∏ãÂàóÂõõÁ±ªÔºö Â±èÈöúÁ±ªÂûã Êåá‰ª§Á§∫‰æã ËØ¥Êòé LoadLoad Barriers Load1; LoadLoad; Load2 Á°Æ‰øù Load1 Êï∞ÊçÆÁöÑË£ÖËΩΩÔºå‰πãÂâç‰∫é Load2 ÂèäÊâÄÊúâÂêéÁª≠Ë£ÖËΩΩÊåá‰ª§ÁöÑË£ÖËΩΩ„ÄÇ StoreStore Barriers Store1; StoreStore; Store2 Á°Æ‰øù Store1 Êï∞ÊçÆÂØπÂÖ∂‰ªñÂ§ÑÁêÜÂô®ÂèØËßÅÔºàÂà∑Êñ∞Âà∞ÂÜÖÂ≠òÔºâÔºå‰πãÂâç‰∫é Store2 ÂèäÊâÄÊúâÂêéÁª≠Â≠òÂÇ®Êåá‰ª§ÁöÑÂ≠òÂÇ®„ÄÇ LoadStore Barriers Load1; LoadStore; Store2 Á°Æ‰øù Load1 Êï∞ÊçÆË£ÖËΩΩÔºå‰πãÂâç‰∫é Store2 ÂèäÊâÄÊúâÂêéÁª≠ÁöÑÂ≠òÂÇ®Êåá‰ª§Âà∑Êñ∞Âà∞ÂÜÖÂ≠ò„ÄÇ StoreLoad Barriers Store1; StoreLoad; Load2 Á°Æ‰øù Store1 Êï∞ÊçÆÂØπÂÖ∂‰ªñÂ§ÑÁêÜÂô®ÂèòÂæóÂèØËßÅÔºàÊåáÂà∑Êñ∞Âà∞ÂÜÖÂ≠òÔºâÔºå‰πãÂâç‰∫é Load2 ÂèäÊâÄÊúâÂêéÁª≠Ë£ÖËΩΩÊåá‰ª§ÁöÑË£ÖËΩΩ„ÄÇStoreLoad Barriers ‰ºö‰ΩøËØ•Â±èÈöú‰πãÂâçÁöÑÊâÄÊúâÂÜÖÂ≠òËÆøÈóÆÊåá‰ª§ÔºàÂ≠òÂÇ®ÂíåË£ÖËΩΩÊåá‰ª§ÔºâÂÆåÊàê‰πãÂêéÔºåÊâçÊâßË°åËØ•Â±èÈöú‰πãÂêéÁöÑÂÜÖÂ≠òËÆøÈóÆÊåá‰ª§„ÄÇ StoreLoad Barriers ÊòØ‰∏Ä‰∏™‚ÄúÂÖ®ËÉΩÂûã‚ÄùÁöÑÂ±èÈöúÔºåÂÆÉÂêåÊó∂ÂÖ∑ÊúâÂÖ∂‰ªñ‰∏â‰∏™Â±èÈöúÁöÑÊïàÊûú„ÄÇÁé∞‰ª£ÁöÑÂ§öÂ§ÑÁêÜÂô®Â§ßÈÉΩÊîØÊåÅËØ•Â±èÈöúÔºàÂÖ∂‰ªñÁ±ªÂûãÁöÑÂ±èÈöú‰∏ç‰∏ÄÂÆöË¢´ÊâÄÊúâÂ§ÑÁêÜÂô®ÊîØÊåÅÔºâ„ÄÇÊâßË°åËØ•Â±èÈöúÂºÄÈîÄ‰ºöÂæàÊòÇË¥µÔºåÂõ†‰∏∫ÂΩìÂâçÂ§ÑÁêÜÂô®ÈÄöÂ∏∏Ë¶ÅÊääÂÜôÁºìÂÜ≤Âå∫‰∏≠ÁöÑÊï∞ÊçÆÂÖ®ÈÉ®Âà∑Êñ∞Âà∞ÂÜÖÂ≠ò‰∏≠Ôºàbuffer fully flushÔºâ„ÄÇ happens-before ‰ªé JDK5 ÂºÄÂßãÔºåjava ‰ΩøÁî®Êñ∞ÁöÑ JSR -133 ÂÜÖÂ≠òÊ®°ÂûãÔºåJSR-133 ÊèêÂá∫‰∫Ü happens-before ÁöÑÊ¶ÇÂøµÔºåÈÄöËøáËøô‰∏™Ê¶ÇÂøµÊù•ÈòêËø∞Êìç‰Ωú‰πãÈó¥ÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Êìç‰ΩúÊâßË°åÁöÑÁªìÊûúÈúÄË¶ÅÂØπÂè¶‰∏Ä‰∏™Êìç‰ΩúÂèØËßÅÔºåÈÇ£‰πàËøô‰∏§‰∏™Êìç‰Ωú‰πãÈó¥ÂøÖÈ°ªÂ≠òÂú® happens-before ÂÖ≥Á≥ª„ÄÇËøôÈáåÊèêÂà∞ÁöÑ‰∏§‰∏™Êìç‰ΩúÊó¢ÂèØ‰ª•ÊòØÂú®‰∏Ä‰∏™Á∫øÁ®ã‰πãÂÜÖÔºå‰πüÂèØ‰ª•ÊòØÂú®‰∏çÂêåÁ∫øÁ®ã‰πãÈó¥„ÄÇ ‰∏éÁ®ãÂ∫èÂëòÂØÜÂàáÁõ∏ÂÖ≥ÁöÑ happens-before ËßÑÂàôÂ¶Ç‰∏ãÔºö Á®ãÂ∫èÈ°∫Â∫èËßÑÂàôÔºö‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÁöÑÊØè‰∏™Êìç‰ΩúÔºåhappens- before ‰∫éËØ•Á∫øÁ®ã‰∏≠ÁöÑ‰ªªÊÑèÂêéÁª≠Êìç‰Ωú„ÄÇ ÁõëËßÜÂô®ÈîÅËßÑÂàôÔºöÂØπ‰∏Ä‰∏™ÁõëËßÜÂô®ÈîÅÁöÑËß£ÈîÅÔºåhappens- before ‰∫éÈöèÂêéÂØπËøô‰∏™ÁõëËßÜÂô®ÈîÅÁöÑÂä†ÈîÅ„ÄÇ volatile ÂèòÈáèËßÑÂàôÔºöÂØπ‰∏Ä‰∏™ volatile ÂüüÁöÑÂÜôÔºåhappens- before ‰∫é‰ªªÊÑèÂêéÁª≠ÂØπËøô‰∏™ volatile ÂüüÁöÑËØª„ÄÇ ‰º†ÈÄíÊÄßÔºöÂ¶ÇÊûú A happens- before BÔºå‰∏î B happens- before CÔºåÈÇ£‰πà A happens- before C„ÄÇ Ê≥®ÊÑèÔºö‰∏§‰∏™Êìç‰Ωú‰πãÈó¥ÂÖ∑Êúâ happens-before ÂÖ≥Á≥ªÔºåÂπ∂‰∏çÊÑèÂë≥ÁùÄÂâç‰∏Ä‰∏™Êìç‰ΩúÂøÖÈ°ªË¶ÅÂú®Âêé‰∏Ä‰∏™Êìç‰Ωú‰πãÂâçÊâßË°åÔºÅhappens-before ‰ªÖ‰ªÖË¶ÅÊ±ÇÂâç‰∏Ä‰∏™Êìç‰ΩúÔºàÊâßË°åÁöÑÁªìÊûúÔºâÂØπÂêé‰∏Ä‰∏™Êìç‰ΩúÂèØËßÅÔºå‰∏îÂâç‰∏Ä‰∏™Êìç‰ΩúÊåâÈ°∫Â∫èÊéíÂú®Á¨¨‰∫å‰∏™Êìç‰Ωú‰πãÂâçÔºàthe first is visible to and ordered before the secondÔºâ„ÄÇ Â¶Ç‰∏äÂõæÊâÄÁ§∫Ôºå‰∏Ä‰∏™ happens-before ËßÑÂàôÈÄöÂ∏∏ÂØπÂ∫î‰∫éÂ§ö‰∏™ÁºñËØëÂô®ÈáçÊéíÂ∫èËßÑÂàôÂíåÂ§ÑÁêÜÂô®ÈáçÊéíÂ∫èËßÑÂàô„ÄÇÂØπ‰∫é java Á®ãÂ∫èÂëòÊù•ËØ¥Ôºåhappens-before ËßÑÂàôÁÆÄÂçïÊòìÊáÇÔºåÂÆÉÈÅøÂÖçÁ®ãÂ∫èÂëò‰∏∫‰∫ÜÁêÜËß£ JMM Êèê‰æõÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅËÄåÂéªÂ≠¶‰π†Â§çÊùÇÁöÑÈáçÊéíÂ∫èËßÑÂàô‰ª•ÂèäËøô‰∫õËßÑÂàôÁöÑÂÖ∑‰ΩìÂÆûÁé∞„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>JMM</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JMM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-07‰πã-Á∫øÁ®ã‰ºëÁú†]]></title>
    <url>%2Fposts%2Fc0fad076.html</url>
    <content type="text"><![CDATA[sleep()‰ªãÁªç sleep() ÁöÑ‰ΩúÁî®ÊòØËÆ©ÂΩìÂâçÁ∫øÁ®ã‰ºëÁú†ÔºåÂç≥ÂΩìÂâçÁ∫øÁ®ã‰ºö‰ªé‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚Äú‰ºëÁú†(ÈòªÂ°û)Áä∂ÊÄÅ‚Äù„ÄÇsleep()‰ºöÊåáÂÆö‰ºëÁú†Êó∂Èó¥ÔºåÁ∫øÁ®ã‰ºëÁú†ÁöÑÊó∂Èó¥‰ºöÂ§ß‰∫é/Á≠â‰∫éËØ•‰ºëÁú†Êó∂Èó¥ÔºõÂú®Á∫øÁ®ãÈáçÊñ∞Ë¢´Âî§ÈÜíÊó∂ÔºåÂÆÉ‰ºöÁî±‚ÄúÈòªÂ°ûÁä∂ÊÄÅ‚ÄùÂèòÊàê‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚ÄùÔºå‰ªéËÄåÁ≠âÂæÖcpuÁöÑË∞ÉÂ∫¶ÊâßË°å„ÄÇ sleep()Á§∫‰æã 123456789101112131415161718192021222324252627282930313233package main.java.com.study.thread.sleep;/** * @author: whb * @description: Á∫øÁ®ã‰ºëÁú†ÊµãËØï */public class SleepTest &#123; public static void main(String[] args) &#123; ThreadA t1 = new ThreadA("t1"); t1.start(); &#125;&#125;class ThreadA extends Thread &#123; public ThreadA(String name) &#123; super(name); &#125; @Override public synchronized void run() &#123; try &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.printf("%s: %d\n", this.getName(), i); // iËÉΩË¢´4Êï¥Èô§Êó∂Ôºå‰ºëÁú†100ÊØ´Áßí if (i % 4 == 0) &#123; Thread.sleep(100); &#125; &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910t1: 0t1: 1t1: 2t1: 3t1: 4t1: 5t1: 6t1: 7t1: 8t1: 9 &lt;span id=&quot;inline-purple&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; Á®ãÂ∫èÊØîËæÉÁÆÄÂçïÔºåÂú®‰∏ªÁ∫øÁ®ãmain‰∏≠ÂêØÂä®Á∫øÁ®ãt1„ÄÇt1ÂêØÂä®‰πãÂêéÔºåÂΩìt1‰∏≠ÁöÑËÆ°ÁÆóiËÉΩË¢´4Êï¥Èô§Êó∂Ôºåt1‰ºöÈÄöËøáThread.sleep(100)‰ºëÁú†100ÊØ´Áßí„ÄÇ sleep() ‰∏é wait()ÁöÑÊØîËæÉ wait()ÁöÑ‰ΩúÁî®ÊòØËÆ©ÂΩìÂâçÁ∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÁöÑÂêåÊó∂Ôºå‰πü‰ºöÈáäÊîæÂêåÊ≠•ÈîÅ„ÄÇËÄåsleep()ÁöÑ‰ΩúÁî®ÊòØ‰πüÊòØËÆ©ÂΩìÂâçÁ∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚Äú‰ºëÁú†(ÈòªÂ°û)Áä∂ÊÄÅ‚Äù„ÄÇ‰ΩÜÊòØÔºåwait()‰ºöÈáäÊîæÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÔºåËÄåsleep()Âàô‰∏ç‰ºöÈáäÊîæÈîÅ„ÄÇ ‰∏ãÈù¢ÈÄöËøáÁ§∫‰æãÊºîÁ§∫sleep()ÊòØ‰∏ç‰ºöÈáäÊîæÈîÅÁöÑ„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142package main.java.com.study.thread.sleep;/** * @author: whb * @description: wait()ÁöÑ‰ΩúÁî®ÊòØËÆ©ÂΩìÂâçÁ∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÁöÑÂêåÊó∂Ôºå‰πü‰ºöÈáäÊîæÂêåÊ≠•ÈîÅ„ÄÇËÄåsleep()ÁöÑ‰ΩúÁî®ÊòØ‰πüÊòØËÆ©ÂΩìÂâçÁ∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚Äú‰ºëÁú†(ÈòªÂ°û)Áä∂ÊÄÅ‚Äù„ÄÇ * ‰ΩÜÊòØÔºåwait()‰ºöÈáäÊîæÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÔºåËÄåsleep()Âàô‰∏ç‰ºöÈáäÊîæÈîÅ„ÄÇ */public class SleepLockTest &#123; private static Object obj = new Object(); public static void main(String[] args) &#123; ThreadA t1 = new ThreadA("t1"); ThreadA t2 = new ThreadA("t2"); t1.start(); t2.start(); &#125; static class ThreadA extends Thread &#123; public ThreadA(String name) &#123; super(name); &#125; @Override public void run() &#123; // Ëé∑ÂèñobjÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ synchronized (obj) &#123; try &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.printf("%s: %d\n", this.getName(), i); // iËÉΩË¢´4Êï¥Èô§Êó∂Ôºå‰ºëÁú†100ÊØ´Áßí if (i % 4 == 0) &#123; Thread.sleep(100); &#125; &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 1234567891011121314151617181920t1: 0t1: 1t1: 2t1: 3t1: 4t1: 5t1: 6t1: 7t1: 8t1: 9t2: 0t2: 1t2: 2t2: 3t2: 4t2: 5t2: 6t2: 7t2: 8t2: 9 &lt;span id=&quot;inline-purple&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; ‰∏ªÁ∫øÁ®ãmain‰∏≠ÂêØÂä®‰∫Ü‰∏§‰∏™Á∫øÁ®ãt1Âíåt2„ÄÇt1Âíåt2Âú®run()‰ºöÂºïÁî®Âêå‰∏Ä‰∏™ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÔºåÂç≥synchronized(obj)„ÄÇÂú®t1ËøêË°åËøáÁ®ã‰∏≠ÔºåËôΩÁÑ∂ÂÆÉ‰ºöË∞ÉÁî®Thread.sleep(100)Ôºõ‰ΩÜÊòØÔºåt2ÊòØ‰∏ç‰ºöËé∑ÂèñcpuÊâßË°åÊùÉÁöÑ„ÄÇÂõ†‰∏∫Ôºåt1Âπ∂Ê≤°ÊúâÈáäÊîæ‚ÄúobjÊâÄÊåÅÊúâÁöÑÂêåÊ≠•ÈîÅ‚ÄùÔºÅ]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè]]></title>
    <url>%2Fposts%2F89a20157.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ Â∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÔºåÂèàÁß∞Â∑•ÂéÇÊ®°Âºè„ÄÅÂ§öÊÄÅÂ∑•ÂéÇÊ®°ÂºèÂíåËôöÊãüÊûÑÈÄ†Âô®Ê®°ÂºèÔºåÈÄöËøáÂÆö‰πâÂ∑•ÂéÇÁà∂Á±ªË¥üË¥£ÂÆö‰πâÂàõÂª∫ÂØπË±°ÁöÑÂÖ¨ÂÖ±Êé•Âè£ÔºåËÄåÂ≠êÁ±ªÂàôË¥üË¥£ÁîüÊàêÂÖ∑‰ΩìÁöÑÂØπË±°„ÄÇ ‰∏ªË¶Å‰ΩúÁî® Â∞ÜÁ±ªÁöÑÂÆû‰æãÂåñÔºàÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂàõÂª∫ÔºâÂª∂ËøüÂà∞Â∑•ÂéÇÁ±ªÁöÑÂ≠êÁ±ªÔºàÂÖ∑‰ΩìÂ∑•ÂéÇÔºâ‰∏≠ÂÆåÊàêÔºåÂç≥Áî±Â≠êÁ±ªÊù•ÂÜ≥ÂÆöÂ∫îËØ•ÂÆû‰æãÂåñÔºàÂàõÂª∫ÔºâÂì™‰∏Ä‰∏™Á±ª„ÄÇ Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò Ëß£ÂÜ≥ÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè‰∏ÄÊó¶ÈúÄË¶ÅÁîü‰∫ßÊñ∞‰∫ßÂìÅÂ∞±ÈúÄË¶Å‰øÆÊîπÂ∑•ÂéÇÁ±ªÁöÑÊñπÊ≥ïÈÄªËæëÔºåËøùËÉå‰∫Ü‚ÄúÂºÄÊîæ - ÂÖ≥Èó≠ÂéüÂàôÁöÑÁº∫ÁÇπ„ÄÇ ‰πãÊâÄ‰ª•ÂèØ‰ª•Ëß£ÂÜ≥ÁÆÄÂçïÂ∑•ÂéÇÁöÑÈóÆÈ¢òÔºåÊòØÂõ†‰∏∫Â∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÊääÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂàõÂª∫Êé®ËøüÂà∞Â∑•ÂéÇÁ±ªÁöÑÂ≠êÁ±ªÔºàÂÖ∑‰ΩìÂ∑•ÂéÇÔºâ‰∏≠ÔºåÊ≠§Êó∂Â∑•ÂéÇÁ±ª‰∏çÂÜçË¥üË¥£ÊâÄÊúâ‰∫ßÂìÅÁöÑÂàõÂª∫ÔºåËÄåÂè™ÊòØÁªôÂá∫ÂÖ∑‰ΩìÂ∑•ÂéÇÂøÖÈ°ªÂÆûÁé∞ÁöÑÊé•Âè£ÔºåËøôÊ†∑Â∑•ÂéÇÊñπÊ≥ïÊ®°ÂºèÂú®Ê∑ªÂä†Êñ∞‰∫ßÂìÅÁöÑÊó∂ÂÄôÂ∞±‰∏ç‰øÆÊîπÂ∑•ÂéÇÁ±ªÈÄªËæëËÄåÊòØÊ∑ªÂä†Êñ∞ÁöÑÂ∑•ÂéÇÂ≠êÁ±ªÔºåÁ¨¶ÂêàÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºåÂÖãÊúç‰∫ÜÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè‰∏≠Áº∫ÁÇπ Ê®°ÂºèÂéüÁêÜ UMLÁ±ªÂõæ Ê®°ÂºèÁªÑÊàê ÁªÑÊàêÔºàËßíËâ≤Ôºâ ÂÖ≥Á≥ª ‰ΩúÁî® ÊäΩË±°‰∫ßÂìÅÔºàProductÔºâ ÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÁà∂Á±ª ÊèèËø∞ÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£ ÂÖ∑‰Ωì‰∫ßÂìÅÔºàConcrete ProductÔºâ ÊäΩË±°‰∫ßÂìÅÁöÑÂ≠êÁ±ªÔºõ Â∑•ÂéÇÁ±ªÂàõÂª∫ÁöÑÁõÆÊ†áÁ±ª ÊèèËø∞Áîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ ÊäΩË±°Â∑•ÂéÇÔºàCreatorÔºâ ÂÖ∑‰ΩìÂ∑•ÂéÇÁöÑÁà∂Á±ª ÊèèËø∞ÂÖ∑‰ΩìÂ∑•ÂéÇÁöÑÂÖ¨ÂÖ±Êé•Âè£ ÂÖ∑‰ΩìÂ∑•ÂéÇÔºàConcrete CreatorÔºâ ÊäΩË±°Â∑•ÂéÇÁöÑÂ≠êÁ±ªÔºõ Ë¢´Â§ñÁïåË∞ÉÁî® ÊèèËø∞ÂÖ∑‰ΩìÂ∑•ÂéÇÔºõ ÂÆûÁé∞FactoryMethodÂ∑•ÂéÇÊñπÊ≥ïÂàõÂª∫‰∫ßÂìÅÁöÑÂÆû‰æã ‰ΩøÁî®Ê≠•È™§ ÂàõÂª∫ÊäΩË±°Â∑•ÂéÇÁ±ªÔºåÂÆö‰πâÂÖ∑‰ΩìÂ∑•ÂéÇÁöÑÂÖ¨ÂÖ±Êé•Âè£Ôºõ ÂàõÂª∫ÊäΩË±°‰∫ßÂìÅÁ±ª ÔºåÂÆö‰πâÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£Ôºõ ÂàõÂª∫ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÔºàÁªßÊâøÊäΩË±°‰∫ßÂìÅÁ±ªÔºâ &amp; ÂÆö‰πâÁîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅÔºõ ÂàõÂª∫ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÔºàÁªßÊâøÊäΩË±°Â∑•ÂéÇÁ±ªÔºâÔºåÂÆö‰πâÂàõÂª∫ÂØπÂ∫îÂÖ∑‰Ωì‰∫ßÂìÅÂÆû‰æãÁöÑÊñπÊ≥ïÔºõ Â§ñÁïåÈÄöËøáË∞ÉÁî®ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÁöÑÊñπÊ≥ïÔºå‰ªéËÄåÂàõÂª∫‰∏çÂêåÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÁöÑÂÆû‰æã„ÄÇ Ê®°Âºè‰ºòÁÇπ Êõ¥Á¨¶ÂêàÂºÄ-Èó≠ÂéüÂàôÔºåÊñ∞Â¢û‰∏ÄÁßç‰∫ßÂìÅÊó∂ÔºåÂè™ÈúÄË¶ÅÂ¢ûÂä†Áõ∏Â∫îÁöÑÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÂíåÁõ∏Â∫îÁöÑÂ∑•ÂéÇÂ≠êÁ±ªÂç≥ÂèØ„ÄÇ Á¨¶ÂêàÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºåÊØè‰∏™ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÂè™Ë¥üË¥£ÂàõÂª∫ÂØπÂ∫îÁöÑ‰∫ßÂìÅ„ÄÇ ‰∏ç‰ΩøÁî®ÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ïÔºåÂèØ‰ª•ÂΩ¢ÊàêÂü∫‰∫éÁªßÊâøÁöÑÁ≠âÁ∫ßÁªìÊûÑ„ÄÇ Ê®°ÂºèÁº∫ÁÇπ Ê∑ªÂä†Êñ∞‰∫ßÂìÅÊó∂ÔºåÈô§‰∫ÜÂ¢ûÂä†Êñ∞‰∫ßÂìÅÁ±ªÂ§ñÔºåËøòË¶ÅÊèê‰æõ‰∏é‰πãÂØπÂ∫îÁöÑÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÔºåÁ≥ªÁªüÁ±ªÁöÑ‰∏™Êï∞Â∞ÜÊàêÂØπÂ¢ûÂä†ÔºåÂú®‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÂ¢ûÂä†‰∫ÜÁ≥ªÁªüÁöÑÂ§çÊùÇÂ∫¶ÔºõÂêåÊó∂ÔºåÊúâÊõ¥Â§öÁöÑÁ±ªÈúÄË¶ÅÁºñËØëÂíåËøêË°åÔºå‰ºöÁªôÁ≥ªÁªüÂ∏¶Êù•‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÂºÄÈîÄÔºõ Áî±‰∫éËÄÉËôëÂà∞Á≥ªÁªüÁöÑÂèØÊâ©Â±ïÊÄßÔºåÈúÄË¶ÅÂºïÂÖ•ÊäΩË±°Â±ÇÔºåÂú®ÂÆ¢Êà∑Á´Ø‰ª£Á†Å‰∏≠Âùá‰ΩøÁî®ÊäΩË±°Â±ÇËøõË°åÂÆö‰πâÔºåÂ¢ûÂä†‰∫ÜÁ≥ªÁªüÁöÑÊäΩË±°ÊÄßÂíåÁêÜËß£ÈöæÂ∫¶Ôºå‰∏îÂú®ÂÆûÁé∞Êó∂ÂèØËÉΩÈúÄË¶ÅÁî®Âà∞DOM„ÄÅÂèçÂ∞ÑÁ≠âÊäÄÊúØÔºåÂ¢ûÂä†‰∫ÜÁ≥ªÁªüÁöÑÂÆûÁé∞ÈöæÂ∫¶„ÄÇ ËôΩÁÑ∂‰øùËØÅ‰∫ÜÂ∑•ÂéÇÊñπÊ≥ïÂÜÖÁöÑÂØπ‰øÆÊîπÂÖ≥Èó≠Ôºå‰ΩÜÂØπ‰∫é‰ΩøÁî®Â∑•ÂéÇÊñπÊ≥ïÁöÑÁ±ªÔºåÂ¶ÇÊûúË¶ÅÊõ¥Êç¢Âè¶Â§ñ‰∏ÄÁßç‰∫ßÂìÅÔºå‰ªçÁÑ∂ÈúÄË¶Å‰øÆÊîπÂÆû‰æãÂåñÁöÑÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÔºõ ‰∏Ä‰∏™ÂÖ∑‰ΩìÂ∑•ÂéÇÂè™ËÉΩÂàõÂª∫‰∏ÄÁßçÂÖ∑‰Ωì‰∫ßÂìÅ„ÄÇ Â∫îÁî®Âú∫ÊôØ ÂΩì‰∏Ä‰∏™Á±ª‰∏çÁü•ÈÅìÂÆÉÊâÄÈúÄË¶ÅÁöÑÂØπË±°ÁöÑÁ±ªÊó∂ Âú®Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè‰∏≠ÔºåÂÆ¢Êà∑Á´Ø‰∏çÈúÄË¶ÅÁü•ÈÅìÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÁöÑÁ±ªÂêçÔºåÂè™ÈúÄË¶ÅÁü•ÈÅìÊâÄÂØπÂ∫îÁöÑÂ∑•ÂéÇÂç≥ÂèØÔºõ ÂΩì‰∏Ä‰∏™Á±ªÂ∏åÊúõÈÄöËøáÂÖ∂Â≠êÁ±ªÊù•ÊåáÂÆöÂàõÂª∫ÂØπË±°Êó∂ Âú®Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè‰∏≠ÔºåÂØπ‰∫éÊäΩË±°Â∑•ÂéÇÁ±ªÂè™ÈúÄË¶ÅÊèê‰æõ‰∏Ä‰∏™ÂàõÂª∫‰∫ßÂìÅÁöÑÊé•Âè£ÔºåËÄåÁî±ÂÖ∂Â≠êÁ±ªÊù•Á°ÆÂÆöÂÖ∑‰ΩìË¶ÅÂàõÂª∫ÁöÑÂØπË±°ÔºåÂà©Áî®Èù¢ÂêëÂØπË±°ÁöÑÂ§öÊÄÅÊÄßÂíåÈáåÊ∞è‰ª£Êç¢ÂéüÂàôÔºåÂú®Á®ãÂ∫èËøêË°åÊó∂ÔºåÂ≠êÁ±ªÂØπË±°Â∞ÜË¶ÜÁõñÁà∂Á±ªÂØπË±°Ôºå‰ªéËÄå‰ΩøÂæóÁ≥ªÁªüÊõ¥ÂÆπÊòìÊâ©Â±ï„ÄÇ Â∞ÜÂàõÂª∫ÂØπË±°ÁöÑ‰ªªÂä°ÂßîÊâòÁªôÂ§ö‰∏™Â∑•ÂéÇÂ≠êÁ±ª‰∏≠ÁöÑÊüê‰∏Ä‰∏™ÔºåÂÆ¢Êà∑Á´ØÂú®‰ΩøÁî®Êó∂ÂèØ‰ª•Êó†È°ªÂÖ≥ÂøÉÊòØÂì™‰∏Ä‰∏™Â∑•ÂéÇÂ≠êÁ±ªÂàõÂª∫‰∫ßÂìÅÂ≠êÁ±ªÔºåÈúÄË¶ÅÊó∂ÂÜçÂä®ÊÄÅÊåáÂÆöÔºåÂèØÂ∞ÜÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªÁöÑÁ±ªÂêçÂ≠òÂÇ®Âú®ÈÖçÁΩÆÊñá‰ª∂ÊàñÊï∞ÊçÆÂ∫ì‰∏≠„ÄÇ Ê®°ÂºèÁ§∫‰æã Á§∫‰æãËÉåÊôØ ‰ª•Â°ëÊñôÂä†Â∑•ÂéÇ‰∏∫‰æãÔºåÁõÆÂâçÂä†Â∑•ÂéÇ‰ªÖÁîü‰∫ßAÁ±ª‰∫ßÂìÅÔºåÈöèÁùÄÂÆ¢Êà∑ÈúÄÊ±ÇÂèòÂåñÔºåÂÆ¢Êà∑ÈúÄË¶ÅÁîü‰∫ßBÁ±ª‰∫ßÂìÅÔºõ ‰ΩÜÊòØÊîπÂèòÂéüÊúâÂ°ëÊñôÂä†Â∑•ÂéÇÁöÑÈÖçÁΩÆÂíåÂèòÂåñÈùûÂ∏∏Âõ∞ÈöæÔºåÂÅáËÆæ‰∏ã‰∏ÄÊ¨°ÂÆ¢Êà∑ÈúÄË¶ÅÂÜçÂèëÁîüÂèòÂåñÔºåÂÜçÊ¨°ÊîπÂèòÂ∞ÜÂ¢ûÂä†ÈùûÂ∏∏Â§ßÁöÑÊàêÊú¨Ôºõ ÊâÄ‰ª•ÈÄöËøáÁΩÆÂäûÂ°ëÊñôÂàÜÂéÇBÊù•Áîü‰∫ßBÁ±ª‰∫ßÂìÅ„ÄÇ ÊäΩË±°Â∑•ÂéÇÁ±ª 1234567891011121314package main.java.com.study.designPatterns.factory.method.demoOne;/** * @author: whb * @description: ÊäΩË±°Â∑•ÂéÇÁ±ªÔºåÂÆö‰πâÂÖ∑‰ΩìÂ∑•ÂéÇÁöÑÂÖ¨ÂÖ±Êé•Âè£ */public abstract class Factory &#123; /** * Áîü‰∫ß‰∫ßÂìÅ * * @return */ public abstract Product manuFacture();&#125; ÊäΩË±°‰∫ßÂìÅÁ±ª 12345678910111213package main.java.com.study.designPatterns.factory.method.demoOne;/** * @author: whb * @description: ÊäΩË±°‰∫ßÂìÅÁ±ªÔºåÂÆö‰πâÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£ */public abstract class Product &#123; /** * Â±ïÁ§∫‰∫ßÂìÅ */ public abstract void show();&#125; ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ª 123456789101112131415161718192021222324252627package main.java.com.study.designPatterns.factory.method.demoOne;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªAÔºàÁªßÊâøÊäΩË±°‰∫ßÂìÅÁ±ªÔºâÔºåÂÆö‰πâÁîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ */public class ProductA extends Product &#123; @Override public void show() &#123; System.out.println("Áîü‰∫ß‰∫Ü‰∫ßÂìÅA"); &#125;&#125;package main.java.com.study.designPatterns.factory.method.demoOne;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªB, ÂÆö‰πâÁîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ */public class ProductB extends Product &#123; @Override public void show() &#123; System.out.println("Áîü‰∫ß‰∫Ü‰∫ßÂìÅB"); &#125;&#125; ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ª 123456789101112131415161718192021222324252627package main.java.com.study.designPatterns.factory.method.demoOne;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªAÔºåÂÆö‰πâÂàõÂª∫ÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÆû‰æãÊñπÊ≥ï */public class FactoryA extends Factory &#123; @Override public Product manuFacture() &#123; return new ProductA(); &#125;&#125;package main.java.com.study.designPatterns.factory.method.demoOne;/** * @author: whb * @description: ÂÖ∑‰ΩìÂ∑•ÂéÇÁ±ªBÔºåÂÆö‰πâÂàõÂª∫ÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÆû‰æãÊñπÊ≥ï */public class FactoryB extends Factory &#123; @Override public Product manuFacture() &#123; return new ProductB(); &#125;&#125; ÂÆ¢Êà∑Á´ØË∞ÉÁî® 1234567891011121314151617package main.java.com.study.designPatterns.factory.method.demoOne;/** * @author: whb * @description: ÂÆ¢Êà∑Á´ØË∞ÉÁî® */public class Client &#123; public static void main(String[] args) &#123; //ÂÆ¢Êà∑Ë¶Å‰∫ßÂìÅA FactoryA factoryA = new FactoryA(); factoryA.manuFacture().show(); //ÂÆ¢Êà∑Ë¶Å‰∫ßÂìÅB FactoryB factoryB = new FactoryB(); factoryB.manuFacture().show(); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-ÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè]]></title>
    <url>%2Fposts%2Faac06fee.html</url>
    <content type="text"><![CDATA[Ê®°ÂºèÂÆö‰πâ ÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè(Simple Factory Pattern)ÔºöÂèàÁß∞‰∏∫ÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ï(Static Factory Method)Ê®°ÂºèÔºåÂÆÉÂ±û‰∫éÁ±ªÂàõÂª∫ÂûãÊ®°Âºè„ÄÇÊèê‰æõ‰∏Ä‰∏™ÂàõÂª∫ÂØπË±°ÂÆû‰æãÁöÑÂäüËÉΩÔºåËÄåÊó†ÈúÄÂÖ≥ÂøÉÂÖ∂ÂÖ∑‰ΩìÂÆûÁé∞„ÄÇË¢´ÂàõÂª∫ÂÆû‰æãÁöÑÁ±ªÂûãÂèØ‰ª•ÊòØÊé•Âè£„ÄÅÊäΩË±°Á±ªÔºå‰πüÂèØ‰ª•ÊòØÂÖ∑‰ΩìÁ±ª„ÄÇ Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò Â∞Ü‚ÄúÁ±ªÂÆû‰æãÂåñÁöÑÊìç‰Ωú‚Äù‰∏é‚Äú‰ΩøÁî®ÂØπË±°ÁöÑÊìç‰Ωú‚ÄùÂàÜÂºÄÔºåËÆ©‰ΩøÁî®ËÄÖ‰∏çÁî®Áü•ÈÅìÂÖ∑‰ΩìÂèÇÊï∞Â∞±ÂèØ‰ª•ÂÆû‰æãÂåñÂá∫ÊâÄÈúÄË¶ÅÁöÑ‚Äú‰∫ßÂìÅ‚ÄùÁ±ªÔºå‰ªéËÄåÈÅøÂÖç‰∫ÜÂú®ÂÆ¢Êà∑Á´Ø‰ª£Á†Å‰∏≠ÊòæÂºèÊåáÂÆöÔºåÂÆûÁé∞‰∫ÜËß£ËÄ¶„ÄÇÂç≥‰ΩøÁî®ËÄÖÂèØÁõ¥Êé•Ê∂àË¥π‰∫ßÂìÅËÄå‰∏çÈúÄË¶ÅÁü•ÈÅìÂÖ∂Áîü‰∫ßÁöÑÁªÜËäÇ„ÄÇ ÈÄÇÁî®ÁöÑÁéØÂ¢É Â∑•ÂéÇÁ±ªÂàõÂª∫ÁöÑÂØπË±°ÊØîËæÉÂ∞èÔºåËøôÊ†∑‰∏ç‰ºöÈÄ†ÊàêÂ∑•ÂéÇÊñπÊ≥ï‰∏≠‰∏öÂä°ÁöÑÈÄªËæëËøá‰∫éÂ§çÊùÇ„ÄÇ ÂÆ¢Êà∑Á´ØÂè™ÊòØÁü•ÈÅì‰º†ÂÖ•Â∑•ÂéÇÁ±ªÁöÑÂèÇÊï∞„ÄÅÂØπ‰∫éÂ¶Ç‰ΩïÂéªÂàõÂª∫ÂØπË±°Âπ∂‰∏çÂÖ≥ÂøÉ„ÄÇÂÆ¢Êà∑Á´Ø‰∏çÈúÄË¶ÅÂéªÂÖ≥ÂøÉÂàõÂª∫ÁöÑÁªÜËäÇÔºåÂè™ÈúÄË¶ÅÊòéÁ°ÆÈúÄË¶ÅÁöÑÂèÇÊï∞ÔºåËÄåÁî±Â∑•ÂéÇÂÜÖÈÉ®Ë¥üË¥£ÂÖ∑‰ΩìÁöÑÁ±ªÁöÑÂàõÂª∫„ÄÇ Ê®°ÂºèÂéüÁêÜ Ê®°ÂºèÁªÑÊàê ÁªÑÊàêÔºàËßíËâ≤Ôºâ ÂÖ≥Á≥ª ‰ΩúÁî® ÊäΩË±°‰∫ßÂìÅÔºàProductÔºâ ÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÁà∂Á±ª ÊèèËø∞‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£ ÂÖ∑‰Ωì‰∫ßÂìÅÔºàConcrete ProductÔºâ ÊäΩË±°‰∫ßÂìÅÁöÑÂ≠êÁ±ªÔºõ Â∑•ÂéÇÁ±ªÂàõÂª∫ÁöÑÁõÆÊ†áÁ±ª ÊèèËø∞Áîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ Â∑•ÂéÇÔºàCreatorÔºâ Ë¢´Â§ñÁïåË∞ÉÁî® Ê†πÊçÆ‰º†ÂÖ•‰∏çÂêåÂèÇÊï∞‰ªéËÄåÂàõÂª∫‰∏çÂêåÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÁöÑÂÆû‰æã UMLÁ±ªÂõæ ‰ΩøÁî®Ê≠•È™§ ÂàõÂª∫ÊäΩË±°‰∫ßÂìÅÁ±ª &amp; ÂÆö‰πâÂÖ∑‰Ωì‰∫ßÂìÅÁöÑÂÖ¨ÂÖ±Êé•Âè£Ôºõ ÂàõÂª∫ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÔºàÁªßÊâøÊäΩË±°‰∫ßÂìÅÁ±ªÔºâ &amp; ÂÆö‰πâÁîü‰∫ßÁöÑÂÖ∑‰Ωì‰∫ßÂìÅÔºõ ÂàõÂª∫Â∑•ÂéÇÁ±ªÔºåÈÄöËøáÂàõÂª∫ÈùôÊÄÅÊñπÊ≥ïÊ†πÊçÆ‰º†ÂÖ•‰∏çÂêåÂèÇÊï∞‰ªéËÄåÂàõÂª∫‰∏çÂêåÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÁöÑÂÆû‰æãÔºõ Â§ñÁïåÈÄöËøáË∞ÉÁî®Â∑•ÂéÇÁ±ªÁöÑÈùôÊÄÅÊñπÊ≥ïÔºå‰º†ÂÖ•‰∏çÂêåÂèÇÊï∞‰ªéËÄåÂàõÂª∫‰∏çÂêåÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÁöÑÂÆû‰æã Ê®°Âºè‰ºòÁÇπ Ë¥£‰ªªÂàÜÂâ≤ÔºöÂ∑•ÂéÇÁ±ªÂê´ÊúâÂ§ÑÁêÜÈÄªËæëÔºåÂÜ≥ÂÆö‰ΩïÊó∂ÂéªÂàõÂª∫‰∫ßÂìÅÂØπË±°ÔºåÂÆ¢Êà∑Á´ØÂè™ÊòØÈúÄË¶Å‰º†ÈÄíÂØπÂ∫îÁöÑÂèÇÊï∞ÔºåÂç≥ÂèØ‰ª•ÂÆåÊàê‰∫ßÂìÅÁöÑÂàõÂª∫„ÄÇ Âú®‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÊèêÈ´ò‰∫ÜÁ≥ªÁªüÁöÑÁÅµÊ¥ªÊÄßÔºöÂèØ‰ª•ÈÄöËøáÂºïÂÖ•ÈÖçÁΩÆÊñá‰ª∂ÁöÑÊñπÊ≥ïÔºåÂú®‰∏çÂéª‰øÆÊîπÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÁöÑÂâçÊèê‰∏ãÔºåÊõ¥Êç¢ÂíåÂ¢ûÂáèÊñ∞ÁöÑ‰∫ßÂìÅ„ÄÇ Ê®°ÂºèÁº∫ÁÇπ Â∑•ÂéÇÁ±ªÈõÜ‰∏≠‰∫ÜÊâÄÊúâÂÆû‰æãÔºà‰∫ßÂìÅÔºâÁöÑÂàõÂª∫ÈÄªËæëÔºå‰∏ÄÊó¶Ëøô‰∏™Â∑•ÂéÇ‰∏çËÉΩÊ≠£Â∏∏Â∑•‰ΩúÔºåÊï¥‰∏™Á≥ªÁªüÈÉΩ‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇ ËøùËÉå‚ÄúÂºÄÊîæ - ÂÖ≥Èó≠ÂéüÂàô‚ÄùÔºå‰∏ÄÊó¶Ê∑ªÂä†Êñ∞‰∫ßÂìÅÂ∞±‰∏çÂæó‰∏ç‰øÆÊîπÂ∑•ÂéÇÁ±ªÁöÑÈÄªËæëÔºåËøôÊ†∑Â∞±‰ºöÈÄ†ÊàêÂ∑•ÂéÇÈÄªËæëËøá‰∫éÂ§çÊùÇ„ÄÇ ÁÆÄÂçïÂ∑•ÂéÇÊ®°ÂºèÁî±‰∫é‰ΩøÁî®‰∫ÜÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ïÔºåÈùôÊÄÅÊñπÊ≥ï‰∏çËÉΩË¢´ÁªßÊâøÂíåÈáçÂÜôÔºå‰ºöÈÄ†ÊàêÂ∑•ÂéÇËßíËâ≤Êó†Ê≥ïÂΩ¢ÊàêÂü∫‰∫éÁªßÊâøÁöÑÁ≠âÁ∫ßÁªìÊûÑ„ÄÇ Ê®°ÂºèÂ∫îÁî® JDKÁ±ªÂ∫ì‰∏≠ÂπøÊ≥õ‰ΩøÁî®‰∫ÜÁÆÄÂçïÂ∑•ÂéÇÊ®°ÂºèÔºåÂ¶ÇÂ∑•ÂÖ∑Á±ªjava.text.DateFormatÔºåÂÆÉÁî®‰∫éÊ†ºÂºèÂåñ‰∏Ä‰∏™Êú¨Âú∞Êó•ÊúüÊàñËÄÖÊó∂Èó¥„ÄÇ 123public final static DateFormat getDateInstance(); public final static DateFormat getDateInstance(int style); public final static DateFormat getDateInstance(int style,Locale locale); Ëé∑Âèñ‰∏çÂêåÂä†ÂØÜÁÆóÊ≥ïÁöÑÂØÜÈí•ÁîüÊàêÂô®„ÄÇ 1KeyGenerator keyGen=KeyGenerator.getInstance("DESede"); Ê®°ÂºèÁ§∫‰æã ‰ª•Áîü‰∫ßÁîµËÑë‰∏∫‰æãÔºåÂÅáËÆæÊúâ‰∏Ä‰∏™ÁîµËÑëÁöÑ‰ª£Â∑•Áîü‰∫ßÂïÜÔºåÂÆÉÁõÆÂâçÂ∑≤ÁªèÂèØ‰ª•‰ª£Â∑•Áîü‰∫ßËÅîÊÉ≥ÁîµËÑëÔºåÈöèÁùÄ‰∏öÂä°ÁöÑÊãìÂ±ïÔºåËøô‰∏™‰ª£Â∑•Áîü‰∫ßÂïÜËøòË¶ÅÁîü‰∫ßÊÉ†ÊôÆÂíåÂçéÁ°ïÁöÑÁîµËÑëÔºåËøôÊ†∑Â∞±ÈúÄË¶ÅÁî®‰∏Ä‰∏™ÂçïÁã¨ÁöÑÁ±ªÊù•‰∏ìÈó®Áîü‰∫ßÁîµËÑëÔºåËøôÂ∞±Áî®Âà∞‰∫ÜÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè„ÄÇ ÊäΩË±°‰∫ßÂìÅÁ±ª ÂàõÂª∫‰∏Ä‰∏™ÁîµËÑëÁöÑÊäΩË±°‰∫ßÂìÅÁ±ªÔºå‰ªñÊúâ‰∏Ä‰∏™ÊäΩË±°ÊñπÊ≥ïÁî®‰∫éÂêØÂä®ÁîµËÑëÁîü‰∫ßÔºö 12345678910111213package main.java.com.study.designPatterns.simpleFactoryPattern.demoOne;/** * @author: whb * @description: ÊäΩË±°‰∫ßÂìÅÁ±ªÔºöÁîµËÑë */public abstract class Computer &#123; /** * ‰∫ßÂìÅÁöÑÊäΩË±°ÊñπÊ≥ïÔºåÁî±ÂÖ∑‰ΩìÁöÑ‰∫ßÂìÅÂéªÂÆûÁé∞ */ public abstract void startProduce();&#125; ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ª Êé•ÁùÄÂàõÂª∫ÂêÑ‰∏™ÂìÅÁâåÁöÑÁîµËÑëÔºå‰ªñ‰ª¨ÈÉΩÁªßÊâø‰∫Ü‰ªñ‰ª¨ÁöÑÁà∂Á±ªComputerÔºåÂπ∂ÂÆûÁé∞‰∫ÜÁà∂Á±ªÁöÑstartProduceÊñπÊ≥ïÔºö ËÅîÊÉ≥ÁîµËÑë 12345678910111213package main.java.com.study.designPatterns.simpleFactoryPattern.demoOne;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÔºöËÅîÊÉ≥ÁîµËÑë */public class LenovoComputer extends Computer &#123; @Override public void startProduce() &#123; System.out.println("ËÅîÊÉ≥ÁîµËÑëÂêØÂä®Áîü‰∫ß"); &#125;&#125; ÊÉ†ÊôÆÁîµËÑë 123456789101112package main.java.com.study.designPatterns.simpleFactoryPattern.demoOne;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÔºöÊÉ†ÊôÆÁîµËÑë */public class HpComputer extends Computer &#123; @Override public void startProduce() &#123; System.out.println("ÊÉ†ÊôÆÁîµËÑëÂêØÂä®Áîü‰∫ß"); &#125;&#125; ÂçéÁ°ïÁîµËÑë 123456789101112package main.java.com.study.designPatterns.simpleFactoryPattern.demoOne;/** * @author: whb * @description: ÂÖ∑‰Ωì‰∫ßÂìÅÁ±ªÔºöÂçéÁ°ïÁîµËÑë */public class AsusComputer extends Computer&#123; @Override public void startProduce() &#123; System.out.println("ÂçéÁ°ïÁîµËÑëÂêØÂä®Áîü‰∫ß"); &#125;&#125; Â∑•ÂéÇÁ±ª Êé•‰∏ãÊù•ÂàõÂª∫‰∏Ä‰∏™Â∑•ÂéÇÁ±ªÔºåÂÆÉÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÈùôÊÄÅÊñπÊ≥ïcreateComputerÁî®Êù•Áîü‰∫ßÁîµËÑë„ÄÇ‰Ω†Âè™ÈúÄË¶Å‰º†ÂÖ•‰Ω†ÊÉ≥Áîü‰∫ßÁöÑÁîµËÑëÁöÑÂìÅÁâåÔºåÂÆÉÂ∞±‰ºöÂÆû‰æãÂåñÁõ∏Â∫îÂìÅÁâåÁöÑÁîµËÑëÂØπË±°Ôºö 123456789101112131415161718192021222324252627282930package main.java.com.study.designPatterns.simpleFactoryPattern.demoOne;/** * @author: whb * @description: Â∑•ÂéÇÁ±ª */public class ComputerFactory &#123; /** * Áîü‰∫ßÁîµËÑë * * @param type * @return */ public static Computer createComputer(String type) &#123; Computer computer = null; switch (type) &#123; case "lenovo": computer = new LenovoComputer(); break; case "hp": computer = new HpComputer(); break; case "asus": computer = new AsusComputer(); break; &#125; return computer; &#125;&#125; ÂÆ¢Êà∑Á´Ø ÂÆ¢Êà∑Á´ØË∞ÉÁî®Â∑•ÂéÇÁ±ªÔºå‰º†ÂÖ•‚Äúasus‚ÄùÁîü‰∫ßÂá∫ÂçéÁ°ïÁîµËÑëÂπ∂Ë∞ÉÁî®ËØ•ÁîµËÑëÂØπË±°ÁöÑstartProduceÊñπÊ≥ïÔºö 1234567891011package main.java.com.study.designPatterns.simpleFactoryPattern.demoOne;/** * @author: whb * @description: ÂÆ¢Êà∑Á´Ø */public class Client &#123; public static void main(String[] args) &#123; ComputerFactory.createComputer("asus").startProduce(); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-06‰πã-Á∫øÁ®ãËÆ©Ê≠•]]></title>
    <url>%2Fposts%2Fa8d456e8.html</url>
    <content type="text"><![CDATA[yield()‰ªãÁªç &lt;p id=&quot;div-border-left-green&quot;&gt; yield()ÁöÑ‰ΩúÁî®ÊòØËÆ©Ê≠•„ÄÇÂÆÉËÉΩËÆ©ÂΩìÂâçÁ∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚ÄùÔºå‰ªéËÄåËÆ©ÂÖ∂ÂÆÉÂÖ∑ÊúâÁõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑÁ≠âÂæÖÁ∫øÁ®ãËé∑ÂèñÊâßË°åÊùÉÔºõ‰ΩÜÊòØÔºåÂπ∂‰∏çËÉΩ‰øùËØÅÂú®ÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî®yield()‰πãÂêéÔºåÂÖ∂ÂÆÉÂÖ∑ÊúâÁõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑÁ∫øÁ®ãÂ∞±‰∏ÄÂÆöËÉΩËé∑ÂæóÊâßË°åÊùÉÔºõ‰πüÊúâÂèØËÉΩÊòØÂΩìÂâçÁ∫øÁ®ãÂèàËøõÂÖ•Âà∞‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùÁªßÁª≠ËøêË°åÔºÅ &lt;/p&gt; yield()Á§∫‰æã 12345678910111213141516171819202122232425262728293031package main.java.com.study.thread.yield;/** * @author: whb * @description: yield()ÁöÑ‰ΩúÁî®ÊòØËÆ©Ê≠•„ÄÇÂÆÉËÉΩËÆ©ÂΩìÂâçÁ∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚ÄùÔºå‰ªéËÄåËÆ©ÂÖ∂ÂÆÉÂÖ∑ÊúâÁõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑÁ≠âÂæÖÁ∫øÁ®ãËé∑ÂèñÊâßË°åÊùÉÔºõ‰ΩÜÊòØÔºåÂπ∂‰∏çËÉΩ‰øùËØÅÂú®ÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî®yield()‰πãÂêéÔºåÂÖ∂ÂÆÉÂÖ∑ÊúâÁõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑÁ∫øÁ®ãÂ∞±‰∏ÄÂÆöËÉΩËé∑ÂæóÊâßË°åÊùÉÔºõ‰πüÊúâÂèØËÉΩÊòØÂΩìÂâçÁ∫øÁ®ãÂèàËøõÂÖ•Âà∞‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùÁªßÁª≠ËøêË°åÔºÅ */public class YieldTest &#123; public static void main(String[] args) &#123; ThreadA t1 = new ThreadA("t1"); ThreadA t2 = new ThreadA("t2"); t1.start(); t2.start(); &#125;&#125;class ThreadA extends Thread &#123; public ThreadA(String name) &#123; super(name); &#125; @Override public synchronized void run() &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.printf("%s [%d]:%d\n", this.getName(), this.getPriority(), i); // iÊï¥Èô§4Êó∂ÔºåË∞ÉÁî®yield if (i % 4 == 0) &#123; Thread.yield(); &#125; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; (Êüê‰∏ÄÊ¨°ÁöÑ)ËøêË°åÁªìÊûú: &lt;/span&gt; 1234567891011121314151617181920t1 [5]:0t2 [5]:0t1 [5]:1t1 [5]:2t1 [5]:3t1 [5]:4t1 [5]:5t1 [5]:6t1 [5]:7t1 [5]:8t1 [5]:9t2 [5]:1t2 [5]:2t2 [5]:3t2 [5]:4t2 [5]:5t2 [5]:6t2 [5]:7t2 [5]:8t2 [5]:9 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; ‚ÄúÁ∫øÁ®ãt1‚ÄùÂú®ËÉΩË¢´4Êï¥Êï∞ÁöÑÊó∂ÂÄôÔºåÂπ∂Ê≤°ÊúâÂàáÊç¢Âà∞‚ÄúÁ∫øÁ®ãt2‚Äù„ÄÇËøôË°®ÊòéÔºåyield()ËôΩÁÑ∂ÂèØ‰ª•ËÆ©Á∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚ÄùÔºõ‰ΩÜÊòØÔºåÂÆÉ‰∏ç‰∏ÄÂÆö‰ºöËÆ©ÂÖ∂ÂÆÉÁ∫øÁ®ãËé∑ÂèñCPUÊâßË°åÊùÉ(Âç≥ÔºåÂÖ∂ÂÆÉÁ∫øÁ®ãËøõÂÖ•Âà∞‚ÄúËøêË°åÁä∂ÊÄÅ‚Äù)ÔºåÂç≥‰ΩøËøô‰∏™‚ÄúÂÖ∂ÂÆÉÁ∫øÁ®ã‚Äù‰∏éÂΩìÂâçË∞ÉÁî®yield()ÁöÑÁ∫øÁ®ãÂÖ∑ÊúâÁõ∏ÂêåÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ yield() ‰∏é wait()ÁöÑÊØîËæÉ wait()ÁöÑ‰ΩúÁî®ÊòØËÆ©ÂΩìÂâçÁ∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÁöÑÂêåÊó∂Ôºå‰πü‰ºöÈáäÊîæÂêåÊ≠•ÈîÅ„ÄÇËÄåyield()ÁöÑ‰ΩúÁî®ÊòØËÆ©Ê≠•ÔºåÂÆÉ‰πü‰ºöËÆ©ÂΩìÂâçÁ∫øÁ®ãÁ¶ªÂºÄ‚ÄúËøêË°åÁä∂ÊÄÅ‚Äù„ÄÇÂÆÉ‰ª¨ÁöÑÂå∫Âà´ÊòØÔºö (01) wait()ÊòØËÆ©Á∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÔºåËÄå‰∏çyield()ÊòØËÆ©Á∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚Äù„ÄÇ (02) wait()ÊòØ‰ºöÁ∫øÁ®ãÈáäÊîæÂÆÉÊâÄÊåÅÊúâÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÔºåËÄåyield()ÊñπÊ≥ï‰∏ç‰ºöÈáäÊîæÈîÅ„ÄÇ ‰∏ãÈù¢ÈÄöËøáÁ§∫‰æãÊºîÁ§∫yield()ÊòØ‰∏ç‰ºöÈáäÊîæÈîÅÁöÑ„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839package main.java.com.study.thread.yield;/** * @author: whb * @description: wait()ÁöÑ‰ΩúÁî®ÊòØËÆ©ÂΩìÂâçÁ∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÁöÑÂêåÊó∂Ôºå‰πü‰ºöÈáäÊîæÂêåÊ≠•ÈîÅ„ÄÇËÄåyield()ÁöÑ‰ΩúÁî®ÊòØËÆ©Ê≠•ÔºåÂÆÉ‰πü‰ºöËÆ©ÂΩìÂâçÁ∫øÁ®ãÁ¶ªÂºÄ‚ÄúËøêË°åÁä∂ÊÄÅ‚Äù„ÄÇÂÆÉ‰ª¨ÁöÑÂå∫Âà´ÊòØÔºö * (01) wait()ÊòØËÆ©Á∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÔºåËÄå‰∏çyield()ÊòØËÆ©Á∫øÁ®ãÁî±‚ÄúËøêË°åÁä∂ÊÄÅ‚ÄùËøõÂÖ•Âà∞‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚Äù„ÄÇ * (02) wait()ÊòØ‰ºöÁ∫øÁ®ãÈáäÊîæÂÆÉÊâÄÊåÅÊúâÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÔºåËÄåyield()ÊñπÊ≥ï‰∏ç‰ºöÈáäÊîæÈîÅ„ÄÇ */public class YieldLockTest &#123; private static Object obj = new Object(); public static void main(String[] args) &#123; ThreadA t1 = new ThreadA("t1"); ThreadA t2 = new ThreadA("t2"); t1.start(); t2.start(); &#125; static class ThreadA extends Thread &#123; public ThreadA(String name) &#123; super(name); &#125; @Override public void run() &#123; // Ëé∑ÂèñobjÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ synchronized (obj) &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.printf("%s [%d]:%d\n", this.getName(), this.getPriority(), i); // iÊï¥Èô§4Êó∂ÔºåË∞ÉÁî®yield if (i % 4 == 0) &#123; Thread.yield(); &#125; &#125; &#125; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; (Êüê‰∏ÄÊ¨°)ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 1234567891011121314151617181920t1 [5]:0t1 [5]:1t1 [5]:2t1 [5]:3t1 [5]:4t1 [5]:5t1 [5]:6t1 [5]:7t1 [5]:8t1 [5]:9t2 [5]:0t2 [5]:1t2 [5]:2t2 [5]:3t2 [5]:4t2 [5]:5t2 [5]:6t2 [5]:7t2 [5]:8t2 [5]:9 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; ‰∏ªÁ∫øÁ®ãmain‰∏≠ÂêØÂä®‰∫Ü‰∏§‰∏™Á∫øÁ®ãt1Âíåt2„ÄÇt1Âíåt2Âú®run()‰ºöÂºïÁî®Âêå‰∏Ä‰∏™ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÔºåÂç≥synchronized(obj)„ÄÇÂú®t1ËøêË°åËøáÁ®ã‰∏≠ÔºåËôΩÁÑ∂ÂÆÉ‰ºöË∞ÉÁî®Thread.yield()Ôºõ‰ΩÜÊòØÔºåt2ÊòØ‰∏ç‰ºöËé∑ÂèñcpuÊâßË°åÊùÉÁöÑ„ÄÇÂõ†‰∏∫Ôºåt1Âπ∂Ê≤°ÊúâÈáäÊîæ‚ÄúobjÊâÄÊåÅÊúâÁöÑÂêåÊ≠•ÈîÅ‚ÄùÔºÅ]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Ê¢≥ÊéíÂ∫è]]></title>
    <url>%2Fposts%2F9d531ce3.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ Ê¢≥ÊéíÂ∫èÂíåÂ∏åÂ∞îÊéíÂ∫èÂæàÁ±ª‰ºº„ÄÇÂ∏åÂ∞îÊéíÂ∫èÊòØÂú®Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÁöÑÂü∫Á°Ä‰∏äÂÅöÁöÑ‰ºòÂåñÔºåËÄåÊ¢≥ÊéíÂ∫èÊòØÂú®ÂÜíÊ≥°ÊéíÂ∫èÁöÑÂü∫Á°Ä‰∏äÂÅöÁöÑ‰ºòÂåñ„ÄÇ‰πüÊòØÂÉèÂ∏åÂ∞îÊéíÂ∫è‰∏ÄÊ†∑ÔºåÂ∞ÜÂæÖÊéíÂ∫èÂ∫èÂàóÈÄöËøáÂ¢ûÈáèÂàÜ‰∏∫Ëã•Âπ≤‰∏™Â≠êÂ∫èÂàóÔºåÁÑ∂ÂêéÂØπÂ≠êÂ∫èÂàóËøõË°å‰∏ÄË∂üÂÜíÊ≥°ÊéíÂ∫èÔºå‰∏ÄÊ≠•Ê≠•ÂáèÂ∞èÂ¢ûÈáèÔºåÁõ¥Ëá≥Â¢ûÈáè‰∏∫1„ÄÇÊâÄ‰ª•Ê¢≥ÊéíÂ∫èÁöÑÊúÄÂêé‰∏ÄÊ¨°ÊéíÂ∫èÊòØÂÜíÊ≥°ÊéíÂ∫è„ÄÇ Ê¢≥ÊéíÂ∫èÂ¢ûÈáèÊòØÊ†πÊçÆÈÄíÂáèÁéáÂáèÂ∞èÁöÑÔºåÈÄíÂáèÁéáÁöÑËÆæÂÆöÂΩ±ÂìçÁùÄÊ¢≥ÊéíÂ∫èÁöÑÊïàÁéáÔºåÂéü‰ΩúËÄÖ‰ª•ÈöèÊú∫Êï∞‰ΩúÂÆûÈ™åÔºåÂæóÂà∞ÊúÄÊúâÊïàÈÄíÂáèÁéá‰∏∫1.3ÁöÑ„ÄÇÂõ†‰∏∫ÁºñÁ®ã‰∏≠‰πòÊ≥ïÊØîÈô§Ê≥ïÂø´ÔºåÊâÄ‰ª•‰ºöÂèñÈÄíÂáèÁéáÁöÑÂÄíÊï∞‰∏éÈó¥Ë∑ùÁõ∏‰πòÔºåÂç≥0.8„ÄÇÂÖ∂ÂÆûÂΩìÈó¥Ë∑ù‰∏∫1ÁöÑÊó∂ÂÄôÔºåÊ¢≥ÊéíÂ∫èÂ∞±ÊòØÂÜíÊ≥°ÊéíÂ∫èÔºåËÄåÈó¥Ë∑ùÂ§ß‰∫é1ÁöÑÊó∂ÂÄôÔºåÊ¢≥ÊéíÂ∫èÁöÑÂ∞±ÊòØÂ∞ΩÈáèÊääÂ∞èÁöÑÊï∞Â≠óÂæÄÂâçÁßªÂä®Âπ∂‰øùËØÅÊ≠§Ê¨°Èó¥ÈöîÂÜÖÁöÑÁªÑÊòØÊúâÂ∫èÁöÑ„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºöÂÅáËÆæÂæÖÊï∞ÁªÑ[10 4 3 9 6 5 2 1 7 8] ÂæÖÊéíÊï∞ÁªÑÈïøÂ∫¶‰∏∫10,ËÄå10√∑1.3=8,ÂàôÊØîËæÉ10Âíå7,4Âíå8,Âπ∂ÂÅö‰∫§Êç¢„ÄÇ ‰∫§Êç¢ÂêéÁöÑÁªìÊûú‰∏∫Ôºö [7 4 3 9 6 5 2 1 10 8] Á¨¨‰∫åÊ¨°Âæ™ÁéØ,Êõ¥Êñ∞Èó¥Ë∑ù‰∏∫8√∑1.3=6,ÊØîËæÉ7Âíå2,4Âíå1,3Âíå10,9Âíå8,7Âíå2Ôºå4Âíå1,9Âíå8ÈúÄË¶Å‰∫§Êç¢„ÄÇ ‰∫§Êç¢ÂêéÁöÑÁªìÊûú‰∏∫Ôºö [2 1 3 8 6 5 7 4 10 9] Á¨¨‰∏âÊ¨°Âæ™ÁéØ,Êõ¥Êñ∞Ë∑ùÁ¶ª‰∏∫4,ÊØîËæÉ2Âíå6,1Âíå5,3Âíå7,8Âíå4,6Âíå10,5Âíå9,8Âíå4ÈúÄË¶Å‰∫§Êç¢„ÄÇ [2 1 3 4 6 5 7 8 10 9] Á¨¨ÂõõÊ¨°Âæ™ÁéØ,Êõ¥Êñ∞Ë∑ùÁ¶ª‰∏∫3,ÊØîËæÉ2Âíå4,1Âíå6,3Âíå5,4Âíå7,6Âíå8,5Âíå10,7Âíå9Ôºå‰∏çÈúÄË¶Å‰∫§Êç¢„ÄÇ Á¨¨‰∫îÊ¨°Âæ™ÁéØ,Êõ¥Êñ∞Ë∑ùÁ¶ª‰∏∫2,ÊØîËæÉ2Âíå3,1Âíå4,3Âíå6,4Âíå5,6Âíå7,5Âíå8,7Âíå10,8Âíå9Ôºå‰∏çÈúÄË¶Å‰∫§Êç¢„ÄÇ Á¨¨ÂÖ≠Ê¨°Âæ™ÁéØÔºåÊõ¥Êñ∞Ë∑ùÁ¶ª‰∏∫1Ôºå‰∏∫ÂÜíÊ≥°ÊéíÂ∫è„ÄÇ [1 2 3 4 5 6 7 8 9 10] ‰∫§Êç¢ÂêéÊéíÂ∫èÁªìÊùü,È°∫Â∫èËæìÂá∫Âç≥ÂèØÂæóÂà∞[1 2 3 4 5 6 7 8 9 10]„ÄÇ ‰ª£Á†Å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: Ê¢≥ÊéíÂ∫è */public class CombSort &#123; /** * Ê¢≥ÊéíÂ∫è * * @param unsorted ÂæÖÊéíÂ∫èÂàó */ public static void combSort(int[] unsorted) &#123; int gap = unsorted.length; boolean swapped = true; while (gap &gt; 1 || swapped) &#123; if (gap &gt; 1) &#123; gap = (int) (gap / 1.3); &#125; int i = 0; swapped = false; while (i + gap &lt; unsorted.length) &#123; if (unsorted[i] &gt; unsorted[i + gap]) &#123; swap(unsorted, i, i + gap); swapped = true; &#125; i++; &#125; &#125; &#125; /** * Êåâ‰ªéÂ∞èÂà∞Â§ßÁöÑÈ°∫Â∫è‰∫§Êç¢Êï∞ÁªÑ * * @param a ‰º†ÂÖ•ÁöÑÊï∞ÁªÑ * @param b ‰º†ÂÖ•ÁöÑË¶Å‰∫§Êç¢ÁöÑÊï∞b * @param c ‰º†ÂÖ•ÁöÑË¶Å‰∫§Êç¢ÁöÑÊï∞c */ public static void swap(int[] a, int b, int c) &#123; if (b == c) &#123; return; &#125; int temp = a[b]; a[b] = a[c]; a[c] = temp; &#125; public static void main(String[] args) &#123; int[] unsorted = &#123;11, 95, 45, 15, 78, 84, 51, 24, 12&#125;; System.out.println("**************Ê¢≥ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); System.out.println("ÊéíÂ∫èÂêéÔºö"); combSort(unsorted); CommonUtils.display(unsorted); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Âú∞Á≤æÊéíÂ∫è]]></title>
    <url>%2Fposts%2Fd703cb77.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ Âè∑Áß∞ÊúÄÁÆÄÂçïÁöÑÊéíÂ∫èÁÆóÊ≥ï,Âè™Êúâ‰∏ÄÂ±ÇÂæ™ÁéØ,ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂâçËøõÂÜíÊ≥°,‰∏ÄÊó¶ÈÅáÂà∞ÂÜíÊ≥°ÁöÑÊÉÖÂÜµÂèëÁîüÂ∞±ÂæÄÂõûÂÜí,Áõ¥Âà∞ÊääËøô‰∏™Êï∞Â≠óÊîæÂ•Ω‰∏∫Ê≠¢„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºöÂæÖÊéíÊï∞ÁªÑ[6 2 4 1 5 9]„ÄÇ ÂÖàËÆæËÆ°‰∏Ä‰∏™Ê†áËØÜi=0ÁÑ∂Âêé‰ªéÂ§¥ÂºÄÂßãÂà§Êñ≠,‰ªÄ‰πàÊó∂ÂÄô(i &lt; 6)‰∏çÊàêÁ´ã,‰ªÄ‰πàÊó∂ÂÄôÊéíÂ∫èÁªìÊùü„ÄÇ [6 2 4 1 5 9] [0 1 2 3 4 5] ‰∏ãÂÖ∑‰ΩìÁöÑÊéíÂ∫èËøáÁ®ãÂ¶Ç‰∏ãÔºö [ i = 0 ]Êó∂Âï•‰πü‰∏çÂπ≤,ÂÖàËÆ©iËá™Â¢û1,ËææÂà∞ÂÄº‰∏∫1ÊâçÂºÄÂßãÁúüÊ≠£ÁöÑÊØîËæÉ„ÄÇ ‰∫§Êç¢Ââç[6 2 4 1 5 9][ i = 0] ‰∫§Êç¢Âêé[6 2 4 1 5 9][ i = 1] [ i = 1 ]ÊØîËæÉ6Âíå2,ÂèëÁîü‰∫§Êç¢,Âè™Ë¶ÅÂèëÁîü‰∫§Êç¢iÂ∞±Âáè1„ÄÇ ‰∫§Êç¢Ââç[6 2 4 1 5 9][ i = 1] ‰∫§Êç¢Âêé[2 6 4 1 5 9][ i = 0] [ i = 0 ]ÂèàÊàê0‰∫Ü,Âï•‰πü‰∏çÂπ≤,Ëá™Â¢ûÂèòÊàê1ÂÜçËØ¥„ÄÇ ‰∫§Êç¢Ââç[2 6 4 1 5 9][ i = 0] ‰∫§Êç¢Âêé[2 6 4 1 5 9][ i = 1] [ i = 1 ]ÂÜçÊØîËæÉ2Âíå6,‰∏ç‰∫§Êç¢,Âè™Ë¶Å‰∏ç‰∫§Êç¢Â∞±Ëá™Â¢û1„ÄÇ ‰∫§Êç¢Ââç[2 6 4 1 5 9][ i = 1] ‰∫§Êç¢Âêé[2 6 4 1 5 9][ i = 2] [ i = 2 ]ÊØîËæÉ6Âíå4,ÂèëÁîü‰∫§Êç¢,Âè™Ë¶Å‰∫§Êç¢Â∞±Âáè1„ÄÇ ‰∫§Êç¢Ââç[2 6 4 1 5 9][ i = 2] ‰∫§Êç¢Âêé[2 4 6 1 5 9][ i = 1] [ i = 1 ]ÊØîËæÉ2Âíå4,‰∏ç‰∫§Êç¢,Âè™Ë¶Å‰∏ç‰∫§Êç¢Â∞±Ëá™Â¢û1„ÄÇ ‰∫§Êç¢Ââç[2 4 6 1 5 9][ i = 1] ‰∫§Êç¢Âêé[2 4 6 1 5 9][ i = 2] [ i = 2 ]ÊØîËæÉ4Âíå6,‰∏ç‰∫§Êç¢,Âè™Ë¶Å‰∏ç‰∫§Êç¢Â∞±Ëá™Â¢û1„ÄÇ ‰∫§Êç¢Ââç[2 4 6 1 5 9][ i = 2] ‰∫§Êç¢Âêé[2 4 6 1 5 9][ i = 3] [ i = 3 ]ÊØîËæÉ6Âíå1,‰∫§Êç¢,Âè™Ë¶Å‰∫§Êç¢Â∞±Âáè1„ÄÇ ‰∫§Êç¢Ââç[2 4 6 1 5 9][ i = 3] ‰∫§Êç¢Âêé[2 4 1 6 5 9][ i = 2] [ i = 2 ]ÊØîËæÉ4Âíå1,‰∫§Êç¢,Âè™Ë¶Å‰∫§Êç¢Â∞±Âáè1„ÄÇ ‰∫§Êç¢Ââç[2 4 1 6 5 9][ i = 2] ‰∫§Êç¢Âêé[2 1 4 6 5 9][ i = 1] [ i = 1 ]ÊØîËæÉ2Âíå1,‰∫§Êç¢,Âè™Ë¶Å‰∫§Êç¢Â∞±Âáè1„ÄÇ ‰∫§Êç¢Ââç[2 1 4 6 5 9][ i = 1] ‰∫§Êç¢Âêé[1 2 4 6 5 9][ i = 0] [ i = 0 ]Êó∂Âï•‰πü‰∏çÂπ≤,ÂÖàËÆ©iËá™Â¢û1,ËææÂà∞ÂÄº‰∏∫1ÊâçÂºÄÂßãÁúüÊ≠£ÁöÑÊØîËæÉ„ÄÇ ‰∫§Êç¢Ââç[1 2 4 6 5 9][ i = 0] ‰∫§Êç¢Âêé[1 2 4 6 5 9][ i = 1] [ i = 1]ÊØîËæÉ1Âíå2,‰∏ç‰∫§Êç¢,Âè™Ë¶Å‰∏ç‰∫§Êç¢Â∞±Ëá™Â¢û1„ÄÇ [ i = 2]ÊØîËæÉ2Âíå4,‰∏ç‰∫§Êç¢,Âè™Ë¶Å‰∏ç‰∫§Êç¢Â∞±Ëá™Â¢û1„ÄÇ [ i = 3]ÊØîËæÉ4Âíå6,‰∏ç‰∫§Êç¢,Âè™Ë¶Å‰∏ç‰∫§Êç¢Â∞±Ëá™Â¢û1„ÄÇ [ i = 4]ÊØîËæÉ6Âíå5,‰∫§Êç¢,Âè™Ë¶Å‰∫§Êç¢Â∞±Âáè1„ÄÇ ‰∫§Êç¢Ââç[1 2 4 6 5 9][ i = 4] ‰∫§Êç¢Âêé[1 2 4 5 6 9][ i = 3] [ i = 3]ÊØîËæÉ4Âíå5,‰∏ç‰∫§Êç¢,Âè™Ë¶Å‰∏ç‰∫§Êç¢Â∞±Ëá™Â¢û1„ÄÇ [ i = 4]ÊØîËæÉ5Âíå6,‰∏ç‰∫§Êç¢,Âè™Ë¶Å‰∏ç‰∫§Êç¢Â∞±Ëá™Â¢û1„ÄÇ [ i = 5]ÊØîËæÉ6Âíå9,‰∏ç‰∫§Êç¢,Âè™Ë¶Å‰∏ç‰∫§Êç¢Â∞±Ëá™Â¢û1„ÄÇ [ i = 6]Ë°®ËææÂºè(i &lt; n)‰∏çÊàêÁ´ã,ÊéíÂ∫èÁªìÊùü„ÄÇ È°∫Â∫èËæìÂá∫ÁªìÊûúÂç≥ÂèØ:[ 1 2 4 5 6 9]„ÄÇ ‰ª£Á†Å 12345678910111213141516171819202122232425262728293031323334package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: Âú∞Á≤æÊéíÂ∫èÔºöÂè∑Áß∞ÊúÄÁÆÄÂçïÁöÑÊéíÂ∫èÁÆóÊ≥ï,Âè™Êúâ‰∏ÄÂ±ÇÂæ™ÁéØ,ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂâçËøõÂÜíÊ≥°,‰∏ÄÊó¶ÈÅáÂà∞ÂÜíÊ≥°ÁöÑÊÉÖÂÜµÂèëÁîüÂ∞±ÂæÄÂõûÂÜí,Áõ¥Âà∞ÊääËøô‰∏™Êï∞Â≠óÊîæÂ•Ω‰∏∫Ê≠¢„ÄÇ */public class GnomeSort &#123; public static void gnomeSort(int[] unsorted) &#123; int i = 0; while (i &lt; unsorted.length) &#123; if (i == 0 || unsorted[i - 1] &lt;= unsorted[i]) &#123; i++; &#125; else &#123; int temp = unsorted[i]; unsorted[i] = unsorted[i - 1]; unsorted[i - 1] = temp; i--; &#125; &#125; &#125; public static void main(String[] args) &#123; int[] unsorted = &#123;6, 2, 4, 1, 5, 9&#125;; System.out.println("**************Âú∞Á≤æÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); System.out.println("ÊéíÂ∫èÂêéÔºö"); gnomeSort(unsorted); CommonUtils.display(unsorted); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - È∏°Â∞æÈÖíÊéíÂ∫è]]></title>
    <url>%2Fposts%2F6d9204ec.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ È∏°Â∞æÈÖíÊéíÂ∫èÂü∫‰∫éÂÜíÊ≥°ÊéíÂ∫è,ÂèåÂêëÂæ™ÁéØ„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºöÁªôÂÆöÂæÖÊéíÊï∞ÁªÑ[2 3 4 5 1] Á¨¨‰∏ÄË∂üËøáÂéªÊó∂ÁöÑÊØè‰∏ÄÊ≠•„ÄÇ Á¨¨‰∏ÄÊ≠•Ëø≠‰ª£,2 &lt; 3‰∏çÊç¢ [2 3 4 5 1] Á¨¨‰∫åÊ≠•Ëø≠‰ª£,3 &lt; 4‰∏çÊç¢ [2 3 4 5 1] Á¨¨‰∏âÊ≠•Ëø≠‰ª£,4 &lt; 5‰∏çÊç¢ [2 3 4 5 1] Á¨¨ÂõõÊ≠•Ëø≠‰ª£,5 &gt; 1‰∫§Êç¢ [2 3 4 1 5] Á¨¨‰∏ÄË∂üÂõûÊù•Êó∂ÁöÑÁ¨¨‰∏ÄÊ≠•,È∏°Â∞æÈÖí‰∏ÄÊ¨°Âà∞Â§¥ÂêéÂ∞±ÂõûËøîÂõûÊù•,ÂÜçÂà∞Â§¥ÂêéÂÜçËøáÂéª,Êù•ÂõûÊØî,‰∏Ä‰∏™Êù•ÂõûËÉΩÊéí‰∏§‰∏™Êï∞Â≠ó„ÄÇ Á¨¨‰∫îÊ≠•Ëø≠‰ª£,1 &lt; 5‰∏ç‰∫§Êç¢ [2 3 4 1 5] Á¨¨ÂÖ≠Ê≠•Ëø≠‰ª£,1 &lt; 4‰∫§Êç¢ [2 3 1 4 5] Á¨¨‰∏ÉÊ≠•Ëø≠‰ª£,1 &lt; 3‰∫§Êç¢ [2 1 3 4 5] Á¨¨ÂÖ´Ê≠•Ëø≠‰ª£,2 &gt; 1‰∫§Êç¢ [1 2 3 4 5] ÊéíÂ∫èÂÆåÊØï,È°∫Â∫èËæìÂá∫ÁªìÊûúÂç≥ÂèØÂæó[ 1 2 3 4 5]„ÄÇ Â¶Ç‰ΩïÂà§Êñ≠ÊéíÂ∫èÁªìÊùü‰∫Ü? ÂÅáÂ¶Ç‰∏ÄË∂üÊù•ÂõûÊ≤°Êúâ‰∫§Êç¢‰ªª‰ΩïÊï∞Â≠ó,ÂàôË°®Á§∫ËØ•Êï∞ÁªÑÂ∑≤ÁªèÊúâÂ∫è‰∫Ü,ÂèØ‰ª•ËÆæÁΩÆ‰∫Ü‰∏™ÂèòÈáèË°®Á§∫ÊúâÊ≤°Êúâ‰∫§Êç¢Ëøá„ÄÇ ‰ª£Á†Å 12345678910111213141516171819202122232425262728293031323334353637383940414243package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: È∏°Â∞æÈÖíÊéíÂ∫è Âü∫‰∫éÂÜíÊ≥°ÊéíÂ∫è,ÂèåÂêëÂæ™ÁéØ */public class CocktailSort &#123; public static void cocktailSort(int[] unsorted) &#123; boolean swapped = false; do &#123; for (int i = 0; i &lt; unsorted.length - 1; i++) &#123; if (unsorted[i] &gt; unsorted[i + 1]) &#123; int temp = unsorted[i]; unsorted[i] = unsorted[i + 1]; unsorted[i + 1] = temp; swapped = true; &#125; &#125; swapped = false; for (int j = unsorted.length - 1; j &gt; 0; j--) &#123; if (unsorted[j] &lt; unsorted[j - 1]) &#123; int temp = unsorted[j]; unsorted[j] = unsorted[j - 1]; unsorted[j - 1] = temp; swapped = true; &#125; &#125; &#125; while (swapped); &#125; public static void main(String[] args) &#123; int[] unsorted = &#123;6, 2, 4, 1, 5, 9&#125;; System.out.println("**************È∏°Â∞æÈÖíÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); System.out.println("ÊéíÂ∫èÂêéÔºö"); cocktailSort(unsorted); CommonUtils.display(unsorted); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Ê°∂ÊéíÂ∫è]]></title>
    <url>%2Fposts%2F41e434a7.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ ÊòØÂ∞ÜÈòµÂàóÂàÜÂà∞ÊúâÈôêÊï∞ÈáèÁöÑÊ°∂Â≠êÈáå„ÄÇÊØè‰∏™Ê°∂Â≠êÂÜç‰∏™Âà´ÊéíÂ∫èÔºàÊúâÂèØËÉΩÂÜç‰ΩøÁî®Âà´ÁöÑÊéíÂ∫èÁÆóÊ≥ïÊàñÊòØ‰ª•ÈÄíÂõûÊñπÂºèÁªßÁª≠‰ΩøÁî®Ê°∂ÊéíÂ∫èËøõË°åÊéíÂ∫èÔºâ„ÄÇÊ°∂ÊéíÂ∫èÊòØÈ∏ΩÂ∑¢ÊéíÂ∫èÁöÑ‰∏ÄÁßçÂΩíÁ∫≥ÁªìÊûú„ÄÇÂΩìË¶ÅË¢´ÊéíÂ∫èÁöÑÈòµÂàóÂÜÖÁöÑÊï∞ÂÄºÊòØÂùáÂåÄÂàÜÈÖçÁöÑÊó∂ÂÄôÔºåÊ°∂ÊéíÂ∫è‰ΩøÁî®Á∫øÊÄßÊó∂Èó¥ÔºàŒòÔºànÔºâÔºâ„ÄÇ‰ΩÜÊ°∂ÊéíÂ∫èÂπ∂‰∏çÊòØ ÊØîËæÉÊéíÂ∫èÔºå‰ªñ‰∏çÂèóÂà∞ O(n log n) ‰∏ãÈôêÁöÑÂΩ±Âìç„ÄÇÁÆÄÂçïÊù•ËØ¥ÔºåÂ∞±ÊòØÊääÊï∞ÊçÆÂàÜÁªÑÔºåÊîæÂú®‰∏Ä‰∏™‰∏™ÁöÑÊ°∂‰∏≠ÔºåÁÑ∂ÂêéÂØπÊØè‰∏™Ê°∂ÈáåÈù¢ÁöÑÂú®ËøõË°åÊéíÂ∫è„ÄÇ ‰æãÂ¶ÇË¶ÅÂØπÂ§ßÂ∞è‰∏∫[1..1000]ËåÉÂõ¥ÂÜÖÁöÑn‰∏™Êï¥Êï∞A[1..n]ÊéíÂ∫è„ÄÇ È¶ñÂÖàÔºåÂèØ‰ª•ÊääÊ°∂ËÆæ‰∏∫Â§ßÂ∞è‰∏∫10ÁöÑËåÉÂõ¥ÔºåÂÖ∑‰ΩìËÄåË®ÄÔºåËÆæÈõÜÂêàB[1]Â≠òÂÇ®[1..10]ÁöÑÊï¥Êï∞ÔºåÈõÜÂêàB[2]Â≠òÂÇ®(10..20]ÁöÑÊï¥Êï∞Ôºå‚Ä¶‚Ä¶ÈõÜÂêàB[i]Â≠òÂÇ®((i-1)10, i10]ÁöÑÊï¥Êï∞Ôºåi = 1,2,..100„ÄÇÊÄªÂÖ±Êúâ100‰∏™Ê°∂„ÄÇ ÁÑ∂ÂêéÔºåÂØπA[1..n]‰ªéÂ§¥Âà∞Â∞æÊâ´Êèè‰∏ÄÈÅçÔºåÊääÊØè‰∏™A[i]ÊîæÂÖ•ÂØπÂ∫îÁöÑÊ°∂B[j]‰∏≠„ÄÇÂÜçÂØπËøô100‰∏™Ê°∂‰∏≠ÊØè‰∏™Ê°∂ÈáåÁöÑÊï∞Â≠óÊéíÂ∫èÔºåËøôÊó∂ÂèØÁî®ÂÜíÊ≥°ÔºåÈÄâÊã©Ôºå‰πÉËá≥Âø´ÊéíÔºå‰∏ÄËà¨Êù•ËØ¥‰ªª‰ΩïÊéíÂ∫èÊ≥ïÈÉΩÂèØ‰ª•„ÄÇ ÊúÄÂêéÔºå‰æùÊ¨°ËæìÂá∫ÊØè‰∏™Ê°∂ÈáåÈù¢ÁöÑÊï∞Â≠óÔºå‰∏îÊØè‰∏™Ê°∂‰∏≠ÁöÑÊï∞Â≠ó‰ªéÂ∞èÂà∞Â§ßËæìÂá∫ÔºåËøôÊ†∑Â∞±ÂæóÂà∞ÊâÄÊúâÊï∞Â≠óÊéíÂ•ΩÂ∫èÁöÑ‰∏Ä‰∏™Â∫èÂàó‰∫Ü„ÄÇ ÂÅáËÆæÊúân‰∏™Êï∞Â≠óÔºåÊúâm‰∏™Ê°∂ÔºåÂ¶ÇÊûúÊï∞Â≠óÊòØÂπ≥ÂùáÂàÜÂ∏ÉÁöÑÔºåÂàôÊØè‰∏™Ê°∂ÈáåÈù¢Âπ≥ÂùáÊúân/m‰∏™Êï∞Â≠ó„ÄÇÂ¶ÇÊûúÂØπÊØè‰∏™Ê°∂‰∏≠ÁöÑÊï∞Â≠óÈááÁî®Âø´ÈÄüÊéíÂ∫èÔºåÈÇ£‰πàÊï¥‰∏™ÁÆóÊ≥ïÁöÑÂ§çÊùÇÂ∫¶ÊòØ O(n + m * n/m*log(n/m)) = O(n + nlogn - nlogm) ‰ªé‰∏äÂºèÁúãÂá∫ÔºåÂΩìmÊé•ËøënÁöÑÊó∂ÂÄôÔºåÊ°∂ÊéíÂ∫èÂ§çÊùÇÂ∫¶Êé•ËøëO(n)„ÄÇ ÂΩìÁÑ∂Ôºå‰ª•‰∏äÂ§çÊùÇÂ∫¶ÁöÑËÆ°ÁÆóÊòØÂü∫‰∫éËæìÂÖ•ÁöÑn‰∏™Êï∞Â≠óÊòØÂπ≥ÂùáÂàÜÂ∏ÉËøô‰∏™ÂÅáËÆæÁöÑ„ÄÇËøô‰∏™ÂÅáËÆæÊòØÂæàÂº∫ÁöÑ ÔºåÂÆûÈôÖÂ∫îÁî®‰∏≠ÊïàÊûúÂπ∂Ê≤°ÊúâËøô‰πàÂ•Ω„ÄÇÂ¶ÇÊûúÊâÄÊúâÁöÑÊï∞Â≠óÈÉΩËêΩÂú®Âêå‰∏Ä‰∏™Ê°∂‰∏≠ÔºåÈÇ£Â∞±ÈÄÄÂåñÊàê‰∏ÄËà¨ÁöÑÊéíÂ∫è‰∫Ü„ÄÇ Ê°∂ÊéíÂ∫èÁöÑÁº∫ÁÇπÊòØÔºö 1ÔºâÈ¶ñÂÖàÊòØÁ©∫Èó¥Â§çÊùÇÂ∫¶ÊØîËæÉÈ´òÔºåÈúÄË¶ÅÁöÑÈ¢ùÂ§ñÂºÄÈîÄÂ§ß„ÄÇÊéíÂ∫èÊúâ‰∏§‰∏™Êï∞ÁªÑÁöÑÁ©∫Èó¥ÂºÄÈîÄÔºå‰∏Ä‰∏™Â≠òÊîæÂæÖÊéíÂ∫èÊï∞ÁªÑÔºå‰∏Ä‰∏™Â∞±ÊòØÊâÄË∞ìÁöÑÊ°∂ÔºåÊØîÂ¶ÇÂæÖÊéíÂ∫èÂÄºÊòØ‰ªé0Âà∞m-1ÔºåÈÇ£Â∞±ÈúÄË¶Åm‰∏™Ê°∂ÔºåËøô‰∏™Ê°∂Êï∞ÁªÑÂ∞±Ë¶ÅËá≥Â∞ëm‰∏™Á©∫Èó¥„ÄÇ 2ÔºâÂÖ∂Ê¨°ÂæÖÊéíÂ∫èÁöÑÂÖÉÁ¥†ÈÉΩË¶ÅÂú®‰∏ÄÂÆöÁöÑËåÉÂõ¥ÂÜÖÁ≠âÁ≠â„ÄÇ Ê°∂ÂºèÊéíÂ∫èÊòØ‰∏ÄÁßçÂàÜÈÖçÊéíÂ∫è„ÄÇÂàÜÈÖçÊéíÂ∫èÁöÑÁâπÁÇπÊòØ‰∏çÈúÄË¶ÅËøõË°åÂÖ≥ÈîÆÁ†ÅÁöÑÊØîËæÉÔºå‰ΩÜÂâçÊèêÊòØË¶ÅÁü•ÈÅìÂæÖÊéíÂ∫èÂàóÁöÑ‰∏Ä‰∫õÂÖ∑‰ΩìÊÉÖÂÜµ„ÄÇ ‰æãÂ¶ÇÂæÖÊéíÊï∞Â≠ó[6 2 4 1 5 9] ÂáÜÂ§á10‰∏™Á©∫Ê°∂,ÊúÄÂ§ßÊï∞‰∏™Á©∫Ê°∂ [6 2 4 1 5 9] ÂæÖÊéíÊï∞ÁªÑ [0 0 0 0 0 0 0 0 0 0] Á©∫Ê°∂ [0 1 2 3 4 5 6 7 8 9] Ê°∂ÁºñÂè∑(ÂÆûÈôÖ‰∏çÂ≠òÂú®) 1,È°∫Â∫è‰ªéÂæÖÊéíÊï∞ÁªÑ‰∏≠ÂèñÂá∫Êï∞Â≠ó,È¶ñÂÖà6Ë¢´ÂèñÂá∫,ÁÑ∂ÂêéÊää6ÂÖ•6Âè∑Ê°∂,Ëøô‰∏™ËøáÁ®ãÁ±ª‰ººËøôÊ†∑:Á©∫Ê°∂[ ÂæÖÊéíÊï∞ÁªÑ[ 0 ] ] = ÂæÖÊéíÊï∞ÁªÑ[ 0 ] [6 2 4 1 5 9] ÂæÖÊéíÊï∞ÁªÑ [0 0 0 0 0 0 6 0 0 0] Á©∫Ê°∂ [0 1 2 3 4 5 6 7 8 9] Ê°∂ÁºñÂè∑(ÂÆûÈôÖ‰∏çÂ≠òÂú®) 2,È°∫Â∫è‰ªéÂæÖÊéíÊï∞ÁªÑ‰∏≠ÂèñÂá∫‰∏ã‰∏Ä‰∏™Êï∞Â≠ó,Ê≠§Êó∂2Ë¢´ÂèñÂá∫,Â∞ÜÂÖ∂ÊîæÂÖ•2Âè∑Ê°∂,ÊòØÂá†Â∞±ÊîæÂá†Âè∑Ê°∂ [6 2 4 1 5 9] ÂæÖÊéíÊï∞ÁªÑ [0 0 2 0 0 0 6 0 0 0] Á©∫Ê°∂ [0 1 2 3 4 5 6 7 8 9] Ê°∂ÁºñÂè∑(ÂÆûÈôÖ‰∏çÂ≠òÂú®) 3,4,5,6ÁúÅÁï•,ËøáÁ®ã‰∏ÄÊ†∑,ÂÖ®ÈÉ®ÂÖ•Ê°∂ÂêéÂèòÊàê‰∏ãËæπËøôÊ†∑ [6 2 4 1 5 9] ÂæÖÊéíÊï∞ÁªÑ [0 1 2 0 4 5 6 0 0 9] Á©∫Ê°∂ [0 1 2 3 4 5 6 7 8 9] Ê°∂ÁºñÂè∑(ÂÆûÈôÖ‰∏çÂ≠òÂú®) 0Ë°®Á§∫Á©∫Ê°∂,Ë∑≥Ëøá,È°∫Â∫èÂèñÂá∫Âç≥ÂèØ:1 2 4 5 6 9 ‰ª£Á†Å 12345678910111213141516171819202122232425262728293031323334353637package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: Ê°∂ÊéíÂ∫è */public class BucketSort &#123; /** * ÊòØÂ∞ÜÈòµÂàóÂàÜÂà∞ÊúâÈôêÊï∞ÈáèÁöÑÊ°∂Â≠êÈáå„ÄÇÊØè‰∏™Ê°∂Â≠êÂÜç‰∏™Âà´ÊéíÂ∫èÔºàÊúâÂèØËÉΩÂÜç‰ΩøÁî®Âà´ÁöÑÊéíÂ∫èÁÆóÊ≥ïÊàñÊòØ‰ª•ÈÄíÂõûÊñπÂºèÁªßÁª≠‰ΩøÁî®Ê°∂ÊéíÂ∫èËøõË°åÊéíÂ∫èÔºâ„ÄÇ * Ê°∂ÊéíÂ∫èÊòØÈ∏ΩÂ∑¢ÊéíÂ∫èÁöÑ‰∏ÄÁßçÂΩíÁ∫≥ÁªìÊûú„ÄÇÂΩìË¶ÅË¢´ÊéíÂ∫èÁöÑÈòµÂàóÂÜÖÁöÑÊï∞ÂÄºÊòØÂùáÂåÄÂàÜÈÖçÁöÑÊó∂ÂÄôÔºåÊ°∂ÊéíÂ∫è‰ΩøÁî®Á∫øÊÄßÊó∂Èó¥ÔºàŒòÔºànÔºâÔºâ„ÄÇ * ‰ΩÜÊ°∂ÊéíÂ∫èÂπ∂‰∏çÊòØ ÊØîËæÉÊéíÂ∫èÔºå‰ªñ‰∏çÂèóÂà∞ O(n log n) ‰∏ãÈôêÁöÑÂΩ±Âìç„ÄÇÁÆÄÂçïÊù•ËØ¥ÔºåÂ∞±ÊòØÊääÊï∞ÊçÆÂàÜÁªÑÔºåÊîæÂú®‰∏Ä‰∏™‰∏™ÁöÑÊ°∂‰∏≠ÔºåÁÑ∂ÂêéÂØπÊØè‰∏™Ê°∂ÈáåÈù¢ÁöÑÂú®ËøõË°åÊéíÂ∫è„ÄÇ */ public static int[] bucketSort(int[] unsorted, int maxNumber) &#123; int[] sorted = new int[maxNumber + 1]; for (int i = 0; i &lt; unsorted.length; i++) &#123; sorted[unsorted[i]] = unsorted[i]; &#125; return sorted; &#125; public static void main(String[] args) &#123; int[] unsorted = &#123;99, 65, 24, 47, 50, 88, 33, 66, 67, 31, 18&#125;; int[] sorted = bucketSort(unsorted, 99); System.out.println("**************Ê°∂ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); System.out.println("ÊéíÂ∫èÂêéÔºö"); for (int tmp : sorted) &#123; if (tmp &gt; 0) &#123; System.out.print(tmp + " "); &#125; &#125; &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-05‰πã-Á∫øÁ®ãÁ≠âÂæÖ‰∏éÂî§ÈÜí]]></title>
    <url>%2Fposts%2Ff777650b.html</url>
    <content type="text"><![CDATA[wait(), notify(), notifyAll()Á≠âÊñπÊ≥ï‰ªãÁªç Âú®Object.java‰∏≠ÔºåÂÆö‰πâ‰∫Üwait(), notify()ÂíånotifyAll()Á≠âÊé•Âè£„ÄÇ wait()ÁöÑ‰ΩúÁî®ÊòØËÆ©ÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÔºåÂêåÊó∂Ôºåwait()‰πü‰ºöËÆ©ÂΩìÂâçÁ∫øÁ®ãÈáäÊîæÂÆÉÊâÄÊåÅÊúâÁöÑÈîÅ„ÄÇ ËÄånotify()ÂíånotifyAll()ÁöÑ‰ΩúÁî®ÔºåÂàôÊòØÂî§ÈÜíÂΩìÂâçÂØπË±°‰∏äÁöÑÁ≠âÂæÖÁ∫øÁ®ãÔºõnotify()ÊòØÂî§ÈÜíÂçï‰∏™Á∫øÁ®ãÔºåËÄånotifyAll()ÊòØÂî§ÈÜíÊâÄÊúâÁöÑÁ∫øÁ®ã„ÄÇ ObjectÁ±ª‰∏≠ÂÖ≥‰∫éÁ≠âÂæÖ/Âî§ÈÜíÁöÑAPIËØ¶ÁªÜ‰ø°ÊÅØÂ¶Ç‰∏ãÔºö &lt;font color=&quot;green&quot;&gt;notify()&lt;/font&gt; -- Âî§ÈÜíÂú®Ê≠§ÂØπË±°ÁõëËßÜÂô®‰∏äÁ≠âÂæÖÁöÑÂçï‰∏™Á∫øÁ®ã„ÄÇ &lt;font color=&quot;green&quot;&gt;notifyAll()&lt;/font&gt; -- Âî§ÈÜíÂú®Ê≠§ÂØπË±°ÁõëËßÜÂô®‰∏äÁ≠âÂæÖÁöÑÊâÄÊúâÁ∫øÁ®ã„ÄÇ &lt;font color=&quot;green&quot;&gt;wait()&lt;/font&gt; -- ËÆ©ÂΩìÂâçÁ∫øÁ®ãÂ§Ñ‰∫é‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÔºå‚ÄúÁõ¥Âà∞ÂÖ∂‰ªñÁ∫øÁ®ãË∞ÉÁî®Ê≠§ÂØπË±°ÁöÑ notify() ÊñπÊ≥ïÊàñ notifyAll() ÊñπÊ≥ï‚ÄùÔºåÂΩìÂâçÁ∫øÁ®ãË¢´Âî§ÈÜí(ËøõÂÖ•‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚Äù)„ÄÇ &lt;font color=&quot;green&quot;&gt;wait(long timeout)&lt;/font&gt; -- ËÆ©ÂΩìÂâçÁ∫øÁ®ãÂ§Ñ‰∫é‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÔºå‚ÄúÁõ¥Âà∞ÂÖ∂‰ªñÁ∫øÁ®ãË∞ÉÁî®Ê≠§ÂØπË±°ÁöÑ notify() ÊñπÊ≥ïÊàñ notifyAll() ÊñπÊ≥ïÔºåÊàñËÄÖË∂ÖËøáÊåáÂÆöÁöÑÊó∂Èó¥Èáè‚ÄùÔºåÂΩìÂâçÁ∫øÁ®ãË¢´Âî§ÈÜí(ËøõÂÖ•‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚Äù)„ÄÇ &lt;font color=&quot;green&quot;&gt;wait(long timeout, int nanos)&lt;/font&gt; -- ËÆ©ÂΩìÂâçÁ∫øÁ®ãÂ§Ñ‰∫é‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÔºå‚ÄúÁõ¥Âà∞ÂÖ∂‰ªñÁ∫øÁ®ãË∞ÉÁî®Ê≠§ÂØπË±°ÁöÑ notify() ÊñπÊ≥ïÊàñ notifyAll() ÊñπÊ≥ïÔºåÊàñËÄÖÂÖ∂‰ªñÊüê‰∏™Á∫øÁ®ã‰∏≠Êñ≠ÂΩìÂâçÁ∫øÁ®ãÔºåÊàñËÄÖÂ∑≤Ë∂ÖËøáÊüê‰∏™ÂÆûÈôÖÊó∂Èó¥Èáè‚ÄùÔºåÂΩìÂâçÁ∫øÁ®ãË¢´Âî§ÈÜí(ËøõÂÖ•‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚Äù)„ÄÇ wait()Âíånotify()Á§∫‰æã 123456789101112131415161718192021222324252627282930313233343536373839404142434445package main.java.com.study.thread.waitNotify;/** * @author: whb * @description: wait()Âíånotify()‰ΩøÁî®Á§∫‰æã */public class WaitTest &#123; public static void main(String[] args) &#123; ThreadA t1 = new ThreadA("t1"); synchronized (t1) &#123; try &#123; // ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù System.out.println(Thread.currentThread().getName() + " start t1"); t1.start(); // ‰∏ªÁ∫øÁ®ãÁ≠âÂæÖt1ÈÄöËøánotify()Âî§ÈÜí„ÄÇ System.out.println(Thread.currentThread().getName() + " wait()"); t1.wait(); System.out.println(Thread.currentThread().getName() + " continue"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125;class ThreadA extends Thread &#123; public ThreadA(String name) &#123; super(name); &#125; @Override public void run() &#123; synchronized (this) &#123; System.out.println(Thread.currentThread().getName() + " call notify()"); // Âî§ÈÜíÂΩìÂâçÁöÑwaitÁ∫øÁ®ã notify(); &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûú: &lt;/span&gt; 1234main start t1main wait()t1 call notify()main continue &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; Â¶Ç‰∏ãÂõæÔºåËØ¥Êòé‰∫Ü‚Äú‰∏ªÁ∫øÁ®ã‚ÄùÂíå‚ÄúÁ∫øÁ®ãt1‚ÄùÁöÑÊµÅÁ®ã„ÄÇ (01) Ê≥®ÊÑèÔºåÂõæ‰∏≠&quot;‰∏ªÁ∫øÁ®ã&quot; ‰ª£Ë°®‚Äú‰∏ªÁ∫øÁ®ãmain‚Äù„ÄÇ&quot;Á∫øÁ®ãt1&quot; ‰ª£Ë°®WaitTest‰∏≠ÂêØÂä®ÁöÑ‚ÄúÁ∫øÁ®ãt1‚Äù„ÄÇ ËÄå‚ÄúÈîÅ‚Äù ‰ª£Ë°®‚Äút1Ëøô‰∏™ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù„ÄÇ (02) ‚Äú‰∏ªÁ∫øÁ®ã‚ÄùÈÄöËøá new ThreadA(&quot;t1&quot;) Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt1‚Äù„ÄÇÈöèÂêéÈÄöËøásynchronized(t1)Ëé∑Âèñ‚Äút1ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù„ÄÇÁÑ∂ÂêéË∞ÉÁî®t1.start()ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù„ÄÇ (03) ‚Äú‰∏ªÁ∫øÁ®ã‚ÄùÊâßË°åt1.wait() ÈáäÊîæ‚Äút1ÂØπË±°ÁöÑÈîÅ‚ÄùÂπ∂‰∏îËøõÂÖ•‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚Äù„ÄÇÁ≠âÂæÖt1ÂØπË±°‰∏äÁöÑÁ∫øÁ®ãÈÄöËøánotify() Êàñ notifyAll()Â∞ÜÂÖ∂Âî§ÈÜí„ÄÇ (04) ‚ÄúÁ∫øÁ®ãt1‚ÄùËøêË°å‰πãÂêéÔºåÈÄöËøásynchronized(this)Ëé∑Âèñ‚ÄúÂΩìÂâçÂØπË±°ÁöÑÈîÅ‚ÄùÔºõÊé•ÁùÄË∞ÉÁî®notify()Âî§ÈÜí‚ÄúÂΩìÂâçÂØπË±°‰∏äÁöÑÁ≠âÂæÖÁ∫øÁ®ã‚ÄùÔºå‰πüÂ∞±ÊòØÂî§ÈÜí‚Äú‰∏ªÁ∫øÁ®ã‚Äù„ÄÇ (05) ‚ÄúÁ∫øÁ®ãt1‚ÄùËøêË°åÂÆåÊØï‰πãÂêéÔºåÈáäÊîæ‚ÄúÂΩìÂâçÂØπË±°ÁöÑÈîÅ‚Äù„ÄÇÁ¥ßÊé•ÁùÄÔºå‚Äú‰∏ªÁ∫øÁ®ã‚ÄùËé∑Âèñ‚Äút1ÂØπË±°ÁöÑÈîÅ‚ÄùÔºåÁÑ∂ÂêéÊé•ÁùÄËøêË°å„ÄÇ ÂØπ‰∫é‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºö&lt;font color=&quot;red&quot;&gt;t1.wait()Â∫îËØ•ÊòØËÆ©‚ÄúÁ∫øÁ®ãt1‚ÄùÁ≠âÂæÖÔºõ‰ΩÜÊòØÔºå‰∏∫‰ªÄ‰πàÂç¥ÊòØËÆ©‚Äú‰∏ªÁ∫øÁ®ãmain‚ÄùÁ≠âÂæÖ‰∫ÜÂë¢Ôºü&lt;/font&gt; Âú®Ëß£Á≠îËØ•ÈóÆÈ¢òÂâçÔºåÂÖàÁúãÁúãjdkÊñáÊ°£‰∏≠ÂÖ≥‰∫éwaitÁöÑ‰∏ÄÊÆµ‰ªãÁªçÔºö &lt;p id=&quot;div-border-left-red&quot;&gt; Causes the current thread to wait until another thread invokes the notify() method or the notifyAll() method for this object. In other words, this method behaves exactly as if it simply performs the call wait(0). The current thread must own this object's monitor. The thread releases ownership of this monitor and waits until another thread notifies threads waiting on this object's monitor to wake up either through a call to the notify method or the notifyAll method. The thread then waits until it can re-obtain ownership of the monitor and resumes execution. &lt;/p&gt; ‰∏≠ÊñáÊÑèÊÄùÂ§ßÊ¶ÇÊòØÔºö &lt;p id=&quot;div-border-left-green&quot;&gt; ÂºïËµ∑‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÁ≠âÂæÖÔºåÁõ¥Âà∞Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®notify()ÊàñnotifyAll()Âî§ÈÜíËØ•Á∫øÁ®ã„ÄÇÊç¢Âè•ËØùËØ¥ÔºåËøô‰∏™ÊñπÊ≥ïÂíåwait(0)ÁöÑÊïàÊûú‰∏ÄÊ†∑ÔºÅ(Ë°•ÂÖÖÔºåÂØπ‰∫éwait(long millis)ÊñπÊ≥ïÔºåÂΩìmillis‰∏∫0Êó∂ÔºåË°®Á§∫Êó†ÈôêÁ≠âÂæÖÔºåÁõ¥Âà∞Ë¢´notify()ÊàñnotifyAll()Âî§ÈÜí)„ÄÇ ‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÂú®Ë∞ÉÁî®wait()Êó∂ÔºåÂøÖÈ°ªÊã•ÊúâËØ•ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ„ÄÇËØ•Á∫øÁ®ãË∞ÉÁî®wait()‰πãÂêéÔºå‰ºöÈáäÊîæËØ•ÈîÅÔºõÁÑ∂Âêé‰∏ÄÁõ¥Á≠âÂæÖÁõ¥Âà∞‚ÄúÂÖ∂ÂÆÉÁ∫øÁ®ã‚ÄùË∞ÉÁî®ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÁöÑnotify()ÊàñnotifyAll()ÊñπÊ≥ï„ÄÇÁÑ∂ÂêéÔºåËØ•Á∫øÁ®ãÁªßÁª≠Á≠âÂæÖÁõ¥Âà∞ÂÆÉÈáçÊñ∞Ëé∑Âèñ‚ÄúËØ•ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚ÄùÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•Êé•ÁùÄËøêË°å„ÄÇ &lt;/p&gt; &lt;span id=&quot;inline-purple&quot;&gt; Ê≥®ÊÑèÔºöjdkÁöÑËß£Èáä‰∏≠ÔºåËØ¥wait()ÁöÑ‰ΩúÁî®ÊòØËÆ©‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÁ≠âÂæÖÔºåËÄå‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÊòØÊåáÊ≠£Âú®cpu‰∏äËøêË°åÁöÑÁ∫øÁ®ãÔºÅ &lt;/span&gt; Ëøô‰πüÊÑèÂë≥ÁùÄÔºåËôΩÁÑ∂t1.wait()ÊòØÈÄöËøá‚ÄúÁ∫øÁ®ãt1‚ÄùË∞ÉÁî®ÁöÑwait()ÊñπÊ≥ïÔºå‰ΩÜÊòØË∞ÉÁî®t1.wait()ÁöÑÂú∞ÊñπÊòØÂú®‚Äú‰∏ªÁ∫øÁ®ãmain‚Äù‰∏≠„ÄÇËÄå‰∏ªÁ∫øÁ®ãÂøÖÈ°ªÊòØ‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÔºå‰πüÂ∞±ÊòØËøêË°åÁä∂ÊÄÅÔºåÊâçÂèØ‰ª•ÊâßË°åt1.wait()„ÄÇÊâÄ‰ª•ÔºåÊ≠§Êó∂ÁöÑ‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÊòØ‚Äú‰∏ªÁ∫øÁ®ãmain‚ÄùÔºÅÂõ†Ê≠§Ôºåt1.wait()ÊòØËÆ©‚Äú‰∏ªÁ∫øÁ®ã‚ÄùÁ≠âÂæÖÔºåËÄå‰∏çÊòØ‚ÄúÁ∫øÁ®ãt1‚ÄùÔºÅ wait(long timeout)Âíånotify() wait(long timeout)‰ºöËÆ©ÂΩìÂâçÁ∫øÁ®ãÂ§Ñ‰∫é‚ÄúÁ≠âÂæÖ(ÈòªÂ°û)Áä∂ÊÄÅ‚ÄùÔºå‚ÄúÁõ¥Âà∞ÂÖ∂‰ªñÁ∫øÁ®ãË∞ÉÁî®Ê≠§ÂØπË±°ÁöÑ notify() ÊñπÊ≥ïÊàñ notifyAll() ÊñπÊ≥ïÔºåÊàñËÄÖË∂ÖËøáÊåáÂÆöÁöÑÊó∂Èó¥Èáè‚ÄùÔºåÂΩìÂâçÁ∫øÁ®ãË¢´Âî§ÈÜí(ËøõÂÖ•‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚Äù)„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445package main.java.com.study.thread.waitNotify;/** * @author: whb * @description: wait(long timeout)Âíånotify()ÁöÑ‰ΩøÁî®Á§∫‰æã */public class WaitTimeoutTest &#123; public static void main(String[] args) &#123; ThreadB t1 = new ThreadB("t1"); synchronized (t1) &#123; try &#123; // ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù System.out.println(Thread.currentThread().getName() + " start t1"); t1.start(); // ‰∏ªÁ∫øÁ®ãÁ≠âÂæÖt1ÈÄöËøánotify()Âî§ÈÜí Êàñ notifyAll()Âî§ÈÜíÔºåÊàñË∂ÖËøá3000msÂª∂Êó∂ÔºõÁÑ∂ÂêéÊâçË¢´Âî§ÈÜí„ÄÇ System.out.println(Thread.currentThread().getName() + " call wait "); t1.wait(3000); System.out.println(Thread.currentThread().getName() + " continue"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125;class ThreadB extends Thread &#123; public ThreadB(String name) &#123; super(name); &#125; @Override public void run() &#123; System.out.println(Thread.currentThread().getName() + " run "); // Ê≠ªÂæ™ÁéØÔºå‰∏çÊñ≠ËøêË°å„ÄÇ while (true) &#123; ; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 1234main start t1main call wait t1 run // Â§ßÁ∫¶3Áßí‰πãÂêé...ËæìÂá∫‚Äúmain continue‚Äùmain continue &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; Â¶Ç‰∏ãÂõæÔºåËØ¥Êòé‰∫Ü‚Äú‰∏ªÁ∫øÁ®ã‚ÄùÂíå‚ÄúÁ∫øÁ®ãt1‚ÄùÁöÑÊµÅÁ®ã„ÄÇ (01) Ê≥®ÊÑèÔºåÂõæ‰∏≠&quot;‰∏ªÁ∫øÁ®ã&quot; ‰ª£Ë°®WaitTimeoutTest‰∏ªÁ∫øÁ®ã(Âç≥ÔºåÁ∫øÁ®ãmain)„ÄÇ&quot;Á∫øÁ®ãt1&quot; ‰ª£Ë°®WaitTest‰∏≠ÂêØÂä®ÁöÑÁ∫øÁ®ãt1„ÄÇ ËÄå‚ÄúÈîÅ‚Äù ‰ª£Ë°®‚Äút1Ëøô‰∏™ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù„ÄÇ (02) ‰∏ªÁ∫øÁ®ãmainÊâßË°åt1.start()ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù„ÄÇ (03) ‰∏ªÁ∫øÁ®ãmainÊâßË°åt1.wait(3000)ÔºåÊ≠§Êó∂Ôºå‰∏ªÁ∫øÁ®ãËøõÂÖ•‚ÄúÈòªÂ°ûÁä∂ÊÄÅ‚Äù„ÄÇÈúÄË¶Å‚ÄúÁî®‰∫ét1ÂØπË±°ÈîÅÁöÑÁ∫øÁ®ãÈÄöËøánotify() ÊàñËÄÖ notifyAll()Â∞ÜÂÖ∂Âî§ÈÜí‚Äù ÊàñËÄÖ ‚ÄúË∂ÖÊó∂3000ms‰πãÂêé‚ÄùÔºå‰∏ªÁ∫øÁ®ãmainÊâçËøõÂÖ•Âà∞‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚ÄùÔºåÁÑ∂ÂêéÊâçÂèØ‰ª•ËøêË°å„ÄÇ (04) ‚ÄúÁ∫øÁ®ãt1‚ÄùËøêË°å‰πãÂêéÔºåËøõÂÖ•‰∫ÜÊ≠ªÂæ™ÁéØÔºå‰∏ÄÁõ¥‰∏çÊñ≠ÁöÑËøêË°å„ÄÇ (05) Ë∂ÖÊó∂3000ms‰πãÂêéÔºå‰∏ªÁ∫øÁ®ãmain‰ºöËøõÂÖ•Âà∞‚ÄúÂ∞±Áª™Áä∂ÊÄÅ‚ÄùÔºåÁÑ∂ÂêéÊé•ÁùÄËøõÂÖ•‚ÄúËøêË°åÁä∂ÊÄÅ‚Äù„ÄÇ wait() Âíå notifyAll() ÈÄöËøáÂâçÈù¢ÁöÑÁ§∫‰æãÔºåÊàë‰ª¨Áü•ÈÅì notify() ÂèØ‰ª•Âî§ÈÜíÂú®Ê≠§ÂØπË±°ÁõëËßÜÂô®‰∏äÁ≠âÂæÖÁöÑÂçï‰∏™Á∫øÁ®ã„ÄÇ ‰∏ãÈù¢ÔºåÈÄöËøáÁ§∫‰æãÊºîÁ§∫notifyAll()ÁöÑÁî®Ê≥ïÔºõÂÆÉÁöÑ‰ΩúÁî®ÊòØÂî§ÈÜíÂú®Ê≠§ÂØπË±°ÁõëËßÜÂô®‰∏äÁ≠âÂæÖÁöÑÊâÄÊúâÁ∫øÁ®ã„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758package main.java.com.study.thread.waitNotify;/** * @author: whb * @description: wait() Âíå notifyAll()‰ΩøÁî®Á§∫‰æã */public class NotifyAllTest &#123; private static Object obj = new Object(); public static void main(String[] args) &#123; ThreadA t1 = new ThreadA("t1"); ThreadA t2 = new ThreadA("t2"); ThreadA t3 = new ThreadA("t3"); t1.start(); t2.start(); t3.start(); try &#123; System.out.println(Thread.currentThread().getName() + " sleep(3000)"); Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; synchronized (obj) &#123; // ‰∏ªÁ∫øÁ®ãÁ≠âÂæÖÂî§ÈÜí„ÄÇ System.out.println(Thread.currentThread().getName() + " notifyAll()"); obj.notifyAll(); &#125; &#125; static class ThreadA extends Thread &#123; public ThreadA(String name) &#123; super(name); &#125; @Override public void run() &#123; synchronized (obj) &#123; try &#123; // ÊâìÂç∞ËæìÂá∫ÁªìÊûú System.out.println(Thread.currentThread().getName() + " wait"); // Âî§ÈÜíÂΩìÂâçÁöÑwaitÁ∫øÁ®ã obj.wait(); // ÊâìÂç∞ËæìÂá∫ÁªìÊûú System.out.println(Thread.currentThread().getName() + " continue"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678t1 waitmain sleep(3000)t3 waitt2 waitmain notifyAll()t2 continuet3 continuet1 continue &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; (01) ‰∏ªÁ∫øÁ®ã‰∏≠Êñ∞Âª∫Âπ∂‰∏îÂêØÂä®‰∫Ü3‰∏™Á∫øÁ®ã&quot;t1&quot;, &quot;t2&quot;Âíå&quot;t3&quot;„ÄÇ (02) ‰∏ªÁ∫øÁ®ãÈÄöËøásleep(3000)‰ºëÁú†3Áßí„ÄÇÂú®‰∏ªÁ∫øÁ®ã‰ºëÁú†3ÁßíÁöÑËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨ÂÅáËÆæ&quot;t1&quot;, &quot;t2&quot;Âíå&quot;t3&quot;Ëøô3‰∏™Á∫øÁ®ãÈÉΩËøêË°å‰∫Ü„ÄÇ‰ª•&quot;t1&quot;‰∏∫‰æãÔºåÂΩìÂÆÉËøêË°åÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ºöÊâßË°åobj.wait()Á≠âÂæÖÂÖ∂ÂÆÉÁ∫øÁ®ãÈÄöËøánotify()ÊàñÈ¢ùnofityAll()Êù•Âî§ÈÜíÂÆÉÔºõÁõ∏ÂêåÁöÑÈÅìÁêÜÔºå&quot;t2&quot;Âíå&quot;t3&quot;‰πü‰ºöÁ≠âÂæÖÂÖ∂ÂÆÉÁ∫øÁ®ãÈÄöËøánofity()ÊàñnofityAll()Êù•Âî§ÈÜíÂÆÉ‰ª¨„ÄÇ (03) ‰∏ªÁ∫øÁ®ã‰ºëÁú†3Áßí‰πãÂêéÔºåÊé•ÁùÄËøêË°å„ÄÇÊâßË°å obj.notifyAll() Âî§ÈÜíobj‰∏äÁöÑÁ≠âÂæÖÁ∫øÁ®ãÔºåÂç≥Âî§ÈÜí&quot;t1&quot;, &quot;t2&quot;Âíå&quot;t3&quot;Ëøô3‰∏™Á∫øÁ®ã„ÄÇ Á¥ßÊé•ÁùÄÔºå‰∏ªÁ∫øÁ®ãÁöÑsynchronized(obj)ËøêË°åÂÆåÊØï‰πãÂêéÔºå‰∏ªÁ∫øÁ®ãÈáäÊîæ‚ÄúobjÈîÅ‚Äù„ÄÇËøôÊ†∑Ôºå&quot;t1&quot;, &quot;t2&quot;Âíå&quot;t3&quot;Â∞±ÂèØ‰ª•Ëé∑Âèñ‚ÄúobjÈîÅ‚ÄùËÄåÁªßÁª≠ËøêË°å‰∫ÜÔºÅ ‰∏∫‰ªÄ‰πànotify(), wait()Á≠âÂáΩÊï∞ÂÆö‰πâÂú®Object‰∏≠ÔºåËÄå‰∏çÊòØThread‰∏≠ Object‰∏≠ÁöÑwait(), notify()Á≠âÂáΩÊï∞ÔºåÂíåsynchronized‰∏ÄÊ†∑Ôºå‰ºöÂØπ‚ÄúÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚ÄùËøõË°åÊìç‰Ωú„ÄÇ wait()‰ºö‰Ωø‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÁ≠âÂæÖÔºåÂõ†‰∏∫Á∫øÁ®ãËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÔºåÊâÄ‰ª•Á∫øÁ®ãÂ∫îËØ•ÈáäÊîæÂÆÉÈîÅÊåÅÊúâÁöÑ‚ÄúÂêåÊ≠•ÈîÅ‚ÄùÔºåÂê¶ÂàôÂÖ∂ÂÆÉÁ∫øÁ®ãËé∑Âèñ‰∏çÂà∞ËØ•‚ÄúÂêåÊ≠•ÈîÅ‚ÄùËÄåÊó†Ê≥ïËøêË°åÔºÅ Á∫øÁ®ãË∞ÉÁî®wait()‰πãÂêéÔºå‰ºöÈáäÊîæÂÆÉÈîÅÊåÅÊúâÁöÑ‚ÄúÂêåÊ≠•ÈîÅ‚ÄùÔºõËÄå‰∏îÔºåÁ≠âÂæÖÁ∫øÁ®ãÂèØ‰ª•Ë¢´notify()ÊàñnotifyAll()Âî§ÈÜí„ÄÇ ÈÇ£‰πàÈóÆÈ¢òÊù•‰∫ÜÔºönotify()ÊòØ‰æùÊçÆ‰ªÄ‰πàÂî§ÈÜíÁ≠âÂæÖÁ∫øÁ®ãÁöÑÔºüÊàñËÄÖËØ¥Ôºåwait()Á≠âÂæÖÁ∫øÁ®ãÂíånotify()‰πãÈó¥ÊòØÈÄöËøá‰ªÄ‰πàÂÖ≥ËÅîËµ∑Êù•ÁöÑÔºüÁ≠îÊ°àÊòØÔºö‰æùÊçÆ‚ÄúÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù„ÄÇ Ë¥üË¥£Âî§ÈÜíÁ≠âÂæÖÁ∫øÁ®ãÁöÑÈÇ£‰∏™Á∫øÁ®ã(Áß∞‰∏∫‚ÄúÂî§ÈÜíÁ∫øÁ®ã‚Äù)ÔºåÂÆÉÂè™ÊúâÂú®Ëé∑Âèñ‚ÄúËØ•ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù(ËøôÈáåÁöÑÂêåÊ≠•ÈîÅÂøÖÈ°ªÂíåÁ≠âÂæÖÁ∫øÁ®ãÁöÑÂêåÊ≠•ÈîÅÊòØÂêå‰∏Ä‰∏™)ÔºåÂπ∂‰∏îË∞ÉÁî®notify()ÊàñnotifyAll()ÊñπÊ≥ï‰πãÂêéÔºåÊâçËÉΩÂî§ÈÜíÁ≠âÂæÖÁ∫øÁ®ã„ÄÇËôΩÁÑ∂ÔºåÁ≠âÂæÖÁ∫øÁ®ãË¢´Âî§ÈÜíÔºõ‰ΩÜÊòØÔºåÂÆÉ‰∏çËÉΩÁ´ãÂàªÊâßË°åÔºåÂõ†‰∏∫Âî§ÈÜíÁ∫øÁ®ãËøòÊåÅÊúâ‚ÄúËØ•ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù„ÄÇÂøÖÈ°ªÁ≠âÂà∞Âî§ÈÜíÁ∫øÁ®ãÈáäÊîæ‰∫Ü‚ÄúÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù‰πãÂêéÔºåÁ≠âÂæÖÁ∫øÁ®ãÊâçËÉΩËé∑ÂèñÂà∞‚ÄúÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚ÄùËøõËÄåÁªßÁª≠ËøêË°å„ÄÇ ÊÄª‰πãÔºånotify(), wait()‰æùËµñ‰∫é‚ÄúÂêåÊ≠•ÈîÅ‚ÄùÔºåËÄå‚ÄúÂêåÊ≠•ÈîÅ‚ÄùÊòØÂØπË±°ÈîÅÊåÅÊúâÔºåÂπ∂‰∏îÊØè‰∏™ÂØπË±°Êúâ‰∏î‰ªÖÊúâ‰∏Ä‰∏™ÔºÅËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πànotify(), wait()Á≠âÂáΩÊï∞ÂÆö‰πâÂú®ObjectÁ±ªÔºåËÄå‰∏çÊòØThreadÁ±ª‰∏≠ÁöÑÂéüÂõ†„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - ËÄêÂøÉÊéíÂ∫è]]></title>
    <url>%2Fposts%2Fde5a6680.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ ËÄêÂøÉÊéíÂ∫èÂÖÖÂàÜÈõÜÂêà‰∫ÜÊ°∂ÊéíÂ∫èÂíåÊèíÂÖ•ÊéíÂ∫èÁöÑ‰ºòÁÇπÔºåÈ¶ñÂÖà‰ΩøÁî®Ê°∂ÊéíÂ∫èÔºåÊéíÂ∫è‰πãÂêéÊØè‰∏™Ê°∂‰∏≠Êï∞ÊçÆÁõ∏ÂØπÊúâÂ∫èÔºåËøôÊ†∑ÂÜç‰ΩøÁî®ÊèíÂÖ•ÊéíÂ∫èÔºåÁÆÄÂåñ‰∫ÜÈóÆÈ¢òÔºåÈÄüÂ∫¶ÂèòÁöÑÊõ¥Âø´„ÄÇ Âª∫Ê°∂ËßÑÂàô:Â¶ÇÊûúÊ≤°ÊúâÊ°∂,Êñ∞Âª∫‰∏Ä‰∏™Ê°∂;Â¶ÇÊûú‰∏çÁ¨¶ÂêàÂÖ•Ê°∂ËßÑÂàôÈÇ£‰πàÊñ∞Âª∫‰∏Ä‰∏™Ê°∂„ÄÇ ÂÖ•Ê°∂ËßÑÂàô:Âè™Ë¶ÅÊØîÊ°∂ÈáåÊúÄ‰∏äËæπÁöÑÊï∞Â≠óÂ∞èÂç≥ÂèØÂÖ•Ê°∂,Â¶ÇÊûúÊúâÂ§ö‰∏™Ê°∂ÂèØÂÖ•,ÈÇ£‰πàÊåâÁÖß‰ªéÂ∑¶Âà∞Âè≥ÁöÑÈ°∫Â∫èÂÖ•Ê°∂Âç≥ÂèØ„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºöÂæÖÊéíÂ∫èÊï∞ÁªÑ[6 4 5 1 8 7 2 3] Á¨¨‰∏ÄÊ≠•ÔºöÂõ†‰∏∫Ê≠§ÂâçËøòÊ≤°ÊúâÊ°∂ÔºåÂàôÂª∫Á´ã‰∏Ä‰∏™Ê°∂ÔºåÊàë‰ª¨ÂëΩÂêç‰∏∫Ê°∂1,‰ªé‰∏äÈù¢ÂèñÂá∫Á¨¨‰∏Ä‰∏™Êï∞Â≠ó 6ÔºåÁÑ∂ÂêéÂ∞Ü6ÊîæÂÖ•Âà∞Ê°∂‰∏≠„ÄÇ Á¨¨‰∫åÊ≠•ÔºöÊàë‰ª¨‰ΩøÁî®Á¨¨‰∫å‰∏™ÂÄº4ÔºåÁÑ∂ÂêéÈÅçÂéÜÁé∞ÊúâÁöÑÊ°∂ÔºåÈÅçÂéÜÁöÑÂ∑•Á®ã‰∏≠ÂÖàÈÅáÂà∞Ê°∂1ÔºåÊàë‰ª¨ÂèëÁé∞Ê°∂1‰∏≠ÊúÄ‰∏äÈù¢ÁöÑÂÖÉÁ¥†ÊòØ6,4ÊØî6Â§ßÔºåÂàô6‰∏ãÊ≤âÔºåÊúâÊ°∂„Äê4,6„Äë„ÄÇ Á¨¨‰∏âÊ≠•ÔºöÊàë‰ª¨‰ΩøÁî®Á¨¨‰∏â‰∏™ÂÄº5ÔºåÁÑ∂ÂêéÈÅçÂéÜÁé∞ÊúâÁöÑÊ°∂ÔºåÂõ†‰∏∫Á¨¨‰∏Ä‰∏™Ê°∂Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØ4ÔºåÊØî5Â∞èÔºåÊâÄ‰ª•ÈáçÊñ∞ÂºÄ‰∏Ä‰∏™Ê°∂„Äê5„ÄëÔºå‰πãÂêéÂÖ±Êúâ‰∏§‰∏™Ê°∂„Äê4,5„Äë„Äê5„Äë„ÄÇ Á¨¨ÂõõÈÉ®ÔºöÊàë‰ª¨‰ΩøÁî®Á¨¨Âõõ‰∏™ÂÄº1ÔºåÁÑ∂ÂêéÈÅçÂéÜÁé∞ÊúâÁöÑÊ°∂ÔºåÂõ†‰∏∫Á¨¨‰∏Ä‰∏™Ê°∂Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØ4ÔºåÊØî1Â§ßÔºåÊâÄ‰ª•ÊîæÂà∞Ê°∂1„Äê4,6„ÄëÊúÄÂâçÈù¢Ôºå‰ªéËÄåÂΩ¢Êàê„Äê1,4,6„Äë„Äê5„Äë„ÄÇ Á¨¨‰∫îÊ≠•ÔºöÊàë‰ª¨‰ΩøÁî®Á¨¨‰∫î‰∏™ÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÈÅçÂéÜÁé∞ÊúâÁöÑÊ°∂ÔºåÁ¨¨‰∏Ä‰∏™Ê°∂Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØ1ÔºåÁ¨¨‰∫å‰∏™Ê°∂Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØ5ÔºåÈÉΩÊØî8Â∞èÔºåÊâÄ‰ª•ÈúÄË¶ÅÈáçÊñ∞ÂºÄ‰∏Ä‰∏™Ê°∂„Äê8„ÄëÔºåÊ≠§Êó∂ÂÖ±ÊúâÊ°∂„Äê1,4,6„Äë„Äê5„Äë„Äê8„Äë„ÄÇ Á¨¨ÂÖ≠Ê≠•Ôºö‰ΩøÁî®ÂêåÊ†∑ÁöÑÊñπÊ≥ïÔºå‰πãÂêéÊ°∂ÊòØ„Äê1,4,6„Äë„Äê5„Äë„Äê7Ôºå8„Äë„ÄÇ Á¨¨‰∏ÉÊ≠•Ôºö‰ΩøÁî®ÂêåÊ†∑ÁöÑÊñπÊ≥ïÔºå‰πãÂêéÊ°∂ÊòØ„Äê1,4,6„Äë„Äê2Ôºå5„Äë„Äê7Ôºå8„Äë„ÄÇ Á¨¨ÂÖ´Ê≠•Ôºö‰ΩøÁî®ÂêåÊ†∑ÁöÑÊñπÊ≥ïÔºå‰πãÂêéÊ°∂ÊòØ„Äê1,4,6„Äë„Äê2Ôºå5„Äë„Äê3Ôºå7Ôºå8„Äë„ÄÇ Ê≥®ÊÑèÔºöÈÅçÂéÜÁöÑÊï∞ÁªÑÔºåÂè™Ë∑üÂêÑ‰∏™Ê°∂ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÂÅöÊØîËæÉÔºåËøôÊ†∑‰øùËØÅÂêÑ‰∏™Ê°∂ÂÖÉÁ¥†ÊúâÂ∫è„ÄÇ ‰ª£Á†Å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;import java.util.ArrayList;import java.util.List;/** * @author: whb * @description: ËÄêÂøÉÊéíÂ∫è */public class PatienceSort &#123; public static int[] patienceSort(int[] unsorted) &#123; List new_list = new ArrayList(); for (int i = 0; i &lt; unsorted.length; i++) &#123; List bucket_list = new ArrayList(); if (i == 0) &#123; bucket_list.add(unsorted[i]); new_list.add(bucket_list); &#125; else &#123; boolean is_ok = false; for (int j = 0; j &lt; new_list.size(); j++) &#123; if (unsorted[i] &lt; (int) ((List) new_list.get(j)).get(0)) &#123; ((List) new_list.get(j)).add(0, unsorted[i]); is_ok = true; break; &#125; &#125; if (!is_ok) &#123; bucket_list.add(unsorted[i]); new_list.add(bucket_list); &#125; &#125; &#125; //Â§öÁª¥Êï∞ÁªÑÂèòÊàêÂçïÁª¥Êï∞ÁªÑ int[] ok_list = new int[unsorted.length]; int q = 0; for (int m = 0; m &lt; new_list.size(); m++) &#123; for (int n = 0; n &lt; ((List) new_list.get(m)).size(); n++) &#123; ok_list[q] = (int) ((List) new_list.get(m)).get(n); q++; &#125; &#125; //ÊèíÂÖ•Âæ™ÁéØ //Â∞ÜÊï∞ÁªÑÁöÑÈïøÂ∫¶ËµãÁªônÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢ÊØèÊ¨°forÂæ™ÁéØ‰∏≠Âà§Êñ≠Êó∂ÈÉΩË∞ÉÁî®lengthÊñπÊ≥ïÂΩ±ÂìçÊÄßËÉΩ int n = ok_list.length; //Áî®‰∫é‰∏≠ËΩ¨Êï∞ÊçÆ int tmp; int j; //ÊéíÂ∫èÁöÑÊ¨°Êï∞ for (int i = 1; i &lt; n; i++) &#123; tmp = ok_list[i]; //ÂèñiÂâçÈù¢ÁöÑÊâÄÊúâË∑üi‰ΩçÁΩÆÂÖÉÁ¥†ËøõË°åÊØîËæÉÔºåÂÖàÊØîËæÉi-1ÂíåiÔºåÂ¶ÇÊûúi-1Â§ß‰∫éiÔºåÂàô‰∫íÊç¢‰ΩçÁΩÆÔºåi-1Âíåi-2ÊØîËæÉÔºå‰ª•Ê≠§Á±ªÊé® for (j = i - 1; j &gt;= 0 &amp;&amp; ok_list[j] &gt; tmp; j--) &#123; ok_list[j + 1] = ok_list[j]; &#125; ok_list[j + 1] = tmp; &#125; return ok_list; &#125; public static void main(String[] args) &#123; int[] unsorted = &#123;6, 4, 5, 1, 8, 7, 2, 3&#125;; System.out.println("**************ËÄêÂøÉÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); System.out.println("ÊéíÂ∫èÂêéÔºö"); int[] sorted = patienceSort(unsorted); CommonUtils.display(sorted); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - ËÆ°Êï∞ÊéíÂ∫è]]></title>
    <url>%2Fposts%2F4531d6c3.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ ËÆ°Êï∞ÊéíÂ∫èÊòØ‰∏ÄÁßçÈùûÂü∫‰∫éÊØîËæÉÁöÑÊéíÂ∫èÁÆóÊ≥ïÔºåÂÖ∂Á©∫Èó¥Â§çÊùÇÂ∫¶ÂíåÊó∂Èó¥Â§çÊùÇÂ∫¶Âùá‰∏∫O(n+k)ÔºåÂÖ∂‰∏≠kÊòØÊï¥Êï∞ÁöÑËåÉÂõ¥„ÄÇÂü∫‰∫éÊØîËæÉÁöÑÊéíÂ∫èÁÆóÊ≥ïÊó∂Èó¥Â§çÊùÇÂ∫¶ÊúÄÂ∞èÊòØO(nlogn)ÁöÑ„ÄÇËØ•ÁÆóÊ≥ï‰∫é1954Âπ¥Áî± Harold H. Seward ÊèêÂá∫„ÄÇ ËÆ°Êï∞ÊéíÂ∫èÁöÑÊ†∏ÂøÉÂú®‰∫éÂ∞ÜËæìÂÖ•ÁöÑÊï∞ÊçÆÂÄºËΩ¨Âåñ‰∏∫ÈîÆÂ≠òÂÇ®Âú®È¢ùÂ§ñÂºÄËæüÁöÑÊï∞ÁªÑÁ©∫Èó¥‰∏≠„ÄÇ‰Ωú‰∏∫‰∏ÄÁßçÁ∫øÊÄßÊó∂Èó¥Â§çÊùÇÂ∫¶ÁöÑÊéíÂ∫èÔºåËÆ°Êï∞ÊéíÂ∫èË¶ÅÊ±ÇËæìÂÖ•ÁöÑÊï∞ÊçÆÂøÖÈ°ªÊòØÊúâÁ°ÆÂÆöËåÉÂõ¥ÁöÑÊï¥Êï∞„ÄÇ ÁÆóÊ≥ïÊ≠•È™§ Ëä±O(n)ÁöÑÊó∂Èó¥Êâ´Êèè‰∏Ä‰∏ãÊï¥‰∏™Â∫èÂàó AÔºåËé∑ÂèñÊúÄÂ∞èÂÄº min ÂíåÊúÄÂ§ßÂÄº max„ÄÇ ÂºÄËæü‰∏ÄÂùóÊñ∞ÁöÑÁ©∫Èó¥ÂàõÂª∫Êñ∞ÁöÑÊï∞ÁªÑ BÔºåÈïøÂ∫¶‰∏∫ ( max - min + 1)„ÄÇ Êï∞ÁªÑ B ‰∏≠ index ÁöÑÂÖÉÁ¥†ËÆ∞ÂΩïÁöÑÂÄºÊòØ A ‰∏≠ÊüêÂÖÉÁ¥†Âá∫Áé∞ÁöÑÊ¨°Êï∞„ÄÇ ÊúÄÂêéËæìÂá∫ÁõÆÊ†áÊï¥Êï∞Â∫èÂàóÔºåÂÖ∑‰ΩìÁöÑÈÄªËæëÊòØÈÅçÂéÜÊï∞ÁªÑ BÔºåËæìÂá∫Áõ∏Â∫îÂÖÉÁ¥†‰ª•ÂèäÂØπÂ∫îÁöÑ‰∏™Êï∞„ÄÇ ÁÆóÊ≥ïÊºîÁ§∫ ÁÆóÊ≥ïÊºîÁ§∫ËØ¥Êòé È¶ñÂÖàÔºåÊâ´Êèè‰∏Ä‰∏ãÊï¥‰∏™Â∫èÂàó„ÄÇ Ëé∑ÂæóÊúÄÂ∞èÂÄº‰∏∫ 2 ÔºåÊúÄÂ§ßÂÄº‰∏∫ 7„ÄÇ Êñ∞Âª∫Êï∞ÁªÑÂåÖÂê´ 2~7 ÁöÑÂÖÉÁ¥†„ÄÇ ÂÜçÊ¨°Êâ´ÊèèÂ∫èÂàóÔºåÂ∞ÜÂ∫èÂàóÁöÑÂÄºÊîæÁΩÆÂú®Êñ∞Âª∫Êï∞ÁªÑ‰∏≠„ÄÇ Êâ´ÊèèÊï∞Â≠ó 5ÔºåÊï∞ÁªÑ‰∏≠ index ‰∏∫ 3 ÁöÑÂÄº‰∏∫ 5ÔºåÊ¨°Êï∞‰∏∫ 1„ÄÇ Êâ´ÊèèÊï∞Â≠ó 3ÔºåÊï∞ÁªÑ‰∏≠ index ‰∏∫ 1 ÁöÑÂÄº‰∏∫ 3ÔºåÊ¨°Êï∞‰∏∫ 1„ÄÇ Êâ´ÊèèÊï∞Â≠ó 4ÔºåÊï∞ÁªÑ‰∏≠ index ‰∏∫ 2 ÁöÑÂÄº‰∏∫ 4ÔºåÊ¨°Êï∞‰∏∫ 1„ÄÇ Êâ´ÊèèÊï∞Â≠ó 7ÔºåÊï∞ÁªÑ‰∏≠ index ‰∏∫ 5 ÁöÑÂÄº‰∏∫ 7ÔºåÊ¨°Êï∞‰∏∫ 1„ÄÇ Êâ´ÊèèÊï∞Â≠ó 2ÔºåÊï∞ÁªÑ‰∏≠ index ‰∏∫ 0 ÁöÑÂÄº‰∏∫ 2ÔºåÊ¨°Êï∞‰∏∫ 1„ÄÇ Êâ´ÊèèÊï∞Â≠ó 4ÔºåÊï∞ÁªÑ‰∏≠ index ‰∏∫ 2 ÁöÑÂÄº‰∏∫ 4ÔºåÊ¨°Êï∞‰∏∫ 2„ÄÇ Êâ´ÊèèÊï∞Â≠ó 3ÔºåÊï∞ÁªÑ‰∏≠ index ‰∏∫ 1 ÁöÑÂÄº‰∏∫ 3ÔºåÊ¨°Êï∞‰∏∫ 2„ÄÇ ÊåâÁÖßËøôÁßçËäÇÂ•èÔºåÊâ´ÊèèÁªìÊùüÂêéÔºåÊñ∞Âª∫Êï∞ÁªÑ‰∏≠Â≠òÊîæ‰∫ÜÊï¥‰∏™Â∫èÂàó‰ª•ÂèäÊØè‰∏™Êï∞Â≠óÂá∫Áé∞ÁöÑÊ¨°Êï∞„ÄÇ ÊúÄÂêéËæìÂá∫ÁõÆÊ†áÊï¥Êï∞Â∫èÂàó„ÄÇ ËæìÂá∫Êï∞Â≠ó 2ÔºåÂêåÊó∂Êï∞ÁªÑ‰∏≠ index ‰∏∫ 0 ÁöÑÂÄº‰∏∫ 2 ÁöÑÂÖÉÁ¥†Ê¨°Êï∞Âèò‰∏∫ 0„ÄÇ ËæìÂá∫Êï∞Â≠ó 3ÔºåÂêåÊó∂Êï∞ÁªÑ‰∏≠ index ‰∏∫ 1 ÁöÑÂÄº‰∏∫ 3 ÁöÑÂÖÉÁ¥†Ê¨°Êï∞Âèò‰∏∫ 1„ÄÇ ÂêåÊ†∑ÁöÑÊìç‰ΩúÔºåÊï¥‰∏™Â∫èÂàóÂ∞±ÂÆåÂÖ®ËæìÂá∫‰∫Ü„ÄÇ ‰ª£Á†Å 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;import java.util.Arrays;/** * @author: whb * @description: ËÆ°Êï∞ÊéíÂ∫è */public class CountingSort &#123; public static int[] countingSort(int[] unsorted) &#123; //ÂºÄÂßãÂ£∞ÊòéÊ°∂,ÊâæÂà∞Êï∞ÁªÑÁöÑÊúÄÂ∞èÂÄºÂíåÊúÄÂ§ßÂÄº int minNum = unsorted[0]; int maxNum = unsorted[0]; for (int i = 0; i &lt; unsorted.length; i++) &#123; if (unsorted[i] &lt; minNum) &#123; minNum = unsorted[i]; &#125; if (unsorted[i] &gt; maxNum) &#123; maxNum = unsorted[i]; &#125; &#125; System.out.println("ÊúÄÂ∞èÊï∞Â≠ó‰∏∫:" + minNum); System.out.println("ÊúÄÂ§ßÊï∞Â≠ó‰Ωç:" + maxNum); //ÊâæÂà∞ÊúÄÂ§ßÊúÄÂ∞èÂÄºÁöÑ‰πãÂêé,Â∞±ÂºÄÂßãÂ£∞ÊòéÊúâÂ∫èÊ°∂,Ê°∂ÁöÑÂàùÂßã‰Ωç‰ª£Ë°®ÁöÑÂÄº‰∏∫minNumÊúÄÂ§ßÂÄº‰∏∫maxNum //Êï∞ÁªÑÁöÑÈïøÂ∫¶‰∏∫(maxNum-minNum+1) int[] bucket = new int[(maxNum - minNum + 1)]; //Â£∞Êòé‰∫ÜÊúâÂ∫èÊ°∂‰πãÂêé,ÂºÄÂßãÂØπÊï∞Â≠óËøõË°åÊîæÊ°∂Êìç‰Ωú for (int j = 0; j &lt; unsorted.length; j++) &#123; //Âõ†‰∏∫ÊòØÊâæÂà∞‰∫ÜÂæÖÊéíÂ∫èÊï∞ÁªÑÁöÑÊúÄÂ∞èÂÄºminNum,ÊâÄ‰ª•,‰∏éÊï∞ÁªÑÊï∞ÁªÑÊØîËæÉÁöÑÂÄºÂ∫î‰∏∫(j+minNum) //Â¶ÇÊûúÈÅçÂéÜÁöÑÂÄºÂ§ßÂ∞è‰∏éÊï∞ÁªÑ‰ª£Ë°®ÁöÑÊï∞Â≠óÂ§ßÂ∞èÁõ∏Á≠â,ÂàôÊîæÂÖ• //jÊ¨°Âæ™ÁéØÂæóÂà∞ÁöÑÊï∞Â≠óÊòØtempArray[j],ÂàôÂ≠òÂÇ®Âà∞‰∏ãÊ†á‰∏∫tempArray[j]+minNumÁöÑÊ°∂‰∏≠ bucket[unsorted[j] - minNum] = bucket[unsorted[j] - minNum] + 1; &#125; //Â∞ÜÂæóÂà∞ÁöÑÊ°∂ÊéíÂ∫èÁªìÊûúËøõË°åËæìÂá∫,ËæìÂá∫ÁöÑÊòØÊ°∂ÊéíÂ∫èÁöÑÊï∞ÁªÑÁöÑ‰∏ãÊ†á //ÂèØ‰ª•Â£∞ÊòéÊñ∞Êï∞ÁªÑÂØπËØ•Â∫èÂàóËøõË°åÂ≠òÂÇ® int[] sorted = new int[unsorted.length]; int count = 0; for (int k = 0; k &lt; bucket.length; k++) &#123; if (bucket[k] != 0) &#123; //Ê°∂ÈáåË£ÖÁöÑÂÄºÂèØËÉΩ‰∏çÊòØ1,ÊâÄ‰ª•,Âú®‰∏çÁ≠â‰∫é‰∏ÄÁöÑÊó∂ÂÄô,ÂØπÊ°∂ÈáåÈù¢ÁöÑÊï∞Â≠óËøõË°åÈÅçÂéÜÂ≠òÂÇ® if (bucket[k] != 1) &#123; for (int z = 0; z &lt; bucket[k]; z++) &#123; sorted[count] = k + minNum; count++; &#125; &#125; else &#123; sorted[count] = k + minNum; count++; &#125; &#125; &#125; return sorted; &#125; public static void main(String[] args) &#123; //‰∫ßÁîüÈöèÊú∫ÂæÖÊéíÂ∫èÂàó int[] unsorted = new int[(int) (Math.random() * 11) + 5]; for (int i = 0; i &lt; unsorted.length; i++) &#123; unsorted[i] = (int) (Math.random() * 100); &#125; System.out.println("**************ËÆ°Êï∞ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); System.out.println("ÊéíÂ∫èÂêéÔºö"); int[] sorted = countingSort(unsorted); CommonUtils.display(sorted); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - È∏ΩÂ∑¢ÊéíÂ∫è]]></title>
    <url>%2Fposts%2Fd7da214b.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ È∏ΩÂ∑¢ÊéíÂ∫èÊòØÊ°∂ÊéíÂ∫èÁöÑ‰∏ÄÁßçÔºåÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØ‰∏ÄÊéíÈ∏ΩÂ∑¢ÔºåÁúãÈáåÈù¢ÊúâÂá†‰∏™È∏ΩÂ∑¢ÔºåÁÑ∂ÂêéÈÅçÂéÜËøô‰∫õÈ∏ΩÂ∑¢ÔºåÊâìÂç∞Âá∫Êù•Â∞±Â•ΩÔºåÊéíÂ∫è‰πãÂâçÂæóÂÖàÁü•ÈÅìÂå∫Èó¥ÂíåÊúÄÂ§ßÂÄº„ÄÇ ÊØîÂ¶ÇÊúâÊï∞ÁªÑa = [2,7,5,9,8,8]ÔºåÊàë‰ª¨ÈúÄË¶ÅÂØπËøô‰∏™Êï∞ÁªÑËøõË°åÊéíÂ∫èÔºåËøôÊòØ‰∏Ä‰∏™ÊúÄÂ§ßÂÄº‰∏çË∂ÖËøá10ÁöÑÊï∞ÁªÑÔºåÈÇ£‰πàÊàë‰ª¨ÂÆöÂå∫Èó¥‰∏∫0-10ÔºåÂÆö‰πâ‰∏Ä‰∏™‰∏ãÊ†á0-10ËøôÊ†∑‰∏Ä‰∏™11‰ΩçÊï∞ÁªÑb,ÂàùÂßãÂåñÂÄº‰∏∫0„ÄÇÁÑ∂ÂêéÈÅçÂéÜÂ∑≤Áü•Êï∞ÁªÑaÔºåÈÄöËøáaÁöÑ‰∏ÄÈ°π‰∏ÄÈ°πÁöÑÂÄºÂíåÊàë‰ª¨ÂÆö‰πâÁöÑÊï∞ÁªÑbÁöÑ‰∏ãÊ†áËøõË°åÂØπÂ∫î„ÄÇ ÈÅçÂéÜÂºÄÂßãÔºö Âèña[0]=2ÔºåÁÑ∂ÂêéÊìç‰Ωúb[2]=1 Âèña[1]=7ÔºåÁÑ∂ÂêéÊìç‰Ωúb[7]=1 Âèña[2]=5ÔºåÁÑ∂ÂêéÊìç‰Ωúb[5]=1 Âèña[3]=9ÔºåÁÑ∂ÂêéÊìç‰Ωúb[9]=1 Âèña[4]=8ÔºåÁÑ∂ÂêéÊìç‰Ωúb[8]=1 Âèña[5]=8ÔºåÁÑ∂ÂêéÊìç‰Ωúb[8]=2ÔºàÊ≥®ÊÑè‰∫ÜÂì¶Ôºâ ËøôÊ†∑Â∞±ÂØπÂè∑ÂÖ•Â∫ß‰∫ÜÔºå‰πãÂêéÈÅçÂéÜbÔºåÂ¶ÇÊûúb‰∏≠Êüê‰∏™Â∞èÊ†áÂØπÂ∫îÁöÑÂÄºÊòØÂ§ö‰∏™ÔºåÂàôÈÅçÂéÜÂ§öÊ¨°ÔºåÊää‰∏çÊòØ0ÁöÑÁªôÊâìÂç∞Âá∫Êù•ÔºåÁªìÊûúÂ∞±ÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑ‰∫Ü ‰ª£Á†Å 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: È∏ΩÂ∑¢ÊéíÂ∫è * ÂéüÁêÜÁ±ª‰ººÊ°∂ÊéíÂ∫è,ÂêåÊ†∑ÈúÄË¶Å‰∏Ä‰∏™ÂæàÂ§ßÁöÑÈ∏ΩÂ∑¢[Ê°∂ÊéíÂ∫èÈáåÁÆ°Ëøô‰∏™Âè´Ê°∂,ÂêçÂ≠óÊó†ÊâÄË∞ì] * È∏ΩÂ∑¢ÂÖ∂ÂÆûÂ∞±ÊòØÊï∞ÁªÑ,Êï∞ÁªÑÁöÑÁ¥¢Âºï‰ΩçÁΩÆÂ∞±Ë°®Á§∫ÂÄº,ËØ•Á¥¢Âºï‰ΩçÁΩÆÁöÑÂÄºË°®Á§∫Âá∫Áé∞Ê¨°Êï∞,Â¶ÇÊûúÂÖ®ÈÉ®‰∏∫1Ê¨°Êàñ0Ê¨°ÈÇ£Â∞±ÊòØÊ°∂ÊéíÂ∫è * ‰æãÂ¶Ç * int[] pigeonHole = new int[100]; * pigeonHole[0]ÁöÑÂÄºË°®Á§∫0ÁöÑÂá∫Áé∞Ê¨°Êï∞... * pigeonHole[1]ÁöÑÂÄºË°®Á§∫1ÁöÑÂá∫Áé∞Ê¨°Êï∞... * pigeonHole[2]ÁöÑÂÄºË°®Á§∫2ÁöÑÂá∫Áé∞Ê¨°Êï∞... */public class PigeonholeSort &#123; /** * È∏ΩÂ∑¢ÊéíÂ∫è * * @param unsorted ÂæÖÊéíÂ∫èÂàó * @param maxNumber ÊúÄÂ§ßÊï∞ * @return */ public static int[] pigeonholeSort(int[] unsorted, int maxNumber) &#123; int[] pogeonHole = new int[maxNumber + 1]; for (int item : unsorted) &#123; pogeonHole[item]++; &#125; return pogeonHole; &#125; public static void main(String[] args) &#123; int[] unsorted = &#123;99, 65, 24, 47, 47, 50, 99, 88, 66, 33, 66, 67, 31, 18, 24&#125;; System.out.println("**************È∏ΩÂ∑¢ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); int[] sorted = pigeonholeSort(unsorted, 99); System.out.println("ÊéíÂ∫èÂêéÔºö"); for (int i = 0; i &lt; sorted.length; i++) &#123; for (int j = 0; j &lt; sorted[i]; j++) &#123; System.out.print(i + " "); &#125; &#125; &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Âü∫Êï∞ÊéíÂ∫è]]></title>
    <url>%2Fposts%2Fed3439ee.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ Âü∫Êï∞ÊéíÂ∫èËøáÁ®ãÊó†È°ªÊØîËæÉÂÖ≥ÈîÆÂ≠óÔºåËÄåÊòØÈÄöËøá‚ÄúÂàÜÈÖç‚ÄùÂíå‚ÄúÊî∂ÈõÜ‚ÄùËøáÁ®ãÊù•ÂÆûÁé∞ÊéíÂ∫è„ÄÇÂÆÉ‰ª¨ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÂèØËææÂà∞Á∫øÊÄßÈò∂ÔºöO(n)„ÄÇ ÂÆû‰æã ÊâëÂÖãÁâå‰∏≠52Âº†ÁâåÔºåÂèØÊåâËä±Ëâ≤ÂíåÈù¢ÂÄºÂàÜÊàê‰∏§‰∏™Â≠óÊÆµÔºåÂÖ∂Â§ßÂ∞èÂÖ≥Á≥ª‰∏∫Ôºö Ëä±Ëâ≤Ôºö Ê¢ÖËä±&lt; ÊñπÂùó&lt; Á∫¢ÂøÉ&lt; ÈªëÂøÉ Èù¢ÂÄºÔºö 2 &lt; 3 &lt; 4 &lt; 5 &lt; 6 &lt; 7 &lt; 8 &lt; 9 &lt; 10 &lt; J &lt; Q &lt; K &lt; A Ëã•ÂØπÊâëÂÖãÁâåÊåâËä±Ëâ≤„ÄÅÈù¢ÂÄºËøõË°åÂçáÂ∫èÊéíÂ∫èÔºåÂæóÂà∞Â¶Ç‰∏ãÂ∫èÂàóÔºö Âç≥‰∏§Âº†ÁâåÔºåËã•Ëä±Ëâ≤‰∏çÂêåÔºå‰∏çËÆ∫Èù¢ÂÄºÊÄéÊ†∑ÔºåËä±Ëâ≤‰ΩéÁöÑÈÇ£Âº†ÁâåÂ∞è‰∫éËä±Ëâ≤È´òÁöÑÔºåÂè™ÊúâÂú®ÂêåËä±Ëâ≤ÊÉÖÂÜµ‰∏ãÔºåÂ§ßÂ∞èÂÖ≥Á≥ªÊâçÁî±Èù¢ÂÄºÁöÑÂ§ßÂ∞èÁ°ÆÂÆö„ÄÇËøôÂ∞±ÊòØÂ§öÂÖ≥ÈîÆÁ†ÅÊéíÂ∫è„ÄÇ ‰∏∫ÂæóÂà∞ÊéíÂ∫èÁªìÊûúÔºåÊàë‰ª¨ËÆ®ËÆ∫‰∏§ÁßçÊéíÂ∫èÊñπÊ≥ï„ÄÇ ÊñπÊ≥ï1ÔºöÂÖàÂØπËä±Ëâ≤ÊéíÂ∫èÔºåÂ∞ÜÂÖ∂ÂàÜ‰∏∫4 ‰∏™ÁªÑÔºåÂç≥Ê¢ÖËä±ÁªÑ„ÄÅÊñπÂùóÁªÑ„ÄÅÁ∫¢ÂøÉÁªÑ„ÄÅÈªëÂøÉÁªÑ„ÄÇÂÜçÂØπÊØè‰∏™ÁªÑÂàÜÂà´ÊåâÈù¢ÂÄºËøõË°åÊéíÂ∫èÔºåÊúÄÂêéÔºåÂ∞Ü4 ‰∏™ÁªÑËøûÊé•Ëµ∑Êù•Âç≥ÂèØ„ÄÇ ÊñπÊ≥ï2ÔºöÂÖàÊåâ13 ‰∏™Èù¢ÂÄºÁªôÂá∫13 ‰∏™ÁºñÂè∑ÁªÑ(2 Âè∑Ôºå3 Âè∑Ôºå...ÔºåA Âè∑)ÔºåÂ∞ÜÁâåÊåâÈù¢ÂÄº‰æùÊ¨°ÊîæÂÖ•ÂØπÂ∫îÁöÑÁºñÂè∑ÁªÑÔºåÂàÜÊàê13 Â†Ü„ÄÇÂÜçÊåâËä±Ëâ≤ÁªôÂá∫4 ‰∏™ÁºñÂè∑ÁªÑ(Ê¢ÖËä±„ÄÅÊñπÂùó„ÄÅÁ∫¢ÂøÉ„ÄÅÈªëÂøÉ)ÔºåÂ∞Ü2Âè∑ÁªÑ‰∏≠ÁâåÂèñÂá∫ÂàÜÂà´ÊîæÂÖ•ÂØπÂ∫îËä±Ëâ≤ÁªÑÔºåÂÜçÂ∞Ü3 Âè∑ÁªÑ‰∏≠ÁâåÂèñÂá∫ÂàÜÂà´ÊîæÂÖ•ÂØπÂ∫îËä±Ëâ≤ÁªÑÔºå‚Ä¶‚Ä¶ÔºåËøôÊ†∑Ôºå4 ‰∏™Ëä±Ëâ≤ÁªÑ‰∏≠ÂùáÊåâÈù¢ÂÄºÊúâÂ∫èÔºåÁÑ∂ÂêéÔºåÂ∞Ü4 ‰∏™Ëä±Ëâ≤ÁªÑ‰æùÊ¨°ËøûÊé•Ëµ∑Êù•Âç≥ÂèØ„ÄÇ ËÆæn ‰∏™ÂÖÉÁ¥†ÁöÑÂæÖÊéíÂ∫èÂàóÂåÖÂê´d ‰∏™ÂÖ≥ÈîÆÁ†Å{k1Ôºåk2Ôºå‚Ä¶Ôºåkd}ÔºåÂàôÁß∞Â∫èÂàóÂØπÂÖ≥ÈîÆÁ†Å{k1Ôºåk2Ôºå‚Ä¶Ôºåkd}ÊúâÂ∫èÊòØÊåáÔºöÂØπ‰∫éÂ∫èÂàó‰∏≠‰ªª‰∏§‰∏™ËÆ∞ÂΩïr[i]ÂíårjÈÉΩÊª°Ë∂≥‰∏ãÂàóÊúâÂ∫èÂÖ≥Á≥ªÔºö ÂÖ∂‰∏≠k1 Áß∞‰∏∫ÊúÄ‰∏ª‰ΩçÂÖ≥ÈîÆÁ†ÅÔºåkd Áß∞‰∏∫ÊúÄÊ¨°‰ΩçÂÖ≥ÈîÆÁ†Å„ÄÇ ‰∏§ÁßçÂ§öÂÖ≥ÈîÆÁ†ÅÊéíÂ∫èÊñπÊ≥ï Â§öÂÖ≥ÈîÆÁ†ÅÊéíÂ∫èÊåâÁÖß‰ªéÊúÄ‰∏ª‰ΩçÂÖ≥ÈîÆÁ†ÅÂà∞ÊúÄÊ¨°‰ΩçÂÖ≥ÈîÆÁ†ÅÊàñ‰ªéÊúÄÊ¨°‰ΩçÂà∞ÊúÄ‰∏ª‰ΩçÂÖ≥ÈîÆÁ†ÅÁöÑÈ°∫Â∫èÈÄêÊ¨°ÊéíÂ∫èÔºåÂàÜ‰∏§ÁßçÊñπÊ≥ïÔºö ÊúÄÈ´ò‰Ωç‰ºòÂÖà(Most Significant Digit first)Ê≥ïÔºåÁÆÄÁß∞MSD Ê≥ïÔºö 1ÔºâÂÖàÊåâk1 ÊéíÂ∫èÂàÜÁªÑÔºåÂ∞ÜÂ∫èÂàóÂàÜÊàêËã•Âπ≤Â≠êÂ∫èÂàóÔºåÂêå‰∏ÄÁªÑÂ∫èÂàóÁöÑËÆ∞ÂΩï‰∏≠ÔºåÂÖ≥ÈîÆÁ†Åk1 Áõ∏Á≠â„ÄÇ 2ÔºâÂÜçÂØπÂêÑÁªÑÊåâk2 ÊéíÂ∫èÂàÜÊàêÂ≠êÁªÑÔºå‰πãÂêéÔºåÂØπÂêéÈù¢ÁöÑÂÖ≥ÈîÆÁ†ÅÁªßÁª≠ËøôÊ†∑ÁöÑÊéíÂ∫èÂàÜÁªÑÔºåÁõ¥Âà∞ÊåâÊúÄÊ¨°‰ΩçÂÖ≥ÈîÆÁ†Åkd ÂØπÂêÑÂ≠êÁªÑÊéíÂ∫èÂêé„ÄÇ 3ÔºâÂÜçÂ∞ÜÂêÑÁªÑËøûÊé•Ëµ∑Êù•Ôºå‰æøÂæóÂà∞‰∏Ä‰∏™ÊúâÂ∫èÂ∫èÂàó„ÄÇÊâëÂÖãÁâåÊåâËä±Ëâ≤„ÄÅÈù¢ÂÄºÊéíÂ∫è‰∏≠‰ªãÁªçÁöÑÊñπÊ≥ï‰∏ÄÂç≥ÊòØMSD Ê≥ï„ÄÇ ÊúÄ‰Ωé‰Ωç‰ºòÂÖà(Least Significant Digit first)Ê≥ïÔºåÁÆÄÁß∞LSD Ê≥ïÔºö ÂÖà‰ªékd ÂºÄÂßãÊéíÂ∫èÔºåÂÜçÂØπkd-1ËøõË°åÊéíÂ∫èÔºå‰æùÊ¨°ÈáçÂ§çÔºåÁõ¥Âà∞Êåâk1ÊéíÂ∫èÂàÜÁªÑÂàÜÊàêÊúÄÂ∞èÁöÑÂ≠êÂ∫èÂàóÂêé„ÄÇ ÊúÄÂêéÂ∞ÜÂêÑ‰∏™Â≠êÂ∫èÂàóËøûÊé•Ëµ∑Êù•Ôºå‰æøÂèØÂæóÂà∞‰∏Ä‰∏™ÊúâÂ∫èÁöÑÂ∫èÂàó, ÊâëÂÖãÁâåÊåâËä±Ëâ≤„ÄÅÈù¢ÂÄºÊéíÂ∫è‰∏≠‰ªãÁªçÁöÑÊñπÊ≥ï‰∫åÂç≥ÊòØLSD Ê≥ï„ÄÇ Âü∫‰∫éLSDÊñπÊ≥ïÁöÑÈìæÂºèÂü∫Êï∞ÊéíÂ∫èÁöÑÂü∫Êú¨ÊÄùÊÉ≥ ‚ÄúÂ§öÂÖ≥ÈîÆÂ≠óÊéíÂ∫è‚ÄùÁöÑÊÄùÊÉ≥ÂÆûÁé∞‚ÄúÂçïÂÖ≥ÈîÆÂ≠óÊéíÂ∫è‚Äù„ÄÇÂØπÊï∞Â≠óÂûãÊàñÂ≠óÁ¨¶ÂûãÁöÑÂçïÂÖ≥ÈîÆÂ≠óÔºåÂèØ‰ª•Áúã‰ΩúÁî±Â§ö‰∏™Êï∞‰ΩçÊàñÂ§ö‰∏™Â≠óÁ¨¶ÊûÑÊàêÁöÑÂ§öÂÖ≥ÈîÆÂ≠óÔºåÊ≠§Êó∂ÂèØ‰ª•ÈááÁî®‚ÄúÂàÜÈÖç-Êî∂ÈõÜ‚ÄùÁöÑÊñπÊ≥ïËøõË°åÊéíÂ∫èÔºåËøô‰∏ÄËøáÁ®ãÁß∞‰ΩúÂü∫Êï∞ÊéíÂ∫èÊ≥ïÔºåÂÖ∂‰∏≠ÊØè‰∏™Êï∞Â≠óÊàñÂ≠óÁ¨¶ÂèØËÉΩÁöÑÂèñÂÄº‰∏™Êï∞Áß∞‰∏∫Âü∫Êï∞„ÄÇÊØîÂ¶ÇÔºåÊâëÂÖãÁâåÁöÑËä±Ëâ≤Âü∫Êï∞‰∏∫4ÔºåÈù¢ÂÄºÂü∫Êï∞‰∏∫13„ÄÇÂú®Êï¥ÁêÜÊâëÂÖãÁâåÊó∂ÔºåÊó¢ÂèØ‰ª•ÂÖàÊåâËä±Ëâ≤Êï¥ÁêÜÔºå‰πüÂèØ‰ª•ÂÖàÊåâÈù¢ÂÄºÊï¥ÁêÜ„ÄÇÊåâËä±Ëâ≤Êï¥ÁêÜÊó∂ÔºåÂÖàÊåâÁ∫¢„ÄÅÈªë„ÄÅÊñπ„ÄÅËä±ÁöÑÈ°∫Â∫èÂàÜÊàê4ÊëûÔºàÂàÜÈÖçÔºâÔºåÂÜçÊåâÊ≠§È°∫Â∫èÂÜçÂè†ÊîæÂú®‰∏ÄËµ∑ÔºàÊî∂ÈõÜÔºâÔºåÁÑ∂ÂêéÊåâÈù¢ÂÄºÁöÑÈ°∫Â∫èÂàÜÊàê13ÊëûÔºàÂàÜÈÖçÔºâÔºåÂÜçÊåâÊ≠§È°∫Â∫èÂè†ÊîæÂú®‰∏ÄËµ∑ÔºàÊî∂ÈõÜÔºâÔºåÂ¶ÇÊ≠§ËøõË°å‰∫åÊ¨°ÂàÜÈÖçÂíåÊî∂ÈõÜÂç≥ÂèØÂ∞ÜÊâëÂÖãÁâåÊéíÂàóÊúâÂ∫è„ÄÇ Âü∫Êï∞ÊéíÂ∫è: ÊòØÊåâÁÖß‰Ωé‰ΩçÂÖàÊéíÂ∫èÔºåÁÑ∂ÂêéÊî∂ÈõÜÔºõÂÜçÊåâÁÖßÈ´ò‰ΩçÊéíÂ∫èÔºåÁÑ∂ÂêéÂÜçÊî∂ÈõÜÔºõ‰æùÊ¨°Á±ªÊé®ÔºåÁõ¥Âà∞ÊúÄÈ´ò‰Ωç„ÄÇÊúâÊó∂ÂÄôÊúâ‰∫õÂ±ûÊÄßÊòØÊúâ‰ºòÂÖàÁ∫ßÈ°∫Â∫èÁöÑÔºåÂÖàÊåâ‰Ωé‰ºòÂÖàÁ∫ßÊéíÂ∫èÔºåÂÜçÊåâÈ´ò‰ºòÂÖàÁ∫ßÊéíÂ∫è„ÄÇÊúÄÂêéÁöÑÊ¨°Â∫èÂ∞±ÊòØÈ´ò‰ºòÂÖàÁ∫ßÈ´òÁöÑÂú®ÂâçÔºåÈ´ò‰ºòÂÖàÁ∫ßÁõ∏ÂêåÁöÑ‰Ωé‰ºòÂÖàÁ∫ßÈ´òÁöÑÂú®Ââç„ÄÇÂü∫Êï∞ÊéíÂ∫èÂü∫‰∫éÂàÜÂà´ÊéíÂ∫èÔºåÂàÜÂà´Êî∂ÈõÜÔºåÊâÄ‰ª•ÊòØÁ®≥ÂÆöÁöÑ„ÄÇ ‰ª£Á†Å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: Âü∫Êï∞ÊéíÂ∫èÔºöËøáÁ®ãÊó†È°ªÊØîËæÉÂÖ≥ÈîÆÂ≠óÔºåËÄåÊòØÈÄöËøá‚ÄúÂàÜÈÖç‚ÄùÂíå‚ÄúÊî∂ÈõÜ‚ÄùËøáÁ®ãÊù•ÂÆûÁé∞ÊéíÂ∫è„ÄÇ * Âπ≥ÂùáO(d(n+r)),ÊúÄÂ•ΩO(d(n+r)),ÊúÄÂùèO(d(n+r));Á©∫Èó¥Â§çÊùÇÂ∫¶O(n+r);Á®≥ÂÆö;ËæÉÂ§çÊùÇ * d‰∏∫‰ΩçÊï∞,r‰∏∫ÂàÜÈÖçÂêéÈìæË°®ÁöÑ‰∏™Êï∞ */public class RadixSort &#123; /** * Âü∫Êï∞ÊéíÂ∫è * * @param unsorted ÂæÖÊéíÊï∞ÁªÑ * @param max ÊúÄÂ§ßÂá†‰ΩçÊï∞ */ public static void radixSort(int[] unsorted, int max) &#123; //countÊï∞ÁªÑÁî®Êù•ËÆ°Êï∞ int[] count = new int[unsorted.length]; //bucketÁî®Êù•ÂΩìÊ°∂ÔºåÊîæÊï∞ÊçÆÔºåÂèñÊï∞ÊçÆ int[] bucket = new int[unsorted.length]; //kË°®Á§∫Á¨¨Âá†‰ΩçÔºå1‰ª£Ë°®‰∏™‰ΩçÔºå2‰ª£Ë°®ÂçÅ‰ΩçÔºå3‰ª£Ë°®Áôæ‰Ωç for (int k = 1; k &lt;= max; k++) &#123; //ÊääcountÁΩÆÁ©∫ÔºåÈò≤Ê≠¢‰∏äÊ¨°Âæ™ÁéØÁöÑÊï∞ÊçÆÂΩ±Âìç for (int i = 0; i &lt; unsorted.length; i++) &#123; count[i] = 0; &#125; //ÂàÜÂà´ÁªüËÆ°Á¨¨k‰ΩçÊòØ0,1,2,3,4,5,6,7,8,9ÁöÑÊï∞Èáè //‰ª•‰∏ã‰æøÁß∞‰∏∫Ê°∂ //Âç≥Ê≠§Âæ™ÁéØÁî®Êù•ÁªüËÆ°ÊØè‰∏™Ê°∂‰∏≠ÁöÑÊï∞ÊçÆÁöÑÊï∞Èáè for (int i = 0; i &lt; unsorted.length; i++) &#123; count[getFigure(unsorted[i], k)]++; &#125; //Âà©Áî®count[i]Êù•Á°ÆÂÆöÊîæÁΩÆÊï∞ÊçÆÁöÑ‰ΩçÁΩÆ for (int i = 1; i &lt; unsorted.length; i++) &#123; count[i] = count[i] + count[i - 1]; &#125; //ÊâßË°åÂÆåÊ≠§Âæ™ÁéØ‰πãÂêéÁöÑcount[i]Â∞±ÊòØÁ¨¨i‰∏™Ê°∂Âè≥ËæπÁïåÁöÑ‰ΩçÁΩÆ //Âà©Áî®Âæ™ÁéØÊääÊï∞ÊçÆË£ÖÂÖ•ÂêÑ‰∏™Ê°∂‰∏≠ÔºåÊ≥®ÊÑèÊòØ‰ªéÂêéÂæÄÂâçË£Ö for (int i = unsorted.length - 1; i &gt;= 0; i--) &#123; int j = getFigure(unsorted[i], k); bucket[count[j] - 1] = unsorted[i]; count[j]--; &#125; //Â∞ÜÊ°∂‰∏≠ÁöÑÊï∞ÊçÆÂèñÂá∫Êù•ÔºåËµãÂÄºÁªôunsorted for (int i = 0, j = 0; i &lt; unsorted.length; i++, j++) &#123; unsorted[i] = bucket[j]; &#125; &#125; &#125; /** * ËøîÂõûÊï¥ÂûãÊï∞numÁöÑÁ¨¨pos‰ΩçÊòØ‰ªÄ‰πà * * @param num Êï¥Êï∞num * @param pos pos=1Ë°®Á§∫‰∏™‰ΩçÔºåpos=2Ë°®Á§∫ÂçÅ‰Ωç * @return */ public static int getFigure(int num, int pos) &#123; int tmp = 1; for (int i = 0; i &lt; pos - 1; i++) &#123; tmp *= 10; &#125; return (num / tmp) % 10; &#125; /** * ‰∫åÁª¥Êï∞ÁªÑÁöÑÊñπÂºèÂÆûÁé∞Âü∫Êï∞ÊéíÂ∫è * * @param unsorted ÂæÖÊéíÂ∫èÂàó * @param arr_x ÊúÄÂ§ßÊï∞Â≠ó‰∏çË∂ÖËøá999999999...(array_x‰∏™9) * @param arr_y ÊúÄÂ§ß‰ΩçÊï∞ */ public static void radix_sort(int[] unsorted, int arr_x, int arr_y) &#123; for (int i = 0; i &lt; arr_x; i++) &#123; int[][] bucket = new int[arr_x][arr_y]; //ÂàÜÈÖç for (int item : unsorted) &#123; int temp = (item / (int) Math.pow(10, i)) % 10; for (int j = 0; j &lt; arr_y; j++) &#123; if (bucket[temp][j] == 0) &#123; bucket[temp][j] = item; break; &#125; &#125; &#125; //Êî∂ÈõÜ for (int o = 0, x = 0; x &lt; arr_x; x++) &#123; for (int y = 0; y &lt; arr_y; y++) &#123; if (bucket[x][y] == 0) &#123; continue; &#125; unsorted[o++] = bucket[x][y]; &#125; &#125; &#125; &#125; public static void main(String[] args) &#123; //ÂÆö‰πâÂæÖÊéíÊï¥ÂûãÊï∞ÁªÑ int[] arr = &#123;21, 56, 88, 195, 354, 1, 35, 12, 6, 7&#125;; System.out.println("**************Âü∫Êï∞ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(arr); //Ë∞ÉÁî®Âü∫Êï∞ÊéíÂ∫èÂáΩÊï∞ radixSort(arr, 3); System.out.println("ÊéíÂ∫èÂêéÔºö"); //ËæìÂá∫ÊéíÂ∫èÂêéÁöÑÊï∞ÁªÑ CommonUtils.display(arr); System.out.println(" "); int[] unsorted = &#123;999999999, 65, 24, 47, 13, 50, 92, 88, 66, 33, 22445, 10001, 624159, 624158, 624155501&#125;; System.out.println("**************‰∫åÁª¥Êï∞ÁªÑÊñπÂºèÂÆûÁé∞ÁöÑÂü∫Êï∞ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); radix_sort(unsorted, 10, 100); System.out.println("ÊéíÂ∫èÂêéÔºö"); for (int tmp : unsorted) &#123; if (tmp &gt; 0) &#123; System.out.print(tmp + " "); &#125; &#125; &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂìÜÂï¶AÊ¢¶]]></title>
    <url>%2Fposts%2F9a1a736f.html</url>
    <content type="text"><![CDATA[‰ª£Á†Å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"/&gt; &lt;title&gt;ÂìÜÂï¶AÊ¢¶&lt;/title&gt; &lt;style&gt; body &#123; margin: 0; padding: 0; &#125; #doraemon &#123; background-color: #fff; display: block; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body onmousemove="zuobiao(event)"&gt;&lt;canvas id="doraemon" width="400" height="600"&gt;&lt;/canvas&gt;&lt;div id="put" style="width: 50px" height="20px"&gt;&lt;/div&gt;&lt;script&gt; window.onload = function () &#123; var cxt = document.getElementById('doraemon').getContext('2d'); /* Â§¥ÈÉ®*/ cxt.beginPath();//Ëµ∑ÂßãË∑ØÂæÑ cxt.lineWidth = 1;//Á∫øÂÆΩÂ∫¶‰∏∫1 cxt.strokeStyle = '#000';//Á¨îËß¶ÁöÑÈ¢úËâ≤ cxt.arc(200, 175, 175, 0.7 * Math.PI, 0.3 * Math.PI);//ÁªòÂà∂ÂºßÔºå‰∏≠ÂøÉÁÇπÔºà200Ôºå175ÔºâÔºåÂçäÂæÑ175 cxt.fillStyle = '#0bb0da';//ËÆæÁΩÆÂ°´ÂÖÖÊó∂ÁöÑÈ¢úËâ≤ cxt.fill();//Â°´ÂÖÖÈ¢úËâ≤ cxt.stroke();//ÁªòÂà∂Ë∑ØÂæÑ /*ËÑ∏ÈÉ®*/ cxt.beginPath(); cxt.fillStyle = '#fff'; cxt.moveTo(110, 110);//Â∞ÜË∑ØÂæÑÁßªÂà∞ÁÇπÔºà110Ôºå110ÔºâÔºå‰∏çÂàõÂª∫Á∫øÊù° cxt.quadraticCurveTo(-10, 200, 120, 315);//ÂàõÂª∫‰∫åÊ¨°Ë¥ùÂ°ûÂ∞îÊõ≤Á∫ø,ÊéßÂà∂ÁÇπ(-10,200),ÁªìÊùüÁÇπ(120,315) cxt.lineTo(280, 315);//Ê∑ªÂä†‰∏Ä‰∏™Êñ∞ÁÇπÔºåÁÑ∂ÂêéÂú®ÁîªÂ∏É‰∏≠ÂàõÂª∫‰ªéÔºà110Ôºå110ÔºâÂà∞Ôºà280Ôºå315ÔºâÁöÑÁ∫øÊù° cxt.quadraticCurveTo(410, 210, 290, 110); cxt.lineTo(110, 110); cxt.fill(); cxt.stroke(); /*ÁúºÁùõ*/ cxt.beginPath(); cxt.lineWidth = 1; cxt.fillStyle = '#fff'; cxt.moveTo(110, 110); cxt.bezierCurveTo(110, 25, 200, 25, 200, 100);//ÂàõÂª∫‰∏âÊ¨°Ë¥ùÂ°ûÂ∞îÊõ≤Á∫ø,ÊéßÂà∂ÁÇπ1(110,25),ÊéßÂà∂ÁÇπ2(200,25),ÁªìÊùüÁÇπ(200,100)Ôºå‰πüÂ∞±ÊòØÁîªÂ∑¶‰∏äÂçäÊ§≠ÂúÜ cxt.bezierCurveTo(200, 175, 110, 175, 110, 100);//ÁîªÂ∑¶‰∏ãÂçäÊ§≠ÂúÜ cxt.moveTo(200, 100); cxt.bezierCurveTo(200, 25, 290, 25, 290, 100); cxt.bezierCurveTo(290, 175, 200, 175, 200, 100); cxt.fill(); cxt.stroke(); /*Âè≥ÁúºÁêÉ*/ cxt.beginPath(); cxt.fillStyle = '#000'; cxt.arc(230, 130, 12, 0, 2 * Math.PI); cxt.fill(); cxt.stroke(); /*Â∑¶ÁúºÁêÉ*/ cxt.beginPath(); cxt.fillStyle = '#000'; cxt.arc(170, 130, 12, 0, 2 * Math.PI); cxt.fill(); cxt.stroke(); /* ÈºªÂ≠ê*/ cxt.beginPath(); cxt.arc(200, 165, 25, 0, 2 * Math.PI); cxt.fillStyle = '#d05823'; cxt.fill(); cxt.stroke(); /*ËÉ°È°ª*/ //Â∑¶ËÉ°È°ª cxt.beginPath(); cxt.moveTo(80, 175); cxt.lineTo(150, 195); cxt.moveTo(80, 200); cxt.lineTo(150, 205); cxt.moveTo(80, 225); cxt.lineTo(150, 215); //‰∏≠ÈÉ®ËÉ°È°ª cxt.moveTo(200, 195); cxt.lineTo(200, 290); //Âè≥ËÉ°È°ª cxt.moveTo(250, 195); cxt.lineTo(320, 175); cxt.moveTo(250, 205); cxt.lineTo(320, 200); cxt.moveTo(250, 215); cxt.lineTo(320, 225); cxt.stroke(); /*Âò¥*/ cxt.moveTo(80, 240); cxt.quadraticCurveTo(200, 350, 320, 240); cxt.stroke(); /*Âõ¥Â∑æ*/ cxt.beginPath(); cxt.moveTo(96, 316); cxt.lineTo(305, 316); cxt.lineTo(320, 316); cxt.arcTo(330, 316, 330, 326, 10);//Âú®ÁîªÂ∏É‰∏äÂàõÂª∫‰ªã‰∫é‰∏§‰∏™ÂàáÁ∫ø‰πãÈó¥ÁöÑÂºßÔºåËµ∑ÁÇπÂùêÊ†á‰∏∫(330,316),ÁªàÁÇπÂùêÊ†á‰∏∫(330,326),ÂçäÂæÑ‰∏∫10 cxt.lineTo(330, 336); cxt.arcTo(330, 346, 305, 346, 10); cxt.lineTo(81, 346); cxt.arcTo(71, 346, 71, 336, 10); cxt.lineTo(71, 326); cxt.arcTo(71, 316, 81, 316, 10); cxt.lineTo(96, 316); cxt.fillStyle = '#b13209'; cxt.fill(); cxt.stroke(); /*‰∏ãÂçäË∫´*/ cxt.beginPath(); cxt.fillStyle = '#0bb0da'; cxt.moveTo(80, 346); //Â∑¶Ë°£Êúç cxt.lineTo(26, 406); cxt.lineTo(65, 440); cxt.lineTo(85, 418); cxt.lineTo(85, 528); cxt.lineTo(185, 528); //Âè≥Ë°£Êúç cxt.lineTo(315, 528); cxt.lineTo(315, 418); cxt.lineTo(337, 440); cxt.lineTo(374, 406); cxt.lineTo(320, 346); cxt.fill(); cxt.stroke(); /*Êâã*/ //Â∑¶Êâã cxt.beginPath(); cxt.fillStyle = '#fff'; cxt.arc(37, 433, 30, 0, 2 * Math.PI); cxt.fill(); cxt.stroke(); //Âè≥Êâã cxt.beginPath(); cxt.fillStyle = '#fff'; cxt.arc(363, 433, 30, 0, 2 * Math.PI); cxt.fill(); cxt.stroke(); /*ËÇö*/ cxt.beginPath(); cxt.fillStyle = '#fff'; cxt.arc(200, 400, 91, 1.8 * Math.PI, 1.2 * Math.PI); cxt.fill(); cxt.stroke(); //Â∞èÂè£Ë¢ã cxt.beginPath(); cxt.fillStyle = '#fff'; cxt.moveTo(130, 394); cxt.lineTo(270, 394); cxt.moveTo(130, 394); cxt.bezierCurveTo(130, 490, 270, 490, 270, 394); cxt.fill(); cxt.stroke(); /*‰∏§Âè™ËÑöÁöÑÁ©∫Èöô*/ cxt.beginPath(); cxt.fillStyle = '#fff'; cxt.arc(200, 529, 20,Math.PI, 0); cxt.fill(); cxt.stroke(); /*ËÑö*/ //Â∑¶ËÑö cxt.beginPath(); cxt.fillStyle='#fff'; cxt.moveTo(180,528); cxt.lineTo(72,528); cxt.bezierCurveTo(52,528,52,558,72,558); cxt.lineTo(180,558); cxt.moveTo(180,558); cxt.bezierCurveTo(200,558,200,528,180,528); cxt.fill(); cxt.stroke(); //Âè≥ËÑö cxt.beginPath(); cxt.fillStyle='#fff'; cxt.moveTo(220,528); cxt.lineTo(328,528); cxt.bezierCurveTo(348,528,348,558,328,558); cxt.lineTo(220,558); cxt.moveTo(220,558); cxt.bezierCurveTo(200,558,200,528,220,528); cxt.fill(); cxt.stroke(); &#125;; //ÊòæÁ§∫ÂùêÊ†á function zuobiao(event) &#123; var x = event.clientX; var y = event.clientY; var out = document.getElementById("put"); out.innerHTML = "x:" + x + " y:" + y; &#125;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ÊïàÊûú]]></content>
      <categories>
        <category>Html</category>
        <category>Js</category>
      </categories>
      <tags>
        <tag>Html</tag>
        <tag>Js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - ÂΩíÂπ∂ÊéíÂ∫è]]></title>
    <url>%2Fposts%2F9bca323a.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ ÂΩíÂπ∂ÔºàMergeÔºâÊéíÂ∫èÊ≥ïÊòØÂ∞Ü‰∏§‰∏™ÔºàÊàñ‰∏§‰∏™‰ª•‰∏äÔºâÊúâÂ∫èË°®ÂêàÂπ∂Êàê‰∏Ä‰∏™Êñ∞ÁöÑÊúâÂ∫èË°®ÔºåÂç≥ÊääÂæÖÊéíÂ∫èÂ∫èÂàóÂàÜ‰∏∫Ëã•Âπ≤‰∏™Â≠êÂ∫èÂàóÔºåÊØè‰∏™Â≠êÂ∫èÂàóÊòØÊúâÂ∫èÁöÑ„ÄÇÁÑ∂ÂêéÂÜçÊääÊúâÂ∫èÂ≠êÂ∫èÂàóÂêàÂπ∂‰∏∫Êï¥‰ΩìÊúâÂ∫èÂ∫èÂàó„ÄÇ ÁÆóÊ≥ïÊ≠•È™§ Áî≥ËØ∑Á©∫Èó¥Ôºå‰ΩøÂÖ∂Â§ßÂ∞è‰∏∫‰∏§‰∏™Â∑≤ÁªèÊéíÂ∫èÂ∫èÂàó‰πãÂíåÔºåËØ•Á©∫Èó¥Áî®Êù•Â≠òÊîæÂêàÂπ∂ÂêéÁöÑÂ∫èÂàó ËÆæÂÆö‰∏§‰∏™ÊåáÈíàÔºåÊúÄÂàù‰ΩçÁΩÆÂàÜÂà´‰∏∫‰∏§‰∏™Â∑≤ÁªèÊéíÂ∫èÂ∫èÂàóÁöÑËµ∑Âßã‰ΩçÁΩÆ ÊØîËæÉ‰∏§‰∏™ÊåáÈíàÊâÄÊåáÂêëÁöÑÂÖÉÁ¥†ÔºåÈÄâÊã©Áõ∏ÂØπÂ∞èÁöÑÂÖÉÁ¥†ÊîæÂÖ•Âà∞ÂêàÂπ∂Á©∫Èó¥ÔºåÂπ∂ÁßªÂä®ÊåáÈíàÂà∞‰∏ã‰∏Ä‰ΩçÁΩÆ ÈáçÂ§çÊ≠•È™§3Áõ¥Âà∞Êüê‰∏ÄÊåáÈíàÂà∞ËææÂ∫èÂàóÂ∞æ Â∞ÜÂè¶‰∏ÄÂ∫èÂàóÂâ©‰∏ãÁöÑÊâÄÊúâÂÖÉÁ¥†Áõ¥Êé•Â§çÂà∂Âà∞ÂêàÂπ∂Â∫èÂàóÂ∞æ ÁÆóÊ≥ïÊµÅÁ®ãÂõæ ‰ª£Á†Å 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: ÂΩíÂπ∂ÊéíÂ∫è */public class MergeSort &#123; /** * ÂΩíÂπ∂ÊéíÂ∫èÔºàMerge SortÔºâ‰∏éÂø´ÈÄüÊéíÂ∫èÊÄùÊÉ≥Á±ª‰ººÔºöÂ∞ÜÂæÖÊéíÂ∫èÊï∞ÊçÆÂàÜÊàê‰∏§ÈÉ®ÂàÜÔºåÁªßÁª≠Â∞Ü‰∏§‰∏™Â≠êÈÉ®ÂàÜËøõË°åÈÄíÂΩíÁöÑÂΩíÂπ∂ÊéíÂ∫èÔºõÁÑ∂ÂêéÂ∞ÜÂ∑≤ÁªèÊúâÂ∫èÁöÑ‰∏§‰∏™Â≠êÈÉ®ÂàÜËøõË°åÂêàÂπ∂ÔºåÊúÄÁªàÂÆåÊàêÊéíÂ∫è„ÄÇ * ÂÖ∂Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏éÂø´ÈÄüÊéíÂ∫èÂùá‰∏∫O(nlogn)Ôºå‰ΩÜÊòØÂΩíÂπ∂ÊéíÂ∫èÈô§‰∫ÜÈÄíÂΩíË∞ÉÁî®Èó¥Êé•‰ΩøÁî®‰∫ÜËæÖÂä©Á©∫Èó¥Ê†àÔºåËøòÈúÄË¶ÅÈ¢ùÂ§ñÁöÑO(n)Á©∫Èó¥ËøõË°å‰∏¥Êó∂Â≠òÂÇ®„ÄÇ‰ªéÊ≠§ËßíÂ∫¶ÂΩíÂπ∂ÊéíÂ∫èÁï•ÈÄä‰∫éÂø´ÈÄüÊéíÂ∫èÔºå‰ΩÜÊòØÂΩíÂπ∂ÊéíÂ∫èÊòØ‰∏ÄÁßçÁ®≥ÂÆöÁöÑÊéíÂ∫èÁÆóÊ≥ïÔºåÂø´ÈÄüÊéíÂ∫èÂàô‰∏çÁÑ∂„ÄÇ * ÊâÄË∞ìÁ®≥ÂÆöÊéíÂ∫èÔºåË°®Á§∫ÂØπ‰∫éÂÖ∑ÊúâÁõ∏ÂêåÂÄºÁöÑÂ§ö‰∏™ÂÖÉÁ¥†ÔºåÂÖ∂Èó¥ÁöÑÂÖàÂêéÈ°∫Â∫è‰øùÊåÅ‰∏çÂèò„ÄÇÂØπ‰∫éÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãËÄåË®ÄÔºå‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ïÊòØÂê¶Á®≥ÂÆöÔºåÂΩ±ÂìçÂæàÂ∞èÔºå‰ΩÜÊòØÂØπ‰∫éÁªìÊûÑ‰ΩìÊï∞ÁªÑÔºåÁ®≥ÂÆöÊéíÂ∫èÂ∞±ÂçÅÂàÜÈáçË¶Å„ÄÇ‰æãÂ¶ÇÂØπ‰∫éstudentÁªìÊûÑ‰ΩìÊåâÁÖßÂÖ≥ÈîÆÂ≠óscoreËøõË°åÈùûÈôçÂ∫èÊéíÂ∫èÔºö */ public static void mergeSort(int[] numArr, int[] tempArr, int head, int rear) &#123; if (head &lt; rear) &#123; //ÂèñÂàÜÂâ≤‰ΩçÁΩÆ int middle = (head + rear) / 2; //ÈÄíÂΩíÂàíÂàÜÂàóË°®ÁöÑÂ∑¶Â∫èÂàó mergeSort(numArr, tempArr, head, middle); //ÈÄíÂΩíÂàíÂàÜÂàóË°®ÁöÑÂè≥Â∫èÂàó mergeSort(numArr, tempArr, middle + 1, rear); //ÂàóË°®ÁöÑÂêàÂπ∂ merge(numArr, tempArr, head, middle + 1, rear); &#125; &#125; /** * ÂêàÂπ∂Êìç‰Ωú(ÂàóË°®ÁöÑ‰∏§‰∏§ÂêàÂπ∂) * * @param numArr * @param tempArr * @param head * @param middle * @param rear */ public static void merge(int[] numArr, int[] tempArr, int head, int middle, int rear) &#123; //Â∑¶ÊåáÈíàÂ∞æ int headEnd = middle - 1; //Âè≥ÊåáÈíàÂ§¥ int rearStart = middle; //‰∏¥Êó∂Ë°®ÁöÑ‰∏ãÊ†á int tempIndex = head; //ÂàóË°®ÂêàÂπ∂ÂêéÁöÑÈïøÂ∫¶ int tempLength = rear - head + 1; //ÂÖàÂæ™ÁéØ‰∏§‰∏™Âå∫Èó¥ÊÆµÈÉΩÊ≤°ÊúâÁªìÊùüÁöÑÊÉÖÂÜµ while ((headEnd &gt;= head) &amp;&amp; (rearStart &lt;= rear)) &#123; //Â¶ÇÊûúÂèëÁé∞Âè≥Â∫èÂàóÂ§ßÔºåÂàôÂ∞ÜÊ≠§Êï∞ÊîæÂÖ•‰∏¥Êó∂ÂàóË°® if (numArr[head] &lt; numArr[rearStart]) &#123; tempArr[tempIndex++] = numArr[head++]; &#125; else &#123; tempArr[tempIndex++] = numArr[rearStart++]; &#125; &#125; //Âà§Êñ≠Â∑¶Â∫èÂàóÊòØÂê¶ÁªìÊùü while (head &lt;= headEnd) &#123; tempArr[tempIndex++] = numArr[head++]; &#125; //Âà§Êñ≠Âè≥Â∫èÂàóÊòØÂê¶ÁªìÊùü while (rearStart &lt;= rear) &#123; tempArr[tempIndex++] = numArr[rearStart++]; &#125; //‰∫§Êç¢Êï∞ÊçÆ for (int i = 0; i &lt; tempLength; i++) &#123; numArr[rear] = tempArr[rear]; rear--; &#125; &#125; public static void main(String[] args) &#123; int[] numArr = &#123;27, 11, 13, 45, 34, 22, 19, 8, 3, 99, 74, 55, 88, 66&#125;; System.out.println("**************ÂΩíÂπ∂ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(numArr); System.out.println("ÊéíÂ∫èÂêéÔºö"); mergeSort(numArr, new int[numArr.length], 0, numArr.length - 1); CommonUtils.display(numArr); &#125;&#125; CommonUtilsÂ∑•ÂÖ∑Á±ªÔºö 12345678910111213141516171819202122package main.java.com.study.utils;/** * @author: whb * @description: Â∑•ÂÖ∑Á±ª */public class CommonUtils &#123; /** * ÈÅçÂéÜÊâìÂç∞ * * @param numArr */ public static void display(int[] numArr) &#123; if (numArr != null &amp;&amp; numArr.length &gt; 0) &#123; for (int num : numArr) &#123; System.out.print(num + " "); &#125; &#125; System.out.println(""); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-04‰πã-synchronizedÂÖ≥ÈîÆÂ≠ó]]></title>
    <url>%2Fposts%2F2965099a.html</url>
    <content type="text"><![CDATA[synchronizedÂéüÁêÜ &lt;font color=&quot;red&quot;&gt;Âú®java‰∏≠ÔºåÊØè‰∏Ä‰∏™ÂØπË±°Êúâ‰∏î‰ªÖÊúâ‰∏Ä‰∏™ÂêåÊ≠•ÈîÅ„ÄÇËøô‰πüÊÑèÂë≥ÁùÄÔºåÂêåÊ≠•ÈîÅÊòØ‰æùËµñ‰∫éÂØπË±°ËÄåÂ≠òÂú®„ÄÇ&lt;/font&gt; &lt;font color=&quot;green&quot;&gt;ÂΩìÊàë‰ª¨Ë∞ÉÁî®ÊüêÂØπË±°ÁöÑsynchronizedÊñπÊ≥ïÊó∂ÔºåÂ∞±Ëé∑Âèñ‰∫ÜËØ•ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ„ÄÇ&lt;/font&gt;‰æãÂ¶ÇÔºåsynchronized(obj)Â∞±Ëé∑Âèñ‰∫Ü‚ÄúobjËøô‰∏™ÂØπË±°‚ÄùÁöÑÂêåÊ≠•ÈîÅ„ÄÇ &lt;font color=&quot;green&quot;&gt;‰∏çÂêåÁ∫øÁ®ãÂØπÂêåÊ≠•ÈîÅÁöÑËÆøÈóÆÊòØ‰∫íÊñ•ÁöÑ„ÄÇ&lt;/font&gt;‰πüÂ∞±ÊòØËØ¥ÔºåÊüêÊó∂Èó¥ÁÇπÔºåÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÂè™ËÉΩË¢´‰∏Ä‰∏™Á∫øÁ®ãËé∑ÂèñÂà∞ÔºÅÈÄöËøáÂêåÊ≠•ÈîÅÔºåÊàë‰ª¨Â∞±ËÉΩÂú®Â§öÁ∫øÁ®ã‰∏≠ÔºåÂÆûÁé∞ÂØπ‚ÄúÂØπË±°/ÊñπÊ≥ï‚ÄùÁöÑ‰∫íÊñ•ËÆøÈóÆ„ÄÇ ‰æãÂ¶ÇÔºåÁé∞Âú®Êúâ‰∏§‰∏™Á∫øÁ®ãAÂíåÁ∫øÁ®ãBÔºåÂÆÉ‰ª¨ÈÉΩ‰ºöËÆøÈóÆ‚ÄúÂØπË±°objÁöÑÂêåÊ≠•ÈîÅ‚Äù„ÄÇÂÅáËÆæÔºåÂú®Êüê‰∏ÄÊó∂ÂàªÔºåÁ∫øÁ®ãAËé∑ÂèñÂà∞‚ÄúobjÁöÑÂêåÊ≠•ÈîÅ‚ÄùÂπ∂Âú®ÊâßË°å‰∏Ä‰∫õÊìç‰ΩúÔºõËÄåÊ≠§Êó∂ÔºåÁ∫øÁ®ãB‰πü‰ºÅÂõæËé∑Âèñ‚ÄúobjÁöÑÂêåÊ≠•ÈîÅ‚Äù ‚Äî‚Äî Á∫øÁ®ãB‰ºöËé∑ÂèñÂ§±Ë¥•ÔºåÂÆÉÂøÖÈ°ªÁ≠âÂæÖÔºåÁõ¥Âà∞Á∫øÁ®ãAÈáäÊîæ‰∫Ü‚ÄúËØ•ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù‰πãÂêéÁ∫øÁ®ãBÊâçËÉΩËé∑ÂèñÂà∞‚ÄúobjÁöÑÂêåÊ≠•ÈîÅ‚Äù‰ªéËÄåÊâçÂèØ‰ª•ËøêË°å„ÄÇ synchronizedÂü∫Êú¨ËßÑÂàô &lt;p id=&quot;div-border-left-red&quot;&gt; 1. ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂØπ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑËØ•‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÁöÑËÆøÈóÆÂ∞ÜË¢´ÈòªÂ°û„ÄÇ &lt;/p&gt; &lt;p id=&quot;div-border-left-red&quot;&gt; 2. ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ã‰ªçÁÑ∂ÂèØ‰ª•ËÆøÈóÆ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑÈùûÂêåÊ≠•‰ª£Á†ÅÂùó„ÄÇ &lt;/p&gt; &lt;p id=&quot;div-border-left-red&quot;&gt; 3. ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂØπ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑÂÖ∂‰ªñÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÁöÑËÆøÈóÆÂ∞ÜË¢´ÈòªÂ°û„ÄÇ &lt;/p&gt; Á¨¨‰∏ÄÊù°ËßÑÂàô ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂØπ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑËØ•‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÁöÑËÆøÈóÆÂ∞ÜË¢´ÈòªÂ°û„ÄÇ 12345678910111213141516171819202122232425262728293031323334package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂØπ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑËØ•‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÁöÑËÆøÈóÆÂ∞ÜË¢´ÈòªÂ°û„ÄÇ */public class Demo1_1 &#123; public static void main(String[] args) &#123; // Êñ∞Âª∫‚ÄúRunnableÂØπË±°‚Äù Runnable demo = new MyRunable(); // Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt1‚Äù, t1ÊòØÂü∫‰∫édemoËøô‰∏™RunnableÂØπË±° Thread t1 = new Thread(demo, "t1"); // Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt2‚Äù, t2ÊòØÂü∫‰∫édemoËøô‰∏™RunnableÂØπË±° Thread t2 = new Thread(demo, "t2"); t1.start(); // ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù t2.start(); // ÂêØÂä®‚ÄúÁ∫øÁ®ãt2‚Äù &#125;&#125;class MyRunable implements Runnable &#123; @Override public void run() &#123; synchronized (this) &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; // ‰ºëÁú†100ms Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " loop " + i); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910t1 loop 0t1 loop 1t1 loop 2t1 loop 3t1 loop 4t2 loop 0t2 loop 1t2 loop 2t2 loop 3t2 loop 4 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; run()ÊñπÊ≥ï‰∏≠Â≠òÂú®‚Äúsynchronized(this)‰ª£Á†ÅÂùó‚ÄùÔºåËÄå‰∏ît1Âíåt2ÈÉΩÊòØÂü∫‰∫é&quot;demoËøô‰∏™RunnableÂØπË±°&quot;ÂàõÂª∫ÁöÑÁ∫øÁ®ã„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÔºåÊàë‰ª¨ÂèØ‰ª•Â∞Üsynchronized(this)‰∏≠ÁöÑthisÁúã‰ΩúÊòØ‚ÄúdemoËøô‰∏™RunnableÂØπË±°‚ÄùÔºõÂõ†Ê≠§ÔºåÁ∫øÁ®ãt1Âíåt2ÂÖ±‰∫´‚ÄúdemoÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù„ÄÇÊâÄ‰ª•ÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ãËøêË°åÁöÑÊó∂ÂÄôÔºåÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÂøÖÈ°ªÁ≠âÂæÖ‚ÄúËøêË°åÁ∫øÁ®ã‚ÄùÈáäÊîæ‚ÄúdemoÁöÑÂêåÊ≠•ÈîÅ‚Äù‰πãÂêéÊâçËÉΩËøêË°å„ÄÇ Êé•‰∏ãÊù•Â∞Ü‰∏äÈù¢ÁöÑ‰ª£Á†ÅËøõË°å‰øÆÊîπÔºåÁÑ∂ÂêéÂÜçËøêË°åÁúãÁúãÁªìÊûúÊÄé‰πàÊ†∑„ÄÇ‰øÆÊîπÂêéÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂØπ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑËØ•‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÁöÑËÆøÈóÆÂ∞ÜË¢´ÈòªÂ°û„ÄÇ */public class Demo1_2 &#123; public static void main(String[] args) &#123; // Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt1‚Äù Thread t1 = new MyThread("t1"); // Êñ∞Âª∫‚ÄúÁ∫øÁ®ãt2‚Äù Thread t2 = new MyThread("t2"); t1.start(); // ÂêØÂä®‚ÄúÁ∫øÁ®ãt1‚Äù t2.start(); // ÂêØÂä®‚ÄúÁ∫øÁ®ãt2‚Äù &#125;&#125;class MyThread extends Thread &#123; public MyThread(String name) &#123; super(name); &#125; @Override public void run() &#123; synchronized (this) &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; // ‰ºëÁú†100ms Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " loop " + i); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125; &#125;&#125; &lt;span id=&quot;inline-purple&quot;&gt; ‰ª£Á†ÅËØ¥ÊòéÔºö &lt;/span&gt; ÊØîËæÉDemo1_2 Âíå Demo1_1ÂêéÂèëÁé∞ÔºåDemo1_2‰∏≠ÁöÑMyThreadÁ±ªÊòØÁõ¥Êé•ÁªßÊâø‰∫éThreadÔºåËÄå‰∏ît1Âíåt2ÈÉΩÊòØMyThreadÂ≠êÁ∫øÁ®ã„ÄÇ Âú®‚ÄúDemo1_2ÁöÑrun()ÊñπÊ≥ï‚Äù‰πüË∞ÉÁî®‰∫Üsynchronized(this)ÔºåÊ≠£Â¶Ç‚ÄúDemo1_1ÁöÑrun()ÊñπÊ≥ï‚Äù‰πüË∞ÉÁî®‰∫Üsynchronized(this)‰∏ÄÊ†∑ÔºÅ ÈÇ£‰πàÔºåDemo1_2ÁöÑÊâßË°åÊµÅÁ®ãÊòØ‰∏çÊòØÂíåDemo1_1‰∏ÄÊ†∑Âë¢Ôºü &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910t1 loop 0t2 loop 0t1 loop 1t2 loop 1t1 loop 2t2 loop 2t1 loop 3t2 loop 3t1 loop 4t2 loop 4 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; synchronized(this)‰∏≠ÁöÑthisÊòØÊåá‚ÄúÂΩìÂâçÁöÑÁ±ªÂØπË±°‚ÄùÔºåÂç≥synchronized(this)ÊâÄÂú®ÁöÑÁ±ªÂØπÂ∫îÁöÑÂΩìÂâçÂØπË±°„ÄÇÂÆÉÁöÑ‰ΩúÁî®ÊòØËé∑Âèñ‚ÄúÂΩìÂâçÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚Äù„ÄÇ ÂØπ‰∫éDemo1_2‰∏≠Ôºåsynchronized(this)‰∏≠ÁöÑthis‰ª£Ë°®ÁöÑÊòØMyThreadÂØπË±°ÔºåËÄåt1Âíåt2ÊòØ‰∏§‰∏™‰∏çÂêåÁöÑMyThreadÂØπË±°ÔºåÂõ†Ê≠§t1Âíåt2Âú®ÊâßË°åsynchronized(this)Êó∂ÔºåËé∑ÂèñÁöÑÊòØ‰∏çÂêåÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ„ÄÇÂØπ‰∫éDemo1_1ÂØπËÄåË®ÄÔºåsynchronized(this)‰∏≠ÁöÑthis‰ª£Ë°®ÁöÑÊòØMyRunableÂØπË±°Ôºõt1Âíåt2ÂÖ±Âêå‰∏Ä‰∏™MyRunableÂØπË±°ÔºåÂõ†Ê≠§Ôºå‰∏Ä‰∏™Á∫øÁ®ãËé∑Âèñ‰∫ÜÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÔºå‰ºöÈÄ†ÊàêÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÁ≠âÂæÖ„ÄÇ Á¨¨‰∫åÊù°ËßÑÂàô ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ã‰ªçÁÑ∂ÂèØ‰ª•ËÆøÈóÆ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑÈùûÂêåÊ≠•‰ª£Á†ÅÂùó„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ã‰ªçÁÑ∂ÂèØ‰ª•ËÆøÈóÆ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑÈùûÂêåÊ≠•‰ª£Á†ÅÂùó„ÄÇ */public class Demo2 &#123; public static void main(String[] args) &#123; final Count count = new Count(); // Êñ∞Âª∫t1, t1‰ºöË∞ÉÁî®‚ÄúcountÂØπË±°‚ÄùÁöÑsynMethod()ÊñπÊ≥ï Thread t1 = new Thread( new Runnable() &#123; @Override public void run() &#123; count.synMethod(); &#125; &#125;, "t1"); // Êñ∞Âª∫t2, t2‰ºöË∞ÉÁî®‚ÄúcountÂØπË±°‚ÄùÁöÑnonSynMethod()ÊñπÊ≥ï Thread t2 = new Thread( new Runnable() &#123; @Override public void run() &#123; count.nonSynMethod(); &#125; &#125;, "t2"); t1.start(); // ÂêØÂä®t1 t2.start(); // ÂêØÂä®t2 &#125;&#125;class Count &#123; /** * Âê´ÊúâsynchronizedÂêåÊ≠•ÂùóÁöÑÊñπÊ≥ï */ public void synMethod() &#123; synchronized (this) &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; // ‰ºëÁú†100ms Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " synMethod loop " + i); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125; &#125; /** * ÈùûÂêåÊ≠•ÁöÑÊñπÊ≥ï */ public void nonSynMethod() &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " nonSynMethod loop " + i); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910t1 synMethod loop 0t2 nonSynMethod loop 0t1 synMethod loop 1t2 nonSynMethod loop 1t1 synMethod loop 2t2 nonSynMethod loop 2t1 synMethod loop 3t2 nonSynMethod loop 3t1 synMethod loop 4t2 nonSynMethod loop 4 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; ‰∏ªÁ∫øÁ®ã‰∏≠Êñ∞Âª∫‰∫Ü‰∏§‰∏™Â≠êÁ∫øÁ®ãt1Âíåt2„ÄÇt1‰ºöË∞ÉÁî®countÂØπË±°ÁöÑsynMethod()ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÂÜÖÂê´ÊúâÂêåÊ≠•ÂùóÔºõËÄåt2Âàô‰ºöË∞ÉÁî®countÂØπË±°ÁöÑnonSynMethod()ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ï‰∏çÊòØÂêåÊ≠•ÊñπÊ≥ï„ÄÇt1ËøêË°åÊó∂ÔºåËôΩÁÑ∂Ë∞ÉÁî®synchronized(this)Ëé∑Âèñ‚ÄúcountÁöÑÂêåÊ≠•ÈîÅ‚ÄùÔºõ‰ΩÜÊòØÂπ∂Ê≤°ÊúâÈÄ†Êàêt2ÁöÑÈòªÂ°ûÔºåÂõ†‰∏∫t2Ê≤°ÊúâÁî®Âà∞‚Äúcount‚ÄùÂêåÊ≠•ÈîÅ„ÄÇ Á¨¨‰∏âÊù°ËßÑÂàô ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂØπ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑÂÖ∂‰ªñÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÁöÑËÆøÈóÆÂ∞ÜË¢´ÈòªÂ°û„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆ‚ÄúÊüêÂØπË±°‚ÄùÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂØπ‚ÄúËØ•ÂØπË±°‚ÄùÁöÑÂÖ∂‰ªñÁöÑ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊàñËÄÖ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÁöÑËÆøÈóÆÂ∞ÜË¢´ÈòªÂ°û„ÄÇ */public class Demo3 &#123; public static void main(String[] args) &#123; final Count2 count = new Count2(); // Êñ∞Âª∫t1, t1‰ºöË∞ÉÁî®‚ÄúcountÂØπË±°‚ÄùÁöÑsynMethod()ÊñπÊ≥ï Thread t1 = new Thread( new Runnable() &#123; @Override public void run() &#123; count.synMethod(); &#125; &#125;, "t1"); // Êñ∞Âª∫t2, t2‰ºöË∞ÉÁî®‚ÄúcountÂØπË±°‚ÄùÁöÑnonSynMethod()ÊñπÊ≥ï Thread t2 = new Thread( new Runnable() &#123; @Override public void run() &#123; count.nonSynMethod(); &#125; &#125;, "t2"); t1.start(); // ÂêØÂä®t1 t2.start(); // ÂêØÂä®t2 &#125;&#125;class Count2 &#123; /** * Âê´ÊúâsynchronizedÂêåÊ≠•ÂùóÁöÑÊñπÊ≥ï */ public void synMethod() &#123; synchronized (this) &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; // ‰ºëÁú†100ms Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " synMethod loop " + i); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125; &#125; /** * ‰πüÂåÖÂê´synchronizedÂêåÊ≠•ÂùóÁöÑÊñπÊ≥ï */ public void nonSynMethod() &#123; synchronized (this) &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " nonSynMethod loop " + i); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125; &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910t1 synMethod loop 0t1 synMethod loop 1t1 synMethod loop 2t1 synMethod loop 3t1 synMethod loop 4t2 nonSynMethod loop 0t2 nonSynMethod loop 1t2 nonSynMethod loop 2t2 nonSynMethod loop 3t2 nonSynMethod loop 4 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; ‰∏ªÁ∫øÁ®ã‰∏≠Êñ∞Âª∫‰∫Ü‰∏§‰∏™Â≠êÁ∫øÁ®ãt1Âíåt2„ÄÇt1Âíåt2ËøêË°åÊó∂ÈÉΩË∞ÉÁî®synchronized(this)ÔºåËøô‰∏™thisÊòØCountÂØπË±°(count)ÔºåËÄåt1Âíåt2ÂÖ±Áî®count„ÄÇÂõ†Ê≠§ÔºåÂú®t1ËøêË°åÊó∂Ôºåt2‰ºöË¢´ÈòªÂ°ûÔºåÁ≠âÂæÖt1ËøêË°åÈáäÊîæ‚ÄúcountÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ‚ÄùÔºåt2ÊâçËÉΩËøêË°å„ÄÇ synchronizedÊñπÊ≥ï Âíå synchronized‰ª£Á†ÅÂùó ‚ÄúsynchronizedÊñπÊ≥ï‚ÄùÊòØÁî®synchronized‰øÆÈ•∞ÊñπÊ≥ïÔºåËÄå ‚Äúsynchronized‰ª£Á†ÅÂùó‚ÄùÂàôÊòØÁî®synchronized‰øÆÈ•∞‰ª£Á†ÅÂùó„ÄÇ synchronizedÊñπÊ≥ïÁ§∫‰æã: 123public synchronized void foo1() &#123; System.out.println("synchronized methoed");&#125; synchronized‰ª£Á†ÅÂùóÁ§∫‰æãÔºö 12345public void foo2() &#123; synchronized (this) &#123; System.out.println("synchronized methoed"); &#125;&#125; synchronized‰ª£Á†ÅÂùó‰∏≠ÁöÑthisÊòØÊåáÂΩìÂâçÂØπË±°„ÄÇ‰πüÂèØ‰ª•Â∞ÜthisÊõøÊç¢ÊàêÂÖ∂‰ªñÂØπË±°Ôºå‰æãÂ¶ÇÂ∞ÜthisÊõøÊç¢ÊàêobjÔºåÂàôfoo2()Âú®ÊâßË°åsynchronized(obj)Êó∂Â∞±Ëé∑ÂèñÁöÑÊòØobjÁöÑÂêåÊ≠•ÈîÅ„ÄÇ synchronized‰ª£Á†ÅÂùóÂèØ‰ª•Êõ¥Á≤æÁ°ÆÁöÑÊéßÂà∂ÂÜ≤Á™ÅÈôêÂà∂ËÆøÈóÆÂå∫ÂüüÔºåÊúâÊó∂ÂÄôË°®Áé∞Êõ¥È´òÊïàÁéá„ÄÇ‰∏ãÈù¢ÈÄöËøá‰∏Ä‰∏™Á§∫‰æãÊù•ÊºîÁ§∫Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: synchronized‰ª£Á†ÅÂùóÂèØ‰ª•Êõ¥Á≤æÁ°ÆÁöÑÊéßÂà∂ÂÜ≤Á™ÅÈôêÂà∂ËÆøÈóÆÂå∫ÂüüÔºåÊúâÊó∂ÂÄôË°®Áé∞Êõ¥È´òÊïàÁéá„ÄÇ */public class Demo4 &#123; public synchronized void synMethod() &#123; for (int i = 0; i &lt; 1000000; i++) &#123; ; &#125; &#125; public void synBlock() &#123; synchronized (this) &#123; for (int i = 0; i &lt; 1000000; i++) &#123; ; &#125; &#125; &#125; public static void main(String[] args) &#123; Demo4 demo = new Demo4(); long start, diff; // Ëé∑ÂèñÂΩìÂâçÊó∂Èó¥(millis) start = System.currentTimeMillis(); // Ë∞ÉÁî®‚ÄúsynchronizedÊñπÊ≥ï‚Äù demo.synMethod(); // Ëé∑Âèñ‚ÄúÊó∂Èó¥Â∑ÆÂÄº‚Äù diff = System.currentTimeMillis() - start; System.out.println("synMethod() : " + diff); // Ëé∑ÂèñÂΩìÂâçÊó∂Èó¥(millis) start = System.currentTimeMillis(); // Ë∞ÉÁî®‚ÄúsynchronizedÊñπÊ≥ïÂùó‚Äù demo.synBlock(); // Ëé∑Âèñ‚ÄúÊó∂Èó¥Â∑ÆÂÄº‚Äù diff = System.currentTimeMillis() - start; System.out.println("synBlock() : " + diff); &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; (Êüê‰∏ÄÊ¨°)ÊâßË°åÁªìÊûúÔºö &lt;/span&gt; 12synMethod() : 11synBlock() : 3 ÂÆû‰æãÈîÅ Âíå ÂÖ®Â±ÄÈîÅ ÂÆû‰æãÈîÅ -- ÈîÅÂú®Êüê‰∏Ä‰∏™ÂÆû‰æãÂØπË±°‰∏ä„ÄÇÂ¶ÇÊûúËØ•Á±ªÊòØÂçï‰æãÔºåÈÇ£‰πàËØ•ÈîÅ‰πüÂÖ∑ÊúâÂÖ®Â±ÄÈîÅÁöÑÊ¶ÇÂøµ„ÄÇ ÂÆû‰æãÈîÅÂØπÂ∫îÁöÑÂ∞±ÊòØsynchronizedÂÖ≥ÈîÆÂ≠ó„ÄÇ ÂÖ®Â±ÄÈîÅ -- ËØ•ÈîÅÈíàÂØπÁöÑÊòØÁ±ªÔºåÊó†ËÆ∫ÂÆû‰æãÂ§öÂ∞ë‰∏™ÂØπË±°ÔºåÈÇ£‰πàÁ∫øÁ®ãÈÉΩÂÖ±‰∫´ËØ•ÈîÅ„ÄÇ ÂÖ®Â±ÄÈîÅÂØπÂ∫îÁöÑÂ∞±ÊòØstatic synchronizedÔºàÊàñËÄÖÊòØÈîÅÂú®ËØ•Á±ªÁöÑclassÊàñËÄÖclassloaderÂØπË±°‰∏äÔºâ„ÄÇ ÂÖ≥‰∫é‚ÄúÂÆû‰æãÈîÅ‚ÄùÂíå‚ÄúÂÖ®Â±ÄÈîÅ‚ÄùÊúâ‰∏Ä‰∏™ÂæàÂΩ¢Ë±°ÁöÑ‰æãÂ≠êÔºö 123456pulbic class Something &#123; public synchronized void isSyncA()&#123;&#125; public synchronized void isSyncB()&#123;&#125; public static synchronized void cSyncA()&#123;&#125; public static synchronized void cSyncB()&#123;&#125;&#125; ÂÅáËÆæÔºåSomethingÊúâ‰∏§‰∏™ÂÆû‰æãxÂíåy„ÄÇÂàÜÊûê‰∏ãÈù¢4ÁªÑË°®ËææÂºèËé∑ÂèñÁöÑÈîÅÁöÑÊÉÖÂÜµ„ÄÇ (01) x.isSyncA()‰∏éx.isSyncB() (02) x.isSyncA()‰∏éy.isSyncA() (03) x.cSyncA()‰∏éy.cSyncB() (04) x.isSyncA()‰∏éSomething.cSyncA() ‰∏ãÈù¢ÈÄöËøáÂõõ‰∏™Á§∫‰æãÊºîÁ§∫ËøõË°åÂàÜÊûê„ÄÇÈ¶ñÂÖàÂÆö‰πâSomethingÂØπË±°„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: SomethingÂØπË±° */public class Something &#123; public synchronized void isSyncA() &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " : isSyncA"); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125; public synchronized void isSyncB() &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " : isSyncB"); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125; public static synchronized void cSyncA() &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " : cSyncA"); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125; public static synchronized void cSyncB() &#123; try &#123; for (int i = 0; i &lt; 5; i++) &#123; Thread.sleep(100); System.out.println(Thread.currentThread().getName() + " : cSyncB"); &#125; &#125; catch (InterruptedException ie) &#123; &#125; &#125;&#125; (01) ‰∏çËÉΩË¢´ÂêåÊó∂ËÆøÈóÆ„ÄÇÂõ†‰∏∫isSyncA()ÂíåisSyncB()ÈÉΩÊòØËÆøÈóÆÂêå‰∏Ä‰∏™ÂØπË±°(ÂØπË±°x)ÁöÑÂêåÊ≠•ÈîÅÔºÅ 123456789101112131415161718192021222324252627282930313233package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: ÂÆû‰æãÈîÅÂíåÂÖ®Â±ÄÈîÅÂàÜÊûêÁ§∫‰æã1 * ‰∏çËÉΩË¢´ÂêåÊó∂ËÆøÈóÆ„ÄÇÂõ†‰∏∫isSyncA()ÂíåisSyncB()ÈÉΩÊòØËÆøÈóÆÂêå‰∏Ä‰∏™ÂØπË±°(ÂØπË±°x)ÁöÑÂêåÊ≠•ÈîÅÔºÅ */public class LockTest1 &#123; Something x = new Something(); Something y = new Something(); /** * ÊØîËæÉ(01) x.isSyncA()‰∏éx.isSyncB() */ private void test1() &#123; // Êñ∞Âª∫t11, t11‰ºöË∞ÉÁî® x.isSyncA() Thread t11 = new Thread( () -&gt; x.isSyncA(), "t11"); // Êñ∞Âª∫t12, t12‰ºöË∞ÉÁî® x.isSyncB() Thread t12 = new Thread( () -&gt; x.isSyncB(), "t12"); t11.start(); // ÂêØÂä®t11 t12.start(); // ÂêØÂä®t12 &#125; public static void main(String[] args) &#123; LockTest1 demo = new LockTest1(); demo.test1(); &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910t11 : isSyncAt11 : isSyncAt11 : isSyncAt11 : isSyncAt11 : isSyncAt12 : isSyncBt12 : isSyncBt12 : isSyncBt12 : isSyncBt12 : isSyncB (02) ÂèØ‰ª•ÂêåÊó∂Ë¢´ËÆøÈóÆ„ÄÇÂõ†‰∏∫ËÆøÈóÆÁöÑ‰∏çÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÔºåx.isSyncA()ËÆøÈóÆÁöÑÊòØxÁöÑÂêåÊ≠•ÈîÅÔºåËÄåy.isSyncA()ËÆøÈóÆÁöÑÊòØyÁöÑÂêåÊ≠•ÈîÅ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: ÂÆû‰æãÈîÅÂíåÂÖ®Â±ÄÈîÅÁ§∫‰æã2 * ÂèØ‰ª•ÂêåÊó∂Ë¢´ËÆøÈóÆ„ÄÇÂõ†‰∏∫ËÆøÈóÆÁöÑ‰∏çÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÁöÑÂêåÊ≠•ÈîÅÔºåx.isSyncA()ËÆøÈóÆÁöÑÊòØxÁöÑÂêåÊ≠•ÈîÅÔºåËÄåy.isSyncA()ËÆøÈóÆÁöÑÊòØyÁöÑÂêåÊ≠•ÈîÅ„ÄÇ */public class LockTest2 &#123; Something x = new Something(); Something y = new Something(); /** * ÊØîËæÉ(02) x.isSyncA()‰∏éy.isSyncA() */ private void test2() &#123; // Êñ∞Âª∫t21, t21‰ºöË∞ÉÁî® x.isSyncA() Thread t21 = new Thread( () -&gt; x.isSyncA(), "t21"); // Êñ∞Âª∫t22, t22‰ºöË∞ÉÁî® x.isSyncB() Thread t22 = new Thread( () -&gt; y.isSyncA(), "t22"); t21.start(); // ÂêØÂä®t21 t22.start(); // ÂêØÂä®t22 &#125; public static void main(String[] args) &#123; LockTest2 demo = new LockTest2(); demo.test2(); &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910t21 : isSyncAt22 : isSyncAt21 : isSyncAt22 : isSyncAt21 : isSyncAt22 : isSyncAt21 : isSyncAt22 : isSyncAt21 : isSyncAt22 : isSyncA (03) ‰∏çËÉΩË¢´ÂêåÊó∂ËÆøÈóÆ„ÄÇÂõ†‰∏∫cSyncA()ÂíåcSyncB()ÈÉΩÊòØstaticÁ±ªÂûãÔºåx.cSyncA()Áõ∏ÂΩì‰∫éSomething.isSyncA()Ôºåy.cSyncB()Áõ∏ÂΩì‰∫éSomething.isSyncB()ÔºåÂõ†Ê≠§ÂÆÉ‰ª¨ÂÖ±Áî®‰∏Ä‰∏™ÂêåÊ≠•ÈîÅÔºå‰∏çËÉΩË¢´ÂêåÊó∂ÂèçÈóÆ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: ÂÆû‰æãÈîÅÂíåÂÖ®Â±ÄÈîÅÁ§∫‰æã3 * ‰∏çËÉΩË¢´ÂêåÊó∂ËÆøÈóÆ„ÄÇÂõ†‰∏∫cSyncA()ÂíåcSyncB()ÈÉΩÊòØstaticÁ±ªÂûãÔºåx.cSyncA()Áõ∏ÂΩì‰∫éSomething.isSyncA()Ôºåy.cSyncB()Áõ∏ÂΩì‰∫éSomething.isSyncB()ÔºåÂõ†Ê≠§ÂÆÉ‰ª¨ÂÖ±Áî®‰∏Ä‰∏™ÂêåÊ≠•ÈîÅÔºå‰∏çËÉΩË¢´ÂêåÊó∂ÂèçÈóÆ„ÄÇ */public class LockTest3 &#123; Something x = new Something(); Something y = new Something(); /** * ÊØîËæÉ(03) x.cSyncA()‰∏éy.cSyncB() */ private void test3() &#123; // Êñ∞Âª∫t31, t31‰ºöË∞ÉÁî® x.isSyncA() Thread t31 = new Thread( () -&gt; x.cSyncA(), "t31"); // Êñ∞Âª∫t32, t32‰ºöË∞ÉÁî® x.isSyncB() Thread t32 = new Thread( () -&gt; y.cSyncB(), "t32"); t31.start(); // ÂêØÂä®t31 t32.start(); // ÂêØÂä®t32 &#125; public static void main(String[] args) &#123; LockTest3 demo = new LockTest3(); demo.test3(); &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910t31 : cSyncAt31 : cSyncAt31 : cSyncAt31 : cSyncAt31 : cSyncAt32 : cSyncBt32 : cSyncBt32 : cSyncBt32 : cSyncBt32 : cSyncB (04) ÂèØ‰ª•Ë¢´ÂêåÊó∂ËÆøÈóÆ„ÄÇÂõ†‰∏∫isSyncA()ÊòØÂÆû‰æãÊñπÊ≥ïÔºåx.isSyncA()‰ΩøÁî®ÁöÑÊòØÂØπË±°xÁöÑÈîÅÔºõËÄåcSyncA()ÊòØÈùôÊÄÅÊñπÊ≥ïÔºåSomething.cSyncA()ÂèØ‰ª•ÁêÜËß£ÂØπ‰ΩøÁî®ÁöÑÊòØ‚ÄúÁ±ªÁöÑÈîÅ‚Äù„ÄÇÂõ†Ê≠§ÔºåÂÆÉ‰ª¨ÊòØÂèØ‰ª•Ë¢´ÂêåÊó∂ËÆøÈóÆÁöÑ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435package main.java.com.study.thread.synchronizedDemo;/** * @author: whb * @description: ÂÆû‰æãÈîÅÂíåÂÖ®Â±ÄÈîÅÁ§∫‰æã4 * ÂèØ‰ª•Ë¢´ÂêåÊó∂ËÆøÈóÆ„ÄÇÂõ†‰∏∫isSyncA()ÊòØÂÆû‰æãÊñπÊ≥ïÔºåx.isSyncA()‰ΩøÁî®ÁöÑÊòØÂØπË±°xÁöÑÈîÅÔºõËÄåcSyncA()ÊòØÈùôÊÄÅÊñπÊ≥ïÔºåSomething.cSyncA()ÂèØ‰ª•ÁêÜËß£ÂØπ‰ΩøÁî®ÁöÑÊòØ‚ÄúÁ±ªÁöÑÈîÅ‚Äù„ÄÇÂõ†Ê≠§ÔºåÂÆÉ‰ª¨ÊòØÂèØ‰ª•Ë¢´ÂêåÊó∂ËÆøÈóÆÁöÑ„ÄÇ */public class LockTest4 &#123; Something x = new Something(); Something y = new Something(); /** * ÊØîËæÉ(04) x.isSyncA()‰∏éSomething.cSyncA() */ private void test4() &#123; // Êñ∞Âª∫t41, t41‰ºöË∞ÉÁî® x.isSyncA() Thread t41 = new Thread( () -&gt; x.isSyncA(), "t41"); // Êñ∞Âª∫t42, t42‰ºöË∞ÉÁî® x.isSyncB() Thread t42 = new Thread( () -&gt; Something.cSyncA(), "t42"); t41.start(); // ÂêØÂä®t41 t42.start(); // ÂêØÂä®t42 &#125; public static void main(String[] args) &#123; LockTest4 demo = new LockTest4(); demo.test4(); &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910t41 : isSyncAt42 : cSyncAt41 : isSyncAt42 : cSyncAt41 : isSyncAt42 : cSyncAt41 : isSyncAt42 : cSyncAt41 : isSyncAt42 : cSyncA]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Â•áÂÅ∂ÊéíÂ∫è]]></title>
    <url>%2Fposts%2F185015d0.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ Âü∫Êú¨ÊÄùË∑ØÊòØÂ•áÊï∞ÂàóÊéí‰∏ÄË∂üÂ∫è,ÂÅ∂Êï∞ÂàóÊéí‰∏ÄË∂üÂ∫è,ÂÜçÂ•áÊï∞Êéí,ÂÜçÂÅ∂Êï∞Êéí,Áõ¥Âà∞ÂÖ®ÈÉ®ÊúâÂ∫è„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºöÂæÖÊéíÊï∞ÁªÑ[6 2 4 1 5 9] Á¨¨‰∏ÄÊ¨°ÊØîËæÉÂ•áÊï∞Âàó,Â•áÊï∞Âàó‰∏éÂÆÉÁöÑÈÇªÂ±ÖÂÅ∂Êï∞ÂàóÊØîËæÉ,Â¶Ç6Âíå2ÊØî,4Âíå1ÊØî,5Âíå9ÊØî„ÄÇ [6 2 4 1 5 9] ‰∫§Êç¢ÂêéÂèòÊàê [2 6 1 4 5 9] Á¨¨‰∫åÊ¨°ÊØîËæÉÂÅ∂Êï∞Âàó,Âç≥6Âíå1ÊØî,5Âíå5ÊØî„ÄÇ [2 6 1 4 5 9] ‰∫§Êç¢ÂêéÂèòÊàê [2 1 6 4 5 9] Á¨¨‰∏âË∂üÂèàÊòØÂ•áÊï∞Âàó,ÈÄâÊã©ÁöÑÊòØ2,6,5ÂàÜÂà´‰∏éÂÆÉ‰ª¨ÁöÑÈÇªÂ±ÖÂàóÊØîËæÉ„ÄÇ [2 1 6 4 5 9] ‰∫§Êç¢Âêé [1 2 4 6 5 9] Á¨¨ÂõõË∂üÂÅ∂Êï∞Âàó„ÄÇ [1 2 4 6 5 9] ‰∏ÄÊ¨°‰∫§Êç¢ [1 2 4 5 6 9] ‰ª£Á†Å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: Â•áÂÅ∂ÊéíÂ∫èÔºöÂü∫Êú¨ÊÄùË∑ØÊòØÂ•áÊï∞ÂàóÊéí‰∏ÄË∂üÂ∫è,ÂÅ∂Êï∞ÂàóÊéí‰∏ÄË∂üÂ∫è,ÂÜçÂ•áÊï∞Êéí,ÂÜçÂÅ∂Êï∞Êéí,Áõ¥Âà∞ÂÖ®ÈÉ®ÊúâÂ∫è */public class OddEventSort &#123; public static void oddEventSort(int[] unsorted) &#123; int temp; for (int i = unsorted.length - 1; i &gt; unsorted.length / 2 - 1; i--) &#123; //Â•áÊï∞ÊéíÂ∫è for (int j = 1; j &lt;= i; j += 2) &#123; if (j == unsorted.length - 1) &#123; break; &#125; if (unsorted[j] &gt; unsorted[j + 1]) &#123; temp = unsorted[j]; unsorted[j] = unsorted[j + 1]; unsorted[j + 1] = temp; &#125; &#125; //ÂÅ∂Êï∞ÊéíÂ∫è for (int j = 0; j &lt;= i; j += 2) &#123; if (j == unsorted.length - 1) &#123; break; &#125; if (unsorted[j] &gt; unsorted[j + 1]) &#123; temp = unsorted[j]; unsorted[j] = unsorted[j + 1]; unsorted[j + 1] = temp; &#125; &#125; &#125; &#125; public static void main(String[] args) &#123; int[] unsorted = new int[]&#123;12, 33, 45, 33, 13, 55, 34, 7, 6&#125;; System.out.println("**************Â•áÂÅ∂ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); System.out.println("ÊéíÂ∫èÂêéÔºö"); oddEventSort(unsorted); CommonUtils.display(unsorted); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~Â∏∏Áî®ÂëΩ‰ª§]]></title>
    <url>%2Fposts%2Fdb6149c7.html</url>
    <content type="text"><![CDATA[git config --global user.name &quot;‰Ω†ÁöÑÂêçÂ≠ó&quot; ËÆ©‰Ω†ÂÖ®ÈÉ®ÁöÑGit‰ªìÂ∫ìÁªëÂÆö‰Ω†ÁöÑÂêçÂ≠ó git config --global user.email &quot;‰Ω†ÁöÑÈÇÆÁÆ±&quot; ËÆ©‰Ω†ÂÖ®ÈÉ®ÁöÑGit‰ªìÂ∫ìÁªëÂÆö‰Ω†ÁöÑÈÇÆÁÆ± git init ÂàùÂßãÂåñ‰Ω†ÁöÑ‰ªìÂ∫ì git add . ÊääÂ∑•‰ΩúÂå∫ÁöÑÊñá‰ª∂ÂÖ®ÈÉ®Êèê‰∫§Âà∞ÊöÇÂ≠òÂå∫ git add ./&lt;file&gt;/ ÊääÂ∑•‰ΩúÂå∫ÁöÑ&lt;file&gt;Êñá‰ª∂Êèê‰∫§Âà∞ÊöÇÂ≠òÂå∫ git commit -m &quot;xxx&quot; ÊääÊöÇÂ≠òÂå∫ÁöÑÊâÄÊúâÊñá‰ª∂Êèê‰∫§Âà∞‰ªìÂ∫ìÂå∫ÔºåÊöÇÂ≠òÂå∫Á©∫Á©∫Ëç°Ëç° git remote add origin https://github.com/name/name_cangku.git ÊääÊú¨Âú∞‰ªìÂ∫ì‰∏éËøúÁ®ã‰ªìÂ∫ìËøûÊé•Ëµ∑Êù• git push -u origin master Êää‰ªìÂ∫ìÂå∫ÁöÑ‰∏ªÂàÜÊîØmasterÊèê‰∫§Âà∞ËøúÁ®ã‰ªìÂ∫ìÈáå git push -u origin &lt;ÂÖ∂‰ªñÂàÜÊîØ&gt; ÊääÂÖ∂‰ªñÂàÜÊîØÊèê‰∫§Âà∞ËøúÁ®ã‰ªìÂ∫ì git statusÊü•ÁúãÂΩìÂâç‰ªìÂ∫ìÁöÑÁä∂ÊÄÅ git diff Êü•ÁúãÊñá‰ª∂‰øÆÊîπÁöÑÂÖ∑‰ΩìÂÜÖÂÆπ git log ÊòæÁ§∫‰ªéÊúÄËøëÂà∞ÊúÄËøúÁöÑÊèê‰∫§ÂéÜÂè≤ git clone + ‰ªìÂ∫ìÂú∞ÂùÄ‰∏ãËΩΩÂÖãÈöÜÊñá‰ª∂ git reset --hard + ÁâàÊú¨Âè∑ ÂõûÊ∫ØÁâàÊú¨ÔºåÁâàÊú¨Âè∑Âú®commitÁöÑÊó∂ÂÄô‰∏émasterË∑üÈöèÂú®‰∏ÄËµ∑ git reflog ÊòæÁ§∫ÂëΩ‰ª§ÂéÜÂè≤ git checkout -- &lt;file&gt; Êí§ÈîÄÂëΩ‰ª§ÔºåÁî®ÁâàÊú¨Â∫ìÈáåÁöÑÊñá‰ª∂ÊõøÊç¢ÊéâÂ∑•‰ΩúÂå∫ÁöÑÊñá‰ª∂„ÄÇÊàëËßâÂæóÂ∞±ÂÉèÊòØGit‰∏ñÁïåÁöÑctrl + z git rm Âà†Èô§ÁâàÊú¨Â∫ìÁöÑÊñá‰ª∂ git branch Êü•ÁúãÂΩìÂâçÊâÄÊúâÂàÜÊîØ git branch &lt;ÂàÜÊîØÂêçÂ≠ó&gt; ÂàõÂª∫ÂàÜÊîØ git checkout &lt;ÂàÜÊîØÂêçÂ≠ó&gt; ÂàáÊç¢Âà∞ÂàÜÊîØ git merge &lt;ÂàÜÊîØÂêçÂ≠ó&gt; ÂêàÂπ∂ÂàÜÊîØ git branch -d &lt;ÂàÜÊîØÂêçÂ≠ó&gt; Âà†Èô§ÂàÜÊîØ,ÊúâÂèØËÉΩ‰ºöÂà†Èô§Â§±Ë¥•ÔºåÂõ†‰∏∫Git‰ºö‰øùÊä§Ê≤°ÊúâË¢´ÂêàÂπ∂ÁöÑÂàÜÊîØ git branch -D + &lt;ÂàÜÊîØÂêçÂ≠ó&gt; Âº∫Ë°åÂà†Èô§Ôºå‰∏¢ÂºÉÊ≤°Ë¢´ÂêàÂπ∂ÁöÑÂàÜÊîØ git log --graph Êü•ÁúãÂàÜÊîØÂêàÂπ∂Âõæ git merge --no-ff &lt;ÂàÜÊîØÂêçÂ≠ó&gt; ÂêàÂπ∂ÂàÜÊîØÁöÑÊó∂ÂÄôÁ¶ÅÁî®Fast forwardÊ®°Âºè,Âõ†‰∏∫Ëøô‰∏™Ê®°Âºè‰ºö‰∏¢Â§±ÂàÜÊîØÂéÜÂè≤‰ø°ÊÅØ git stash ÂΩìÊúâÂÖ∂‰ªñ‰ªªÂä°ÊèíËøõÊù•Êó∂ÔºåÊääÂΩìÂâçÂ∑•‰ΩúÁé∞Âú∫‚ÄúÂ≠òÂÇ®‚ÄùËµ∑Êù•,‰ª•ÂêéÊÅ¢Â§çÂêéÁªßÁª≠Â∑•‰Ωú git stash list Êü•Áúã‰Ω†ÂàöÂàö‚ÄúÂ≠òÊîæ‚ÄùËµ∑Êù•ÁöÑÂ∑•‰ΩúÂéªÂì™Èáå‰∫Ü git stash apply ÊÅ¢Â§çÂç¥‰∏çÂà†Èô§stashÂÜÖÂÆπ git stash drop Âà†Èô§stashÂÜÖÂÆπ git stash pop ÊÅ¢Â§çÁöÑÂêåÊó∂ÊäästashÂÜÖÂÆπ‰πüÂà†‰∫Ü git remote Êü•ÁúãËøúÁ®ãÂ∫ìÁöÑ‰ø°ÊÅØÔºå‰ºöÊòæÁ§∫originÔºåËøúÁ®ã‰ªìÂ∫ìÈªòËÆ§ÂêçÁß∞‰∏∫origin git remote -v ÊòæÁ§∫Êõ¥ËØ¶ÁªÜÁöÑ‰ø°ÊÅØ git pull ÊääÊúÄÊñ∞ÁöÑÊèê‰∫§‰ªéËøúÁ®ã‰ªìÂ∫ì‰∏≠ÊäìÂèñ‰∏ãÊù•ÔºåÂú®Êú¨Âú∞ÂêàÂπ∂,Âíågit pushÁõ∏Âèç git rebase ÊääÂàÜÂèâÁöÑÊèê‰∫§ÂéÜÂè≤‚ÄúÊï¥ÁêÜ‚ÄùÊàê‰∏ÄÊù°Áõ¥Á∫øÔºåÁúã‰∏äÂéªÊõ¥Áõ¥ËßÇ git tag Êü•ÁúãÊâÄÊúâÊ†áÁ≠æÔºåÂèØ‰ª•Áü•ÈÅìÂéÜÂè≤ÁâàÊú¨ÁöÑtag git tag &lt;name&gt; ÊâìÊ†áÁ≠æÔºåÈªòËÆ§‰∏∫HEAD„ÄÇÊØîÂ¶Çgit tag v1.0 git tag &lt;tagName&gt; &lt;ÁâàÊú¨Âè∑&gt; ÊääÁâàÊú¨Âè∑Êâì‰∏äÊ†áÁ≠æÔºåÁâàÊú¨Âè∑Â∞±ÊòØcommitÊó∂ÔºåË∑üÂú®ÊóÅËæπÁöÑ‰∏Ä‰∏≤Â≠óÊØçÊï∞Â≠ó git show &lt;tagName&gt; Êü•ÁúãÊ†áÁ≠æ‰ø°ÊÅØ git tag -a &lt;tagName&gt; -m &quot;&lt;ËØ¥Êòé&gt;&quot; ÂàõÂª∫Â∏¶ËØ¥ÊòéÁöÑÊ†áÁ≠æ„ÄÇ-aÊåáÂÆöÊ†áÁ≠æÂêçÔºå-mÊåáÂÆöËØ¥ÊòéÊñáÂ≠ó git tag -d &lt;tagName&gt; Âà†Èô§Ê†áÁ≠æ git push origin &lt;tagname&gt; Êé®ÈÄÅÊüê‰∏™Ê†áÁ≠æÂà∞ËøúÁ®ã git push origin --tags ‰∏ÄÊ¨°ÊÄßÊé®ÈÄÅÂÖ®ÈÉ®Â∞öÊú™Êé®ÈÄÅÂà∞ËøúÁ®ãÁöÑÊú¨Âú∞Ê†áÁ≠æ git push origin :refs/tags/&lt;tagname&gt; Âà†Èô§ËøúÁ®ãÊ†áÁ≠æ&lt;tagname&gt; git config --global color.ui true ËÆ©GitÊòæÁ§∫È¢úËâ≤Ôºå‰ºöËÆ©ÂëΩ‰ª§ËæìÂá∫ÁúãËµ∑Êù•Êõ¥ÈÜíÁõÆ git add -f &lt;file&gt; Âº∫Âà∂Êèê‰∫§Â∑≤ÂøΩÁï•ÁöÑÁöÑÊñá‰ª∂ git check-ignore -v &lt;file&gt; Ê£ÄÊü•‰∏∫‰ªÄ‰πàGit‰ºöÂøΩÁï•ËØ•Êñá‰ª∂]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Âø´ÈÄüÊéíÂ∫è]]></title>
    <url>%2Fposts%2F71d3e504.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ 1ÔºâÈÄâÊã©‰∏Ä‰∏™Âü∫ÂáÜÂÖÉÁ¥†,ÈÄöÂ∏∏ÈÄâÊã©Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊàñËÄÖÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†, 2ÔºâÂ¶ÇÊûúÈÄâÊã©Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†‰Ωú‰∏∫Âü∫ÂáÜÂÖÉÁ¥†ÔºåÂàôÂÖà‰ªéÂè≥ÂêëÂ∑¶ÊâæÊØîÂü∫ÂáÜÂÖÉÁ¥†Â∞èÁöÑÂÖÉÁ¥†ÔºåÂÜç‰ªéÂ∑¶ÂêëÂè≥ÊâæÊØîÂü∫ÂáÜÂÖÉÁ¥†Â§ßÁöÑÂÖÉÁ¥†Ôºå‰∫§Êç¢Ëøô‰∏§‰∏™ÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆ„ÄÇÔºàÂ¶ÇÊûúÈÄâÊã©ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÂÅöÂü∫ÂáÜÂÖÉÁ¥†ÔºåÂàôÂÖà‰ªéÂ∑¶ÂêëÂè≥ÊâæÔºâÁõ¥Âà∞ÊâæÂà∞Âêå‰∏Ä‰ΩçÁΩÆÔºåË∑üÂü∫ÂáÜÂÖÉÁ¥†‰ΩçÁΩÆ‰∫§Êç¢ÔºåÁ¨¨‰∏ÄË∂üÊéíÂ∫èÂ∞±ÁªìÊùü„ÄÇ 3ÔºâÈÄöËøá‰∏ÄË∂üÊéíÂ∫èÂ∞ÜËÆ∞ÂΩïÂàÜÂâ≤ÊàêÁã¨Á´ãÁöÑ‰∏§ÈÉ®ÂàÜÔºåÂÖ∂‰∏≠‰∏ÄÈÉ®ÂàÜËÆ∞ÂΩïÁöÑÂÖÉÁ¥†ÂÄºÂùáÊØîÂü∫ÂáÜÂÖÉÁ¥†ÂÄºÂ∞è„ÄÇÂè¶‰∏ÄÈÉ®ÂàÜËÆ∞ÂΩïÁöÑÂÖÉÁ¥†ÂÄºÊØîÂü∫ÂáÜÂÄºÂ§ß„ÄÇ 4ÔºâÊ≠§Êó∂Âü∫ÂáÜÂÖÉÁ¥†Âú®ÂÖ∂ÊéíÂ•ΩÂ∫èÂêéÁöÑÊ≠£Á°Æ‰ΩçÁΩÆ 5ÔºâÁÑ∂ÂêéÂàÜÂà´ÂØπËøô‰∏§ÈÉ®ÂàÜËÆ∞ÂΩïÁî®ÂêåÊ†∑ÁöÑÊñπÊ≥ïÁªßÁª≠ËøõË°åÊéíÂ∫èÔºåÁõ¥Âà∞Êï¥‰∏™Â∫èÂàóÊúâÂ∫è„ÄÇ ÁÆóÊ≥ïÊµÅÁ®ãÂõæ Âø´ÈÄüÊéíÂ∫è‰πãÊâÄÊØîËæÉÂø´ÔºåÂõ†‰∏∫Áõ∏ÊØîÂÜíÊ≥°ÊéíÂ∫èÔºåÊØèÊ¨°‰∫§Êç¢ÊòØË∑≥Ë∑ÉÂºèÁöÑ„ÄÇÊØèÊ¨°ÊéíÂ∫èÁöÑÊó∂ÂÄôËÆæÁΩÆ‰∏Ä‰∏™Âü∫ÂáÜÁÇπÔºåÂ∞ÜÂ∞è‰∫éÁ≠â‰∫éÂü∫ÂáÜÁÇπÁöÑÊï∞ÂÖ®ÈÉ®ÊîæÂà∞Âü∫ÂáÜÁÇπÁöÑÂ∑¶ËæπÔºåÂ∞ÜÂ§ß‰∫éÁ≠â‰∫éÂü∫ÂáÜÁÇπÁöÑÊï∞ÂÖ®ÈÉ®ÊîæÂà∞Âü∫ÂáÜÁÇπÁöÑÂè≥Ëæπ„ÄÇËøôÊ†∑Âú®ÊØèÊ¨°‰∫§Êç¢ÁöÑÊó∂ÂÄôÂ∞±‰∏ç‰ºöÂÉèÂÜíÊ≥°ÊéíÂ∫è‰∏ÄÊ†∑ÊØèÊ¨°Âè™ËÉΩÂú®Áõ∏ÈÇªÁöÑÊï∞‰πãÈó¥ËøõË°å‰∫§Êç¢Ôºå‰∫§Êç¢ÁöÑË∑ùÁ¶ªÂ∞±Â§ßÁöÑÂ§ö‰∫Ü„ÄÇÂõ†Ê≠§ÊÄªÁöÑÊØîËæÉÂíå‰∫§Êç¢Ê¨°Êï∞Â∞±Â∞ë‰∫ÜÔºåÈÄüÂ∫¶Ëá™ÁÑ∂Â∞±ÊèêÈ´ò‰∫Ü„ÄÇÂΩìÁÑ∂Âú®ÊúÄÂùèÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ªçÂèØËÉΩÊòØÁõ∏ÈÇªÁöÑ‰∏§‰∏™Êï∞ËøõË°å‰∫Ü‰∫§Êç¢„ÄÇÂõ†Ê≠§Âø´ÈÄüÊéíÂ∫èÁöÑÊúÄÂ∑ÆÊó∂Èó¥Â§çÊùÇÂ∫¶ÂíåÂÜíÊ≥°ÊéíÂ∫èÊòØ‰∏ÄÊ†∑ÁöÑÈÉΩÊòØO(N2)ÔºåÂÆÉÁöÑÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(NlogN)„ÄÇ ‰ª£Á†ÅÂ¶Ç‰∏ã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: Âø´ÈÄüÊéíÂ∫è */public class QuickSort &#123; /** * Âø´ÈÄüÊéíÂ∫èÁöÑÂü∫Êú¨ÊÄùÊÉ≥ÊòØÔºåÈÄöËøá‰∏ÄË∂üÊéíÂ∫èÂ∞ÜÂæÖÊéíËÆ∞ÂΩïÂàÜÂâ≤ÊàêÁã¨Á´ãÁöÑ‰∏§ÈÉ®ÂàÜÔºåÂÖ∂‰∏≠‰∏ÄÈÉ®ÂàÜËÆ∞ÂΩïÁöÑÂÖ≥ÈîÆÂ≠óÂùáÊØîÂè¶‰∏ÄÈÉ®ÂàÜËÆ∞ÂΩïÁöÑÂÖ≥ÈîÆÂ≠óÂ∞èÔºåÂàôÂèØÂàÜÂà´ÂØπËøô‰∏§ÈÉ®ÂàÜËÆ∞ÂΩïÁªßÁª≠ËøõË°åÊéíÂ∫èÔºå‰ª•ËææÂà∞Êï¥‰∏™Â∫èÂàóÊúâÂ∫è„ÄÇ * &lt;p&gt; * ‰∏ÄË∂üÂø´ÈÄüÊéíÂ∫èÔºàÊàñ‰∏ÄÊ¨°ÂàíÂàÜÔºâÁöÑËøáÁ®ãÂ¶Ç‰∏ãÔºöÈ¶ñÂÖà‰ªªÊÑèÈÄâÂèñ‰∏Ä‰∏™ËÆ∞ÂΩïÔºàÈÄöÂ∏∏ÂèØÈÄâÁ¨¨‰∏Ä‰∏™ËÆ∞ÂΩïÔºâ‰Ωú‰∏∫Êû¢ËΩ¥ÔºàÊàñÊîØÁÇπÔºâÔºàpivotÔºâÔºåÁÑ∂ÂêéÊåâ‰∏ãÂàóÂéüÂàôÈáçÊñ∞ÊéíÂàóÂÖ∂‰ΩôËÆ∞ÂΩïÔºöÂ∞ÜÊâÄÊúâÂÖ≥ÈîÆÂ≠óÊØîÂÆÉÂ∞èÁöÑËÆ∞ÂΩïÈÉΩÂÆâÁΩÆÂú®ÂÆÉÁöÑ‰ΩçÁΩÆ‰πãÂâçÔºåÂ∞ÜÊâÄÊúâÂÖ≥ÈîÆÂ≠óÊØîÂÆÉÂ§ßÁöÑËÆ∞ÂΩïÈÉΩÂÆâÁΩÆÂú®ÂÆÉÁöÑ‰ΩçÁΩÆ‰πãÂêé„ÄÇ * &lt;p&gt; * ÁªèËøá‰∏ÄË∂üÂø´ÈÄüÊéíÂ∫è‰πãÂêéÔºå‰ª•ËØ•Êû¢ËΩ¥ËÆ∞ÂΩïÊúÄÂêéÊâÄËêΩÁöÑ‰ΩçÁΩÆi‰ΩúÂàÜÁïåÁ∫øÔºåÂ∞ÜÂ∫èÂàóÂàÜÂâ≤Êàê‰∏§‰∏™Â≠êÂ∫èÂàóÔºå‰πãÂêéÂÜçÂàÜÂà´ÂØπÂàÜÂâ≤ÊâÄÂæóÁöÑ‰∏§‰∏™Â≠êÂ∫èÂàóËøõË°åÂø´ÈÄüÊéíÂ∫è„ÄÇ * &lt;p&gt; * ÂèØ‰ª•ÁúãÂá∫Ëøô‰∏™ÁÆóÊ≥ïÂèØ‰ª•ÈÄíÂΩíÂÆûÁé∞ÔºåÂèØ‰ª•Áî®‰∏Ä‰∏™ÂáΩÊï∞Êù•ÂÆûÁé∞ÂàíÂàÜÔºåÂπ∂ËøîÂõûÂàÜÁïå‰ΩçÁΩÆ„ÄÇÁÑ∂Âêé‰∏çÊñ≠Âú∞Ëøô‰πàÂàÜ‰∏ãÂéªÁõ¥Âà∞ÊéíÂ∫èÂÆåÊàêÔºåÂèØ‰ª•ÁúãÂá∫ÂáΩÊï∞ÁöÑËæìÂÖ•ÂèÇÊï∞ÈúÄË¶ÅÊèê‰æõÂ∫èÂàóÁöÑÈ¶ñÂ∞æ‰ΩçÁΩÆ„ÄÇ */ public static void quickSort(int[] numArr, int left, int right) &#123; //‰∏çÁÆ°‰ΩøÁî®Âì™ÁßçÂàÜÂâ≤ÊñπÂºèÔºåÈÉΩÂèØ‰ª•ÈÄöËøáÈÄíÂΩíÂΩ¢ÂºèËøõË°åÊéíÂ∫è // ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØËøô‰∏™ifËØ≠Âè•‰∏çËÉΩÂ∞ëÔºå‰∏çÁÑ∂Ê≤°Ê≥ïÂÅúÊ≠¢Ôºå‰ºöÂØºËá¥Â†ÜÊ†àÊ∫¢Âá∫ÁöÑÂºÇÂ∏∏„ÄÇ if (left &lt; right) &#123; //ÂàÜÂâ≤Êï∞ÁªÑÔºåÊâæÂà∞ÂàÜÂâ≤ÁÇπ int point = partitionTwo(numArr, left, right); //ÈÄíÂΩíË∞ÉÁî®ÔºåÂØπÂ∑¶Â≠êÊï∞ÁªÑËøõË°åÂø´ÈÄüÊéíÂ∫è quickSort(numArr, left, point - 1); //ÈÄíÂΩíË∞ÉÁî®ÔºåÂØπÂè≥Â≠êÊï∞ÁªÑËøõË°åÂø´ÈÄüÊéíÂ∫è quickSort(numArr, point + 1, right); &#125; &#125; /** * ÂàíÂàÜÂÆûÁé∞1 ÔºàÊû¢ËΩ¥Ë∑≥Êù•Ë∑≥ÂéªÊ≥ïÔºâ * ‰∏ÄË∂üÂø´ÈÄüÊéíÂ∫èÁöÑÂÆûÁé∞ÔºöËÆæ‰∏§‰∏™ÊåáÈíàleftÂíårightÔºåËÆæÊû¢ËΩ¥ËÆ∞ÂΩïÁöÑÂÖ≥ÈîÆÂ≠ó‰∏∫firstÔºåÂàôÈ¶ñÂÖà‰ªérightÊâÄÊåá‰ΩçÁΩÆËµ∑ÂêëÂâçÊêúÁ¥¢ÊâæÂà∞Á¨¨‰∏Ä‰∏™ÂÖ≥ÈîÆÂ≠óÂ∞è‰∫éfirstÁöÑËÆ∞ÂΩïÂíåÊû¢ËΩ¥ËÆ∞ÂΩï‰∫íÁõ∏‰∫§Êç¢Ôºå * ÁÑ∂Âêé‰ªéleftÊâÄÊåá‰ΩçÁΩÆËµ∑ÂêëÂêéÊêúÁ¥¢ÔºåÊâæÂà∞Á¨¨‰∏Ä‰∏™ÂÖ≥ÈîÆÂ≠óÂ§ß‰∫éfirstÁöÑËÆ∞ÂΩïÂíåÊû¢ËΩ¥ËÆ∞ÂΩï‰∫íÁõ∏‰∫§Êç¢ÔºåÈáçÂ§çËøô‰∏§Ê≠•Áõ¥Ëá≥left==right‰∏∫Ê≠¢„ÄÇ */ public static int partitionOne(int[] numArr, int left, int right) &#123; //Áî®Êï∞ÁªÑÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÂÅöÂü∫ÂáÜÂÖÉÁ¥† int first = numArr[left]; while (left &lt; right) &#123; while (left &lt; right &amp;&amp; numArr[right] &gt;= first) &#123; right--; &#125; //‰∫§Êç¢ swap(numArr, left, right); while (left &lt; right &amp;&amp; numArr[left] &lt;= first) &#123; left++; &#125; //‰∫§Êç¢ swap(numArr, left, right); &#125; //ËøîÂõûÂàÜÂâ≤ÁÇπÊâÄÂú®ÁöÑ‰ΩçÁΩÆ return left; &#125; /** * ÂàíÂàÜÂÆûÁé∞2 ÔºàÊû¢ËΩ¥‰∏ÄÊ¨°Âà∞‰ΩçÊ≥ïÔºâ * partitionOneÂÆûÁé∞ÂèØ‰ª•ÁúãÂá∫ÔºåÊû¢ËΩ¥ÂÖÉÁ¥†ÔºàÂç≥ÊúÄÂºÄÂßãÈÄâÁöÑ‚Äú‰∏≠Èó¥‚ÄùÂÖÉÁ¥†ÔºàÂÖ∂ÂÆûÂæÄÂæÄÊòØÊãøÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†‰Ωú‰∏∫‚Äú‰∏≠Èó¥‚ÄùÂÖÉÁ¥†ÔºâÔºâÈúÄË¶Å‰∏çÊñ≠Âú∞ÂíåÂÖ∂‰ªñÂÖÉÁ¥†‰∫§Êç¢‰ΩçÁΩÆÔºåËÄåÊØè‰∫§Êç¢‰∏ÄÊ¨°‰ΩçÁΩÆÂÆûÈôÖ‰∏äÈúÄË¶Å‰∏âÊ¨°ËµãÂÄºÊìç‰Ωú„ÄÇ * &lt;p&gt; * ÂÆûÈôÖ‰∏äÔºåÂè™ÊúâÊúÄÂêéleft=rightÁöÑ‰ΩçÁΩÆÊâçÊòØÊû¢ËΩ¥ÂÖÉÁ¥†ÁöÑÊúÄÁªà‰ΩçÁΩÆÔºåÊâÄ‰ª•ÂèØ‰ª•ÂÖàÂ∞ÜÊû¢ËΩ¥ÂÖÉÁ¥†‰øùÂ≠òËµ∑Êù•ÔºåÊéíÂ∫èËøáÁ®ã‰∏≠Âè™‰ΩúÂÖÉÁ¥†ÁöÑÂçïÂêëÁßªÂä®ÔºåÁõ¥Ëá≥‰∏ÄË∂üÊéíÂ∫èÁªìÊùüÂêéÂÜçÂ∞ÜÊû¢ËΩ¥ÂÖÉÁ¥†ÁßªËá≥Ê≠£Á°ÆÁöÑ‰ΩçÁΩÆ‰∏ä„ÄÇ * * @return */ public static int partitionTwo(int[] numArr, int left, int right) &#123; int first = numArr[left]; int temp = numArr[left]; while (left &lt; right) &#123; while (left &lt; right &amp;&amp; numArr[right] &gt;= first) &#123; right--; &#125; numArr[left] = numArr[right]; while (left &lt; right &amp;&amp; numArr[left] &lt;= first) &#123; left++; &#125; numArr[right] = numArr[left]; &#125; numArr[left] = temp; return left; &#125; /** * ‰∫§Êç¢Êï∞ÁªÑ‰∏≠‰∏§‰∏™‰ΩçÁΩÆÁöÑÂÖÉÁ¥† */ public static void swap(int[] numArr, int left, int right) &#123; int temp = 0; if (numArr != null &amp;&amp; numArr.length &gt; 0) &#123; temp = numArr[left]; numArr[left] = numArr[right]; numArr[right] = temp; &#125; &#125; public static void main(String[] args) &#123; int[] numArr = &#123;27, 11, 13, 45, 34, 22, 19, 8, 3, 99, 74, 55, 88, 66&#125;; System.out.println("**************Âø´ÈÄüÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(numArr); System.out.println("ÊéíÂ∫èÂêéÔºö"); quickSort(numArr, 0, numArr.length - 1); CommonUtils.display(numArr); &#125;&#125; CommonUtilsÂ∑•ÂÖ∑Á±ªÔºö 12345678910111213141516171819202122package main.java.com.study.utils;/** * @author: whb * @description: Â∑•ÂÖ∑Á±ª */public class CommonUtils &#123; /** * ÈÅçÂéÜÊâìÂç∞ * * @param numArr */ public static void display(int[] numArr) &#123; if (numArr != null &amp;&amp; numArr.length &gt; 0) &#123; for (int num : numArr) &#123; System.out.print(num + " "); &#125; &#125; System.out.println(""); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - ÂÜíÊ≥°ÊéíÂ∫è]]></title>
    <url>%2Fposts%2F9ab57c2f.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ Âú®Ë¶ÅÊéíÂ∫èÁöÑ‰∏ÄÁªÑÊï∞‰∏≠ÔºåÂØπÂΩìÂâçËøòÊú™ÊéíÂ•ΩÂ∫èÁöÑËåÉÂõ¥ÂÜÖÁöÑÂÖ®ÈÉ®Êï∞ÔºåËá™‰∏äËÄå‰∏ãÂØπÁõ∏ÈÇªÁöÑ‰∏§‰∏™Êï∞‰æùÊ¨°ËøõË°åÊØîËæÉÂíåË∞ÉÊï¥ÔºåËÆ©ËæÉÂ§ßÁöÑÊï∞ÂæÄ‰∏ãÊ≤âÔºåËæÉÂ∞èÁöÑÂæÄ‰∏äÂÜí„ÄÇÂç≥ÔºöÊØèÂΩì‰∏§Áõ∏ÈÇªÁöÑÊï∞ÊØîËæÉÂêéÂèëÁé∞ÂÆÉ‰ª¨ÁöÑÊéíÂ∫è‰∏éÊéíÂ∫èË¶ÅÊ±ÇÁõ∏ÂèçÊó∂ÔºåÂ∞±Â∞ÜÂÆÉ‰ª¨‰∫íÊç¢„ÄÇ ÁÆóÊ≥ïÊ≠•È™§ ÊØîËæÉÁõ∏ÈÇªÁöÑÂÖÉÁ¥†„ÄÇÂ¶ÇÊûúÁ¨¨‰∏Ä‰∏™ÊØîÁ¨¨‰∫å‰∏™Â§ßÔºåÂ∞±‰∫§Êç¢‰ªñ‰ª¨‰∏§‰∏™„ÄÇ ÂØπÊØè‰∏ÄÂØπÁõ∏ÈÇªÂÖÉÁ¥†‰ΩúÂêåÊ†∑ÁöÑÂ∑•‰ΩúÔºå‰ªéÂºÄÂßãÁ¨¨‰∏ÄÂØπÂà∞ÁªìÂ∞æÁöÑÊúÄÂêé‰∏ÄÂØπ„ÄÇÂú®Ëøô‰∏ÄÁÇπÔºåÊúÄÂêéÁöÑÂÖÉÁ¥†Â∫îËØ•‰ºöÊòØÊúÄÂ§ßÁöÑÊï∞„ÄÇ ÈíàÂØπÊâÄÊúâÁöÑÂÖÉÁ¥†ÈáçÂ§ç‰ª•‰∏äÁöÑÊ≠•È™§ÔºåÈô§‰∫ÜÊúÄÂêé‰∏Ä‰∏™„ÄÇ ÊåÅÁª≠ÊØèÊ¨°ÂØπË∂äÊù•Ë∂äÂ∞ëÁöÑÂÖÉÁ¥†ÈáçÂ§ç‰∏äÈù¢ÁöÑÊ≠•È™§ÔºåÁõ¥Âà∞Ê≤°Êúâ‰ªª‰Ωï‰∏ÄÂØπÊï∞Â≠óÈúÄË¶ÅÊØîËæÉ„ÄÇ ÁÆóÊ≥ïÊµÅÁ®ãÂõæ ÁÆóÊ≥ïÊîπËøõ ÂØπÂÜíÊ≥°ÊéíÂ∫èÂ∏∏ËßÅÁöÑÊîπËøõÊñπÊ≥ïÊòØÂä†ÂÖ•‰∏ÄÊ†áÂøóÊÄßÂèòÈáèexchangeÔºåÁî®‰∫éÊ†áÂøóÊüê‰∏ÄË∂üÊéíÂ∫èËøáÁ®ã‰∏≠ÊòØÂê¶ÊúâÊï∞ÊçÆ‰∫§Êç¢ÔºåÂ¶ÇÊûúËøõË°åÊüê‰∏ÄË∂üÊéíÂ∫èÊó∂Âπ∂Ê≤°ÊúâËøõË°åÊï∞ÊçÆ‰∫§Êç¢ÔºåÂàôËØ¥ÊòéÊï∞ÊçÆÂ∑≤ÁªèÊåâË¶ÅÊ±ÇÊéíÂàóÂ•ΩÔºåÂèØÁ´ãÂç≥ÁªìÊùüÊéíÂ∫èÔºåÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÊØîËæÉËøáÁ®ã„ÄÇ ‰ª£Á†Å 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: ÂÜíÊ≥°ÊéíÂ∫è */public class BubbleSort &#123; /** * ÂÜíÊ≥°ÊéíÂ∫èÁöÑËøáÁ®ãÂæàÁÆÄÂçïÔºåÂ∞±ÊòØ‰∏çÊñ≠ÊØîËæÉÁõ∏ÈÇª‰∏§‰∏™ÂÖÉÁ¥†ÁöÑÂ§ßÂ∞èÂÖ≥Á≥ªÔºåËã•ÈÄÜÂ∫èÂàô‰∫§Êç¢ÔºåËøôÊ†∑ÈÄöËøá‰∏ÄËΩÆÊØîËæÉÔºåÂÖ≥Â≠êÂÅ•ÊúÄÂ§ßÁöÑËÆ∞ÂΩïÂ∞±Ê≤âÂ∫ï‰∫Ü„ÄÇ * ‰∏ÄËà¨Âú∞ÔºåÁ¨¨iË∂üÂÜíÊ≥°ÊéíÂ∫è‰ªéÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†Ëµ∑Âà∞Á¨¨n-i+1‰∏™ÂÖÉÁ¥†‰æùÊ¨°ÊØîËæÉÁõ∏ÈÇª‰∏§‰∏™ËÆ∞ÂΩïÁöÑÂÖ≥ÈîÆÂ≠óÔºåÂπ∂Âú®ÈÄÜÂ∫èÊó∂‰∫§Êç¢Áõ∏ÈÇªËÆ∞ÂΩïÔºåÂÖ∂ÁªìÊûúÂ∞±ÊòØËøôn-i+1‰∏™ËÆ∞ÂΩï‰∏≠ÂÖ≥ÈîÆÂ≠óÊúÄÂ§ßÁöÑËÆ∞ÂΩïË¢´‰∫§Êç¢Âà∞n-i+1ÁöÑ‰ΩçÁΩÆ‰∏ä„ÄÇ * ÂΩìÁÑ∂‰πüÂèØ‰ª•ÂèçËøáÊù•Ôºå‰ªéÂêéÂæÄÂâçËøõË°åÔºåËøôÊ†∑ÊØèÁªèËøá‰∏ÄË∂üÊéíÂ∫èÔºåÂ∞±ÊääÊú™ÊéíÂ∫èÁöÑÂ∫èÂàó‰∏≠ÊúÄÂ∞èÁöÑÂÖÉÁ¥†ÊîæÂú®ÂÆÉÂ∫îÂΩìÂ§Ñ‰∫éÁöÑ‰ΩçÁΩÆ‰∏äÔºåÁÑ∂Âêé‰∏ãÊ¨°ÊØîËæÉÂ∞±‰∏çÂÜçËÆ©ÂâçÈù¢ÁöÑÂÖÉÁ¥†ÂèÇ‰∏é‰∫Ü„ÄÇ * Êï¥‰∏™ÊéíÂ∫èËøáÁ®ãÈúÄË¶ÅËøõË°åkË∂üÂÜíÊ≥°ÊéíÂ∫èÔºåÂÖ∂‰∏≠kËá≥Â∞ë‰∏∫1ÔºåËá≥Â§ö‰∏∫n-1Ê¨°ÔºåÂ¶ÇÊûú‰∏ÄË∂üÂÜíÊ≥°ÊéíÂ∫è‰∏≠Ê≤°ÊúâÂá∫Áé∞‰∫§Êç¢ÂÖÉÁ¥†ÁöÑÊìç‰ΩúÔºåÂàôËØ¥ÊòéÂ∫èÂàóÂ∑≤ÁªèÊúâÂ∫è‰∫ÜÔºåÂèØ‰ª•ÂÅúÊ≠¢ÊéíÂ∫è‰∫Ü„ÄÇ * Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöÊ≠£Â∫èÊó∂O(n)Ôºå ÈÄÜÂ∫èÊó∂O(n2)ÔºåÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÊÄßO(n2)„ÄÇ‰ΩøÁî®temp ‰Ωú‰∏∫‰∏¥Êó∂‰∫§Êç¢ÂèòÈáèÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(1). * &lt;p&gt; * ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãË≤å‰ººÊïàÁéá‰∏çÂèäÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÔºàÂ∞ΩÁÆ°ÂÆÉ‰ª¨ÁöÑÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÉΩÊòØO(n2)Ôºâ„ÄÇ */ public static void bubbleSort(int[] numArr) &#123; int length = numArr.length; //ÊúÄÂ§ölength-1Ê¨°ÊéíÂ∫è for (int i = 0; i &lt; length; i++) &#123; //ÊØè‰∏ÄËΩÆÂ§öÂ∞ëÂÖÉÁ¥†ÂèÇ‰∏éÊéíÂ∫è for (int j = 0; j &lt; length - 1 - i; j++) &#123; if (numArr[j] &gt; numArr[j + 1]) &#123; /** * ‰∫§Êç¢È°∫Â∫èÔºå‰∏ç‰ΩøÁî®‰∏¥Êó∂ÂèòÈáèÔºåÂà©Áî® * a = a + b; * b = a - b; * a = a - b; */ numArr[j] = numArr[j] + numArr[j + 1]; numArr[j + 1] = numArr[j] - numArr[j + 1]; numArr[j] = numArr[j] - numArr[j + 1]; &#125; &#125; &#125; &#125; /** * ÊîπËøõÁâàÂÜíÊ≥°ÔºöÂΩìÊüêË∂üÊéíÂ∫èÊ≤°ÊúâÂÖÉÁ¥†‰∫§Êç¢ÁöÑÊó∂ÂÄôÔºåËØÅÊòéÊï¥‰∏™Â∫èÂàóÊúâÂ∫èÔºåÊó†ÈúÄÂÜçÂæ™ÁéØÊØîËæÉ * * @param numArr */ public static void bubbleSortImprove(int[] numArr) &#123; int length = numArr.length; //ËÆæÁΩÆÊ†áÂøóÂèòÈáèÔºåËøôÊ†∑ÂΩìÂ∫èÂàóÊúâÂ∫èÊó∂ÂèäÊó∂ÈÄÄÂá∫Âæ™ÁéØÔºåÈÅøÂÖçÂÜó‰ΩôÂ§ÑÁêÜ„ÄÇ boolean sorted = false; //ÊúÄÂ§ölength-1Ê¨°ÊéíÂ∫è for (int i = 0; i &lt; length; i++) &#123; sorted = true; //ÊØè‰∏ÄËΩÆÂ§öÂ∞ëÂÖÉÁ¥†ÂèÇ‰∏éÊéíÂ∫è for (int j = 0; j &lt; length - 1 - i; j++) &#123; if (numArr[j] &gt; numArr[j + 1]) &#123; /** * ‰∫§Êç¢È°∫Â∫èÔºå‰∏ç‰ΩøÁî®‰∏¥Êó∂ÂèòÈáèÔºåÂà©Áî® * a = a + b; * b = a - b; * a = a - b; */ numArr[j] = numArr[j] + numArr[j + 1]; numArr[j + 1] = numArr[j] - numArr[j + 1]; numArr[j] = numArr[j] - numArr[j + 1]; sorted = false; &#125; &#125; if (sorted) &#123; break; &#125; &#125; &#125; public static void main(String[] args) &#123; int[] numArr = &#123;27, 11, 13, 45, 34, 22, 19, 8, 3, 99, 74, 55, 88, 66&#125;; System.out.println("**************ÂÜíÊ≥°ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(numArr); System.out.println("ÊéíÂ∫èÂêéÔºö"); bubbleSortImprove(numArr); CommonUtils.display(numArr); &#125;&#125; CommonUtilsÂ∑•ÂÖ∑Á±ªÔºö 12345678910111213141516171819202122package main.java.com.study.utils;/** * @author: whb * @description: Â∑•ÂÖ∑Á±ª */public class CommonUtils &#123; /** * ÈÅçÂéÜÊâìÂç∞ * * @param numArr */ public static void display(int[] numArr) &#123; if (numArr != null &amp;&amp; numArr.length &gt; 0) &#123; for (int num : numArr) &#123; System.out.print(num + " "); &#125; &#125; System.out.println(""); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Â†ÜÊéíÂ∫è]]></title>
    <url>%2Fposts%2F1ca0adae.html</url>
    <content type="text"><![CDATA[Â†ÜÊéíÂ∫èÊòØ‰∏ÄÁßçÊ†ëÂΩ¢ÈÄâÊã©ÊéíÂ∫èÔºåÊòØÂØπÁõ¥Êé•ÈÄâÊã©ÊéíÂ∫èÁöÑÊúâÊïàÊîπËøõ„ÄÇ Âü∫Êú¨ÊÄùÊÉ≥ Â†ÜÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºöÂÖ∑Êúân‰∏™ÂÖÉÁ¥†ÁöÑÂ∫èÂàóÔºàk1,k2,...,kn),ÂΩì‰∏î‰ªÖÂΩìÊª°Ë∂≥ Êó∂Áß∞‰πã‰∏∫Â†Ü„ÄÇÁî±Â†ÜÁöÑÂÆö‰πâÂèØ‰ª•ÁúãÂá∫ÔºåÂ†ÜÈ°∂ÂÖÉÁ¥†ÔºàÂç≥Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºâÂøÖ‰∏∫ÊúÄÂ∞èÈ°πÔºàÂ∞èÈ°∂Â†ÜÔºâ„ÄÇ Ëã•‰ª•‰∏ÄÁª¥Êï∞ÁªÑÂ≠òÂÇ®‰∏Ä‰∏™Â†ÜÔºåÂàôÂ†ÜÂØπÂ∫î‰∏ÄÊ£µÂÆåÂÖ®‰∫åÂèâÊ†ëÔºå‰∏îÊâÄÊúâÈùûÂè∂ÁªìÁÇπÁöÑÂÄºÂùá‰∏çÂ§ß‰∫é(Êàñ‰∏çÂ∞è‰∫é)ÂÖ∂Â≠êÂ•≥ÁöÑÂÄºÔºåÊ†πÁªìÁÇπÔºàÂ†ÜÈ°∂ÂÖÉÁ¥†ÔºâÁöÑÂÄºÊòØÊúÄÂ∞è(ÊàñÊúÄÂ§ß)ÁöÑ„ÄÇÂ¶ÇÔºö ÔºàaÔºâÂ§ßÈ°∂Â†ÜÂ∫èÂàóÔºöÔºà96, 83,27,38,11,09) ÔºàbÔºâÂ∞èÈ°∂Â†ÜÂ∫èÂàóÔºöÔºà12Ôºå36Ôºå24Ôºå85Ôºå47Ôºå30Ôºå53Ôºå91Ôºâ ÂàùÂßãÊó∂ÊääË¶ÅÊéíÂ∫èÁöÑn‰∏™Êï∞ÁöÑÂ∫èÂàóÁúã‰ΩúÊòØ‰∏ÄÊ£µÈ°∫Â∫èÂ≠òÂÇ®ÁöÑ‰∫åÂèâÊ†ëÔºà‰∏ÄÁª¥Êï∞ÁªÑÂ≠òÂÇ®‰∫åÂèâÊ†ëÔºâÔºåË∞ÉÊï¥ÂÆÉ‰ª¨ÁöÑÂ≠òÂÇ®È°∫Â∫èÔºå‰Ωø‰πãÊàê‰∏∫‰∏Ä‰∏™Â†ÜÔºåÂ∞ÜÂ†ÜÈ°∂ÂÖÉÁ¥†ËæìÂá∫ÔºåÂæóÂà∞n ‰∏™ÂÖÉÁ¥†‰∏≠ÊúÄÂ∞è(ÊàñÊúÄÂ§ß)ÁöÑÂÖÉÁ¥†ÔºåËøôÊó∂Â†ÜÁöÑÊ†πËäÇÁÇπÁöÑÊï∞ÊúÄÂ∞èÔºàÊàñËÄÖÊúÄÂ§ßÔºâ„ÄÇÁÑ∂ÂêéÂØπÂâçÈù¢(n-1)‰∏™ÂÖÉÁ¥†ÈáçÊñ∞Ë∞ÉÊï¥‰Ωø‰πãÊàê‰∏∫Â†ÜÔºåËæìÂá∫Â†ÜÈ°∂ÂÖÉÁ¥†ÔºåÂæóÂà∞n ‰∏™ÂÖÉÁ¥†‰∏≠Ê¨°Â∞è(ÊàñÊ¨°Â§ß)ÁöÑÂÖÉÁ¥†„ÄÇ‰æùÊ≠§Á±ªÊé®ÔºåÁõ¥Âà∞Âè™Êúâ‰∏§‰∏™ËäÇÁÇπÁöÑÂ†ÜÔºåÂπ∂ÂØπÂÆÉ‰ª¨‰Ωú‰∫§Êç¢ÔºåÊúÄÂêéÂæóÂà∞Êúân‰∏™ËäÇÁÇπÁöÑÊúâÂ∫èÂ∫èÂàó„ÄÇÁß∞Ëøô‰∏™ËøáÁ®ã‰∏∫Â†ÜÊéíÂ∫è„ÄÇ Âõ†Ê≠§ÔºåÂÆûÁé∞Â†ÜÊéíÂ∫èÈúÄËß£ÂÜ≥‰∏§‰∏™ÈóÆÈ¢òÔºö Â¶Ç‰ΩïÂ∞Ün ‰∏™ÂæÖÊéíÂ∫èÁöÑÊï∞Âª∫ÊàêÂ†ÜÔºõ ËæìÂá∫Â†ÜÈ°∂ÂÖÉÁ¥†ÂêéÔºåÊÄéÊ†∑Ë∞ÉÊï¥Ââ©‰Ωôn-1 ‰∏™ÂÖÉÁ¥†Ôºå‰ΩøÂÖ∂Êàê‰∏∫‰∏Ä‰∏™Êñ∞Â†Ü„ÄÇ È¶ñÂÖàËÆ®ËÆ∫Á¨¨‰∫å‰∏™ÈóÆÈ¢òÔºöËæìÂá∫Â†ÜÈ°∂ÂÖÉÁ¥†ÂêéÔºåÂØπÂâ©‰Ωôn-1ÂÖÉÁ¥†ÈáçÊñ∞Âª∫ÊàêÂ†ÜÁöÑË∞ÉÊï¥ËøáÁ®ã„ÄÇ Ë∞ÉÊï¥Â∞èÈ°∂Â†ÜÁöÑÊñπÊ≥ïÔºö 1ÔºâËÆæÊúâm ‰∏™ÂÖÉÁ¥†ÁöÑÂ†ÜÔºåËæìÂá∫Â†ÜÈ°∂ÂÖÉÁ¥†ÂêéÔºåÂâ©‰∏ãm-1 ‰∏™ÂÖÉÁ¥†„ÄÇÂ∞ÜÂ†ÜÂ∫ïÂÖÉÁ¥†ÈÄÅÂÖ•Â†ÜÈ°∂ÔºàÔºàÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†‰∏éÂ†ÜÈ°∂ËøõË°å‰∫§Êç¢ÔºâÔºåÂ†ÜË¢´Á†¥ÂùèÔºåÂÖ∂ÂéüÂõ†‰ªÖÊòØÊ†πÁªìÁÇπ‰∏çÊª°Ë∂≥Â†ÜÁöÑÊÄßË¥®„ÄÇ 2ÔºâÂ∞ÜÊ†πÁªìÁÇπ‰∏éÂ∑¶„ÄÅÂè≥Â≠êÊ†ë‰∏≠ËæÉÂ∞èÂÖÉÁ¥†ÁöÑËøõË°å‰∫§Êç¢„ÄÇ 3ÔºâËã•‰∏éÂ∑¶Â≠êÊ†ë‰∫§Êç¢ÔºöÂ¶ÇÊûúÂ∑¶Â≠êÊ†ëÂ†ÜË¢´Á†¥ÂùèÔºåÂç≥Â∑¶Â≠êÊ†ëÁöÑÊ†πÁªìÁÇπ‰∏çÊª°Ë∂≥Â†ÜÁöÑÊÄßË¥®ÔºåÂàôÈáçÂ§çÊñπÊ≥ï Ôºà2Ôºâ. 4ÔºâËã•‰∏éÂè≥Â≠êÊ†ë‰∫§Êç¢ÔºåÂ¶ÇÊûúÂè≥Â≠êÊ†ëÂ†ÜË¢´Á†¥ÂùèÔºåÂç≥Âè≥Â≠êÊ†ëÁöÑÊ†πÁªìÁÇπ‰∏çÊª°Ë∂≥Â†ÜÁöÑÊÄßË¥®„ÄÇÂàôÈáçÂ§çÊñπÊ≥ï Ôºà2Ôºâ. 5ÔºâÁªßÁª≠ÂØπ‰∏çÊª°Ë∂≥Â†ÜÊÄßË¥®ÁöÑÂ≠êÊ†ëËøõË°å‰∏äËø∞‰∫§Êç¢Êìç‰ΩúÔºåÁõ¥Âà∞Âè∂Â≠êÁªìÁÇπÔºåÂ†ÜË¢´Âª∫Êàê„ÄÇ Áß∞Ëøô‰∏™Ëá™Ê†πÁªìÁÇπÂà∞Âè∂Â≠êÁªìÁÇπÁöÑË∞ÉÊï¥ËøáÁ®ã‰∏∫Á≠õÈÄâ„ÄÇÂ¶ÇÂõæÔºö ÂÜçËÆ®ËÆ∫ÂØπn ‰∏™ÂÖÉÁ¥†ÂàùÂßãÂª∫Â†ÜÁöÑËøáÁ®ã„ÄÇ Âª∫Â†ÜÊñπÊ≥ïÔºöÂØπÂàùÂßãÂ∫èÂàóÂª∫Â†ÜÁöÑËøáÁ®ãÔºåÂ∞±ÊòØ‰∏Ä‰∏™ÂèçÂ§çËøõË°åÁ≠õÈÄâÁöÑËøáÁ®ã„ÄÇ 1Ôºân ‰∏™ÁªìÁÇπÁöÑÂÆåÂÖ®‰∫åÂèâÊ†ëÔºåÂàôÊúÄÂêé‰∏Ä‰∏™ÁªìÁÇπÊòØÁ¨¨‰∏™ÁªìÁÇπÁöÑÂ≠êÊ†ë„ÄÇ 2ÔºâÁ≠õÈÄâ‰ªéÁ¨¨ ‰∏™ÁªìÁÇπ‰∏∫Ê†πÁöÑÂ≠êÊ†ëÂºÄÂßãÔºåËØ•Â≠êÊ†ëÊàê‰∏∫Â†Ü„ÄÇ 3Ôºâ‰πãÂêéÂêëÂâç‰æùÊ¨°ÂØπÂêÑÁªìÁÇπ‰∏∫Ê†πÁöÑÂ≠êÊ†ëËøõË°åÁ≠õÈÄâÔºå‰Ωø‰πãÊàê‰∏∫Â†ÜÔºåÁõ¥Âà∞Ê†πÁªìÁÇπ„ÄÇ Â¶ÇÂõæÂª∫Â†ÜÂàùÂßãËøáÁ®ãÔºöÊó†Â∫èÂ∫èÂàóÔºöÔºà49Ôºå38Ôºå65Ôºå97Ôºå76Ôºå13Ôºå27Ôºå49Ôºâ ‰ª£Á†Å 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: Â†ÜÊéíÂ∫è */public class HeapSort &#123; /** * Â†ÜÊéíÂ∫èÁöÑÊòØÈõÜÂêà‰∫ÜÊèíÂÖ•ÊéíÂ∫èÁöÑÂçïÊï∞ÁªÑÊìç‰ΩúÔºåÂèàÊúâÂΩíÂπ∂ÊéíÂ∫èÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºåÂÆåÁæéÁöÑÁªìÂêà‰∫Ü2ËÄÖÁöÑ‰ºòÁÇπ„ÄÇ */ public static void heapSort(int[] numArr) &#123; //Â∞ÜÊó†Â∫èÂ†ÜÊûÑÈÄ†Êàê‰∏Ä‰∏™Â§ßÊ†πÂ†ÜÔºåÂ§ßÊ†πÂ†ÜÊúâlength/2‰∏™Áà∂ËäÇÁÇπ for (int i = numArr.length / 2 - 1; i &gt;= 0; i--) &#123; headAdjust(numArr, i, numArr.length); &#125; //ÈÄêÊ≠•Â∞ÜÊØè‰∏™ÊúÄÂ§ßÂÄºÁöÑÊ†πËäÇÁÇπ‰∏éÊú´Â∞æÂÖÉÁ¥†‰∫§Êç¢ÔºåÂπ∂‰∏îÂÜçË∞ÉÊï¥ÂÖ∂‰∏∫ÊúÄÂ§ßÂ†Ü for (int i = numArr.length - 1; i &gt; 0; i--) &#123; //Â∞ÜÂ†ÜÈ°∂ÂÖÉÁ¥†ÂíåÂΩìÂâçÊú™ÁªèÊéíÂ∫èÁöÑÂ≠êÂ∫èÂàóÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†‰∫§Êç¢‰ΩçÁΩÆ swap(numArr, 0, i); headAdjust(numArr, 0, i); &#125; &#125; /** * ÊûÑÈÄ†Â§ßÊ†πÂ†Ü */ public static void headAdjust(int[] numArr, int parent, int length) &#123; //‰øùÂ≠òÂΩìÂâçÁà∂ËäÇÁÇπ int temp = numArr[parent]; //ÂæóÂà∞Â∑¶Â≠©Â≠ê int leftChild = 2 * parent + 1; while (leftChild &lt; length) &#123; //Â¶ÇÊûúparentÊúâÂ∑¶Â≠©Â≠êÔºåÂàôË¶ÅÂà§Êñ≠Â∑¶Â≠©Â≠êÊòØÂê¶Â∞è‰∫éÂè≥Â≠©Â≠ê if (leftChild + 1 &lt; length &amp;&amp; numArr[leftChild] &lt; numArr[leftChild + 1]) &#123; leftChild++; &#125; //Â¶ÇÊûúÁà∂ËäÇÁÇπÂ§ß‰∫éÂ≠êËäÇÁÇπÔºåÂ∞±‰∏ç‰∫§Êç¢ if (temp &gt;= numArr[leftChild]) &#123; break; &#125; //Â∞ÜËæÉÂ§ßÂ≠êËäÇÁÇπÁöÑÂÄºËµãÁªôÁà∂ËäÇÁÇπ numArr[parent] = numArr[leftChild]; //ÁÑ∂ÂêéÂ∞ÜÂ≠êËäÇÁÇπ‰Ωú‰∏∫Áà∂ËäÇÁÇπ parent = leftChild; //ÊâæÂà∞ËØ•Áà∂ËäÇÁÇπËæÉÂ∞èÁöÑÂ∑¶Â≠©Â≠ê leftChild = 2 * parent + 1; &#125; //ÊúÄÂêéÂ∞ÜtempÁöÑÂÄºËµãÁªôËæÉÂ§ßÁöÑÂ≠êËäÇÁÇπÔºå‰ª•ÂΩ¢Êàê‰∏§ÂÄº‰∫§Êç¢ numArr[parent] = temp; &#125; /** * ‰∫§Êç¢Êï∞ÁªÑ‰∏≠‰∏§‰∏™‰ΩçÁΩÆÁöÑÂÖÉÁ¥† */ public static void swap(int[] numArr, int top, int last) &#123; int temp = numArr[top]; numArr[top] = numArr[last]; numArr[last] = temp; &#125; public static void main(String[] args) &#123; int[] numArr = &#123;27, 11, 13, 45, 34, 22, 19, 8, 3, 99, 74, 55, 88, 66&#125;; System.out.println("**************Â†ÜÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(numArr); System.out.println("ÊéíÂ∫èÂêéÔºö"); heapSort(numArr); CommonUtils.display(numArr); &#125;&#125; CommonUtilsÂ∑•ÂÖ∑Á±ªÔºö 12345678910111213141516171819202122package main.java.com.study.utils;/** * @author: whb * @description: Â∑•ÂÖ∑Á±ª */public class CommonUtils &#123; /** * ÈÅçÂéÜÊâìÂç∞ * * @param numArr */ public static void display(int[] numArr) &#123; if (numArr != null &amp;&amp; numArr.length &gt; 0) &#123; for (int num : numArr) &#123; System.out.print(num + " "); &#125; &#125; System.out.println(""); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè--Âçï‰æãÊ®°Âºè]]></title>
    <url>%2Fposts%2F6d67519e.html</url>
    <content type="text"><![CDATA[Âçï‰æãÊ®°Âºè‰ªãÁªç ** ÊÑèÂõæ **Ôºö‰øùËØÅ‰∏Ä‰∏™Á±ª‰ªÖÊúâ‰∏Ä‰∏™ÂÆû‰æãÔºåÂπ∂Êèê‰æõ‰∏Ä‰∏™ËÆøÈóÆÂÆÉÁöÑÂÖ®Â±ÄËÆøÈóÆÁÇπ„ÄÇ ** ‰∏ªË¶ÅËß£ÂÜ≥ **Ôºö‰∏Ä‰∏™ÂÖ®Â±Ä‰ΩøÁî®ÁöÑÁ±ªÈ¢ëÁπÅÂú∞ÂàõÂª∫‰∏éÈîÄÊØÅ„ÄÇ ** ‰ΩïÊó∂‰ΩøÁî® **ÔºöÂΩìÊÇ®ÊÉ≥ÊéßÂà∂ÂÆû‰æãÊï∞ÁõÆÔºåËäÇÁúÅÁ≥ªÁªüËµÑÊ∫êÁöÑÊó∂ÂÄô„ÄÇ ** Â¶Ç‰ΩïËß£ÂÜ≥ **ÔºöÂà§Êñ≠Á≥ªÁªüÊòØÂê¶Â∑≤ÁªèÊúâËøô‰∏™Âçï‰æãÔºåÂ¶ÇÊûúÊúâÂàôËøîÂõûÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàôÂàõÂª∫„ÄÇ ** ÂÖ≥ÈîÆ‰ª£Á†Å **ÔºöÊûÑÈÄ†ÂáΩÊï∞ÊòØÁßÅÊúâÁöÑ„ÄÇ ** ‰ºòÁÇπ **Ôºö Âú®ÂÜÖÂ≠òÈáåÂè™Êúâ‰∏Ä‰∏™ÂÆû‰æãÔºåÂáèÂ∞ë‰∫ÜÂÜÖÂ≠òÁöÑÂºÄÈîÄÔºåÂ∞§ÂÖ∂ÊòØÈ¢ëÁπÅÁöÑÂàõÂª∫ÂíåÈîÄÊØÅÂÆû‰æãÔºàÊØîÂ¶ÇÁÆ°ÁêÜÂ≠¶Èô¢È¶ñÈ°µÈ°µÈù¢ÁºìÂ≠òÔºâ„ÄÇ ÈÅøÂÖçÂØπËµÑÊ∫êÁöÑÂ§öÈáçÂç†Áî®ÔºàÊØîÂ¶ÇÂÜôÊñá‰ª∂Êìç‰ΩúÔºâ„ÄÇ ** Áº∫ÁÇπ **ÔºöÊ≤°ÊúâÊé•Âè£Ôºå‰∏çËÉΩÁªßÊâøÔºå‰∏éÂçï‰∏ÄËÅåË¥£ÂéüÂàôÂÜ≤Á™ÅÔºå‰∏Ä‰∏™Á±ªÂ∫îËØ•Âè™ÂÖ≥ÂøÉÂÜÖÈÉ®ÈÄªËæëÔºåËÄå‰∏çÂÖ≥ÂøÉÂ§ñÈù¢ÊÄé‰πàÊ†∑Êù•ÂÆû‰æãÂåñ„ÄÇ ** ‰ΩøÁî®Âú∫ÊôØ **Ôºö Ë¶ÅÊ±ÇÁîü‰∫ßÂîØ‰∏ÄÂ∫èÂàóÂè∑„ÄÇ WEB ‰∏≠ÁöÑËÆ°Êï∞Âô®Ôºå‰∏çÁî®ÊØèÊ¨°Âà∑Êñ∞ÈÉΩÂú®Êï∞ÊçÆÂ∫ìÈáåÂä†‰∏ÄÊ¨°ÔºåÁî®Âçï‰æãÂÖàÁºìÂ≠òËµ∑Êù•„ÄÇ ÂàõÂª∫ÁöÑ‰∏Ä‰∏™ÂØπË±°ÈúÄË¶ÅÊ∂àËÄóÁöÑËµÑÊ∫êËøáÂ§öÔºåÊØîÂ¶Ç I/O ‰∏éÊï∞ÊçÆÂ∫ìÁöÑËøûÊé•Á≠â„ÄÇ Ê≥®ÊÑè‰∫ãÈ°πÔºögetInstance() ÊñπÊ≥ï‰∏≠ÈúÄË¶Å‰ΩøÁî®ÂêåÊ≠•ÈîÅ synchronized (Singleton.class) Èò≤Ê≠¢Â§öÁ∫øÁ®ãÂêåÊó∂ËøõÂÖ•ÈÄ†Êàê instance Ë¢´Â§öÊ¨°ÂÆû‰æãÂåñ„ÄÇ ÂÆûÁé∞ÊñπÂºè È•øÊ±âÂºèÔºàÈùôÊÄÅÂ∏∏ÈáèÔºâ„ÄêÂèØÁî®„Äë ** ‰ª£Á†ÅÂÆûÁé∞ **Ôºö 12345678910111213141516171819202122package main.java.com.study.designPatterns.single;/** * @author: whb * @description: È•øÊ±âÂºèÔºàÈùôÊÄÅÂ∏∏ÈáèÔºâ„ÄêÂèØÁî®„Äë * ‰ºòÁÇπÔºöËøôÁßçÂÜôÊ≥ïÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØÂú®Á±ªË£ÖËΩΩÁöÑÊó∂ÂÄôÂ∞±ÂÆåÊàêÂÆû‰æãÂåñ„ÄÇÈÅøÂÖç‰∫ÜÁ∫øÁ®ãÂêåÊ≠•ÈóÆÈ¢ò„ÄÇ * Áº∫ÁÇπÔºöÂú®Á±ªË£ÖËΩΩÁöÑÊó∂ÂÄôÂ∞±ÂÆåÊàêÂÆû‰æãÂåñÔºåÊ≤°ÊúâËææÂà∞Lazy LoadingÁöÑÊïàÊûú„ÄÇÂ¶ÇÊûú‰ªéÂßãËá≥Áªà‰ªéÊú™‰ΩøÁî®ËøáËøô‰∏™ÂÆû‰æãÔºåÂàô‰ºöÈÄ†ÊàêÂÜÖÂ≠òÁöÑÊµ™Ë¥π„ÄÇ */public class Hungry &#123; //Ëá™ÊúâÊ∞∏‰πÖÁöÑÂØπË±° private static final Hungry hungry = new Hungry(); //ÊûÑÈÄ†Âô®ÁßÅÊúâÂåñ private Hungry() &#123; System.out.println("È•øÊ±âÂºèÔºàÈùôÊÄÅÂ∏∏ÈáèÔºâ..."); &#125; public static Hungry getInstance() &#123; return hungry; &#125;&#125; ** ÊµãËØïÁ±ª **Ôºö 123456789101112131415161718192021package main.java.com.study.designPatterns.single;/** * @author: whb * @description: Âçï‰æãÊ®°ÂºèÊµãËØï */public class singletonTest &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; int finalI = i; new Thread(() -&gt; &#123; /** * È•øÊ±âÂºèÔºàÈùôÊÄÅÂ∏∏ÈáèÔºâ„ÄêÂèØÁî®„Äë */ Hungry hungry = Hungry.getInstance(); System.out.println("Á¨¨" + (finalI + 1) + "Ê¨°Ëé∑ÂæóÁöÑhungryÂØπË±°ÁöÑhashCodeÔºö" + hungry.hashCode()); &#125;).start(); &#125; &#125;&#125; ** ËæìÂá∫ÁªìÊûú **Ôºö È•øÊ±âÂºèÔºàÈùôÊÄÅ‰ª£Á†ÅÂùóÔºâ„ÄêÂèØÁî®„Äë ** ‰ª£Á†ÅÂÆûÁé∞ **Ôºö 12345678910111213141516171819202122232425package main.java.com.study.designPatterns.single;/** * @author: whb * @description: È•øÊ±âÂºèÔºàÈùôÊÄÅ‰ª£Á†ÅÂùóÔºâ„ÄêÂèØÁî®„Äë * Â∞ÜÁ±ªÂÆû‰æãÂåñÁöÑËøáÁ®ãÊîæÂú®‰∫ÜÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏≠Ôºå‰πüÊòØÂú®Á±ªË£ÖËΩΩÁöÑÊó∂ÂÄôÔºåÂ∞±ÊâßË°åÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏≠ÁöÑ‰ª£Á†ÅÔºåÂàùÂßãÂåñÁ±ªÁöÑÂÆû‰æã„ÄÇ * ‰ºòÁÇπÔºöËøôÁßçÂÜôÊ≥ïÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØÂú®Á±ªË£ÖËΩΩÁöÑÊó∂ÂÄôÂ∞±ÂÆåÊàêÂÆû‰æãÂåñ„ÄÇÈÅøÂÖç‰∫ÜÁ∫øÁ®ãÂêåÊ≠•ÈóÆÈ¢ò„ÄÇ * Áº∫ÁÇπÔºöÂú®Á±ªË£ÖËΩΩÁöÑÊó∂ÂÄôÂ∞±ÂÆåÊàêÂÆû‰æãÂåñÔºåÊ≤°ÊúâËææÂà∞Lazy LoadingÁöÑÊïàÊûú„ÄÇÂ¶ÇÊûú‰ªéÂßãËá≥Áªà‰ªéÊú™‰ΩøÁî®ËøáËøô‰∏™ÂÆû‰æãÔºåÂàô‰ºöÈÄ†ÊàêÂÜÖÂ≠òÁöÑÊµ™Ë¥π„ÄÇ */public class Hungry2 &#123; private static Hungry2 hungry2; static &#123; hungry2 = new Hungry2(); &#125; private Hungry2() &#123; System.out.println("È•øÊ±âÂºèÔºàÈùôÊÄÅ‰ª£Á†ÅÂùóÔºâ..."); &#125; public static Hungry2 getInstance() &#123; return hungry2; &#125;&#125; ** ÊµãËØïÁ±ª **Ôºö 123456789101112131415161718192021package main.java.com.study.designPatterns.single;/** * @author: whb * @description: Âçï‰æãÊ®°ÂºèÊµãËØï */public class singletonTest &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; int finalI = i; new Thread(() -&gt; &#123; /** * È•øÊ±âÂºèÔºàÈùôÊÄÅ‰ª£Á†ÅÂùóÔºâ„ÄêÂèØÁî®„Äë */ Hungry2 hungry2 = Hungry2.getInstance(); System.out.println("Á¨¨" + (finalI + 1) + "Ê¨°Ëé∑ÂæóÁöÑhungry2ÂØπË±°ÁöÑhashCodeÔºö" + hungry2.hashCode()); &#125;).start(); &#125; &#125;&#125; ** ËæìÂá∫ÁªìÊûú **Ôºö ÊáíÊ±âÂºèÔºàÁ∫øÁ®ã‰∏çÂÆâÂÖ®Ôºâ„Äê‰∏çÂèØÁî®„Äë ** ‰ª£Á†ÅÂÆûÁé∞ **Ôºö 123456789101112131415161718192021222324package main.java.com.study.designPatterns.single;/** * @author: whb * @description: ÊáíÊ±âÂºèÔºàÁ∫øÁ®ã‰∏çÂÆâÂÖ®Ôºâ„Äê‰∏çÂèØÁî®„Äë * ËøôÁßçÂÜôÊ≥ïËµ∑Âà∞‰∫ÜLazy LoadingÁöÑÊïàÊûúÔºå‰ΩÜÊòØÂè™ËÉΩÂú®ÂçïÁ∫øÁ®ã‰∏ã‰ΩøÁî®„ÄÇ * Â¶ÇÊûúÂú®Â§öÁ∫øÁ®ã‰∏ãÔºå‰∏Ä‰∏™Á∫øÁ®ãËøõÂÖ•‰∫Üif (singleton == null)Âà§Êñ≠ËØ≠Âè•ÂùóÔºåËøòÊú™Êù•ÂæóÂèäÂæÄ‰∏ãÊâßË°åÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ã‰πüÈÄöËøá‰∫ÜËøô‰∏™Âà§Êñ≠ËØ≠Âè•Ôºå * ËøôÊó∂‰æø‰ºö‰∫ßÁîüÂ§ö‰∏™ÂÆû‰æã„ÄÇÊâÄ‰ª•Âú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ã‰∏çÂèØ‰ΩøÁî®ËøôÁßçÊñπÂºè„ÄÇ */public class Lazy &#123; private static Lazy lazy; private Lazy() &#123; System.out.println("ÊáíÊ±âÂºèÔºàÁ∫øÁ®ã‰∏çÂÆâÂÖ®Ôºâ..."); &#125; public static Lazy getInstance() &#123; if (lazy == null) &#123; lazy = new Lazy(); &#125; return lazy; &#125;&#125; ** ÊµãËØïÁ±ª **Ôºö 123456789101112131415161718192021package main.java.com.study.designPatterns.single;/** * @author: whb * @description: Âçï‰æãÊ®°ÂºèÊµãËØï */public class singletonTest &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; int finalI = i; new Thread(() -&gt; &#123; /** * ÊáíÊ±âÂºèÔºàÁ∫øÁ®ã‰∏çÂÆâÂÖ®Ôºâ„Äê‰∏çÂèØÁî®„Äë */ Lazy lazy = Lazy.getInstance(); System.out.println("Á¨¨" + (finalI + 1) + "Ê¨°Ëé∑ÂæóÁöÑlazyÂØπË±°ÁöÑhashCodeÔºö" + lazy.hashCode()); &#125;).start(); &#125; &#125;&#125; ** ËæìÂá∫ÁªìÊûú **Ôºö ÊáíÊ±âÂºè(Á∫øÁ®ãÂÆâÂÖ®ÔºåÂêåÊ≠•ÊñπÊ≥ï)„Äê‰∏çÊé®ËçêÁî®„Äë ** ‰ª£Á†ÅÂÆûÁé∞ **Ôºö 123456789101112131415161718192021222324package main.java.com.study.designPatterns.single;/** * @author: whb * @description: ÊáíÊ±âÂºè(Á∫øÁ®ãÂÆâÂÖ®ÔºåÂêåÊ≠•ÊñπÊ≥ï)„Äê‰∏çÊé®ËçêÁî®„Äë * ÊúâÁÇπÔºöËß£ÂÜ≥‰∫ÜÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÈóÆÈ¢òÔºåÂÅö‰∏™Á∫øÁ®ãÂêåÊ≠•Â∞±ÂèØ‰ª•‰∫ÜÔºå‰∫éÊòØÂ∞±ÂØπgetInstance()ÊñπÊ≥ïËøõË°å‰∫ÜÁ∫øÁ®ãÂêåÊ≠•„ÄÇ * Áº∫ÁÇπÔºöÊïàÁéáÂ§™‰Ωé‰∫ÜÔºåÊØè‰∏™Á∫øÁ®ãÂú®ÊÉ≥Ëé∑ÂæóÁ±ªÁöÑÂÆû‰æãÊó∂ÂÄôÔºåÊâßË°ågetInstance()ÊñπÊ≥ïÈÉΩË¶ÅËøõË°åÂêåÊ≠•„ÄÇ * ËÄåÂÖ∂ÂÆûËøô‰∏™ÊñπÊ≥ïÂè™ÊâßË°å‰∏ÄÊ¨°ÂÆû‰æãÂåñ‰ª£Á†ÅÂ∞±Â§ü‰∫ÜÔºåÂêéÈù¢ÁöÑÊÉ≥Ëé∑ÂæóËØ•Á±ªÂÆû‰æãÔºåÁõ¥Êé•returnÂ∞±Ë°å‰∫Ü„ÄÇÊñπÊ≥ïËøõË°åÂêåÊ≠•ÊïàÁéáÂ§™‰ΩéË¶ÅÊîπËøõ„ÄÇ */public class Lazy2 &#123; private static Lazy2 lazy; private Lazy2() &#123; System.out.println("ÊáíÊ±âÂºè(Á∫øÁ®ãÂÆâÂÖ®ÔºåÂêåÊ≠•ÊñπÊ≥ï)..."); &#125; public static synchronized Lazy2 getInstance() &#123; if (lazy == null) &#123; lazy = new Lazy2(); &#125; return lazy; &#125;&#125; ** ÊµãËØïÁ±ª **Ôºö 123456789101112131415161718192021package main.java.com.study.designPatterns.single;/** * @author: whb * @description: Âçï‰æãÊ®°ÂºèÊµãËØï */public class singletonTest &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; int finalI = i; new Thread(() -&gt; &#123; /** * ÊáíÊ±âÂºè(Á∫øÁ®ãÂÆâÂÖ®ÔºåÂêåÊ≠•ÊñπÊ≥ï)„Äê‰∏çÊé®ËçêÁî®„Äë */ Lazy2 lazy2 = Lazy2.getInstance(); System.out.println("Á¨¨" + (finalI + 1) + "Ê¨°Ëé∑ÂæóÁöÑlazy2ÂØπË±°ÁöÑhashCodeÔºö" + lazy2.hashCode()); &#125;).start(); &#125; &#125;&#125; ** ËæìÂá∫ÁªìÊûú **Ôºö ÊáíÊ±âÂºè(Á∫øÁ®ãÂÆâÂÖ® Ôºå ÂêåÊ≠•‰ª£Á†ÅÂùó)„Äê‰∏çÂèØÁî®„Äë ** ‰ª£Á†ÅÂÆûÁé∞ **Ôºö 12345678910111213141516171819202122232425package main.java.com.study.designPatterns.single;/** * @author: whb * @description: ÊáíÊ±âÂºè(Á∫øÁ®ãÂÆâÂÖ® Ôºå ÂêåÊ≠•‰ª£Á†ÅÂùó)„Äê‰∏çÂèØÁî®„Äë * Áî±‰∫éÂêåÊ≠•ÊñπÊ≥ïÁöÑÂêåÊ≠•ÊïàÁéáÂ§™‰ΩéÔºåÊâÄ‰ª•ÊëíÂºÉÂêåÊ≠•ÊñπÊ≥ïÔºåÊîπ‰∏∫ÂêåÊ≠•‰∫ßÁîüÂÆû‰æãÂåñÁöÑÁöÑ‰ª£Á†ÅÂùó„ÄÇ * ‰ΩÜÊòØËøôÁßçÂêåÊ≠•Âπ∂‰∏çËÉΩËµ∑Âà∞Á∫øÁ®ãÂêåÊ≠•ÁöÑ‰ΩúÁî®„ÄÇÂÅáÂ¶Ç‰∏Ä‰∏™Á∫øÁ®ãËøõÂÖ•‰∫Üif (singleton == null)Âà§Êñ≠ËØ≠Âè•ÂùóÔºåËøòÊú™Êù•ÂæóÂèäÂæÄ‰∏ãÊâßË°åÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ã‰πüÈÄöËøá‰∫ÜËøô‰∏™Âà§Êñ≠ËØ≠Âè•ÔºåËøôÊó∂‰æø‰ºö‰∫ßÁîüÂ§ö‰∏™ÂÆû‰æã„ÄÇ */public class Lazy3 &#123; private static volatile Lazy3 lazy; private Lazy3() &#123; System.out.println("ÊáíÊ±âÂºè(Á∫øÁ®ãÂÆâÂÖ®ÔºåÂêåÊ≠•‰ª£Á†ÅÂùó)..."); &#125; public static Lazy3 getInstance() &#123; if (lazy == null) &#123; synchronized (Lazy3.class) &#123; lazy = new Lazy3(); &#125; &#125; return lazy; &#125;&#125; ** ÊµãËØïÁ±ª **Ôºö 123456789101112131415161718192021package main.java.com.study.designPatterns.single;/** * @author: whb * @description: Âçï‰æãÊ®°ÂºèÊµãËØï */public class singletonTest &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; int finalI = i; new Thread(() -&gt; &#123; /** * ÊáíÊ±âÂºè(Á∫øÁ®ãÂÆâÂÖ®ÔºåÂêåÊ≠•‰ª£Á†ÅÂùó)„Äê‰∏çÂèØÁî®„Äë */ Lazy3 lazy3 = Lazy3.getInstance(); System.out.println("Á¨¨" + (finalI + 1) + "Ê¨°Ëé∑ÂæóÁöÑlazy3ÂØπË±°ÁöÑhashCodeÔºö" + lazy3.hashCode()); &#125;).start(); &#125; &#125;&#125; ** ËæìÂá∫ÁªìÊûú **Ôºö ÈùôÊÄÅÂÜÖÈÉ®Á±ª„ÄêÊé®ËçêÁî®„Äë ** ‰ª£Á†ÅÂÆûÁé∞ **Ôºö 12345678910111213141516171819202122232425package main.java.com.study.designPatterns.single;/** * @author: whb * @description: ÈùôÊÄÅÂÜÖÈÉ®Á±ª„ÄêÊé®ËçêÁî®„Äë * ËøôÁßçÊñπÂºèË∑üÈ•øÊ±âÂºèÊñπÂºèÈááÁî®ÁöÑÊú∫Âà∂Á±ª‰ººÔºå‰ΩÜÂèàÊúâ‰∏çÂêå„ÄÇ‰∏§ËÄÖÈÉΩÊòØÈááÁî®‰∫ÜÁ±ªË£ÖËΩΩÁöÑÊú∫Âà∂Êù•‰øùËØÅÂàùÂßãÂåñÂÆû‰æãÊó∂Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ‰∏çÂêåÁöÑÂú∞ÊñπÂú®È•øÊ±âÂºèÊñπÂºèÊòØÂè™Ë¶ÅSingletonÁ±ªË¢´Ë£ÖËΩΩÂ∞±‰ºöÂÆû‰æãÂåñÔºåÊ≤°ÊúâLazy-LoadingÁöÑ‰ΩúÁî®ÔºåËÄåÈùôÊÄÅÂÜÖÈÉ®Á±ªÊñπÂºèÂú®SingletonÁ±ªË¢´Ë£ÖËΩΩÊó∂Âπ∂‰∏ç‰ºöÁ´ãÂç≥ÂÆû‰æãÂåñÔºåËÄåÊòØÂú®ÈúÄË¶ÅÂÆû‰æãÂåñÊó∂ÔºåË∞ÉÁî®getInstanceÊñπÊ≥ïÔºåÊâç‰ºöË£ÖËΩΩSingletonInstanceÁ±ªÔºå‰ªéËÄåÂÆåÊàêSingletonÁöÑÂÆû‰æãÂåñ„ÄÇ * &lt;p&gt; * Á±ªÁöÑÈùôÊÄÅÂ±ûÊÄßÂè™‰ºöÂú®Á¨¨‰∏ÄÊ¨°Âä†ËΩΩÁ±ªÁöÑÊó∂ÂÄôÂàùÂßãÂåñÔºåÊâÄ‰ª•Âú®ËøôÈáåÔºåJVMÂ∏ÆÂä©Êàë‰ª¨‰øùËØÅ‰∫ÜÁ∫øÁ®ãÁöÑÂÆâÂÖ®ÊÄßÔºåÂú®Á±ªËøõË°åÂàùÂßãÂåñÊó∂ÔºåÂà´ÁöÑÁ∫øÁ®ãÊòØÊó†Ê≥ïËøõÂÖ•ÁöÑ„ÄÇ * &lt;p&gt; * ‰ºòÁÇπÔºöÈÅøÂÖç‰∫ÜÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÔºåÂª∂ËøüÂä†ËΩΩÔºåÊïàÁéáÈ´ò„ÄÇ */public class StaticInnerClass &#123; private StaticInnerClass() &#123; System.out.println("ÈùôÊÄÅÂÜÖÈÉ®Á±ª..."); &#125; private static class SingletonInstance &#123; private static StaticInnerClass instance = new StaticInnerClass(); &#125; public static StaticInnerClass getInstance() &#123; return SingletonInstance.instance; &#125;&#125; ** ÊµãËØïÁ±ª **Ôºö 123456789101112131415161718192021package main.java.com.study.designPatterns.single;/** * @author: whb * @description: Âçï‰æãÊ®°ÂºèÊµãËØï */public class singletonTest &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; int finalI = i; new Thread(() -&gt; &#123; /** * ÈùôÊÄÅÂÜÖÈÉ®Á±ª„ÄêÊé®ËçêÁî®„Äë */ StaticInnerClass staticInnerClass = StaticInnerClass.getInstance(); System.out.println("Á¨¨" + (finalI + 1) + "Ê¨°Ëé∑ÂæóÁöÑstaticInnerClassÂØπË±°ÁöÑhashCodeÔºö" + staticInnerClass.hashCode()); &#125;).start(); &#125; &#125;&#125; ** ËæìÂá∫ÁªìÊûú **Ôºö ÂèåÈáçÊ£ÄÊü•„ÄêÊé®ËçêÁî®„Äë ** ‰ª£Á†ÅÂÆûÁé∞ **Ôºö 123456789101112131415161718192021222324252627package main.java.com.study.designPatterns.single;/** * @author: whb * @description: ÂèåÈáçÊ£ÄÊü•„ÄêÊé®ËçêÁî®„Äë * Êàë‰ª¨ËøõË°å‰∫Ü‰∏§Ê¨°if (doubleCheck == null)Ê£ÄÊü•ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®‰∫Ü„ÄÇËøôÊ†∑ÔºåÂÆû‰æãÂåñ‰ª£Á†ÅÂè™Áî®ÊâßË°å‰∏ÄÊ¨°ÔºåÂêéÈù¢ÂÜçÊ¨°ËÆøÈóÆÊó∂ÔºåÂà§Êñ≠if (doubleCheck == null)ÔºåÁõ¥Êé•returnÂÆû‰æãÂåñÂØπË±°„ÄÇ * ‰ºòÁÇπÔºöÁ∫øÁ®ãÂÆâÂÖ®ÔºõÂª∂ËøüÂä†ËΩΩÔºõÊïàÁéáËæÉÈ´ò„ÄÇ */public class DoubleCheck &#123; private static volatile DoubleCheck doubleCheck; private DoubleCheck() &#123; System.out.println("ÂèåÈáçÊ£ÄÊü•..."); &#125; public static DoubleCheck getInstance() &#123; if (doubleCheck == null) &#123; synchronized (DoubleCheck.class) &#123; if (doubleCheck == null) &#123; doubleCheck = new DoubleCheck(); &#125; &#125; &#125; return doubleCheck; &#125;&#125; ** ÊµãËØïÁ±ª **Ôºö 123456789101112131415161718192021package main.java.com.study.designPatterns.single;/** * @author: whb * @description: Âçï‰æãÊ®°ÂºèÊµãËØï */public class singletonTest &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; int finalI = i; new Thread(() -&gt; &#123; /** * ÂèåÈáçÊ£ÄÊü•„ÄêÊé®ËçêÁî®„Äë */ DoubleCheck doubleCheck = DoubleCheck.getInstance(); System.out.println("Á¨¨" + (finalI + 1) + "Ê¨°Ëé∑ÂæóÁöÑdoubleCheckÂØπË±°ÁöÑhashCodeÔºö" + doubleCheck.hashCode()); &#125;).start(); &#125; &#125;&#125; ** ËæìÂá∫ÁªìÊûú **Ôºö Êûö‰∏æ„ÄêÊé®ËçêÁî®„Äë ** ‰ª£Á†ÅÂÆûÁé∞ **Ôºö 12345678910111213package main.java.com.study.designPatterns.single;/** * @author: whb * @description: Êûö‰∏æ„ÄêÊé®ËçêÁî®„Äë * ‰∏ç‰ªÖËÉΩÈÅøÂÖçÂ§öÁ∫øÁ®ãÂêåÊ≠•ÈóÆÈ¢òÔºåËÄå‰∏îËøòËÉΩÈò≤Ê≠¢ÂèçÂ∫èÂàóÂåñÈáçÊñ∞ÂàõÂª∫Êñ∞ÁöÑÂØπË±°„ÄÇ */public enum EnumSingleton &#123; Instance; public void whatEverMethod() &#123; &#125;&#125; ** ÊµãËØïÁ±ª **Ôºö 123456789101112131415161718192021package main.java.com.study.designPatterns.single;/** * @author: whb * @description: Âçï‰æãÊ®°ÂºèÊµãËØï */public class singletonTest &#123; public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; int finalI = i; new Thread(() -&gt; &#123; /** * ÂèåÈáçÊ£ÄÊü•„ÄêÊé®ËçêÁî®„Äë */ DoubleCheck doubleCheck = DoubleCheck.getInstance(); System.out.println("Á¨¨" + (finalI + 1) + "Ê¨°Ëé∑ÂæóÁöÑdoubleCheckÂØπË±°ÁöÑhashCodeÔºö" + doubleCheck.hashCode()); &#125;).start(); &#125; &#125;&#125; ** ËæìÂá∫ÁªìÊûú **Ôºö]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Â∏åÂ∞îÊéíÂ∫è]]></title>
    <url>%2Fposts%2F94971cbd.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ ÂÖàÂ∞ÜÊï¥‰∏™ÂæÖÊéíÂ∫èÁöÑËÆ∞ÂΩïÂ∫èÂàóÂàÜÂâ≤Êàê‰∏∫Ëã•Âπ≤Â≠êÂ∫èÂàóÂàÜÂà´ËøõË°åÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÔºåÂæÖÊï¥‰∏™Â∫èÂàó‰∏≠ÁöÑËÆ∞ÂΩï‚ÄúÂü∫Êú¨ÊúâÂ∫è‚ÄùÊó∂ÔºåÂÜçÂØπÂÖ®‰ΩìËÆ∞ÂΩïËøõË°å‰æùÊ¨°Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è„ÄÇÂ∏åÂ∞îÊéíÂ∫èÔºå‰πüÁß∞ÈÄíÂáèÂ¢ûÈáèÊéíÂ∫èÁÆóÊ≥ïÔºåÊòØÊèíÂÖ•ÊéíÂ∫èÁöÑ‰∏ÄÁßçÈ´òÈÄüËÄåÁ®≥ÂÆöÁöÑÊîπËøõÁâàÊú¨„ÄÇ Êìç‰ΩúÊñπÊ≥ï ÈÄâÊã©‰∏Ä‰∏™Â¢ûÈáèÂ∫èÂàót1Ôºåt2Ôºå‚Ä¶ÔºåtkÔºåÂÖ∂‰∏≠ti&gt;tjÔºåtk=1Ôºõ ÊåâÂ¢ûÈáèÂ∫èÂàó‰∏™Êï∞kÔºåÂØπÂ∫èÂàóËøõË°åk Ë∂üÊéíÂ∫èÔºõ ÊØèË∂üÊéíÂ∫èÔºåÊ†πÊçÆÂØπÂ∫îÁöÑÂ¢ûÈáètiÔºåÂ∞ÜÂæÖÊéíÂ∫èÂàóÂàÜÂâ≤ÊàêËã•Âπ≤ÈïøÂ∫¶‰∏∫m ÁöÑÂ≠êÂ∫èÂàóÔºåÂàÜÂà´ÂØπÂêÑÂ≠êË°®ËøõË°åÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è„ÄÇ‰ªÖÂ¢ûÈáèÂõ†Â≠ê‰∏∫1 Êó∂ÔºåÊï¥‰∏™Â∫èÂàó‰Ωú‰∏∫‰∏Ä‰∏™Ë°®Êù•Â§ÑÁêÜÔºåË°®ÈïøÂ∫¶Âç≥‰∏∫Êï¥‰∏™Â∫èÂàóÁöÑÈïøÂ∫¶„ÄÇ ÁÆóÊ≥ïÊµÅÁ®ãÂõæ ‰ª£Á†Å 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: Â∏åÂ∞îÊéíÂ∫è */public class ShellSort &#123; /** * Â∏åÂ∞îÊéíÂ∫èÔºàShell‚Äôs SortÔºâÂèàÁß∞‚ÄúÁº©Â∞èÂ¢ûÈáèÊéíÂ∫è‚Äù(Diminishing Increment Sort)ÔºåÂÆÉ‰πüÊòØ‰∏ÄÁßçÂ±û‰∫éÊèíÂÖ•ÊéíÂ∫èÁ±ªÁöÑÊñπÊ≥ïÔºå‰ΩÜÂú®Êó∂Èó¥ÊïàÁéá‰∏äÊØîÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÊñπÊ≥ïÊúâËæÉÂ§ßÁöÑÊîπËøõ„ÄÇ * ‰ªéÂØπÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÁöÑÂàÜÊûêÂèØÁü•ÔºåÂÖ∂ÁÆóÊ≥ïÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n2)Ôºå‰ΩÜÊòØÔºåËã•ÂæÖÊéíËÆ∞ÂΩïÂ∫èÂàó‰∏∫‚ÄúÊ≠£Â∫è‚ÄùÊó∂ÔºåÂÖ∂Êó∂Èó¥Â§çÊùÇÂ∫¶ÂèØÊèêÈ´òËá≥O(n)„ÄÇ * Áî±Ê≠§ËÆæÊÉ≥ÔºåËã•ÂæÖÊéíËÆ∞ÂΩïÂ∫èÂàóÊåâÂÖ≥ÈîÆÂ≠ó‚ÄúÂü∫Êú¨ÊúâÂ∫è‚ÄùÔºåÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÁöÑÊïàÁéáÂ∞±ÂèØ‰ª•Â§ßÂ§ßÊèêÈ´ò„ÄÇ * ‰ªéÂè¶‰∏ÄÊñπÈù¢Êù•ÁúãÔºåÁî±‰∫éÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÁÆóÊ≥ïÁÆÄÂçïÔºåÊâÄ‰ª•Âú®nÂÄºÂæàÂ∞èÊó∂ÊïàÁéáÊØîËæÉÈ´ò„ÄÇÂ∏åÂ∞îÊéíÂ∫èÊ≠£ÊòØ‰ªéËøô‰∏§ÁÇπÂàÜÊûêÂá∫ÂèëÂØπÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èËøõË°åÊîπËøõËÄåÂæóÂà∞ÁöÑ‰∏ÄÁßçÊèíÂÖ•ÊéíÂ∫èÊñπÊ≥ï„ÄÇ * &lt;p&gt; * Â∏åÂ∞îÊéíÂ∫èÁöÑÂü∫Êú¨ÊÄùÊÉ≥ÊòØÔºöÂÖàÂ∞ÜÊï¥‰∏™ÂæÖÊéíÂ∫èÂàóÂàÜÂâ≤ÊàêËã•Âπ≤Â≠êÂ∫èÂàóÂàÜÂà´ËøõË°åÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÔºåÂæÖÊï¥‰∏™Â∫èÂàó‰∏≠ÁöÑËÆ∞ÂΩï‚ÄúÂü∫Êú¨ÊúâÂ∫è‚ÄùÊó∂ÔºåÂÜçÂØπÂÖ®‰ΩìËÆ∞ÂΩïËøõË°å‰∏ÄÊ¨°Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è„ÄÇÔºàËøôÊòØ„ÄäÊï∞ÊçÆÁªìÊûÑ„ÄãËøôÊú¨‰π¶ÈáåÁöÑËØ¥Ê≥ï„ÄÇÔºâ * &lt;p&gt; * ÈÄö‰øóÁÇπËØ¥Â∞±ÊòØÔºöÂÖàÂèñËæÉÂ§ßÁöÑÊ≠•ÈïøÂØπÂæÖÊéíÂ∫èÂàóËøõË°åÁõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÔºåÊØèÊéí‰∏ÄÊ¨°Â∞±Áº©Â∞è‰∏ÄÊ¨°Ê≠•ÈïøÔºåÂÜçËøõË°åÊèíÂÖ•ÊéíÂ∫èÔºåÁõ¥Âà∞ÊúÄÂêéÊ≠•ÈïøÂèò‰∏∫1„ÄÇ */ public static void shellSort(int[] numArr) &#123; int length = numArr.length; //ÂèñÂ¢ûÈáè int gap = length / 2; while (gap &gt;= 1) &#123; //Êó†Â∫èÂ∫èÂàó for (int i = gap; i &lt; length; i++) &#123; int temp = numArr[i]; int j; //ÊúâÂ∫èÂ∫èÂàó for (j = i - gap; j &gt;= 0 &amp;&amp; numArr[j] &gt; temp; j = j - gap) &#123; numArr[j + gap] = numArr[j]; &#125; numArr[j + gap] = temp; &#125; //Áº©Â∞èÂ¢ûÈáè gap = gap / 2; &#125; &#125; public static void main(String[] args) &#123; int[] numArr = &#123;27, 11, 13, 45, 34, 22, 19, 8, 3, 99, 74, 55, 88, 66&#125;; System.out.println("**************Â∏åÂ∞îÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(numArr); System.out.println("ÊéíÂ∫èÂêéÔºö"); shellSort(numArr); CommonUtils.display(numArr); &#125;&#125; CommonUtilsÂ∑•ÂÖ∑Á±ªÔºö 12345678910111213141516171819202122package main.java.com.study.utils;/** * @author: whb * @description: Â∑•ÂÖ∑Á±ª */public class CommonUtils &#123; /** * ÈÅçÂéÜÊâìÂç∞ * * @param numArr */ public static void display(int[] numArr) &#123; if (numArr != null &amp;&amp; numArr.length &gt; 0) &#123; for (int num : numArr) &#123; System.out.print(num + " "); &#125; &#125; System.out.println(""); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Áè†ÊéíÂ∫è]]></title>
    <url>%2Fposts%2Fbe6df974.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ Â∞ÜÊØè‰∏™Êï∞Áî®Áè†Â≠êË°®Á§∫Ôºå‰æãÂ¶ÇÔºöÊï∞Â≠ó5Â∞±ÊòØ5‰∏™Áè†Â≠ê„ÄÇÁî®Áè†Â≠êË°®Á§∫Â•ΩÊØè‰∏Ä‰∏™Êï∞ÂêéÔºåËÆ©ÊâÄÊúâÁöÑÁè†Â≠êËá™Áî±‰∏ãËêΩ„ÄÇÊéíÂ∫èÂÆåÊàê„ÄÇ ‰∏äÂõæ‰∏≠ÁöÑ‰∏â‰∏™Áè†Â∞±Ë°®Á§∫Êï∞Â≠ó3,‰∏§‰∏™Áè†Ë°®Á§∫Êï∞Â≠ó2,Ëøô‰∏™OK‰∫ÜÁªßÁª≠,ËøôÈáåÁöÑ3Âíå2ÈÉΩÂè´bead„ÄÇ ‰∏äÂõæ(a)‰∏≠Êúâ‰∏§‰∏™Êï∞Â≠ó,4Âíå3,ÂàÜÂà´‰∏≤Âú®ÂõõÊù°Á∫ø‰∏ä,‰∫éÊòØÊï∞Â≠ó4ÁöÑÊúÄÂêé‰∏Ä‰∏™Áè†Â≠ê‰∏ãËêΩ,Âõ†‰∏∫ÂÆÉ‰∏ãËæπÊòØÁ©∫ÁöÑ,Ëá™Áî±‰∏ãËêΩÂêéÂèòÊàê‰∏äÂõæ(b) ‰∏äÂõæ(c)‰∏≠ÈöèÊú∫Áªô‰∫ÜÂõõ‰∏™Êï∞Â≠ó,ÂàÜÂà´ÊòØ3,2,4,2,Ëøô‰∫õÁè†Â≠êËá™Áî±‰∏ãËêΩ,Â∞±ÂèòÊàê‰∫Ü(d)‰∏≠,ËêΩÂÆåÂ∞±ÊúâÂ∫è‰∫Ü,2,2,3,4 ‰ª•‰∏äÂ∞±ÊòØÁè†ÊéíÂ∫èÁöÑÁ≤æÂçé„ÄÇ ‰∏äÂõæ‰∏≠ÁöÑnË°®Á§∫ÂæÖÊéíÂ∫èÊï∞ÁªÑÁöÑÈïøÂ∫¶,ÊúâÂ§öÂ∞ëÊï∞Â≠óÂ∞±ÊúâÂ§öÂ∞ëÂ±Ç,Ê®™ÂêëË°®Á§∫‰∏ÄÂ±Ç;mË°®Á§∫ÊúâÂ§öÂ∞ë‰∏™Áè†Â≠ê,Â∞±ÊòØÂ§öÂ∞ë‰∏™1,ËøôÂèñÂÜ≥‰∫éÊúÄÂ§ßÊï∞ÊòØÂá†„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºöÊØîÂ¶ÇÂæÖÊéíÊï∞ÁªÑ[6 2 4 1 5 9]„ÄÇ ËÆ©Áè†Â≠êÂÖ®ÈÉ®ÂÅöËá™Áî±ËêΩ‰ΩìËøêÂä® 9Ê≤°Êúâ‰ªÄ‰πàÂ•ΩËêΩÁöÑ,ÂÆÉÂú®ÊúÄÂ∫ïÂ±Ç 5‰πüÊ≤°Êúâ‰ªÄ‰πàÂ•ΩËêΩÁöÑ,ÂÖ®ÈÉ®ÊúâÊîØÊíëÁÇπ 1ÂêåÊ†∑‰∏çÈúÄË¶ÅÊªëËêΩ 4Èô§‰∫ÜÁ¨¨‰∏Ä‰∏™Áè†Â≠ê‰∏çÂä®Â§ñ,ÂÖ∂ÂÆÉ‰∏âÈ¢óÂÖ®ÈÉ®‰∏ãËêΩ,ËêΩÂà∞1ÁöÑ‰ΩçÁΩÆÂèòÊàê‰∏ãËæπËøôÊ†∑ ËøáÁ®ãÁöÑÁªÜËäÇ‰∏çÁîª‰∫Ü,ÂéüÂàôÂ∞±ÊòØ‰Ω†‰∏ãËæπÊúâÊîØÁÇπ,‰Ω†Â∞±‰∏çÁî®ÂÜçÊªëËêΩ‰∫Ü,ÊúÄÂêéÂèòÊàê‰∏ãËæπËøôÊ†∑,ÊéíÂ∫èÂÆåÊØï„ÄÇ ‰ªé‰∏äÂà∞‰∏ãÈ°∫Â∫èËæìÂá∫Âç≥ÂèØÂæóÂà∞ÁªìÊûú:[ 1 2 4 5 6 9]„ÄÇ ‰ª£Á†Å 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: Áè†ÊéíÂ∫è:Â∞ÜÊØè‰∏™Êï∞Áî®Áè†Â≠êË°®Á§∫Ôºå‰æãÂ¶ÇÔºöÊï∞Â≠ó5Â∞±ÊòØ5‰∏™Áè†Â≠ê„ÄÇÁî®Áè†Â≠êË°®Á§∫Â•ΩÊØè‰∏Ä‰∏™Êï∞ÂêéÔºåËÆ©ÊâÄÊúâÁöÑÁè†Â≠êËá™Áî±‰∏ãËêΩ„ÄÇÊéíÂ∫èÂÆåÊàê„ÄÇ */public class BeadSort &#123; /** * Áè†ÊéíÂ∫è * * @param unsorted ÂæÖÊéíÂ∫èÂàó * @return */ public static int[] beadSort(int[] unsorted) &#123; //ÂæÖÊéíÂ∫èÂàó‰∏≠ÁöÑÊúÄÂ§ßÂÄº int max = 0; //Ëé∑ÂèñÊúÄÂ§ßÂÄº for (int i = 0; i &lt; unsorted.length; i++) &#123; if (unsorted[i] &gt; max) &#123; max = unsorted[i]; &#125; &#125; //ÊØè‰∏™Êï∞ÈÉΩÁî®Áè†Â≠êË°®Á§∫ÔºåÊØîÂ¶Ç5Â∞±Áî®5‰∏™Áè†Â≠êÔºåÊâÄ‰ª•Áî®‰∫åÁª¥Êï∞ÁªÑË°®Á§∫ÊØè‰∏™Êï∞ char[][] grid = new char[unsorted.length][max]; int[] levelCount = new int[max]; for (int i = 0; i &lt; max; i++) &#123; levelCount[i] = 0; for (int j = 0; j &lt; unsorted.length; j++) &#123; grid[j][i] = '_'; &#125; &#125; //Âà†Èô§Áè†Â≠ê for (int i = 0; i &lt; unsorted.length; i++) &#123; int num = unsorted[i]; for (int j = 0; num &gt; 0; j++) &#123; grid[levelCount[j]++][j] = '*'; num--; &#125; &#125; //Êï∞Áè†Â≠êÔºåÊîæÂà∞Â∑≤ÊéíÂ∫èÂàóË°® int[] sorted = new int[unsorted.length]; for (int i = 0; i &lt; unsorted.length; i++) &#123; int putt = 0; for (int j = 0; j &lt; max &amp;&amp; grid[unsorted.length - 1 - i][j] == '*'; j++) &#123; putt++; &#125; sorted[i] = putt; &#125; return sorted; &#125; public static void main(String[] args) &#123; //‰∫ßÁîüÈöèÊú∫ÂæÖÊéíÂ∫èÂàó int[] unsorted = new int[(int) (Math.random() * 11) + 5]; for (int i = 0; i &lt; unsorted.length; i++) &#123; unsorted[i] = (int) (Math.random() * 10); &#125; System.out.println("**************Áè†ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(unsorted); System.out.println("ÊéíÂ∫èÂêéÔºö"); int[] sorted = beadSort(unsorted); CommonUtils.display(sorted); &#125;&#125; ÊµãËØïÁªìÊûúÂ¶Ç‰∏ã]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - ÁÆÄÂçïÈÄâÊã©ÊéíÂ∫è]]></title>
    <url>%2Fposts%2F8d8fd18d.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ Âú®Ë¶ÅÊéíÂ∫èÁöÑ‰∏ÄÁªÑÊï∞‰∏≠ÔºåÈÄâÂá∫ÊúÄÂ∞èÔºàÊàñËÄÖÊúÄÂ§ßÔºâÁöÑ‰∏Ä‰∏™Êï∞‰∏éÁ¨¨1‰∏™‰ΩçÁΩÆÁöÑÊï∞‰∫§Êç¢ÔºõÁÑ∂ÂêéÂú®Ââ©‰∏ãÁöÑÊï∞ÂΩì‰∏≠ÂÜçÊâæÊúÄÂ∞èÔºàÊàñËÄÖÊúÄÂ§ßÔºâÁöÑ‰∏éÁ¨¨2‰∏™‰ΩçÁΩÆÁöÑÊï∞‰∫§Êç¢Ôºå‰æùÊ¨°Á±ªÊé®ÔºåÁõ¥Âà∞Á¨¨n-1‰∏™ÂÖÉÁ¥†ÔºàÂÄíÊï∞Á¨¨‰∫å‰∏™Êï∞ÔºâÂíåÁ¨¨n‰∏™ÂÖÉÁ¥†ÔºàÊúÄÂêé‰∏Ä‰∏™Êï∞ÔºâÊØîËæÉ‰∏∫Ê≠¢„ÄÇ Êìç‰ΩúÊñπÊ≥ï Á¨¨‰∏ÄË∂üÔºå‰ªén ‰∏™ËÆ∞ÂΩï‰∏≠ÊâæÂá∫ÂÖ≥ÈîÆÁ†ÅÊúÄÂ∞èÁöÑËÆ∞ÂΩï‰∏éÁ¨¨‰∏Ä‰∏™ËÆ∞ÂΩï‰∫§Êç¢Ôºõ Á¨¨‰∫åË∂üÔºå‰ªéÁ¨¨‰∫å‰∏™ËÆ∞ÂΩïÂºÄÂßãÁöÑn-1 ‰∏™ËÆ∞ÂΩï‰∏≠ÂÜçÈÄâÂá∫ÂÖ≥ÈîÆÁ†ÅÊúÄÂ∞èÁöÑËÆ∞ÂΩï‰∏éÁ¨¨‰∫å‰∏™ËÆ∞ÂΩï‰∫§Êç¢Ôºõ ‰ª•Ê≠§Á±ªÊé®..... Á¨¨i Ë∂üÔºåÂàô‰ªéÁ¨¨i ‰∏™ËÆ∞ÂΩïÂºÄÂßãÁöÑn-i+1 ‰∏™ËÆ∞ÂΩï‰∏≠ÈÄâÂá∫ÂÖ≥ÈîÆÁ†ÅÊúÄÂ∞èÁöÑËÆ∞ÂΩï‰∏éÁ¨¨i ‰∏™ËÆ∞ÂΩï‰∫§Êç¢Ôºå Áõ¥Âà∞Êï¥‰∏™Â∫èÂàóÊåâÂÖ≥ÈîÆÁ†ÅÊúâÂ∫è„ÄÇ ÁÆóÊ≥ïÊµÅÁ®ãÂõæ ‰ª£Á†Å 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: ÈÄâÊã©ÊéíÂ∫è */public class SelectionSort &#123; /** * ÈÄâÊã©ÊéíÂ∫èÔºöÊØè‰∏ÄË∂üÂú®Ââ©‰ΩôÊú™ÊéíÂ∫èÁöÑËã•Âπ≤ËÆ∞ÂΩï‰∏≠ÈÄâÂèñÂÖ≥ÈîÆÂ≠óÊúÄÂ∞èÁöÑÔºà‰πüÂèØ‰ª•ÊòØÊúÄÂ§ßÁöÑÔºâËÆ∞ÂΩï‰Ωú‰∏∫ÊúâÂ∫èÂ∫èÂàó‰∏≠‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩï„ÄÇ * Â¶ÇÁ¨¨iË∂üÈÄâÊã©ÊéíÂ∫èÂ∞±ÊòØÂú®n-i+1‰∏™ËÆ∞ÂΩï‰∏≠ÈÄâÂèñÂÖ≥ÈîÆÂ≠óÊúÄÂ∞èÁöÑËÆ∞ÂΩï‰Ωú‰∏∫ÊúâÂ∫èÂ∫èÂàó‰∏≠Á¨¨i‰∏™ËÆ∞ÂΩï„ÄÇ * ËøôÊ†∑ÔºåÊï¥‰∏™Â∫èÂàóÂÖ±ÈúÄË¶Ån-1Ë∂üÊéíÂ∫è„ÄÇ */ public static void selctionSort(int[] numArr) &#123; int length = numArr.length; //Ë¶ÅÈÅçÂéÜÁöÑÊ¨°Êï∞Ôºàlength-1Ôºâ for (int i = 0; i &lt; length - 1; i++) &#123; //Â∞ÜÂΩìÂâç‰∏ãÊ†áÂÆö‰πâ‰∏∫ÊúÄÂ∞èÂÄº‰∏ãÊ†á int min = i; //ÈÅçÂéÜmin‰πãÂêéÁöÑÊï∞ÊçÆ for (int j = i + 1; j &lt; length - 1; j++) &#123; //Â¶ÇÊûúÊúâÂ∞è‰∫éÂΩìÂâçÊúÄÂ∞èÂÄºÁöÑÂÖÉÁ¥†ÔºåÂ∞ÜÂÆÉÁöÑ‰∏ãÊ†áËµãÂÄºÁªômin if (numArr[j] &lt; numArr[min]) &#123; min = j; &#125; &#125; //Â¶ÇÊûúmin‰∏çÁ≠â‰∫éiÔºåÂàôËØ¥ÊòéÊâæÂà∞‰∫ÜÁúüÊ≠£ÁöÑÊúÄÂ∞èÂÄº if (min != i) &#123; swap(numArr, min, i); &#125; &#125; &#125; /** * ‰∫§Êç¢Êï∞ÁªÑ‰∏≠‰∏§‰∏™ÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆ * * @param numArr * @param min * @param i */ public static void swap(int[] numArr, int min, int i) &#123; int temp = numArr[min]; numArr[min] = numArr[i]; numArr[i] = temp; &#125; public static void main(String[] args) &#123; int[] numArr = &#123;27, 11, 13, 45, 34, 22, 19, 8, 3, 99, 74, 55, 88, 66&#125;; System.out.println("**************ÈÄâÊã©ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(numArr); System.out.println("ÊéíÂ∫èÂêéÔºö"); selctionSort(numArr); CommonUtils.display(numArr); &#125;&#125; CommonUtilsÂ∑•ÂÖ∑Á±ªÔºö 12345678910111213141516171819202122package main.java.com.study.utils;/** * @author: whb * @description: Â∑•ÂÖ∑Á±ª */public class CommonUtils &#123; /** * ÈÅçÂéÜÊâìÂç∞ * * @param numArr */ public static void display(int[] numArr) &#123; if (numArr != null &amp;&amp; numArr.length &gt; 0) &#123; for (int num : numArr) &#123; System.out.print(num + " "); &#125; &#125; System.out.println(""); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊéíÂ∫èÁÆóÊ≥ï - Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è]]></title>
    <url>%2Fposts%2Fda1a6844.html</url>
    <content type="text"><![CDATA[Âü∫Êú¨ÊÄùÊÉ≥ Â∞Ü‰∏Ä‰∏™ËÆ∞ÂΩïÊèíÂÖ•Âà∞Â∑≤ÊéíÂ∫èÂ•ΩÁöÑÊúâÂ∫èË°®‰∏≠Ôºå‰ªéËÄåÂæóÂà∞‰∏Ä‰∏™Êñ∞ÔºåËÆ∞ÂΩïÊï∞Â¢û1ÁöÑÊúâÂ∫èË°®„ÄÇÂç≥ÔºöÂÖàÂ∞ÜÂ∫èÂàóÁöÑÁ¨¨1‰∏™ËÆ∞ÂΩïÁúãÊàêÊòØ‰∏Ä‰∏™ÊúâÂ∫èÁöÑÂ≠êÂ∫èÂàóÔºåÁÑ∂Âêé‰ªéÁ¨¨2‰∏™ËÆ∞ÂΩïÈÄê‰∏™ËøõË°åÊèíÂÖ•ÔºåÁõ¥Ëá≥Êï¥‰∏™Â∫èÂàóÊúâÂ∫è‰∏∫Ê≠¢„ÄÇ Êìç‰ΩúÊñπÊ≥ï ‰ªéÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÂºÄÂßãÔºåËØ•ÂÖÉÁ¥†ÂèØ‰ª•ËÆ§‰∏∫Â∑≤ÁªèË¢´ÊéíÂ∫è ÂèñÂá∫‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂú®Â∑≤ÁªèÊéíÂ∫èÁöÑÂÖÉÁ¥†Â∫èÂàó‰∏≠‰ªéÂêéÂêëÂâçÊâ´Êèè Â¶ÇÊûúËØ•ÂÖÉÁ¥†ÔºàÂ∑≤ÊéíÂ∫èÔºâÂ§ß‰∫éÊñ∞ÂÖÉÁ¥†ÔºåÂ∞ÜËØ•ÂÖÉÁ¥†ÁßªÂà∞‰∏ã‰∏Ä‰ΩçÁΩÆ ÈáçÂ§çÊ≠•È™§3ÔºåÁõ¥Âà∞ÊâæÂà∞Â∑≤ÊéíÂ∫èÁöÑÂÖÉÁ¥†Â∞è‰∫éÊàñËÄÖÁ≠â‰∫éÊñ∞ÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆ Â∞ÜÊñ∞ÂÖÉÁ¥†ÊèíÂÖ•Âà∞ËØ•‰ΩçÁΩÆÂêé ÈáçÂ§çÊ≠•È™§2~5 ÁÆóÊ≥ïÊµÅÁ®ãÂõæ ‰ª£Á†Å 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182package main.java.com.study.sortingAalgorithm;import main.java.com.study.utils.CommonUtils;/** * @author: whb * @description: ÊèíÂÖ•ÊéíÂ∫è */public class InsertSort &#123; /** * Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÊòØ‰∏ÄÁßçÊúÄÁÆÄÂçïÁöÑÊéíÂ∫èÊñπÊ≥ïÔºåÂÆÉÁöÑÂü∫Êú¨Êìç‰ΩúÊòØÂ∞Ü‰∏Ä‰∏™ËÆ∞ÂΩïÊèíÂÖ•Âà∞Â∑≤ÊéíÂ•ΩÁöÑÊúâÂ∫èÁöÑË°®‰∏≠Ôºå‰ªéËÄåÂæóÂà∞‰∏Ä‰∏™Êñ∞ÁöÑ„ÄÅËÆ∞ÂΩïÊï∞Â¢û1ÁöÑÊúâÂ∫èË°®„ÄÇ * &lt;p&gt; * ÂΩìÂâçÂÖÉÁ¥†ÁöÑÂâçÈù¢ÂÖÉÁ¥†Âùá‰∏∫ÊúâÂ∫èÔºåË¶ÅÊèíÂÖ•Êó∂Ôºå‰ªéÂΩìÂâçÂÖÉÁ¥†ÁöÑÂ∑¶ËæπÂºÄÂßãÂæÄÂâçÊâæÔºà‰ªéÂêéÂæÄÂâçÊâæÔºâÔºåÊØîÂΩìÂâçÂÖÉÁ¥†Â§ßÁöÑÂÖÉÁ¥†ÂùáÂæÄÂè≥Áßª‰∏Ä‰∏™‰ΩçÁΩÆÔºåÊúÄÂêéÊääÂΩìÂâçÂÖÉÁ¥†ÊîæÂú®ÂÆÉÂ∫îËØ•ÂëÜÁöÑ‰ΩçÁΩÆÂ∞±Ë°å‰∫Ü„ÄÇ * ÁßªÂä®„ÄÅÊØîËæÉÁöÑÊ¨°Êï∞ÂèØ‰Ωú‰∏∫Ë°°ÈáèÊó∂Èó¥Â§çÊùÇÊÄßÁöÑÊ†áÂáÜ„ÄÇ * &lt;p&gt; * ÊúÄ‰ºòÊÉÖÂÜµÔºöÂ¶ÇÊûúÂéüÂßãÁöÑËæìÂÖ•Â∫èÂàó‰∏∫Ê≠£Â∫èÔºö * &lt;p&gt; * ÊØîËæÉÊ¨°Êï∞Ôºön-1 * &lt;p&gt; * ÁßªÂä®Ê¨°Êï∞Ôºö0 * &lt;p&gt; * ÊúÄÂ∑ÆÊÉÖÂÜµÔºöÂ¶ÇÊûúÂéüÂßãÁöÑËæìÂÖ•Â∫èÂàó‰∏∫ÈÄÜÂ∫èÔºö * &lt;p&gt; * ÊØîËæÉÊ¨°Êï∞Ôºö(n+2)(n-1)/2 * &lt;p&gt; * ÁßªÂä®Ê¨°Êï∞Ôºö(n+4)(n-1)/2 * &lt;p&gt; * ÊâÄ‰ª•Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫èÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n2)„ÄÇ */ public static void insertSort(int[] numArr) &#123; int length = numArr.length; for (int i = 1; i &lt; length; i++) &#123; int temp = numArr[i]; int j; //ÈÅçÂéÜÊúâÂ∫èÂ∫èÂàóÔºåÂ¶ÇÊûúÊúâÂ∫èÂ∫èÂàó‰∏≠ÁöÑÂÖÉÁ¥†ÊØî‰∏¥Êó∂ÂÖÉÁ¥†Â§ßÔºåÂàôÂ∞ÜÊúâÂ∫èÂ∫èÂàó‰∏≠ÊØî‰∏¥Êó∂ÂÖÉÁ¥†Â§ßÁöÑÂÖÉÁ¥†‰æùÊ¨°ÂêëÂêéÁßªÂä® for (j = i - 1; j &gt;= 0 &amp;&amp; numArr[j] &gt; temp; j--) &#123; numArr[j + 1] = numArr[j]; &#125; //Â∞Ü‰∏¥Êó∂ÂÖÉÁ¥†ÊèíÂÖ•Âà∞ËÖæÂá∫ÁöÑ‰ΩçÁΩÆ numArr[j + 1] = temp; &#125; &#125; public static void main(String[] args) &#123; int[] numArr = &#123;27, 11, 13, 45, 34, 22, 19, 8, 3, 99, 74, 55, 88, 66&#125;; System.out.println("**************Áõ¥Êé•ÊèíÂÖ•ÊéíÂ∫è******************"); System.out.println("ÊéíÂ∫èÂâçÔºö"); CommonUtils.display(numArr); System.out.println("ÊéíÂ∫èÂêéÔºö"); insertSort(numArr); CommonUtils.display(numArr); &#125;&#125;``` CommonUtilsÂ∑•ÂÖ∑Á±ªÔºö```Javapackage main.java.com.study.utils;/** * @author: whb * @description: Â∑•ÂÖ∑Á±ª */public class CommonUtils &#123; /** * ÈÅçÂéÜÊâìÂç∞ * * @param numArr */ public static void display(int[] numArr) &#123; if (numArr != null &amp;&amp; numArr.length &gt; 0) &#123; for (int num : numArr) &#123; System.out.print(num + " "); &#125; &#125; System.out.println(""); &#125;&#125; ÊµãËØïÁªìÊûú]]></content>
      <categories>
        <category>Java</category>
        <category>ÁÆóÊ≥ï</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ÁÆóÊ≥ï</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-ËÆæËÆ°Ê®°ÂºèÁÆÄ‰ªã]]></title>
    <url>%2Fposts%2Ff7d67188.html</url>
    <content type="text"><![CDATA[ËÆæËÆ°Ê®°ÂºèÁÆÄ‰ªã ËÆæËÆ°Ê®°ÂºèÔºàDesign patternÔºâ‰ª£Ë°®‰∫ÜÊúÄ‰Ω≥ÁöÑÂÆûË∑µÔºåÈÄöÂ∏∏Ë¢´ÊúâÁªèÈ™åÁöÑÈù¢ÂêëÂØπË±°ÁöÑËΩØ‰ª∂ÂºÄÂèë‰∫∫ÂëòÊâÄÈááÁî®„ÄÇËÆæËÆ°Ê®°ÂºèÊòØËΩØ‰ª∂ÂºÄÂèë‰∫∫ÂëòÂú®ËΩØ‰ª∂ÂºÄÂèëËøáÁ®ã‰∏≠Èù¢‰∏¥ÁöÑ‰∏ÄËà¨ÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇËøô‰∫õËß£ÂÜ≥ÊñπÊ°àÊòØ‰ºóÂ§öËΩØ‰ª∂ÂºÄÂèë‰∫∫ÂëòÁªèËøáÁõ∏ÂΩìÈïøÁöÑ‰∏ÄÊÆµÊó∂Èó¥ÁöÑËØïÈ™åÂíåÈîôËØØÊÄªÁªìÂá∫Êù•ÁöÑ„ÄÇ ËÆæËÆ°Ê®°ÂºèÊòØ‰∏ÄÂ•óË¢´ÂèçÂ§ç‰ΩøÁî®ÁöÑ„ÄÅÂ§öÊï∞‰∫∫Áü•ÊôìÁöÑ„ÄÅÁªèËøáÂàÜÁ±ªÁºñÁõÆÁöÑ„ÄÅ‰ª£Á†ÅËÆæËÆ°ÁªèÈ™åÁöÑÊÄªÁªì„ÄÇ‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÊòØ‰∏∫‰∫ÜÈáçÁî®‰ª£Á†Å„ÄÅËÆ©‰ª£Á†ÅÊõ¥ÂÆπÊòìË¢´‰ªñ‰∫∫ÁêÜËß£„ÄÅ‰øùËØÅ‰ª£Á†ÅÂèØÈù†ÊÄß„ÄÇ ÊØ´Êó†ÁñëÈóÆÔºåËÆæËÆ°Ê®°Âºè‰∫éÂ∑±‰∫é‰ªñ‰∫∫‰∫éÁ≥ªÁªüÈÉΩÊòØÂ§öËµ¢ÁöÑÔºåËÆæËÆ°Ê®°Âºè‰Ωø‰ª£Á†ÅÁºñÂà∂ÁúüÊ≠£Â∑•Á®ãÂåñÔºåËÆæËÆ°Ê®°ÂºèÊòØËΩØ‰ª∂Â∑•Á®ãÁöÑÂü∫Áü≥ÔºåÂ¶ÇÂêåÂ§ßÂé¶ÁöÑ‰∏ÄÂùóÂùóÁ†ñÁü≥‰∏ÄÊ†∑„ÄÇÈ°πÁõÆ‰∏≠ÂêàÁêÜÂú∞ËøêÁî®ËÆæËÆ°Ê®°ÂºèÂèØ‰ª•ÂÆåÁæéÂú∞Ëß£ÂÜ≥ÂæàÂ§öÈóÆÈ¢òÔºåÊØèÁßçÊ®°ÂºèÂú®Áé∞ÂÆû‰∏≠ÈÉΩÊúâÁõ∏Â∫îÁöÑÂéüÁêÜÊù•‰∏é‰πãÂØπÂ∫îÔºåÊØèÁßçÊ®°ÂºèÈÉΩÊèèËø∞‰∫Ü‰∏Ä‰∏™Âú®Êàë‰ª¨Âë®Âõ¥‰∏çÊñ≠ÈáçÂ§çÂèëÁîüÁöÑÈóÆÈ¢òÔºå‰ª•ÂèäËØ•ÈóÆÈ¢òÁöÑÊ†∏ÂøÉËß£ÂÜ≥ÊñπÊ°àÔºåËøô‰πüÊòØËÆæËÆ°Ê®°ÂºèËÉΩË¢´ÂπøÊ≥õÂ∫îÁî®ÁöÑÂéüÂõ†„ÄÇ ËÆæËÆ°Ê®°ÂºèÁöÑÁ±ªÂûã ÊÄªÂÖ±Êúâ 23 ÁßçËÆæËÆ°Ê®°ÂºèÔºåËøô‰∫õÊ®°ÂºèÂèØ‰ª•ÂàÜ‰∏∫‰∏âÂ§ßÁ±ªÔºöÂàõÂª∫ÂûãÊ®°ÂºèÔºàCreational PatternsÔºâ„ÄÅÁªìÊûÑÂûãÊ®°ÂºèÔºàStructural PatternsÔºâ„ÄÅË°å‰∏∫ÂûãÊ®°ÂºèÔºàBehavioral PatternsÔºâ„ÄÇÂΩìÁÑ∂ÔºåËøòÊúâÂè¶‰∏ÄÁ±ªËÆæËÆ°Ê®°ÂºèÔºöJ2EE ËÆæËÆ°Ê®°Âºè„ÄÇ .tg {border-collapse:collapse;border-spacing:0;border-color:#aaa;} .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:2px;overflow:hidden;word-break:normal;border-color:#aaa;color:#333;background-color:#fff;} .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:2px;overflow:hidden;word-break:normal;border-color:#aaa;color:#fff;background-color:#f38630;} .tg .tg-84q5{border-color:#00009b;text-align:left;vertical-align:top} .tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top} .tg .tg-hdkn{border-color:#cb0000;text-align:center;vertical-align:top} .tg .tg-tkru{border-color:#3531ff;text-align:left;vertical-align:top} Â∫è Âè∑ Ê®°Âºè &amp; ÊèèËø∞ ÂåÖÊã¨ 1 ÂàõÂª∫ÂûãÊ®°ÂºèËøô‰∫õËÆæËÆ°Ê®°ÂºèÊèê‰æõ‰∫Ü‰∏ÄÁßçÂú®ÂàõÂª∫ÂØπË±°ÁöÑÂêåÊó∂ÈöêËóèÂàõÂª∫ÈÄªËæëÁöÑÊñπÂºèÔºåËÄå‰∏çÊòØ‰ΩøÁî® new ËøêÁÆóÁ¨¶Áõ¥Êé•ÂÆû‰æãÂåñÂØπË±°„ÄÇËøô‰ΩøÂæóÁ®ãÂ∫èÂú®Âà§Êñ≠ÈíàÂØπÊüê‰∏™ÁªôÂÆöÂÆû‰æãÈúÄË¶ÅÂàõÂª∫Âì™‰∫õÂØπË±°Êó∂Êõ¥Âä†ÁÅµÊ¥ª„ÄÇ ‚òÖÂ∑•ÂéÇÊ®°ÂºèÔºàFactory PatternÔºâ‚òÖÊäΩË±°Â∑•ÂéÇÊ®°ÂºèÔºàAbstract Factory PatternÔºâ‚òÖÂçï‰æãÊ®°ÂºèÔºàSingleton PatternÔºâ‚òÖÂª∫ÈÄ†ËÄÖÊ®°ÂºèÔºàBuilder PatternÔºâ‚òÖÂéüÂûãÊ®°ÂºèÔºàPrototype PatternÔºâ 2 ÁªìÊûÑÂûãÊ®°ÂºèËøô‰∫õËÆæËÆ°Ê®°ÂºèÂÖ≥Ê≥®Á±ªÂíåÂØπË±°ÁöÑÁªÑÂêà„ÄÇÁªßÊâøÁöÑÊ¶ÇÂøµË¢´Áî®Êù•ÁªÑÂêàÊé•Âè£ÂíåÂÆö‰πâÁªÑÂêàÂØπË±°Ëé∑ÂæóÊñ∞ÂäüËÉΩÁöÑÊñπÂºè„ÄÇ ‚òÖÈÄÇÈÖçÂô®Ê®°ÂºèÔºàAdapter PatternÔºâ‚òÖÊ°•Êé•Ê®°ÂºèÔºàBridge PatternÔºâ‚òÖËøáÊª§Âô®Ê®°ÂºèÔºàFilter„ÄÅCriteria PatternÔºâ‚òÖÁªÑÂêàÊ®°ÂºèÔºàComposite PatternÔºâ‚òÖË£ÖÈ•∞Âô®Ê®°ÂºèÔºàDecorator PatternÔºâ‚òÖÂ§ñËßÇÊ®°ÂºèÔºàFacade PatternÔºâ‚òÖ‰∫´ÂÖÉÊ®°ÂºèÔºàFlyweight PatternÔºâ‚òÖ‰ª£ÁêÜÊ®°ÂºèÔºàProxy PatternÔºâ 3 Ë°å‰∏∫ÂûãÊ®°ÂºèËøô‰∫õËÆæËÆ°Ê®°ÂºèÁâπÂà´ÂÖ≥Ê≥®ÂØπË±°‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇ ‚òÖË¥£‰ªªÈìæÊ®°ÂºèÔºàChain of Responsibility PatternÔºâ‚òÖÂëΩ‰ª§Ê®°ÂºèÔºàCommand PatternÔºâ‚òÖËß£ÈáäÂô®Ê®°ÂºèÔºàInterpreter PatternÔºâ‚òÖËø≠‰ª£Âô®Ê®°ÂºèÔºàIterator PatternÔºâ‚òÖ‰∏≠‰ªãËÄÖÊ®°ÂºèÔºàMediator PatternÔºâ‚òÖÂ§áÂøòÂΩïÊ®°ÂºèÔºàMemento PatternÔºâ‚òÖËßÇÂØüËÄÖÊ®°ÂºèÔºàObserver PatternÔºâ‚òÖÁä∂ÊÄÅÊ®°ÂºèÔºàState PatternÔºâ‚òÖÁ©∫ÂØπË±°Ê®°ÂºèÔºàNull Object PatternÔºâ‚òÖÁ≠ñÁï•Ê®°ÂºèÔºàStrategy PatternÔºâ‚òÖÊ®°ÊùøÊ®°ÂºèÔºàTemplate PatternÔºâ‚òÖËÆøÈóÆËÄÖÊ®°ÂºèÔºàVisitor PatternÔºâ 4 J2EE Ê®°ÂºèËøô‰∫õËÆæËÆ°Ê®°ÂºèÁâπÂà´ÂÖ≥Ê≥®Ë°®Á§∫Â±Ç„ÄÇËøô‰∫õÊ®°ÂºèÊòØÁî± Sun Java Center Èâ¥ÂÆöÁöÑ„ÄÇ ‚òÖMVC Ê®°ÂºèÔºàMVC PatternÔºâ‚òÖ‰∏öÂä°‰ª£Ë°®Ê®°ÂºèÔºàBusiness Delegate PatternÔºâ‚òÖÁªÑÂêàÂÆû‰ΩìÊ®°ÂºèÔºàComposite Entity PatternÔºâ‚òÖÊï∞ÊçÆËÆøÈóÆÂØπË±°Ê®°ÂºèÔºàData Access Object PatternÔºâ‚òÖÂâçÁ´ØÊéßÂà∂Âô®Ê®°ÂºèÔºàFront Controller PatternÔºâ‚òÖÊã¶Êà™ËøáÊª§Âô®Ê®°ÂºèÔºàIntercepting Filter PatternÔºâ‚òÖÊúçÂä°ÂÆö‰ΩçÂô®Ê®°ÂºèÔºàService Locator PatternÔºâ‚òÖ‰º†ËæìÂØπË±°Ê®°ÂºèÔºàTransfer Object PatternÔºâ ‰∏ãÈù¢Áî®‰∏Ä‰∏™ÂõæÁâáÊù•Êï¥‰ΩìÊèèËø∞‰∏Ä‰∏ãËÆæËÆ°Ê®°Âºè‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºö ÂàõÂª∫ÂûãÊ®°Âºè ÂàõÂª∫ÂûãËÆæËÆ°Ê®°ÂºèÊèê‰æõ‰∫Ü‰∏ÄÁßçÂú®ÂàõÂª∫ÂØπË±°ÁöÑÂêåÊó∂ÈöêËóèÂàõÂª∫ÈÄªËæëÁöÑÊñπÂºèÔºåËÄå‰∏çÊòØ‰ΩøÁî® new ËøêÁÆóÁ¨¶Áõ¥Êé•ÂÆû‰æãÂåñÂØπË±°„ÄÇËøô‰ΩøÂæóÁ®ãÂ∫èÂú®Âà§Êñ≠ÈíàÂØπÊüê‰∏™ÁªôÂÆöÂÆû‰æãÈúÄË¶ÅÂàõÂª∫Âì™‰∫õÂØπË±°Êó∂Êõ¥Âä†ÁÅµÊ¥ª„ÄÇ ÁªìÊûÑÂûãÊ®°Âºè ÁªìÊûÑÂûãÊ®°ÂºèËÆæËÆ°ÔºåÂÆÉÂÖ≥Ê≥®Á±ªÂíåÂØπË±°ÁöÑÁªÑÂêà„ÄÇÁªßÊâøËøô‰∏ÄÊ¶ÇÂøµË¢´Áî®Êù•ÁªÑÂêàÊé•Âè£ÂíåÂÆö‰πâÁªÑÂêàÂØπË±°Ëé∑ÂæóÊñ∞ÂäüËÉΩÁöÑÊñπÂºè„ÄÇ Ë°å‰∏∫ÂûãÊ®°Âºè Ë°å‰∏∫ÂûãÊ®°ÂºèËÆæËÆ°ÔºåÊõ¥ÂÖ≥Ê≥®ÂØπË±°‰∏éÂØπË±°‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇ ËÆæËÆ°Ê®°ÂºèÁöÑÂÖ≠Â§ßÂéüÂàô ÂºÄÈó≠ÂéüÂàôÔºàOpen Close PrincipleÔºâ ÂºÄÈó≠ÂéüÂàôÁöÑÊÑèÊÄùÊòØÔºöÂØπÊâ©Â±ïÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠„ÄÇÂú®Á®ãÂ∫èÈúÄË¶ÅËøõË°åÊãìÂ±ïÁöÑÊó∂ÂÄôÔºå‰∏çËÉΩÂéª‰øÆÊîπÂéüÊúâÁöÑ‰ª£Á†ÅÔºåÂÆûÁé∞‰∏Ä‰∏™ÁÉ≠ÊèíÊãîÁöÑÊïàÊûú„ÄÇÁÆÄË®Ä‰πãÔºåÊòØ‰∏∫‰∫Ü‰ΩøÁ®ãÂ∫èÁöÑÊâ©Â±ïÊÄßÂ•ΩÔºåÊòì‰∫éÁª¥Êä§ÂíåÂçáÁ∫ß„ÄÇÊÉ≥Ë¶ÅËææÂà∞ËøôÊ†∑ÁöÑÊïàÊûúÔºåÈúÄË¶Å‰ΩøÁî®Êé•Âè£ÂíåÊäΩË±°Á±ª„ÄÇ ÈáåÊ∞è‰ª£Êç¢ÂéüÂàôÔºàLiskov Substitution PrincipleÔºâ ÈáåÊ∞è‰ª£Êç¢ÂéüÂàôÊòØÈù¢ÂêëÂØπË±°ËÆæËÆ°ÁöÑÂü∫Êú¨ÂéüÂàô‰πã‰∏Ä„ÄÇ ÈáåÊ∞è‰ª£Êç¢ÂéüÂàô‰∏≠ËØ¥Ôºå‰ªª‰ΩïÂü∫Á±ªÂèØ‰ª•Âá∫Áé∞ÁöÑÂú∞ÊñπÔºåÂ≠êÁ±ª‰∏ÄÂÆöÂèØ‰ª•Âá∫Áé∞„ÄÇLSP ÊòØÁªßÊâøÂ§çÁî®ÁöÑÂü∫Áü≥ÔºåÂè™ÊúâÂΩìÊ¥æÁîüÁ±ªÂèØ‰ª•ÊõøÊç¢ÊéâÂü∫Á±ªÔºå‰∏îËΩØ‰ª∂Âçï‰ΩçÁöÑÂäüËÉΩ‰∏çÂèóÂà∞ÂΩ±ÂìçÊó∂ÔºåÂü∫Á±ªÊâçËÉΩÁúüÊ≠£Ë¢´Â§çÁî®ÔºåËÄåÊ¥æÁîüÁ±ª‰πüËÉΩÂ§üÂú®Âü∫Á±ªÁöÑÂü∫Á°Ä‰∏äÂ¢ûÂä†Êñ∞ÁöÑË°å‰∏∫„ÄÇÈáåÊ∞è‰ª£Êç¢ÂéüÂàôÊòØÂØπÂºÄÈó≠ÂéüÂàôÁöÑË°•ÂÖÖ„ÄÇÂÆûÁé∞ÂºÄÈó≠ÂéüÂàôÁöÑÂÖ≥ÈîÆÊ≠•È™§Â∞±ÊòØÊäΩË±°ÂåñÔºåËÄåÂü∫Á±ª‰∏éÂ≠êÁ±ªÁöÑÁªßÊâøÂÖ≥Á≥ªÂ∞±ÊòØÊäΩË±°ÂåñÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºåÊâÄ‰ª•ÈáåÊ∞è‰ª£Êç¢ÂéüÂàôÊòØÂØπÂÆûÁé∞ÊäΩË±°ÂåñÁöÑÂÖ∑‰ΩìÊ≠•È™§ÁöÑËßÑËåÉ„ÄÇ ‰æùËµñÂÄíËΩ¨ÂéüÂàôÔºàDependence Inversion PrincipleÔºâ Ëøô‰∏™ÂéüÂàôÊòØÂºÄÈó≠ÂéüÂàôÁöÑÂü∫Á°ÄÔºåÂÖ∑‰ΩìÂÜÖÂÆπÔºöÈíàÂØπÊé•Âè£ÁºñÁ®ãÔºå‰æùËµñ‰∫éÊäΩË±°ËÄå‰∏ç‰æùËµñ‰∫éÂÖ∑‰Ωì„ÄÇ Êé•Âè£ÈöîÁ¶ªÂéüÂàôÔºàInterface Segregation PrincipleÔºâ Ëøô‰∏™ÂéüÂàôÁöÑÊÑèÊÄùÊòØÔºö‰ΩøÁî®Â§ö‰∏™ÈöîÁ¶ªÁöÑÊé•Âè£ÔºåÊØî‰ΩøÁî®Âçï‰∏™Êé•Âè£Ë¶ÅÂ•Ω„ÄÇÂÆÉËøòÊúâÂè¶Â§ñ‰∏Ä‰∏™ÊÑèÊÄùÊòØÔºöÈôç‰ΩéÁ±ª‰πãÈó¥ÁöÑËÄ¶ÂêàÂ∫¶„ÄÇÁî±Ê≠§ÂèØËßÅÔºåÂÖ∂ÂÆûËÆæËÆ°Ê®°ÂºèÂ∞±ÊòØ‰ªéÂ§ßÂûãËΩØ‰ª∂Êû∂ÊûÑÂá∫Âèë„ÄÅ‰æø‰∫éÂçáÁ∫ßÂíåÁª¥Êä§ÁöÑËΩØ‰ª∂ËÆæËÆ°ÊÄùÊÉ≥ÔºåÂÆÉÂº∫Ë∞ÉÈôç‰Ωé‰æùËµñÔºåÈôç‰ΩéËÄ¶Âêà„ÄÇ Ëø™Á±≥ÁâπÊ≥ïÂàôÔºåÂèàÁß∞ÊúÄÂ∞ëÁü•ÈÅìÂéüÂàôÔºàDemeter PrincipleÔºâ ÊúÄÂ∞ëÁü•ÈÅìÂéüÂàôÊòØÊåáÔºö‰∏Ä‰∏™ÂÆû‰ΩìÂ∫îÂΩìÂ∞ΩÈáèÂ∞ëÂú∞‰∏éÂÖ∂‰ªñÂÆû‰Ωì‰πãÈó¥ÂèëÁîüÁõ∏‰∫í‰ΩúÁî®Ôºå‰ΩøÂæóÁ≥ªÁªüÂäüËÉΩÊ®°ÂùóÁõ∏ÂØπÁã¨Á´ã„ÄÇ ÂêàÊàêÂ§çÁî®ÂéüÂàôÔºàComposite Reuse PrincipleÔºâ ÂêàÊàêÂ§çÁî®ÂéüÂàôÊòØÊåáÔºöÂ∞ΩÈáè‰ΩøÁî®ÂêàÊàê/ËÅöÂêàÁöÑÊñπÂºèÔºåËÄå‰∏çÊòØ‰ΩøÁî®ÁªßÊâø„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-03‰πã-Thread‰∏≠start()Âíårun()ÁöÑÂå∫Âà´]]></title>
    <url>%2Fposts%2F22f6e11d.html</url>
    <content type="text"><![CDATA[start()Âíårun()ÊñπÊ≥ïÁöÑÂå∫Âà´ start(): ÂÆÉÁöÑ‰ΩúÁî®ÊòØÂêØÂä®‰∏Ä‰∏™Êñ∞Á∫øÁ®ãÔºåÊñ∞Á∫øÁ®ã‰ºöÊâßË°åÁõ∏Â∫îÁöÑrun()ÊñπÊ≥ï„ÄÇstart()‰∏çËÉΩË¢´ÈáçÂ§çË∞ÉÁî®„ÄÇ run(): run()Â∞±ÂíåÊôÆÈÄöÁöÑÊàêÂëòÊñπÊ≥ï‰∏ÄÊ†∑ÔºåÂèØ‰ª•Ë¢´ÈáçÂ§çË∞ÉÁî®„ÄÇÂçïÁã¨Ë∞ÉÁî®run()ÁöÑËØùÔºå‰ºöÂú®ÂΩìÂâçÁ∫øÁ®ã‰∏≠ÊâßË°årun()ÔºåËÄåÂπ∂‰∏ç‰ºöÂêØÂä®Êñ∞Á∫øÁ®ãÔºÅ ‰∏ãÈù¢‰ª•‰ª£Á†ÅÊù•ËøõË°åËØ¥Êòé„ÄÇ 123456class MyThread extends Thread&#123; public void run()&#123; ... &#125; &#125;;MyThread mythread = new MyThread(); mythread.start()‰ºöÂêØÂä®‰∏Ä‰∏™Êñ∞Á∫øÁ®ãÔºåÂπ∂Âú®Êñ∞Á∫øÁ®ã‰∏≠ËøêË°årun()ÊñπÊ≥ï„ÄÇ ËÄåmythread.run()Âàô‰ºöÁõ¥Êé•Âú®ÂΩìÂâçÁ∫øÁ®ã‰∏≠ËøêË°årun()ÊñπÊ≥ïÔºåÂπ∂‰∏ç‰ºöÂêØÂä®‰∏Ä‰∏™Êñ∞Á∫øÁ®ãÊù•ËøêË°årun()„ÄÇ start()Âíårun()ÊñπÊ≥ïÁ§∫‰æã ‰∏ãÈù¢ÔºåÈÄöËøá‰∏Ä‰∏™ÁÆÄÂçïÁ§∫‰æãÊºîÁ§∫ÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂå∫Âà´„ÄÇÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122class TestThread extends Thread &#123; public TestThread(String name) &#123; super(name); &#125; @Override public void run() &#123; System.out.println(Thread.currentThread().getName() + " is running"); &#125;&#125;;public class ThreadMethodDemo &#123; public static void main(String[] args) &#123; Thread mythread = new TestThread("testThread"); System.out.println(Thread.currentThread().getName() + " call testThread.run()"); mythread.run(); System.out.println(Thread.currentThread().getName() + " call testThread.start()"); mythread.start(); &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 1234main call testThread.run()main is runningmain call testThread.start()testThread is running &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; Thread.currentThread().getName()ÊòØÁî®‰∫éËé∑Âèñ‚ÄúÂΩìÂâçÁ∫øÁ®ã‚ÄùÁöÑÂêçÂ≠ó„ÄÇÂΩìÂâçÁ∫øÁ®ãÊòØÊåáÊ≠£Âú®cpu‰∏≠Ë∞ÉÂ∫¶ÊâßË°åÁöÑÁ∫øÁ®ã„ÄÇ testThread.run()ÊòØÂú®‚Äú‰∏ªÁ∫øÁ®ãmain‚Äù‰∏≠Ë∞ÉÁî®ÁöÑÔºåËØ•run()ÊñπÊ≥ïÁõ¥Êé•ËøêË°åÂú®‚Äú‰∏ªÁ∫øÁ®ãmain‚Äù‰∏ä„ÄÇ testThread.start()‰ºöÂêØÂä®‚ÄúÁ∫øÁ®ãtestThread‚ÄùÔºå‚ÄúÁ∫øÁ®ãtestThread‚ÄùÂêØÂä®‰πãÂêéÔºå‰ºöË∞ÉÁî®run()ÊñπÊ≥ïÔºõÊ≠§Êó∂ÁöÑrun()ÊñπÊ≥ïÊòØËøêË°åÂú®‚ÄúÁ∫øÁ®ãtestThread‚Äù‰∏ä„ÄÇ start()Âíårun()Ê∫êÁ†ÅËØ¥ÊòéÔºàÂü∫‰∫éJDK1.8.0_171Ôºâ Thread.java‰∏≠start()ÊñπÊ≥ïÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728public synchronized void start() &#123; /** * Â¶ÇÊûúÁ∫øÁ®ã‰∏çÊòØ"Êñ∞Âª∫Áä∂ÊÄÅ"ÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏ * Áä∂ÊÄÅÂÄº0 ÂØπÂ∫î"Êñ∞Âª∫" */ if (threadStatus != 0) throw new IllegalThreadStateException(); /** Â∞ÜÁ∫øÁ®ãÊ∑ªÂä†Âà∞ThreadGroup‰∏≠ */ group.add(this); boolean started = false; try &#123; /** ÈÄöËøástart0()ÂêØÂä®Á∫øÁ®ã */ start0(); /** ËÆæÁΩÆstartedÊ†áËÆ∞ */ started = true; &#125; finally &#123; try &#123; if (!started) &#123; group.threadStartFailed(this); &#125; &#125; catch (Throwable ignore) &#123; /* do nothing. If start0 threw a Throwable then it will be passed up the call stack */ &#125; &#125;&#125; &lt;span id=&quot;inline-green&quot;&gt; ËØ¥ÊòéÔºö &lt;/span&gt; start()ÂÆûÈôÖ‰∏äÊòØÈÄöËøáÊú¨Âú∞ÊñπÊ≥ïstart0()ÂêØÂä®Á∫øÁ®ãÁöÑ„ÄÇËÄåstart0()‰ºöÊñ∞ËøêË°å‰∏Ä‰∏™Á∫øÁ®ãÔºåÊñ∞Á∫øÁ®ã‰ºöË∞ÉÁî®run()ÊñπÊ≥ï„ÄÇ 1private native void start0(); Thread.java‰∏≠run()ÊñπÊ≥ïÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345public void run() &#123; if (target != null) &#123; target.run(); &#125;&#125; &lt;span id=&quot;inline-green&quot;&gt; ËØ¥ÊòéÔºö &lt;/span&gt; targetÊòØ‰∏Ä‰∏™RunnableÂØπË±°„ÄÇrun()Â∞±ÊòØÁõ¥Êé•Ë∞ÉÁî®ThreadÁ∫øÁ®ãÁöÑRunnableÊàêÂëòÁöÑrun()ÊñπÊ≥ïÔºåÂπ∂‰∏ç‰ºöÊñ∞Âª∫‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~cherry-pick„ÄÅrevert„ÄÅreset‰ªãÁªç]]></title>
    <url>%2Fposts%2F1c4d9168.html</url>
    <content type="text"><![CDATA[** gti checkout -- filename ** git checkout -- filename ÂèØ‰ª•ÊääÂ∑•‰ΩúÂå∫ÁöÑÊüê‰∏™Êñá‰ª∂ÁöÑ‰øÆÊîπÊí§ÂõûÂà∞‰∏ä‰∏ÄÊ¨°addÊàñËÄÖcommitÁöÑÁä∂ÊÄÅÔºå‰∏çËøáfilename‰∏çËÉΩÁúÅÁï•. ÂèØ‰ª•‰ΩøÁî® git checkout -- ‰∏çÂä†Êñá‰ª∂ÂêçÊù•Êü•ÁúãÂΩìÂâçÂ∑•‰ΩúÂå∫‰øÆÊîπ‰∫ÜÂì™‰∫õÊñá‰ª∂ÔºåËøô‰∏™Âè™ÊòØÈíàÂØπÂ∑•‰ΩúÂå∫ÁöÑÈóÆÈ¢òÔºõ ** git reset head filename ** git reset HEAD filename ÂèØ‰ª•ÊääaddÂà∞ÁºìÂ≠òÂå∫ÁöÑÊñá‰ª∂ÂõûÈÄÄÂà∞Â∑•‰ΩúÂå∫Ôºå‰πüÂ∞±ÊòØÊääadd filenameËøô‰∏™ËøáÁ®ãÁªôÂõûÈÄÄ‰∫ÜÔºåËøôÂπ∂‰∏ç‰ºö‰øÆÊîπÊñá‰ª∂ÁöÑÂÜÖÂÆπÔºå Âè™ÊòØÊääÁºìÂ≠òÂå∫ÁöÑÊüê‰∏™Êñá‰ª∂ÂèòÊàêÂíåHEADËøô‰∏™ÂΩìÂâçÁâàÊú¨Áõ∏ÂêåÔºå‰πüÂ∞±ÊòØËØ¥Â¶ÇÊûú‰Ω†Â§öÊ¨°addÔºåËøô‰ºöÂõûÈÄÄÂà∞Á¨¨‰∏ÄÊ¨°addÁöÑËøáÁ®ãÔºåÂíå‰∏äÈù¢ÁöÑÊìç‰Ωú‰∏ÄÊ†∑Ôºå‰πüÂèØ‰ª•‰∏çÂ∏¶‰∏äÊñá‰ª∂ÂêçÊù•Êü•ÁúãÂì™‰∫õÊñá‰ª∂Ë¢´Ê∑ªÂä†Âà∞‰∫ÜÁºìÂ≠òÂå∫Ôºõ ** git reset --hard head^ ** git reset --hard HEAD~„Äê1Ôºå2Ôºå3Ôºå4Ôºå5...„ÄëËøô‰∏™ÊòØÂ§ßÂÆ∂ÁÜüÊÇâÁöÑÊú¨Âú∞ÁâàÊú¨ÁöÑÂõûÈÄÄ ** ÊüêÂàÜÊîØ‰∏äÁöÑ‰øÆÊîπËøÅÁßªÂà∞Âè¶‰∏ÄÂàÜÊîØ ** ÊØîÂ¶ÇÊàë‰ª¨Âú®ÂàÜÊîØa‰∏äÂºÄÂèëÊñ∞ÂäüËÉΩÔºåÊ≠§Êó∂Êúâ‰∏™Á¥ßÊÄ•bugÈúÄË¶Å‰øÆÊîπÔºåÁÑ∂ÂêéÂàáÊç¢Âà∞‰∫ÜÂàÜÊîØb„ÄÇbug‰øÆÂ§çÂÆå‰πãÂêéÂøò‰∫ÜÂàáÂõû‰πãÂâçÁöÑÂàÜÊîØaÔºåËÄåÊòØÂú®ÂàÜÊîØb‰∏äÈù¢ÁªßÁª≠ÁºñÂÜôÊú¨Â∫îËØ•ÊòØÂàÜÊîØaÁöÑÂÜÖÂÆπÔºå ËøôÊ†∑bÂàÜÊîØÂ≠òÂú®‰∫Ü‰∏ÄÈÉ®ÂàÜaÂàÜÊîØÁöÑ‰ª£Á†ÅÔºåËøô‰∏™Êó∂ÂÄôÈúÄË¶ÅÊääËøôÊÆµ‰ª£Á†ÅËøÅÁßªÂà∞aÂàÜÊîØ‰∏äÔºå‰∏§‰∏™ÊÄùË∑ØÔºö 1ÔºâÂ¶ÇÊûúËøòÊ≤°ÊúâÂú®bÂàÜÊîØ‰∏äcommitÁöÑËØù(addÁöÑËØùÊ≤°ÂΩ±ÂìçÔºåÂú®ËøÅÁßªÂêéÔºåÂ∞±‰∏ç‰ºöÂÜçÂΩìÂâçÂàÜÊîØÁöÑÁºìÂ≠ò‰∏≠)„ÄÇ Áõ¥Êé•ÂàáÂà∞aÂàÜÊîØÔºåÊ≠§Êó∂‰ºöÊèêÁ§∫ÊúâÊ≤°ÊúâË¢´commitÁöÑ‰ª£Á†ÅÔºåÂàáÂà∞aÂàÜÊîØÂêéÔºåÂ∞±ÂèØ‰ª•commitËøôÊÆµÊ≤°ÊúâË¢´commitÁöÑ‰ª£Á†ÅÔºå‰πüÂ∞±ÊòØÂú®bÂàÜÊîØ‰∏äÁºñÂÜôÁöÑ‰ª£Á†ÅÊ≠£Á°ÆÁöÑË¢´ËøÅÁßªÂà∞‰∫ÜaÂàÜÊîØ„ÄÇ 2ÔºâÂ¶ÇÊûúÂ∑≤Áªècommit‰∫ÜÔºåÂèØ‰ª•Ëøô‰πàÊù•Ôºögit logÊâæÂà∞‰Ω†commitÁöÑÂàÜÊîØÂè∑ÔºåÁÑ∂ÂêéÁõ¥Êé•ÂàáÊç¢Âà∞aÂàÜÊîØÔºåÊâßË°ågit cherry-pick commit-idÔºåËøô‰∏™commit-idÂ∞±ÊòØÈÇ£‰∏™bÂàÜÊîØÈîôËØØcommitÁöÑidÔºå Ëøô‰∏™ÂëΩ‰ª§Â∞±ÊòØÊääËøô‰∏™commitÁöÑ‰øÆÊîπÊãøÂà∞ÂΩìÂâçÂàÜÊîØÊù•ÔºåÂæàÁÆÄÂçïÁ≤óÊö¥ËÄåÊúâÊïà„ÄÇÂÜçÂàáÊç¢Âà∞bÂàÜÊîØÔºå‰ΩøÁî®git revert commit-idÊääËøô‰∏™ÈîôËØØÁöÑÂàÜÊîØÂè∑ÁßªÈô§„ÄÇ ** revert reset cherry-pick ** git revert ÂΩìÊàë‰ª¨ÁöÑÊüê‰∏™ÂàÜÊîØ‰∏≠Êúâ‰∫ÜÂæàÂ§öÁâàÊú¨‰πãÂêéÔºåÂΩ¢Êàê‰∫Ü‰∏ÄÊù°ÁâàÊú¨ÈìæÔºåÂ¶ÇÊûúÊÉ≥ÂéªÈô§Ëøô‰∏™Á∫øË∑Ø‰∏≠ÁöÑÊüê‰∏ÄÁâàÊú¨Ôºå‰ΩÜÊòØ‰øùÁïôÁâàÊú¨Èìæ‰∏≠ÁöÑÂÖ∂‰ªñÊâÄÊúâ‰øÆÊîπÔºåÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÁâàÊú¨ÈìæÔºåÁâàÊú¨Èìæ‰∏≠ÁöÑHEADÂ∞±ÊòØrevertÊúÄÊñ∞ÁîüÊàêÁöÑÁâàÊú¨„ÄÇÊâÄ‰ª•revertÊòØ‰ºöÁîüÊàêÊñ∞ÁâàÊú¨ÁöÑÊåá‰ª§„ÄÇ ÂèØ‰ª•Ëøô‰πàÊÉ≥ÔºåÈìæÂ∞±ÂÉè‰∏Ä‰∏™ÈìæÊù°ÔºåÊòØ‰∏ÄÁéØÊâ£‰∏ÄÁéØÁöÑÔºåÂÖ∂‰∏≠ÁöÑ‰∏ÄÁéØÂ∞±ÊòØ‰∏Ä‰∏™ÁâàÊú¨ÔºåÁé∞Âú®ÊÉ≥ÂéªËøô‰∏™ÈìæÊù°‰∏≠ÁöÑÊüê‰∏ÄÁéØÔºàÊüê‰∏™ÁâàÊú¨ÔºâÔºå ÊâßË°ågit revert HEAD~2ÔºåËøô‰∏™HEAD~2Â∞±ÊòØËøô‰∏™Ë¶ÅÂà†Èô§ÁöÑÁâàÊú¨ÔºàÈìæÊù°‰∏≠ÁöÑ‰∏ÄÁéØÔºâÔºåÂ∞±‰ºöÊääËøô‰∏™ÁéØËß£ÂºÄÂâîÈô§Ôºå ÊääÂíåËøô‰∏™ÂâîÈô§ÁöÑÁéØÔºàÁâàÊú¨ÔºâÁõ∏ÈÇªÁöÑÁéØËøûÂú®‰∏ÄËµ∑ÔºåÂΩ¢Êàê‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÈìæÊù°ÔºàÂ∞ë‰∫Ü‰∏ÄÁéØÔºâÔºå ÁÑ∂ÂêéÂú®ÈìæÊù°ÁöÑÊúÄÂêéÈù¢Ê∑ªÂä†‰∏Ä‰∏™Êñ∞ÁöÑÊ≤°Êúâ‰ªª‰Ωï‰øÆÊîπÁöÑÁéØÔºàrevert HEAD~2 Ëøô‰∏™Êñ∞ÁöÑcommitÁâàÊú¨Ôºâ Êï¥‰∏™ËøáÁ®ãÂ∞±ÂÉèÂâîÈô§‰∫Ü‰∏≠Èó¥Êüê‰∏Ä‰∏™ÁâàÊú¨ÔºåÊúÄÂêéÂä†‰∏ä‰∫Ü‰∏Ä‰∏™Ê≤°Êúâ‰ªª‰Ωï‰øÆÊîπÁöÑÊñ∞ÁöÑÁâàÊú¨„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰∏çË¶ÅÈöèÊÑèÂà†Èô§‰∏≠Èó¥ÁöÑÁâàÊú¨ÔºåÂõ†‰∏∫ÂèØËÉΩ‰ºöÂ≠òÂú®‰æùËµñÔºåÊúÄÂ•ΩÊòØrevertÊúÄÊñ∞ÁöÑÁâàÊú¨ÔºåÈ£éÈô©‰ºöÂ∞èÂæàÂ§ö„ÄÇ git reset git reset [--hard|soft|mixed|merge|keep] [&lt;commit&gt;ÊàñHEAD]ÊòØÊØîËæÉÂ∏∏Áî®ÁöÑÊåá‰ª§ÔºåÂÖ∂‰∏≠ÊØîËæÉÈáçË¶ÅÁöÑÊòØmodeÔºå‰πüÂ∞±ÊòØ --hard„ÄÅ--soft„ÄÅ--mixed„ÄÇ„ÄÇ„ÄÇÊØîËæÉÂ∏∏ËßÅÁöÑÊòØ--hardÂíå--softÔºõ --hardÊòØÊåáÂÆåÂÖ®ÈáçËÆæÔºå‰ºöÊääÂõûÈÄÄÂà∞ÊüêÁâàÊú¨‰πãÂêéÁöÑ‰øÆÊîπÂÖ®ÈÉ®Âà†Èô§Ôºå --softËøôÊòØ‰∏™ÂõûÈÄÄËß£‰ΩìÔºåËÆ©ÁâàÊú¨Â∫ìÂõûÈÄÄÂà∞Êüê‰∏™ÁâàÊú¨ÔºåËøô‰∏™ÁâàÊú¨‰πãÂêéÁöÑ‰øÆÊîπÂÖ®ÈÉ®Â≠òÂú®ÁºìÂ≠òÂå∫ÔºåËøô‰∏™Êó∂ÂÄôÂú®commitÁöÑËØùÔºåÂèà‰ºöÊää‰ºöÈÄÄÁöÑÈÉ®ÂàÜÈáçÊñ∞Âä†ËΩΩÂà∞ÊúÄÊñ∞ÁâàÊú¨‰∏≠Ôºõ git cherry-pick git cherry-pick &lt;commit id&gt;Áî®‰∫éÊääÂè¶‰∏Ä‰∏™Êú¨Âú∞ÂàÜÊîØÁöÑcommit‰øÆÊîπÂ∫îÁî®Âà∞ÂΩìÂâçÂàÜÊîØÔºå‰πüÊòØËß£ÂÜ≥‰πãÂâçÈÅáÂà∞ÈóÆÈ¢òÁöÑÂÖ≥ÈîÆÔºåÂèØ‰ª•Áõ¥Êé•ÊääÂÖ∂‰ªñÁöÑÂàÜÊîØ‰∏äÁöÑ‰øÆÊîπÊàñËÄÖÊòØÊüê‰∏Ä‰∏™ÁâàÊú¨Áõ¥Êé•ÂºïËøáÊù•ÔºåÂèØËÉΩ‰ºöÂ≠òÂú®ÂÜ≤Á™ÅÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÂíåÊ≠£Â∏∏ÁöÑÂÜ≤Á™Å‰∏ÄÊ†∑ÁöÑËß£ÂÜ≥Â∞±Â•Ω‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~ÂêàÂπ∂ÊåáÂÆöÊñá‰ª∂ÊàñCommitsÂà∞Âè¶‰∏ÄÂàÜÊîØ]]></title>
    <url>%2Fposts%2F5040fe16.html</url>
    <content type="text"><![CDATA[Âàö‰ΩøÁî®gitËøõË°åÁâàÊú¨ÁÆ°ÁêÜÁöÑÊó∂ÂÄôÔºåÁî±‰∫éÊàêÂëòÈó¥ÁöÑ‰ª£Á†ÅÊúâÁöÑÈúÄË¶Å‰∏äÁ∫øÔºåÊúâÁöÑ‰∏çÈúÄË¶Å‰∏äÁ∫øÔºåÂ¶ÇÊûúÁõ¥Êé•mergeÔºåÁªèÂ∏∏ ‰ºöÊääÂà´‰∫∫‰∏çÈúÄË¶Å‰∏äÁ∫øÁöÑ‰ª£Á†ÅÂêàÂπ∂ÁöÑmasterÔºåÂØºËá¥ÈóÆÈ¢ò‰ªéÁîü„ÄÇÊâÄ‰ª•ÔºåÊúÄÁ®≥Â¶•ÁöÑÊòØÂè™ÂêàÂπ∂‰Ω†ÈúÄË¶ÅÁöÑÈÇ£‰∫õcommitsÔºå‰∏çÈúÄË¶ÅÁöÑcommitsÂ∞±‰∏çÂêàÂπ∂ËøõÂéª„ÄÇ ÈÇ£‰πàÂ¶Ç‰Ωï‰ªé‰∏Ä‰∏™ÂàÜÊîØÂêàÂπ∂ÁâπÂÆöÁöÑÊñá‰ª∂ÊàñËÄÖCommitsÂà∞Âè¶‰∏Ä‰∏™ÂàÜÊîØËøô‰∏™ÈóÆÈ¢òÊÄ•ÂæÖËß£„ÄÇ ÂêàÂπ∂Êüê‰∏™ÂàÜÊîØ‰∏äÁöÑÂçï‰∏™commit È¶ñÂÖàÔºåÁî®git logÊàñsourcetreeÂ∑•ÂÖ∑Êü•Áúã‰Ω†ÊÉ≥ÈÄâÊã©Âì™‰∫õcommitsËøõË°åÂêàÂπ∂Ôºå‰æãÂ¶ÇÔºö ÊØîÂ¶Çdev-w ÂàÜÊîØ‰∏äÁöÑcommit 2aeefdacad6ed1586a1e035fb8860f11533db23c ÈùûÂ∏∏ÈáçË¶ÅÔºåÂÆÉÂê´Êúâ‰∏Ä‰∏™Á¥ßÊÄ•bugÁöÑ‰øÆÂ§çÊàñÊòØÂÖ∂‰ªñÂÜÖÂÆπ„ÄÇÊó†ËÆ∫‰ªÄ‰πàÂéüÂõ†Ôºå ‰Ω†Áé∞Âú®Âè™ÈúÄË¶ÅÂ∞Ü 2aeefdacad6ed1586a1e035fb8860f11533db23c ÂêàÂπ∂Âà∞masterÔºåËÄå‰∏çÂêàÂπ∂dev-w‰∏äÁöÑÂÖ∂‰ªñcommitsÔºåÊâÄ‰ª•Êàë‰ª¨Áî®git cherry-pickÂëΩ‰ª§Êù•ÂÅöÔºö 123git checkout master git cherry-pick 2aeefdacad6ed1586a1e035fb8860f11533db23c ËøôÊ†∑ 2aeefdacad6ed1586a1e035fb8860f11533db23c Â∞±Ë¢´ÂêàÂπ∂Âà∞masterÂàÜÊîØÔºåÂπ∂Âú®master‰∏≠Ê∑ªÂä†‰∫ÜcommitÔºà‰Ωú‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑcommitÔºâ„ÄÇ cherry-pick ÂíåmergeÊØîËæÉÁ±ª‰ººÔºåÂ¶ÇÊûúgit‰∏çËÉΩÂêàÂπ∂‰ª£Á†ÅÊîπÂä®ÔºàÊØîÂ¶ÇÈÅáÂà∞ÂêàÂπ∂ÂÜ≤Á™ÅÔºâÔºågitÈúÄË¶Å‰Ω†Ëá™Â∑±Êù•Ëß£ÂÜ≥ÂÜ≤Á™ÅÂπ∂ÊâãÂä®Ê∑ªÂä†commit„ÄÇ ËøôÈáågit cherry-pickÊØèÊ¨°ÂêàÂπ∂ËøáÊù•‰ºöÊòæÁ§∫Êñá‰ª∂ÂÜ≤Á™Å(ÂÖ∂ÂÆûÂπ∂Ê≤°Êúâ‰ª£Á†ÅÂÜ≤Á™ÅÈÉ®ÂàÜÔºåÂè™ÈúÄÊâãÂä®Ëß£ÂÜ≥Êó¢ÂèØ) ÂêàÂπ∂Êüê‰∏™ÂàÜÊîØ‰∏äÁöÑ‰∏ÄÁ≥ªÂàócommits Âú®‰∏Ä‰∫õÁâπÂÆöÊÉÖÂÜµ‰∏ãÔºåÂêàÂπ∂Âçï‰∏™commitÂπ∂‰∏çÂ§üÔºå‰Ω†ÈúÄË¶ÅÂêàÂπ∂‰∏ÄÁ≥ªÂàóÁõ∏ËøûÁöÑcommits„ÄÇËøôÁßçÊÉÖÂÜµ‰∏ãÂ∞±‰∏çË¶Å‰ΩøÁî®cherry-pick‰∫ÜÔºårebase Êõ¥ÈÄÇÂêà„ÄÇ ÂÅáËÆæ‰Ω†ÈúÄË¶ÅÂêàÂπ∂dev-wÂàÜÊîØÁöÑcommit 76cada ~62ecb3 Âà∞masterÂàÜÊîØ„ÄÇ È¶ñÂÖàÈúÄË¶ÅÂü∫‰∫édev-wÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂàÜÊîØÔºåÂπ∂ÊåáÊòéÊñ∞ÂàÜÊîØÁöÑÊúÄÂêé‰∏Ä‰∏™commitÔºö 12git checkout dev-w git checkout -b newbranch 62ecb3 ÁÑ∂ÂêéÔºårebaseËøô‰∏™Êñ∞ÂàÜÊîØÁöÑcommitÂà∞masterÔºà‚ÄìontomasterÔºâ„ÄÇ76cada^ ÊåáÊòé‰Ω†ÊÉ≥‰ªéÂì™‰∏™ÁâπÂÆöÁöÑcommitÂºÄÂßã„ÄÇ 1git rebase --ontomaster 76cada^ ÂæóÂà∞ÁöÑÁªìÊûúÂ∞±ÊòØdev-wÂàÜÊîØÁöÑcommit 76cada ~ 62ecb3 ÈÉΩË¢´ÂêàÂπ∂Âà∞‰∫ÜmasterÂàÜÊîØ„ÄÇ Âè¶Â§ñÂ¶ÇÊûúÂè™ÊÉ≥Â∞Üdev-wÂàÜÊîØÁöÑÊüê‰∏™Êñá‰ª∂Test.javaÂêàÂπ∂Âà∞masterÂàÜÊîØ‰∏ä„ÄÇ 12git checkout dev-wgit checkout --patch master Test.java Á¨¨‰∏Ä‰∏™ÂëΩ‰ª§Ôºö ÂàáÊç¢Âà∞dev-wÂàÜÊîØÔºõ Á¨¨‰∫å‰∏™ÂëΩ‰ª§ÔºöÂêàÂπ∂masterÂàÜÊîØ‰∏äTest.javaÊñá‰ª∂Âà∞dev-wÂàÜÊîØ‰∏äÔºåÂ∞ÜmasterÂàÜÊîØ‰∏ä Test.java Êñá‰ª∂ËøΩÂä†Ë°•‰∏ÅÂà∞dev-wÂàÜÊîØ‰∏ä Test.javaÊñá‰ª∂„ÄÇ‰Ω†ÂèØ‰ª•Êé•ÂèóÊàñËÄÖÊãíÁªùË°•‰∏ÅÂÜÖÂÆπ„ÄÇ Â¶ÇÊûúÂè™ÊòØÁÆÄÂçïÁöÑÂ∞Üdev-wÂàÜÊîØÁöÑÊñá‰ª∂Test.java copyÂà∞masterÂàÜÊîØ‰∏äÔºõ 12git checkout mastergit checkout dev-w Test.java ÂàÜÊîØtest‰∏äÊúâ‰∏Ä‰∏™Êñá‰ª∂AÔºå‰Ω†Âú®test1ÂàÜÊîØ‰∏äÔºå Ê≠§Êó∂Â¶ÇÊûúÊÉ≥Áî®testÂàÜÊîØ‰∏äÁöÑAÊñá‰ª∂ÊõøÊç¢test1ÂàÜÊîØ‰∏äÁöÑÊñá‰ª∂ÁöÑËØùÔºå ÂèØ‰ª•‰ΩøÁî®git checkout test1, ÁÑ∂Âêégit checkout test ‚Äì A Âú®featureÂàÜÊîØcommit ÂàáÊç¢Ëá≥releaseÂàÜÊîØ ‰ªéfeatureÂàÜÊîØÊ£ÄÂá∫Áõ∏Â∫îÊñá‰ª∂ 12345678#branch featuregit commit -a -m &quot;msg&quot;git checkout release#branch releasegit checkout feature file-01git checkout feature file-x...git commit -a -m &quot;msg&quot;]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-02‰πã Â§öÁ∫øÁ®ãÂÆûÁé∞ÊñπÂºè]]></title>
    <url>%2Fposts%2F3868ed28.html</url>
    <content type="text"><![CDATA[ÂÆûÁé∞Â§öÁ∫øÁ®ãÁöÑÂá†ÁßçÊñπÂºè ÁªßÊâøThreadÁ±ª ÂÆûÁé∞RunnableÊé•Âè£ ÈÄöËøáCallableÂíåFuture ÈÄöËøáÁ∫øÁ®ãÊ±† ThreadÂíåRunnableÁÆÄ‰ªã Runnable RunnableÊòØ‰∏Ä‰∏™Êé•Âè£Â∫ìÔºåËØ•Êé•Âè£Âè™ÂåÖÂê´‰∫Ü‰∏Ä‰∏™run()ÊñπÊ≥ïÔºåÂÆö‰πâÂ¶Ç‰∏ãÔºö 123public interface Runnable &#123; public abstract void run();&#125; RunnableÁöÑ‰ΩúÁî®ÔºåÂÆûÁé∞Â§öÁ∫øÁ®ã„ÄÇÊàë‰ª¨ÂèØ‰ª•ÂÆö‰πâ‰∏Ä‰∏™Á±ªAÂÆûÁé∞RunnableÊé•Âè£ÔºõÁÑ∂ÂêéÔºåÈÄöËøánew Thread(new A())Á≠âÊñπÂºèÊñ∞Âª∫Á∫øÁ®ã„ÄÇ Thread Thread ÊòØ‰∏Ä‰∏™Á±ª„ÄÇThreadÊú¨Ë∫´Â∞±ÂÆûÁé∞‰∫ÜRunnableÊé•Âè£„ÄÇÂÆÉÁöÑÂ£∞ÊòéÂ¶Ç‰∏ãÔºö 1public class Thread implements Runnable &#123;&#125; ThreadÂíåRunnableÁöÑÂºÇÂêåÁÇπ Thread Âíå Runnable ÁöÑÁõ∏ÂêåÁÇπÔºöÈÉΩÊòØ‚ÄúÂ§öÁ∫øÁ®ãÁöÑÂÆûÁé∞ÊñπÂºè‚Äù„ÄÇ Thread Âíå Runnable ÁöÑ‰∏çÂêåÁÇπÔºö Thread ÊòØÁ±ªÔºåËÄåRunnableÊòØÊé•Âè£ÔºõThreadÊú¨Ë∫´ÊòØÂÆûÁé∞‰∫ÜRunnableÊé•Âè£ÁöÑÁ±ª„ÄÇÊàë‰ª¨Áü•ÈÅì‚Äú‰∏Ä‰∏™Á±ªÂè™ËÉΩÊúâ‰∏Ä‰∏™Áà∂Á±ªÔºå‰ΩÜÊòØÂç¥ËÉΩÂÆûÁé∞Â§ö‰∏™Êé•Âè£‚ÄùÔºåÂõ†Ê≠§RunnableÂÖ∑ÊúâÊõ¥Â•ΩÁöÑÊâ©Â±ïÊÄß„ÄÇ Ê≠§Â§ñÔºåRunnableËøòÂèØ‰ª•Áî®‰∫é‚ÄúËµÑÊ∫êÁöÑÂÖ±‰∫´‚Äù„ÄÇÂç≥ÔºåÂ§ö‰∏™Á∫øÁ®ãÈÉΩÊòØÂü∫‰∫éÊüê‰∏Ä‰∏™RunnableÂØπË±°Âª∫Á´ãÁöÑÔºåÂÆÉ‰ª¨‰ºöÂÖ±‰∫´RunnableÂØπË±°‰∏äÁöÑËµÑÊ∫ê„ÄÇ ÈÄöÂ∏∏ÔºåÂª∫ËÆÆÈÄöËøá‚ÄúRunnable‚ÄùÂÆûÁé∞Â§öÁ∫øÁ®ãÔºÅ ThreadÂíåRunnableÁöÑÂ§öÁ∫øÁ®ãÁ§∫‰æã ThreadÁöÑÂ§öÁ∫øÁ®ãÁ§∫‰æã 123456789101112131415161718192021222324public class ThreadTest &#123; public static void main(String[] args) &#123; // ÂêØÂä®3‰∏™Á∫øÁ®ãt1,t2,t3ÔºõÊØè‰∏™Á∫øÁ®ãÂêÑÂçñ10Âº†Á•®ÔºÅ MyThread t1 = new MyThread(); MyThread t2 = new MyThread(); MyThread t3 = new MyThread(); t1.start(); t2.start(); t3.start(); &#125;&#125;class MyThread extends Thread &#123; private int ticket = 10; @Override public void run() &#123; for (int i = 0; i &lt; 20; i++) &#123; if (this.ticket &gt; 0) &#123; System.out.println(this.getName() + " ÂçñÁ•®Ôºöticket" + this.ticket--); &#125; &#125; &#125;&#125;; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 123456789101112131415161718192021222324252627282930Thread-2 ÂçñÁ•®Ôºöticket10Thread-1 ÂçñÁ•®Ôºöticket10Thread-0 ÂçñÁ•®Ôºöticket10Thread-1 ÂçñÁ•®Ôºöticket9Thread-2 ÂçñÁ•®Ôºöticket9Thread-1 ÂçñÁ•®Ôºöticket8Thread-0 ÂçñÁ•®Ôºöticket9Thread-1 ÂçñÁ•®Ôºöticket7Thread-2 ÂçñÁ•®Ôºöticket8Thread-1 ÂçñÁ•®Ôºöticket6Thread-0 ÂçñÁ•®Ôºöticket8Thread-1 ÂçñÁ•®Ôºöticket5Thread-2 ÂçñÁ•®Ôºöticket7Thread-1 ÂçñÁ•®Ôºöticket4Thread-0 ÂçñÁ•®Ôºöticket7Thread-1 ÂçñÁ•®Ôºöticket3Thread-2 ÂçñÁ•®Ôºöticket6Thread-1 ÂçñÁ•®Ôºöticket2Thread-0 ÂçñÁ•®Ôºöticket6Thread-1 ÂçñÁ•®Ôºöticket1Thread-2 ÂçñÁ•®Ôºöticket5Thread-0 ÂçñÁ•®Ôºöticket5Thread-2 ÂçñÁ•®Ôºöticket4Thread-0 ÂçñÁ•®Ôºöticket4Thread-2 ÂçñÁ•®Ôºöticket3Thread-0 ÂçñÁ•®Ôºöticket3Thread-2 ÂçñÁ•®Ôºöticket2Thread-0 ÂçñÁ•®Ôºöticket2Thread-2 ÂçñÁ•®Ôºöticket1Thread-0 ÂçñÁ•®Ôºöticket1 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; (01) MyThreadÁªßÊâø‰∫éThreadÔºåÂÆÉÊòØËá™ÂÆö‰πâ‰∏™Á∫øÁ®ã„ÄÇÊØè‰∏™MyThreadÈÉΩ‰ºöÂçñÂá∫10Âº†Á•®„ÄÇ (02) ‰∏ªÁ∫øÁ®ãmainÂàõÂª∫Âπ∂ÂêØÂä®3‰∏™MyThreadÂ≠êÁ∫øÁ®ã„ÄÇÊØè‰∏™Â≠êÁ∫øÁ®ãÈÉΩÂêÑËá™ÂçñÂá∫‰∫Ü10Âº†Á•®„ÄÇ RunnableÁöÑÂ§öÁ∫øÁ®ãÁ§∫‰æã 1234567891011121314151617181920212223242526class MyThread2 implements Runnable &#123; private int ticket = 10; @Override public void run() &#123; for (int i = 0; i &lt; 20; i++) &#123; if (this.ticket &gt; 0) &#123; System.out.println(Thread.currentThread().getName() + " ÂçñÁ•®Ôºöticket" + this.ticket--); &#125; &#125; &#125;&#125;;public class RunnableTest &#123; public static void main(String[] args) &#123; MyThread2 mt = new MyThread2(); // ÂêØÂä®3‰∏™Á∫øÁ®ãt1,t2,t3(ÂÆÉ‰ª¨ÂÖ±Áî®‰∏Ä‰∏™RunnableÂØπË±°)ÔºåËøô3‰∏™Á∫øÁ®ã‰∏ÄÂÖ±Âçñ10Âº†Á•®ÔºÅ Thread t1 = new Thread(mt); Thread t2 = new Thread(mt); Thread t3 = new Thread(mt); t1.start(); t2.start(); t3.start(); &#125;&#125; &lt;span id=&quot;inline-blue&quot;&gt; ËøêË°åÁªìÊûúÔºö &lt;/span&gt; 12345678910Thread-0 ÂçñÁ•®Ôºöticket10Thread-0 ÂçñÁ•®Ôºöticket7Thread-0 ÂçñÁ•®Ôºöticket6Thread-0 ÂçñÁ•®Ôºöticket5Thread-2 ÂçñÁ•®Ôºöticket8Thread-1 ÂçñÁ•®Ôºöticket9Thread-1 ÂçñÁ•®Ôºöticket2Thread-1 ÂçñÁ•®Ôºöticket1Thread-2 ÂçñÁ•®Ôºöticket3Thread-0 ÂçñÁ•®Ôºöticket4 &lt;span id=&quot;inline-green&quot;&gt; ÁªìÊûúËØ¥ÊòéÔºö &lt;/span&gt; (01) Âíå‰∏äÈù¢‚ÄúMyThreadÁªßÊâø‰∫éThread‚Äù‰∏çÂêåÔºõËøôÈáåÁöÑMyThreadÂÆûÁé∞‰∫ÜThreadÊé•Âè£„ÄÇ (02) ‰∏ªÁ∫øÁ®ãmainÂàõÂª∫Âπ∂ÂêØÂä®3‰∏™Â≠êÁ∫øÁ®ãÔºåËÄå‰∏îËøô3‰∏™Â≠êÁ∫øÁ®ãÈÉΩÊòØÂü∫‰∫é‚ÄúmtËøô‰∏™RunnableÂØπË±°‚ÄùËÄåÂàõÂª∫ÁöÑ„ÄÇËøêË°åÁªìÊûúÊòØËøô3‰∏™Â≠êÁ∫øÁ®ã‰∏ÄÂÖ±ÂçñÂá∫‰∫Ü10Âº†Á•®„ÄÇËøôËØ¥ÊòéÂÆÉ‰ª¨ÊòØÂÖ±‰∫´‰∫ÜMyThreadÊé•Âè£ÁöÑ„ÄÇ]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~ÈáçÁΩÆ]]></title>
    <url>%2Fposts%2Fb9f23f09.html</url>
    <content type="text"><![CDATA[ÂàÜÊîØÊ∏∏Ê†ámasterÁöÑÊé¢Áßò ÂÖàÊù•ÁúãÁúãÂΩìÊúâÊñ∞ÁöÑÊèê‰∫§ÂèëÁîüÊó∂ÔºåÊñá‰ª∂.git/refs/heads/masterÁöÑÂÜÖÂÆπÂ¶Ç‰ΩïÊîπÂèò„ÄÇÈ¶ñÂÖàÂú®Â∑•‰ΩúÂå∫ÂàõÂª∫‰∏Ä‰∏™Êñ∞Êñá‰ª∂ÔºåÂßë‰∏îÂè´ÂÅönew-commit.txtÔºåÁÑ∂ÂêéÊèê‰∫§Âà∞ÁâàÊú¨Â∫ì‰∏≠„ÄÇ 123$ touch new-commit.txt $ git add new-commit.txt $ git commit -m &quot;does master follow this new commit?&quot; Ê≠§Êó∂Â∑•‰ΩúÁõÆÂΩï‰∏ã‰ºöÊúâ‰∏§‰∏™Êñá‰ª∂ÔºåÂÖ∂‰∏≠Êñá‰ª∂new-commit.txtÊòØÊñ∞Â¢ûÁöÑ„ÄÇ 12$ lsnew-commit.txt welcome.txt Êù•ÁúãÁúãmasterÂàÜÊîØÊåáÂêëÁöÑÊèê‰∫§IDÊòØÂê¶ÊîπÂèò‰∫Ü„ÄÇ ÂÖàÁúãÁúãÂú®ÁâàÊú¨Â∫ìÂºïÁî®Á©∫Èó¥(.git/refs/ÁõÆÂΩï)‰∏ãÁöÑmasterÊñá‰ª∂ÂÜÖÂÆπÁöÑÁ°ÆÊõ¥Êîπ‰∫ÜÔºåÊåáÂêë‰∫ÜÊñ∞ÁöÑÊèê‰∫§„ÄÇ 12$ cat .git/refs/heads/master23995a2d61d0a2667ba0db8aa4a17b127c1977d1 ÂÜçÁî®git logÊü•Áúã‰∏Ä‰∏ãÊèê‰∫§Êó•ÂøóÔºåÂèØ‰ª•ÁúãÂà∞ÂàöÂàöÂÆåÊàêÁöÑÊèê‰∫§„ÄÇ 1$ gilt log --graph --oneline ÂºïÁî®refs/heads/masterÂ∞±Â•ΩÂÉèÊòØ‰∏Ä‰∏™Ê∏∏Ê†áÔºåÂú®ÊúâÊñ∞ÁöÑÊèê‰∫§ÂèëÁîüÁöÑÊó∂ÂÄôÊåáÂêë‰∫ÜÊñ∞ÁöÑÊèê‰∫§„ÄÇÂèØÊòØÂ¶ÇÊûúÂè™ÂèØ‰∏ä„ÄÅ‰∏çÂèØ‰∏ãÔºåÂ∞±‰∏çËÉΩÁß∞‰∏∫‚ÄúÊ∏∏Ê†á‚Äù„ÄÇ GitÊèê‰æõ‰∫Ügit resetÂëΩ‰ª§ÔºåÂèØ‰ª•Â∞Ü‚ÄúÊ∏∏Ê†á‚ÄùÊåáÂêë‰ªªÊÑè‰∏Ä‰∏™Â≠òÂú®ÁöÑÊèê‰∫§ID„ÄÇ‰∏ãÈù¢Â∞±Â∞ùËØï‰∫∫‰∏∫Êõ¥ÊîπÊ∏∏Ê†á„ÄÇ 1$ git reset --hard HEAD^ Ê≥®ÊÑèÔºå‰∏äÈù¢ÁöÑÂëΩ‰ª§‰∏≠‰ΩøÁî®‰∫Ü--hardÂèÇÊï∞Ôºå‰ºöÁ†¥ÂùèÂ∑•‰ΩúÂå∫Êú™Êèê‰∫§ÁöÑÊîπÂä®ÔºåË¶ÅÊÖéÁî®„ÄÇËøôÊù°ÂëΩ‰ª§Â∞ÜmasterÈáçÁΩÆÂà∞‰∫Ü‰∏ä‰∏Ä‰∏™ËÄÅÁöÑÊèê‰∫§‰∏äÔºåÊù•Áúã‰∏ãmasterÊñá‰ª∂ÂÜÖÂÆπÊòØÂê¶Êõ¥Êîπ‰∫Ü„ÄÇ 12$ cat .git/refs/heads/mastera67c6fdd0a0e809340944432a3bf7d78e7e10f31 ÊûúÁÑ∂masterÂàÜÊîØÁöÑÂºïÁî®Êñá‰ª∂ÁöÑÊåáÂêëÊõ¥Êîπ‰∏∫Ââç‰∏ÄÊ¨°Êèê‰∫§ÁöÑID‰∫Ü„ÄÇËÄå‰∏îÈÄöËøá‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂèØ‰ª•ÁúãÂà∞Êñ∞Ê∑ªÂä†ÁöÑÊñá‰ª∂new-commit.txt‰πü‰∏¢Â§±‰∫Ü„ÄÇ 1$ ls ÈáçÁΩÆÂëΩ‰ª§‰∏ç‰ªÖÂèØ‰ª•ÈáçÁΩÆÂà∞Ââç‰∏ÄÊ¨°Êèê‰∫§ÔºåËøòÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Êèê‰∫§IDÈáçÁΩÆÂà∞‰ªª‰Ωï‰∏ÄÊ¨°Êèê‰∫§„ÄÇ ÈÄöËøágit logÊü•ËØ¢Âà∞ÊúÄÊó©ÁöÑÊèê‰∫§ID„ÄÇ 1$ git log --graph --oneline ÁÑ∂ÂêéÈáçÁΩÆÂà∞ÊúÄÊó©ÁöÑ‰∏ÄÊ¨°Êèê‰∫§„ÄÇ 1$ git reset --hard d3e0684 -ÈáçÁΩÆÂêé‰ºöÂèëÁé∞welcome.txt‰πüÂõûÈÄÄÂà∞‰∫ÜÊúÄÂéüÂßãÁâàÊú¨Â∫ìÔºåÊõæÁªèÁöÑ‰øÆÊîπÈÉΩ‰∏¢Â§±‰∫Ü„ÄÇ 1$ cat welcome.txt ‰ΩøÁî®ÈáçÁΩÆÂëΩ‰ª§ÂæàÂç±Èô©Ôºå‰ºöÂΩªÂ∫ïÁöÑ‰∏¢ÂºÉÂéÜÂè≤„ÄÇÈÇ£‰πàËøòËÉΩÂ§üÈÄöËøáÊµèËßàÊèê‰∫§ÂéÜÂè≤ÁöÑÂäûÊ≥ïÊâæÂà∞‰∏¢ÂºÉÁöÑÊèê‰∫§IDÔºåÂÜç‰ΩøÁî®ÈáçÁΩÆÂëΩ‰ª§ÊÅ¢Â§çÂéÜÂè≤ÂêóÔºü ‰∏çÂèØËÉΩÔºÅÔºÅÔºÅÂõ†‰∏∫ÈáçÁΩÆËÆ©Êèê‰∫§ÂéÜÂè≤‰πüÊîπÂèò‰∫Ü„ÄÇ 1$ git log ‰ΩøÁî®reflogÊåΩÊïëÈîôËØØÁöÑÈáçÁΩÆ Â¶ÇÊûúÊ≤°ÊúâËÆ∞‰∏ãÈáçÁΩÆÂâçmasterÂàÜÊîØÊåáÂêëÁöÑÊèê‰∫§IDÔºåÊÉ≥Ë¶ÅÈáçÁΩÆÂõûÂéüÊù•ÁöÑÊèê‰∫§ÁúüÁöÑÊòØ‰∏Ä‰ª∂È∫ªÁÉ¶ÁöÑ‰∫ãÊÉÖ(ÂéªÂØπË±°Â∫ì‰∏≠‰∏Ä‰∏™‰∏™Âú∞Êâæ)„ÄÇÂπ∏Â•ΩGitÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÊåΩÊïëÊú∫Âà∂Ôºå ÈÄöËøá.git/logsÁõÆÂΩï‰∏ãÊó•ÂøóÊñá‰ª∂ËÆ∞ÂΩï‰∫ÜÂàÜÊîØÁöÑÂèòÊõ¥„ÄÇÈªòËÆ§ÈùûË£∏ÁâàÊú¨Â∫ìÔºàÂ∏¶ÊúâÂ∑•‰ΩúÂå∫ÔºâÈÉΩÊèê‰æõÂàÜÊîØÊó•ÂøóÂäüËÉΩÔºåËøôÊòØÂõ†‰∏∫Â∏¶ÊúâÂ∑•‰ΩúÂå∫ÁöÑÂÖ´Êú¨Â∫ìÈÉΩÊúâÂ¶Ç‰∏ãËÆæÁΩÆÔºö 1$ git config core.logallrefupdates Êü•Áúã‰∏Ä‰∏ãmasterÂàÜÊîØÁöÑÊó•ÂøóÊñá‰ª∂.git/logs/refs/heads/master‰∏≠ÁöÑÂÜÖÂÆπ„ÄÇ‰∏ãÈù¢ÂëΩ‰ª§ÊòæÁ§∫‰∫ÜËØ•Êñá‰ª∂ÁöÑÊúÄÂêéÂá†Ë°å„ÄÇ 1$ tail -5 .git/logs/refs/heads/master ÂèØ‰ª•ÁúãÂá∫Ëøô‰∏™Êñá‰ª∂ËÆ∞ÂΩï‰∫ÜmasterÂàÜÊîØÊåáÂêëÁöÑÂèòËøÅÔºåÊúÄÊñ∞ÁöÑÊîπÂèòËøΩÂä†Âà∞Êñá‰ª∂ÁöÑÊú´Â∞æÂõ†Ê≠§ÊúÄÂêéÂá∫Áé∞„ÄÇÊúÄÂêé‰∏ÄË°åÂèØ‰ª•ÁúãÂá∫Âõ†ÊâßË°ågit reset --hardÂëΩ‰ª§Ôºå ÊåáÂêëÁöÑÊèê‰∫§IDÁî±a67c6fÊîπÂèò‰∏∫d3e0684„ÄÇ GitÊèê‰æõ‰∫Ü‰∏Ä‰∏™git reflogÂëΩ‰ª§ÔºåÂØπËøô‰∏™Êñá‰ª∂ËøõË°åÊìç‰Ωú„ÄÇ‰ΩøÁî®showÂ≠êÂëΩ‰ª§ÂèØ‰ª•ÊòæÁ§∫Ê≠§Êñá‰ª∂ÁöÑÂÜÖÂÆπ„ÄÇ 1$ git reflog show master | head -5 ‰ΩøÁî®git reflogÁöÑËæìÂá∫ÂíåÁõ¥Êé•Êü•ÁúãÊó•ÂøóÊñá‰ª∂ÊúÄÂ§ßÁöÑ‰∏çÂêåÂú®‰∫éÊòæÁ§∫È°∫Â∫è‰∏çÂêåÔºåÂç≥ÊúÄÊñ∞ÊîπÂèòÊîæÂú®‰∫ÜÊúÄÂâçÈù¢ÊòæÁ§∫ÔºåËÄå‰∏îÂè™ÊòæÁ§∫ÊØèÊ¨°ÊîπÂèòÁöÑÊúÄÁªàÁöÑSHA1ÂìàÂ∏åÂÄº„ÄÇ ËøòÊúâ‰∏™Âå∫Âà´Âú®‰∫é‰ΩøÁî®git reflogÁöÑËæìÂá∫‰∏≠ËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™Êñπ‰æøÊòìËÆ∞ÁöÑË°®ËææÂºèÔºö&lt;refname&gt;@{&lt;n&gt;}„ÄÇËøô‰∏™Ë°®ËææÂºèÁöÑÂê´‰πâÊòØÂºïÁî®&lt;refname&gt;‰πãÂâçÁ¨¨&lt;n&gt;Ê¨°ÊîπÂèòÊó∂ÁöÑSHA1ÂìàÂ∏åÂÄº„ÄÇ ÈÇ£‰πàÂ∞ÜÂºïÁî®masterÂàáÊç¢Âà∞‰∏§Ê¨°ÂèòÊõ¥‰πãÂâçÁöÑÂÄºÔºåÂèØ‰ª•‰ΩøÁî®Â¶Ç‰∏ãÂëΩ‰ª§Ôºö ÈáçÁΩÆmaster‰∏∫‰∏§Ê¨°ÊîπÂèò‰πãÂâçÁöÑÂÄº„ÄÇ 1$ git reset --hard master@&#123;2&#125; ÈáçÁΩÆÂêéÂ∑•‰ΩúÂå∫‰∏≠Êñá‰ª∂new-commit.txtÂèàÂõûÊù•‰∫Ü„ÄÇ 12$ lsnew-commit.txt welcome.txt Êèê‰∫§ÁöÑÂéÜÂè≤‰πüÂõûÊù•‰∫Ü„ÄÇ 1$ git log --oneline Ê≠§Êó∂Â¶ÇÊûúÂÜçÁî®git reflogÊü•ÁúãÔºå‰ºöÁúãÂà∞ÊÅ¢Â§çmasterÁöÑÊìç‰Ωú‰πüËÆ∞ÂΩïÂú®‰∫ÜÊó•Âøó‰∏≠„ÄÇ 1$ git reflog show master | head -5 Ê∑±ÂÖ•‰∫ÜËß£git resetÂëΩ‰ª§ ÈáçÁΩÆÂëΩ‰ª§git resetÊòØGitÊúÄÂ∏∏Áî®ÁöÑÂëΩ‰ª§‰πã‰∏ÄÔºå‰πüÊòØÊúÄÂç±Èô©ÔºåÊúÄÂÆπÊòìËØØÁî®ÁöÑÂëΩ‰ª§„ÄÇÁî®Ê≥ïÂ¶Ç‰∏ãÔºö 12Áî®Ê≥ï‰∏ÄÔºögit reset [-q] [&lt;commit&gt;] [--] &lt;paths&gt;‚Ä¶‚ÄãÁî®Ê≥ï‰∫åÔºögit reset [--soft | --mixed [-N] | --hard | --merge | --keep] [-q] [&lt;commit&gt;] ‰∏äÈù¢ÂàóÂá∫ÁöÑÁî®Ê≥ï‰∏≠Ôºå&lt;commit&gt;ÊòØÂèØÈÄâÈ°πÔºåÂèØ‰ª•‰ΩøÁî®ÂºïÁî®ÊàñËÄÖÊèê‰∫§IDÔºåÂ¶ÇÊûúÁúÅÁï•&lt;commit&gt;ÂàôÁõ∏ÂΩì‰∫é‰ΩøÁî®‰∫ÜHEADÁöÑÊåáÂêë‰Ωú‰∏∫Êèê‰∫§ID„ÄÇ ‰∏äÈù¢ÂàóÂá∫ÁöÑ‰∏§ÁßçÁî®Ê≥ïÁöÑÂå∫Âà´Âú®‰∫éÔºåÁ¨¨‰∏ÄÁßçÁî®Ê≥ïÂú®ÂëΩ‰ª§‰∏≠ÂåÖÂê´Ë∑ØÂæÑ&lt;paths&gt;„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçË∑ØÂæÑÂíåÂºïÁî®ÔºàÊàñËÄÖÊèê‰∫§IDÔºâÂêåÂêçËÄåÂÜ≤Á™ÅÔºåÂèØ‰ª•Âú®&lt;paths&gt;ÂâçÁî®‰∏§‰∏™ËøûÁª≠ÁöÑÁü≠Á∫ø‰Ωú‰∏∫ÂàÜÈöî„ÄÇ Á¨¨‰∏ÄÁßçÁî®Ê≥ï‰∏ç‰ºöÈáçÁΩÆÂºïÁî®ÔºåÊõ¥‰∏ç‰ºöÊîπÂèòÂ∑•‰ΩúÂå∫ÔºåËÄåÊòØÁî®ÊåáÂÆöÊèê‰∫§Áä∂ÊÄÅÔºà&lt;commit&gt;Ôºâ‰∏ãÁöÑÊñá‰ª∂Ôºà&lt;paths&gt;ÔºâÊõøÊç¢ÊéâÊöÇÂ≠òÂå∫ÁöÑÊñá‰ª∂„ÄÇ ‰æãÂ¶ÇÂëΩ‰ª§git reset HEAD &lt;paths&gt;Áõ∏ÂΩì‰∫éÂèñÊ∂à‰πãÂâçÊâßË°åÁöÑgit add &lt;paths&gt;ÂëΩ‰ª§Êó∂ÊîπÂèòÁöÑÊöÇÂ≠òÂå∫„ÄÇ Á¨¨‰∫åÁßçÁî®Ê≥ïÔºà‰∏ç‰ΩøÁî®Ë∑ØÂæÑ&lt;paths&gt;ÁöÑÁî®Ê≥ïÔºâÂàô‰ºöÈáçÁΩÆÂºïÁî®„ÄÇÊ†πÊçÆ‰∏çÂêåÁöÑÈÄâÈ°πÔºåÂèØ‰ª•ÂØπÊöÇÂ≠òÂå∫ÊàñËÄÖÂ∑•‰ΩúÂå∫ËøõË°åÈáçÁΩÆ„ÄÇ ÂèÇÁÖß‰∏ãÈù¢ÁöÑÁâàÊú¨Â∫ìÊ®°ÂûãÂõæÔºåÊù•Áúã‰∏ÄÁúã‰∏çÂêåÁöÑÂèÇÊï∞ÂØπÁ¨¨‰∫åÁßçÈáçÁΩÆËØ≠Ê≥ïÁöÑÂΩ±Âìç„ÄÇ ÂëΩ‰ª§Ê†ºÂºèÔºögit reset [--soft | --mixed | --hard] [&lt;commit&gt;] ‰ΩøÁî®ÂèÇÊï∞--hardÔºåÂ¶ÇÔºögit reset --hard &lt;commit&gt; ‰ºöÊâßË°å‰∏äÂõæ‰∏≠ÁöÑ1„ÄÅ2„ÄÅ3ÂÖ®ÈÉ®ÁöÑ‰∏â‰∏™Âä®‰Ωú„ÄÇÂç≥Ôºö ÊõøÊç¢ÂºïÁî®ÁöÑÊåáÂêë„ÄÇÂºïÁî®ÊåáÂêëÊñ∞ÁöÑÊèê‰∫§ID„ÄÇ ÊõøÊç¢ÊöÇÂ≠òÂå∫„ÄÇÊõøÊç¢ÂêéÔºåÊöÇÂ≠òÂå∫ÁöÑÂÜÖÂÆπÂíåÂºïÁî®ÊåáÂêëÁöÑÁõÆÂΩïÊ†ë‰∏ÄËá¥„ÄÇ ÊõøÊç¢Â∑•‰ΩúÂå∫„ÄÇÊõøÊç¢ÂêéÔºåÂ∑•‰ΩúÂå∫ÁöÑÂÜÖÂÆπÂèòÂæóÂíåÊöÇÂ≠òÂå∫‰∏ÄËá¥Ôºå‰πüÂíåHEADÊåáÂêëÁöÑÁõÆÂΩïÊ†ëÂÜÖÂÆπÁõ∏Âêå„ÄÇ ‰ΩøÁî®ÂèÇÊï∞--softÔºåÂ¶ÇÔºögit reset --soft &lt;commit&gt;Ôºå‰ºöÊâßË°å‰∏äÂõæ‰∏≠ÁöÑÊìç‰Ωú1.Âç≥Âè™Êõ¥ÊîπÂºïÁî®ÁöÑÊåáÂêëÔºå‰∏çÊîπÂèòÊöÇÂ≠òÂå∫ÂíåÂ∑•‰ΩúÂå∫„ÄÇ ‰ΩøÁî®ÂèÇÊï∞--mixedÊàñËÄÖ‰∏ç‰ΩøÁî®ÂèÇÊï∞ÔºàÁº∫ÁúÅ‰∏∫--mixedÔºâÔºåÂ¶ÇÔºögit reset &lt;commit&gt;Ôºå‰ºöÊâßË°å‰∏äÂõæ‰∏≠ÁöÑÊìç‰Ωú1ÂíåÊìç‰Ωú2„ÄÇÂç≥Êõ¥ÊîπÂºïÁî®ÁöÑÊåáÂêë‰ª•ÂèäÈáçÁΩÆÊöÇÂ≠òÂå∫Ôºå‰ΩÜ‰∏çÊîπÂèòÂ∑•‰ΩúÂå∫„ÄÇ ‰∏ãÈù¢ÈÄöËøá‰∏Ä‰∫õÁ§∫‰æãÔºåÁúã‰∏Ä‰∏ãÈáçÁΩÆÂëΩ‰ª§ÁöÑ‰∏çÂêåÁî®Ê≥ï„ÄÇ ÂëΩ‰ª§Ôºögit reset ‰ªÖÁî®HEADÊåáÂêëÁöÑÁõÆÂΩïÊ†ëÈáçÁΩÆÊöÇÂ≠òÂå∫ÔºåÂ∑•‰ΩúÂå∫‰∏çÂèóÂΩ±ÂìçÔºåÁõ∏ÂΩì‰∫éÂ∞Ü‰πãÂâçÁî®git addÂëΩ‰ª§Êõ¥Êñ∞Âà∞ÊöÇÂ≠òÂå∫ÁöÑÂÜÖÂÆπÊí§Âá∫ÊöÇÂ≠òÂå∫„ÄÇ ÂºïÁî®‰πüÊú™ÊîπÂèòÔºåÂõ†‰∏∫ÂºïÁî®ÈáçÁΩÆÂà∞HEADÁõ∏ÂΩì‰∫éÊ≤°ÊúâÈáçÁΩÆ„ÄÇ ÂëΩ‰ª§Ôºögit reset HEAD Âêå‰∏ä„ÄÇ ÂëΩ‰ª§Ôºögit reset -- filename„ÄÇ‰ªÖÂ∞ÜÊñá‰ª∂filenameÊí§Âá∫ÊöÇÂ≠òÂå∫ÔºåÊöÇÂ≠òÂå∫‰∏≠ÂÖ∂‰ªñÊñá‰ª∂‰∏çÊîπÂèò„ÄÇÁõ∏ÂΩì‰∫éÂØπÂëΩ‰ª§git add filenameÁöÑÂèçÂêëÊìç‰Ωú„ÄÇ ÂëΩ‰ª§Ôºögit reset HEAD filename„ÄÇÂêå‰∏ä„ÄÇ ÂëΩ‰ª§Ôºögit reset --soft HEAD^„ÄÇÂ∑•‰ΩúÂå∫ÂíåÊöÇÂ≠òÂå∫‰∏çÊîπÂèòÔºå‰ΩÜÊòØÂºïÁî®ÂêëÂâçÂõûÈÄÄ‰∏ÄÊ¨°„ÄÇÂΩìÂØπÊúÄÊñ∞Êèê‰∫§ÁöÑÊèê‰∫§ËØ¥ÊòéÊàñËÄÖÊèê‰∫§ÁöÑÊõ¥Êîπ‰∏çÊª°ÊÑèÊó∂ÔºåÊí§ÈîÄ‰∏ãÊúÄÊñ∞ÁöÑÊèê‰∫§‰ª•‰æøÈáçÊñ∞Êèê‰∫§„ÄÇ ‰πãÂâçÊõæÁªè‰ªãÁªçËøá‰∏Ä‰∏™‰øÆÊîπÊèê‰∫§ÂëΩ‰ª§Ôºögit commit --amendÔºåÁî®‰∫éÂØπÊúÄÊñ∞ÁöÑÊèê‰∫§ËøõË°åÈáçÊñ∞Êèê‰∫§‰ª•‰øÆË°•ÈîôËØØÁöÑÊèê‰∫§ËØ¥ÊòéÊàñËÄÖÈîôËØØÁöÑÊèê‰∫§Êñá‰ª∂„ÄÇ ‰øÆË°•ÂëΩ‰ª§ÂÆûÈôÖ‰∏äÁõ∏ÂΩì‰∫éÊâßË°å‰∫Ü‰∏ãÈù¢‰∏§Êù°ÂëΩ‰ª§„ÄÇÔºàÊñá‰ª∂.git/COMMIT_EDITMSG‰øùÂ≠ò‰∫Ü‰∏äÊ¨°ÁöÑÊèê‰∫§Êó•ÂøóÔºâ 12$ git reset --soft HEAD^$ git commit -e -F .git/COMMIT_EDITMSG ÂëΩ‰ª§Ôºögit reset HEAD^„ÄÇÂ∑•‰ΩúÂå∫‰∏çÊîπÂèòÔºå‰ΩÜÊòØÊöÇÂ≠òÂå∫‰ºöÂõûÈÄÄÂà∞‰∏ä‰∏ÄÊ¨°Êèê‰∫§‰πãÂâçÔºåÂºïÁî®‰πü‰ºöÂõûÈÄÄ‰∏ÄÊ¨°„ÄÇ ÂëΩ‰ª§Ôºögit reset --mixed HEAD^„ÄÇÂêå‰∏ä„ÄÇ ÂëΩ‰ª§Ôºögit reset --hard HEAD^„ÄÇÂΩªÂ∫ïÊí§ÈîÄÊúÄËøëÁöÑÊèê‰∫§„ÄÇÂºïÁî®‰ºöÂõûÈÄÄÂà∞Ââç‰∏ÄÊ¨°ÔºåËÄå‰∏îÂ∑•‰ΩúÂå∫ÂíåÊöÇÂ≠òÂå∫ÈÉΩ‰ºöÂõûÈÄÄÂà∞‰∏ä‰∏ÄÊ¨°Êèê‰∫§ÁöÑÁä∂ÊÄÅ„ÄÇËá™‰∏ä‰∏ÄÊ¨°‰ª•Êù•ÁöÑÊèê‰∫§ÂÖ®ÈÉ®‰∏¢Â§±„ÄÇ]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~ÂØπË±°]]></title>
    <url>%2Fposts%2F779ee1e1.html</url>
    <content type="text"><![CDATA[GitÂØπË±°Â∫ìÊé¢Áßò ÈÄöËøáÊü•ÁúãÊó•ÂøóÁöÑËØ¶Â∞ΩËæìÂá∫Ôºå‰ºöÁúãÂà∞ÈùûÂ∏∏Â§öÁöÑSHA1ÂìàÂ∏åÂÄº„ÄÇ 1$ git log -l --pretty=raw ‰∏Ä‰∏™Êèê‰∫§‰∏≠Â±ÖÁÑ∂ÂåÖÂê´‰∫Ü‰∏â‰∏™SHA1ÂìàÂ∏åÂÄºË°®Á§∫ÁöÑÂØπË±°ID„ÄÇ commit a67c6fdd0a0e809340944432a3bf7d78e7e10f31 ËøôÊòØÊú¨Ê¨°Êèê‰∫§ÁöÑÂîØ‰∏ÄÊ†áËØÜ„ÄÇ tree b79fd13fac802739388af44a81d72b6e1d68da89 ËøôÊòØÊú¨Ê¨°Êèê‰∫§ÊâÄÂØπÂ∫îÁöÑÁöÑÁõÆÂΩïÊ†ë„ÄÇ parent d3617dadd10c274e6e2b6caf47635d5771b9034c ËøôÊòØÊú¨Ê¨°Êèê‰∫§ÁöÑÁà∂Êèê‰∫§Ôºà‰∏ä‰∏ÄÊ¨°Êèê‰∫§Ôºâ„ÄÇ Á†îÁ©∂GitÂØπË±°IDÁöÑ‰∏Ä‰∏™ÈáçÈáèÁ∫ßÊ≠¶Âô®Ôºögit cat-fileÂëΩ‰ª§„ÄÇÁî®‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂèØ‰ª•Êü•ÁúãËøô‰∏â‰∏™IDÁöÑÁ±ªÂûã„ÄÇ 123456$ git cat-file -t a67c6fcommit$ git cat-file -t b79ftree$ git cat-file d3617commit Âú®ÂºïÁî®ÂØπË±°IDÁöÑÊó∂ÂÄôÔºåÊ≤°ÊúâÂøÖË¶ÅÊääÊï¥‰∏™40‰ΩçÁöÑIDÂÜôÂÖ®ÔºåÂè™ÈúÄË¶Å‰ªéÂ§¥ÂºÄÂßãÁöÑÂá†‰Ωç‰∏çÂÜ≤Á™ÅÂç≥ÂèØ„ÄÇ ‰∏ãÈù¢ÂÜç‰ΩøÁî®git cat-fileÂëΩ‰ª§Êü•Áúã‰∏Ä‰∏ãËøôÂá†‰∏™ÂØπË±°ÁöÑÂÜÖÂÆπ„ÄÇ commitÂØπË±°a67c6fdd0a0e809340944432a3bf7d78e7e10f31 1$ git cat-file -p a67c6f treeÂØπË±°b79fd13fac802739388af44a81d72b6e1d68da89 1$ git cat-file -p b79fd commitÂØπË±°d3617dadd10c274e6e2b6caf47635d5771b9034c 1$ git cat-file -p d3617 Âú®‰∏äÈù¢ÁõÆÂΩïÊ†ë(tree)ÂØπË±°‰∏≠ÁúãÂà∞‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÂûãÁöÑÂØπË±°ÔºöblobÂØπË±°„ÄÇËøô‰∏™ÂØπË±°‰øùÂ≠òÁùÄÊñá‰ª∂welcome.txtÁöÑÂÜÖÂÆπ„ÄÇ ËØ•ÂØπË±°ÁöÑÁ±ªÂûã‰∏∫blob„ÄÇ 12$ git cat-file -t d7230d74c5f8d61ff3c1adbfd3b035c09cb62c16blob ËØ•ÂØπË±°ÁöÑÂÜÖÂÆπÂ∞±ÊòØwelcome.txtÊñá‰ª∂ÁöÑÂÜÖÂÆπ„ÄÇ 123$ git cat-file -p d7230d74c5f8d61ff3c1adbfd3b035c09cb62c16Hello Git.ÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†„ÄÇ Ëøô‰∫õÂØπË±°‰øùÂ≠òÂú®Âì™ÈáåÔºüÂΩìÁÑ∂ÊòØGitÂ∫ì‰∏≠ÁöÑobjectsÁõÆÂΩï‰∏ãÔºàIDÁöÑÂâç‰∏§‰Ωç‰Ωú‰∏∫ÁõÆÂΩïÂêçÔºåÂêé38‰Ωç‰Ωú‰∏∫Êñá‰ª∂Âêç„ÄÇÔºâ Áî®‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂèØ‰ª•ÁúãÂà∞Ëøô‰∫õÂØπË±°Âú®ÂØπË±°Â∫ì‰∏≠ÁöÑÂÆûÈôÖ‰ΩçÁΩÆ„ÄÇ 1for id in a67c6f b79fd d3617 d7230d; do ls .git/objects/$&#123;id:0:2&#125;/$&#123;id:2&#125;*;done ÈÄöËøá‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂèØ‰ª•ÁúãÂà∞Êèê‰∫§ÂØπË±°‰πãÈó¥Áõ∏‰∫íÂÖ≥ËÅîÁöÑË∑üË∏™Ëøû„ÄÇ 1$ git log --pretty=raw --graph a67c ‰∏äÈù¢ÁöÑÂëΩ‰ª§ÈÄöËøá--graphÂèÇÊï∞ÂèØ‰ª•ÁúãÂà∞Êèê‰∫§ÈìæË∑ØÔºåÈÄöËøá--pretty=rawÂèÇÊï∞‰ª•‰æøÊòæÁ§∫ÊØè‰∏™Êèê‰∫§ÂØπË±°ÁöÑparentÂ±ûÊÄß„ÄÇ ÊúÄÂêé‰∏Ä‰∏™Êèê‰∫§Ê≤°ÊúâparentÂ±ûÊÄßÔºåÊâÄ‰ª•Ë∑üË∏™ËøûÂà∞Ê≠§ÁªàÁªìÔºåËøôÂÆûÈôÖ‰∏äÂ∞±ÊòØÊèê‰∫§ÁöÑËµ∑ÁÇπ„ÄÇ HEADÂíåMasterÊé¢Áßò Áé∞Âú®ÂÖàÁúã‰∏ãÂ∑•‰ΩúÂå∫ÁöÑÁä∂ÊÄÅ„ÄÇ 12$ git status -s -b## master ‰∏äÈù¢Âú®ÊòæÁ§∫Â∑•‰ΩúÂå∫Áä∂ÊÄÅÊó∂ÔºåÈô§‰∫Ü‰ΩøÁî®-sÂèÇÊï∞‰ª•ÊòæÁ§∫Á≤æÁÆÄËæìÂá∫Â§ñÔºåËøò‰ΩøÁî®‰∫Ü-bÂèÇÊï∞‰ª•‰æøËÉΩÂ§üÂêåÊó∂ÊòæÁ§∫Âá∫ÂΩìÂâçÂ∑•‰ΩúÂàÜÊîØÁöÑÂêçÁß∞„ÄÇ ‰ΩøÁî®git branch‰πüÂèØ‰ª•ÊòæÁ§∫ÂΩìÂâçÁöÑÂ∑•‰ΩúÂàÜÊîØ„ÄÇ 12$ git branch * master Âú®masterÂàÜÊîØÂêçÁß∞ÂâçÈù¢Âá∫Áé∞‰∏Ä‰∏™ÊòüÂè∑Ë°®ÊòéËøô‰∏™ÂàÜÊîØÊòØÂΩìÂâçÂ∑•‰ΩúÂàÜÊîØ„ÄÇ Áé∞Âú®ËøûÁª≠ÊâßË°å‰∏ãÈù¢‰∏â‰∏™ÂëΩ‰ª§‰ºöÁúãÂà∞Áõ∏ÂêåÁöÑËæìÂá∫Ôºö 12345$ git log -1 HEAD $ git log -1 master $ git log -1 refs/heads/master ‰πüÂ∞±ÊòØËØ¥Âú®ÂΩìÂâçÁâàÊú¨Â∫ì‰∏≠ÔºåHEAD„ÄÅmasterÂíårefs/heads/masterÂÖ∑ÊúâÁõ∏ÂêåÁöÑÊåáÂêë„ÄÇËÆ©Êàë‰ª¨ÂéªÁâàÊú¨Â∫ì.gitÁõÆÂΩï‰∏≠Áúã‰∏ÄÁúã„ÄÇ 12345$ find .git -name HEAD -o -name master.git/HEAD.git/logs/HEAD.git/logs/refs/heads/master.git/refs/heads/master ÊòæÁ§∫‰∏Ä‰∏ã.git/HEADÁöÑÂÜÖÂÆπÔºö 12$ cat .git/HEADref: refs/heads/master ÊääHEADÁöÑÂÜÖÂÆπÁøªËØëËøáÊù•Â∞±ÊòØÔºö‚ÄúÊåáÂêë‰∏Ä‰∏™ÂºïÁî®Ôºörefs/heads/master‚Äù„ÄÇËøô‰∏™ÂºïÁî®Âú®Êñá‰ª∂.git/refs/heads/master„ÄÇ 12$ cat .git/refs/heads/mastera67c6fdd0a0e809340944432a3bf7d78e7e10f31 Áî®git cat-fileÂëΩ‰ª§Êü•Áúã‰∏ãa67c6fdd0a0e809340944432a3bf7d78e7e10f31ÁöÑÂÜÖÂÆπ„ÄÇ ÊòæÁ§∫SHA1ÂìàÂ∏åÂÄºÊåá‰ª£ÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇ 12$ git cat-file -t a67c6commit ÊòæÁ§∫Êèê‰∫§ÁöÑÂÜÖÂÆπ„ÄÇ 1234567$ git cat-file -p a67c6tree b79fd13fac802739388af44a81d72b6e1d68da89parent d3617dadd10c274e6e2b6caf47635d5771b9034cauthor wanghongbo &lt;270028806@qq.com&gt; 1560174530 +0800committer wanghongbo &lt;270028806@qq.com&gt; 1560174530 +0800Âì™‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆ‰ºöË¢´Êèê‰∫§Ôºü ÂéüÊù•ÂàÜÊîØmasterÊåáÂêëÁöÑÊòØ‰∏Ä‰∏™Êèê‰∫§IDÔºàÊúÄÊñ∞Êèê‰∫§Ôºâ„ÄÇËøôÊ†∑ÁöÑÂàÜÊîØÂÆûÁé∞ÂæàÂ∑ßÂ¶ôÔºöÊó¢ÁÑ∂ÂèØ‰ª•‰ªé‰ªª‰ΩïÊèê‰∫§ÂºÄÂßãÂª∫Á´ã‰∏ÄÊù°ÂéÜÂè≤Ë∑üË∏™ËøûÔºå ÈÇ£‰πàÁî®‰∏Ä‰∏™Êñá‰ª∂ÊåáÂêëËøô‰∏™ÈìæÊù°ÁöÑÊúÄÊñ∞Êèê‰∫§ÔºåÈÇ£‰πàËøô‰∏™Êñá‰ª∂Â∞±ÂèØ‰ª•Áî®‰∫éËøΩË∏™Êï¥‰∏™Êèê‰∫§ÂéÜÂè≤‰∫Ü„ÄÇËøô‰∏™Êñá‰ª∂Â∞±ÊòØ.git/refs/heads/masterÊñá‰ª∂„ÄÇ ‰∏ãÈù¢Áúã‰∏Ä‰∏™Êõ¥Êé•Ëøë‰∫éÁúüÂÆûÁöÑÁâàÊú¨Â∫ìÁªìÊûÑÂõæÔºö ÁõÆÂΩï.git/refsÊòØ‰øùÂ≠òÂºïÁî®ÁöÑÂëΩÂêçÁ©∫Èó¥ÔºåÂÖ∂‰∏≠.git/refs/headsÁõÆÂΩï‰∏ãÁöÑÂºïÁî®ÂèàÁß∞‰∏∫ÂàÜÊîØ„ÄÇÂØπ‰∫éÂàÜÊîØÊó¢ÂèØ‰ª•‰ΩøÁî®Ê≠£ËßÑÁöÑÈïøÊ†ºÂºèË°®Á§∫Ê≥ïÔºåÂ¶Çrefs/heads/masterÔºå ‰πüÂèØ‰ª•ÂéªÊéâÂâçÈù¢ÁöÑ‰∏§Á∫ßÁõÆÂΩïÁî®masterË°®Á§∫„ÄÇGitÊúâ‰∏Ä‰∏™Â∫ïÂ±ÇÂëΩ‰ª§git rev-parseÂèØ‰ª•Áî®‰∫éÊòæÁ§∫ÂºïÁî®ÂØπÂ∫îÁöÑÊèê‰∫§ID„ÄÇ 12345678$ git rev-parse mastera67c6fdd0a0e809340944432a3bf7d78e7e10f31$ git rev-parse refs/heads/master a67c6fdd0a0e809340944432a3bf7d78e7e10f31$ git rev-parse HEAD a67c6fdd0a0e809340944432a3bf7d78e7e10f31 ÂèØ‰ª•ÁúãÂá∫ÂÆÉ‰ª¨ÈÉΩÊåáÂêëÂêå‰∏Ä‰∏™ÂØπË±°„ÄÇ‰∏ãÈù¢Êù•Â±ïÁ§∫‰∏Ä‰∏ãÊèê‰∫§ÁöÑSHA1ÂìàÂ∏åÂÄºÁîüÊàêÊñπÊ≥ï„ÄÇ ÁúãÁúãHEADÂØπÂ∫îÁöÑÊèê‰∫§ÁöÑÂÜÖÂÆπ„ÄÇ‰ΩøÁî®git cat-fileÂëΩ‰ª§„ÄÇ 1234567$ git cat-file commit HEADtree b79fd13fac802739388af44a81d72b6e1d68da89parent d3617dadd10c274e6e2b6caf47635d5771b9034cauthor wanghongbo &lt;270028806@qq.com&gt; 1560174530 +0800committer wanghongbo &lt;270028806@qq.com&gt; 1560174530 +0800Âì™‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆ‰ºöË¢´Êèê‰∫§Ôºü Êèê‰∫§‰ø°ÊÅØ‰∏≠ÊÄªÂÖ±ÂåÖÂê´243‰∏™Â≠óÁ¨¶„ÄÇ 1$ git cat-file commit HEAD | wc -c Âú®Êèê‰∫§‰ø°ÊÅØÁöÑÂâçÈù¢Âä†‰∏äÂÜÖÂÆπcommit 243&lt;null&gt;(&lt;null&gt;‰∏∫Á©∫Â≠óÁ¨¶)ÔºåÁÑ∂ÂêéÊâßË°åSHA1ÂìàÂ∏åÁÆóÊ≥ï„ÄÇ 12$ (printf &quot;commit 243\000&quot;; git cat-file commit HEAD) | sha1suma67c6fdd0a0e809340944432a3bf7d78e7e10f31 *- ‰∏äÈù¢ÂëΩ‰ª§ÂæóÂà∞ÁöÑÂìàÂ∏åÂÄºÂíåÁî®git rev-parseÁúãÂà∞ÁöÑÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ 1$ git rev-parse HEAD ‰∏ãÈù¢Áúã‰∏ÄÁúãÊñá‰ª∂ÂÜÖÂÆπÁöÑSHA1ÂìàÂ∏åÂÄºÁîüÊàêÊñπÊ≥ï„ÄÇ ÁúãÁúãÁâàÊú¨Â∫ì‰∏≠welcome.txtÁöÑÂÜÖÂÆπÔºå‰ΩøÁî®git cat-fileÂëΩ‰ª§„ÄÇ 123$ git cat-file blob HEAD:welcome.txtHello Git.ÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†„ÄÇ Êñá‰ª∂ÊÄªÂÖ±ÂåÖÂê´33Â≠óËäÇÁöÑÂÜÖÂÆπ„ÄÇ 12$ git cat-file blob HEAD:welcome.txt | wc -c 33 Âú®Êñá‰ª∂ÂÜÖÂÆπÁöÑÂâçÈù¢Âä†‰∏äblob 33&lt;null&gt;ÁöÑÂÜÖÂÆπÔºåÁÑ∂ÂêéÊâßË°åSHA1ÂìàÂ∏åÁÆóÊ≥ï„ÄÇ 12$ (printf &quot;blob 33\000&quot;; git cat-file blob HEAD:welcome.txt) | sha1sumd7230d74c5f8d61ff3c1adbfd3b035c09cb62c16 *- ‰∏äÈù¢ÂëΩ‰ª§ÂæóÂà∞ÁöÑÂìàÂ∏åÂÄºÂíåÁî®git rev-parseÁúãÂà∞ÁöÑÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ 12$ git rev-parse HEAD:welcome.txtd7230d74c5f8d61ff3c1adbfd3b035c09cb62c16 ÊúÄÂêéÂÜçÊù•ÁúãÁúãÊ†ëÁöÑSHA1ÂìàÂ∏åÂÄºÁöÑÂΩ¢ÊàêÊñπÊ≥ï„ÄÇ HEADÂØπÂ∫îÁöÑÊ†ëÁöÑÂÜÖÂÆπÂÖ±ÂåÖÂê´39‰∏™Â≠óËäÇ„ÄÇ 12$ git cat-file tree HEAD^&#123;tree&#125; | wc -c39 Âú®Ê†ëÁöÑÂÜÖÂÆπÁöÑÂâçÈù¢Âä†‰∏ätree 39&lt;null&gt;ÁöÑÂÜÖÂÆπÔºåÁÑ∂ÂêéÊâßË°åSHA1ÂìàÂ∏åÁÆóÊ≥ï„ÄÇ 12$ (printf &quot;tree 39\000&quot;; git cat-file tree HEAD^&#123;tree&#125;) | sha1sumb79fd13fac802739388af44a81d72b6e1d68da89 *- ‰∏äÈù¢ÂëΩ‰ª§ÂæóÂà∞ÁöÑÂìàÂ∏åÂÄºÂíåÁî®git rev-parseÁúãÂà∞ÁöÑÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ 12$ git rev-parse HEAD^&#123;tree&#125;b79fd13fac802739388af44a81d72b6e1d68da89 GitÊèê‰æõ‰∫ÜÂæàÂ§öÊñπÊ≥ïÂèØ‰ª•Êñπ‰æøÁöÑËÆøÈóÆGitÂ∫ì‰∏≠ÁöÑÂØπË±°„ÄÇ ÈááÁî®ÈÉ®ÂàÜSHA1ÂìàÂ∏åÂÄº„ÄÇ‰∏çÂøÖÂÜôÂÖ®40‰ΩçÁöÑÂìàÂ∏åÂÄºÔºåÂè™ÈááÁî®ÂºÄÂ§¥ÁöÑÈÉ®ÂàÜÔºå‰∏çÂíåÁé∞ÊúâÂÖ∂‰ªñÁöÑÂÜ≤Á™ÅÂç≥ÂèØ„ÄÇ ‰ΩøÁî®master‰ª£Ë°®ÂàÜÊîØmaster‰∏≠ÊúÄÊñ∞ÁöÑÊèê‰∫§Ôºå‰ΩøÁî®ÂÖ®Áß∞refs/heads/master‰∫¶ÂèØ„ÄÇ ‰ΩøÁî®HEAD‰ª£Ë°®ÁâàÊú¨Â∫ì‰∏≠ÊúÄËøëÁöÑ‰∏ÄÊ¨°Êèê‰∫§„ÄÇ Á¨¶Âè∑^ÂèØ‰ª•Áî®‰∫éÊåá‰ª£Áà∂Êèê‰∫§„ÄÇ‰æãÂ¶ÇÔºö HEAD^‰ª£Ë°®ÁâàÊú¨Â∫ì‰∏≠‰∏ä‰∏ÄÊ¨°Êèê‰∫§ÔºåÂç≥ÊúÄËøë‰∏ÄÊ¨°Êèê‰∫§ÁöÑÁà∂Êèê‰∫§„ÄÇ HEAD^^Âàô‰ª£Ë°®HEAD^ÁöÑÁà∂Êèê‰∫§„ÄÇ ÂØπ‰∫é‰∏Ä‰∏™Êèê‰∫§ÊúâÂ§ö‰∏™Áà∂Êèê‰∫§ÔºåÂèØ‰ª•Âú®Á¨¶Âè∑^ÂêéÈù¢Áî®Êï∞Â≠óË°®Á§∫ÊòØÁ¨¨Âá†‰∏™Áà∂Êèê‰∫§„ÄÇ‰æãÂ¶ÇÔºö a5731^2Âê´‰πâÊòØÊèê‰∫§a5731ÁöÑÂ§ö‰∏™Áà∂Êèê‰∫§‰∏≠ÁöÑÁ¨¨‰∫å‰∏™Áà∂Êèê‰∫§„ÄÇ HEAD^1Áõ∏ÂΩì‰∫éHEAD^Âê´‰πâÊòØHEADÂ§ö‰∏™Áà∂Êèê‰∫§‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™„ÄÇ HEAD^^2Âê´‰πâÊòØHEAD^(HEADÁà∂Êèê‰∫§)ÁöÑÂ§ö‰∏™Áà∂Êèê‰∫§‰∏≠ÁöÑÁ¨¨‰∫å‰∏™„ÄÇ Á¨¶Âè∑~&lt;n&gt;‰πüÂèØ‰ª•Áî®‰∫éÊåá‰ª£Á•ñÂÖàÊèê‰∫§„ÄÇ‰∏ãÈù¢‰∏§‰∏™Ë°®ËææÂºèÊïàÊûúÁ≠âÂêåÔºö 12a5731~5a5731^^^^^ Êèê‰∫§ÊâÄÂØπÂ∫îÁöÑÊ†ëÂØπË±°ÔºåÂèØ‰ª•Áî®Á±ª‰ººÂ¶Ç‰∏ãÁöÑËØ≠Ê≥ïËÆøÈóÆ„ÄÇ 1a5731^&#123;tree&#125; Êüê‰∏ÄÊ≠§Êèê‰∫§ÂØπÂ∫îÁöÑÊñá‰ª∂ÂØπË±°ÔºåÂèØ‰ª•Áî®Â¶Ç‰∏ãÁöÑËØ≠Ê≥ïËÆøÈóÆ„ÄÇ 1a5731:path/to/file ÊöÇÂ≠òÂå∫‰∏≠ÁöÑÊñá‰ª∂ÂØπË±°ÔºåÂèØ‰ª•Áî®Â¶Ç‰∏ãËØ≠Ê≥ïËÆøÈóÆ„ÄÇ 1:path/to/file ‰∏ãÈù¢‰ΩøÁî®git rev-parseÁªÉ‰π†‰∏ã„ÄÇ 12345678910111213141516$ git rev-parse HEAD a67c6fdd0a0e809340944432a3bf7d78e7e10f31$ git cat-file -p a67c6f tree b79fd13fac802739388af44a81d72b6e1d68da89parent d3617dadd10c274e6e2b6caf47635d5771b9034cauthor wanghongbo &lt;270028806@qq.com&gt; 1560174530 +0800committer wanghongbo &lt;270028806@qq.com&gt; 1560174530 +0800Âì™‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆ‰ºöË¢´Êèê‰∫§Ôºü$ git rev-parse a67c6f^&#123;tree&#125;b79fd13fac802739388af44a81d72b6e1d68da89$ git rev-parse a67c6f^^&#123;tree&#125;a070b35c2d55e057a2eead7b8ae1b06c3e4d8e3b]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~Â∑•‰ΩúÂå∫„ÄÅÊöÇÂ≠òÂå∫„ÄÅHEAD]]></title>
    <url>%2Fposts%2F2c9fc045.html</url>
    <content type="text"><![CDATA[È¶ñÂÖàÁúã‰∏Ä‰∏ãgit-demoÁöÑÊèê‰∫§Êó•ÂøóÔºå‰ΩøÁî®git logÊü•ÁúãÊèê‰∫§Êó•ÂøóÔºàÈôÑÂä†--statÂèÇÊï∞ÂèØ‰ª•ÁúãÂà∞ÊØèÊ¨°Êèê‰∫§ÁöÑÊñá‰ª∂ÂèòÊõ¥ÁªüËÆ°Ôºâ„ÄÇ 1$ git log --stat ÈÄöËøáÊó•ÂøóÂèØ‰ª•ÁúãÂà∞Á¨¨‰∏ÄÊ¨°Êèê‰∫§ÂØπÊñá‰ª∂welcome.txtÊúâ‰∏ÄË°åÁöÑÂèòÊõ¥ÔºåËÄåÁ¨¨‰∫åÊ¨°Êèê‰∫§Âõ†‰∏∫‰ΩøÁî®‰∫Ü--allow-emptyÂèÇÊï∞ËøõË°åÁöÑÁ©∫Êèê‰∫§ÔºåÊâÄ‰ª•Êèê‰∫§ËØ¥Êòé‰∏≠Áúã‰∏çÂà∞‰ªª‰ΩïÂØπÂÆûË¥®ÂÜÖÂÆπÁöÑ‰øÆÊîπ„ÄÇ ‰øÆÊîπ‰∏çËÉΩÁõ¥Êé•Êèê‰∫§Ôºü È¶ñÂÖàÊõ¥Êîπwelcome.txtÊñá‰ª∂ÁöÑÂÜÖÂÆπÔºåÂú®Êñá‰ª∂ÂêéÈù¢ËøΩÂä†‰∏ÄË°å„ÄÇ 1$ echo &quot;ÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†„ÄÇ&quot; &gt;&gt; welcome.txt ËøôÊó∂Â∞±ÂèØ‰ª•ÈÄöËøágit diffÂëΩ‰ª§ÁúãÂà∞‰øÆÊîπÂêéÁöÑÊñá‰ª∂ÂíåÁâàÊú¨Â∫ì‰∏≠Êñá‰ª∂ÁöÑÂ∑ÆÂºÇ„ÄÇÂÆûË¥®ÂíåÊú¨Âú∞ÊØîËæÉÁöÑ‰∏çÊòØÁâàÊú¨Â∫ìÔºåËÄåÊòØ‰∏Ä‰∏™‰∏≠Èó¥Áä∂ÊÄÅÁöÑÊñá‰ª∂„ÄÇ 1$ git diff Êé•‰∏ãÊù•ÊâßË°åÊèê‰∫§ÔºåÁúãËÉΩÂê¶Êèê‰∫§ÊàêÂäü„ÄÇ 1$ git commit -m &quot;ËøΩÂä†‰∏ÄË°åÔºöÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†„ÄÇ&quot; Êèê‰∫§ÊàêÂäü‰∫ÜÂêóÔºüÂ•ΩÂÉèÊ≤°Êúâ„ÄÇ Êèê‰∫§Ê≤°ÊúâÊàêÂäüÁöÑËØÅÊçÆÔºö ÂÖàÁúãÁúãÊèê‰∫§Êó•ÂøóÔºåÂ¶ÇÊûúÊèê‰∫§ÊàêÂäüÂ∞±‰ºöÊúâÊñ∞ÁöÑÊèê‰∫§ËÆ∞ÂΩï„ÄÇ 1$ git log --pretty=oneline ‰ΩøÁî®‰∫ÜÁ≤æÁÆÄËæìÂá∫Êù•ÊòæÁ§∫Êó•ÂøóÔºå‰ª•‰æøÊõ¥ÁÆÄÊ¥ÅÂíåÊ∏ÖÊô∞Âú∞ÁúãÂà∞Êèê‰∫§ÂéÜÂè≤„ÄÇÂèØ‰ª•ÁúãÂà∞ÁâàÊú¨Â∫ì‰∏≠Âè™Êúâ‰∏§‰∏™Êèê‰∫§ÔºåÈíàÂØπÂàöÊâç‰øÆÊîπÊñá‰ª∂ÁöÑÊèê‰∫§Ê≤°ÊúâÊàêÂäüÔºÅ ÊâßË°ågit diffÂèØ‰ª•ÁúãÂà∞Âíå‰πãÂâçÁõ∏ÂêåÁöÑÂ∑ÆÂºÇËæìÂá∫ÔºåËøô‰πüËØ¥ÊòéÊèê‰∫§Ê≤°ÊúâÊàêÂäü„ÄÇ ÊâßË°ågit statusÊü•ÁúãÊñá‰ª∂Áä∂ÊÄÅÔºåÂèØ‰ª•ÁúãÂà∞Êñá‰ª∂Â§Ñ‰∫éÊú™Êèê‰∫§Áä∂ÊÄÅ„ÄÇ ÊâßË°ågit status -sÂèØ‰ª•ÊòæÁ§∫Á≤æÁÆÄÊ†ºÂºèÁöÑÁä∂ÊÄÅËæìÂá∫„ÄÇ Êèê‰∫§‰∏∫‰ªÄ‰πà‰ºöÂ§±Ë¥•Âë¢ÔºüÂéüÂõ†ÊòØÊ≤°ÊúâÂØπ‰øÆÊîπÁöÑwelcome.txtÊñá‰ª∂ÊâßË°ågit addÂëΩ‰ª§ÔºåÂ∞Ü‰øÆÊîπÁöÑÊñá‰ª∂Ê∑ªÂä†Âà∞‚ÄúÊèê‰∫§‰ªªÂä°‚ÄùÔºåÁÑ∂ÂêéÊâçËÉΩÊèê‰∫§„ÄÇ Áé∞Âú®Â∞±Â∞Ü‰øÆÊîπÁöÑÊñá‰ª∂‚ÄúÊ∑ªÂä†‚ÄùÂà∞Êèê‰∫§‰ªªÂä°„ÄÇ 1$ git add welcome.txt Áé∞Âú®ÂÜçÊâßË°å‰∏Ä‰∫õGitÂëΩ‰ª§ÔºåÁúãÁúãÂΩìÊâßË°å‚ÄúÊ∑ªÂä†‚ÄùÂêé‰ºöÂèëÁîü‰ªÄ‰πàÂèòÂåñ„ÄÇ ÊâßË°ågit diffÊ≤°ÊúâËæìÂá∫„ÄÇ ÊâßË°ågit diff headÊàñgit diff masterËøõË°åÊØîËæÉ‰ºöÂèëÁé∞ÊúâÂ∑ÆÂºÇÔºåËøô‰∏™Â∑ÆÂºÇÊòØÊ≠£Â∏∏ÁöÑÔºåÂõ†‰∏∫ËøòÊ≤°ÊúâÊèê‰∫§„ÄÇ 1$ git diff head ÊâßË°ågit statusÔºåÁä∂ÊÄÅËæìÂá∫Âíå‰πãÂâç‰∏ç‰∏ÄÊ†∑‰∫Ü„ÄÇ 1$ git status ÂØπÊñ∞ÁöÑGitÁä∂ÊÄÅËæìÂá∫ÂÅö‰∏ãÁøªËØëÔºö 12345‰Ωç‰∫éÂàÜÊîØmaster‰∏ä‰∏ãÂàóÁöÑ‰øÆÊîπÂ∞ÜË¢´Êèê‰∫§Ôºö ÔºàÂ¶ÇÊûú‰Ω†ÂêéÊÇî‰∫ÜÔºåÂèØ‰ª•‰ΩøÁî®‚Äúgit reset HEAD &lt;file&gt;...‚ÄùÂëΩ‰ª§Â∞Ü‰∏ãÂàóÊîπÂä®Êí§Âá∫Êèê‰∫§‰ªªÂä°ÔºàÊèê‰∫§ÊöÇÂ≠òÂå∫ÔºåstageÔºâÔºå Âê¶ÂàôÊâßË°åÊèê‰∫§ÂëΩ‰ª§Â∞Ü‰ºöÊèê‰∫§Ôºâ Â∑≤‰øÆÊîπÔºö welcome.txt ‰∏çÂæó‰∏çËØ¥ÔºåGitÂ§™‰∫∫ÊÄßÂåñ‰∫ÜÔºåÂÆÉÊääÂêÑÁßçÊÉÖÂÜµ‰∏ãÂèØ‰ª•‰ΩøÁî®Âà∞ÁöÑÂëΩ‰ª§ÈÉΩÂëäËØâ‰∫ÜÁî®Êà∑ÔºåËôΩÁÑ∂ËøôÊòæÂæóÊúâÁÇπÂï∞Âó¶„ÄÇ Â¶ÇÊûú‰∏çË¶ÅËøô‰πàÂï∞Âó¶ÔºåÂèØ‰ª•‰ΩøÁî®ÁÆÄÊ¥ÅÊñπÂºèÔºö 12$ git status -sM welcome.txt ‰∏äÈù¢Á≤æÁÆÄÁä∂ÊÄÅËæìÂá∫‰∏éÊâßË°ågit add‰πãÂâçÁöÑÁ≤æÁÆÄÁä∂ÊÄÅÁöÑËæìÂá∫Áõ∏ÊØîÔºåÊúâÁªÜÂæÆÁöÑÂ∑ÆÂà´„ÄÇ ËôΩÁÑ∂ÈÉΩÊòØM(Modified)Ê†áËØÜÔºå‰ΩÜÊòØ‰ΩçÁΩÆ‰∏çÂêå„ÄÇÂú®ÊâßË°ågit add‰πãÂâçÔºåËøô‰∏™M‰Ωç‰∫éÁ¨¨‰∫åÂàóÔºàÁ¨¨‰∏ÄÂàóÊòØ‰∏™Á©∫Ê†ºÔºâÔºåÊâßË°åÂÆågit add‰πãÂêéÔºåÂ≠óÁ¨¶M‰Ωç‰∫éÁ¨¨‰∏ÄÂàóÔºàÁ¨¨‰∫åÂàóÊòØÁ©∫ÁôΩÔºâ„ÄÇ ‰Ωç‰∫éÁ¨¨‰∏ÄÂàóÁöÑÂ≠óÁ¨¶MÁöÑÂê´‰πâÔºöÁâàÊú¨Â∫ì‰∏≠ÁöÑÊñá‰ª∂ÂíåÂ§Ñ‰∫é‰∏≠Èó¥Áä∂ÊÄÅ--Êèê‰∫§‰ªªÂä°ÔºàÊèê‰∫§ÊöÇÂ≠òÂå∫ÔºåstageÔºâ‰∏≠ÁöÑÊñá‰ª∂Áõ∏ÊØîÊúâÊîπÂä®Ôºõ ‰Ωç‰∫éÁ¨¨‰∫åÂàóÁöÑÂ≠óÁ¨¶MÁöÑÂê´‰πâÔºöÂ∑•‰ΩúÂå∫ÂΩìÂâçÁöÑÊñá‰ª∂ÂíåÂ§Ñ‰∫é‰∏≠Èó¥Áä∂ÊÄÅ--Êèê‰∫§‰ªªÂä°ÔºàÊèê‰∫§ÊöÇÂ≠òÂå∫ÔºåstageÔºâ‰∏≠ÁöÑÊñá‰ª∂Áõ∏ÊØîÊúâÊîπÂä®„ÄÇ ËøôÊó∂Â¶ÇÊûúÁõ¥Êé•Êèê‰∫§git commit,Âä†ÂÖ•Êèê‰∫§‰ªªÂä°ÁöÑwelcome.txtÊñá‰ª∂ÁöÑÊõ¥ÊîπÂ∞±Ë¢´Êèê‰∫§ÂÖ•Â∫ì‰∫Ü„ÄÇ‰ΩÜÊòØÂÖà‰∏çÂøôÁùÄÊèê‰∫§ÔºåÂÜçËøõË°å‰∏Ä‰∫õÊìç‰ΩúÔºåÁúãÁúãËÉΩÂê¶Ë¢´ÂΩªÂ∫ïÊêûÁ≥äÊ∂Ç„ÄÇ ÁªßÁª≠‰øÆÊîπwelcome.txtÊñá‰ª∂ÔºàÂú®Êñá‰ª∂ÂêéÈù¢ËøΩÂä†‰∏ÄË°åÔºâ„ÄÇ 1$ echo &quot;Good-bye&quot; &gt;&gt; welcome.txt ÁÑ∂ÂêéÊâßË°ågit statusÊü•Áúã‰∏Ä‰∏ãÁä∂ÊÄÅÔºö 1git status Áä∂ÊÄÅËæìÂá∫‰∏≠Â±ÖÁÑ∂ÊòØ‰πãÂâçÂá∫Áé∞ÁöÑ‰∏§Áßç‰∏çÂêåÁä∂ÊÄÅÁöÑËæìÂá∫„ÄÇ ‰ΩøÁî®ÁÆÄÊ¥ÅÊ®°ÂºèËæìÂá∫Ôºå‰πü‰ºöÁúãÂà∞‰∏§ÁßçÁ≤æÁÆÄËæìÂá∫ÁöÑÊùÇÂêà„ÄÇ 1git status -s ‰∏äÈù¢GitÁä∂ÊÄÅÁöÑËæìÂá∫ÂèØ‰ª•Ëøô‰πàÁêÜËß£Ôºö‰∏ç‰ΩÜÁâàÊú¨Â∫ì‰∏≠ÊúÄÊñ∞Êèê‰∫§ÁöÑÊñá‰ª∂ÂíåÂ§Ñ‰∫é‰∏≠Èó¥Áä∂ÊÄÅÔºàÊèê‰∫§ÊöÇÂ≠òÂå∫ÔºåstageÔºâ‰∏≠Êñá‰ª∂ Áõ∏ÊØîÊúâÊîπÂä®ÔºåËÄå‰∏îÂ∑•‰ΩúÂå∫ÂΩìÂâçÁöÑÊñá‰ª∂ÂíåÂ§Ñ‰∫é‰∏≠Èó¥Áä∂ÊÄÅÔºàÊèê‰∫§ÊöÇÂ≠òÂå∫ÔºåstageÔºâ‰∏≠ÁöÑÊñá‰ª∂Áõ∏ÊØî‰πüÊúâÊîπÂä®„ÄÇ Âç≥Áé∞Âú®welcome.txt‰∏≠Êúâ‰∏â‰∏™‰∏çÂêåÁöÑÁâàÊú¨Ôºö‰∏Ä‰∏™Âú®Â∑•‰ΩúÂå∫Ôºå‰∏Ä‰∏™Âú®ÊöÇÂ≠òÂå∫Ôºå‰∏Ä‰∏™ÊòØÁâàÊú¨Â∫ì‰∏≠ÊúÄÊñ∞ÁâàÊú¨„ÄÇÈÄöËøá ‰∏çÂêåÁöÑÂèÇÊï∞Ë∞ÉÁî®git diffÂëΩ‰ª§ÂèØ‰ª•ÁúãÂà∞‰∏çÂêåÁâàÊú¨Â∫ì‰πãÈó¥ÁöÑÂ∑ÆÂºÇ„ÄÇ ‰∏çÂ∏¶‰ªª‰ΩïÈÄâÈ°πÂíåÂèÇÊï∞Ë∞ÉÁî®git diffÊòæÁ§∫Â∑•‰ΩúÂå∫ÊúÄÊñ∞ÊîπÂä®ÔºåÂç≥Â∑•‰ΩúÂå∫ÂíåÊèê‰∫§ÊöÇÂ≠òÂå∫‰∏≠Áõ∏ÊØîÁöÑÂ∑ÆÂºÇ„ÄÇ Â∞ÜÂ∑•‰ΩúÂå∫ÂíåHEADÔºàÂΩìÂâçÂ∑•‰ΩúÂàÜÊîØÔºâÁõ∏ÊØîÔºå‰ºöÁúãÂà∞Êõ¥Â§öÂ∑ÆÂºÇ„ÄÇ ÈÄöËøáÂèÇÊï∞--cachedÊàñËÄÖ--stagedÂèÇÊï∞Ë∞ÉÁî®git diffÂëΩ‰ª§ÔºåÁúãÂà∞ÁöÑÊòØÊèê‰∫§ÊöÇÂ≠òÂå∫ÂíåÁâàÊú¨Â∫ì‰∏≠Êñá‰ª∂ÁöÑÂ∑ÆÂºÇ„ÄÇ Â•Ω‰∫ÜÔºåÁé∞Âú®Êèê‰∫§‰∏ãÁúãÁúã„ÄÇ 123$ git commit -m &quot;Âì™‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆ‰ºöË¢´Êèê‰∫§Ôºü&quot;[master a67c6fd] Âì™‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆ‰ºöË¢´Êèê‰∫§Ôºü 1 file changed, 1 insertion(+) ËøôÊ¨°Êèê‰∫§Áªà‰∫éÊàêÂäü‰∫ÜÔºåÊü•Áúã‰∏ãÊó•ÂøóÔºö 1234$ git log --pretty=onelinea67c6fdd0a0e809340944432a3bf7d78e7e10f31 (HEAD -&gt; master) Âì™‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆ‰ºöË¢´Êèê‰∫§Ôºüd3617dadd10c274e6e2b6caf47635d5771b9034c ËøôÊòØË∞ÅÊèê‰∫§ÁöÑÔºüd3e0684a1c510f4effd155b01591019e2c5d7812 ÂàùÂßãÂåñÁöÑÁ¨¨‰∏ÄÊ¨°Êèê‰∫§ Êü•ÁúãÁ≤æÁÆÄÁä∂ÊÄÅËæìÂá∫Ôºö 12$ git status -s M welcome.txt Áä∂ÊÄÅËæìÂá∫‰∏≠Êñá‰ª∂ÂêçÁöÑÂâçÈù¢Âá∫Áé∞‰∫Ü‰∏Ä‰∏™Â≠óÊØçMÔºåÂç≥Âè™‰Ωç‰∫éÁ¨¨‰∫åÂàóÁöÑÂ≠óÊØçM„ÄÇÈÇ£‰πàÁ¨¨‰∏ÄÂàóÁöÑMÂéªÂì™‰∫ÜÔºüÂæàÊòéÊòæË¢´Êèê‰∫§‰∫Ü„ÄÇ Âç≥Êèê‰∫§‰ªªÂä°ÔºàÊèê‰∫§ÊöÇÂ≠òÂå∫ÔºåstageÔºâ‰∏≠ÁöÑÂÜÖÂÆπË¢´Êèê‰∫§Âà∞ÁâàÊú¨Â∫ìÔºåÊâÄ‰ª•Á¨¨‰∏ÄÂàóÂõ†‰∏∫Êèê‰∫§ÊöÇÂ≠òÂå∫ÂíåÁâàÊú¨Â∫ì‰∏≠ÁöÑÁä∂ÊÄÅ‰∏ÄËá¥ÔºåÊâÄ‰ª•ÊòæÁ§∫Á©∫ÁôΩ„ÄÇ ÈÇ£Êèê‰∫§ÁöÑwelcome.txtÊòØÂì™‰∏™ÁâàÊú¨Âë¢ÔºüÈÄöËøáÊâßË°ågit diffÊàñËÄÖgit diff headÂëΩ‰ª§Êü•ÁúãÂ∑ÆÂºÇ„ÄÇËôΩÁÑ∂ÂëΩ‰ª§ git diffÂíågit diff headÁöÑÊØîËæÉËøáÁ®ãÂπ∂‰∏çÂêåÔºå‰ΩÜÊòØ‰ºöÁúãÂà∞‰∏ãÈù¢Áõ∏ÂêåÁöÑÂ∑ÆÂºÇËæìÂá∫ÁªìÊûú„ÄÇ 12$ git diff$ git diff head ÁêÜËß£GitÊöÇÂ≠òÂå∫ÔºàstageÔºâ GitÊöÇÂ≠òÂå∫ÔºàstageÔºåÊàñÁß∞‰∏∫indexÔºâÁöÑËÆæËÆ°ÊòØGitÊúÄÊàêÂäüÁöÑËÆæËÆ°‰πã‰∏ÄÔºå‰πüÊòØÊúÄÈöæÁêÜËß£ÁöÑ‰∏Ä‰∏™ËÆæËÆ°„ÄÇ Âú®ÁâàÊú¨Â∫ì.gitÁõÆÂΩï‰∏ãÔºåÊúâ‰∏Ä‰∏™indexÊñá‰ª∂Ôºå‰∏ãÈù¢ÈíàÂØπËøô‰∏™Êñá‰ª∂ÂÅö‰∏™ÂÆûÈ™å„ÄÇ È¶ñÂÖàÊâßË°ågit checkoutÂëΩ‰ª§ÔºåÊí§ÈîÄÂ∑•‰ΩúÂå∫‰∏≠welcome.txtÊñá‰ª∂Â∞öÊú™Êèê‰∫§ÁöÑ‰øÆÊîπ„ÄÇ 12$ git checkout -- welcome.txt$ git status -s ÈÄöËøáÁä∂ÊÄÅËæìÂá∫ÂèØ‰ª•ÁúãÂà∞Â∑•‰ΩúÂå∫Â∑≤ÁªèÊ≤°ÊúâÊîπÂä®‰∫ÜÔºåÊü•Áúã‰∏ã.git/indexÊñá‰ª∂ÁöÑÊó∂Èó¥Êà≥Ôºö 2019-06-10 22:00:43 1$ ls --full-time .git/index ÂÜçÊ¨°ÊâßË°ågit statusÂëΩ‰ª§ÔºåÁÑ∂ÂêéÊòæÁ§∫.git/indexÊñá‰ª∂ÁöÑÊó∂Èó¥Êà≥Ôºö2019-06-10 22:00:43ÔºåÂíå‰∏äÈù¢ÁöÑ‰∏ÄÊ†∑„ÄÇ 12$ git status -s $ ls --full-time .git/index Áé∞Âú®Êõ¥Êîπ‰∏Ä‰∏ãwelcome.txtÊñá‰ª∂ÁöÑÊó∂Èó¥Êà≥Ôºå‰ΩÜ‰∏çÊîπÂèòÂÆÉÁöÑÂÜÖÂÆπ„ÄÇÁÑ∂ÂêéÂÜçÊâßË°ågit statusÂëΩ‰ª§ÔºåÁÑ∂ÂêéÊü•Áúã.git/indexÊñá‰ª∂Êó∂Èó¥Êà≥‰∏∫Ôºö22:06:32 123$ touch welcome.txt$ git status -s $ ls --full-time .git/index ÂèØ‰ª•ÁúãÂà∞Êó∂Èó¥Êà≥ÊîπÂèò‰∫Ü„ÄÇ Ëøô‰∏™ÂÆûÈ™åËØ¥ÊòéÂΩìÊâßË°ågit statusÊàñËÄÖgit diffÂëΩ‰ª§Êâ´ÊèèÂ∑•‰ΩúÂå∫ÊîπÂä®ÁöÑÊó∂ÂÄôÔºåÂÖà‰æùÊçÆ.git/indexÊñá‰ª∂‰∏≠ËÆ∞ÂΩïÁöÑ ÔºàÂ∑•‰ΩúÂå∫Ë∑üË∏™Êñá‰ª∂ÔºâÊó∂Èó¥Êà≥„ÄÅÈïøÂ∫¶Á≠â‰ø°ÊÅØÂà§Êñ≠Â∑•‰ΩúÂå∫Êñá‰ª∂ÊòØÂê¶ÊîπÂèò„ÄÇÂ¶ÇÊûúÂ∑•‰ΩúÂå∫ÁöÑÊñá‰ª∂Êó∂Èó¥Êà≥ÊîπÂèòÔºåËØ¥ÊòéÊñá‰ª∂ÁöÑ ÂÜÖÂÆπÂèØËÉΩË¢´ÊîπÂèò‰∫ÜÔºåÈúÄË¶ÅÊâìÂºÄÊñá‰ª∂ÔºåËØªÂèñÊñá‰ª∂ÂÜÖÂÆπÔºåÂíåÊõ¥ÊîπÂâçÁöÑÂéüÂßãÊñá‰ª∂Áõ∏ÊØîÔºåÂà§Êñ≠Êñá‰ª∂ÂÜÖÂÆπÊòØÂê¶Ë¢´Êõ¥Êîπ„ÄÇÂ¶ÇÊûú Êñá‰ª∂ÂÜÖÂÆπÊ≤°ÊúâÊîπÂèòÔºåÂàôÂ∞ÜËØ•Êñá‰ª∂Êñ∞ÁöÑÊó∂Èó¥Êà≥ËÆ∞ÂΩïÂà∞.git/indexÊñá‰ª∂‰∏≠„ÄÇÂõ†‰∏∫Âà§Êñ≠Êñá‰ª∂ÊòØÂê¶Êõ¥Êîπ‰ΩøÁî®ÁöÑÊòØÊó∂Èó¥Êà≥„ÄÅ Êñá‰ª∂ÈïøÂ∫¶Á≠â‰ø°ÊÅØËøõË°åÊØîËæÉÔºåË¶ÅÊØîÈÄöËøáÊñá‰ª∂ÂÜÖÂÆπÊØîËæÉÂø´ÁöÑÂ§öÔºåÊâÄ‰ª•GItËøôÊ†∑ÁöÑÂÆûÁé∞ÊñπÂºèÂèØ‰ª•ËÆ©Â∑•‰ΩúÂå∫Áä∂ÊÄÅÊâ´ÊèèÊõ¥Âø´ ÊâßË°åÔºåËøô‰πüÊòØGitÈ´òÊïàÁöÑÂõ†Á¥†‰πã‰∏Ä„ÄÇ Êñá‰ª∂.git/indexÂÆûÈôÖ‰∏äÂ∞±ÊòØ‰∏Ä‰∏™ÂåÖÂê´Êñá‰ª∂Á¥¢ÂºïÁöÑÁõÆÂΩïÊ†ëÔºåÂÉèÊòØ‰∏Ä‰∏™ËôöÊãüÁöÑÂ∑•‰ΩúÂå∫„ÄÇÂú®Ëøô‰∏™ËôöÊãüÂ∑•‰ΩúÂå∫ÁöÑÁõÆÂΩïÊ†ë‰∏≠Ôºå ËÆ∞ÂΩï‰∫ÜÊñá‰ª∂Âêç„ÄÅÊñá‰ª∂ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØÔºàÊó∂Èó¥Êà≥„ÄÅÊñá‰ª∂ÈïøÂ∫¶Á≠âÔºâ„ÄÇÊñá‰ª∂ÁöÑÂÜÖÂÆπÂπ∂‰∏çÂ≠òÂÇ®ÂÖ∂‰∏≠ÔºåËÄåÊòØ‰øùÂ≠òÂú®GitÂØπË±°Â∫ì .git/objectsÁõÆÂΩï‰∏≠ÔºåÊñá‰ª∂Á¥¢ÂºïÂª∫Á´ã‰∫ÜÊñá‰ª∂ÂíåÂØπË±°Â∫ì‰∏≠ÂØπË±°ÂÆû‰Ωì‰πãÈó¥ÁöÑÂØπÂ∫î„ÄÇ ‰∏ãÈù¢ËøôÂº†ÂõæÂ±ïÁ§∫‰∫ÜÂ∑•‰ΩúÂå∫„ÄÅÁâàÊú¨Â∫ì‰∏≠ÁöÑÊöÇÂ≠òÂå∫ÂíåÁâàÊú¨Â∫ì‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇ Âõæ‰∏≠Â∑¶‰æß‰∏∫Â∑•‰ΩúÂå∫ÔºåÂè≥‰æß‰∏∫ÁâàÊú¨Â∫ì„ÄÇÂú®ÁâàÊú¨Â∫ì‰∏≠Ê†áËÆ∞‰∏∫indexÁöÑÂå∫ÂüüÊòØÊöÇÂ≠òÂå∫(stageÔºå‰∫¶Áß∞index),Ê†áËÆ∞‰∏∫masterÁöÑÊòØmasterÂàÜÊîØÊâÄ‰ª£Ë°®ÁöÑÁõÆÂΩïÊ†ë„ÄÇ Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫Ê≠§Êó∂HEADÂÆûÈôÖ‰∏äÊòØÊåáÂêëmasterÂàÜÊîØÁöÑ‰∏Ä‰∏™‚ÄúÊ∏∏Ê†á‚ÄùÔºåÊâÄ‰ª•ÂõæÁ§∫ÁöÑÂëΩ‰ª§‰∏≠Âá∫Áé∞HEADÁöÑÂú∞ÊñπÂèØ‰ª•Áî®masterÊõøÊç¢„ÄÇ Âõæ‰∏≠ÁöÑobjectsÊ†áËØÜÁöÑÂå∫Âüü‰∏∫GitÁöÑÂØπË±°Â∫ìÔºåÂÆûÈôÖ‰Ωç‰∫é.git/objectsÁõÆÂΩï‰∏ã„ÄÇ ÂΩìÂØπÂ∑•‰ΩúÂå∫‰øÆÊîπÔºàÊàñÊñ∞Â¢ûÔºâÁöÑÊñá‰ª∂ÊâßË°ågit addÂëΩ‰ª§Êó∂ÔºåÊöÇÂ≠òÂå∫ÁöÑÁõÆÂΩïÊ†ëË¢´Êõ¥Êñ∞ÔºåÂêåÊó∂Â∑•‰ΩúÂå∫‰øÆÊîπÔºàÊàñÊñ∞Â¢ûÔºâÁöÑÊñá‰ª∂ ÂÜÖÂÆπË¢´ÂÜôÂÖ•Âà∞ÂØπË±°Â∫ì‰∏≠ÁöÑ‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°‰∏≠ÔºåËÄåÂØπË±°ÁöÑIDË¢´ËÆ∞ÂΩïÂú®ÊöÇÂ≠òÂå∫ÁöÑÊñá‰ª∂Á¥¢Âºï‰∏≠„ÄÇ ÂΩìÊâßË°åÊèê‰∫§Êìç‰ΩúÊó∂ÔºåÊöÇÂ≠òÂå∫ÁöÑÁõÆÂΩïÊ†ëÂÜôÂà∞ÁâàÊú¨Â∫ìÔºàÂØπË±°Â∫ìÔºâ‰∏≠ÔºåmasterÂàÜÊîØ‰ºöÂÅöÂá∫Áõ∏Â∫îÁöÑÊõ¥Êñ∞„ÄÇÂç≥masterÊúÄÊñ∞ÊåáÂêëÁöÑÁõÆÂΩïÊ†ëÂ∞±ÊòØÊèê‰∫§Êó∂ÂéüÊöÇÂ≠òÂå∫ÁöÑÁõÆÂΩïÊ†ë„ÄÇ ÂΩìÊâßË°ågit reset HEADÂëΩ‰ª§Êó∂ÔºåÊöÇÂ≠òÂå∫ÁöÑÁõÆÂΩïÊ†ë‰ºöË¢´ÈáçÂÜôÔºåË¢´masterÂàÜÊîØÊåáÂêëÁöÑÁõÆÂΩïÊ†ëÊâÄÊõøÊç¢Ôºå‰ΩÜÊòØÂ∑•‰ΩúÂå∫‰∏çÂèóÂΩ±Âìç„ÄÇ ÂΩìÊâßË°ågit rm --cached &lt;file&gt;ÂëΩ‰ª§Êó∂Ôºå‰ºöÁõ¥Êé•‰ªéÊöÇÂ≠òÂå∫Âà†Èô§Êñá‰ª∂ÔºåÂ∑•‰ΩúÂå∫Âàô‰∏çÂÅöÊîπÂèò„ÄÇ ÂΩìÊâßË°ågit checkout . ÊàñËÄÖgit checkout -- &lt;file&gt;ÂëΩ‰ª§Êó∂Ôºå‰ºöÁî®ÊöÇÂ≠òÂå∫ÂÖ®ÈÉ®ÊàñÊåáÂÆöÁöÑÊñá‰ª∂ÊõøÊç¢Â∑•‰ΩúÂå∫ÁöÑÊñá‰ª∂Ôºå„ÄÇ Ëøô‰∏™Êìç‰ΩúÂæàÂç±Èô©Ôºå‰ºöÊ∏ÖÈô§Â∑•‰ΩúÂå∫‰∏≠Êú™Ê∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫ÁöÑÊîπÂä®„ÄÇ ÂΩìÊâßË°ågit checkout HEAD .ÊàñËÄÖgit checkout HEAD &lt;file&gt;ÂëΩ‰ª§Êó∂Ôºå‰ºöÁî®HEADÊåáÂêëÁöÑmasterÂàÜÊîØ‰∏≠ÁöÑÂÖ®ÈÉ®ÊàñËÄÖ ÈÉ®ÂàÜÊñá‰ª∂ÊõøÊç¢ÊöÇÂ≠òÂå∫ÂíåÂ∑•‰ΩúÂå∫‰∏≠ÁöÑÊñá‰ª∂„ÄÇËøô‰∏™ÂëΩ‰ª§‰πüÊûÅÂÖ∑Âç±Èô©ÊÄßÔºåÂõ†‰∏∫‰∏ç‰ΩÜ‰ºöÊ∏ÖÈô§Â∑•‰ΩúÂå∫‰∏≠Êú™Êèê‰∫§ÁöÑÊîπÂä®Ôºå‰πü‰ºöÊ∏ÖÈô§ÊöÇÂ≠òÂå∫‰∏≠Êú™Êèê‰∫§ÁöÑÊîπÂä®„ÄÇ Git Diff È≠îÊ≥ï ÊöÇÂ≠òÂå∫ÁõÆÂΩïÊ†ëÊµèËßà ÂØπ‰∫éHEADÔºàÁâàÊú¨Â∫ì‰∏≠ÂΩìÂâçÊèê‰∫§ÔºâÊåáÂêëÁöÑÁõÆÂΩïÊ†ëÔºåÂèØ‰ª•‰ΩøÁî®git ls-treeÊù•Êü•Áúã„ÄÇ 12$ git ls-tree -l HEAD 100644 blob d7230d74c5f8d61ff3c1adbfd3b035c09cb62c16 33 welcome.txt ‰ΩøÁî®-lÂèÇÊï∞ÔºåÂèØ‰ª•ÊòæÁ§∫Êñá‰ª∂Â§ßÂ∞è„ÄÇ‰∏äÈù¢welcome.txtÂ§ßÂ∞è33Â≠óËäÇ„ÄÇ ËæìÂá∫ÁöÑÊù°ÁõÆ‰ªéÂ∑¶Ëá≥Âè≥ÔºåÁ¨¨‰∏Ä‰∏™Â≠óÊÆµÊòØÊñá‰ª∂ÁöÑÂ±ûÊÄßÔºàrw-r--r--Ôºâ,Á¨¨‰∫å‰∏™Â≠óÊÆµËØ¥ÊòéÊòØGitÂØπË±°Â∫ì‰∏≠ÁöÑ‰∏Ä‰∏™blobÂØπË±°ÔºàÊñá‰ª∂ÔºâÔºå Á¨¨‰∏â‰∏™Â≠óÊÆµÂàôÊòØËØ•Êñá‰ª∂Âú®ÂØπË±°Â∫ì‰∏≠ÂØπÂ∫îÁöÑID--‰∏Ä‰∏™40‰ΩçÁöÑSHA1ÂìàÂ∏åÂÄºÊ†ºÂºèÁöÑIDÔºåÁ¨¨Âõõ‰∏™Â≠óÊÆµÊòØÊñá‰ª∂Â§ßÂ∞èÔºåÁ¨¨‰∫î‰∏™Â≠óÊÆµÊòØÊñá‰ª∂Âêç„ÄÇ Âú®ÊµèËßàÊöÇÂ≠òÂå∫‰∏≠ÁöÑÁõÆÂΩïÊ†ë‰πãÂâçÔºåÈ¶ñÂÖàÊ∏ÖÈô§Â∑•‰ΩúÂå∫ÂΩì‰∏≠ÁöÑÊîπÂä®„ÄÇÈÄöËøá git clean -fdÂëΩ‰ª§Ê∏ÖÈô§ÂΩìÂâçÂ∑•‰ΩúÂå∫‰∏≠Ê≤°ÊúâÂä†ÂÖ• ÁâàÊú¨Â∫ìÁöÑÊñá‰ª∂ÂíåÁõÆÂΩïÔºàÈùûË∑üË∏™Êñá‰ª∂ÂíåÁõÆÂΩïÔºâÔºåÁÑ∂ÂêéÊâßË°ågit checkout .ÂëΩ‰ª§ÔºåÁî®ÊöÇÂ≠òÂå∫Âà∑Êñ∞Â∑•‰ΩúÂå∫„ÄÇ 12$ git clean -fd$ git checkout . ÁÑ∂ÂêéÂú®Â∑•‰ΩúÂå∫‰∏≠ÂÅöÂá∫‰∏Ä‰∫õ‰øÆÊîπÔºà‰øÆÊîπwelcome.txtÔºåÂ¢ûÂä†‰∏Ä‰∏™Â≠êÁõÆÂΩïÂíåÊñá‰ª∂ÔºâÔºåÁÑ∂ÂêéÊ∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫„ÄÇÊúÄÂêéÂÜçÂØπÂ∑•‰ΩúÂå∫ÂÅöÂá∫‰øÆÊîπ„ÄÇ 123456$ echo &quot;( ^_^ )/~~ÊãúÊãú&quot; &gt;&gt; welcome.txt$ mkdir -p a/b/c$ echo &quot;Hello.&quot; &gt;&gt; a/b/c/hello.txt $ git add .$ echo &quot;„Éæ(Ôø£‚ñΩÔø£)Bye~Bye~&quot; &gt;&gt; a/b/c/hello.txt $ git status -s ‰∏äÈù¢ÁöÑÂëΩ‰ª§ËøêË°åÂÆåÊØïÂêéÔºåÈÄöËøáÁ≤æÁÆÄÁöÑÁä∂ÊÄÅËæìÂá∫ÔºåÂèØ‰ª•ÁúãÂá∫Â∑•‰ΩúÂå∫„ÄÅÊöÇÂ≠òÂå∫„ÄÅÁâàÊú¨Â∫ìÂΩìÂâçÂàÜÊîØÁöÑÊúÄÊñ∞ÁâàÊú¨ÔºàHEADÔºâÂêÑ‰∏çÁõ∏Âêå„ÄÇÂÖàÊù•ÁúãÁúãÂ∑•‰ΩúÂå∫‰∏≠Êñá‰ª∂ÁöÑÂ§ßÂ∞èÔºö 123$ find . -path ./.git -prune -o -type f -printf &quot;%-20p\t%s\n&quot;./a/b/c/hello.txt 30./welcome.txt 52 Ë¶ÅÊòæÁ§∫ÊöÇÂ≠òÂå∫ÁöÑÁõÆÂΩïÊ†ëÔºåÂèØ‰ª•‰ΩøÁî®git ls-filesÂëΩ‰ª§„ÄÇ 123$ git ls-files -s100644 18832d35117ef2f013c4009f5b2128dfaeff354f 0 a/b/c/hello.txt100644 a2b90cc2992cf3ff4e0d6beb0c9461158124c2b6 0 welcome.txt Ëøô‰∏™ËæìÂá∫Âíå‰πãÂâç‰ΩøÁî®git ls-treeÂëΩ‰ª§ÁöÑËæìÂá∫‰∏ç‰∏ÄÊ†∑ÔºåÂ¶ÇÊûúÊÉ≥Ë¶Å‰ΩøÁî®git ls-treeÂëΩ‰ª§ÔºåÈúÄË¶ÅÂÖàÂ∞ÜÊöÇÂ≠òÂå∫ÁöÑ ÁõÆÂΩïÊ†ëÂÜôÂÖ•GitÂØπË±°Â∫ìgit write-treeÂëΩ‰ª§ÔºåÁÑ∂ÂêéÂú®ÈíàÂØπgit write-treeÂëΩ‰ª§ÂÜôÂÖ•ÁöÑtreeÊâßË°ågit ls-tree„ÄÇ 12345$ git write-tree 1e9d611d50af21a2f0ec7bce6e270fd170a8f557$ git ls-tree -l 040000 tree 53583ee687fbb2e913d18d508aefd512465b2092 - a100644 blob a2b90cc2992cf3ff4e0d6beb0c9461158124c2b6 50 welcome.txt ‰ªé‰∏äÈù¢ÁöÑÂëΩ‰ª§ÂèØ‰ª•ÁúãÂá∫Ôºö Âà∞Â§ÑÈÉΩÊòØ40‰ΩçÁöÑSHA1ÂìàÂ∏åÂÄºÊ†ºÂºèÁöÑIDÔºåÂèØ‰ª•Áî®‰∫éÊåá‰ª£Êñá‰ª∂ÂÜÖÂÆπÔºàblobÔºâÔºåÁî®‰∫éÊåá‰ª£ÁõÆÂΩïÊ†ë(tree)ÔºåËøòÂèØ‰ª•Áî®‰∫éÊåá‰ª£Êèê‰∫§„ÄÇ git write-treeÁöÑËæìÂá∫Â∞±ÊòØÂÜôÂÖ•GitÂØπË±°Â∫ì‰∏≠ÁöÑTree IDÔºåËøô‰∏™IDÂ∞Ü‰Ωú‰∏∫‰∏ã‰∏ÄÊù°ÂëΩ‰ª§ÁöÑËæìÂÖ•„ÄÇ git ls-treeÂëΩ‰ª§‰∏≠ÔºåÊ≤°ÊúâÊää40‰ΩçÁöÑIDÂÜôÂÖ®ÔºåËÄåÊòØ‰ΩøÁî®‰∫ÜÂâçÂá†‰ΩçÔºåÂÆûÈôÖ‰∏äÂè™Ë¶Å‰∏çÂíåÂÖ∂‰ªñÁöÑÂØπË±°IDÂÜ≤Á™ÅÔºåÂèØ‰ª•ÈöèÂøÉÊâÄÊ¨≤ÁöÑ‰ΩøÁî®Áº©ÂÜôID„ÄÇ git ls-treeÁöÑËæìÂá∫ÊòæÁ§∫ÁöÑÁ¨¨‰∏ÄÊù°ÊòØ‰∏Ä‰∏™treeÂØπË±°ÔºåÂç≥ÂàöÊâçÂàõÂª∫ÁöÑ‰∏ÄÁ∫ßÁõÆÂΩïa„ÄÇ Â¶ÇÊûúÊÉ≥Ë¶ÅÈÄíÂΩíÊòæÁ§∫ÁõÆÂΩïÂÜÖÂÆπÔºåÂàô‰ΩøÁî®-rÂèÇÊï∞Ë∞ÉÁî®„ÄÇ‰ΩøÁî®ÂèÇÊï∞-tÂèØ‰ª•ÊääÈÄíÂΩíËøáÁ®ã‰∏≠ÈÅáÂà∞ÁöÑÊØèÊ£µÊ†ëÈÉΩÊòæÁ§∫Âá∫Êù•ÔºåËÄå‰∏çÊòØÂè™ÊòæÁ§∫ÊúÄÁªàÁöÑÊñá‰ª∂„ÄÇ‰∏ãÈù¢ÊâßË°åÈÄíÂΩíÊìç‰ΩúÊòæÁ§∫ÁõÆÂΩïÊ†ëÁöÑÂÜÖÂÆπ„ÄÇ 123456$ git write-tree | xargs git ls-tree -l -r -t040000 tree 53583ee687fbb2e913d18d508aefd512465b2092 - a040000 tree 514d729095b7bc203cf336723af710d41b84867b - a/b040000 tree deaec688e84302d4a0b98a1b78a434be1b22ca02 - a/b/c100644 blob 18832d35117ef2f013c4009f5b2128dfaeff354f 7 a/b/c/hello.txt100644 blob a2b90cc2992cf3ff4e0d6beb0c9461158124c2b6 50 welcome.txt ÈÄöËøá‰ΩøÁî®‰∏çÂêåÁöÑÂèÇÊï∞Ë∞ÉÁî®git diffÂëΩ‰ª§ÔºåÂèØ‰ª•ÂØπÂ∑•‰ΩúÂå∫„ÄÅÊöÇÂ≠òÂå∫„ÄÅHEAD‰∏≠ÁöÑÂÜÖÂÆπ‰∏§‰∏§ÊØîËæÉ„ÄÇ‰∏ãÈù¢ÁöÑÂõæÂ±ïÁ§∫‰∫Ügit diffÂëΩ‰ª§ÁöÑ‰ΩúÁî®ËåÉÂõ¥„ÄÇ ÈÄöËøá‰∏äÈù¢ÁöÑÂõæÂ∞±‰∏çÈöæÁêÜËß£‰∏ãÈù¢ÂëΩ‰ª§ÁöÑËæìÂá∫„ÄÇ Â∑•‰ΩúÂå∫ÂíåÊöÇÂ≠òÂå∫ÊØîËæÉ„ÄÇ 1$ git diff ÊöÇÂ≠òÂå∫ÂíåHEADÊØîËæÉ„ÄÇ 1$ git diff --cached Â∑•‰ΩúÂå∫ÂíåHEADÊØîËæÉ„ÄÇ 1$ git diff HEAD ‰∏çË¶Å‰ΩøÁî®git commit -a ÂÆûÈôÖ‰∏äGitÁöÑÊèê‰∫§ÂëΩ‰ª§git commitÂèØ‰ª•Â∏¶‰∏ä-aÂèÇÊï∞ÔºåÂØπÊú¨Âú∞ÊâÄÊúâÂèòÊõ¥ÁöÑÊñá‰ª∂ÊâßË°åÊèê‰∫§Êìç‰ΩúÔºåÂåÖÊã¨Êú¨Âú∞‰øÆÊîπÁöÑÊñá‰ª∂ÔºåÂà†Èô§ÁöÑÊñá‰ª∂Ôºå‰ΩÜ‰∏çÂåÖÊã¨Êú™Ë¢´ÁâàÊú¨Â∫ìË∑üË∏™ÁöÑÊñá‰ª∂„ÄÇ Ëøô‰∏™ÂëΩ‰ª§ÁöÑÁ°ÆÂèØ‰ª•ÁÆÄÂåñ‰∏Ä‰∫õÊìç‰ΩúÔºå‰ΩÜÂêåÊó∂‰ºö‰∏¢ÊéâGitÊöÇÂ≠òÂå∫Â∏¶ÁªôÁî®Êà∑ÊúÄÂ§ßÁöÑÂ•ΩÂ§ÑÔºöÂØπÊèê‰∫§ÂÜÖÂÆπËøõË°åÊéßÂà∂ÁöÑËÉΩÂäõ„ÄÇ]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~ÂàùÂßãÂåñ]]></title>
    <url>%2Fposts%2F7230a407.html</url>
    <content type="text"><![CDATA[ÂàõÂª∫ÁâàÊú¨Â∫ìÂèäÁ¨¨‰∏ÄÊ¨°Êèê‰∫§ È¶ñÂÖàÁúã‰∏Ä‰∏ãÂΩìÂâçGitÁöÑÁâàÊú¨ 1$ git --version Âú®ÂºÄÂßãGit‰πãÂâçÔºåÊàë‰ª¨ÈúÄË¶ÅËÆæÁΩÆ‰∏Ä‰∏ãGitÁöÑÁéØÂ¢ÉÂèòÈáèÔºåËøô‰∏™ËÆæÁΩÆÊòØ‰∏ÄÊ¨°ÊÄßÁöÑÂ∑•‰Ωú„ÄÇÂç≥Ëøô‰∫õËÆæÁΩÆ‰ºöÂú®ÂÖ®Â±ÄÊñá‰ª∂ÔºàÁî®Êà∑‰∏ªÁõÆÂΩïÁöÑ .gitconfigÔºâÊàñÁ≥ªÁªüÊñá‰ª∂Ôºà/etc/gitconfigÔºâ‰∏≠ÂÅöÊ∞∏‰πÖËÆ∞ÂΩï„ÄÇ ÂëäËØâGitÂΩìÂâçÁî®Êà∑ÁöÑÂßìÂêçÂíåÈÇÆ‰ª∂Âú∞ÂùÄÔºåÈÖçÁΩÆÁöÑÁî®Êà∑ÂêçÂíåÈÇÆ‰ª∂Âú∞ÂùÄÂ∞ÜÂú®ÁâàÊú¨Â∫ìÊèê‰∫§Êó∂‰Ωú‰∏∫Êèê‰∫§ËÄÖÁöÑÁî®Êà∑ÂêçÂíåÈÇÆ‰ª∂Âú∞ÂùÄ„ÄÇ 12$ git config --global user.name &quot;wanghongbo&quot;$ git config --global user.email whb@163.com ËÆæÁΩÆ‰∏Ä‰∫õGitÂà´ÂêçÔºå‰ª•‰æøÂèØ‰ª•‰ΩøÁî®Êõ¥‰∏∫ÁÆÄÊ¥ÅÁöÑÂ≠êÂëΩ‰ª§„ÄÇ ‰æãÂ¶ÇÔºöËæìÂÖ• git ci Âç≥Áõ∏ÂΩì‰∫é git commit -s ÔºåËæìÂÖ•git st Âç≥Áõ∏ÂΩì‰∫é git -p status„ÄÇ Â¶ÇÊûúÊã•ÊúâÁ≥ªÁªüÁÆ°ÁêÜÂëòÊùÉÈôêÔºåÂ∏åÊúõÊ≥®ÂÜåÁöÑÂëΩ‰ª§Âà´ÂêçËÉΩË¢´ÊâÄÊúâÁî®Êà∑‰ΩøÁî®ÔºåÂèØÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö 1234$ git config --system alias.br branch$ git config --system alias.ci &quot;commit -s&quot;$ git config --system alias.co checkout$ git config --system alias.st &quot;-p status&quot; - Â¶ÇÊûúÂè™Âú®Êú¨Áî®Êà∑‰ΩøÁî®ÔºåÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ôºö 1234$ git config --global alias.st status$ git config --global alias.ci &quot;commit -s&quot;$ git config --global alias.co checkout$ git config --global alias.br branch ÂàõÂª∫GitÁâàÊú¨Â∫ì ‰∏ãÈù¢Â∞±‰ªé‰∏Ä‰∏™Á©∫ÁõÆÂΩïÂºÄÂßãÂàùÂßãÂåñÁâàÊú¨Â∫ìÔºåËøô‰∏™ÁâàÊú¨Â∫ìÂëΩÂêç‰∏∫‚Äúgit-demo‚Äù„ÄÇÈ¶ñÂÖàÂª∫Á´ã‰∏Ä‰∏™Êñ∞ÁöÑÂ∑•‰ΩúÁõÆÂΩïÔºåËøõÂÖ•ËØ•ÁõÆÂΩïÂêéÔºåÊâßË°ågit initÂàõÂª∫ÁâàÊú¨Â∫ì 12345$ cd /d/workspace$ mkdir git-demo$ cd git-demo$ git initInitialized empty Git repository in D:/workspace/git-demo/.git/ ‰ªé‰∏äÈù¢ÁâàÊú¨Â∫ìÂàùÂßãÂåñÂêéÁöÑËæìÂá∫‰∏≠ÔºåÂèØ‰ª•ÁúãÂà∞ÊâßË°ågit initÂëΩ‰ª§Âú®Â∑•‰ΩúÂå∫ÂàõÂª∫‰∫ÜÈöêËóèÁõÆÂΩï.git„ÄÇ 12$ ls -aF./ ../ .git/ Ëøô‰∏™ÈöêËóèÁöÑ.gitÁõÆÂΩïÂ∞±ÊòØGitÁâàÊú¨Â∫ìÔºàÂèàÂè´‰ªìÂ∫ìÔºårepositoryÔºâ„ÄÇ.gitÁâàÊú¨Â∫ìÁõÆÂΩïÊâÄÂú®ÁöÑÁõÆÂΩïÔºåÂç≥/d/workspace/git-demoÁõÆÂΩïÁß∞‰∏∫Â∑•‰ΩúÂå∫ÔºåÁõÆÂâçÂ∑•‰ΩúÂå∫Èô§‰∫ÜÂåÖÂê´‰∏Ä‰∏™ÈöêËóèÁöÑ.gitÁõÆÂΩïÂ§ñÁ©∫Êó†‰∏ÄÁâ©„ÄÇ ‰∏ãÈù¢Âú®Â∑•‰ΩúÂå∫‰∏≠ÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂Ôºöwelcome.txtÔºåÂÜÖÂÆπÂ∞±ÊòØ‰∏ÄË°å‚ÄúHello Git.‚Äù„ÄÇ 1$ echo &quot;Hello Git.&quot; &gt;&gt; welcome.txt ‰∏∫‰∫ÜÂ∞ÜËøô‰∏™Êñ∞Âª∫Á´ãÁöÑÊñá‰ª∂Ê∑ªÂä†Âà∞ÁâàÊú¨Â∫ìÔºåÈúÄË¶ÅÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ôºö 1$ git add welcome.txt GitÂíåÂ§ßÈÉ®ÂàÜÂÖ∂‰ªñÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÈÉΩÈúÄË¶ÅÂÜçÊâßË°å‰∏Ä‰∏™Êèê‰∫§Êìç‰ΩúÔºåÂØπ‰∫éGitÊâßË°ågit commitÂëΩ‰ª§ÂÆåÊàêÊèê‰∫§„ÄÇÂú®Êèê‰∫§ËøáÁ®ã‰∏≠ÈúÄË¶ÅËæìÂÖ•Êèê‰∫§ËØ¥ÊòéÔºåËøô‰∏™Ë¶ÅÊ±ÇÂØπGitÊòØÂº∫Âà∂ÊÄßÁöÑÔºå‰∏çÂÉèCVS„ÄÅSVNÁ≠âÂÖÅËÆ∏Á©∫ÁôΩÁöÑÊèê‰∫§ËØ¥Êòé„ÄÇ Âú®GitÊèê‰∫§Êó∂ÔºåÂ¶ÇÊûúÂú®ÂëΩ‰ª§Ë°å‰∏çÊèê‰æõÊèê‰∫§ËØ¥ÊòéÔºàÊ≤°Êúâ‰ΩøÁî® -m ÂèÇÊï∞ÔºâÔºåGit‰ºöËá™Âä®ÊâìÂºÄ‰∏Ä‰∏™ÁºñËæëÂô®ÔºåË¶ÅÊ±ÇÊÇ®Âú®ÂÖ∂‰∏≠ËæìÂÖ•Êèê‰∫§ËØ¥ÊòéÔºåËæìÂÖ•ÂÆåÊØï‰øùÂ≠òÈÄÄÂá∫„ÄÇ ‰∏ãÈù¢ËøõË°åÊèê‰∫§Ôºå‰∏∫‰∫ÜËØ¥ÊòéÊñπ‰æøÔºå‰ΩøÁî® -m ÂèÇÊï∞Áõ¥Êé•ÁªôÂá∫Êèê‰∫§ËØ¥Êòé„ÄÇ 1$ git commit -m &quot;ÂàùÂßãÂåñÁöÑÁ¨¨‰∏ÄÊ¨°Êèê‰∫§&quot; ‰ªé‰∏äÈù¢ÁöÑÂëΩ‰ª§ÂèäËæìÂá∫ÂèØ‰ª•ÁúãÂá∫Ôºö ÈÄöËøá-mÂèÇÊï∞ËÆæÁΩÆÊèê‰∫§ËØ¥Êòé‰∏∫Ôºö‚ÄúÂàùÂßãÂåñÁöÑÁ¨¨‰∏ÄÊ¨°Êèê‰∫§‚Äù„ÄÇËØ•Êèê‰∫§ËØ¥Êòé‰πüÊòæÁ§∫Âú®ÂëΩ‰ª§ËæìÂá∫ÁöÑÁ¨¨‰∏ÄË°å‰∏≠„ÄÇ ÂëΩ‰ª§ËæìÂá∫ÁöÑÁ¨¨‰∏ÄË°åËøòÊòæÁ§∫‰∫ÜÂΩìÂâçÂ§Ñ‰∫éÂêç‰∏∫masterÁöÑÂàÜÊîØ‰∏äÔºåÊèê‰∫§ID‰∏∫e55c54cÔºå‰∏îËØ•Êèê‰∫§ÊòØËØ•ÂàÜÊîØÁöÑÁ¨¨‰∏Ä‰∏™Êèê‰∫§ÔºåÂç≥Ê†πÊèê‰∫§Ôºàroot-commitÔºâ„ÄÇÊ†πÊèê‰∫§ÂíåÂÖ∂‰ªñÊèê‰∫§ÁöÑÂå∫Âà´Âú®‰∫éÊ≤°ÊúâÂÖ≥ËÅîÁöÑÁà∂Êèê‰∫§„ÄÇ ÂëΩ‰ª§ËæìÂá∫ÁöÑÁ¨¨‰∫åË°åÂºÄÂßãÊòæÁ§∫Êú¨Ê¨°Êèê‰∫§ÊâÄÂÅö‰øÆÊîπÁöÑÁªüËÆ°Ôºö‰øÆÊîπ‰∫Ü‰∏Ä‰∏™Êñá‰ª∂ÔºåÂåÖÂê´‰∏ÄË°åÁöÑÊèíÂÖ•„ÄÇ ÊÄùËÄÉÔºöGitÂ∑•‰ΩúÂå∫‰∏ã‰∏∫‰ªÄ‰πàÊúâ‰∏™.gitÁõÆÂΩïÔºü GitÂèäÂÖ∂‰ªñÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÁöÑ‰∏Ä‰∏™ÊòæËëóÁâπÁÇπÔºöÁâàÊú¨Â∫ì‰Ωç‰∫éÂ∑•‰ΩúÂå∫ÁöÑÊ†πÁõÆÂΩï‰∏ã„ÄÇÂØπ‰∫éGitÔºåÁâàÊú¨Â∫ì‰Ωç‰∫éÂ∑•‰ΩúÂå∫Ê†πÁõÆÂΩï‰∏ãÁöÑ.gitÁõÆÂΩï‰∏≠Ôºå‰∏î‰ªÖÊ≠§‰∏ÄÂ§ÑÔºåÂú®Â∑•‰ΩúÂå∫ÁöÑÂ≠êÁõÆÂΩï‰∏ãÂàôÊ≤°Êúâ‰ªª‰ΩïÂÖ∂‰ªñË∑üË∏™Êñá‰ª∂ÊàñÁõÆÂΩï„ÄÇGit‰∏∫‰ªÄ‰πàË¶ÅËøôÊ†∑ËÆæËÆ°Âë¢Ôºü ÂØπ‰∫éCVSÔºåÂ∑•‰ΩúÂå∫ÁöÑÊ†πÁõÆÂΩïÂèäÊØè‰∏™Â≠êÁõÆÂΩï‰∏ãÈÉΩÊúâ‰∏Ä‰∏™CVSÁõÆÂΩïÔºåËØ•ÁõÆÂΩï‰∏≠ÂåÖÂê´Âá†‰∏™ÈÖçÁΩÆÊñá‰ª∂ÔºåÂª∫Á´ã‰∫ÜÂØπÁâàÊú¨Â∫ìÁöÑËøΩË∏™„ÄÇ Â¶ÇCVSÁõÆÂΩï‰∏ãÁöÑEntriesÊñá‰ª∂ËÆ∞ÂΩï‰∫Ü‰ªéÁâàÊú¨Â∫ìÊ£ÄÂá∫Âà∞Â∑•‰ΩúÂå∫ÁöÑÊñá‰ª∂ÁöÑÂêçÁß∞„ÄÅÁâàÊú¨ÂíåÊó∂Èó¥Êà≥Á≠âÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÈÄöËøáÂØπ Â∑•‰ΩúÂå∫Êñá‰ª∂Êó∂Èó¥Êà≥ÁöÑÊîπÂèòÊù•Âà§Êñ≠Êñá‰ª∂ÊòØÂê¶Êõ¥Êîπ„ÄÇËøôÊ†∑ËÆæËÆ°ÁöÑÂ•ΩÂ§ÑÊòØÔºåÂèØ‰ª•Â∞ÜÂ∑•‰ΩúÂå∫ÁßªÂä®Âà∞‰ªª‰ΩïÂÖ∂‰ªñÁõÆÂΩïÔºåÂ∑•‰ΩúÂå∫ÂíåÁâàÊú¨ ÊéßÂà∂ÊúçÂä°Âô®ÁöÑÊò†Â∞ÑÂÖ≥Á≥ª‰øùÊåÅ‰∏çÂèòÔºåËøôÊ†∑Â∑•‰ΩúÂå∫‰æùÁÑ∂ËÉΩÊ≠£Â∏∏Â∑•‰Ωú„ÄÇÁîöËá≥ËøòÂ∞ÜÂ∑•‰ΩúÂå∫ÁöÑÊüê‰∏™Â≠êÁõÆÂΩïÁßªÂä®Âà∞ÂÖ∂‰ªñ‰ΩçÁΩÆÔºåÂΩ¢Êàê Êñ∞ÁöÑÂ∑•‰ΩúÂå∫ÔºåÂú®Êñ∞ÁöÑÂ∑•‰ΩúÂå∫‰ªçÁÑ∂ËÉΩÂÆåÊàêÁâàÊú¨ÊéßÂà∂Áõ∏ÂÖ≥ÁöÑÊìç‰Ωú„ÄÇ‰ΩÜÁº∫ÁÇπ‰πüÂæàÂ§öÔºå‰æãÂ¶ÇÂ∑•‰ΩúÂå∫Êñá‰ª∂‰øÆÊîπ‰∫ÜÔºåÂõ†‰∏∫Ê≤°Êúâ ÂéüÂßãÊñá‰ª∂ÂÅöÊØîÂØπÔºåÂõ†Ê≠§ÂêëÊúçÂä°Âô®Êèê‰∫§‰øÆÊîπÁöÑÊó∂ÂÄôÂè™ËÉΩÂØπÊï¥‰∏™Êñá‰ª∂ËøõË°å‰º†ËæìËÄå‰∏çËÉΩ‰ªÖ‰º†ËæìÊñá‰ª∂ÁöÑÊîπÂä®ÈÉ®ÂàÜ„ÄÇËøòÊúâ ‰∏Ä‰∏™È£éÈô©Â∞±ÊòØ‰ø°ÊÅØÊ≥ÑÈú≤ÔºåÈÄöËøáÊâ´ÊèèCVS/EntriesÊñá‰ª∂Â∞±ËÉΩÂæóÂà∞ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÂàóË°®ÔºåÈÄ†Êàê‰ø°ÊÅØÊ≥ÑÈú≤„ÄÇ ÂØπ‰∫éSVNÔºåÂ∑•‰ΩúÂå∫ÁöÑÊ†πÁõÆÂΩïÂíåÊØè‰∏Ä‰∏™Â≠êÁõÆÂΩï‰∏ãÈÉΩÊúâ‰∏Ä‰∏™.svnÁõÆÂΩïÔºåËØ•ÁõÆÂΩï‰∏ç‰ªÖÂåÖÂê´‰∫ÜÁ±ª‰ººCVSÁöÑË∑üË∏™ÁõÆÂΩï‰∏ãÁöÑ ÈÖçÁΩÆÊñá‰ª∂ÔºåËøòÂåÖÂê´‰∫ÜÂΩìÂâçÂ∑•‰ΩúÂå∫‰∏ãÊØè‰∏Ä‰∏™Êñá‰ª∂ÁöÑÊã∑Ë¥ù„ÄÇÂ§öÂá∫Êñá‰ª∂ÁöÑÂéüÂßãÊã∑Ë¥ùËÆ©Êüê‰∫õsvnÂëΩ‰ª§ÂèØ‰ª•ËÑ±Á¶ªÁâàÊú¨Â∫ìÊâßË°åÔºå ËøòÂèØ‰ª•Âú®Áî±ÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Âô®Êèê‰∫§Êó∂Ôºå‰ªÖ‰ªÖÂØπÊñá‰ª∂ÊîπÂä®ÁöÑÂÜÖÂÆπÊèê‰∫§ÔºåÂõ†Ê≠§ÊîπÂä®ÁöÑÊñá‰ª∂ÂèØ‰ª•ÂíåÂéüÂßãÊã∑Ë¥ùËøõË°åÂ∑ÆÂºÇÊØîËæÉ„ÄÇ Áº∫ÁÇπÈô§‰∫ÜÂÉèCVSË∑üË∏™ÁõÆÂΩïÈÄ†Êàê‰ø°ÊÅØÊ≥ÑÈú≤ÔºåËøòÂØºËá¥Âä†ÂÄçÂç†Áî®Â∑•‰ΩúÂå∫ÁöÑÁ©∫Èó¥„ÄÇÂÜçÊúâÂ∞±ÊòØÂΩìÂú®Â∑•‰ΩúÂå∫ÁõÆÂΩï‰∏ãÈíàÂØπÊñá‰ª∂ÂÜÖÂÆπ ËøõË°åÊêúÁ¥¢Êó∂Ôºå‰ºöÂõ†‰∏∫.svnÁõÆÂΩï‰∏ãÊñá‰ª∂ÁöÑÂéüÂßãÊã∑Ë¥ùÔºåÂØºËá¥ÊêúÁ¥¢ÁöÑÁªìÊûúÂä†ÂÄçÔºåËÄåÂá∫Áé∞Ê∑∑‰π±ÁöÑÊêúÁ¥¢ÁªìÊûú„ÄÇ GitÁöÑËÆæËÆ°ÔºåÂ∞ÜÁâàÊú¨Â∫ìÊîæÂú®Â∑•‰ΩúÂå∫Ê†πÁõÆÂΩï‰∏ãÔºåÊâÄÊúâÁöÑÁâàÊú¨ÊéßÂà∂Êìç‰ΩúÔºàÈô§‰∫ÜÂíåËøúÁ®ãÁâàÊú¨Â∫ì‰πãÈó¥ÁöÑÁõ∏‰∫íÊìç‰ΩúÔºâÈÉΩÊòØÂú® Êú¨Âú∞Âç≥ÂèØÂÆåÊàêÔºå‰∏çÂêëSVNÂè™ÊúâÂØ•ÂØ•Âá†‰∏™ÂëΩ‰ª§ÊâçËÉΩËÑ±Á¶ªÁΩëÁªúÊâßË°å„ÄÇËÄå‰∏îGit‰πü‰∏çÂ≠òÂú®ÂÆâÂÖ®Ê≥ÑÈú≤ÔºàÂè™Ë¶Å‰øùÊä§Â•Ω.gitÁõÆÂΩïÔºâÔºå ‰πüÊ≤°ÊúâSVNÊú¨Âú∞Êñá‰ª∂ÊêúÁ¥¢ÁªìÊûúÊ∑∑‰π±ÁöÑÈóÆÈ¢òÔºåGitÁîöËá≥ËøòÊèê‰æõ‰∫Ü‰∏ÄÊù°git grepÂëΩ‰ª§Êù•Êõ¥Â•ΩÂú∞ÊêúÁ¥¢Â∑•‰ΩúÂå∫ÁöÑÊñá‰ª∂ÂÜÖÂÆπ„ÄÇ 1$ git grep &quot;Hello&quot; ÂΩìÂ∑•‰ΩúÂå∫‰∏≠ÂåÖÂê´Â≠êÁõÆÂΩïÔºåÂú®Â≠êÁõÆÂΩï‰∏≠ÊâßË°åGitÂëΩ‰ª§Êó∂ÔºåÂ¶Ç‰ΩïÂÆö‰ΩçÁâàÊú¨Â∫ìÔºü ÂÆûÈôÖ‰∏äÔºåGitÂ∑•‰ΩúÂå∫ÁõÆÂΩï‰∏ãÊâßË°åÊìç‰ΩúÊó∂Ôºå‰ºöÂØπÁõÆÂΩï‰æùÊ¨°Âêë‰∏äÈÄíÂΩíÊü•Êâæ.gitÁõÆÂΩïÔºåÊâæÂà∞.gitÁõÆÂΩïÂ∞±ÊòØÂ∑•‰ΩúÂå∫ÂØπÂ∫îÁöÑÁâàÊú¨Â∫ìÔºå.gitÊâÄÂú®ÁöÑÁõÆÂΩïÂ∞±ÊòØÂ∑•‰ΩúÂå∫ÁöÑÊ†πÁõÆÂΩïÔºåÊñá‰ª∂.git/indexËÆ∞ÂΩï‰∫ÜÂ∑•‰ΩúÂå∫Êñá‰ª∂ÁöÑÁä∂ÊÄÅÔºàÂÆûÈôÖ‰∏äÊòØÊöÇÂ≠òÂå∫ÁöÑÁä∂ÊÄÅÔºâ„ÄÇ ‰æãÂ¶ÇÔºåÂú®ÈùûGitÂ∑•‰ΩúÂå∫ÊâßË°ågitÂëΩ‰ª§Ôºå‰ºöÂõ†Êâæ‰∏çÂà∞.gitÁõÆÂΩïËÄåÊä•Èîô„ÄÇ 12$ cd /d/workspace/webstrom$ git status ÊÄéÊ†∑Ëé∑ÂèñGitÁâàÊú¨Â∫ìÁöÑ‰ΩçÁΩÆ‰ª•ÂèäÂ∑•‰ΩúÂå∫Ê†πÁõÆÂΩï‰ΩçÁΩÆÔºü ÂÖàÂú®Â∑•‰ΩúÂå∫‰∏ãÂª∫Á´ãÁõÆÂΩïa/b/cÔºåËøõÂÖ•ËØ•ÁõÆÂΩï‰∏≠„ÄÇ 12$ mkdir -p a/b/c`$ cd a/b/c ÊòæÁ§∫ÁâàÊú¨Â∫ì.gitÁõÆÂΩïÊâÄÂú®ÁöÑ‰ΩçÁΩÆ„ÄÇ 12$ git rev-parse --git-dirD:/workspace/git-demo/.git ÊòæÁ§∫Â∑•‰ΩúÂå∫Ê†πÁõÆÂΩï 12$ git rev-parse --show-toplevelD:/workspace/git-demo Áõ∏ÂØπ‰∫éÂ∑•‰ΩúÂå∫Ê†πÁõÆÂΩïÁöÑÁõ∏ÂØπÁõÆÂΩï 12$ git rev-parse --show-prefixa/b/c ÊòæÁ§∫‰ªéÂΩìÂâçÁõÆÂΩïÔºàcdÔºâÂêéÈÄÄÔºàupÔºâÂà∞Â∑•‰ΩúÂå∫ÁöÑÊ†πÁöÑÊ∑±Â∫¶„ÄÇ 12$ git rev-parse --show-cdup../../../ ÊÄùËÄÉÔºögit config ÂëΩ‰ª§ÂèÇÊï∞ÁöÑÂå∫Âà´Ôºü Âú®‰πãÂâç‰ΩøÁî®ËøáÁöÑgit configÂëΩ‰ª§ÔºåÊúâÁöÑ‰ΩøÁî®‰∫Ü--globalÂèÇÊï∞ÔºåÊúâÁöÑ‰ΩøÁî®‰∫Ü--systemÂèÇÊï∞ÔºåËøô‰∏§‰∏™ÂèÇÊï∞Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü ÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÔºåÂ∞ÜÊâìÂºÄD:/workspace/git-demo/.git/configÊñá‰ª∂ËøõË°åÁºñËæë„ÄÇ 12$ cd /d/workspace/git-demo/$ git config -e ÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÔºåÂ∞ÜÊâìÂºÄC:/Users/ASUS/.gitconfigÔºàÁî®Êà∑‰∏ªÁõÆÂΩï‰∏ãÁöÑ.gitconfigÊñá‰ª∂ÔºâÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂ËøõË°åÁºñËæë„ÄÇ 1$ git config -e --global ÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÔºåÂ∞ÜÊâìÂºÄE:/developerTools/git/mingw64/etc/gitconfigÁ≥ªÁªüÁ∫ßÈÖçÁΩÆÊñá‰ª∂ËøõË°åÁºñËæë„ÄÇ 1$ git config -e --system GitÁöÑ‰∏â‰∏™ÈÖçÁΩÆÊñá‰ª∂ÂàÜÂà´ÊòØÁâàÊú¨Â∫ìÁ∫ßÂà´ÁöÑÈÖçÁΩÆ„ÄÅÂÖ®Â±ÄÈÖçÁΩÆÔºàÁî®Êà∑‰∏ªÁõÆÂΩï‰∏ãÔºâÂíåÁ≥ªÁªüÁ∫ßÈÖçÁΩÆÔºàGitÂÆâË£ÖÁõÆÂΩï‰∏ãÔºâ„ÄÇ ÂÖ∂‰∏≠ÁâàÊú¨Â∫ìÁ∫ßÂà´ÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰ºòÂÖàÁ∫ßÊúÄÈ´òÔºåÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂Ê¨°‰πãÔºåÁ≥ªÁªüÁ∫ßÈÖçÁΩÆÊñá‰ª∂‰ºòÂÖàÁ∫ßÊúÄ‰Ωé„ÄÇËøôÊ†∑ÁöÑ‰ºòÂÖàÁ∫ßËÆæÁΩÆ ÂèØ‰ª•ËÆ©ÁâàÊú¨Â∫ì.gitÁõÆÂΩï‰∏ãÁöÑconfigÊñá‰ª∂‰∏≠ÁöÑÈÖçÁΩÆÂèØ‰ª•Ë¶ÜÁõñÁî®Êà∑‰∏ªÁõÆÂΩï‰∏ãÁöÑGitÁéØÂ¢ÉÈÖçÁΩÆÔºåËÄåÁî®Êà∑‰∏ªÁõÆÂΩï‰∏ãÁöÑÈÖçÁΩÆ‰πüÂèØ‰ª•Ë¶ÜÁõñÁ≥ªÁªüÁöÑGitÈÖçÁΩÆÊñá‰ª∂„ÄÇ ÊâßË°å‰πãÂâçÁöÑ‰∏â‰∏™git configÂëΩ‰ª§Ôºå‰ºöÁúãÂà∞Ëøô‰∏â‰∏™Á∫ßÂà´ÈÖçÁΩÆÊñá‰ª∂ÁöÑÊ†ºÂºèÂíåÂÜÖÂÆπÔºåÈááÁî®INIÊñá‰ª∂Ê†ºÂºè„ÄÇÂ¶Ç‰∏ãÔºö 12345678$ cat /d/workspace/git-demo/.git/config[core] repositoryformatversion = 0 filemode = false bare = false logallrefupdates = true symlinks = false ignorecase = true git configÂëΩ‰ª§ÂèØ‰ª•Áî®Êù•ËØªÂèñÂíåÊõ¥ÊîπINIÈÖçÁΩÆÊñá‰ª∂ÁöÑÂÜÖÂÆπ„ÄÇ‰ΩøÁî®git config &lt;section&gt;.&lt;key&gt;ÔºåÊù•ËØªÂèñINIÈÖçÁΩÆÊñá‰ª∂‰∏≠Êüê‰∏™ÈÖçÁΩÆÁöÑÈîÆÂÄº„ÄÇ‰æãÂ¶ÇËØªÂèñ[core]Â∞èËäÇÁöÑbareÁöÑÂ±ûÊÄßÂÄºÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö 12$ git config core.barefalse Â¶ÇÊûúÊÉ≥Ë¶ÅÊõ¥ÊîπÊàñÈÖçÁΩÆINIÊñá‰ª∂‰∏≠Êüê‰∏™Â±ûÊÄßÁöÑÂÄº‰πüÂæàÁÆÄÂçïÔºåÂëΩ‰ª§Ê†ºÂºèÔºögit config &lt;section&gt;.&lt;key&gt; &lt;value&gt;„ÄÇ 12$ git config a.b learningGit$ git config x.y.z something ÊâìÂºÄ.git/configÊñá‰ª∂‰ºöÁúãÂà∞Â¢ûÂä†ÁöÑÂÜÖÂÆπÔºö 1234[a] b = learningGit[x &quot;y&quot;] z = something ÊÄùËÄÉÔºöÊòØË∞ÅÊèê‰∫§ÁöÑÔºü Âú®‰∏ÄÂºÄÂßãÊàë‰ª¨‰∏∫GitËÆæÁΩÆ‰∫Üuser.nameÂíåuser.emailÂÖ®Â±ÄÁéØÂ¢ÉÂèòÈáèÔºåÂ¶ÇÊûú‰∏çËÆæÁΩÆ‰ºöÊÄéÊ†∑ÔºüÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÔºåÂà†Èô§GitÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂÖ≥‰∫éuser.nameÂíåuser.emailÁöÑËÆæÁΩÆÔºö 12$ git config --unset --global user.name$ git config --unset --global user.email ËøôÊ†∑ÂÖ≥‰∫éÁî®Êà∑ÂêçÂíåÈÇÆ‰ª∂ÁöÑËÆæÁΩÆÈÉΩË¢´Ê∏ÖÁ©∫‰∫ÜÔºåÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§Â∞ÜÁúã‰∏çÂà∞ËæìÂá∫ 12$ git config user.name$ git config user.email ‰∏ãÈù¢ÂÜçËøõË°å‰∏ÄÊ¨°Êèê‰∫§ÔºåÁúãÁúãÊèê‰∫§ËøáÁ®ãÊúâ‰ªÄ‰πà‰∏çÂêåÔºå‰ª•ÂèäÊèê‰∫§‰πãÂêéÊòæÁ§∫ÁöÑÊèê‰∫§ËÄÖÊòØË∞ÅÔºü 1$ git commit --allow-empty -m &quot;ËøôÊòØË∞ÅÊèê‰∫§ÁöÑÔºü&quot; ‰∏äÈù¢ÁöÑÂëΩ‰ª§‰ΩøÁî®‰∫Ü--allow-emptyÂèÇÊï∞ÔºåËøôÊòØÂõ†‰∏∫Ê≤°ÊúâÂØπÂ∑•‰ΩúÂå∫ÁöÑÊñá‰ª∂ËøõË°å‰ªª‰Ωï‰øÆÊîπÔºåGitÈªòËÆ§ÊòØ‰∏ç‰ºöÊâßË°åÊèê‰∫§Ôºå‰ΩøÁî®‰∫Ü--allow-emptyÂèÇÊï∞ÂêéÔºåÂÖÅËÆ∏ÊâßË°åÁ©∫ÁôΩÊèê‰∫§„ÄÇ ‰ªéÊèê‰∫§ÁªìÊûúÁúãÂà∞ÔºåÂõ†‰∏∫Ê≤°ÊúâËÆæÁΩÆuser.nameÂíåuser.emailÔºåÊèê‰∫§ÁªìÊûú‰∏≠GitÊèê‰æõ‰∫ÜËØ¶ÁªÜÁöÑÂ∏ÆÂä©ÊåáÂºïÊù•ÂëäËØâÂ¶Ç‰ΩïËÆæÁΩÆÂøÖÈ°ªÁöÑÂèòÈáèÔºå‰ª•ÂèäÂ¶Ç‰Ωï‰øÆÊîπ‰πãÂâçÊèê‰∫§‰∏≠Âá∫Áé∞ÁöÑÈîôËØØÁöÑÊèê‰∫§ËÄÖ‰ø°ÊÅØ„ÄÇ ‰∏∫‰∫Ü‰øùËØÅÊèê‰∫§Êó∂Êèê‰∫§ËÄÖÂíå‰ΩúËÄÖ‰ø°ÊÅØÁöÑÊ≠£Á°ÆÊÄßÔºåÈáçÊñ∞ÊÅ¢Â§çuser.nameÂíåuser.emailÁöÑËÆæÁΩÆ„ÄÇ 12$ git config --global user.name &quot;wanghongbo&quot;$ git config --global user.email youreamil@email.com ÁÑ∂ÂêéÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÔºåÈáçÊñ∞‰øÆÊîπÊúÄÊñ∞ÁöÑÊèê‰∫§Ôºå‰øÆÊ≠£Êèê‰∫§ËÄÖÁöÑÈîôËØØ‰ø°ÊÅØ„ÄÇ 1$ git commit --amend --allow-empty --reset-author ËØ¥ÊòéÔºö ÂèÇÊï∞--amendÊòØÂØπÂàöÂàöÁöÑÊèê‰∫§ËøõË°å‰øÆË°•ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊîπÊ≠£‰πãÂâçÈîôËØØÁöÑÊèê‰∫§ÔºåËÄå‰∏ç‰ºö‰∫ßÁîüÊñ∞ÁöÑÊèê‰∫§Ôºõ ÂèÇÊï∞--allow-emptyÊòØÂõ†‰∏∫Ë¶ÅËøõË°å‰øÆÊîπÁöÑÊèê‰∫§ÂÆûÈôÖ‰∏äÊòØ‰∏Ä‰∏™Á©∫ÁôΩÊèê‰∫§ÔºåGitÈªòËÆ§‰∏çÂÖÅËÆ∏Á©∫ÁôΩÊèê‰∫§Ôºõ ÂèÇÊï∞--reset-authorÁöÑÂê´‰πâÊòØÂ∞ÜÊèê‰∫§ËÄÖÁöÑIDÈáçÁΩÆÔºåÂê¶Âàô‰ºöÂΩ±ÂìçÊúÄÊñ∞ÁöÑCommitÁöÑID„ÄÇËøôÊù°ÂëΩ‰ª§‰πü‰ºöÈáçÁΩÆAuthorDateÁöÑ‰ø°ÊÅØ„ÄÇ ÈÄöËøáÊó•ÂøóÂèØ‰ª•ÁúãÂà∞Êèê‰∫§ËÄÖÁöÑ‰ø°ÊÅØÂ∑≤ÁªèÊîπÊ≠£‰∫Ü„ÄÇ 1$ git log --pretty=fuller]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~Ê£ÄÂá∫]]></title>
    <url>%2Fposts%2Fb27802af.html</url>
    <content type="text"><![CDATA[HEADÁöÑÈáçÁΩÆÂç≥Ê£ÄÂá∫ HEADÂèØ‰ª•ÁêÜËß£‰∏∫‚ÄúÂ§¥ÊåáÈíà‚ÄùÔºåÊòØÂΩìÂâçÂ∑•‰ΩúÂå∫ÁöÑ‚ÄúÂü∫Á°ÄÁâàÊú¨‚ÄùÔºåÂΩìÊâßË°åÊèê‰∫§Êó∂ÔºåHEADÊåáÂêëÁöÑÊèê‰∫§‰Ωú‰∏∫Êñ∞Êèê‰∫§ÁöÑÁà∂Êèê‰∫§„ÄÇÁúãÁúãÂΩìÂâçHEADÁöÑÊåáÂêë„ÄÇ 1$ cat .git/HEAD ÂèØ‰ª•ÁúãÂá∫HEADÊåáÂêë‰∫ÜÂàÜÊîØmasterÔºåÊ≠§Êó∂ÊâßË°ågit branch‰ºöÁúãÂà∞ÂΩìÂâçÂ§Ñ‰∫émasterÂàÜÊîØ„ÄÇ 1$ git branch -v Áé∞Âú®‰ΩøÁî®git checkoutÂëΩ‰ª§Ê£ÄÂá∫ËØ•IDÁöÑÁà∂Êèê‰∫§ÔºåÁúãÁúã‰ºöÊÄé‰πàÊ†∑„ÄÇ 1$ git checkout 23995a2 ÁøªËØë‰∏Ä‰∏ã‰∏äÈù¢ÁöÑËæìÂá∫ÁªìÊûúÔºö 12345678910$ git checkout 23995a2Ê≥®ÊÑèÔºöÊ≠£Âú®Ê£ÄÂá∫ &apos;23995a2&apos;.ÊÇ®Áé∞Âú®Â§Ñ‰∫é&apos;ÂàÜÁ¶ªÂ§¥ÊåáÈíà&apos;Áä∂ÊÄÅÔºåÊÇ®ÂèØ‰ª•Ê£ÄÊü•„ÄÅÊµãËØïÂíåÊèê‰∫§ÔºåËÄå‰∏çÂΩ±Âìç‰ªª‰ΩïÂàÜÊîØ„ÄÇÈÄöËøáÊâßË°åÂè¶Â§ñÁöÑ‰∏Ä‰∏™ checkout Ê£ÄÂá∫Êåá‰ª§‰ºö‰∏¢ÂºÉÂú®Ê≠§Áä∂ÊÄÅ‰∏ãÁöÑ‰øÆÊîπÂíåÊèê‰∫§„ÄÇÂ¶ÇÊûúÊÉ≥‰øùÁïôÂú®Ê≠§Áä∂ÊÄÅ‰∏ãÁöÑ‰øÆÊîπÂíåÊèê‰∫§Ôºå‰ΩøÁî® -b ÂèÇÊï∞Ë∞ÉÁî® checkout Ê£ÄÂá∫Êåá‰ª§‰ª•ÂàõÂª∫Êñ∞ÁöÑË∑üË∏™ÂàÜÊîØ„ÄÇÂ¶ÇÔºö git checkout -b new_branch_name Â§¥ÊåáÈíàÁé∞Âú®ÊåáÂêë 23995a2... Êèê‰∫§ËØ¥Êòé‰∏∫Ôºödoes master follow this new commit? ‰ªÄ‰πàÂè´ÂÅö‚ÄúÂàÜÁ¶ªÂ§¥ÊåáÈíà‚ÄùÁä∂ÊÄÅÔºüÊü•Áúã‰∏Ä‰∏ãÊ≠§Êó∂ÁöÑHEADÁöÑÂÜÖÂÆπÂ∞±ÊòéÁôΩ‰∫Ü„ÄÇ 12$ cat .git/HEAD23995a2d61d0a2667ba0db8aa4a17b127c1977d1 ÂéüÊù•‚ÄúÂàÜÁ¶ªÂ§¥ÊåáÈíà‚ÄùÁä∂ÊÄÅÊåáÁöÑÂ∞±ÊòØHEADÂ§¥ÊåáÈíàÊåáÂêë‰∫Ü‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÊèê‰∫§IDÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™ÂºïÁî®ÔºàÂàÜÊîØÔºâ„ÄÇ Êü•ÁúãÊúÄÊñ∞Êèê‰∫§ÁöÑreflog‰πüÂèØ‰ª•ÁúãÂà∞ÂΩìÈíàÂØπÊèê‰∫§ÊâßË°ågit checkoutÂëΩ‰ª§Êó∂ÔºåHEADÂ§¥ÊåáÈíàÂ∞±Ë¢´Êõ¥Êîπ‰∫ÜÔºöÁî±ÊåáÂêëmasterÂàÜÊîØÂèòÊàê‰∫ÜÊåáÂêë‰∏Ä‰∏™Êèê‰∫§ID„ÄÇ 12$ git reflog -l23995a2 (HEAD, master) HEAD@&#123;0&#125;: checkout: moving from master to 23995a2 Ê≥®ÊÑè‰∏äÈù¢ÁöÑreflogÊòØHEADÂ§¥ÊåáÈíàÁöÑÂèòËøÅËÆ∞ÂΩïÔºåËÄåÈùûmasterÂàÜÊîØ„ÄÇ Êü•Áúã‰∏Ä‰∏ãHEADÂíåmasterÂØπÂ∫îÁöÑÊèê‰∫§IDÔºå‰ºöÂèëÁé∞Áé∞Âú®ÂÆÉ‰ª¨ÊåáÂêëÁöÑ‰∏ç‰∏ÄÊ†∑„ÄÇ 1$ git rev-parse HEAD master Ââç‰∏Ä‰∏™ÊòØHEADÂ§¥ÊåáÈíàÁöÑÊåáÂêëÔºåÂêé‰∏Ä‰∏™ÊòØmasterÂàÜÊîØÁöÑÊåáÂêë„ÄÇËÄå‰∏îËøòÂèØ‰ª•ÁúãÂà∞ÊâßË°ågit checkoutÂëΩ‰ª§‰∏éÊâßË°ågit resetÂëΩ‰ª§‰∏çÂêåÔºåÂàÜÊîØ(master)ÁöÑÊåáÂêëÂπ∂Ê≤°ÊúâÊîπÂèòÔºå‰ªçÊóßÊåáÂêëÂéüÊúâÁöÑÊèê‰∫§ID„ÄÇ Áé∞Âú®ÁâàÊú¨Â∫ìÁöÑHEADÊòØÊåáÂêë23995aÊèê‰∫§ÁöÑÔºåÂÜçÂÅö‰∏ÄÊ¨°Êèê‰∫§ÔºåHEAD‰ºöÂ¶Ç‰ΩïÂèòÂåñÔºü ÂÖàÂÅö‰∏ÄÊ¨°‰øÆÊîπÔºöÂàõÂª∫‰∏Ä‰∏™Êñ∞Êñá‰ª∂detached-commit.txtÔºåÊ∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫‰∏≠„ÄÇ 12$ touch detached-commit.txt $ git add detached-commit.txt Áúã‰∏Ä‰∏ãÁä∂ÊÄÅÔºå‰ºöÂèëÁé∞ÂÖ∂‰∏≠Êúâ‚ÄúÂΩìÂâç‰∏çÂ§Ñ‰∫é‰ªª‰ΩïÂàÜÊîØ‚ÄùÁöÑÂ≠óÊ†∑ÔºåÊòæÁÑ∂ËøôÊòØÂõ†‰∏∫HEADÂ§Ñ‰∫é‚ÄúÂàÜÁ¶ªÂ§¥ÊåáÈíà‚ÄùÊ®°Âºè„ÄÇ 1$ git status ÊâßË°åÊèê‰∫§„ÄÇÂú®Êèê‰∫§ËæìÂá∫‰∏≠‰πü‰ºöÂá∫Áé∞[detached HEAD...]ÁöÑÊ†áËØÜÔºåËøô‰πüÊòØÂØπÁî®Êà∑ÁöÑË≠¶Á§∫„ÄÇ 1$ git commit -m &quot;commit in detached HEAD mode&quot; Ê≠§Êó∂Â§¥ÊåáÈíàÊåáÂêë‰∫ÜÊñ∞ÁöÑÊèê‰∫§„ÄÇ 12$ cat .git/HEAD1fe77f7b9993cd79b050826df1c73715cc1d1e45 ÂÜçÊü•Áúã‰∏Ä‰∏ãÊó•Âøó‰ºöÂèëÁé∞Êñ∞ÁöÑÊèê‰∫§ÊòØÂª∫Á´ãÂú®‰πãÂâçÁöÑÊèê‰∫§Âü∫Á°Ä‰∏äÁöÑ„ÄÇ 1$ git log --graph --oneline ËÆ∞‰∏ãÊñ∞ÁöÑÊèê‰∫§ID(1fe77f7b9993cd79b050826df1c73715cc1d1e45)ÔºåÁÑ∂Âêé‰ª•masterÂàÜÊîØÂêç‰Ωú‰∏∫ÂèÇÊï∞ÊâßË°ågit checkoutÂëΩ‰ª§Ôºå‰ºöÂàáÊç¢Âà∞masterÂàÜÊîØ‰∏ä„ÄÇ ÂàáÊç¢Âà∞masterÂàÜÊîØ‰∏äÔºåÂÜçÊ≤°Êúâ‰πãÂâçÂ§ßÊÆµÁöÑÊñáÂ≠óË≠¶Âëä„ÄÇ 1$ git checkout master Âõ†‰∏∫HEADÂ§¥ÊåáÈíàÈáçÊñ∞ÊåáÂêë‰∫ÜÂàÜÊîØÔºåËÄå‰∏çÊòØÂ§Ñ‰∫é‚ÄúÂàÜÁ¶ªÂ§¥ÊåáÈíàÊ®°Âºè‚Äù„ÄÇ 1$ cat .git/HEAD ÂàáÊç¢‰πãÂêéÔºå‰πãÂâçÊú¨Âú∞Âª∫Á´ãÁöÑdetached-commit.txtÊñá‰ª∂‰∏çËßÅ‰∫Ü„ÄÇ 12$ lsnew-commit.txt welcome.txt ÂàáÊç¢‰πãÂêéÔºåÂàöÊâçÁöÑÊèê‰∫§Êó•Âøó‰πü‰∏çËßÅ‰∫Ü„ÄÇ 1$ git log --graph --oneline ÂàöÊâçÁöÑÊèê‰∫§ËøòÂ≠òÂú®‰∫éÁâàÊú¨Â∫ìÁöÑÂØπË±°Â∫ì‰∏≠ÂêóÔºüÁúãÁúãÂàöÊâçËÆ∞‰∏ãÁöÑÊèê‰∫§ID„ÄÇ 1$ git show 1fe77 ÂèØ‰ª•ÁúãÂá∫Ëøô‰∏™Êèê‰∫§Áé∞Âú®‰ªçÂú®ÁâàÊú¨Â∫ì‰∏≠„ÄÇÁî±‰∫éËøô‰∏™Êèê‰∫§Ê≤°ÊúâË¢´‰ªª‰ΩïÂàÜÊîØË∑üË∏™Âà∞ÔºåÂõ†Ê≠§‰∏çËÉΩ‰øùËØÅËøô‰∏™Êèê‰∫§‰ºöÊ∞∏‰πÖÂ≠òÂú®„ÄÇÂÆûÈôÖ‰∏äÂΩìreflog‰∏≠Âê´ÊúâËØ•Êèê‰∫§ÁöÑÊó•ÂøóËøáÊúüÂêéÔºåËøô‰∏™Êèê‰∫§ÈöèÊó∂ÈÉΩ‰ºö‰ªéÁâàÊú¨Â∫ì‰∏≠ÂΩªÂ∫ïÊ∏ÖÈô§„ÄÇ ÊåΩÊïëÂàÜÁ¶ªÂ§¥ÊåáÈíà Âú®‚ÄúÂàÜÁ¶ªÂ§¥ÊåáÈíà‚ÄùÊ®°Âºè‰∏ãËøõË°åÁöÑÊµãËØïÊèê‰∫§Èô§‰∫Ü‰ΩøÁî®IDÔºà1fe77ÔºâËÆøÈóÆ‰πãÂ§ñÔºå‰∏çËÉΩÈÄöËøámasterÂàÜÊîØÊàñÂÖ∂‰ªñÂºïÁî®ËÆøÈóÆÂà∞„ÄÇÂ¶ÇÊûúËøô‰∏™Êèê‰∫§ÊòØmasterÂàÜÊîØÊâÄÈúÄÁöÑÔºåÈÇ£‰πàËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÔºü Â¶ÇÊûú‰ΩøÁî®git resetÔºåÁöÑÁ°ÆÂèØ‰ª•Â∞ÜmasterÂàÜÊîØÈáçÁΩÆÂà∞ËØ•ÊµãËØïÊèê‰∫§ÁöÑ1fe77Ôºå‰ΩÜËøôÂ∞±‰ºö‰∏¢ÊéâmasterÂàÜÊîØÂéüÂÖàÁöÑÊèê‰∫§23995a2„ÄÇ‰ΩøÁî®ÂêàÂπ∂Êìç‰Ωúgit mergeÂèØ‰ª•ÂÆûÁé∞‰∏§ËÄÖÁöÑÂÖºÈ°æ„ÄÇ ‰∏ãÈù¢ÁöÑÊìç‰Ωú‰ºöÂ∞ÜÊèê‰∫§1fe77ÂêàÂπ∂Âà∞masterÂàÜÊîØ‰∏≠Êù•ÔºåÂÖ∑‰ΩìÊìç‰ΩúÂ¶Ç‰∏ãÔºö Á°ÆËÆ§ÂΩìÂâçÂ§Ñ‰∫émasterÂàÜÊîØ„ÄÇ 1$ git branch -v ÊâßË°åÂêàÂπ∂Êìç‰ΩúÔºåÂ∞Ü1fe77Êèê‰∫§ÂêàÂπ∂Âà∞ÂΩìÂâçÂàÜÊîØ„ÄÇ 1$ git merge 1fe77 Â∑•‰ΩúÂå∫‰∏≠Â§ö‰∫Ü‰∏Ä‰∏™detached-commit.txtÊñá‰ª∂„ÄÇ Ê∑±ÂÖ•‰∫ÜËß£git checkoutÂëΩ‰ª§ git checkoutÊòØGitÂ∏∏Áî®ÁöÑÂëΩ‰ª§‰πã‰∏ÄÔºåÂêåÊó∂‰πüÊòØÂæàÂç±Èô©ÁöÑÂëΩ‰ª§ÔºåÂõ†‰∏∫ËøôÊù°ÂëΩ‰ª§‰ºöÈáçÂÜôÂ∑•‰ΩúÂå∫„ÄÇÊ£ÄÂá∫ÂëΩ‰ª§ÁöÑÁî®Ê≥ïÂ¶Ç‰∏ãÔºö 123Áî®Ê≥ï‰∏ÄÔºö git checkout [-q] [&lt;commit&gt;] [--] &lt;paths&gt;...Áî®Ê≥ï‰∫åÔºö git checkout [&lt;branch&gt;]Áî®Ê≥ï‰∏âÔºö git checkout [-m] [[-b|--orphan] &lt;new_branch&gt;] [&lt;start_point&gt;] Áî®Ê≥ï‰∏ÄÂíåÁî®Ê≥ï‰∫åÁöÑÂå∫Âà´Âú®‰∫éÔºåÁî®Ê≥ï‰∏ÄÂú®ÂëΩ‰ª§‰∏≠ÂåÖÂê´Ë∑ØÂæÑ&lt;paths&gt;„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçË∑ØÂæÑÂíåÂºïÁî®ÔºàÊàñËÄÖÊèê‰∫§IDÔºâÂêåÂêçËÄåÂèëÁîüÂÜ≤Á™ÅÔºåÂèØ‰ª•Âú®&lt;paths&gt;ÂâçÁî®‰∏§‰∏™ËøûÁª≠ÁöÑÁü≠Á∫ø‰Ωú‰∏∫ÂàÜÈöî„ÄÇ Á¨¨‰∏ÄÁßçÁî®Ê≥ïÁöÑ&lt;commit&gt;ÊòØÂèØÈÄâÈ°πÔºåÂ¶ÇÊûúÁúÅÁï•Áõ∏ÂΩì‰∫é‰ªéÊöÇÂ≠òÂå∫(index)ËøõË°åÊ£ÄÂá∫„ÄÇËøôÂíåÈáçÁΩÆÂëΩ‰ª§Â§ß‰∏çÁõ∏ÂêåÔºöÈáçÁΩÆÁöÑÈªòËÆ§ÂÄºÊòØHEADÔºåËÄåÊ£ÄÂá∫ÁöÑÈªòËÆ§ÂÄºÊòØÊöÇÂ≠òÂå∫„ÄÇ Âõ†Ê≠§ÈáçÁΩÆ‰∏ÄËà¨Áî®‰∫éÈáçÁΩÆÊöÇÂ≠òÂå∫(Èô§Èùû‰ΩøÁî®--hardÂèÇÊï∞ÔºåÂê¶Âàô‰∏çÈáçÁΩÆÂ∑•‰ΩúÂå∫)ÔºåËÄåÊ£ÄÂá∫ÂëΩ‰ª§‰∏ªË¶ÅÊòØË¶ÜÁõñÂ∑•‰ΩúÂå∫(Â¶ÇÊûú&lt;commit&gt;‰∏çÁúÅÁï•Ôºå‰πü‰ºöÊõøÊç¢ÊöÇÂ≠òÂå∫‰∏≠Áõ∏Â∫îÁöÑÊñá‰ª∂)„ÄÇ Áî®Ê≥ï‰∏Ä(ÂåÖÂê´‰∫ÜË∑ØÂæÑ&lt;paths&gt;ÁöÑÁî®Ê≥ï)‰∏ç‰ºöÊîπÂèòHEADÂ§¥ÊåáÈíàÔºå‰∏ªË¶ÅÊòØÁî®‰∫éÊåáÂÆöÁâàÊú¨ÁöÑÊñá‰ª∂Ë¶ÜÁõñÂ∑•‰ΩúÂå∫‰∏≠ÂØπÂ∫îÁöÑÊñá‰ª∂„ÄÇÂ¶ÇÊûúÁúÅÁï•&lt;commit&gt;ÔºåÂàô‰ºöÁî®ÊöÇÂ≠òÂå∫ÁöÑÊñá‰ª∂Ë¶ÜÁõñÂ∑•‰ΩúÂå∫ÁöÑÊñá‰ª∂ÔºåÂê¶ÂàôÁî®ÊåáÂÆöÊèê‰∫§‰∏≠ÁöÑÊñá‰ª∂Ë¶ÜÁõñÊöÇÂ≠òÂå∫ÂíåÂ∑•‰ΩúÂå∫‰∏≠ÂØπÂ∫îÁöÑÊñá‰ª∂„ÄÇ Áî®Ê≥ï‰∫å(‰∏ç‰ΩøÁî®Ë∑ØÂæÑ&lt;paths&gt;ÁöÑÁî®Ê≥ï)Âàô‰ºöÊîπÂèòHEADÂ§¥ÊåáÈíà„ÄÇ‰πãÊâÄ‰ª•ÂêéÈù¢ÁöÑÂèÇÊï∞ÂÜô‰Ωú&lt;branch&gt;ÔºåÊòØÂõ†‰∏∫Âè™ÊúâHEADÂàáÊç¢‰∏Ä‰∏™ÂàÜÊîØÊâçÂèØ‰ª•ÂØπÊèê‰∫§ËøõË°åË∑üË∏™ÔºåÂê¶Âàô‰ªçÁÑ∂‰ºöËøõÂÖ•‚ÄúÂàÜÁ¶ªÂ§¥ÊåáÈíà‚ÄùÁä∂ÊÄÅ„ÄÇÂú®‚ÄúÂàÜÁ¶ªÂ§¥ÊåáÈíà‚ÄùÁä∂ÊÄÅ‰∏ãÁöÑÊèê‰∫§‰∏çËÉΩË¢´ÂºïÁî®ÂÖ≥ËÅîÂà∞Ôºå‰ªéËÄåÂèØËÉΩ‰∏¢Â§±„ÄÇ Áî®Ê≥ï‰∫åÁöÑÊúÄ‰∏ªË¶Å‰ΩúÁî®Â∞±ÊòØÂàáÊç¢Âà∞ÂàÜÊîØ„ÄÇÂ¶ÇÊûúÁúÅÁï•&lt;branch&gt;ÂàôÁõ∏ÂΩì‰∫éÂØπÂ∑•‰ΩúÂå∫ËøõË°åÁä∂ÊÄÅÊ£ÄÊü•„ÄÇ Áî®Ê≥ï‰∏â‰∏ªË¶ÅÊòØÂàõÂª∫ÂíåÂàáÊç¢Âà∞Êñ∞ÂàÜÊîØ(&lt;new_branch&gt;)ÔºåÊñ∞ÁöÑÂàÜÊîØ‰ªé&lt;start_point&gt;ÊåáÂÆöÁöÑÊèê‰∫§ÂºÄÂßãÂàõÂª∫„ÄÇÊñ∞ÂàÜÊîØÂíåÊàë‰ª¨ÁÜüÊÇâÁöÑmasterÂàÜÊîØÊ≤°Êúâ‰ªÄ‰πàÂÆûË¥®ÁöÑ‰∏çÂêåÔºåÈÉΩÊòØÂú®refs/headsÂëΩÂêçÁ©∫Èó¥‰∏ãÂºïÁî®„ÄÇ]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~ÂÆâË£Ö]]></title>
    <url>%2Fposts%2Ffe22a4f2.html</url>
    <content type="text"><![CDATA[ÊúÄÊó©GitÊòØÂú®Linux‰∏äÂºÄÂèëÁöÑÔºåÂæàÈïø‰∏ÄÊÆµÊó∂Èó¥ÂÜÖÔºåGit‰πüÂè™ËÉΩÂú®LinuxÂíåUnixÁ≥ªÁªü‰∏äË∑ë„ÄÇÂêéÊù•Êúâ‰∫∫ÊääÂÆÉÁßªÊ§çÂà∞‰∫ÜWindows‰∏ä„ÄÇÁé∞Âú®ÔºåGitÂèØ‰ª•Âú®Linux„ÄÅUnix„ÄÅMacÂíåWindowsËøôÂá†Â§ßÂπ≥Âè∞‰∏äÊ≠£Â∏∏ËøêË°å‰∫Ü„ÄÇ Ë¶Å‰ΩøÁî®GitÔºåÁ¨¨‰∏ÄÊ≠•ÂΩìÁÑ∂ÊòØÂÆâË£ÖGit‰∫Ü„ÄÇÊ†πÊçÆ‰Ω†‰ΩøÁî®ÁöÑÊìç‰ΩúÁ≥ªÁªüÂ¶Ç‰∏ãÔºö Linux‰∏äÂÆâË£ÖGit È¶ñÂÖàÔºå‰Ω†ÂèØ‰ª•ËØïÁùÄËæìÂÖ•gitÔºåÁúãÁúãÁ≥ªÁªüÊúâÊ≤°ÊúâÂÆâË£ÖGitÔºö 123$ gitThe program &apos;git&apos; is currently not installed. You can install it by typing:sudo apt-get install git ÂÉè‰∏äÈù¢ÁöÑÂëΩ‰ª§ÔºåÊúâÂæàÂ§öLinux‰ºöÂèãÂ•ΩÂú∞ÂëäËØâ‰Ω†GitÊ≤°ÊúâÂÆâË£ÖÔºåËøò‰ºöÂëäËØâ‰Ω†Â¶Ç‰ΩïÂÆâË£ÖGit„ÄÇ Â¶ÇÊûú‰Ω†Áî®ÁöÑÊòØDebianÊàñUbuntu LinuxÔºåÈÄöËøá sudo apt-get install git Â∞±ÂèØ‰ª•Áõ¥Êé•ÂÆåÊàêGitÁöÑÂÆâË£ÖÔºåÈùûÂ∏∏ÁÆÄÂçï„ÄÇ ËÄÅ‰∏ÄÁÇπÁöÑDebianÊàñUbuntu LinuxÔºåË¶ÅÊääÂëΩ‰ª§Êîπ‰∏∫sudo apt-get install git-coreÔºåÂõ†‰∏∫‰ª•ÂâçÊúâ‰∏™ËΩØ‰ª∂‰πüÂè´GITÔºàGNU Interactive ToolsÔºâÔºåÁªìÊûúGitÂ∞±Âè™ËÉΩÂè´git-core‰∫Ü„ÄÇÁî±‰∫éGitÂêçÊ∞îÂÆûÂú®Â§™Â§ßÔºåÂêéÊù•Â∞±ÊääGNU Interactive ToolsÊîπÊàêgnuitÔºågit-coreÊ≠£ÂºèÊîπ‰∏∫git„ÄÇ Â¶ÇÊûúÊòØÂÖ∂‰ªñLinuxÁâàÊú¨ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøáÊ∫êÁ†ÅÂÆâË£Ö„ÄÇÂÖà‰ªéGitÂÆòÁΩë‰∏ãËΩΩÊ∫êÁ†ÅÔºåÁÑ∂ÂêéËß£ÂéãÔºå‰æùÊ¨°ËæìÂÖ•Ôºö./configÔºåmakeÔºåsudo make installËøôÂá†‰∏™ÂëΩ‰ª§ÂÆâË£ÖÂ∞±Â•Ω‰∫Ü„ÄÇ Mac OS X‰∏äÂÆâË£ÖGit Êúâ‰∏§ÁßçÂÆâË£ÖGitÁöÑÊñπÊ≥ï: ‰∏ÄÊòØÂÆâË£ÖhomebrewÔºåÁÑ∂ÂêéÈÄöËøáhomebrewÂÆâË£ÖGitÔºåÂÖ∑‰ΩìÊñπÊ≥ïËØ∑ÂèÇËÄÉhomebrewÁöÑÊñáÊ°£„ÄÇ Á¨¨‰∫åÁßçÊñπÊ≥ïÊõ¥ÁÆÄÂçïÔºåÁõ¥Êé•‰ªéAppStoreÂÆâË£ÖXcodeÔºåXcodeÈõÜÊàê‰∫ÜGitÔºå‰∏çËøáÈªòËÆ§Ê≤°ÊúâÂÆâË£ÖÔºå‰Ω†ÈúÄË¶ÅËøêË°åXcodeÔºåÈÄâÊã©ËèúÂçï‚ÄúXcode‚Äù-&gt;‚ÄúPreferences‚ÄùÔºåÂú®ÂºπÂá∫Á™óÂè£‰∏≠ÊâæÂà∞‚ÄúDownloads‚ÄùÔºåÈÄâÊã©‚ÄúCommand Line Tools‚ÄùÔºåÁÇπ‚ÄúInstall‚ÄùÂ∞±ÂèØ‰ª•ÂÆåÊàêÂÆâË£Ö‰∫Ü„ÄÇ XcodeÊòØAppleÂÆòÊñπIDEÔºåÂäüËÉΩÈùûÂ∏∏Âº∫Â§ßÔºåÊòØÂºÄÂèëMacÂíåiOS AppÁöÑÂøÖÈÄâË£ÖÂ§áÔºåËÄå‰∏îÊòØÂÖçË¥πÁöÑÔºÅ Windows‰∏äÂÆâË£ÖGit Âú®Windows‰∏ä‰ΩøÁî®GitÔºåÂèØ‰ª•‰ªéGitÂÆòÁΩëÁõ¥Êé•‰∏ãËΩΩÂÆâË£ÖÁ®ãÂ∫èÔºåÁÑ∂ÂêéÊåâÈªòËÆ§ÈÄâÈ°πÂÆâË£ÖÂç≥ÂèØ„ÄÇ ÂÆâË£ÖÂÆåÊàêÂêéÔºåÂú®ÂºÄÂßãËèúÂçïÈáåÊâæÂà∞‚ÄúGit‚Äù-&gt;‚ÄúGit Bash‚ÄùÔºåËπ¶Âá∫‰∏Ä‰∏™Á±ª‰ººÂëΩ‰ª§Ë°åÁ™óÂè£ÁöÑ‰∏úË•øÔºåÂ∞±ËØ¥ÊòéGitÂÆâË£ÖÊàêÂäüÔºÅ ÂÆâË£ÖÂÆåÊàêÂêéÔºåËøòÈúÄË¶ÅÊúÄÂêé‰∏ÄÊ≠•ËÆæÁΩÆÔºåÂú®ÂëΩ‰ª§Ë°åËæìÂÖ•Ôºö 12$ git config --global user.name &quot;Your Name&quot;$ git config --global user.email &quot;email@example.com&quot; Ê≥®ÊÑègit configÂëΩ‰ª§ÁöÑ--globalÂèÇÊï∞ÔºåÁî®‰∫ÜËøô‰∏™ÂèÇÊï∞ÔºåË°®Á§∫‰Ω†ËøôÂè∞Êú∫Âô®‰∏äÊâÄÊúâÁöÑGit‰ªìÂ∫ìÈÉΩ‰ºö‰ΩøÁî®Ëøô‰∏™ÈÖçÁΩÆÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•ÂØπÊüê‰∏™‰ªìÂ∫ìÊåáÂÆö‰∏çÂêåÁöÑÁî®Êà∑ÂêçÂíåEmailÂú∞ÂùÄ„ÄÇ GitÂèØ‰ª•ÂÆâË£ÖÂú®Âì™‰∫õÊìç‰ΩúÁ≥ªÁªü‰∏äÔºü [x] Linux [x] macOS [x] Solaris [x] Windows [x] Raspberry Pi [x] Submit]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitÂ≠¶‰π†‰πã~Áà±‰∏äGitÁöÑÁêÜÁî±]]></title>
    <url>%2Fposts%2Fd9014d70.html</url>
    <content type="text"><![CDATA[Áé∞Âú∫ÁâàÊú¨ÊéßÂà∂ Áé∞Âú∫ÁâàÊú¨Â∫ìÂàõÂª∫„ÄÇ Áõ¥Êé•Âú®ÈúÄË¶ÅÁâàÊú¨ÊéßÂà∂ÁöÑÁõÆÂΩï‰∏ãÊâßË°åGitÁâàÊú¨Â∫ìÂàùÂßãÂåñÂëΩ‰ª§„ÄÇ 1git init Ê∑ªÂä†Êñá‰ª∂Âπ∂Êèê‰∫§ 12git add -Agit commit -m &quot;Êú¨Ê¨°Êèê‰∫§ÁöÑÂÜÖÂÆπÊèèËø∞&quot; ‰∏∫ÂàùÂßãÊèê‰∫§Âª∫Á´ã‰∏Ä‰∏™ÈáåÁ®ãÁ¢ëÔºö&quot;v1&quot; 1git tag v1 ÁÑ∂ÂêéÂºÄÂßãÂú®Â∑•‰ΩúÂå∫‰∏≠Â∑•‰Ωú--‰øÆÊîπÊñá‰ª∂ÔºåÊèê‰∫§ 1git commit -a ÂΩìÂØπ‰øÆÊîπÁªìÊûúÊª°ÊÑèÔºåÊÉ≥Â∞ÜÂ∑•‰ΩúÊàêÂäü‰øùÂ≠òÂ∏¶Ëµ∞Êó∂ÔºåÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÔºåÂ∞Ü‰ªév1ÂºÄÂßãÁöÑÂéÜÊ¨°Êèê‰∫§ ÈÄê‰∏ÄÂØºÂá∫‰∏∫Ë°•‰∏ÅÊñá‰ª∂„ÄÇËΩ¨Êç¢ÁöÑË°•‰∏ÅÊñá‰ª∂ÈÉΩÂåÖÂê´‰∏Ä‰∏™Êï∞Â≠óÂâçÁºÄÔºåÂπ∂ÊèêÂèñÊèê‰∫§Êó•Âøó‰ø°ÊÅØ‰Ωú‰∏∫Êñá‰ª∂ÂêçÔºåËÄå‰∏îË°•‰∏ÅÊñá‰ª∂ ËøòÊèê‰æõÂØπ‰∫åËøõÂà∂Êñá‰ª∂ÁöÑÊîØÊåÅ„ÄÇ 1git format-patch v1..HEAD ÈÄöËøáÈÇÆ‰ª∂Â∞ÜË°•‰∏ÅÊñá‰ª∂ÂèëÂá∫„ÄÇÂΩìÁÑ∂‰πüÂèØ‰ª•ÈÄöËøáÂÖ∂‰ªñÊñπÂºèÂ∞ÜË°•‰∏ÅÊñá‰ª∂Â∏¶Ëµ∞„ÄÇ 1git send-email *.patch GitÂàõÂª∫ÁöÑË°•‰∏ÅÊñá‰ª∂‰ΩøÁî®‰∫ÜGitÊâ©Â±ïÊ†ºÂºèÔºåÂõ†Ê≠§Âú®ÂØºÂÖ•Êó∂‰∏∫‰∫ÜÈÅøÂÖçÊï∞ÊçÆÈÅóÊºèÔºåË¶Å‰ΩøÁî®GitÊèê‰æõÁöÑÂëΩ‰ª§ËÄå‰∏çËÉΩ ‰ΩøÁî®GNU patchÂëΩ‰ª§„ÄÇÂç≥Êó∂Ë¶ÅÂØºÂÖ•ÁöÑ‰∏çÊòØGitÁâàÊú¨Â∫ìÔºå‰πüÂèØ‰ª•‰ΩøÁî®GitÂëΩ‰ª§„ÄÇ ‰øÆÊîπÊèê‰∫§ËØ¥Êòé 1git commit --amend Ëøô‰∏™ÂëΩ‰ª§Â¶ÇÊûú‰∏çÂ∏¶&quot;-m&quot;ÂèÇÊï∞Ôºå‰ºöËøõÂÖ•Êèê‰∫§Êèê‰∫§ËØ¥ÊòéÁºñËæëÁïåÈù¢Ôºå‰øÆÊîπÂéüÊù•ÁöÑÊèê‰∫§ËØ¥ÊòéÔºåÁõ¥Âà∞Êª°ÊÑè‰∏∫Ê≠¢„ÄÇ Â¶ÇÊûúË¶Å‰øÆÊîπÊüê‰∏™ÂéÜÂè≤Êèê‰∫§ÁöÑÊèê‰∫§ËØ¥ÊòéÔºåGit‰πüÂèØ‰ª•ÂÆûÁé∞Ôºå‰ΩÜË¶ÅÁî®Âà∞Âè¶‰∏Ä‰∏™ÂëΩ‰ª§ÔºöÂèòÂü∫ÂëΩ‰ª§„ÄÇ ‰æãÂ¶ÇË¶Å‰øÆÊîπ&lt;commit-id&gt;ÊâÄÊ†áËØÜÊèê‰∫§ÁöÑÊèê‰∫§ËØ¥ÊòéÔºåÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÔºåÂπ∂Âú®ÂºπÂá∫ÁöÑÂèòÂü∫Á¥¢ÂºïÊñá‰ª∂‰∏≠ ‰øÆÊîπÁõ∏Â∫îÊèê‰∫§ÂâçÈù¢ÁöÑÂä®‰ΩúÁöÑÂÖ≥ÈîÆÂ≠ó„ÄÇ 1git rebase -i &lt;commit-id&gt;^ Âà†Èô§‰∏çÂ∫îÊèê‰∫§ÁöÑÊñá‰ª∂ 12git rm --cached Êñá‰ª∂Âêçgit commit --amend Â¶ÇÊûúÊòØÂéÜÂè≤ÁâàÊú¨Ôºå‰æãÂ¶ÇÊòØÂú®&lt;commit-id&gt;ÊâÄÊ†áËØÜÁöÑÊèê‰∫§‰∏≠ÂºïÂÖ•ÁöÑÊñá‰ª∂ÔºåÂàôÈúÄË¶Å‰ΩøÁî®ÂèòÂü∫Êìç‰Ωú„ÄÇ 1git rebase -i &lt;commit-id&gt;^ Êõ¥Â•ΩÁî®ÁöÑÊèê‰∫§ÂàóË°® git add ÂëΩ‰ª§Â∞Ü‰øÆÊîπÂÜÖÂÆπÂä†ÂÖ•Êèê‰∫§ÊöÇÂ≠òÂå∫„ÄÇ git add -u ÂëΩ‰ª§ÂèØ‰ª•Â∞ÜÊâÄÊúâ‰øÆÊîπËøáÁöÑÊñá‰ª∂Âä†ÂÖ•ÊöÇÂ≠òÂå∫„ÄÇ git add -A ÂëΩ‰ª§ÂèØ‰ª•Â∞ÜÊú¨Âú∞Âà†Èô§Êñá‰ª∂ÂíåÊñ∞Â¢ûÊñá‰ª∂ÈÉΩÁôªËÆ∞Âà∞ÊöÇÂ≠òÂå∫„ÄÇ git add -p ÂëΩ‰ª§ÁîöËá≥ÂèØ‰ª•ÂØπ‰∏Ä‰∏™Êñá‰ª∂ÂÜÖÁöÑ‰øÆÊîπËøõË°åÊúâÈÄâÊã©ÊÄßÁöÑÊ∑ªÂä†„ÄÇ ‰∏Ä‰∏™‰øÆÊîπÂêéÁöÑÊñá‰ª∂Ë¢´ÁôªËÆ∞Âà∞Êèê‰∫§ÊöÇÂ≠òÂå∫ÂêéÔºåÂèØ‰ª•ÁªßÁª≠‰øÆÊîπÔºåÁªßÁª≠‰øÆÊîπÁöÑÂÜÖÂÆπ‰∏ç‰ºöË¢´Êèê‰∫§ÔºåÈô§ÈùûÂÜçÂØπÊ≠§Êñá‰ª∂ ÂÜçÊâßË°å‰∏ÄÊ¨° git add ÂëΩ‰ª§„ÄÇÂç≥‰∏Ä‰∏™‰øÆÊîπÊñá‰ª∂ÂèØ‰ª•Êã•Êúâ‰∏§‰∏™ÁâàÊú¨ÔºåÂú®Êèê‰∫§ÊöÇÂ≠òÂå∫‰∏≠Êúâ‰∏Ä‰∏™ÁâàÊú¨ÔºåÂú®Â∑•‰ΩúÂå∫ ‰∏≠ÊúâÂè¶Â§ñ‰∏Ä‰∏™ÁâàÊú¨„ÄÇ ÊâßË°å git commitÂëΩ‰ª§Êèê‰∫§ÔºåÊó†È°ªËÆæÂÆö‰ªÄ‰πàÂèòÊõ¥ÂàóË°®ÔºåÁõ¥Êé•Â∞ÜÁôªËÆ∞Âú®ÊöÇÂ≠òÂå∫‰∏≠ÁöÑÂÜÖÂÆπÊèê‰∫§„ÄÇ GitÊîØÊåÅÂØπÊèê‰∫§ÁöÑÊí§ÈîÄÔºåËÄå‰∏îÂèØ‰ª•Êí§ÈîÄ‰ªªÊÑèÂ§öÊ¨°„ÄÇ Â∑•‰ΩúËøõÂ∫¶‰øùÂ≠ò Â¶ÇÊûúÂ∑•‰ΩúÂå∫ÁöÑ‰øÆÊîπÂ∞öÊú™ÂÆåÊàêÊó∂ÔºåÂøΩÁÑ∂Êúâ‰∏Ä‰∏™Á¥ßÊÄ•ÁöÑ‰ªªÂä°ÔºåÈúÄË¶Å‰ªé‰∏Ä‰∏™Âπ≤ÂáÄÁöÑÂ∑•‰ΩúÂå∫ÂºÄÂßãÊñ∞ÁöÑÂ∑•‰ΩúÔºå ÊàñËÄÖË¶ÅÂàáÊç¢Âà∞Âà´ÁöÑÂàÜÊîØËøõË°åÂ∑•‰ΩúÔºåÈÇ£‰πàÂ¶ÇÊûú‰øùÂ≠òÂΩìÂâçÂ∞öÊú™ÂÆåÊàêÁöÑÂ∑•‰ΩúËøõÂ∫¶Âë¢Ôºü 1git stash Âú®ÂàáÊç¢Âà∞Êñ∞ÁöÑÂ∑•‰ΩúÂàÜÊîØ‰πãÂâçÔºåÊâßË°å git stash ‰øùÂ≠òÂ∑•‰ΩúËøõÂ∫¶ÔºåÂ∑•‰ΩúÂå∫‰ºöÂèòÁöÑÈùûÂ∏∏Âπ≤ÂáÄÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ÂàáÊç¢Âà∞Êñ∞ÁöÑÂàÜÊîØ„ÄÇ 12git stash git checkout &lt;new_branch&gt; Êñ∞ÁöÑÂ∑•‰ΩúÂàÜÊîØ‰øÆÊîπÂÆåÊØïÂêéÔºåÂÜçÂàáÊç¢ÂõûÂΩìÂâçÂàÜÊîØÔºåË∞ÉÁî® git stash pop ÂëΩ‰ª§ÂàôÂèØÊÅ¢Â§ç‰πãÂâç‰øùÂ≠òÁöÑÂ∑•‰ΩúËøõÂ∫¶„ÄÇ 12git checkout &lt;orignal_branch&gt;git stash pop Êõ¥Â•ΩÁöÑÂ∑ÆÂºÇÊØîËæÉ GitÂØπÂ∑ÆÂºÇÊØîËæÉËøõË°å‰∫ÜÊâ©Â±ïÔºåÊîØÊåÅÂØπ‰∫åËøõÂà∂Êñá‰ª∂ÁöÑÂ∑ÆÂºÇÊØîËæÉÔºåËøôÊòØÂØπGNUÁöÑ diff Âíå patch ÂëΩ‰ª§ÁöÑÈáçË¶ÅË°•ÂÖÖ„ÄÇ ËøòÊúâGitÁöÑÂ∑ÆÂºÇÊØîËæÉÈô§‰∫ÜÊîØÊåÅÂü∫‰∫éË°åÁöÑÂ∑ÆÂºÇÊØîËæÉÂ§ñÔºåËøòÊîØÊåÅÂú®‰∏ÄË°åÂÜÖÈÄêÂ≠óÊØîËæÉÁöÑÊñπÂºèÔºåÂΩìÂêë git diff ÂëΩ‰ª§ ‰º†ÈÄí --word-diff ÂèÇÊï∞Êó∂ÔºåÂ∞±‰ºöËøõË°åÈÄêÂ≠óÊØîËæÉ„ÄÇ Âú®‰∏äÈù¢‰ªãÁªç‰∫ÜÂ∑•‰ΩúÂå∫ÁöÑÊñá‰ª∂‰øÆÊîπÂèØËÉΩ‰ºöÊúâ‰∏§‰∏™‰∏çÂêåÁöÑÁâàÊú¨Ôºå‰∏Ä‰∏™ÊòØÂú®Êèê‰∫§ÊöÇÂ≠òÂå∫Ôºå‰∏Ä‰∏™ÊòØÂú®Â∑•‰ΩúÂå∫„ÄÇÂõ†Ê≠§Âú® ÊâßË°å git diff ÂëΩ‰ª§Êó∂‰ºöÈÅáÂà∞‰ª§GitÊñ∞ÊâãË¥πËß£ÁöÑÁé∞Ë±°„ÄÇ ‰øÆÊîπÂêéÁöÑÊñá‰ª∂Âú®ÊâßË°å git diff ÂëΩ‰ª§Êó∂‰ºöÁúãÂà∞‰øÆÊîπÈÄ†ÊàêÁöÑÂ∑ÆÂºÇ„ÄÇ ‰øÆÊîπÂêéÁöÑÊñá‰ª∂ÈÄöËøá git add ÂëΩ‰ª§Êèê‰∫§Âà∞ÊöÇÂ≠òÂå∫ÔºåÂÜçÊâßË°å git diff ÂëΩ‰ª§‰ºöÁúã‰∏çÂà∞ËØ•Êñá‰ª∂ÁöÑÂ∑ÆÂºÇ„ÄÇ ÊâßË°å git diff --cached ÂëΩ‰ª§ÊâçÂèØ‰ª•ÁúãÂà∞Ê∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫‰∏≠ÁöÑÊñá‰ª∂ÊâÄÂÅöÂá∫ÁöÑ‰øÆÊîπ„ÄÇ Êó†Â§Ñ‰∏çÂú®ÁöÑÂàÜÈ°µÂô® ÂàÜÈ°µÂô®ÈªòËÆ§‰ΩøÁî® lessÂëΩ‰ª§Ôºàless -FRSXÔºâËøõË°åÂàÜÈ°µ„ÄÇ ‰∏ãÈù¢ÊòØÂú®ÂàÜÈ°µÂô®‰∏≠Â∏∏Áî®ÁöÑÁÉ≠ÈîÆÔºö Â≠óÊØçqÔºöÈÄÄÂá∫ÂàÜÈ°µÂô®Ôºõ Â≠óÊØçhÔºöÊòæÁ§∫ÂàÜÈ°µÂô®Â∏ÆÂä©Ôºõ ÊåâÁ©∫Ê†º‰∏ãÁøª‰∏ÄÈ°µÔºåÊåâÂ≠óÊØçb‰∏äÁøª‰∏ÄÈ°µÔºõ Â≠óÊØçdÂíåuÔºöÂàÜÂà´‰ª£Ë°®Âêë‰∏ãÁøªÂä®ÂçäÈ°µÂíåÂêë‰∏äÁøªÂä®ÂçäÈ°µÔºõ Â≠óÊØçjÂíåkÔºöÂàÜÂà´‰ª£Ë°®Âêë‰∏äÁøª‰∏ÄË°åÂíåÂêë‰∏ãÁøª‰∏ÄË°åÔºõ Â¶ÇÊûúË°åÂ§™ÈïøË¢´Êà™Êñ≠ÔºåÂèØ‰ª•Áî®Â∑¶ÁÆ≠Â§¥ÂíåÂè≥ÁÆ≠Â§¥‰ΩøÂæóÁ™óÂè£ÂÜÖÂÆπÂ∑¶Âè≥ÊªöÂä®Ôºõ ËæìÂÖ•/patternÔºöÂêë‰∏ãÂØªÊâæÂíåpatternÂåπÈÖçÁöÑÂÜÖÂÆπÔºõ ËæìÂÖ•?patternÔºöÂêë‰∏äÂØªÊâæÂíåpatternÂåπÈÖçÁöÑÂÜÖÂÆπÔºõ Â≠óÊØçnÊàñNÔºö‰ª£Ë°®ÂêëÂâçÊàñÂêëÂêéÁªßÁª≠ÂØªÊâæÔºõ Â≠óÊØçgÔºöË∑≥Âà∞Á¨¨‰∏ÄË°åÔºõ Â≠óÊØçGÔºöË∑≥Âà∞ÊúÄÂêé‰∏ÄË°åÔºõ ËæìÂÖ•Êï∞Â≠óÂÜçÂä†Â≠óÊØçgÔºöÂàôË∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑË°åÔºõ ËæìÂÖ•!&lt;command&gt;ÔºöÂèØ‰ª•ÊâßË°åShellÂëΩ‰ª§„ÄÇ ÂØπ‰∫éÈªòËÆ§Êú™Êèê‰æõÂàÜÈ°µÂô®ÁöÑGitÂëΩ‰ª§Ôºå‰æãÂ¶Ç git status ÂëΩ‰ª§ÔºåÂèØÈÄöËøá‰∏ãÈù¢‰ªª‰∏ÄÊñπÊ≥ïÂêØÁî®ÂàÜÈ°µÂô®Ôºö Âú® git ÂíåÂ≠êÂëΩ‰ª§(Â¶ÇÔºöstatus)‰πãÈó¥ÊèíÂÖ•ÂèÇÊï∞-pÊàñ--paginateÔºå‰∏∫ÂëΩ‰ª§ÂêØÁî®ÂÜÖÂª∫ÂàÜÈ°µÂô®„ÄÇÂ¶ÇÔºö 1git -p status -ËÆæÁΩÆGitÂèòÈáèÔºåËÆæÁΩÆÂÆåÊØïÂêéËøêË°åÁõ∏Â∫îÁöÑÂëΩ‰ª§ÔºåÂ∞ÜÂêØÁî®ÂÜÖÂª∫ÂàÜÈ°µÂô®„ÄÇ 1git config --global pager.status true Git ÂëΩ‰ª§ÁöÑÂàÜÈ°µÂô®ÊîØÊåÅÂ∏¶È¢úËâ≤ÁöÑÂ≠óÁ¨¶ËæìÂá∫ÔºåÂØπ‰∫éÂ§™ÈïøÁöÑË°åÂàôÈááÁî®Êà™Êñ≠ÊñπÂºèÂ§ÑÁêÜÔºàÂèØÁî®Â∑¶Âè≥ÊñπÂêëÈîÆÊªöÂä®Ôºâ„ÄÇ Â¶ÇÊûú‰∏ç‰π†ÊÉØÂàÜÈ°µÂô®ÁöÑÈïøË°åÊà™Êñ≠Ê®°ÂºèËÄåÂ∏åÊúõÈááÁî®Ëá™Âä®ÊäòË°åÊ®°ÂºèÔºåÂèØÈÄöËøá‰∏ãÈù¢‰ªª‰∏ÄÊñπÊ≥ïËøõË°åËÆæÁΩÆÔºö ÈÄöËøáËÆæÁΩÆLESSÁéØÂ¢ÉÂèòÈáèÊù•ÂÆûÁé∞„ÄÇ 1export LESS=FRX -ÊàñËÄÖÈÄöËøáÂÆö‰πâGitÈÖçÁΩÆÂèòÈáèÊù•ÊîπÂèòÂàÜÈ°µÂô®ÁöÑÈªòËÆ§Ë°å‰∏∫„ÄÇ 1git config --global core.pager &apos;less -+$LESS -FRX&apos;]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÁ∫øÁ®ã-01‰πã-Âü∫Êú¨Ê¶ÇÂøµ]]></title>
    <url>%2Fposts%2F7335ce5b.html</url>
    <content type="text"><![CDATA[ËøõÁ®ã Ê¶ÇËø∞ ËøõÁ®ãÊòØËÆ°ÁÆóÊú∫‰∏≠ÁöÑÁ®ãÂ∫èÂÖ≥‰∫éÊüêÊï∞ÊçÆÈõÜÂêà‰∏äÁöÑ‰∏ÄÊ¨°ËøêË°åÊ¥ªÂä®ÔºåÊòØÁ≥ªÁªüËøõË°åËµÑÊ∫êÂàÜÈÖçÂíåË∞ÉÂ∫¶ÁöÑÂü∫Êú¨Âçï‰ΩçÔºåÊòØÊìç‰ΩúÁ≥ªÁªüÁªìÊûÑÁöÑÂü∫Á°Ä„ÄÇ Âú®Êó©ÊúüÈù¢ÂêëËøõÁ®ãËÆæËÆ°ÁöÑËÆ°ÁÆóÊú∫ÁªìÊûÑ‰∏≠ÔºåËøõÁ®ãÊòØÁ®ãÂ∫èÁöÑÂü∫Êú¨ÊâßË°åÂÆû‰ΩìÔºõÂú®ÂΩì‰ª£Èù¢ÂêëÁ∫øÁ®ãËÆæËÆ°ÁöÑËÆ°ÁÆóÊú∫ÁªìÊûÑ‰∏≠ÔºåËøõÁ®ãÊòØÁ∫øÁ®ãÁöÑÂÆπÂô®„ÄÇÁ®ãÂ∫èÊòØÊåá‰ª§„ÄÅÊï∞ÊçÆÂèäÂÖ∂ÁªÑÁªáÂΩ¢ÂºèÁöÑÊèèËø∞ÔºåËøõÁ®ãÊòØÁ®ãÂ∫èÁöÑÂÆû‰Ωì„ÄÇ ‰∏Ä‰∏™ËøõÁ®ãÂ∞±ÊòØ‰∏Ä‰∏™Ê≠£Âú®ÊâßË°åÁ®ãÂ∫èÁöÑÂÆû‰æãÔºåÂåÖÊã¨Á®ãÂ∫èËÆ°Êï∞Âô®ÔºåÂØÑÂ≠òÂô®ÂíåÂèòÈáèÁöÑÂΩìÂâçÂÄº„ÄÇ‰ªéÊ¶ÇÂøµ‰∏äËØ¥ÔºåÊØè‰∏™ËøõÁ®ãÈÉΩÊã•ÊúâËá™Â∑±ÁöÑËôöÊãüCPU„ÄÇÂÆûÈôÖ‰∏äÁúüÊ≠£ÁöÑCPUÂú®ÂêÑ‰∏™ËøõÁ®ãÈó¥Êù•ÂõûÂàáÊç¢„ÄÇ ËøõÁ®ãÁöÑÂ±ÇÊ¨°ÁªìÊûÑ ËøõÁ®ãÂè™Êúâ‰∏Ä‰∏™Áà∂ËøõÁ®ãÔºå‰ΩÜÊòØÂèØ‰ª•Êúâ0‰∏™Ôºå‰∏Ä‰∏™ÔºåÂ§ö‰∏™Â≠êËøõÁ®ã„ÄÇ ËøõÁ®ãÁöÑÁä∂ÊÄÅ ËøêË°åÊÄÅÔºöËØ•Êó∂ÂàªËøõÁ®ãÂÆûÈôÖÂç†Áî®CPU„ÄÇ Â∞±Áª™ÊÄÅÔºöÂèØËøêË°åÔºå‰ΩÜÂõ†‰∏∫ÂÖ∂‰ªñËøõÁ®ãÊ≠£Âú®ËøêË°åËÄåÊöÇÊó∂ÂÅúÊ≠¢„ÄÇ ÈòªÂ°ûÊÄÅÔºöÈô§ÈùûÊüêÁßçÂ§ñÈÉ®‰∫ã‰ª∂ÂèëÁîüÔºåÂê¶ÂàôËøõÁ®ã‰∏çËÉΩËøêË°å„ÄÇ Á∫øÁ®ã Á∫øÁ®ãÊòØËøõÁ®ãÁöÑ‰∏Ä‰∏™ÂÆû‰ΩìÔºåÊòØCPUË∞ÉÂ∫¶ÂíåÂàÜÊ¥æÁöÑÂü∫Êú¨Âçï‰ΩçÔºå‰ªñÊòØÊØîËøõÁ®ãÊõ¥Â∞èÁöÑËÉΩÁã¨Á´ãËøêË°åÁöÑÂü∫Êú¨Âçï‰ΩçÔºåÁ∫øÁ®ãËá™Â∑±Âü∫Êú¨‰∏ä‰∏çÊã•ÊúâÁ≥ªÁªüËµÑÊ∫ê„ÄÇ ËøõÁ®ãÂíåÁ∫øÁ®ãÁöÑÂå∫Âà´ ËøõÁ®ãÁî®‰∫éÊääËµÑÊ∫êÈõÜ‰∏≠Âà∞‰∏ÄËµ∑ÔºåËÄåÁ∫øÁ®ãÂàôÊòØÂú®CPU‰∏äË¢´Ë∞ÉÂ∫¶ÊâßË°åÁöÑÂÆû‰Ωì„ÄÇ ËøõÁ®ãÔºöÊåáÂú®Á≥ªÁªü‰∏≠ËÉΩÁã¨Á´ãËøêË°åÂπ∂‰Ωú‰∏∫ËµÑÊ∫êÂàÜÈÖçÁöÑÂü∫Êú¨Âçï‰ΩçÔºåÂÆÉÊòØÁî±‰∏ÄÁªÑÊú∫Âô®Êåá‰ª§„ÄÅÊï∞ÊçÆÂíåÂ†ÜÊ†àÁ≠âÁªÑÊàêÁöÑÔºåÊòØ‰∏Ä‰∏™ËÉΩÁã¨Á´ãËøêË°åÁöÑÊ¥ªÂä®ÂÆû‰Ωì„ÄÇ Á∫øÁ®ãÔºöÊòØËøõÁ®ãÁöÑ‰∏Ä‰∏™ÂÆû‰ΩìÔºåÊòØCPUË∞ÉÂ∫¶ÂíåÂàÜÊ¥æÁöÑÂü∫Êú¨Âçï‰ΩçÔºå‰ªñÊòØÊØîËøõÁ®ãÊõ¥Â∞èÁöÑËÉΩÁã¨Á´ãËøêË°åÁöÑÂü∫Êú¨Âçï‰ΩçÔºåÁ∫øÁ®ãËá™Â∑±Âü∫Êú¨‰∏ä‰∏çÊã•ÊúâÁ≥ªÁªüËµÑÊ∫ê„ÄÇ Â§ö‰∏™ËøõÁ®ãÁöÑÂÜÖÈÉ®Êï∞ÊçÆÂíåÁä∂ÊÄÅÈÉΩÊòØÂÆåÂÖ®Áã¨Á´ãÁöÑ,ËÄåÂ§öÁ∫øÁ®ãÊòØÂÖ±‰∫´‰∏ÄÂùóÂÜÖÂ≠òÁ©∫Èó¥Âíå‰∏ÄÁªÑÁ≥ªÁªüËµÑÊ∫ê,ÊúâÂèØËÉΩ‰∫íÁõ∏ÂΩ±Âìç. Á∫øÁ®ãÊú¨Ë∫´ÁöÑÊï∞ÊçÆÈÄöÂ∏∏Âè™ÊúâÂØÑÂ≠òÂô®Êï∞ÊçÆÔºå‰ª•Âèä‰∏Ä‰∏™Á®ãÂ∫èÊâßË°åÊó∂‰ΩøÁî®ÁöÑÂ†ÜÊ†àÔºåÊâÄ‰ª•Á∫øÁ®ãÁöÑÂàáÊç¢ÊØîËøõÁ®ãÂàáÊç¢ÁöÑË¥üÊãÖË¶ÅÂ∞è„ÄÇ Âú®Âêå‰∏ÄËøõÁ®ã‰∏≠ÁöÑ‰∏çÂêåÁ∫øÁ®ã‰πãÈó¥ÁöÑÁã¨Á´ãÊÄßË¶ÅÊØî‰∏çÂêåËøõÁ®ã‰πãÈó¥ÁöÑÁã¨Á´ãÊÄß‰ΩéÂæóÂ§ö„ÄÇËøôÊòØÂõ†‰∏∫‰∏∫Èò≤Ê≠¢ËøõÁ®ã‰πãÈó¥ÂΩºÊ≠§Âπ≤Êâ∞ÂíåÁ†¥ÂùèÔºåÊØè‰∏™ËøõÁ®ãÈÉΩÊã•Êúâ‰∏Ä‰∏™Áã¨Á´ãÁöÑÂú∞ÂùÄÁ©∫Èó¥ÂíåÂÖ∂ÂÆÉËµÑÊ∫êÔºåÈô§‰∫ÜÂÖ±‰∫´ÂÖ®Â±ÄÂèòÈáèÂ§ñÔºå‰∏çÂÖÅËÆ∏ÂÖ∂ÂÆÉËøõÁ®ãÁöÑËÆøÈóÆ„ÄÇ‰ΩÜÊòØÂêå‰∏ÄËøõÁ®ã‰∏≠ÁöÑ‰∏çÂêåÁ∫øÁ®ãÂæÄÂæÄÊòØ‰∏∫‰∫ÜÊèêÈ´òÂπ∂ÂèëÊÄß‰ª•ÂèäËøõË°åÁõ∏‰∫í‰πãÈó¥ÁöÑÂêà‰ΩúËÄåÂàõÂª∫ÁöÑÔºåÂÆÉ‰ª¨ÂÖ±‰∫´ËøõÁ®ãÁöÑÂÜÖÂ≠òÂú∞ÂùÄÁ©∫Èó¥ÂíåËµÑÊ∫êÔºåÂ¶ÇÊØè‰∏™Á∫øÁ®ãÈÉΩÂèØ‰ª•ËÆøÈóÆÂÆÉ‰ª¨ÊâÄÂ±ûËøõÁ®ãÂú∞ÂùÄÁ©∫Èó¥‰∏≠ÁöÑÊâÄÊúâÂú∞ÂùÄÔºåÂ¶Ç‰∏Ä‰∏™Á∫øÁ®ãÁöÑÂ†ÜÊ†àÂèØ‰ª•Ë¢´ÂÖ∂ÂÆÉÁ∫øÁ®ãËØª„ÄÅÂÜôÔºåÁîöËá≥ÂÆåÂÖ®Ê∏ÖÈô§„ÄÇ Á∫øÁ®ãÁä∂ÊÄÅÂõæ Á∫øÁ®ãÁä∂ÊÄÅËß£Êûê &lt;span id=&quot;inline-green&quot;&gt; 1. Êñ∞Âª∫Áä∂ÊÄÅ(New): &lt;/span&gt; Á∫øÁ®ãÂØπË±°Ë¢´ÂàõÂª∫ÂêéÔºåÂ∞±ËøõÂÖ•‰∫ÜÊñ∞Âª∫Áä∂ÊÄÅ„ÄÇ‰æãÂ¶ÇÔºåThread thread = new Thread()„ÄÇ &lt;span id=&quot;inline-green&quot;&gt; 2. Â∞±Áª™Áä∂ÊÄÅ(Runnable): &lt;/span&gt; ‰πüË¢´Áß∞‰∏∫‚ÄúÂèØÊâßË°åÁä∂ÊÄÅ‚ÄùÔºåÂ§Ñ‰∫éÂ∞±Áª™Áä∂ÊÄÅÁöÑÁ∫øÁ®ãÔºåÈöèÊó∂ÂèØËÉΩË¢´CPUË∞ÉÂ∫¶ÊâßË°å„ÄÇ Ë∞ÉÁî®Á∫øÁ®ãÁöÑstart()ÊñπÊ≥ïÔºåÊ≠§Á∫øÁ®ãËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅ„ÄÇ ÂΩìÂâçÁ∫øÁ®ãsleep()ÊñπÊ≥ïÁªìÊùüÔºåÂÖ∂‰ªñÁ∫øÁ®ãjoin()ÁªìÊùüÔºåÁ≠âÂæÖÁî®Êà∑ËæìÂÖ•ÂÆåÊØïÔºåÊüê‰∏™Á∫øÁ®ãÊãøÂà∞ÂØπË±°ÈîÅÔºåËøô‰∫õÁ∫øÁ®ã‰πüÂ∞ÜËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅ„ÄÇ ÂΩìÂâçÁ∫øÁ®ãÊó∂Èó¥ÁâáÁî®ÂÆå‰∫ÜÔºåË∞ÉÁî®ÂΩìÂâçÁ∫øÁ®ãÁöÑyield()ÊñπÊ≥ïÔºåÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅ„ÄÇ ÈîÅÊ±†ÈáåÁöÑÁ∫øÁ®ãÊãøÂà∞ÂØπË±°ÈîÅÂêéÔºåËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅ„ÄÇ &lt;span id=&quot;inline-green&quot;&gt; 3. ËøêË°åÁä∂ÊÄÅ(Running):&lt;/span&gt; Á∫øÁ®ãËé∑ÂèñCPUÊùÉÈôêËøõË°åÊâßË°å„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÁ∫øÁ®ãÂè™ËÉΩ‰ªéÂ∞±Áª™Áä∂ÊÄÅËøõÂÖ•Âà∞ËøêË°åÁä∂ÊÄÅ„ÄÇ &lt;span id=&quot;inline-green&quot;&gt; 4. ÈòªÂ°ûÁä∂ÊÄÅ(Blocked): &lt;/span&gt; ÈòªÂ°ûÁä∂ÊÄÅÊòØÁ∫øÁ®ãÂõ†‰∏∫ÊüêÁßçÂéüÂõ†ÊîæÂºÉCPU‰ΩøÁî®ÊùÉÔºåÊöÇÊó∂ÂÅúÊ≠¢ËøêË°å„ÄÇÁõ¥Âà∞Á∫øÁ®ãËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅÔºåÊâçÊúâÊú∫‰ºöËΩ¨Âà∞ËøêË°åÁä∂ÊÄÅ„ÄÇÈòªÂ°ûÁöÑÊÉÖÂÜµÂàÜ‰∏âÁßçÔºö Á≠âÂæÖÈòªÂ°û -- ÈÄöËøáË∞ÉÁî®Á∫øÁ®ãÁöÑwait()ÊñπÊ≥ïÔºåËÆ©Á∫øÁ®ãÁ≠âÂæÖÊüêÂ∑•‰ΩúÁöÑÂÆåÊàê„ÄÇ ÂêåÊ≠•ÈòªÂ°û -- Á∫øÁ®ãÂú®Ëé∑ÂèñsynchronizedÂêåÊ≠•ÈîÅÂ§±Ë¥•(Âõ†‰∏∫ÈîÅË¢´ÂÖ∂ÂÆÉÁ∫øÁ®ãÊâÄÂç†Áî®)ÔºåÂÆÉ‰ºöËøõÂÖ•ÂêåÊ≠•ÈòªÂ°ûÁä∂ÊÄÅ„ÄÇ ÂÖ∂‰ªñÈòªÂ°û -- ÈÄöËøáË∞ÉÁî®Á∫øÁ®ãÁöÑsleep()Êàñjoin()ÊàñÂèëÂá∫‰∫ÜI/OËØ∑Ê±ÇÊó∂ÔºåÁ∫øÁ®ã‰ºöËøõÂÖ•Âà∞ÈòªÂ°ûÁä∂ÊÄÅ„ÄÇÂΩìsleep()Áä∂ÊÄÅË∂ÖÊó∂„ÄÅjoin()Á≠âÂæÖÁ∫øÁ®ãÁªàÊ≠¢ÊàñËÄÖË∂ÖÊó∂„ÄÅÊàñËÄÖI/OÂ§ÑÁêÜÂÆåÊØïÊó∂ÔºåÁ∫øÁ®ãÈáçÊñ∞ËΩ¨ÂÖ•Â∞±Áª™Áä∂ÊÄÅ„ÄÇ &lt;span id=&quot;inline-green&quot;&gt; 5. Ê≠ª‰∫°Áä∂ÊÄÅ(Dead): &lt;/span&gt; Á∫øÁ®ãÊâßË°åÂÆå‰∫ÜÊàñËÄÖÂõ†ÂºÇÂ∏∏ÈÄÄÂá∫‰∫Ürun()ÊñπÊ≥ïÔºåËØ•Á∫øÁ®ãÁªìÊùüÁîüÂëΩÂë®Êúü„ÄÇÁ∫øÁ®ã‰∏ÄÊó¶ÁªàÊ≠¢‰∫ÜÔºåÂ∞±‰∏çËÉΩÂ§çÁîü„ÄÇÂú®‰∏Ä‰∏™ÁªàÊ≠¢ÁöÑÁ∫øÁ®ã‰∏äË∞ÉÁî®start()ÊñπÊ≥ïÔºå‰ºöÊäõÂá∫java.lang.IllegalThreadStateExceptionÂºÇÂ∏∏„ÄÇ ËØ¥Êòé Ëøô5ÁßçÁä∂ÊÄÅÊ∂âÂèäÂà∞ÁöÑÂÜÖÂÆπÂåÖÊã¨ObjectÁ±ª, ThreadÂíåsynchronizedÂÖ≥ÈîÆÂ≠ó„ÄÇ ObjectÁ±ªÔºåÂÆö‰πâ‰∫Üwait(), notify(), notifyAll()Á≠â‰ºëÁú†/Âî§ÈÜíÂáΩÊï∞„ÄÇ ThreadÁ±ªÔºåÂÆö‰πâ‰∫Ü‰∏Ä‰∫õÂàóÁöÑÁ∫øÁ®ãÊìç‰ΩúÂáΩÊï∞„ÄÇ‰æãÂ¶ÇÔºåsleep()‰ºëÁú†ÂáΩÊï∞, interrupt()‰∏≠Êñ≠ÂáΩÊï∞, getName()Ëé∑ÂèñÁ∫øÁ®ãÂêçÁß∞Á≠â„ÄÇ synchronizedÔºåÊòØÂÖ≥ÈîÆÂ≠óÔºõÂÆÉÂå∫ÂàÜ‰∏∫synchronized‰ª£Á†ÅÂùóÂíåsynchronizedÊñπÊ≥ï„ÄÇsynchronizedÁöÑ‰ΩúÁî®ÊòØËÆ©Á∫øÁ®ãËé∑ÂèñÂØπË±°ÁöÑÂêåÊ≠•ÈîÅ„ÄÇ Âá†‰∏™ÊñπÊ≥ïÁöÑÊØîËæÉ &lt;p id=&quot;div-border-left-green&quot;&gt; 1. Thread.sleep(long millis)Ôºå‰∏ÄÂÆöÊòØÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî®Ê≠§ÊñπÊ≥ïÔºåÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•TIMED_WAITINGÁä∂ÊÄÅÔºå‰ΩÜ‰∏çÈáäÊîæÂØπË±°ÈîÅÔºåmillisÂêéÁ∫øÁ®ãËá™Âä®ËãèÈÜíËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅ„ÄÇ‰ΩúÁî®ÔºöÁªôÂÖ∂ÂÆÉÁ∫øÁ®ãÊâßË°åÊú∫‰ºöÁöÑÊúÄ‰Ω≥ÊñπÂºè„ÄÇ&lt;/p&gt; &lt;p id=&quot;div-border-left-green&quot;&gt; 2. Thread.yield()Ôºå‰∏ÄÂÆöÊòØÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî®Ê≠§ÊñπÊ≥ïÔºåÂΩìÂâçÁ∫øÁ®ãÊîæÂºÉËé∑ÂèñÁöÑCPUÊó∂Èó¥ÁâáÔºå‰ΩÜ‰∏çÈáäÊîæÈîÅËµÑÊ∫êÔºåÁî±ËøêË°åÁä∂ÊÄÅÂèò‰∏∫Â∞±Áª™Áä∂ÊÄÅÔºåËÆ©OSÂÜçÊ¨°ÈÄâÊã©Á∫øÁ®ã„ÄÇ‰ΩúÁî®ÔºöËÆ©Áõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑÁ∫øÁ®ãËΩÆÊµÅÊâßË°åÔºå‰ΩÜÂπ∂‰∏ç‰øùËØÅ‰∏ÄÂÆö‰ºöËΩÆÊµÅÊâßË°å„ÄÇÂÆûÈôÖ‰∏≠Êó†Ê≥ï‰øùËØÅyield()ËææÂà∞ËÆ©Ê≠•ÁõÆÁöÑÔºåÂõ†‰∏∫ËÆ©Ê≠•ÁöÑÁ∫øÁ®ãËøòÊúâÂèØËÉΩË¢´Á∫øÁ®ãË∞ÉÂ∫¶Á®ãÂ∫èÂÜçÊ¨°ÈÄâ‰∏≠„ÄÇThread.yield()‰∏ç‰ºöÂØºËá¥ÈòªÂ°û„ÄÇËØ•ÊñπÊ≥ï‰∏ésleep()Á±ª‰ººÔºåÂè™ÊòØ‰∏çËÉΩÁî±Áî®Êà∑ÊåáÂÆöÊöÇÂÅúÂ§öÈïøÊó∂Èó¥„ÄÇ&lt;/p&gt; &lt;p id=&quot;div-border-left-green&quot;&gt; 3. t.join()/t.join(long millis)ÔºåÂΩìÂâçÁ∫øÁ®ãÈáåË∞ÉÁî®ÂÖ∂ÂÆÉÁ∫øÁ®ãtÁöÑjoinÊñπÊ≥ïÔºåÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•WAITING/TIMED_WAITINGÁä∂ÊÄÅÔºåÂΩìÂâçÁ∫øÁ®ã‰∏ç‰ºöÈáäÊîæÂ∑≤ÁªèÊåÅÊúâÁöÑÂØπË±°ÈîÅ„ÄÇÁ∫øÁ®ãtÊâßË°åÂÆåÊØïÊàñËÄÖmillisÊó∂Èó¥Âà∞ÔºåÂΩìÂâçÁ∫øÁ®ãËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅ„ÄÇ&lt;/p&gt; &lt;p id=&quot;div-border-left-green&quot;&gt; 4. obj.wait()ÔºåÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî®ÂØπË±°ÁöÑwait()ÊñπÊ≥ïÔºåÂΩìÂâçÁ∫øÁ®ãÈáäÊîæÂØπË±°ÈîÅÔºåËøõÂÖ•Á≠âÂæÖÈòüÂàó„ÄÇ‰æùÈù†notify()/notifyAll()Âî§ÈÜíÊàñËÄÖwait(long timeout) timeoutÊó∂Èó¥Âà∞Ëá™Âä®Âî§ÈÜí„ÄÇ&lt;/p&gt; &lt;p id=&quot;div-border-left-green&quot;&gt; 5. obj.notify()Âî§ÈÜíÂú®Ê≠§ÂØπË±°ÁõëËßÜÂô®‰∏äÁ≠âÂæÖÁöÑÂçï‰∏™Á∫øÁ®ãÔºåÈÄâÊã©ÊòØ‰ªªÊÑèÊÄßÁöÑ„ÄÇnotifyAll()Âî§ÈÜíÂú®Ê≠§ÂØπË±°ÁõëËßÜÂô®‰∏äÁ≠âÂæÖÁöÑÊâÄÊúâÁ∫øÁ®ã„ÄÇ&lt;/p&gt;]]></content>
      <categories>
        <category>Java</category>
        <category>Â§öÁ∫øÁ®ã</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊúâË∂£ÁöÑSpringBootÂêØÂä®bannerÔºàÊåÅÁª≠Êõ¥Êñ∞Ôºâ]]></title>
    <url>%2Fposts%2F74450131.html</url>
    <content type="text"><![CDATA[ÂçÉÈáåÈ©¨ 123456789101112131415161718192021 _(\_/) ,((((^`\ (((( (6 \ ,((((( , \ ,,,_ ,((((( /"._ ,`, ((((\\ ,... ,(((( / `-.-' ))) ;' `"'"'""(((( ( ((( / ((( \ )) | |(( | . ' |)) \ _ ' `t ,.')( | y;- -,-""'"-.\ \/ ) / ./ ) / `\ \ |./ ( ( / /' || \\ //'| || \\ _//'|| || )) |_/ || \_\ |_/ || `'" \_\ `'" ÊñáÂ≠óÂÖî 12345678910111213141516171819202122232425262728293031323334353637/*** * Áì¶Áì¶ ÂçÅ * ÂçÅÈΩ±Èæ†Â∑± ‰∫ÖÁì¶ËªäÂ∑± * ‰πôÈæçÈæ†ÊØãÊó•‰∏∂ ‰∏∂‰πôÂ∑±ÊØãÊØã‰∏∂ * ÂçÅÈæ†È¶¨È¨ºËªäÁì¶ Â∑±ÂçÅÁì¶ÊØãÊØã * È¨ºÈ¶¨Èæ†È¶¨Èæ†ÂçÅ Â∑±Â∑±ÊØãËªäÊØãÁì¶ * ÊØãÈæ†Èæ†ÈæçÈæ†È¨º‰πô‰∏∂‰∏∂‰πôËªä‰πôÊØãÈ¨ºËªäÂ∑± * ‰πôÈæ†ÈæçÈæçÈ¨ºÈæçÁì¶ ÂçÅÁì¶ÊØã‰πôÁì¶Èæ†Áì¶‰∫Ö * È¶¨ÈΩ±ÈæçÈ¶¨È¨ºÂçÅ‰∏∂Êó•Â∑±Â∑±Â∑±ÊØãËªä‰πô‰∏∂ * Â∑±ÈΩ±È¶¨È¨ºËªäÂçÅÂçÅÊØãÊó•‰πôÂ∑±Â∑±‰πô‰πô * ËªäÈ¶¨ÈΩ±ÈΩ±Êó•‰πôÊØãÁì¶Â∑±‰πôÁì¶Êó•‰∫Ö * ‰∫ÖËªäÈΩ∫ÈæñÁì¶‰πôËªäÈæñÈæç‰πô‰πôÂçÅ * Êó•Èæ†Èæ†ÂçÅ‰∫ÖËªäÈæçÊØãÂçÅÂçÅ * Êó•ÊØãÂ∑±‰∫Ö Â∑±Â∑±ÂçÅ‰∫Ö‰∫Ö * ‰∏∂Â∑±ÂçÅÂçÅ‰πô ‰∏∂‰∏∂‰∏∂‰∏∂‰∏∂ * ‰∫ÖÂ∑±ÂçÅÈæçÈæñÁì¶ ‰∏∂ ‰∏∂ ‰πôÂçÅ * ‰∫ÖÂ∑±ÂçÅÈæ†ÈæñÊØã ‰∏∂‰∏∂ ‰∏∂Â∑±È¨ºÈ¨ºÁì¶‰∫Ö * ÂçÅÊó•ÂçÅÂçÅÊó•‰∫Ö‰∏∂‰∫Ö‰∏∂ ‰∏∂ÂçÅÊó•ÊØãÈ¨ºÈ¶¨È¶¨Ëªä‰πô * ÂçÅÊó•‰πôÂçÅ‰∫Ö‰∫Ö‰∫Ö‰∏∂ ÂçÅ‰πôÂ∑±ÊØãÈ¨ºÈ¨ºÈ¨ºÈæçÈΩ∫È¶¨‰πô * ‰∏∂Áì¶Â∑±‰πôÂçÅÂçÅ‰∫Ö‰∏∂‰∫Ö‰πô‰πô‰πôÂ∑±ÊØãÈ¨ºÈ¨ºÈ¨ºÈæçÈΩ±ÈΩ∫ÈΩ∫È¨ºÂçÅ * ‰πô‰πôÂçÅÂçÅÂçÅ‰∫Ö‰πôÁì¶Áì¶Â∑±Êó•Áì¶ÊØãÈ¨ºÈ¨ºÈæ†ÈΩ±ÈΩ±ÈæçÈæçÈΩ±ÈΩ±ÊØã‰∏∂ * ‰∫ÖÂçÅÂçÅÂçÅÂçÅ‰πôÁì¶ËªäÊØãÁì¶Áì¶Êó•ËªäÈ¶¨Èæ†ÈæçÈæçÈæçÈæçÈæçÈæ†Èæ†Èæ†È¶¨‰∫Ö * ÂçÅÂçÅÂçÅÂçÅÂ∑±ÊØãËªäÁì¶Áì¶Áì¶Áì¶È¨ºÈ¶¨Èæ†ÈæçÈæ†Èæ†ÈæçÈæ†Èæ†Èæ†È¶¨Èæ†Ëªä * ‰∫ÖÂçÅÂçÅÊó•ÊØãÁì¶Êó•Êó•Áì¶È¨ºÈ¨ºÈ¨ºÈæ†Èæ†È¶¨È¶¨Èæ†ÈæçÈæçÈæ†È¶¨È¶¨Ëªä * ‰∫Ö‰∫Ö‰∫Ö‰πôÁì¶Áì¶ÊØãËªäËªäËªäÈ¶¨ÈæçÈæ†È¨ºÈ¨ºÈ¶¨Èæ†ÈæçÈæçÈæ†È¶¨È¶¨È¨º * ‰∏∂‰∏∂‰πô‰∫Ö‰∫Ö‰πôËªäÈ¨ºÈ¨ºÈ¨ºÊØãËªäÈæçÈæçÈæ†È¨ºÈ¶¨È¶¨Èæ†ÈæçÈΩ±ÈΩ±ÈæçÈ¶¨È¨º * ‰∫ÖÂ∑±ÂçÅÂçÅÂ∑±ÂçÅÊó•È¨ºÈ¨ºËªäÁì¶ÊØãÈæ†ÈæçÈæ†È¶¨È¶¨Èæ†Èæ†Èæ†ÈΩ±ÈΩ∫ÈΩ∫ÈΩ±Èæ†È¨º * ‰∫Ö‰πô‰πô‰πôÂçÅËªäÈ¶¨ËªäÊØãÈ¶¨ÈΩ±ÈΩ±ÈæçÈæ†Èæ†Èæ†È¶¨Èæ†ÈæçÈΩ±ÈæçÈæ†Èæ†È¨ºÁì¶ * ‰∏∂ÊØãÈæ†È¨ºËªäÁì¶ËªäÈ¶¨Èæ†ÈæçÈæ†Èæ†ÈæçÈΩ±ÈΩ±Èæ†È¶¨È¶¨È¨ºÊØãÊó• * ÂçÅ‰πôÂ∑±Êó•ÂçÅ ‰∏∂Â∑±È¨ºÈæçÈΩ±ÈΩ∫ÈΩ±ÈæçÈ¶¨È¶¨È¶¨ËªäÊØãÂ∑± * ‰∏∂ÂçÅÂ∑±‰πô‰∫Ö‰∏∂ ‰∫ÖÁì¶È¶¨Èæ†ÈæçÈæ†Èæ†È¶¨ÊØãÁì¶‰πô * ‰∏∂ÂçÅÂçÅ‰πô‰∫ÖÂçÅ ‰∫ÖÂ∑±Áì¶ËªäÈ¶¨Èæ†È¨ºËªäÁì¶‰πô * ‰∏∂ÂçÅ‰πôÂçÅÂçÅ‰∏∂ ‰∏∂‰∏∂‰∫ÖÂçÅÁì¶È¨ºËªäÁì¶Â∑± * ‰∏∂‰∫Ö‰∫Ö‰∏∂ ‰∫ÖÊó•Áì¶Êó• * ‰∏∂ */ ÁãóÂ§¥1 123456789101112131415161718192021222324252627282930313233343536373839/*** * .,:,,, .::,,,::. * .::::,,;;, .,;;:,,....:i: * :i,.::::,;i:. ....,,:::::::::,.... .;i:,. ......;i. * :;..:::;::::i;,,:::;:,,,,,,,,,,..,.,,:::iri:. .,:irsr:,.;i. * ;;..,::::;;;;ri,,,. ..,,:;s1s1ssrr;,.;r, * :;. ,::;ii;:, . ................... .;iirri;;;,,;i, * ,i. .;ri:. ... ............................ .,,:;:,,,;i: * :s,.;r:... ....................................... .::;::s; * ,1r::. .............,,,.,,:,,........................,;iir; * ,s;........... ..::.,;:,,. ...............,;1s * :i,..,. .,:,,::,. .......... .......;1, * ir,....:rrssr;:, ,,.,::. .r5S9989398G95hr;. ....,.:s, * ;r,..,s9855513XHAG3i .,,,,,,,. ,S931,.,,.;s;s&amp;BHHA8s.,..,..:r: * :r;..rGGh, :SAG;;G@BS:.,,,,,,,,,.r83: hHH1sXMBHHHM3..,,,,.ir. * ,si,.1GS, sBMAAX&amp;MBMB5,,,,,,:,,.:&amp;8 3@HXHBMBHBBH#X,.,,,,,,rr * ;1:,,SH: .A@&amp;&amp;B#&amp;8H#BS,,,,,,,,,.,5XS, 3@MHABM&amp;59M#As..,,,,:,is, * .rr,,,;9&amp;1 hBHHBB&amp;8AMGr,,,,,,,,,,,:h&amp;&amp;9s; r9&amp;BMHBHMB9: . .,,,,;ri. * :1:....:5&amp;XSi;r8BMBHHA9r:,......,,,,:ii19GG88899XHHH&amp;GSr. ...,:rs. * ;s. .:sS8G8GG889hi. ....,,:;:,.:irssrriii:,. ...,,i1, * ;1, ..,....,,isssi;, .,,. ....,.i1, * ;h: i9HHBMBBHAX9: . ...,,,rs, * ,1i.. :A#MBBBBMHB#s ....,,,;si. * .r1,.. ,..;3BMBBBHBB#Bh. .. ....,,,,,i1; * :h;.. .,..;,1XBMMMMBXs,.,, .. :: ,. ....,,,,,,ss. * ih: .. .;;;, ;;:s58A3i,.. ,. ,.:,,. ...,,,,,:,s1, * .s1,.... .,;sh, ,iSAXs;. ,. ,,.i85 ...,,,,,,:i1; * .rh: ... rXG9XBBM#M#MHAX3hss13&amp;&amp;HHXr .....,,,,,,,ih; * .s5: ..... i598X&amp;&amp;A&amp;AAAAAA&amp;XG851r: ........,,,,:,,sh; * . ihr, ... . .. ........,,,,,;11:. * ,s1i. ... ..,,,..,,,.,,.,,.,.. ........,,.,,.;s5i. * .:s1r,...................... ..............;shs, * . .:shr:. .... ..............,ishs. * .,issr;,... ...........................,is1s;. * .,is1si;:,....................,:;ir1sr;, * ..:isssssrrii;::::::;;iirsssssr;:.. * .,::iiirsssssssssrri;;:. */ ÁãóÂ§¥2 12345678910111213141516171819202122232425262728293031323334353637383940/*** * ii. ;9ABH, * SA391, .r9GG35&amp;G * &amp;#ii13Gh; i3X31i;:,rB1 * iMs,:,i5895, .5G91:,:;:s1:8A * 33::::,,;5G5, ,58Si,,:::,sHX;iH1 * Sr.,:;rs13BBX35hh11511h5Shhh5S3GAXS:.,,::,,1AG3i,GG * .G51S511sr;;iiiishS8G89Shsrrsh59S;.,,,,,..5A85Si,h8 * :SB9s:,............................,,,.,,,SASh53h,1G. * .r18S;..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,....,,.1H315199,rX, * ;S89s,..,,,,,,,,,,,,,,,,,,,,,,,....,,.......,,,;r1ShS8,;Xi * i55s:.........,,,,,,,,,,,,,,,,.,,,......,.....,,....r9&amp;5.:X1 * 59;.....,. .,,,,,,,,,,,... .............,..:1;.:&amp;s * s8,..;53S5S3s. .,,,,,,,.,.. i15S5h1:.........,,,..,,:99 * 93.:39s:rSGB@A; ..,,,,..... .SG3hhh9G&amp;BGi..,,,,,,,,,,,,.,83 * G5.G8 9#@@@@@X. .,,,,,,..... iA9,.S&amp;B##@@Mr...,,,,,,,,..,.;Xh * Gs.X8 S@@@@@@@B:..,,,,,,,,,,. rA1 ,A@@@@@@@@@H:........,,,,,,.iX: * ;9. ,8A#@@@@@@#5,.,,,,,,,,,... 9A. 8@@@@@@@@@@M; ....,,,,,,,,S8 * X3 iS8XAHH8s.,,,,,,,,,,...,..58hH@@@@@@@@@Hs ...,,,,,,,:Gs * r8, ,,,...,,,,,,,,,,..... ,h8XABMMHX3r. .,,,,,,,.rX: * :9, . .:,..,:;;;::,.,,,,,.. .,,. ..,,,,,,.59 * .Si ,:.i8HBMMMMMB&amp;5,.... . .,,,,,.sMr * SS :: h@@@@@@@@@@#; . ... . ..,,,,iM5 * 91 . ;:.,1&amp;@@@@@@MXs. . .,,:,:&amp;S * hS .... .:;,,,i3MMS1;..,..... . . ... ..,:,.99 * ,8; ..... .,:,..,8Ms:;,,,... .,::.83 * s&amp;: .... .sS553B@@HX3s;,. .,;13h. .:::&amp;1 * SXr . ...;s3G99XA&amp;X88Shss11155hi. ,;:h&amp;, * iH8: . .. ,;iiii;,::,,,,,. .;irHA * ,8X5; . ....... ,;iihS8Gi * 1831, .,;irrrrrs&amp;@ * ;5A8r. .:;iiiiirrss1H * :X@H3s....... .,:;iii;iiiiirsrh * r#h:;,...,,.. .,,:;;;;;:::,... .:;;;;;;iiiirrss1 * ,M8 ..,....,.....,,::::::,,... . .,;;;iiiiiirss11h * 8B;.,,,,,,,.,..... . .. .:;;;;iirrsss111h * i@5,:::,,,,,,,,.... . . .:::;;;;;irrrss111111 * 9Bi,:,,,,...... ..r91;;;;;iirrsss1ss1111 */ ÊªëÁ®ΩÁ¨ëËÑ∏ 12345678910111213141516171819202122232425262728293031323334/*** * .,, .,:;;iiiiiiiii;;:,,. .,, * rGB#HS,.;iirrrrriiiiiiiiiirrrrri;,s&amp;#MAS, * r5s;:r3AH5iiiii;;;;;;;;;;;;;;;;iiirXHGSsiih1, * .;i;;s91;;;;;;::::::::::::;;;;iS5;;;ii: * :rsriii;;r::::::::::::::::::::::;;,;;iiirsi, * .,iri;;::::;;;;;;::,,,,,,,,,,,,,..,,;;;;;;;;iiri,,. * ,9BM&amp;, .,:;;:,,,,,,,,,,,hXA8: ..,,,. * ,;&amp;@@#r:;;;;;::::,,. ,r,,,,,,,,,,iA@@@s,,:::;;;::,,. .;. * :ih1iii;;;;;::::;;;;;;;:,,,,,,,,,,;i55r;;;;;;;;;iiirrrr,.. * .ir;;iiiiiiiiii;;;;::::::,,,,,,,:::::,,:;;;iiiiiiiiiiiiri * iriiiiiiiiiiiiiiii;;;::::::::::::::::;;;iiiiiiiiiiiiiiiir; * ,riii;;;;;;;;;;;;;:::::::::::::::::::::::;;;;;;;;;;;;;;iiir. * iri;;;::::,,,,,,,,,,:::::::::::::::::::::::::,::,,::::;;iir: * .rii;;::::,,,,,,,,,,,,:::::::::::::::::,,,,,,,,,,,,,::::;;iri * ,rii;;;::,,,,,,,,,,,,,:::::::::::,:::::,,,,,,,,,,,,,:::;;;iir. * ,rii;;i::,,,,,,,,,,,,,:::::::::::::::::,,,,,,,,,,,,,,::i;;iir. * ,rii;;r::,,,,,,,,,,,,,:,:::::,:,:::::::,,,,,,,,,,,,,::;r;;iir. * .rii;;rr,:,,,,,,,,,,,,,,:::::::::::::::,,,,,,,,,,,,,:,si;;iri * ;rii;:1i,,,,,,,,,,,,,,,,,,:::::::::,,,,,,,,,,,,,,,:,ss:;iir: * .rii;;;5r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sh:;;iri * ;rii;:;51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.:hh:;;iir, * irii;::hSr,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,sSs:;;iir: * irii;;:iSSs:.,,,,,,,,,,,,,,,,,,,,,,,,,,,..:135;:;;iir: * ;rii;;:,r535r:...,,,,,,,,,,,,,,,,,,..,;sS35i,;;iirr: * :rrii;;:,;1S3Shs;:,............,:is533Ss:,;;;iiri, * .;rrii;;;:,;rhS393S55hh11hh5S3393Shr:,:;;;iirr: * .;rriii;;;::,:;is1h555555h1si;:,::;;;iirri:. * .:irrrii;;;;;:::,,,,,,,,:::;;;;iiirrr;, * .:irrrriiiiii;;;;;;;;iiiiiirrrr;,. * .,:;iirrrrrrrrrrrrrrrrri;:. * ..,:::;;;;:::,,. */ ÈîÆÁõò 1234567891011121314151617/*** * ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îê * ‚îÇEsc‚îÇ ‚îÇ F1‚îÇ F2‚îÇ F3‚îÇ F4‚îÇ ‚îÇ F5‚îÇ F6‚îÇ F7‚îÇ F8‚îÇ ‚îÇ F9‚îÇF10‚îÇF11‚îÇF12‚îÇ ‚îÇP/S‚îÇS L‚îÇP/B‚îÇ ‚îå‚îê ‚îå‚îê ‚îå‚îê * ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îò ‚îî‚îò ‚îî‚îò * ‚îå‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îê * ‚îÇ~ `‚îÇ! 1‚îÇ@ 2‚îÇ# 3‚îÇ$ 4‚îÇ% 5‚îÇ^ 6‚îÇ&amp; 7‚îÇ* 8‚îÇ( 9‚îÇ) 0‚îÇ_ -‚îÇ+ =‚îÇ BacSp ‚îÇ ‚îÇIns‚îÇHom‚îÇPUp‚îÇ ‚îÇN L‚îÇ / ‚îÇ * ‚îÇ - ‚îÇ * ‚îú‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î§ * ‚îÇ Tab ‚îÇ Q ‚îÇ W ‚îÇ E ‚îÇ R ‚îÇ T ‚îÇ Y ‚îÇ U ‚îÇ I ‚îÇ O ‚îÇ P ‚îÇ&#123; [‚îÇ&#125; ]‚îÇ | \ ‚îÇ ‚îÇDel‚îÇEnd‚îÇPDn‚îÇ ‚îÇ 7 ‚îÇ 8 ‚îÇ 9 ‚îÇ ‚îÇ * ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îî‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îò ‚îú‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î§ + ‚îÇ * ‚îÇ Caps ‚îÇ A ‚îÇ S ‚îÇ D ‚îÇ F ‚îÇ G ‚îÇ H ‚îÇ J ‚îÇ K ‚îÇ L ‚îÇ: ;‚îÇ" '‚îÇ Enter ‚îÇ ‚îÇ 4 ‚îÇ 5 ‚îÇ 6 ‚îÇ ‚îÇ * ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îú‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î§ * ‚îÇ Shift ‚îÇ Z ‚îÇ X ‚îÇ C ‚îÇ V ‚îÇ B ‚îÇ N ‚îÇ M ‚îÇ&lt; ,‚îÇ&gt; .‚îÇ? /‚îÇ Shift ‚îÇ ‚îÇ ‚Üë ‚îÇ ‚îÇ 1 ‚îÇ 2 ‚îÇ 3 ‚îÇ ‚îÇ * ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¥‚îÄ‚î¨‚îÄ‚î¥‚îÄ‚îÄ‚î¨‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¨‚î¥‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î¥‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îå‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îê ‚îú‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î§ E‚îÇ‚îÇ * ‚îÇ Ctrl‚îÇ ‚îÇAlt ‚îÇ Space ‚îÇ Alt‚îÇ ‚îÇ ‚îÇCtrl‚îÇ ‚îÇ ‚Üê ‚îÇ ‚Üì ‚îÇ ‚Üí ‚îÇ ‚îÇ 0 ‚îÇ . ‚îÇ‚Üê‚îÄ‚îò‚îÇ * ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îò */ ‰ΩõÁ•ñ‰øù‰Ωë 123456789101112131415161718192021222324/*** * _ooOoo_ * o8888888o * 88" . "88 * (| -_- |) * O\ = /O * ____/`---'\____ * . ' \\| |// `. * / \\||| : |||// \ * / _||||| -:- |||||- \ * | | \\\ - /// | | * | \_| ''\---/'' | | * \ .-\__ `-` ___/-. / * ___`. .' /--.--\ `. . __ * ."" '&lt; `.___\_&lt;|&gt;_/___.' &gt;'"". * | | : `- \`.;`\ _ /`;.`/ - ` : | | * \ \ `-. \_ __\ /__ _/ .-` / / * ======`-.____`-.___\_____/___.-`____.-'====== * `=---=' * * ............................................. * ‰ΩõÁ•ñ‰øù‰Ωë Ê∞∏Êó†BUG */ ‰ΩõÊõ∞ 123456789101112/*** * ‰ΩõÊõ∞: * ÂÜôÂ≠óÊ•ºÈáåÂÜôÂ≠óÈó¥ÔºåÂÜôÂ≠óÈó¥ÈáåÁ®ãÂ∫èÂëòÔºõ * Á®ãÂ∫è‰∫∫ÂëòÂÜôÁ®ãÂ∫èÔºåÂèàÊãøÁ®ãÂ∫èÊç¢ÈÖíÈí±„ÄÇ * ÈÖíÈÜíÂè™Âú®ÁΩë‰∏äÂùêÔºåÈÖíÈÜâËøòÊù•ÁΩë‰∏ãÁú†Ôºõ * ÈÖíÈÜâÈÖíÈÜíÊó•Â§çÊó•ÔºåÁΩë‰∏äÁΩë‰∏ãÂπ¥Â§çÂπ¥„ÄÇ * ‰ΩÜÊÑøËÄÅÊ≠ªÁîµËÑëÈó¥Ôºå‰∏çÊÑøÈû†Ë∫¨ËÄÅÊùøÂâçÔºõ * Â•îÈ©∞ÂÆùÈ©¨Ë¥µËÄÖË∂£ÔºåÂÖ¨‰∫§Ëá™Ë°åÁ®ãÂ∫èÂëò„ÄÇ * Âà´‰∫∫Á¨ëÊàëÂøíÁñØÁô´ÔºåÊàëÁ¨ëËá™Â∑±ÂëΩÂ§™Ë¥±Ôºõ * ‰∏çËßÅÊª°Ë°óÊºÇ‰∫ÆÂ¶πÔºåÂì™‰∏™ÂΩíÂæóÁ®ãÂ∫èÂëòÔºü */ ‰ΩõÁ•ñÁò´Áó™ 1234567891011121314151617181920212223/*** * _ooOoo_ * o8888888o * 88" . "88 * (| -_- |) * O\ = /O * ___/`---'\____ * . ' \\| |// `. * / \\||| : |||// \ * / _||||| -:- |||||- \ * | | \\\ - /// | | * | \_| ''\---/'' | | * \ .-\__ `-` ___/-. / * ___`. .' /--.--\ `. . __ * ."" '&lt; `.___\_&lt;|&gt;_/___.' &gt;'"". * | | : `- \`.;`\ _ /`;.`/ - ` : | | * \ \ `-. \_ __\ /__ _/ .-` / / * ======`-.____`-.___\_____/___.-`____.-'====== * `=---=' * ............................................. * ‰ΩõÊõ∞ÔºöbugÊ≥õÊª•ÔºåÊàëÂ∑≤Áò´Áó™ÔºÅ */ Fuck Bug 12345678910111213/*** * * ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñí‚ñà ‚ñà‚ñà ‚ñÑ‚ñà‚ñà‚ñà‚ñà‚ñÑ ‚ñà‚ñà ‚ñÑ‚ñà‚ñÄ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó * ‚ñì‚ñà‚ñà ‚ñí ‚ñà‚ñà ‚ñì‚ñà‚ñà‚ñí‚ñí‚ñà‚ñà‚ñÄ ‚ñÄ‚ñà ‚ñà‚ñà‚ñÑ‚ñà‚ñí ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù * ‚ñí‚ñà‚ñà‚ñà‚ñà ‚ñë‚ñì‚ñà‚ñà ‚ñí‚ñà‚ñà‚ñë‚ñí‚ñì‚ñà ‚ñÑ ‚ñì‚ñà‚ñà‚ñà‚ñÑ‚ñë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ñà‚ïó * ‚ñë‚ñì‚ñà‚ñí ‚ñë‚ñì‚ñì‚ñà ‚ñë‚ñà‚ñà‚ñë‚ñí‚ñì‚ñì‚ñÑ ‚ñÑ‚ñà‚ñà‚ñí‚ñì‚ñà‚ñà ‚ñà‚ñÑ ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë * ‚ñë‚ñí‚ñà‚ñë ‚ñí‚ñí‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì ‚ñí ‚ñì‚ñà‚ñà‚ñà‚ñÄ ‚ñë‚ñí‚ñà‚ñà‚ñí ‚ñà‚ñÑ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù * ‚ñí ‚ñë ‚ñë‚ñí‚ñì‚ñí ‚ñí ‚ñí ‚ñë ‚ñë‚ñí ‚ñí ‚ñë‚ñí ‚ñí‚ñí ‚ñì‚ñí ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù * ‚ñë ‚ñë‚ñë‚ñí‚ñë ‚ñë ‚ñë ‚ñë ‚ñí ‚ñë ‚ñë‚ñí ‚ñí‚ñë * ‚ñë ‚ñë ‚ñë‚ñë‚ñë ‚ñë ‚ñë ‚ñë ‚ñë ‚ñë‚ñë ‚ñë * ‚ñë ‚ñë ‚ñë ‚ñë ‚ñë */ Âì≠ËÑ∏Á•ûÂÖΩ 12345678910111213141516171819202122232425/*** * ‚îå‚îÄ‚îê ‚îå‚îÄ‚îê * ‚îå‚îÄ‚îÄ‚îò ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚î¥‚îÄ‚îÄ‚îê * ‚îÇ ‚îÇ * ‚îÇ ‚îÄ‚îÄ‚îÄ ‚îÇ * ‚îÇ ‚îÄ‚î¨‚îò ‚îî‚î¨‚îÄ ‚îÇ * ‚îÇ ‚îÇ * ‚îÇ ‚îÄ‚î¥‚îÄ ‚îÇ * ‚îÇ ‚îÇ * ‚îî‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îò * ‚îÇ ‚îÇ * ‚îÇ ‚îÇ * ‚îÇ ‚îÇ * ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê * ‚îÇ ‚îÇ * ‚îÇ ‚îú‚îÄ‚îê * ‚îÇ ‚îå‚îÄ‚îò * ‚îÇ ‚îÇ * ‚îî‚îÄ‚îê ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îò * ‚îÇ ‚îÄ‚î§ ‚îÄ‚î§ ‚îÇ ‚îÄ‚î§ ‚îÄ‚î§ * ‚îî‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îò * Á•ûÂÖΩ‰øù‰Ωë * ‰ª£Á†ÅÊó†BUG! */ ÂÆ≥ÁæûÁ•ûÂÖΩ 12345678910111213141516171819202122232425/*** * ‚îå‚îÄ‚îê ‚îå‚îÄ‚îê * ‚îå‚îÄ‚îÄ‚îò ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚î¥‚îÄ‚îÄ‚îê * ‚îÇ ‚îÇ * ‚îÇ ‚îÄ‚îÄ‚îÄ ‚îÇ * ‚îÇ &gt; &lt; ‚îÇ * ‚îÇ ‚îÇ * ‚îÇ ... ‚åí ... ‚îÇ * ‚îÇ ‚îÇ * ‚îî‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îò * ‚îÇ ‚îÇ * ‚îÇ ‚îÇ * ‚îÇ ‚îÇ * ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê * ‚îÇ ‚îÇ * ‚îÇ ‚îú‚îÄ‚îê * ‚îÇ ‚îå‚îÄ‚îò * ‚îÇ ‚îÇ * ‚îî‚îÄ‚îê ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îò * ‚îÇ ‚îÄ‚î§ ‚îÄ‚î§ ‚îÇ ‚îÄ‚î§ ‚îÄ‚î§ * ‚îî‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îò * Á•ûÂÖΩ‰øù‰Ωë * ‰ª£Á†ÅÊó†BUG! */ Â¢®ÈïúÁ•ûÂÖΩ 12345678910111213141516171819202122232425/*** * ‚îå‚îÄ‚îê ‚îå‚îÄ‚îê + + * ‚îå‚îÄ‚îÄ‚îò ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚î¥‚îÄ‚îÄ‚îê++ * ‚îÇ ‚îÇ * ‚îÇ ‚îÄ‚îÄ‚îÄ ‚îÇ++ + + + * ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚îÄ‚îÄ‚îÄ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚îÇ+ * ‚îÇ ‚îÇ+ * ‚îÇ ‚îÄ‚î¥‚îÄ ‚îÇ * ‚îÇ ‚îÇ * ‚îî‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îò * ‚îÇ ‚îÇ * ‚îÇ ‚îÇ + + * ‚îÇ ‚îÇ * ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê * ‚îÇ ‚îÇ * ‚îÇ ‚îú‚îÄ‚îê * ‚îÇ ‚îå‚îÄ‚îò * ‚îÇ ‚îÇ * ‚îî‚îÄ‚îê ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îò + + + + * ‚îÇ ‚îÄ‚î§ ‚îÄ‚î§ ‚îÇ ‚îÄ‚î§ ‚îÄ‚î§ * ‚îî‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îò + + + + * Á•ûÂÖΩ‰øù‰Ωë * ‰ª£Á†ÅÊó†BUG! */ ËùôËù† 123456789101112131415161718192021/*** * ___====-_ _-====___ * _--^^^###// \\###^^^--_ * _-^#####// ( ) \\#####^-_ * -######// |\^^/| \\######- * _/######// (@::@) \\######\_ * /#######(( \\// ))#######\ * -########\\ (oo) //########- * -#########\\ / VV \ //#########- * -##########\\/ \//##########- * _#/|#####/\###( /\ )###/\#####|\#_ * |/ |#/\#/\#/\/ \#/\#\ | | /#/\#/ \/\#/\#/\#| \| * ` |/ V V ` V \#\| | | |/#/ V ' V V \| ' * ` ` ` ` / | | | | \ ' ' ' ' * ( | | | | ) * __\ | | | | /__ * (vvv(VVV)(VVV)vvv) * Á•ûÂÖΩ‰øù‰Ωë * ‰ª£Á†ÅÊó†BUG! */ È£ûÂ§©Èæô 123456789101112131415161718192021222324/*** * * * __----~~~~~~~~~~~------___ * . . ~~//====...... __--~ ~~ * -. \_|// |||\\ ~~~~~~::::... /~ * ___-==_ _-~o~ \/ ||| \\ _/~~- * __---~~~.==~||\=_ -_--~/_-~|- |\\ \\ _/~ * _-~~ .=~ | \\-_ '-~7 /- / || \ / * .~ .~ | \\ -_ / /- / || \ / * / ____ / | \\ ~-_/ /|- _/ .|| \ / * |~~ ~~|--~~~~--_ \ ~==-/ | \~--===~~ .\ * ' ~-| /| |-~\~~ __--~~ * |-~~-_/ | | ~\_ _-~ /\ * / \ \__ \/~ \__ * _--~ _/ | .-~~____--~-/ ~~==. * ((-&gt;/~ '.|||' -_| ~~-/ , . _|| * -_ ~\ ~~---l__i__i__i--~~_/ * _-~-__ ~) \--______________--~~ * //.-~~~-~_--~- |-------~~~~~~~~ * //.-~~~--\ * Á•ûÂÖΩ‰øù‰Ωë * ‰ª£Á†ÅÊó†BUG! */ Áå™ 123456789101112131415/*** _ * _._ _..._ .-', _.._(`)) * '-. ` ' /-._.-' ',/ * ) \ '. * / _ _ | \ * | a a / | * \ .-. ; * '-('' ).-' ,' ; * '-; | .' * \ \ / * | 7 .__ _.-\ \ * | | | ``/ /` / * /,_| | /,_/ / * /,_/ '`-' */ È™∑È´ÖÂ§¥ 123456789101112131415161718192021222324/*** ************************************************************** * * * .=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-. * * | ______ | * * | .-" "-. | * * | / \ | * * | _ | | _ | * * | ( \ |, .-. .-. ,| / ) | * * | &gt; "=._ | )(__/ \__)( | _.=" &lt; | * * | (_/"=._"=._ |/ /\ \| _.="_.="\_) | * * | "=._"(_ ^^ _)"_.=" | * * | "=\__|IIIIII|__/=" | * * | _.="| \IIIIII/ |"=._ | * * | _ _.="_.="\ /"=._"=._ _ | * * | ( \_.="_.=" `--------` "=._"=._/ ) | * * | &gt; _.=" "=._ &lt; | * * | (_/ \_) | * * | | * * '-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=' * * * * LASCIATE OGNI SPERANZA, VOI CH'ENTRATE * ************************************************************** */ Â¶àÂ¶àÂÜçÁà±Êàë‰∏ÄÊ¨° 123456789101112131415161718192021222324252627282930313233/*** * ,s555SB@@&amp; * :9H##@@@@@Xi * 1@@@@@@@@@@@@@@8 * ,8@@@@@@@@@B@@@@@@8 * :B@@@@X3hi8Bs;B@@@@@Ah, * ,8i r@@@B: 1S ,M@@@@@@#8; * 1AB35.i: X@@8 . SGhr ,A@@@@@@@@S * 1@h31MX8 18Hhh3i .i3r ,A@@@@@@@@@5 * ;@&amp;i,58r5 rGSS: :B@@@@@@@@@@A * 1#i . 9i hX. .: .5@@@@@@@@@@@1 * sG1, ,G53s. 9#Xi;hS5 3B@@@@@@@B1 * .h8h.,A@@@MXSs, #@H1: 3ssSSX@1 * s ,@@@@@@@@@@@@Xhi, r#@@X1s9M8 .GA981 * ,. rS8H#@@@@@@@@@@#HG51;. .h31i;9@r .8@@@@BS;i; * .19AXXXAB@@@@@@@@@@@@@@#MHXG893hrX#XGGXM@@@@@@@@@@MS * s@@MM@@@hsX#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&amp;, * :GB@#3G@@Brs ,1GM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B, * .hM@@@#@@#MX 51 r;iSGAM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@8 * :3B@@@@@@@@@@@&amp;9@h :Gs .;sSXH@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@: * s&amp;HA#@@@@@@@@@@@@@@M89A;.8S. ,r3@@@@@@@@@@@@@@@@@@@@@@@@@@@r * ,13B@@@@@@@@@@@@@@@@@@@5 5B3 ;. ;@@@@@@@@@@@@@@@@@@@@@@@@@@@i * 5#@@#&amp;@@@@@@@@@@@@@@@@@@9 .39: ;@@@@@@@@@@@@@@@@@@@@@@@@@@@; * 9@@@X:MM@@@@@@@@@@@@@@@#; ;31. H@@@@@@@@@@@@@@@@@@@@@@@@@@: * SH#@B9.rM@@@@@@@@@@@@@B :. 3@@@@@@@@@@@@@@@@@@@@@@@@@@5 * ,:. 9@@@@@@@@@@@#HB5 .M@@@@@@@@@@@@@@@@@@@@@@@@@B * ,ssirhSM@&amp;1;i19911i,. s@@@@@@@@@@@@@@@@@@@@@@@@@@S * ,,,rHAri1h1rh&amp;@#353Sh: 8@@@@@@@@@@@@@@@@@@@@@@@@@#: * .A3hH@#5S553&amp;@@#h i:i9S #@@@@@@@@@@@@@@@@@@@@@@@@@A. * * * ÂèàÁúãÊ∫êÁ†ÅÔºåÁúã‰Ω†Â¶πÂ¶πÂëÄÔºÅ */ ÂàùÈü≥ 12345678910111213141516171819202122232425/*** *_______________#####_______________________ *______________######_____________________ *______________#######____________________ *_____________#__######___________________ *____________##__###_###__________________ *____________##_####___##_________________ *___________##__#####_##________________ *__________##__######_##_______________ *________###___######__###_____________ *_______###___##_####___###___________ *_______###___##___####___###_________ *______###___##__######___###_______ *_____###___##_#######__###______ *____####__###########_####_____ *____####__###############____ *___####__###_#########_####___ *___####__###_###_#####___###___ *___####____#__###___###_____###___ *___####________###____###_____###____ *____###________###_____###_____##_____ *_____###________##______###_____##______ *______###______;##________##______#________ *________#_______##________##______________ */ ÊîªÂüéÊπø 123456789101112131415161718192021/*** * ,%%%%%%%%, * ,%%/\%%%%/\%% * ,%%%\c "" J/%%% * %. %%%%/ o o \%%% * `%%. %%%% _ |%%% * `%% `%%%%(__Y__)%%' * // ;%%%%`\-/%%%' * (( / `%%%%%%%' * \\ .' | * \\ / \ | | * \\/ ) | | * \ /_ | |__ * (___________))))))) ÊîªÂüéÊπø * * _ _ * __ _(_)_ _(_) __ _ _ __ * \ \ / / \ \ / / |/ _` |'_ \ * \ V /| |\ V /| | (_| | | | | * \_/ |_| \_/ |_|\__,_|_| |_| */ ÊéòÈáë 1234567891011121314151617181920212223/*** * https://gold.xitu.io/ * ÔºëÔºëÔºë Ôºë * ÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºëÔºë * ÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºë * ÔºëÔºë ÔºëÔºëÔºë ÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºë * ÔºëÔºëÔºëÔºë Ôºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºëÔºë ÔºëÔºëÔºëÔºë * ÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºë * ÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºë ÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºë * ÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë * ÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë * ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºë * ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºë * ÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë * ÔºëÔºëÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë * ÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºëÔºë * ÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºëÔºë ÔºëÔºë ÔºëÔºëÔºë * ÔºëÔºë ÔºëÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºë ÔºëÔºëÔºë ÔºëÔºë ÔºëÔºëÔºë * ÔºëÔºëÔºëÔºë ÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºë ÔºëÔºëÔºë ÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºë * ÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë * ÔºëÔºë ÔºëÔºëÔºë ÔºëÔºëÔºë ÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºëÔºë */ Áü•‰πé 123456789101112131415161718192021222324/*** * https://www.zhihu.com/ * _____ _____ _____ _____ * /\ \ /\ \ /\ \ /\ \ * /::\____\ /::\ \ /::\ \ /::\ \ * /:::/ / \:::\ \ /::::\ \ /::::\ \ * /:::/ / \:::\ \ /::::::\ \ /::::::\ \ * /:::/ / \:::\ \ /:::/\:::\ \ /:::/\:::\ \ * /:::/____/ \:::\ \ /:::/__\:::\ \ /:::/__\:::\ \ * /::::\ \ /::::\ \ /::::\ \:::\ \ /::::\ \:::\ \ * /::::::\ \ _____ ____ /::::::\ \ /::::::\ \:::\ \ /::::::\ \:::\ \ * /:::/\:::\ \ /\ \ /\ \ /:::/\:::\ \ /:::/\:::\ \:::\____\ /:::/\:::\ \:::\ \ * /:::/ \:::\ /::\____\/::\ \/:::/ \:::\____\/:::/ \:::\ \:::| |/:::/__\:::\ \:::\____\ * \::/ \:::\ /:::/ /\:::\ /:::/ \::/ /\::/ |::::\ /:::|____|\:::\ \:::\ \::/ / * \/____/ \:::\/:::/ / \:::\/:::/ / \/____/ \/____|:::::\/:::/ / \:::\ \:::\ \/____/ * \::::::/ / \::::::/ / |:::::::::/ / \:::\ \:::\ \ * \::::/ / \::::/____/ |::|\::::/ / \:::\ \:::\____\ * /:::/ / \:::\ \ |::| \::/____/ \:::\ \::/ / * /:::/ / \:::\ \ |::| ~| \:::\ \/____/ * /:::/ / \:::\ \ |::| | \:::\ \ * /:::/ / \:::\____\ \::| | \:::\____\ * \::/ / \::/ / \:| | \::/ / * \/____/ \/____/ \|___| \/____/ */ freebuf 1234567891011121314151617181920212223242526272829/*** * http://www.freebuf.com/ * _.._ ,------------. * ,' `. ( We want you! ) * / __) __` \ `-,----------' * ( (`-`(-') ) _.-' * /) \ = / ( * /' |--' . \ * ( ,---| `-.)__` * )( `-.,--' _`-. * '/,' ( Uu", * (_ , `/,-' ) * `.__, : `-'/ /`--' * | `--' | * ` `-._ / * \ ( * /\ . \. freebuf * / |` \ ,-\ * / \| .) / \ * ( ,'|\ ,' : * | \,`.`--"/ &#125; * `,' \ |,' / * / "-._ `-/ | * "-. "-.,'| ; * / _/["---'""] * : / |"- ' * ' | / * ` | */ Alibaba 12345678910111213141516171819202122232425262728293031323334353637/*** * https://campus.alibaba.com/ * `:::::::::::, * `::;:::::::;:::::::, ` * `::;;:::::::@@@@;:::::::` * ,:::::::::::::@ #@':::::` * :::::::::::::::'@@ @;:::: * ::::::::::::'@@@@'``` .+:::` * ::::::::::;@@@#. ,:::, * .::::::::+@#@` :::: * :::::::+@@' :::: * `:::::'@@: `:::. * ,::::@@: ` :::: * ;::::::@ .:::; * :;:::::;@` ` :::; * :::::::::@` @ ;:::: * :::::::::#` @` ,:::: * :::::::::@` +@ @ .::::` * .::::::'@@` `@@' @ ::::, * :::::::++@@@@@@@@@@. ::::; * ;:::::::+, `..` ::::: * ,::::::::', ::::: * :::::::::+, :::::` * :::::::::+@. ,::::.` `, * ::::::;;@+ .::;:: `; * :::::::@@ `:::;: `::`` * ::::::#@ ;:::: .::` * :::::;@ :::::` .;::` * :::::@ `:;::: `::::; * :::::# :::::. `,;::::: * :::::: ` ::::::,.,::::::::::. * ,::::::` .:: ::::::::::::::::;` * ;::::::::,````.,:::::, ::::::::::::::. * :::::::::::::::::: ` `::::::::::` * `::::::::::::, .:::. * `..` */ Â∞èËÄÅÈº† 123456789101112131415/*** * http://www.flvcd.com/ * .--, .--, * ( ( \.---./ ) ) * '.__/o o\__.' * &#123;= ^ =&#125; * &gt; - &lt; * / \ * // \\ * //| . |\\ * "'\ /'"_.-~^`'-. * \ _ /--' ` * ___)( )(___ * (((__) (__))) È´òÂ±±‰ª∞Ê≠¢,ÊôØË°åË°åÊ≠¢.ËôΩ‰∏çËÉΩËá≥,ÂøÉÂêëÂæÄ‰πã„ÄÇ */ È°∂ 12345678910111213141516/*** * È†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†Ç È†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†Ç * È†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†Ç È†ÇÈ†Ç * È†ÇÈ†Ç È†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†Ç * È†ÇÈ†Ç È†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†ÇÈ†Ç * È†ÇÈ†Ç È†ÇÈ†Ç È†ÇÈ†Ç * È†ÇÈ†Ç È†ÇÈ†Ç È†ÇÈ†ÇÈ†Ç È†ÇÈ†Ç * È†ÇÈ†Ç È†ÇÈ†Ç È†ÇÈ†ÇÈ†Ç È†ÇÈ†Ç * È†ÇÈ†Ç È†ÇÈ†Ç È†ÇÈ†ÇÈ†Ç È†ÇÈ†Ç * È†ÇÈ†Ç È†ÇÈ†Ç È†ÇÈ†ÇÈ†Ç È†ÇÈ†Ç * È†ÇÈ†Ç È†ÇÈ†ÇÈ†Ç * È†ÇÈ†Ç È†ÇÈ†Ç È†ÇÈ†Ç È†ÇÈ†Ç * È†ÇÈ†ÇÈ†ÇÈ†Ç È†ÇÈ†ÇÈ†ÇÈ†ÇÈ†Ç È†ÇÈ†ÇÈ†ÇÈ†ÇÈ†Ç * È†ÇÈ†ÇÈ†ÇÈ†Ç È†ÇÈ†ÇÈ†ÇÈ†Ç È†ÇÈ†ÇÈ†ÇÈ†Ç */ ÂçïË∫´ÁãóÁöÑÂáùËßÜ 123456789101112131415/*** * ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñÑ‚ñë‚ñë * ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñê‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñÑ‚ñÄ‚ñí‚ñå‚ñë * ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñê‚ñÄ‚ñí‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñÑ‚ñÄ‚ñí‚ñí‚ñí‚ñê * ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñê‚ñÑ‚ñÄ‚ñí‚ñí‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÑ‚ñÑ‚ñÑ‚ñÄ‚ñí‚ñí‚ñí‚ñí‚ñí‚ñê * ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñÑ‚ñÑ‚ñÄ‚ñí‚ñë‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñà‚ñí‚ñí‚ñÑ‚ñà‚ñí‚ñê * ‚ñë‚ñë‚ñë‚ñÑ‚ñÄ‚ñí‚ñí‚ñí‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñÄ‚ñà‚ñà‚ñÄ‚ñí‚ñå * ‚ñë‚ñë‚ñê‚ñí‚ñí‚ñí‚ñÑ‚ñÑ‚ñí‚ñí‚ñí‚ñí‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñÄ‚ñÑ‚ñí‚ñí * ‚ñë‚ñë‚ñå‚ñë‚ñë‚ñå‚ñà‚ñÄ‚ñí‚ñí‚ñí‚ñí‚ñí‚ñÑ‚ñÄ‚ñà‚ñÑ‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñà‚ñí‚ñê * ‚ñë‚ñê‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñå‚ñà‚ñà‚ñÄ‚ñí‚ñí‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñÄ‚ñÑ * ‚ñë‚ñå‚ñë‚ñí‚ñÑ‚ñà‚ñà‚ñÑ‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñí * ‚ñÄ‚ñí‚ñÄ‚ñê‚ñÑ‚ñà‚ñÑ‚ñà‚ñå‚ñÑ‚ñë‚ñÄ‚ñí‚ñí‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí * ÂçïË∫´ÁãóÂ∞±ËøôÊ†∑ÈªòÈªòÂú∞ÁúãÁùÄ‰Ω†Ôºå‰∏ÄÂè•ËØù‰πü‰∏çËØ¥„ÄÇ */ ÂüÉÂèäÊ≥ïËÄÅ 1234567891011121314151617181920212223242526272829303132333435/*** * /88888888888888888888888888\ * |88888888888888888888888888/ * |~~____~~~~~~~~~"""""""""| * / \_________/"""""""""""""\ * / | \ \ * / | 88 88 \ \ * / | 88 88 \ \ * / / \ | * / | ________ \ | * \ | \______/ / | * /"\ \ \____________ / | * | |__________\_ | | / / * /""""\ \_------' '-------/ -- * \____/,___________\ -------/ * ------* | \ * || | \ * || | ^ \ * || | | \ \ * || | | \ \ * || | | \ \ * \| / /"""\/ / * ------------- | | / * |\--_ \____/___/ * | |\-_ | * | | \_ | * | | \ | * | | \_ | * | | ----___ | * | | \----------| * / | | ----------""\ * /"\--"--_| | | \ * |_______/ \______________/ ) * \___/ */ ËÄ∂ 123456789101112131415161718192021222324252627282930313233343536/*** * d*#$. * zP"""""$e. $" $o * 4$ '$ $" $ * '$ '$ J$ $F * 'b $k $&gt; $ * $k $r J$ d$ * '$ $ $" $~ * '$ "$ '$E $ * $ $L $" $F ... * $. 4B $ $$$*"""*b * '$ $. $$ $$ $F * "$ R$ $F $" $ * $k ?$ u* dF .$ * ^$. $$" z$ u$$$$e * #$b $E.dW@e$" ?$ * #$ .o$$# d$$$$c ?F * $ .d$$#" . zo$&gt; #$r .uF * $L .u$*" $&amp;$$$k .$$d$$F * $$" ""^"$$$P"$P9$ * JP .o$$$$u:$P $$ * $ ..ue$" "" $" * d$ $F $ * $$ ....udE 4B * #$ """"` $r @$ * ^$L '$ $F * RN 4N $ * *$b d$ * $$k $F * $$b $F * $"" $F * '$ $ * $L $ * '$ $ * $ $ */ Âè∞ÂºèÁîµËÑë 1234567891011121314151617181920/*** * ,----------------, ,---------, * ,-----------------------, ," ,"| * ," ,"| ," ," | * +-----------------------+ | ," ," | * | .-----------------. | | +---------+ | * | | | | | | -==----'| | * | | I LOVE DOS! | | | | | | * | | Bad command or | | |/----|`---= | | * | | C:\&gt;_ | | | ,/|==== ooo | ; * | | | | | // |(((( [33]| ," * | `-----------------' |," .;'| |(((( | ," * +-----------------------+ ;; | | |," * /_)______________(_/ //' | +---------+ * ___________________________/___ `, * / oooooooooooooooo .o. oooo /, \,"----------- * / ==ooooooooooooooo==.o. ooo= // ,`\--&#123;)B ," * /_==__==========__==_ooo__ooo=_/' /___________," * */ ‰π¶Êú¨ 123456789101112/*** * .-~~~~~~~~~-._ _.-~~~~~~~~~-. * __.' ~. .~ `.__ * .'// \./ \\`. * .'// | \\`. * .'// .-~"""""""~~~~-._ | _,-~~~~"""""""~-. \\`. * .'//.-" `-. | .-' "-.\\`. * .'//______.============-.. \ | / ..-============.______\\`. * .'______________________________\|/______________________________`. * */ ‰∫∫Áîü 12345678910111213141516171819202122/** * Âá∫Áîü * || * || * \ / * \/ * ÈùíÂπ¥ * ÔºàÂπ¥ÈæÑ = rand(20,25))Ôºâ „Ää============== * || || * || || * || Á•ùÁ¶èÊâÄÊúâÂºÄÂèëÂ∑•‰ΩúËÄÖ || * || Ê∞∏ËøúÂπ¥ËΩª || * || || * \ / || * \/ || *Ôºà 20 &lt;= Âπ¥ÈæÑ &lt;= 25Ôºâ =============== * || * || * \ / * \/ * Á≠âÊ≠ªÁä∂ÊÄÅ */ ÊØîÂÖãÂ§ßÈ≠îÁéã 12345678910111213141516171819202122232425/* _.---..._ ./^ ^-._ ./^C===. ^\. /\ .|' \\ _ ^|.^.| ___.--'_ ( ) . ./ /|| /.---^T\ , | / /||| C' ._`| ._ / __,-/ / /-,|| \ \/ ; /O / _ |) )|, i \./^O\./_,-^/^ ,;-^,' \ |`--/ ..-^^ |_-^ `| \^- /|: i. .-- / '|. i ==' /' |\._ _./`._ // |. ^-ooo.._ _.oo../' | ^-.__./X/ . `| |####b d## |' ^^^^ / | _\#### ###b ^^^^^^^^--. ...--^--^^^^^^^_.d### ###b._ Y _.d##### #####b._ | _.d####### "Piccolo" no. 2 (from Dragonball Z) --- Steven J. Simmons */ Fuck you 123456789101112131415161718192021/* * .::::. * .::::::::. * ::::::::::: FUCK YOU * ..:::::::::::' * '::::::::::::' * .:::::::::: * '::::::::::::::.. * ..::::::::::::. * ``:::::::::::::::: * ::::``:::::::::' .:::. * ::::' ':::::' .::::::::. * .::::' :::: .:::::::'::::. * .:::' ::::: .:::::::::' ':::::. * .::' :::::.:::::::::' ':::::. * .::' ::::::::::::::' ``::::. * ...::: ::::::::::::' ``::. * ```` ':. ':::::::::' ::::.. * '.:::::' ':'````.. */ Âõ¥Ê£ã 12345678910111213141516171819202122232425262728293031323334 // _______________________________________ // / ___________________________________ \// _--""""--_ / /_/_/_/_/_|_|_|_|_|_|_|_|_|_\_\_\_\_\ \// / \ / /_/_/_/_J__L_L_L_|_|_|_J_J_J__L_\_\_\_\ \// /\ /\ / /_/_/_J__L_J__L_L_|_|_|_J_J__L_J__L_\_\_\ \// L ""-____-"" J / /_/_J__L_J__L_J_J__L_|_J__L_L_J__L_J__L_\_\ \// \ / / /_/__L_/__L_J__L_J__L_|_J__L_J__L_J__\_J__\_\ \// \_ _/ / /_J__/_J__/__L_J__|__L_|_J__|__L_J__\__L_\__L_\ \// _--"""""--_" / / F / F J J | F J | F J | F F J \ J \ \// / \ / /--/-J--/--L--|--L-J--J--|--L--L-J--|--J--\--L-\--\ \///\ /\ / /__/__L_J__J___L_J__J__|__|__|__L__L_J___L__L_J__\__\ \//L ""-_____-"" J / / / / F F J J | | | | | F F J J \ \ \ \//\ / / /--/--/--/--J---L--|--|--|--o--|--|--|--J---L--\--\--\--\ \// \_ _/ / /__/__J__J___L__J___L__L__L__|__J__J__J___L__J___L__L__\__\ \// "--___--" / / / F F J F J J F | J F F J F J J \ \ \// / /--/---/--J---L--J---L--|--J---|---L--|--J---L--J---L--\---\--\ \// / /__J___/___L__/___L__J___L__J___|___L__J___L__J___\__J___\___L__\ \// / / F J / J J | J J | F F | F F \ F J \ \// / /---/---L--J---L---L---L--|---|---|---|---|--J---J---J---L--J---\---\ \// / /___/___/___L__J___J___J___|___|___|___|___|___L___L___L__J___\___\___\ \// / / / / / F F F F F | J J J J J \ \ \ \ \// / /___/___J___J___J___J___J____L___L___|___J___J____L___L___L___L___L___\___\ \// / / / F F F | | J F | J F | | J J J \ \ \// / /___J____/___/___J____L___L___|___J____|____L___|___J___J____L___\___\____L___\ \// / / F / J F J J | J | F | F F J F \ J \ \// / /____/___J____L___/____L___|____L___|____|____|___J____|___J____\___J____L___\____\ \// / / / F / J J F J F | J F J F F \ J \ \ \// / /____/____/___J____L____|____L___J____L____|____J____L___J____|____J____L___\____\____\ \// / \///_______________________________________________________________________________________________\//| |//| hs |//|_______________________________________________________________________________________________| Â±Ö‰∏≠ÁöÑ‰ΩõÁ•ñ 1234567891011121314151617181920212223/* _ooOoo_ o8888888o 88" . "88 (| -_- |) O\ = /O ____/`---'\____ .' \\| |// `. / \\||| : |||// \ / _||||| -:- |||||- \ | | \\\ - /// | | | \_| ''\---/'' | | \ .-\__ `-` ___/-. / ___`. .' /--.--\ `. . __ ."" '&lt; `.___\_&lt;|&gt;_/___.' &gt;'"". | | : `- \`.;`\ _ /`;.`/ - ` : | | \ \ `-. \_ __\ /__ _/ .-` / /======`-.____`-.___\_____/___.-`____.-'====== `=---='^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ‰ΩõÁ•ñ‰øù‰Ωë Ê∞∏Êó†BUG*/ windowsÂõæÊ†á 123456789101112131415161718/* __ ,-~¬®^ ^¬®-, _, / / ;^-._...,¬®/ / / / / / / / / / / / / /,.-:''-,_ / / / _,.-:--._ ^ ^:-._ __../ /^ / /¬®:.._¬®__.; / / / ^ / / / / / / / / / /_,.--:^-._/ / /^ ^¬®¬®-.___.:^ (R) - G33K */ ‰∏ÉÈæôÁè†ÊØîÂÖã 1234567891011121314151617181920212223242526/* /^_.-^ _ --^=_ ./'-^__ _&gt;=\^^==^-. |'/^^_/ /^ \ \.^\\\/\ ,|/| ' /' _____\ `\|.^.| |'/ /_--^^ . ^^-./ /|| |/,--^ , | / /||' ._|/ \ / __,-/ / /-,|| \ '/ ; /O / _ |) )|, i \./^O\./_,-^/^ ,;-^,' \ |`--/ ..-^^ |_-^ `| \^-_,/^Y\ | ^^\ _i. \".--V_/ /| \. ^\._____...--.&gt;^^^^^^-------...._ / i ^--^^ /'|' |\. |./' | ;___...----/^^^^---|. `._\ /^ /' |'_/' \ `| |' ,/' |' \ _|^-.__./'__.^^\ .| ,| _.-^ `\ ,|`_./^^-----^^._ ` ./ / /^ _.-^^/ |' ^ /-^ ./^ /\ `\_ __.-&lt; _,/ ./' |' `\. `i ^^--/._____...--^ . ./ |. `| | / / `| "Piccolo" (from Dragonball Z) --- Steven J. Simmons */ ‰∏ÉÈæôÁè†ÊÇüÁ©∫ 123456789101112131415161718192021222324252627282930313233/* _ \"-._ _.--"~~"--._ \ " ^. ___ / \.-~_.-~ .-----' /\/"\ /~-._ / / __ _/\-.__\L_.-/\ "-. /.-" \ ( ` \_o&gt;"&lt;o_/ \ .--._\ /' \ \: " :/_/ "` / /\ "\ ~ /~" \ I \/]"-._ _.-"[ ___ \|___/ ./ l \___ ___ .--v~ "v` ( `-.__ __.-' ) ~v" ~v--. .-&#123; | : \_ "~" _/ : | &#125;-. / \ | ~-.,___,.-~ | / \ ] \ | | / [ /\ \| : : |/ /\ / ^._ _K.___,^ ^.___,K_ _.^ \ / / "~/ "\ /" \~" \ \ / / / \ _ : _ / \ \ \ .^--./ / Y___________l___________Y \ \.--^. [ \ / | [/ ] | \ / ] | "v" l________[____/]________j -Row &#125;r" / &#125;------t / \ /`-. / | | Y Y / "-._/ &#125;-----v' | : | 7-. / | |_| | l | / . "-._/ l .[_] : \ : r[]/_. / \_____] "--. "-.____/ "Dragonball Z" ---Row */ Ë∂ÖÁ∫ßËµõ‰∫ö‰∫∫ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134/* MMMMM MMMMMM MMMMMMM MMMMMMMM . MMMMMMMMM HMMMMMMMMMM MMMMMMMMMMMM M MMMMMMMMMMMMM M MMMMMMMMMMMMM M MMMMMMMMMMMMM: oMMMMMMMMMMMMMM .MMMMMMMMMMMMMMo MMMMMMMMMMMMMMM MMMMMMMMMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMMM MMMMMMMMMMMMMMMMMMMMMMMMMMMM. oMMMMMMMMMMMMMMM.M MMMMMMMMMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMMM MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM oMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM: H MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM . MMM MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM M MMMMMM .MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM M MMMMMMMMMM MM. MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM M MMMMMMMMMMMM MM MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM .MMMMMMMMMMMMMM MM MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM MM MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM .MMMMMMMMM MMMMMMMMMMMMMMMMMMMMMMMM.MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM HMMMMMMMMMMMMMMMMMMMMM.MMMMMMMMM.MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMM MMM.oMMMMMMM..MMMMMMMMM:MMMMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMM MM..MMMMMMM...MMMMMMM. MMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMM ..MMMMMM...MMMMMM ..MMMMMMMMMMMMMMMMMMM MMMMMMM:M.MMM.M.. MMMMM M..MMMMM...MMMMMMMMMMMMMMMMMM MMM MMMM. .M..MM.M...MMMMMM..MMMMM.. MMMMMMMMMMMMMMMMMMMMMMMMMMMMMM . MMMM..M....M.....:MMM .MMMMMM..MMMMMMM...MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM MMM.M.. ...M......MM.MMMMM.......MHM.M .MMMMMMMMMMMMMMMMMMMMMMMMM MMMMMMMM..MM. . MMM.....MMMMMM.M.....M ..MM..M MMMMMMMMMMMMMMMMMMM .MMMMMHMM. ..MMMM. MMM............o..... . .MMMMMMMMMMMMMMM MMM. M... .........................M..:.MMMMMMMMMMMM oMMM............ .................M.M.MMMMMMMMM .....MM........................ . MMMMMM M.....M.....................o.MM.MMMMMMMM. M........................M.. ...MMMMMMMMMMMMMo :....MMM..............MMM..oMMMMMMM M...MMM.............MMMMMMM .............:MMMMMMMM M..... MMM.....M M M............. ................M ooM.................MM MoMMMMMoooM MMoooM......................MoooooooH..oMM MHooooMoM.....................MMooooooM........M oooooooMoooM......... o........MoooooooM............ Mooooooooooo.......M.........Moooooooo:..............M MooMoooooooooM...M........:Mooooooooooo:..............M M..oooooooooooo .........Mooooooooooooooo..............M M...Mooo:oooooooo.M....ooooooooooooooooooo..M...........M ...oooooMoooooooM..Mooooooooooooo:oooooooM.M...........M. M...ooooooMoo:ooooMoooooooooooooHoooooooooH:M. ...........: M..MoooooooMoooooooooooooooooo:ooooooMooooMoM..............M M..ooooooooooMooooooooooooooHoooooooMooHooooM...............M ...ooooooooooooooooooo:MooooooooooooooMoMoooM................ M...oooooooooooooooooooooooooooooooooooooMooMM................M ...MooooooooooooooooooooooooooooooooooooooooMo ................ ...MooooooooooooooooooooooooooooooooooooooooM M................M M...ooooooooooooooooooooooooooooooooooooooooM ................M ...MoooooooooooooooooooooooooooooooooooooooMM .:............... .....MooooooooooooooooooooooooooooooooooooMoo .............M M...... ooooooooooooooooooooooooooooooooooooM M..............M M........MooooMMM MM MM MMMMMMMMMooooooooM M...............M .........HM M: MM :MMMMMM M M............... M..........M M MoM M M................M M.........:M MoH M M M MooooHoooMM. M M...............M M..........Moooo MMooM oooooMooooooooM M..............H M.........MooooM Mooo : ooooooMooooMoooM M........ . .o.M H.. .....ooooo oooo M MooooooooooooooM M... MMMMMMMMMMM MMMMMMMMMMooooM M oooo . ooooooMooooooooM .MMMMMMMMMMMMMMM MMMMMMMMMMooooH : ooooH oooooooooooooooo MMMMMMMMMMMMMMM MMMMMMMMMMoooo ooooM Moooooooooooooooo .MMMMMMMMMMMMMMM MMMMMMMMMMoooo ooooM MooooooooooooooooM MMMMMMMMMMMMMMM MMMMMMMMMMoooM ooooM ooooooooooooooooo MMMMMMMMMMM:M MMMMMMMMMMoooM MooooM oooooooooooMoooooo MH........... . ......Mooo. MooooM oooooooooooooooooo M............M M.M......oooo MooooM Moooooooooooooooooo: .........M..... M.M.....Moooo MooooM ooooooooooooooooooM .M............ .......MooooH MooooM oooooooooMoooooooooo M..o...M..o....M .o....HMooooM MooooH MooooooooMooooooooooM .:M...M.......M M..M.....MoooM :oooo: .MooooooooHooMoooooooooM M M... ..oM.M M...M.:.Mooo. MMMMooooo oooooooooooMoooooooooooooM ....M. M M:M..o.Moooooooooooooo MooooooooooooooMooooooooooooM .Mo MooooooooooooooMooooooooooooMoMoooooooooooooo Mooooooooooooooo:ooooooooooooooooooooooooooooo ooooooooooooooooMooooooooooMoooooooooooooooooo ooooooooooooooooMoooooooooooMooooooooooooooooHo ooMooooooooooooooMoooooooooooooooooooooooooooMoM MooMoooooooooooooo.ooooooooooooooooooooooooooo:oM MoooooooooooooooooooooooooooooooooooooooooooooooM MoooMooooooooooooooMooooooooooooooooooooooooooooo. MoooMooooooooooooooMoooooooooooooooooooooooooMooooM MooooooooooooooooooMoooooooooooooooooooooooooMoooooM MooooMoooooooooooooMoooooooooooooooooooooooooMoHooooM ooooooMooooooooooooooooooooooooooooooooooooooooMoMoooM MooooooooooooooooooooMooooooooooooooooooooooooooMoooooH: MoooooooMooooooooooooMoooooooooooooooooooooooooooooHoooM MooooooooMoooooooooooMoooooooooooooooooooooooooMoooMooooM Moooooooooooooooooooooooooooooooooooooooooooooo.oooMooooo MoooooooooooooooooooooooooooooooooooooooooooooMoooooooooM MooooooooooooooooooooMoooooooooooooooooooooooooooooooooM MooooooooooooooooooooMHooooooooooooooooooooMoooo:ooooo MMooooooooooooooooooMoMHoooooooooooooooooooooooMooooo MMoooooooooooooooMMooo MMooooooooooooooooooooooooooM MMMoooooooooooooMooooo oooooooooooooooooooooMooooo MooMMoooooooooMoooMMoM ooooHooooooooooooooooMooooM MooooMooooooMooooMoooM MoooooMoooooooooooooMooooo ooooooMMooooooooMooooM MoooooooooMooooooooooooooM HooooooMoooooooMooooM HoooooooHooMooooooooooooo oooMoooooooooHoooM MoooooooooMoooooooooM HooooooooooooHM MooooooooMMoooooooM MMMMMMMMMMMMMM Moooooo:MooooHMM MMMMMMM: ... MMMMMMMMMMMMMM M............M MMMMMMMMM .... M.MM.......... M.............M M ..............MM M.............. MMMMM............MMMM ..MMMMMMMM ....M MMMMMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMM...M .MMMMMMMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMMMMMM :MMMMMMMMMMMMMMMMMMH MMMMMMMMMMMMMMMMMMM By EBEN J√©r√¥me MMMMMMMMMMMMMMMMMM MMMMMMMMMMMMMMM HMMMMMM */ ÁöÆÂç°‰∏ò 123456789101112131415161718192021222324252627282930313233343536373839404142/*quu..__ $$$b `---.__ "$$b `--. ___.---uuudP `$$b `.__.------.__ __.---' $$$$" . "$b -' `-.-' $$$" .'| ". d$" _.' | `. / ..." .' | `./ ..::-' _.' | / .:::-' .-' .' : ::''\ _.' | .' .-. .-. `. .' | : /'$$| .@"$\ `. .' _.-' .'|$u$$| |$$,$$| | &lt; _.-' | `:$$:' :$$$$$: `. `. .-' : `"--' | `-. \ :#. == .##. `. `. `\ |#: :##: | &gt; &gt; |#' `..'`..' `##' x: / / \ xXX| / ./ \ xXXX'| / ./ /`-. `. / / : `- ..........., | / .' | ``:::::::' . |&lt; `. | ``` | x| \ `.:``. | .' /' xXX| `:`M`M':. | | ; /:' xXXX'| -'MMMMM:' `. .' : /:' |-'MMMM.-' | | .' /' .'MMM.-' `'`' : ,' |MMM&lt; | `' |tbap\ \ :MM.-' \ | .'' \. `. / / .:::::::.. : / | .:::::::::::`. / | .:::------------\ / / .'' &gt;::' / `',: : .' `:.:' */]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NginxÂ∫îÁî®Âú∫ÊôØ]]></title>
    <url>%2Fposts%2Fcd76424b.html</url>
    <content type="text"><![CDATA[ÂèçÂêë‰ª£ÁêÜ ÂèçÂêë‰ª£ÁêÜÔºöÁÆÄÂçïÊù•ËØ¥Â∞±ÊòØÁúüÂÆûÁöÑÊúçÂä°Âô®‰∏çËÉΩÁõ¥Êé•Ë¢´Â§ñÈÉ®ÁΩëÁªúËÆøÈóÆÔºåÊâÄ‰ª•ÈúÄË¶Å‰∏ÄÂè∞‰ª£ÁêÜÊúçÂä°Âô®ÔºåËÄå‰ª£ÁêÜÊúçÂä°Âô®ËÉΩË¢´Â§ñÈÉ®ÁΩëÁªúËÆøÈóÆÁöÑÂêåÊó∂ÂèàË∑üÁúüÂÆûÊúçÂä°Âô®Âú®Âêå‰∏Ä‰∏™ÁΩëÁªúÁéØÂ¢ÉÔºåÂΩìÁÑ∂‰πüÂèØËÉΩÊòØÂêå‰∏ÄÂè∞ÊúçÂä°Âô®ÔºåÁ´ØÂè£‰∏çÂêåËÄåÂ∑≤„ÄÇ ‰∏ãÈù¢Ë¥¥‰∏ä‰∏ÄÊÆµÁÆÄÂçïÁöÑÂÆûÁé∞ÂèçÂêë‰ª£ÁêÜÁöÑ‰ª£Á†ÅÔºö 123456789server &#123; listen 80; server_name localhost; client_max_body_size 1024M; location / &#123; proxy_pass http://localhost:8080; proxy_set_header Host $host:$server_port; &#125;&#125; ‰øùÂ≠òÈÖçÁΩÆÊñá‰ª∂ÂêéÂêØÂä®NginxÔºåËøôÊ†∑ÂΩìÊàë‰ª¨ËÆøÈóÆlocalhostÁöÑÊó∂ÂÄôÔºåÂ∞±Áõ∏ÂΩì‰∫éËÆøÈóÆ localhost:8080 ‰∫Ü„ÄÇ Ë¥üËΩΩÂùáË°° Ë¥üËΩΩÂùáË°°ÂÖ∂ÊÑèÊÄùÂ∞±ÊòØÂàÜÊëäÂà∞Â§ö‰∏™Êìç‰ΩúÂçïÂÖÉ‰∏äËøõË°åÊâßË°åÔºå‰æãÂ¶ÇWebÊúçÂä°Âô®„ÄÅFTPÊúçÂä°Âô®„ÄÅ‰ºÅ‰∏öÂÖ≥ÈîÆÂ∫îÁî®ÊúçÂä°Âô®ÂíåÂÖ∂‰ªñÂÖ≥ÈîÆ‰ªªÂä°ÊúçÂä°Âô®Á≠âÔºå‰ªéËÄåÂÖ±ÂêåÂÆåÊàêÂ∑•‰Ωú‰ªªÂä°„ÄÇ ÁÆÄÂçïËÄåË®ÄÂ∞±ÊòØÂΩìÊúâ2Âè∞Êàñ‰ª•‰∏äÊúçÂä°Âô®Êó∂ÔºåÊ†πÊçÆËßÑÂàôÈöèÊú∫ÁöÑÂ∞ÜËØ∑Ê±ÇÂàÜÂèëÂà∞ÊåáÂÆöÁöÑÊúçÂä°Âô®‰∏äÂ§ÑÁêÜÔºåË¥üËΩΩÂùáË°°ÈÖçÁΩÆ‰∏ÄËà¨ÈÉΩÈúÄË¶ÅÂêåÊó∂ÈÖçÁΩÆÂèçÂêë‰ª£ÁêÜÔºåÈÄöËøáÂèçÂêë‰ª£ÁêÜË∑≥ËΩ¨Âà∞Ë¥üËΩΩÂùáË°°„ÄÇËÄåNginxÁõÆÂâçÊîØÊåÅËá™Â∏¶3ÁßçË¥üËΩΩÂùáË°°Á≠ñÁï•ÔºåËøòÊúâ2ÁßçÂ∏∏Áî®ÁöÑÁ¨¨‰∏âÊñπÁ≠ñÁï•„ÄÇ RR(ÈªòËÆ§) ÊØè‰∏™ËØ∑Ê±ÇÊåâÊó∂Èó¥È°∫Â∫èÈÄê‰∏ÄÂàÜÈÖçÂà∞‰∏çÂêåÁöÑÂêéÁ´ØÊúçÂä°Âô®ÔºåÂ¶ÇÊûúÂêéÁ´ØÊúçÂä°Âô®downÊéâÔºåËÉΩËá™Âä®ÂâîÈô§„ÄÇ 12345678910111213upstream test &#123; server localhost:8080; server localhost:8081; &#125; server &#123; listen 81; server_name localhost; client_max_body_size 1024M; location / &#123; proxy_pass http://test; proxy_set_header Host $host:$server_port; &#125; &#125; Ë¥üËΩΩÂùáË°°ÁöÑÊ†∏ÂøÉ‰ª£Á†Å: 1234upstream test &#123; server localhost:8080; server localhost:8081; &#125; ÊùÉÈáç ÊåáÂÆöËΩÆËØ¢Âá†ÁéáÔºåweightÂíåËÆøÈóÆÊØîÁéáÊàêÊ≠£ÊØîÔºåÁî®‰∫éÂêéÁ´ØÊúçÂä°Âô®ÊÄßËÉΩ‰∏çÂùáÁöÑÊÉÖÂÜµ„ÄÇ ‰æãÂ¶Ç 1234upstream test &#123; server localhost:8080 weight=9; server localhost:8081 weight=1; &#125; ÈÇ£‰πà10Ê¨°‰∏ÄËà¨Âè™‰ºöÊúâ1Ê¨°‰ºöËÆøÈóÆÂà∞8081ÔºåËÄåÊúâ9Ê¨°‰ºöËÆøÈóÆÂà∞8080„ÄÇ ip_hashÔºàsession‰øùÊåÅÔºâ ‰∏äÈù¢ÁöÑ2ÁßçÊñπÂºèÈÉΩÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÈÇ£Â∞±ÊòØ‰∏ã‰∏Ä‰∏™ËØ∑Ê±ÇÊù•ÁöÑÊó∂ÂÄôËØ∑Ê±ÇÂèØËÉΩÂàÜÂèëÂà∞Âè¶Â§ñ‰∏Ä‰∏™ÊúçÂä°Âô®ÔºåÂΩìÊàë‰ª¨ÁöÑÁ®ãÂ∫è‰∏çÊòØÊó†Áä∂ÊÄÅÁöÑÊó∂ÂÄô(ÈááÁî®‰∫Üsession‰øùÂ≠òÊï∞ÊçÆ)ÔºåËøôÊó∂ÂÄôÂ∞±Êúâ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÂæàÈóÆÈ¢ò‰∫ÜÔºåÊØîÂ¶ÇÊääÁôªÂΩï‰ø°ÊÅØ‰øùÂ≠òÂà∞‰∫Üsession‰∏≠ÔºåÈÇ£‰πàË∑≥ËΩ¨Âà∞Âè¶Â§ñ‰∏ÄÂè∞ÊúçÂä°Âô®ÁöÑÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÈáçÊñ∞ÁôªÂΩï‰∫ÜÔºåÊâÄ‰ª•ÂæàÂ§öÊó∂ÂÄôÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™ÂÆ¢Êà∑Âè™ËÆøÈóÆ‰∏Ä‰∏™ÊúçÂä°Âô®ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÁî®iphash‰∫ÜÔºåiphashÁöÑÊØè‰∏™ËØ∑Ê±ÇÊåâËÆøÈóÆipÁöÑhashÁªìÊûúÂàÜÈÖçÔºåËøôÊ†∑ÊØè‰∏™ËÆøÂÆ¢Âõ∫ÂÆöËÆøÈóÆ‰∏Ä‰∏™ÂêéÁ´ØÊúçÂä°Âô®ÔºåÂèØ‰ª•Ëß£ÂÜ≥sessionÁöÑÈóÆÈ¢ò„ÄÇ 12345upstream test &#123; ip_hash; server localhost:8080; server localhost:8081; &#125; fair(Á¨¨‰∏âÊñπ) ÊåâÂêéÁ´ØÊúçÂä°Âô®ÁöÑÂìçÂ∫îÊó∂Èó¥Êù•ÂàÜÈÖçËØ∑Ê±ÇÔºåÂìçÂ∫îÊó∂Èó¥Áü≠ÁöÑ‰ºòÂÖàÂàÜÈÖç„ÄÇ 12345upstream backend &#123; fair; server localhost:8080; server localhost:8081;&#125; url_hash(Á¨¨‰∏âÊñπ) ÊåâËÆøÈóÆurlÁöÑhashÁªìÊûúÊù•ÂàÜÈÖçËØ∑Ê±ÇÔºå‰ΩøÊØè‰∏™urlÂÆöÂêëÂà∞Âêå‰∏Ä‰∏™ÂêéÁ´ØÊúçÂä°Âô®ÔºåÂêéÁ´ØÊúçÂä°Âô®‰∏∫ÁºìÂ≠òÊó∂ÊØîËæÉÊúâÊïà„ÄÇ Âú®upstream‰∏≠Âä†ÂÖ•hashËØ≠Âè•ÔºåserverËØ≠Âè•‰∏≠‰∏çËÉΩÂÜôÂÖ•weightÁ≠âÂÖ∂‰ªñÁöÑÂèÇÊï∞Ôºåhash_methodÊòØ‰ΩøÁî®ÁöÑhashÁÆóÊ≥ï 123456upstream backend &#123; hash $request_uri; hash_method crc32; server localhost:8080; server localhost:8081; &#125; HTTPÊúçÂä°Âô® NginxÊú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™ÈùôÊÄÅËµÑÊ∫êÁöÑÊúçÂä°Âô®ÔºåÂΩìÂè™ÊúâÈùôÊÄÅËµÑÊ∫êÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®NginxÊù•ÂÅöÊúçÂä°Âô®ÔºåÂêåÊó∂Áé∞Âú®‰πüÂæàÊµÅË°åÂä®ÈùôÂàÜÁ¶ªÔºåÂ∞±ÂèØ‰ª•ÈÄöËøáNginxÊù•ÂÆûÁé∞ÔºåÈ¶ñÂÖàÁúãÁúãNginxÂÅöÈùôÊÄÅËµÑÊ∫êÊúçÂä°Âô®„ÄÇ 123456789server &#123; listen 80; server_name localhost; client_max_body_size 1024M; location / &#123; root E:/wwwroot; index index.html; &#125; &#125; ËøôÊ†∑Â¶ÇÊûúËÆøÈóÆÂ∞±‰ºöÈªòËÆ§ËÆøÈóÆÂà∞EÁõòwwwrootÁõÆÂΩï‰∏ãÈù¢ÁöÑindex.htmlÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÁΩëÁ´ôÂè™ÊòØÈùôÊÄÅÈ°µÈù¢ÁöÑËØùÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•ÈÄöËøáËøôÁßçÊñπÂºèÊù•ÂÆûÁé∞ÈÉ®ÁΩ≤„ÄÇ Âä®ÈùôÂàÜÁ¶ª Âä®ÈùôÂàÜÁ¶ªÊòØËÆ©Âä®ÊÄÅÁΩëÁ´ôÈáåÁöÑÂä®ÊÄÅÁΩëÈ°µÊ†πÊçÆ‰∏ÄÂÆöËßÑÂàôÊää‰∏çÂèòÁöÑËµÑÊ∫êÂíåÁªèÂ∏∏ÂèòÁöÑËµÑÊ∫êÂå∫ÂàÜÂºÄÊù•ÔºåÂä®ÈùôËµÑÊ∫êÂÅöÂ•Ω‰∫ÜÊãÜÂàÜ‰ª•ÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Ê†πÊçÆÈùôÊÄÅËµÑÊ∫êÁöÑÁâπÁÇπÂ∞ÜÂÖ∂ÂÅöÁºìÂ≠òÊìç‰ΩúÔºåËøôÂ∞±ÊòØÁΩëÁ´ôÈùôÊÄÅÂåñÂ§ÑÁêÜÁöÑÊ†∏ÂøÉÊÄùË∑Ø„ÄÇ 123456789101112131415161718192021222324upstream test&#123; server localhost:8080; server localhost:8081; &#125; server &#123; listen 80; server_name localhost; location / &#123; root e:/wwwroot; index index.html; &#125; # ÊâÄÊúâÈùôÊÄÅËØ∑Ê±ÇÈÉΩÁî±nginxÂ§ÑÁêÜÔºåÂ≠òÊîæÁõÆÂΩï‰∏∫html location ~ .(gif|jpg|jpeg|png|bmp|swf|css|js)$ &#123; root e:/wwwroot; &#125; # ÊâÄÊúâÂä®ÊÄÅËØ∑Ê±ÇÈÉΩËΩ¨ÂèëÁªôtomcatÂ§ÑÁêÜ location ~ .(jsp|do)$ &#123; proxy_pass http://test; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root e:/wwwroot; &#125; &#125; ËøôÊ†∑Â∞±ÂèØ‰ª•Â∞ÜHTML‰ª•ÂèäÂõæÁâáÂíåcss‰ª•ÂèäjsÊîæÂà∞wwwrootÁõÆÂΩï‰∏ãÔºåËÄåtomcatÂè™Ë¥üË¥£Â§ÑÁêÜjspÂíåËØ∑Ê±ÇÔºå‰æãÂ¶ÇÂΩìÂêéÁºÄ‰∏∫gifÁöÑÊó∂ÂÄôÔºåNginxÈªòËÆ§‰ºö‰ªéwwwrootËé∑ÂèñÂà∞ÂΩìÂâçËØ∑Ê±ÇÁöÑÂä®ÊÄÅÂõæÊñá‰ª∂ËøîÂõûÔºåÂΩìÁÑ∂ËøôÈáåÁöÑÈùôÊÄÅÊñá‰ª∂Ë∑üNginxÊòØÂêå‰∏ÄÂè∞ÊúçÂä°Âô®Ôºå‰πüÂèØ‰ª•Âú®Âè¶Â§ñ‰∏ÄÂè∞ÊúçÂä°Âô®ÔºåÁÑ∂ÂêéÈÄöËøáÂèçÂêë‰ª£ÁêÜÂíåË¥üËΩΩÂùáË°°ÈÖçÁΩÆËøáÂéªÂ∞±Â•Ω‰∫Ü Nginx ÈÖçÁΩÆÊñá‰ª∂ÁªìÊûÑ 12345678910111213141516171819202122232425... #ÂÖ®Â±ÄÂùóevents &#123; #eventsÂùó ...&#125;http #httpÂùó&#123; ... #httpÂÖ®Â±ÄÂùó server #serverÂùó &#123; ... #serverÂÖ®Â±ÄÂùó location [PATTERN] #locationÂùó &#123; ... &#125; location [PATTERN] &#123; ... &#125; &#125; server &#123; ... &#125; ... #httpÂÖ®Â±ÄÂùó&#125; ÂÖ®Â±ÄÂùóÔºöÈÖçÁΩÆÂΩ±ÂìçnginxÂÖ®Â±ÄÁöÑÊåá‰ª§„ÄÇ‰∏ÄËà¨ÊúâËøêË°ånginxÊúçÂä°Âô®ÁöÑÁî®Êà∑ÁªÑÔºånginxËøõÁ®ãpidÂ≠òÊîæË∑ØÂæÑÔºåÊó•ÂøóÂ≠òÊîæË∑ØÂæÑÔºåÈÖçÁΩÆÊñá‰ª∂ÂºïÂÖ•ÔºåÂÖÅËÆ∏ÁîüÊàêworker processÊï∞Á≠â„ÄÇeventsÂùóÔºöÈÖçÁΩÆÂΩ±ÂìçnginxÊúçÂä°Âô®Êàñ‰∏éÁî®Êà∑ÁöÑÁΩëÁªúËøûÊé•„ÄÇÊúâÊØè‰∏™ËøõÁ®ãÁöÑÊúÄÂ§ßËøûÊé•Êï∞ÔºåÈÄâÂèñÂì™Áßç‰∫ã‰ª∂È©±Âä®Ê®°ÂûãÂ§ÑÁêÜËøûÊé•ËØ∑Ê±ÇÔºåÊòØÂê¶ÂÖÅËÆ∏ÂêåÊó∂Êé•ÂèóÂ§ö‰∏™ÁΩëË∑ØËøûÊé•ÔºåÂºÄÂêØÂ§ö‰∏™ÁΩëÁªúËøûÊé•Â∫èÂàóÂåñÁ≠â„ÄÇhttpÂùóÔºöÂèØ‰ª•ÂµåÂ•óÂ§ö‰∏™serverÔºåÈÖçÁΩÆ‰ª£ÁêÜÔºåÁºìÂ≠òÔºåÊó•ÂøóÂÆö‰πâÁ≠âÁªùÂ§ßÂ§öÊï∞ÂäüËÉΩÂíåÁ¨¨‰∏âÊñπÊ®°ÂùóÁöÑÈÖçÁΩÆ„ÄÇÂ¶ÇÊñá‰ª∂ÂºïÂÖ•Ôºåmime-typeÂÆö‰πâÔºåÊó•ÂøóËá™ÂÆö‰πâÔºåÊòØÂê¶‰ΩøÁî®sendfile‰º†ËæìÊñá‰ª∂ÔºåËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥ÔºåÂçïËøûÊé•ËØ∑Ê±ÇÊï∞Á≠â„ÄÇserverÂùóÔºöÈÖçÁΩÆËôöÊãü‰∏ªÊú∫ÁöÑÁõ∏ÂÖ≥ÂèÇÊï∞Ôºå‰∏Ä‰∏™http‰∏≠ÂèØ‰ª•ÊúâÂ§ö‰∏™server„ÄÇlocationÂùóÔºöÈÖçÁΩÆËØ∑Ê±ÇÁöÑË∑ØÁî±Ôºå‰ª•ÂèäÂêÑÁßçÈ°µÈù¢ÁöÑÂ§ÑÁêÜÊÉÖÂÜµ„ÄÇ ÈôÑ‰∏ä‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂Ôºå‰Ωú‰∏∫ÂèÇËÄÉÁêÜËß£ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556########### ÊØè‰∏™Êåá‰ª§ÂøÖÈ°ªÊúâÂàÜÂè∑ÁªìÊùü„ÄÇ##################user administrator administrators; #ÈÖçÁΩÆÁî®Êà∑ÊàñËÄÖÁªÑÔºåÈªòËÆ§‰∏∫nobody nobody„ÄÇ#worker_processes 2; #ÂÖÅËÆ∏ÁîüÊàêÁöÑËøõÁ®ãÊï∞ÔºåÈªòËÆ§‰∏∫1#pid /nginx/pid/nginx.pid; #ÊåáÂÆönginxËøõÁ®ãËøêË°åÊñá‰ª∂Â≠òÊîæÂú∞ÂùÄerror_log log/error.log debug; #Âà∂ÂÆöÊó•ÂøóË∑ØÂæÑÔºåÁ∫ßÂà´„ÄÇËøô‰∏™ËÆæÁΩÆÂèØ‰ª•ÊîæÂÖ•ÂÖ®Â±ÄÂùóÔºåhttpÂùóÔºåserverÂùóÔºåÁ∫ßÂà´‰ª•Ê≠§‰∏∫Ôºödebug|info|notice|warn|error|crit|alert|emergevents &#123; accept_mutex on; #ËÆæÁΩÆÁΩëË∑ØËøûÊé•Â∫èÂàóÂåñÔºåÈò≤Ê≠¢ÊÉäÁæ§Áé∞Ë±°ÂèëÁîüÔºåÈªòËÆ§‰∏∫on multi_accept on; #ËÆæÁΩÆ‰∏Ä‰∏™ËøõÁ®ãÊòØÂê¶ÂêåÊó∂Êé•ÂèóÂ§ö‰∏™ÁΩëÁªúËøûÊé•ÔºåÈªòËÆ§‰∏∫off #use epoll; #‰∫ã‰ª∂È©±Âä®Ê®°ÂûãÔºåselect|poll|kqueue|epoll|resig|/dev/poll|eventport worker_connections 1024; #ÊúÄÂ§ßËøûÊé•Êï∞ÔºåÈªòËÆ§‰∏∫512&#125;http &#123; include mime.types; #Êñá‰ª∂Êâ©Â±ïÂêç‰∏éÊñá‰ª∂Á±ªÂûãÊò†Â∞ÑË°® default_type application/octet-stream; #ÈªòËÆ§Êñá‰ª∂Á±ªÂûãÔºåÈªòËÆ§‰∏∫text/plain #access_log off; #ÂèñÊ∂àÊúçÂä°Êó•Âøó log_format myFormat &apos;$remote_addr‚Äì$remote_user [$time_local] $request $status $body_bytes_sent $http_referer $http_user_agent $http_x_forwarded_for&apos;; #Ëá™ÂÆö‰πâÊ†ºÂºè access_log log/access.log myFormat; #combined‰∏∫Êó•ÂøóÊ†ºÂºèÁöÑÈªòËÆ§ÂÄº sendfile on; #ÂÖÅËÆ∏sendfileÊñπÂºè‰º†ËæìÊñá‰ª∂ÔºåÈªòËÆ§‰∏∫offÔºåÂèØ‰ª•Âú®httpÂùóÔºåserverÂùóÔºålocationÂùó„ÄÇ sendfile_max_chunk 100k; #ÊØè‰∏™ËøõÁ®ãÊØèÊ¨°Ë∞ÉÁî®‰º†ËæìÊï∞Èáè‰∏çËÉΩÂ§ß‰∫éËÆæÂÆöÁöÑÂÄºÔºåÈªòËÆ§‰∏∫0ÔºåÂç≥‰∏çËÆæ‰∏äÈôê„ÄÇ keepalive_timeout 65; #ËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥ÔºåÈªòËÆ§‰∏∫75sÔºåÂèØ‰ª•Âú®httpÔºåserverÔºålocationÂùó„ÄÇ upstream mysvr &#123; server 127.0.0.1:7878; server 192.168.10.121:3333 backup; #ÁÉ≠Â§á &#125; error_page 404 https://www.baidu.com; #ÈîôËØØÈ°µ server &#123; keepalive_requests 120; #ÂçïËøûÊé•ËØ∑Ê±Ç‰∏äÈôêÊ¨°Êï∞„ÄÇ listen 4545; #ÁõëÂê¨Á´ØÂè£ server_name 127.0.0.1; #ÁõëÂê¨Âú∞ÂùÄ location ~*^.+$ &#123; #ËØ∑Ê±ÇÁöÑurlËøáÊª§ÔºåÊ≠£ÂàôÂåπÈÖçÔºå~‰∏∫Âå∫ÂàÜÂ§ßÂ∞èÂÜôÔºå~*‰∏∫‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜô„ÄÇ #root path; #Ê†πÁõÆÂΩï #index vv.txt; #ËÆæÁΩÆÈªòËÆ§È°µ proxy_pass http://mysvr; #ËØ∑Ê±ÇËΩ¨Âêëmysvr ÂÆö‰πâÁöÑÊúçÂä°Âô®ÂàóË°® deny 127.0.0.1; #ÊãíÁªùÁöÑip allow 172.18.5.54; #ÂÖÅËÆ∏ÁöÑip &#125; &#125;&#125; ‰∏äÈù¢ÊòØnginxÁöÑÂü∫Êú¨ÈÖçÁΩÆÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊúâ‰ª•‰∏ãÂá†ÁÇπÔºö $remote_addr ‰∏é$http_x_forwarded_for Áî®‰ª•ËÆ∞ÂΩïÂÆ¢Êà∑Á´ØÁöÑipÂú∞ÂùÄÔºõ$remote_user ÔºöÁî®Êù•ËÆ∞ÂΩïÂÆ¢Êà∑Á´ØÁî®Êà∑ÂêçÁß∞Ôºõ$time_local Ôºö Áî®Êù•ËÆ∞ÂΩïËÆøÈóÆÊó∂Èó¥‰∏éÊó∂Âå∫Ôºõ$request Ôºö Áî®Êù•ËÆ∞ÂΩïËØ∑Ê±ÇÁöÑurl‰∏éhttpÂçèËÆÆÔºõ$status Ôºö Áî®Êù•ËÆ∞ÂΩïËØ∑Ê±ÇÁä∂ÊÄÅÔºõÊàêÂäüÊòØ200Ôºõ$body_bytes_s ent ÔºöËÆ∞ÂΩïÂèëÈÄÅÁªôÂÆ¢Êà∑Á´ØÊñá‰ª∂‰∏ª‰ΩìÂÜÖÂÆπÂ§ßÂ∞èÔºõ$http_referer ÔºöÁî®Êù•ËÆ∞ÂΩï‰ªéÈÇ£‰∏™È°µÈù¢ÈìæÊé•ËÆøÈóÆËøáÊù•ÁöÑÔºõ$http_user_agent ÔºöËÆ∞ÂΩïÂÆ¢Êà∑Á´ØÊµèËßàÂô®ÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºõÊÉäÁæ§Áé∞Ë±°Ôºö‰∏Ä‰∏™ÁΩëË∑ØËøûÊé•Âà∞Êù•ÔºåÂ§ö‰∏™Áù°Áú†ÁöÑËøõÁ®ãË¢´ÂêåÊó∂Âè´ÈÜíÔºå‰ΩÜÂè™Êúâ‰∏Ä‰∏™ËøõÁ®ãËÉΩËé∑ÂæóÈìæÊé•ÔºåËøôÊ†∑‰ºöÂΩ±ÂìçÁ≥ªÁªüÊÄßËÉΩ„ÄÇÊØè‰∏™Êåá‰ª§ÂøÖÈ°ªÊúâÂàÜÂè∑ÁªìÊùü„ÄÇ]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂ§öÊÄÅ]]></title>
    <url>%2Fposts%2F7b7480f6.html</url>
    <content type="text"><![CDATA[ÂÆö‰πâ ÂØπ‰∫éÂêå‰∏Ä‰∏™Á±ªÂûãÁöÑ‰∏çÂêåÂÆû‰æãÂØπË±°ÔºåÂêå‰∏Ä‰∏™Ë°å‰∏∫ÂÖ∑Â§á‰∏çÂêåÁöÑË°®Áé∞ÂΩ¢Âºè„ÄÇ ‰ΩúÁî® Ê∂àÈô§Âêå‰∏ÄÁ±ªÂûã‰πãÈó¥ÁöÑËÄ¶ÂêàÂÖ≥Á≥ªÔºõ ‰ΩøÂæó‰∏çÂêåÂØπË±°ÂØπ‰∫éÂêå‰∏ÄË°å‰∏∫ÂÖ∑Â§áÂ§öÁßçË°®Áé∞ÂΩ¢ÂºèÔºõ ÂéüÁêÜ ÂèòÈáèÁöÑÈùôÊÄÅÁ±ªÂûã &amp; Âä®ÊÄÅÁ±ªÂûã ÂèòÈáèÁöÑÈùôÊÄÅÁ±ªÂûã = ÂºïÁî®Á±ªÂûã = ÁºñËØëÊó∂ÂèòÈáè Ôºö‰∏ç‰ºöË¢´ÊîπÂèò„ÄÅÂú®ÁºñËØëÂô®ÂèØÁü• ÂèòÈáèÁöÑÂä®ÊÄÅÁ±ªÂûã = ÂÆû‰æãÂØπË±°Á±ªÂûã = ËøêË°åÊó∂ÂèòÈáè Ôºö‰ºöÂèòÂåñ„ÄÅÂú®ËøêË°åÊúüÊâçÂèØÁü• Â¶Ç‰∏ãÁ§∫‰æãÔºö 1234567891011121314151617181920public class Test &#123; // HumanÊòØ Man‰∏éHumanÁöÑÁà∂Á±ª static abstract class Human &#123; &#125; static class Man extends Human &#123; &#125; static class Woman extends Human &#123; &#125; // ÊâßË°å‰ª£Á†Åpublic static void main(String[] args) &#123; Human man = new Man(); // ÂèòÈáèmanÁöÑÈùôÊÄÅÁ±ªÂûã = ÂºïÁî®Á±ªÂûã = ÁºñËØëÊó∂ÂèòÈáè = HumanÔºö‰∏ç‰ºöË¢´ÊîπÂèò„ÄÅÂú®ÁºñËØëÂô®ÂèØÁü• // ÂèòÈáèmanÁöÑÂä®ÊÄÅÁ±ªÂûã = ÂÆû‰æãÂØπË±°Á±ªÂûã = ËøêË°åÊó∂ÂèòÈáè = Man Ôºö‰ºöÂèòÂåñ„ÄÅÂú®ËøêË°åÊúüÊâçÂèØÁü• &#125; &#125; ÂÆûÁé∞ÂéüÁêÜ ÈÄöËøáÂ∞Ü Â≠êÁ±ªÂØπË±°ÂÆû‰æã ËµãÂÄºÁªô Áà∂Á±ªÂºïÁî®ÂèòÈáèÔºå‰ΩøÂæóÁºñËØëÊó∂ÁöÑÈùôÊÄÅÂèòÈáè ‰∏é ËøêË°åÊó∂ÁöÑÂä®ÊÄÅÂèòÈáè‰∏ç‰∏ÄÊ†∑ÔºåÂú®Ë∞ÉÁî®ÊñπÊ≥ï / ÂèòÈáèÊó∂ÔºåÂ§öÊÄÅÂ∞±ÂèëÁîü‰∫Ü„ÄÇ Â∫îÁî®Á§∫‰æãÔºö 123456// ËÆæ BÁ±ªÊòØAÁ±ªÁöÑÂ≠êÁ±ªA b = new B(); //ÁºñËØëÊó∂ÂèòÈáè = A b „ÄÅËøêË°åÊó∂ÂèòÈáè = new B()b.name; // Ë∞ÉÁî®‰∫ÜÁà∂Á±ªAÁöÑÊàêÂëòÂèòÈáèname b.move(); // Ë∞ÉÁî®ÁöÑÊòØÂ≠êÁ±ªBÈáçÂÜôÂêéÁöÑ2‰∏™ÊñπÊ≥ïmoveÔºàÔºâ„ÄÅcontentÔºàÔºâb.content(); ÁªìËÆ∫ÔºöÂõ†Â∞Ü Â≠êÁ±ªÂØπË±°ÂºïÁî® ËµãÂÄºÁªô Áà∂Á±ªÂØπË±°ÂèòÈáèÔºåÂç≥A a = new B()ÔºåÂç≥ ÁºñËØëÊó∂ÂèòÈáèÂíåËøêË°åÊó∂ÂèòÈáè‰∏ç‰∏ÄÊ†∑ÔºåÊâÄ‰ª•Â§öÊÄÅÂèëÁîü ÂÆûÁé∞ËøáÁ®ãÔºàÁõ¥Êé•ÊåáÈíàËÆøÈóÆÔºâ JVM ÈÄöËøá ÂºïÁî®Á±ªÂûãÔºàreferenceÔºåÂç≥AÁöÑÂºïÁî®ÔºâÊü•ËØ¢JavaÊ†à‰∏≠ÁöÑÊú¨Âú∞ÂèòÈáèË°®ÔºåÂæóÂà∞Â†Ü‰∏≠ÁöÑÂØπË±°Á±ªÂûãÁöÑÊï∞ÊçÆÂú∞ÂùÄÔºõ Ê†πÊçÆÂú∞ÂùÄÔºå‰ªéËÄåÊâæÂà∞ÊñπÊ≥ïÂå∫‰∏≠ÁöÑÂØπË±°Á±ªÂûãÊï∞ÊçÆÔºàBÁöÑÂØπË±°Á±ªÂûãÊï∞ÊçÆÔºâÔºõ Êü•ËØ¢ÂØπË±°Á±ªÂûãÊï∞ÊçÆ‰∏≠ÁöÑÊñπÂèëË°®ÂÆö‰ΩçÂà∞ÂÆûÈôÖÁ±ª(BÁ±ª)ÁöÑÊñπÊ≥ïÔºå‰ªéËÄåËøêË°å„ÄÇ ÂØπ‰∫éA a = new B() Êï∞ÊçÆÂ≠òÂÇ®ÊñπÂºè ÂØπ‰∫é A aÔºö‰Ωú‰∏∫ÂºïÁî®Á±ªÂûãÊï∞ÊçÆÔºåÂ≠òÂÇ®Âú®JVMÊ†àÁöÑÊú¨Âú∞ÂèòÈáèË°®‰∏≠Ôºõ ÂØπ‰∫é new B()Ôºö ‰Ωú‰∏∫Á§∫‰æãÂØπË±°Êï∞ÊçÆÂ≠òÂÇ®Âú®Â†Ü‰∏≠Ôºõ BÁöÑÂØπË±°ÂÆû‰æãÊï∞ÊçÆÔºàÊé•Âè£„ÄÅÊñπÊ≥ï„ÄÅÂØπË±°Á±ªÂûãÁ≠âÔºâÁöÑÂú∞ÂùÄÂ≠òÂÇ®Âú®Â†Ü‰∏≠Ôºõ BÁöÑÂØπË±°Á±ªÂûãÊï∞ÊçÆÔºàÂØπË±°ÂÆû‰æãÊï∞ÊçÆÁöÑÂú∞ÂùÄÊâÄÊâßË°åÁöÑÊï∞ÊçÆÔºâÂ≠òÂÇ®Âú®ÊñπÊ≥ïÂå∫‰∏≠ÔºåÂú®ÊñπÊ≥ïÂå∫‰∏≠ÔºåÂØπË±°Á±ªÂûãÊï∞ÊçÆ‰∏≠Êúâ1‰∏™ÊåáÂêëËØ•Á±ªÊñπÊ≥ïÁöÑÊñπÂèëË°®Ôºõ ÂºïÁî®Á±ªÂûãËÆøÈóÆÂÆûÁé∞ÊñπÂºè JavaÁ®ãÂ∫èÈÄöËøá Ê†à‰∏äÁöÑÂºïÁî®Á±ªÂûãÊï∞ÊçÆÔºàreferenceÔºâ Êù•ËÆøÈóÆJavaÂ†Ü‰∏äÁöÑÂØπË±°„ÄÇ Áî±‰∫éÂºïÁî®Á±ªÂûãÊï∞ÊçÆÔºàreferenceÔºâÂú® JavaËôöÊãüÊú∫‰∏≠Âè™ËßÑÂÆö‰∫Ü‰∏Ä‰∏™ÊåáÂêëÂØπË±°ÁöÑÂºïÁî®Ôºå‰ΩÜÊ≤°ÂÆö‰πâËØ•ÂºïÁî®Â∫îËØ•ÈÄöËøá‰ΩïÁßçÊñπÂºèÂéªÂÆö‰Ωç„ÄÅËÆøÈóÆÂ†Ü‰∏≠ÁöÑÂØπË±°ÁöÑÂÖ∑‰Ωì‰ΩçÁΩÆÊâÄ‰ª•ÂØπË±°ËÆøÈóÆÊñπÂºè ÂèñÂÜ≥‰∫é ËôöÊãüÊú∫ÂÆûÁé∞„ÄÇÁõÆÂâç‰∏ªÊµÅÁöÑÂØπË±°ËÆøÈóÆÊñπÂºèÊúâ‰∏§ÁßçÔºö Âè•ÊüÑËÆøÈóÆ Áõ¥Êé•ÊåáÈíàËÆøÈóÆ Â§öÊÄÅÂÆûÁé∞ÊñπÂºè ÊñπÊ≥ïÈáçËΩΩ(Overload) ÂÆö‰πâ Âêå‰∏Ä‰∏™Á±ª‰∏≠ÂÖ∑Â§áÂ§ö‰∏™ÈáçÂêçÁöÑÊñπÊ≥ï„ÄÇ ÁâπÁÇπ ÊñπÊ≥ïÂêçÂ≠óÂøÖÈ°ªÁõ∏ÂêåÔºõ ÂèÇÊï∞ÂàóË°®ÂøÖÈ°ª‰∏çÂêåÔºö‰∏™Êï∞‰∏çÂêåÔºõ‰∏™Êï∞‰∏çÂêå‰ΩÜÂØπÂ∫îÂèÇÊï∞Á±ªÂûã‰∏çÂêåÔºõ ËøîÂõûÁ±ªÂûã/ËÆøÈóÆ‰øÆÈ•∞Á¨¶ÂèØÂêåÂèØ‰∏çÂêåÔºõ ÂèØÂ£∞ÊòéÊñ∞ÁöÑÊàñÊõ¥ÂπøÁöÑÊ£ÄÊü•ÂºÇÂ∏∏Ôºõ ËÉΩÂ§üÂú®Âêå‰∏Ä‰∏™Á±ªÊàñÂ≠êÁ±ª‰∏≠Ë¢´ÈáçËΩΩÔºõ Â∫îÁî®Âú∫ÊôØ ÈíàÂØπÂêå‰∏ÄÁ±ªÁöÑÂØπË±°ÔºåÂØπ‰∫é‰∏çÂêåÊù°‰ª∂Âêå‰∏ÄË°å‰∏∫ÁöÑ‰∏çÂêåË°®Áé∞Ôºõ ÂéüÁêÜ ÈùôÊÄÅÂàÜÊ¥æÔºåÂèëÁîüÂú®ÁºñËØëÈò∂ÊÆµ„ÄÇ Á§∫‰æã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package main.java.com.study.polymorphic;/** * @author: whb * @description: ÊñπÊ≥ïÈáçËΩΩÊµãËØï */public class OverloadTest &#123; /** * Á±ªÂÆö‰πâ */ static abstract class Human &#123; &#125; /** * ÁªßÊâøËá™ÊäΩË±°Á±ªHuman */ static class Man extends Human &#123; &#125; static class Woman extends Man &#123; &#125; /** * ÂÆö‰πâÁöÑÈáçËΩΩÊñπÊ≥ïÔºàÊñπÊ≥ïÂêçÁõ∏ÂêåÔºå‰ΩÜÂèÇÊï∞ÂàóË°®‰∏çÂêåÔºàÊ≠§Â§ÑÊòØÁ±ªÂûã‰∏çÂêåÔºâÔºâ * * @param guy */ public void sayHello(Human guy) &#123; System.out.println("hello,guy!"); &#125; public void sayHello(Man guy) &#123; System.out.println("hello gentleman!"); &#125; public void sayHello(Woman guy) &#123; System.out.println("hello lady!"); &#125; public static void main(String[] args) &#123; Human man = new Man(); Man woman = new Woman(); OverloadTest test = new OverloadTest(); test.sayHello(man); test.sayHello(woman); &#125;&#125; ÊâßË°åÁªìÊûúÔºö 12hello,guy!hello gentleman! ÁªìÊûúËß£ÊûêÔºö ÊñπÊ≥ïÈáçËΩΩÔºàOverLoadÔºâÁöÑÂéüÁêÜ = ÈùôÊÄÅÂàÜÊ¥æ = Ê†πÊçÆ ÂèòÈáèÁöÑÈùôÊÄÅÁ±ªÂûã Á°ÆÂÆöÊâßË°åÔºàÈáçËΩΩÔºâÂì™‰∏™ÊñπÊ≥ï; ÊâÄ‰ª•‰∏äËø∞ÁöÑÊñπÊ≥ïÊâßË°åÊó∂ÔºåÊòØÊ†πÊçÆÂèòÈáèÔºàman„ÄÅwomanÔºâÁöÑÈùôÊÄÅÁ±ªÂûãÔºàHuman„ÄÅManÔºâÁ°ÆÂÆöÈáçËΩΩsayHello()‰∏≠ÂèÇÊï∞‰∏∫Human guy„ÄÅMan guyÁöÑÊñπÊ≥ï,Âç≥sayHello(Human guy)„ÄÅsayHello(Man guy) ; ÊñπÊ≥ïÈáçÂÜô(Override) ÂÆö‰πâ Â≠êÁ±ªÈáçÂÜôÁà∂Á±ªÊñπÊ≥ïÁöÑÂÆûÁé∞„ÄÇ ÁâπÁÇπ ËøîÂõûÂÄº„ÄÅÂáΩÊï∞Âêç„ÄÅÂΩ¢ÂèÇÈÉΩ‰∏çËÉΩÊîπÂèòÔºåÂç≥Â§ñÂ£≥‰∏çÂèòÔºåÈáçÂÜôÂÜÖÂú®ÂÆûÁé∞Ôºõ ‰∏çËÉΩË¢´ÈáçÂÜôÁöÑÊñπÊ≥ïÔºöÊûÑÈÄ†ÊñπÊ≥ïÔºõ‰∏çËÉΩÁªßÊâø/‰∏çÂÖ∑Â§áËÆøÈóÆÊùÉÈôêÁöÑÊñπÊ≥ï(Â¶Çprivate)ÔºõÂ£∞Êòé‰∏∫final„ÄÅstaticÁöÑÊñπÊ≥ïÔºõ Â≠êÁ±ªÊñπÊ≥ï‰∏çËÉΩÁº©Â∞èÁà∂Á±ªÊñπÊ≥ïÁöÑËÆøÈóÆÊùÉÈôêÔºõ Â≠êÁ±ªÊñπÊ≥ï‰∏çËÉΩÊØîÁà∂Á±ªÊñπÊ≥ïÊäõÂá∫Êõ¥ÂπøÁöÑÂºÇÂ∏∏Ôºõ ÂéüÁêÜ Âä®ÊÄÅÂàÜÊ¥æÔºåÂèëÁîüÂú®ËøêË°åÈò∂ÊÆµ„ÄÇ Á§∫‰æã 1234567891011121314151617181920212223242526272829303132333435363738394041424344package main.java.com.study.polymorphic;/** * @author: whb * @description: ÊñπÊ≥ïÈáçÂÜôÊµãËØïÁ±ª */public class OverrideTest &#123; // ÊµãËØï‰ª£Á†Å public static void main(String[] args) &#123; // ÊÉÖÂÜµ1 Human man = new Man(); man.sayHello(); // ÊÉÖÂÜµ2 man = new Woman(); man.sayHello(); &#125; /** * ÂÆö‰πâÁà∂Á±ª */ static class Human &#123; public void sayHello() &#123; System.out.println("Human say hello"); &#125; &#125; /** * ÁªßÊâøÁ±ªHuman Âπ∂ ÈáçÂÜôsayHello() */ static class Man extends Human &#123; @Override public void sayHello() &#123; System.out.println("man say hello"); &#125; &#125; static class Woman extends Human &#123; @Override public void sayHello() &#123; System.out.println("woman say hello"); &#125; &#125;&#125; ÊâßË°åÁªìÊûú 12man say hellowoman say hello ÁªìÊûúÂàÜÊûê ÊñπÊ≥ïÈáçÂÜôÔºàOverrideÔºâ = Âä®ÊÄÅÂàÜÊ¥æ = Ê†πÊçÆ ÂèòÈáèÁöÑÂä®ÊÄÅÁ±ªÂûã Á°ÆÂÆöÊâßË°åÔºàÈáçÂÜôÔºâÂì™‰∏™ÊñπÊ≥ï; ÂØπ‰∫éÊÉÖÂÜµ1ÔºöÊ†πÊçÆÂèòÈáèÔºàManÔºâÁöÑÂä®ÊÄÅÁ±ªÂûãÔºàmanÔºâÁ°ÆÂÆöË∞ÉÁî®man‰∏≠ÁöÑÈáçÂÜôÊñπÊ≥ïsayHello(); ÂØπ‰∫éÊÉÖÂÜµ2ÔºöÊ†πÊçÆÂèòÈáèÔºàManÔºâÁöÑÂä®ÊÄÅÁ±ªÂûãÔºàwomanÔºâÁ°ÆÂÆöË∞ÉÁî®woman‰∏≠ÁöÑÈáçÂÜôÊñπÊ≥ïsayHello(); ÊñπÊ≥ïÈáçËΩΩ„ÄÅÊñπÊ≥ïÈáçÂÜôÂØπÊØî]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Windows-Â∏∏ËßÅÈóÆÈ¢òÂèäÂÆûÁî®ÊäÄÂ∑ßÔºàÊåÅÁª≠Êõ¥Êñ∞Ôºâ]]></title>
    <url>%2Fposts%2Fe5866ae9.html</url>
    <content type="text"><![CDATA[Âø´ÈÄüÊèêÂèñÊüê‰∏ÄÊñá‰ª∂Â§π‰∏ãÊâÄÊúâÊñá‰ª∂ÂêçÁß∞ Âú®ÈúÄË¶ÅËé∑ÂèñÊñá‰ª∂ÂêçÁöÑÊñá‰ª∂Â§π‰∏≠Êñ∞Âª∫‰∏Ä‰∏™txtÊ†ºÂºèÁöÑËÆ∞‰∫ãÊú¨Êñá‰ª∂„ÄÇÂú®ËÆ∞‰∫ãÊú¨Êñá‰ª∂‰∏≠ËæìÂÖ•ÔºöDIR . /B &gt;LIST.TXTÂ∞ÜÊ≠§ËÆ∞‰∫ãÊú¨Êñá‰ª∂ÂêéËæçÂêçÔºåÁî±txtÊîπ‰∏∫bat„ÄÇ‰ºöÂºπÂá∫ÈáçÂëΩÂêçÂØπËØùÊ°ÜÔºåÂçïÂáª‚ÄúÊòØ‚Äù„ÄÇÂèåÂáªÊñá‰ª∂‚ÄúÊñ∞Âª∫ÊñáÊú¨ÊñáÊ°£.bat‚ÄùÂç≥ÂèØÁîüÊàêlist.txtÊñá‰ª∂„ÄÇÊâìÂºÄtxtÊñá‰ª∂Â∞±ÂèØ‰ª•ÁúãÂà∞ÂΩìÂâçÊñá‰ª∂Â§πÂÜÖÁöÑÊâÄÊúâÊñá‰ª∂ÂêçÂàóË°®„ÄÇ ‰∏ÄÈîÆËé∑ÂèñÊñ∞ÁîµËÑëÁ°¨‰ª∂‰ø°ÊÅØ batËÑöÊú¨ÂÜÖÂÆπÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110@echo offcolor 0atitle Á°¨‰ª∂Ê£ÄÊµã mode con cols=90sc config winmgmt start= auto &gt;nul 2&lt;&amp;1net start winmgmt 2&gt;1nulsetlocal ENABLEDELAYEDEXPANSIONecho ‰∏ªÁâà:for /f &quot;tokens=1,* delims==&quot; %%a in (&apos;wmic BASEBOARD get Manufacturer^,Product^,Version^,SerialNumber /value&apos;) do ( set /a tee+=1 if &quot;!tee!&quot; == &quot;3&quot; echo Âà∂ÈÄ†ÂïÜ = %%b if &quot;!tee!&quot; == &quot;4&quot; echo Âûã Âè∑ = %%b if &quot;!tee!&quot; == &quot;5&quot; echo Â∫èÂàóÂè∑ = %%b if &quot;!tee!&quot; == &quot;6&quot; echo Áâà Êú¨ = %%b)set tee=0echo BIOS:for /f &quot;tokens=1,* delims==&quot; %%a in (&apos;wmic bios get CurrentLanguage^,Manufacturer^,SMBIOSBIOSVersion^,SMBIOSMajorVersion^,SMBIOSMinorVersion^,ReleaseDate /value&apos;) do ( set /a tee+=1 if &quot;!tee!&quot; == &quot;3&quot; echo ÂΩìÂâçËØ≠Ë®Ä = %%b if &quot;!tee!&quot; == &quot;4&quot; echo Âà∂ÈÄ†ÂïÜ = %%b if &quot;!tee!&quot; == &quot;5&quot; echo ÂèëË°åÊó•Êúü = %%b if &quot;!tee!&quot; == &quot;6&quot; echo Áâà Êú¨ = %%b if &quot;!tee!&quot; == &quot;7&quot; echo SMBIOSMajorVersion = %%b if &quot;!tee!&quot; == &quot;8&quot; echo SMBIOSMinorVersion = %%b )set tee=0echo.echo CPU:for /f &quot;tokens=1,* delims==&quot; %%a in (&apos;wmic cpu get name^,ExtClock^,CpuStatus^,Description /value&apos;) do ( set /a tee+=1 if &quot;!tee!&quot; == &quot;3&quot; echo CPU‰∏™Êï∞ = %%b if &quot;!tee!&quot; == &quot;4&quot; echo Â§ÑÁêÜÂô®ÁâàÊú¨ = %%b if &quot;!tee!&quot; == &quot;5&quot; echo Â§ñ È¢ë = %%b if &quot;!tee!&quot; == &quot;6&quot; echo ÂêçÁß∞Âèä‰∏ªÈ¢ëÁéá = %%b)set tee=0echo.echo ÊòæÁ§∫Âô®:for /f &quot;tokens=1,* delims==&quot; %%a in (&apos;wmic DESKTOPMONITOR get name^,ScreenWidth^,ScreenHeight^,PNPDeviceID /value&apos;) do ( set /a tee+=1 if &quot;!tee!&quot; == &quot;3&quot; echo Á±ª Âûã = %%b if &quot;!tee!&quot; == &quot;4&quot; echo ÂÖ∂‰ªñ‰ø°ÊÅØ = %%b if &quot;!tee!&quot; == &quot;5&quot; echo Â±èÂπïÈ´ò = %%b if &quot;!tee!&quot; == &quot;6&quot; echo Â±èÂπïÂÆΩ = %%b)set tee=0echo.echo Á°¨ Áõò:for /f &quot;tokens=1,* delims==&quot; %%a in (&apos;wmic DISKDRIVE get model^,interfacetype^,size^,totalsectors^,partitions /value&apos;) do ( set /a tee+=1 if &quot;!tee!&quot; == &quot;3&quot; echo Êé•Âè£Á±ªÂûã = %%b if &quot;!tee!&quot; == &quot;4&quot; echo Á°¨ÁõòÂûãÂè∑ = %%b if &quot;!tee!&quot; == &quot;5&quot; echo ÂàÜÂå∫Êï∞ = %%b if &quot;!tee!&quot; == &quot;6&quot; echo ÂÆπ Èáè = %%b if &quot;!tee!&quot; == &quot;7&quot; echo ÊÄªÊâáÂå∫ = %%b)echo ÂàÜÂå∫‰ø°ÊÅØ:wmic LOGICALDISK where mediatype=&apos;12&apos; get description,deviceid,filesystem,size,freespaceset tee=0echo.echo ÁΩë Âç°:for /f &quot;tokens=1,* delims==&quot; %%a in (&apos;wmic NICCONFIG where &quot;index=&apos;1&apos;&quot; get ipaddress^,macaddress^,description /value&apos;) do ( set /a tee+=1 if &quot;!tee!&quot; == &quot;3&quot; echo ÁΩëÂç°Á±ªÂûã = %%b if &quot;!tee!&quot; == &quot;4&quot; echo ÁΩëÂç°IP = %%b if &quot;!tee!&quot; == &quot;5&quot; echo ÁΩëÂç°MAC = %%b)set tee=0echo.echo ÊâìÂç∞Êú∫:for /f &quot;tokens=1,* delims==&quot; %%a in (&apos;wmic PRINTER get caption /value&apos;) do ( set /a tee+=1 if &quot;!tee!&quot; == &quot;3&quot; echo ÊâìÂç∞Êú∫ÂêçÂ≠ó = %%b)set tee=0echo.echo Â£∞ Âç°:for /f &quot;tokens=1,* delims==&quot; %%a in (&apos;wmic SOUNDDEV get name^,deviceid /value&apos;) do ( set /a tee+=1 if &quot;!tee!&quot; == &quot;3&quot; echo ÂÖ∂‰ªñ‰ø°ÊÅØ = %%b if &quot;!tee!&quot; == &quot;4&quot; echo Âûã Âè∑ = %%b)set tee=0echo.echo ÂÜÖ Â≠ò: for /f &quot;tokens=1,* delims==&quot; %%a in (&apos;systeminfo^|find &quot;ÂÜÖÂ≠ò&quot;&apos;) do ( echo %%a 4534 %%b )echo.echo Êòæ Âç°:del /f &quot;%TEMP%\temp.txt&quot; 2&gt;nuldxdiag /t %TEMP%\temp.txt:ÊòæÂç°rem ËøôÈáåÈúÄË¶Å30ÁßíÂ∑¶Âè≥!if EXIST &quot;%TEMP%\temp.txt&quot; ( for /f &quot;tokens=1,2,* delims=:&quot; %%a in (&apos;findstr /c:&quot; Card name:&quot; /c:&quot;Display Memory:&quot; /c:&quot;Current Mode:&quot; &quot;%TEMP%\temp.txt&quot;&apos;) do ( set /a tee+=1 if !tee! == 1 echo ÊòæÂç°ÂûãÂè∑: %%b if !tee! == 2 echo ÊòæÂ≠òÂ§ßÂ∞è: %%b if !tee! == 3 echo ÂΩìÂâçËÆæÁΩÆ: %%b) ) else ( ping /n 2 127.1&gt;nul goto ÊòæÂç°)set /p var=ÈúÄË¶ÅÈ¢ùÂ§ñ‰ø°ÊÅØÂêó(y/n): if /i %var% == y notepad &quot;%TEMP%\temp.txt&quot;del /f &quot;%TEMP%\temp.txt&quot; 2&gt;nulpause Âè™ÈúÄË¶ÅÊñ∞Âª∫‰∏Ä‰∏™txtÔºåÂ§çÂà∂‰∏äÈù¢‰ª£Á†ÅÂêé‰øÆÊîπÂêéÁºÄÂêç‰∏∫bat(Êú¨Êù•‰∏∫txt),ÁÑ∂ÂêéÂè≥ÈîÆ‰ª•ÁÆ°ÁêÜÂëòË∫´‰ªΩËøêË°åÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ Êü•ÁúãËøõÁ®ã‰ΩøÁî®ÁöÑÁ´ØÂè£ 1netstat -nbaov]]></content>
      <categories>
        <category>Windows</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL‰∏≠ÁöÑÂáΩÊï∞ÊÄªÁªì]]></title>
    <url>%2Fposts%2F578ec873.html</url>
    <content type="text"><![CDATA[CONCAT()ÂáΩÊï∞ CONCATÔºàÔºâÂáΩÊï∞Áî®‰∫éÂ∞ÜÂ§ö‰∏™Â≠óÁ¨¶‰∏≤ËøûÊé•Êàê‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤„ÄÇ ‰ΩøÁî®Êï∞ÊçÆË°®sys_user‰Ωú‰∏∫Á§∫‰æãÔºåsqlÂ¶Ç‰∏ãÔºö SELECT user_id as id,zwxm as name FROM sys_user LIMIT 1; ËøîÂõûÁªìÊûúÂ¶Ç‰∏ãÔºö 12345+----+--------+| id | name |+----+--------+| 1 | Âº†‰∏â |+----+--------+ 1„ÄÅËØ≠Ê≥ïÂèä‰ΩøÁî®ÁâπÁÇπÔºö CONCAT(str1,str2,‚Ä¶) ËøîÂõûÁªìÊûú‰∏∫ËøûÊé•ÂèÇÊï∞‰∫ßÁîüÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÂ¶ÇÊúâ‰ªª‰Ωï‰∏Ä‰∏™ÂèÇÊï∞‰∏∫NULL ÔºåÂàôËøîÂõûÂÄº‰∏∫ NULL„ÄÇÂèØ‰ª•Êúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂèÇÊï∞„ÄÇ 2„ÄÅ‰ΩøÁî®Á§∫‰æãÔºö SELECT CONCAT(user_id, ‚ÄòÔºå‚Äô, zwxm) AS con FROM sys_user LIMIT 1; ËøîÂõûÁªìÊûúÂ¶Ç‰∏ãÔºö 12345+----------+| con |+----------+| 1,Âº†‰∏â |+----------+ SELECT CONCAT(‚ÄòMy‚Äô, NULL, ‚ÄòQL‚Äô); ËøîÂõûÁªìÊûúÂ¶Ç‰∏ãÔºö 12345+--------------------------+| CONCAT(&apos;My&apos;, NULL, &apos;QL&apos;) |+--------------------------+| NULL |+--------------------------+ CONCAT_WS()ÂáΩÊï∞ ‰ΩøÁî®ËØ≠Ê≥ï‰∏∫Ôºö¬∑ CONCAT_WS(separator,str1,str2,‚Ä¶) ¬∑ CONCAT_WS() ‰ª£Ë°® CONCAT With Separator ÔºåÊòØCONCAT()ÁöÑÁâπÊÆäÂΩ¢Âºè„ÄÇÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÂÖ∂ÂÆÉÂèÇÊï∞ÁöÑÂàÜÈöîÁ¨¶„ÄÇÂàÜÈöîÁ¨¶ÁöÑ‰ΩçÁΩÆÊîæÂú®Ë¶ÅËøûÊé•ÁöÑ‰∏§‰∏™Â≠óÁ¨¶‰∏≤‰πãÈó¥„ÄÇÂàÜÈöîÁ¨¶ÂèØ‰ª•ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ôºå‰πüÂèØ‰ª•ÊòØÂÖ∂ÂÆÉÂèÇÊï∞„ÄÇÂ¶ÇÊûúÂàÜÈöîÁ¨¶‰∏∫ NULLÔºåÂàôÁªìÊûú‰∏∫ NULL„ÄÇÂáΩÊï∞‰ºöÂøΩÁï•‰ªª‰ΩïÂàÜÈöîÁ¨¶ÂèÇÊï∞ÂêéÁöÑ NULL ÂÄº„ÄÇ‰ΩÜÊòØCONCAT_WS()‰∏ç‰ºöÂøΩÁï•‰ªª‰ΩïÁ©∫Â≠óÁ¨¶‰∏≤„ÄÇ (ÁÑ∂ËÄå‰ºöÂøΩÁï•ÊâÄÊúâÁöÑ NULLÔºâ„ÄÇ Á§∫‰æã1Ôºö SELECT CONCAT_WS('_',user_id,zwxm) AS con_ws FROM sys_user LIMIT 1; ËøîÂõûÁªìÊûúÔºö 12345+----------+| con_ws |+----------+| 1_Âº†‰∏â |+----------+ Á§∫‰æã2Ôºö SELECT CONCAT_WS(',','First name',NULL,'Last Name'); ËøîÂõûÁªìÊûúÔºö 12345+----------------------------------------------+| CONCAT_WS(&apos;,&apos;,&apos;First name&apos;,NULL,&apos;Last Name&apos;) |+----------------------------------------------+| First name,Last Name |+----------------------------------------------+ GROUP_CONCAT()ÂáΩÊï∞ ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö group_concat([DISTINCT] Ë¶ÅËøûÊé•ÁöÑÂ≠óÊÆµ [Order BY ASC/DESC ÊéíÂ∫èÂ≠óÊÆµ] [Separator 'ÂàÜÈöîÁ¨¶']) Âü∫Êú¨Êü•ËØ¢Ôºö 123456789101112mysql&gt; select * from test; +------+------+ | id| name | +------+------+ |1 | 10 | |1 | 20 | |1 | 20 | |2 | 20 | |3 | 200 | |3 | 500 | +------+------+ 6 rows in set (0.00 sec) ‰ª•idÂàÜÁªÑÔºåÊäänameÂ≠óÊÆµÁöÑÂÄºÊâìÂç∞Âú®‰∏ÄË°åÔºåÈÄóÂè∑ÂàÜÈöî(ÈªòËÆ§) 123456789mysql&gt; select id,group_concat(name) from test group by id; +------+--------------------+ | id | group_concat(name) | +------+--------------------+ |1 | 10,20,20 | |2 | 20 | |3 | 200,500 | +------+--------------------+ 3 rows in set (0.00 sec) ‰ª•idÂàÜÁªÑÔºåÊäänameÂ≠óÊÆµÁöÑÂÄºÊâìÂç∞Âú®‰∏ÄË°åÔºåÂàÜÂè∑ÂàÜÈöî 123456789mysql&gt; select id,group_concat(name separator &apos;;&apos;) from test group by id; +------+----------------------------------+ | id | group_concat(name separator &apos;;&apos;) | +------+----------------------------------+ |1 | 10;20;20 | |2 | 20 | |3 | 200;500 | +------+----------------------------------+ 3 rows in set (0.00 sec) ‰ª•idÂàÜÁªÑÔºåÊääÂéªÂÜó‰ΩôÁöÑnameÂ≠óÊÆµÁöÑÂÄºÊâìÂç∞Âú®‰∏ÄË°åÔºåÈÄóÂè∑ÂàÜÈöî 123456789mysql&gt; select id,group_concat(distinct name) from test group by id; +------+-----------------------------+ | id | group_concat(distinct name) | +------+-----------------------------+ |1 | 10,20 | |2 | 20 | |3 | 200,500 | +------+-----------------------------+ 3 rows in set (0.00 sec) ‰ª•idÂàÜÁªÑÔºåÊäänameÂ≠óÊÆµÁöÑÂÄºÊâìÂç∞Âú®‰∏ÄË°åÔºåÈÄóÂè∑ÂàÜÈöîÔºå‰ª•nameÊéíÂÄíÂ∫è 123456789mysql&gt; select id,group_concat(name order by name desc) from test group by id; +------+---------------------------------------+ | id | group_concat(name order by name desc) | +------+---------------------------------------+ |1 | 20,20,10 | |2 | 20 | |3 | 500,200 | +------+---------------------------------------+ 3 rows in set (0.00 sec) ‰ΩøÁî®group_concat_max_lenÁ≥ªÁªüÂèòÈáèÔºå‰Ω†ÂèØ‰ª•ËÆæÁΩÆÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÈïøÂ∫¶„ÄÇ Á®ãÂ∫è‰∏≠ËøõË°åËøôÈ°πÊìç‰ΩúÁöÑËØ≠Ê≥ïÂ¶Ç‰∏ãÔºåÂÖ∂‰∏≠ val ÊòØ‰∏Ä‰∏™Êó†Á¨¶Âè∑Êï¥Êï∞Ôºö SET [SESSION | GLOBAL] group_concat_max_len = val; Ëã•Â∑≤ÁªèËÆæÁΩÆ‰∫ÜÊúÄÂ§ßÈïøÂ∫¶Ôºå ÂàôÁªìÊûúË¢´Êà™Ëá≥Ëøô‰∏™ÊúÄÂ§ßÈïøÂ∫¶„ÄÇ Â∞ÜÁéØÂ¢ÉÂèòÈáègroup_concat_max_len Â¢ûÂ§ß„ÄÇÈªòËÆ§ÊòØ1024.ÊàëÂ∞±ËÆæÁΩÆ‰∫ÜsessionÁ∫ßÁöÑÁéØÂ¢ÉÂèòÈáèÂ∞ÜÂÖ∂Âèò‰∏∫2048Ôºà‰∏çÂ§üÁî®ÂÜçÂä†Â§ßÔºâ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux-Â∏∏ËßÅÈóÆÈ¢òÂèäÂÆûÁî®ÊäÄÂ∑ßÔºàÊåÅÁª≠Êõ¥Êñ∞Ôºâ]]></title>
    <url>%2Fposts%2F22401d2a.html</url>
    <content type="text"><![CDATA[ËôöÊãüÊú∫ÂÆâË£ÖlinuxÊèêÁ§∫intel VT-xÂ§Ñ‰∫éÁ¶ÅÁî®Áä∂ÊÄÅ ÈóÆÈ¢òÊèèËø∞ Êàë‰ª¨Âú®Á¨¨‰∏ÄÊ¨°‰ΩøÁî®ËôöÊãüÊú∫ÂêØÂä®linuxÁöÑÊó∂ÂÄôÁªèÂ∏∏‰ºöÁ¢∞Âà∞‰∏ãÈù¢Ëøô‰∏™Êä•ÈîôÔºåÂ¶Ç‰∏ãÔºö Â∑≤Â∞ÜËØ•ËôöÊãüÊú∫ÈÖçÁΩÆ‰∏∫‰ΩøÁî® 64 ‰ΩçÂÆ¢Êà∑Êú∫Êìç‰ΩúÁ≥ªÁªü„ÄÇ‰ΩÜÊòØÔºåÊó†Ê≥ïÊâßË°å 64 ‰ΩçÊìç‰Ωú„ÄÇÊ≠§‰∏ªÊú∫ÊîØÊåÅ Intel VT-xÔºå‰ΩÜ Intel VT-x Â§Ñ‰∫éÁ¶ÅÁî®Áä∂ÊÄÅ„ÄÇ Â¶ÇÊûúÂ∑≤Âú® BIOS/Âõ∫‰ª∂ËÆæÁΩÆ‰∏≠Á¶ÅÁî® Intel VT-xÔºåÊàñ‰∏ªÊú∫Ëá™Êõ¥ÊîπÊ≠§ËÆæÁΩÆÂêé‰ªéÊú™ÈáçÊñ∞ÂêØÂä®ÔºåÂàô Intel VT-x ÂèØËÉΩË¢´Á¶ÅÁî®„ÄÇ Á°ÆËÆ§ BIOS/Âõ∫‰ª∂ËÆæÁΩÆ‰∏≠ÂêØÁî®‰∫Ü Intel VT-x Âπ∂Á¶ÅÁî®‰∫Ü‚ÄúÂèØ‰ø°ÊâßË°å‚Äù„ÄÇÂ¶ÇÊûúËøô‰∏§È°π BIOS/Âõ∫‰ª∂ËÆæÁΩÆÊúâ‰∏ÄÈ°πÂ∑≤Êõ¥ÊîπÔºåËØ∑ÈáçÊñ∞ÂêØÂä®‰∏ªÊú∫„ÄÇÂ¶ÇÊûúÊÇ®Âú®ÂÆâË£Ö VMware Workstation ‰πãÂêé‰ªéÊú™ÈáçÊñ∞ÂêØÂä®‰∏ªÊú∫ÔºåËØ∑ÈáçÊñ∞ÂêØÂä®„ÄÇÂ∞Ü‰∏ªÊú∫ÁöÑ BIOS/Âõ∫‰ª∂Êõ¥Êñ∞Ëá≥ÊúÄÊñ∞ÁâàÊú¨„ÄÇ Ëß£ÂÜ≥ÂäûÊ≥ï ÈáçÂêØÁîµËÑëÔºåËøõÂÖ•biosÔºà‰∏ÄËà¨ÊòØF10ÔºâÔºåÈÄâÊã©ConfigurationÈÄâÈ°πÔºåÈÄâÊã©Intel Virtual TechnologyÂπ∂ÂõûËΩ¶ ÔºåÈÄâÊã©enable. ‰øùÂ≠òÈÄÄÂá∫OK„ÄÇ nginxÊó•ÂøóÊñá‰ª∂Âà†Èô§ÂêéÁ©∫Èó¥‰∏çÈáäÊîæ ÈóÆÈ¢òÊèèËø∞ Âõ†nginxÊó•ÂøóËøáÂ§ßÔºåÂç†Êª°Â≠òÂÇ®Á©∫Èó¥ÔºåÊÉ≥Âà†Èô§Êó•ÂøóÂáèÂ∞ëÁ©∫Èó¥Ôºå‰ΩÜÊòØÂà†Èô§Êó•ÂøóÂêéÂèëÁé∞Á©∫Èó¥ËøòÊòØÊ≤°ÊúâÂáèÂ∞ë„ÄÇ Êú™ÈáäÊîæÁ£ÅÁõòÁ©∫Èó¥ÂéüÂõ† Âú®LinuxÊàñËÄÖUnixÁ≥ªÁªü‰∏≠ÔºåÈÄöËøármÊàñËÄÖÊñá‰ª∂ÁÆ°ÁêÜÂô®Âà†Èô§Êñá‰ª∂Â∞Ü‰ºö‰ªéÊñá‰ª∂Á≥ªÁªüÁöÑÁõÆÂΩïÁªìÊûÑ‰∏äËß£Èô§ÈìæÊé•(unlink)„ÄÇÁÑ∂ËÄåÂ¶ÇÊûúÊñá‰ª∂ÊòØË¢´ÊâìÂºÄÁöÑÔºàÊúâ‰∏Ä‰∏™ËøõÁ®ãÊ≠£Âú®‰ΩøÁî®ÔºâÔºåÈÇ£‰πàËøõÁ®ãÂ∞Ü‰ªçÁÑ∂ÂèØ‰ª•ËØªÂèñËØ•Êñá‰ª∂ÔºåÁ£ÅÁõòÁ©∫Èó¥‰πü‰∏ÄÁõ¥Ë¢´Âç†Áî®„ÄÇËÄåÊàëÂà†Èô§ÁöÑÊòØnginxÁöÑlogÊñá‰ª∂ÔºåÂà†Èô§ÁöÑÊó∂ÂÄôÊñá‰ª∂Â∫îËØ•Ê≠£Âú®Ë¢´‰ΩøÁî®„ÄÇ Ëß£ÂÜ≥ÂäûÊ≥ï ÈáçÂêØnginxÊúçÂä°ÔºåÊàñËÄÖÁî®&gt;/opt/nginx/logs/nginx.logÊ∏ÖÁ©∫Êó•ÂøóÊñá‰ª∂ÔºåËÄå‰∏çÊòØÁõ¥Êé•Âà†Èô§„ÄÇ ÁªôÊåáÂÆöÁî®Êà∑ÊàñÂÖ®ÈÉ®Áî®Êà∑ÔºàÂ∑≤ÁôªÂΩïÔºâÂèëÈÄÅÊ∂àÊÅØ ÁªôÊåáÂÆöÁî®Êà∑ÂèëÈÄÅÊ∂àÊÅØ È¶ñÂÖàÔºåÂèØ‰ΩøÁî®wÊàñwhoÂëΩ‰ª§Êü•ÁúãÂΩìÂâçÁôªÂΩïÁöÑÁî®Êà∑‰ø°ÊÅØÔºõ ÁÑ∂ÂêéÔºå‰ΩøÁî®writeÂëΩ‰ª§Â∞Ü‰ø°ÊÅØÂèëÈÄÅÂà∞Áî®Êà∑ÁöÑÁªàÁ´Ø‰∏äÔºåÁî®Ê≥ïÊ≠•È™§Â¶Ç‰∏ãÔºö write + shhÁôªÈôÜÁî®Êà∑Âêç+ttyname(‰æãÂ¶Çpts/1)ENTERËæìÂÖ•‰ø°ÊÅØÔºàÊâÄË¶ÅÂèëÈÄÅÁöÑÊ∂àÊÅØÔºå‰∏≠ÊñáÂèØËÉΩ‰ºö‰π±Á†ÅÔºâ„ÄÇEOFCTRL+DÁªìÊùü &lt;i class=&quot;fa fa-pencil fa-2x&quot;&gt;&lt;/i&gt;ÂÆû‰æãÔºö 123root# write root pts/1I&apos;ll come by at 12:00 to look at your problem.root# ÁÑ∂Âêé‰ΩøÁî®rootË¥¶Âè∑ÁôªÂΩïÔºå‰∏îttyÂè∑‰∏∫pts/1ÁöÑÁôªÂΩïÁî®Êà∑ÁªàÁ´Ø‰ºöÊî∂Âà∞Â¶Ç‰∏ãÊ∂àÊÅØÔºö 123Message from root@cs2c.com.cn on pts/3 at 10:20 ...I&apos;ll come by at 12:00 to look at you problem.EOF ÁªôÂΩìÂâçÁôªÂΩïÁöÑÊâÄÊúâÁî®Êà∑ÂèëÈÄÅÊ∂àÊÅØ ÁªôÂΩìÂâçÁôªÂΩïÊâÄÊúâÁî®Êà∑ÂèëÈÄÅÊ∂àÊÅØÔºå‰ΩøÁî®wallÔºàwrite allÁöÑÁº©ÂÜôÔºâ &lt;i class=&quot;fa fa-pencil fa-2x&quot;&gt;&lt;/i&gt;ÂÆû‰æãÂ¶Ç‰∏ãÔºö È¶ñÂÖàÔºå‰Ω†ÂèØ‰ª•ÈÄöËøáwhoÂëΩ‰ª§Êü•ÁúãÁôªÂΩïÂà∞ËØ•Êú∫Âô®ÁöÑÊâÄÊúâÁî®Êà∑„ÄÇÊØîÂ¶ÇÔºö 12345# whoroot pts/0 Sep 13 04:28 (10.56.226.25)root pts/1 Sep 13 22:32 (10.140.1.37)root pts/2 Sep 13 23:31 (10.140.2.70)root pts/3 Sep 13 23:56 (10.140.2.70) ÊâßË°åwhoÂëΩ‰ª§ÔºåÂ∞±‰ºöËøîÂõû‰∏äÈù¢ÁöÑÁªìÊûú„ÄÇË°®Á§∫Êúâ‰∏â‰∏™Áî®Êà∑ÁôªÂΩïÂà∞ËØ•Êú∫Âô®ÔºåÊúâ‰∏™Áî®Êà∑Êúâ‰∏§‰∏™ÁôªÂΩïConsole„ÄÇ ÂÖ∂Ê¨°ÔºåÂπøÊí≠Ê∂àÊÅØ 123#wall &apos;I will use this host. If somebody is using it, pls let me know. Thanks a lot.&apos;Broadcast message from root (pts/3) (Fri Jun 13 23:57:13 2008):I will use this host. If somebody is using it, pls let me know. Thanks a lot ÊâßË°åwallÂëΩ‰ª§ÔºåÊâÄÊúâÁôªÂΩïÂà∞ËØ•Êú∫Âô®ÁöÑÊéßÂà∂Âè∞(console)ÁïåÈù¢‰∏äÈÉΩ‰ºöÊî∂Âà∞Â¶Ç‰∏äÊâÄÁ§∫ÁöÑÊ∂àÊÅØ„ÄÇ LINUXÁ≥ªÁªüËΩØ‰ª∂ÂÆâË£ÖÂíåÂç∏ËΩΩÁöÑÂ∏∏ËßÅÊñπÊ≥ï rpmÂåÖÂç∏ËΩΩÔºörpm -e XXX.rpm (Â¶ÇÊûúÊÉ≥ÂøΩÁï•‰æùËµñÔºåÂèØÂä†‰∏ä‚Äìnodeps)„ÄÇyum remove xxx.rpm ËøôÁßçÊñπÊ≥ïÈùûÂ∏∏‰∏çÂª∫ËÆÆ‰ΩøÁî®ÔºåÂç∏ËΩΩËøáÁ®ã‰ºöÂ∞ÜÂæÖÂç∏ËΩΩÁöÑËΩØ‰ª∂ÂåÖÊâÄ‰æùËµñÁöÑËΩØ‰ª∂ÂåÖ‰∏ÄÂπ∂Âç∏ËΩΩÊéâÔºåÂæàÂÆπÊòìÈÄ†ÊàêÁ≥ªÁªüÁº∫Â∞ëÊüê‰∫õÂåÖËÄåÂ¥©Ê∫ÉÁ≠âÈóÆÈ¢ò„ÄÇÊ∫êÁ†ÅÂåÖÂç∏ËΩΩÔºöcdÂëΩ‰ª§ËøõÂÖ•ÁºñËØëÂêéÁöÑËΩØ‰ª∂ÁõÆÂΩïÔºåÂç≥ÂÆâË£ÖÊó∂ÁöÑÁõÆÂΩïÔºåÊâßË°åmake uninstallÂëΩ‰ª§Âç≥ÂèØÔºõÊàñËÄÖÁõ¥Êé•Âà†Èô§ÂÆâË£ÖÁõÆÂΩï„ÄÇ Â¶Ç‰Ωï‰øÆÊîπLINUXÁöÑIPÂú∞ÂùÄ„ÄÅÁΩëÂÖ≥Âíå‰∏ªÊú∫Âêç 1„ÄÅ‰øÆÊîπIPÂú∞ÂùÄ„ÄÅÁΩëÂÖ≥ÔºöÁºñËæë/etc/sysconfig/network-scripts/ifcfg-eth0Ôºå‰øÆÊîπÈáåÈù¢IPADDRÂíåGATEWAYÂÜÖÂÆπÔºåÊ≤°ÊúâËøô‰∏§Ë°åÔºåÂàôÊ∑ªÂä†Âç≥ÂèØÔºåÊ∑ªÂä†Êó∂Á°Æ‰øùBOOTPROTO=staticÔºåÈùôÊÄÅÂú∞ÂùÄÔºåÂ¶ÇIPADDR=192.168.1.100 GATEWAY=192.168.1.1„ÄÇ2„ÄÅ‰øÆÊîπ‰∏ªÊú∫ÂêçÁß∞ÔºöÁºñËæë/etc/sysconfig/networkÔºå‰øÆÊîπÈáåÈù¢ÁöÑHOSTNAMEÂÜÖÂÆπÔºåÂ¶ÇËÆæÁΩÆ‰∏ªÊú∫ÂêçÁß∞‰∏∫mysqlÔºåÂàôÔºöHOSTNAME=mysqlÂç≥ÂèØÔºõ Â¶Ç‰ΩïÊü•ÁúãÂΩìÂâçÁöÑLinuxÊúçÂä°Âô®ÁöÑËøêË°åÁ∫ßÂà´ ‰ΩøÁî® who -r ÊàñËÄÖ runlevel ÂëΩ‰ª§„ÄÇ Â¶Ç‰ΩïÊü•ÁúãLinuxÁöÑÈªòËÆ§ÁΩëÂÖ≥ Áî® route -n ÊàñËÄÖ netstat -nr ÂëΩ‰ª§„ÄÇ Â¶Ç‰ΩïÂú®/usrÁõÆÂΩï‰∏ãÊâæÂá∫Â§ßÂ∞èË∂ÖËøá10MBÁöÑÊñá‰ª∂ find /usr -size +10M Â¶Ç‰ΩïÂú®/homeÁõÆÂΩï‰∏ãÊâæÂá∫120Â§©‰πãÂâçË¢´‰øÆÊîπËøáÁöÑÊñá‰ª∂ find /home -mtime +120 Â¶Ç‰ΩïÂú®/varÁõÆÂΩï‰∏ãÊâæÂá∫90Â§©‰πãÂÜÖÊú™Ë¢´ËÆøÈóÆËøáÁöÑÊñá‰ª∂ find /var \! -atime -90 Êü•ÁúãÂêÑÁ≥ªÁªüÁî®Êà∑ÁöÑËøõÁ®ãÔºàLWPÔºâÊï∞ 1ps h -Led -o user | sort | uniq -c | sort -n ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÈááÁî® ps ÂëΩ‰ª§Âπ∂‰∏çËÉΩÊòæÁ§∫Âá∫ÊâÄÊúâÁöÑËøõÁ®ã„ÄÇÂõ†‰∏∫ Linux ÁéØÂ¢É‰∏ãÊâßË°åÂ§öÁ∫øÁ®ãÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩÂ∞Ü‰ª•‰∏Ä‰∏™ËΩªÈáèÁ∫ßËøõÁ®ãÔºàlight-weight process „ÄéLWP„ÄèÔºâÁöÑÂΩ¢ÂºèÊâßË°åÔºåËÄå ps ÂëΩ‰ª§Â¶ÇÊûú‰∏çÂ∏¶ -L ÈÄâÈ°πÂ∞ÜÊó†Ê≥ïÊü•Áúã LWP„ÄÇ Á°ÆÂÆöÊüêÁî®Êà∑ÁöÑËøõÁ®ãÔºàLWPÔºâÊï∞ÁöÑÂàÜÂ∏ÉÊÉÖÂÜµ 1ps -o nlwp,pid,lwp,args -u username | sort -n ÂÖ∂‰∏≠ username ‰∏∫Á≥ªÁªüÁî®Êà∑Âêç„ÄÇ Â∏∏Áî®Êó•ÂøóÊü•ËØ¢ÂëΩ‰ª§ Êü•ÁúãÂÆûÊó∂Êó•Âøó 1tail -f info.log ÂàÜÈ°µÊü•ÁúãÊâÄÊúâÊó•Âøó 1cat info.log | more ÂàÜÈ°µÊü•ÁúãÂâçNË°åÊó•Âøó 1tail -n 1000 info.log | more Ê£ÄÁ¥¢Êó•ÂøóÔºåÂπ∂ÊòæÁ§∫ËØ•Êó•ÂøóÁöÑÂâçÂêéNË°åËÆ∞ÂΩï 1cat info.log | grep -n -B10 -A10 &quot;ÂÖ≥ÈîÆÂ≠ó&quot; Êü•ÁúãÊó•ÂøóÔºå‰ªéÁ¨¨1000Ë°åÂºÄÂßãÔºåÊòæÁ§∫500Ë°å 1cat info.log |tail -n+1000|head -n 500 Êü•ÁúãÊó•ÂøóÔºåÊòæÁ§∫1350Ë°åÂà∞1400Ë°å 1cat info.log | head -n 1400 | tail -n +1350 Âà†Èô§ÂåÖÊã¨ÂÖ≥ÈîÆËØçÁöÑË°å 1sed -i &apos;/ÂÖ≥ÈîÆËØç/d&apos; info.log grepÊü•ÁúãÊâìÂç∞ÂåπÈÖçÁöÑ‰∏ãÂá†Ë°åÊàñÂâçÂêéÂá†Ë°å ÂâçË®Ä Âπ≥Êó∂Â∑•‰Ωú‰∏≠ÊÄª‰ºöÁ¢∞Âà∞ÊéíÊü•ÈîôËØØÊÉ≥Ë¶ÅÁúãXXÊó•ÂøóÈáåÈù¢ÁöÑÊüê‰∏™ÂÖ≥ÈîÆËØçÔºå‰ΩÜÊòØËøô‰∏™ÂÖ≥ÈîÆËØçÂâçÂêéÂèàÊúâÂæàÂ§öÂÖ∂‰ªñ‰ø°ÊÅØ‰πüÊòØÈúÄË¶ÅÂÖ≥Ê≥®ÁöÑÔºåËøôÊó∂ÂÄôÊÄé‰πàÂäûÂë¢Ôºü ÂÆûÁé∞ ‰∏ÄËà¨ÊòØÈÄöËøágrepÊù•ÂÆûÁé∞„ÄÇÂÅáËÆæË¶ÅÁúãA.logÈáåÈù¢‚ÄúABC‚ÄùÂÖ≥ÈîÆËØç‰∏ä‰∏ã100Ë°åÔºå‰∏ÄËà¨ÊâßË°åÂëΩ‰ª§Ôºö 1grep -C 100 &apos;ABC&apos; A.log Â∞Ü‰ø°ÊÅØËæìÂá∫Âà∞ÊåáÂÆöÊñá‰ª∂Ôºö 1grep -C 100 &apos;ABC&apos; A.log &gt; /opt/error.log ÊÉ≥ÂåπÈÖçÊ®°ÂºèÁöÑ‰∏ä‰∏ãÂá†Ë°åÔºågrep‰πüÂèØ‰ª•ÂÆûÁé∞ 1234567grep -5 &apos;parttern&apos; inputfile //ÊâìÂç∞ÂåπÈÖçË°åÁöÑÂâçÂêé5Ë°ågrep -C 5 &apos;parttern&apos; inputfile //ÊâìÂç∞ÂåπÈÖçË°åÁöÑÂâçÂêé5Ë°ågrep -A 5 &apos;parttern&apos; inputfile //ÊâìÂç∞ÂåπÈÖçË°åÁöÑÂêé5Ë°ågrep -B 5 &apos;parttern&apos; inputfile //ÊâìÂç∞ÂåπÈÖçË°åÁöÑÂâç5Ë°å Êü•ÊâæÊúÄÂêéÂàõÂª∫Êó∂Èó¥ÊòØ3Â§©ÂâçÔºåÂêéÁºÄÊòØ*.logÁöÑÊñá‰ª∂Âπ∂Âà†Èô§ 1find / -name ‚Äú*.log‚Äù -ctime +3 -exec rm -f &#123;&#125; \ Â∞ÜÊüêÁõÆÂΩï‰∏ãÂ§ß‰∫é100kÁöÑÊñá‰ª∂ÁßªÂä®Ëá≥/tmp‰∏ã 1for i in `find /test -type f -size +100k`;do cd /test &amp;&amp; mv $i /tmp;done Â∞ÜÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÂπ∂ÊâìÂåÖËá≥ËøúÁ®ãÊúçÂä°Âô®192.168.1.1 /backupÁõÆÂΩï‰∏ã 123456789mount 192.168.1.1:/backup /mntcd /mnt/usr/local/mysql/bin/mysqldump -hlocalhost -uroot test &gt;test.sqltar czf test.sql.tar.gz test.sqlrm -f test.sql Èò≤ÁÅ´Â¢ôÈÖçÁΩÆËÑöÊú¨ÔºåÂè™ÂÖÅËÆ∏ËøúÁ®ã‰∏ªÊú∫ËÆøÈóÆÊú¨Êú∫ÁöÑ80Á´ØÂè£ 12345678910111213iptables -P INPUT ACCEPTiptables -P OUTPUT ACCEPTiptables -P FORWARD ACCEPTiptables -Fiptables -Xiptables -A INPUT -i eth0 -p tcp ‚Äìdport 80 -j ACCEPTiptables -P INPUT DROP ËÑöÊú¨ÁªüËÆ°nginxÊó•ÂøóÔºåÂæóÂà∞ËÆøÈóÆipÊúÄÂ§öÁöÑÂâç10‰∏™(nginxÊó•ÂøóË∑ØÂæÑÔºö/home/logs/nginx/default/access.log 1awk ‚Äò&#123;a[$1]++&#125;END&#123;for (j in a) print a[j],j&#125;‚Äô /home/logs/nginx/default/access.log|sort -nr|head -10 Êü•ÁúãÊúÄÊ∂àËÄóCPU„ÄÅÂÜÖÂ≠òÁöÑËøõÁ®ã CPUÂç†Áî®ÊúÄÂ§öÁöÑÂâç10‰∏™ËøõÁ®ã 1ps auxw|head -1;ps auxw|sort -rn -k3|head -10 ÂÜÖÂ≠òÊ∂àËÄóÊúÄÂ§öÁöÑÂâç10‰∏™ËøõÁ®ã 1ps auxw|head -1;ps auxw|sort -rn -k4|head -10 ËôöÊãüÂÜÖÂ≠ò‰ΩøÁî®ÊúÄÂ§öÁöÑÂâç10‰∏™ËøõÁ®ã 1ps auxw|head -1;ps auxw|sort -rn -k5|head -10 ÂèÇÊï∞ËØ¥Êòé ps auxw uÔºö‰ª•Áî®Êà∑‰∏∫‰∏ªÁöÑÊ†ºÂºèÊù•ÊòæÁ§∫Á®ãÂ∫èÁä∂ÂÜµ xÔºöÊòæÁ§∫ÊâÄÊúâÁ®ãÂ∫èÔºå‰∏ç‰ª•ÁªàÁ´ØÊú∫Êù•Âå∫ÂàÜ wÔºöÈááÁî®ÂÆΩÈòîÁöÑÊ†ºÂºèÊù•ÊòæÁ§∫Á®ãÂ∫èÁä∂ÂÜµ ps auxw|head -1 ËæìÂá∫Ë°®Â§¥ sort -rn -k5 -nÊòØÊåâÁÖßÊï∞Â≠óÂ§ßÂ∞èÊéíÂ∫èÔºå-rÊòØ‰ª•Áõ∏ÂèçÈ°∫Â∫èÔºå-kÊòØÊåáÂÆöÈúÄË¶ÅÊéíÂ∫èÁöÑÊ†è‰Ωç linuxÁ£ÅÁõòÁ©∫Èó¥Êª°‰∫ÜÂêéÊÄé‰πàÂéªÂà§ÂÆöÂì™‰∏™Âú∞ÊñπÂç†‰∫ÜÂ§öÂ§ßÁöÑÁ©∫Èó¥Âπ∂ÂõûÊî∂ ‰ΩøÁî®df -hÊü•ÁúãÁ£ÅÁõòÁ©∫Èó¥Âç†Áî®ÊÉÖÂÜµ„ÄÇ‰ΩøÁî®du -s /* | sort -nrÂëΩ‰ª§Êü•ÁúãÈÇ£‰∏™ÁõÆÂΩïÂç†Áî®Á©∫Èó¥Â§ß„ÄÇÁÑ∂ÂêéÈÇ£‰∏™ÁõÆÂΩïÂç†Áî®Â§öÂÜçÈÄöËøádu -s /root/* | sort -nr ‰∏ÄÂ±ÇÂ±ÇÊéíÊü•ÔºåÊâæÂà∞Âç†Áî®Êñá‰ª∂Â§öÁöÑÂú∞Êñπ„ÄÇ‰ΩøÁî®du -h ‚Äìmax-depth=1Êü•ÁúãÂΩìÂâçÁõÆÂΩï‰∏ãÊñá‰ª∂Â§πÂ§ßÂ∞èÊÉÖÂÜµ„ÄÇÊü•ÁúãÊñá‰ª∂ÊòØÂê¶Ë¢´ËøõÁ®ãÂç†Áî®„ÄÇÂ¶ÇÊûúÈÄöËøá‰ª•‰∏äÊñπÊ≥ïÊ≤°ÊúâÊâæÂà∞ÈóÆÈ¢òÊâÄÂú®ÔºåÈÇ£‰πàÂèØ‰ª•‰ΩøÁî® lsof | grep deleted ÂëΩ‰ª§ÔºåÁúãÁúãÊòØÂê¶Âà†Èô§ÊéâÁöÑÊñá‰ª∂‰ªçÁÑ∂Ë¢´ËøõÁ®ãÂç†Áî®ËÄåÊ≤°ÊúâËøõË°åÂÆûÈôÖÂà†Èô§„ÄÇ LinuxÊúçÂä°Âô®ÂøòËÆ∞rootÂØÜÁ†ÅÊÄé‰πàÂäû ÈáçÂêØÊàñËÄÖÂºÄÊú∫Êó∂ÔºåÂú®ÂÄíÊï∞3ÁßíÁöÑÁïåÈù¢Êåâ‰∏ã‰ªªÊÑèÈîÆ„ÄÇ ËØ•ÁïåÈù¢ÊúâÂ¶Ç‰∏ãÊèêÁ§∫(e ÁºñËæë a Êõ¥ÊîπÂÜÖÊ†∏ÈÄâÈ°π c ÂëΩ‰ª§Ë°å b ÂêØÂä®)ÔºåÊâÄ‰ª•Êàë‰ª¨Êåâ‰∏ã&quot;e&quot;ÁºñËæë„ÄÇ ‰∏ä‰∏ãÈîÆÈÄâ‰∏≠Á¨¨‰∫åË°åÂÜçÊåâ‰∏ã&quot;e&quot;ÁºñËæë Ë°åÊú´Âä†‰∏ä&quot;singal,s,S,1&quot;ÂÖ∂‰∏≠‰∏ÄÈ°πÔºåÁÑ∂ÂêéÂõûËΩ¶„ÄÇ Êåâ&quot;b&quot;,ÂêØÂä®„ÄÇ ÂêØÂä®‰πãÂêéÂ∞±ÂèØ‰ª•Áî®passwdÂëΩ‰ª§ÈáçÁΩÆrootÂëΩ‰ª§„ÄÇ Áî®shellËÑöÊú¨ËæìÂá∫Â∏¶È¢úËâ≤Â≠ó‰Ωì ËØ≠Ê≥ï shellËÑöÊú¨‰∏≠echoÊòæÁ§∫ÂÜÖÂÆπÂ∏¶È¢úËâ≤ÊòæÁ§∫,echoÊòæÁ§∫Â∏¶È¢úËâ≤ÔºåÈúÄË¶Å‰ΩøÁî®ÂèÇÊï∞-eÔºåÂ¶Ç‰∏ãÔºö 1echo -e &quot;\033[41;36m something here \033[0m&quot; ÂÖ∂‰∏≠41ÁöÑ‰ΩçÁΩÆ‰ª£Ë°®Â∫ïËâ≤Ôºå 36ÁöÑ‰ΩçÁΩÆÊòØ‰ª£Ë°®Â≠óÁöÑÈ¢úËâ≤ Ëâ≤ÂÄºÂØπÂ∫î 1„ÄÅÂ≠óËÉåÊôØÈ¢úËâ≤ÂíåÊñáÂ≠óÈ¢úËâ≤‰πãÈó¥ÊòØËã±ÊñáÁöÑ&quot;&quot;; 2„ÄÅÊñáÂ≠óÈ¢úËâ≤ÂêéÈù¢Êúâ‰∏™m; 3„ÄÅÂ≠óÁ¨¶‰∏≤ÂâçÂêéÂèØ‰ª•Ê≤°ÊúâÁ©∫Ê†ºÔºåÂ¶ÇÊûúÊúâÁöÑËØùÔºåËæìÂá∫‰πüÊòØÂêåÊ†∑ÊúâÁ©∫Ê†º; ‰∏ãÈù¢ÊòØÁõ∏Â∫îÁöÑÂ≠óÂíåËÉåÊôØÈ¢úËâ≤ÔºåÂèØ‰ª•Ëá™Â∑±Êù•Â∞ùËØïÊâæÂá∫‰∏çÂêåÈ¢úËâ≤Êê≠ÈÖç 1234567echo -e ‚Äú\033[31m Á∫¢Ëâ≤Â≠ó \033[0m‚Äùecho -e ‚Äú\033[34m ÈªÑËâ≤Â≠ó \033[0m‚Äùecho -e ‚Äú\033[41;33m Á∫¢Â∫ïÈªÑÂ≠ó \033[0m‚Äùecho -e ‚Äú\033[41;37m Á∫¢Â∫ïÁôΩÂ≠ó \033[0m‚Äù Â≠óÈ¢úËâ≤Ôºö30‚Äî‚Äì37 12345678echo -e ‚Äú\033[30m ÈªëËâ≤Â≠ó \033[0m‚Äù echo -e ‚Äú\033[31m Á∫¢Ëâ≤Â≠ó \033[0m‚Äù echo -e ‚Äú\033[32m ÁªøËâ≤Â≠ó \033[0m‚Äù echo -e ‚Äú\033[33m ÈªÑËâ≤Â≠ó \033[0m‚Äù echo -e ‚Äú\033[34m ËìùËâ≤Â≠ó \033[0m‚Äù echo -e ‚Äú\033[35m Á¥´Ëâ≤Â≠ó \033[0m‚Äù echo -e ‚Äú\033[36m Â§©ËìùÂ≠ó \033[0m‚Äù echo -e ‚Äú\033[37m ÁôΩËâ≤Â≠ó \033[0m‚Äù Â≠óËÉåÊôØÈ¢úËâ≤ËåÉÂõ¥Ôºö40‚Äî‚Äì47 12345678echo -e ‚Äú\033[40;37m ÈªëÂ∫ïÁôΩÂ≠ó \033[0m‚Äù echo -e ‚Äú\033[41;37m Á∫¢Â∫ïÁôΩÂ≠ó \033[0m‚Äù echo -e ‚Äú\033[42;37m ÁªøÂ∫ïÁôΩÂ≠ó \033[0m‚Äù echo -e ‚Äú\033[43;37m ÈªÑÂ∫ïÁôΩÂ≠ó \033[0m‚Äù echo -e ‚Äú\033[44;37m ËìùÂ∫ïÁôΩÂ≠ó \033[0m‚Äù echo -e ‚Äú\033[45;37m Á¥´Â∫ïÁôΩÂ≠ó \033[0m‚Äù echo -e ‚Äú\033[46;37m Â§©ËìùÂ∫ïÁôΩÂ≠ó \033[0m‚Äù echo -e ‚Äú\033[47;30m ÁôΩÂ∫ïÈªëÂ≠ó \033[0m‚Äù ÊéßÂà∂ÈÄâÈ°πËØ¥Êòé 12345678910111213141516171819\33[0m ÂÖ≥Èó≠ÊâÄÊúâÂ±ûÊÄß \33[1m ËÆæÁΩÆÈ´ò‰∫ÆÂ∫¶ \33[4m ‰∏ãÂàíÁ∫ø \33[5m Èó™ÁÉÅ \33[7m ÂèçÊòæ \33[8m Ê∂àÈöê \33[30m ‚Äî \33[37m ËÆæÁΩÆÂâçÊôØËâ≤ \33[40m ‚Äî \33[47m ËÆæÁΩÆËÉåÊôØËâ≤ \33[nA ÂÖâÊ†á‰∏äÁßªnË°å \33[nB ÂÖâÊ†á‰∏ãÁßªnË°å \33[nC ÂÖâÊ†áÂè≥ÁßªnË°å \33[nD ÂÖâÊ†áÂ∑¶ÁßªnË°å \33[y;xHËÆæÁΩÆÂÖâÊ†á‰ΩçÁΩÆ \33[2J Ê∏ÖÂ±è \33[K Ê∏ÖÈô§‰ªéÂÖâÊ†áÂà∞Ë°åÂ∞æÁöÑÂÜÖÂÆπ \33[s ‰øùÂ≠òÂÖâÊ†á‰ΩçÁΩÆ \33[u ÊÅ¢Â§çÂÖâÊ†á‰ΩçÁΩÆ \33[?25l ÈöêËóèÂÖâÊ†á \33[?25h ÊòæÁ§∫ÂÖâÊ†á ÂÆû‰æãÔºö‰∫îÈ¢úÂÖ≠Ëâ≤ÁöÑshellËÑöÊú¨ 123456789101112131415161718192021222324252627282930#!/bin/bash clearecho -e &quot;\033[1m Hello World&quot; # bold effectecho -e &quot;\033[5m Blink&quot; # blink effectecho -e &quot;\033[0m Hello World&quot; # back to noraml echo -e &quot;\033[31m Hello World&quot; # Red colorecho -e &quot;\033[32m Hello World&quot; # Green colorecho -e &quot;\033[33m Hello World&quot; # See remaing on screenecho -e &quot;\033[34m Hello World&quot;echo -e &quot;\033[35m Hello World&quot;echo -e &quot;\033[36m Hello World&quot; echo -e -n &quot;\033[0m&quot; # back to noramlecho -e &quot;\033[41m Hello World&quot;echo -e &quot;\033[42m Hello World&quot;echo -e &quot;\033[43m Hello World&quot;echo -e &quot;\033[44m Hello World&quot;echo -e &quot;\033[45m Hello World&quot;echo -e &quot;\033[46m Hello World&quot; echo -e &quot;\033[0m Hello World&quot; ÈáçÂêØÂëΩ‰ª§ rebootshutdown -r now Á´ãÂàªÈáçÂêØ(rootÁî®Êà∑‰ΩøÁî®)shutdown -r 10 Ëøá10ÂàÜÈíüËá™Âä®ÈáçÂêØ(rootÁî®Êà∑‰ΩøÁî®)shutdown -r 20:35 Âú®Êó∂Èó¥‰∏∫20:35Êó∂ÂÄôÈáçÂêØ(rootÁî®Êà∑‰ΩøÁî®)Â¶ÇÊûúÊòØÈÄöËøáshutdownÂëΩ‰ª§ËÆæÁΩÆÈáçÂêØÁöÑËØùÔºåÂèØ‰ª•Áî®shutdown -cÂëΩ‰ª§ÂèñÊ∂àÈáçÂêØ ÂÖ≥Êú∫ÂëΩ‰ª§ halt Á´ãÂàªÂÖ≥Êú∫poweroff Á´ãÂàªÂÖ≥Êú∫shutdown -h now Á´ãÂàªÂÖ≥Êú∫(rootÁî®Êà∑‰ΩøÁî®)shutdown -h 10 10ÂàÜÈíüÂêéËá™Âä®ÂÖ≥Êú∫Â¶ÇÊûúÊòØÈÄöËøáshutdownÂëΩ‰ª§ËÆæÁΩÆÂÖ≥Êú∫ÁöÑËØùÔºåÂèØ‰ª•Áî®shutdown -cÂëΩ‰ª§ÂèñÊ∂àÈáçÂêØ Êü•ÁúãÂΩìÂâç‰ΩøÁî®ÁöÑÁΩëÂç° 1watch cat /proc/net/dev ÈáçÂêØÁΩëÂç°ÊñπÊ≥ï ÂÖ®ÈÉ®ÁΩëÂç°ÈáçÂêØ ÈáçÂêØÁΩëÂç°‰ΩøËÆæÂÆöÁîüÊïàÔºö 1sudo /etc/init.d/networking restart Âçï‰∏™ÁΩëÂç°ÈáçÂêØ ÂÖ≥Èó≠ÁΩëÂç° ifdown eth0 ÂºÄÂêØÁΩëÂç° ifup eth0 Á¶ÅÁî®ÁΩëÂç° 123vi /etc/sysconfig/network-scripts/ifcfg-eth1onboot=NO ‰øÆÊîπIP Âä®ÊÄÅ ËÆæÂÆö‰∏Ä‰∏™ÁΩëÂç°IPÔºö 1ifconfig eth1 192.168.1.10 netmask 255.255.255.0 ÈáçÂêØÁΩëÂç°‰ΩøËÆæÂÆöÁîüÊïàÔºö 1sudo /etc/init.d/networking restart ÈùôÊÄÅ ÁºñËæëÊñá‰ª∂ /etc/network/interfaces 1sudo vi /etc/network/interfaces Âπ∂Áî®‰∏ãÈù¢ÁöÑË°åÊù•ÊõøÊç¢ÊúâÂÖ≥eth0ÁöÑË°åÔºö 12345678# The primary network interfaceauto eth0iface eth0 inet staticaddress 192.168.2.1gateway 192.168.2.254netmask 255.255.255.0#network 192.168.2.0#broadcast 192.168.2.255 Â∞Üeth0ÁöÑIPÂàÜÈÖçÊñπÂºè‰øÆÊîπ‰∏∫ÈùôÊÄÅÂàÜÈÖç(static)ÂêéÔºå‰∏∫ÂÖ∂Âà∂ÂÆöIP„ÄÅÁΩëÂÖ≥„ÄÅÂ≠êÁΩëÊé©Á†ÅÁ≠â‰ø°ÊÅØ„ÄÇ Â∞Ü‰∏äÈù¢ÁöÑUbuntu IPÂú∞ÂùÄÁ≠â‰ø°ÊÅØÊç¢Êàê‰Ω†Ëá™Â∑±Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ Áî®‰∏ãÈù¢ÁöÑÂëΩ‰ª§‰ΩøÁΩëÁªúËÆæÁΩÆÁîüÊïàÔºö 1sudo /etc/init.d/networking restart Êìç‰ΩúÈò≤ÁÅ´Â¢ô(serviceÊñπÂºè) Êü•ÁúãÈò≤ÁÅ´Â¢ôÁä∂ÊÄÅ 1service iptables status ÂºÄÂêØÈò≤ÁÅ´Â¢ô 1service iptables start ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ô 1service iptables stop Êü•ÊâæÂ§ßÊñá‰ª∂ ÊêúÁ¥¢ÂΩìÂâçÁõÆÂΩï‰∏ãÔºåË∂ÖËøá100MÂ§ßÂ∞èÁöÑÊñá‰ª∂ 1find . -type f -size +100M Êü•ÁúãË∂ÖËøá100MÂ§ßÂ∞èÁöÑÊñá‰ª∂ÂèäÂÖ∂Áõ∏ÂÖ≥‰ø°ÊÅØ 1find . -type f -size +800M -print0 | xargs -0 ls -l Êü•ÊâæË∂ÖËøá100MÂ§ßÂ∞èÊñá‰ª∂ÔºåÂπ∂ÊòæÁ§∫Êü•ÊâæÂá∫Êù•Êñá‰ª∂ÁöÑÂÖ∑‰ΩìÂ§ßÂ∞è 1find . -type f -size +100M -print0 | xargs -0 du -h Êü•ÊâæË∂ÖËøá100MÂ§ßÂ∞èÊñá‰ª∂Âπ∂ÂØπÊü•ÊâæÁªìÊûúÊåâÁÖßÊñá‰ª∂Â§ßÂ∞èÂÅö‰∏Ä‰∏™ÊéíÂ∫è 1find . -type f -size +800M -print0 | xargs -0 du -h | sort -nr Êü•ÊâæLinux‰∏ãÁöÑÂ§ßÁõÆÂΩï 1du -h --max-depth=1]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java StringÂ∏∏ËßÅÈóÆÈ¢ò]]></title>
    <url>%2Fposts%2Fd0a49d51.html</url>
    <content type="text"><![CDATA[È¶ñÂÖàÁúã‰∏ÄÊÆµ‰ª£Á†ÅÂùóÔºö 123456789public String gets1() &#123; return "" + System.currentTimeMillis();&#125;public String gets2() &#123; return String.valueOf(System.currentTimeMillis());&#125;public String gets3() &#123; return new String("") + System.currentTimeMillis();&#125; Ëøô‰∏â‰∏™ÊñπÊ≥ïÈÉΩÊòØËæìÂá∫ÂΩìÂâçÊó∂Èó¥Êà≥stringÁ±ªÂûãÁöÑÊï∞ÊçÆÔºå‰ΩÜ‰ªñ‰ª¨Êúâ‰ªÄ‰πà‰∏çÂêåÂë¢ÔºüÂèçÁºñËØëÁúã‰∏ã‰∏â‰∏™ÊñπÊ≥ïÁöÑÁªÜËäÇÔºö 12345678910111213141516171819202122232425262728293031public java.lang.String gets1();Code: 0: new #2 // class java/lang/StringBuilder 3: dup 4: invokespecial #3 // Method java/lang/StringBuilder."&lt;init&gt;":()V 7: ldc #4 // String 9: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 12: invokestatic #6 // Method java/lang/System.currentTimeMillis:()J 15: invokevirtual #7 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder; 18: invokevirtual #8 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; 21: areturn' public java.lang.String gets2();Code: 0: invokestatic #6 // Method java/lang/System.currentTimeMillis:()J 3: invokestatic #9 // Method java/lang/String.valueOf:(J)Ljava/lang/String; 6: areturnpublic java.lang.String gets3();Code: 0: new #2 // class java/lang/StringBuilder 3: dup 4: invokespecial #3 // Method java/lang/StringBuilder."&lt;init&gt;":()V 7: new #10 // class java/lang/String 10: dup 11: ldc #4 // String 13: invokespecial #11 // Method java/lang/String."&lt;init&gt;":(Ljava/lang/String;)V 16: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 19: invokestatic #6 // Method java/lang/System.currentTimeMillis:()J 22: invokevirtual #7 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder; 25: invokevirtual #8 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; 28: areturn ÊñπÊ≥ï1Ôºö&quot;&quot;+System.currentTimeMillis()ÊòØÈÄöËøáStringBuilderÁöÑappendÊñπÊ≥ïÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™Á©∫Â≠óÁ¨¶‰∏≤ÂèäÂΩìÂâçÊó∂Èó¥Êà≥ÔºåÁÑ∂ÂêéÈÄöËøátoStringÊñπÊ≥ïÁîüÊàê‰∏Ä‰∏™ÂÖ®Êñ∞ÁöÑStringÂØπË±°„ÄÇ ËØ•ÊñπÊ≥ï‰∏≠‰ΩøÁî®‰∫Ü‰∏Ä‰∏™StringBuilderÂíå‰∏Ä‰∏™StringÂØπË±°„ÄÇ ÊñπÊ≥ï2ÔºöString.valueOf(System.currentTimeMillis())Áõ¥Êé•Ëé∑ÂèñÂΩìÂâçÊó∂Èó¥Êà≥ÔºåÁÑ∂ÂêéÂàõÂª∫‰∫Ü‰∏Ä‰∏™StringÂØπË±°„ÄÇ ËØ•ÊñπÊ≥ï‰∏≠‰ΩøÁî®‰∫Ü‰∏Ä‰∏™StringÂØπË±°„ÄÇ ÊñπÊ≥ï3Ôºönew String(&quot;&quot;) + System.currentTimeMillis()ÂàôÊúÄÈ∫ªÁÉ¶ÔºåÂÖàÂàõÂª∫‰∫ÜStringBuilderÂØπË±°ÔºåÁÑ∂ÂêéÊñ∞Âª∫‰∫Ü‰∏Ä‰∏™Á©∫Â≠óÁ¨¶‰∏≤ÁöÑStringÂØπË±°ÔºåÈÄöËøáappendÊñπÊ≥ïÊ∑ªÂä†ËøõÂéªÔºåÊúÄÂêétoStringÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑStringÂØπË±°„ÄÇ ËØ•ÊñπÊ≥ï‰∏≠‰ΩøÁî®‰∫Ü‰∏Ä‰∏™StringBuilderÂØπË±°Âíå‰∏§‰∏™StringÂØπË±°„ÄÇ ‰ªé‰∏äÈù¢ÁöÑÂàÜÊûê‰∏≠Â∞±ÂèØ‰ª•ÁúãÂá∫ÔºåÂæàÊòéÊòæÊñπÊ≥ï2ÊòØÊúÄ‰ºòÁöÑÔºå‰∏∫‰ªÄ‰πàÂë¢ÔºüÂú®Ê∑±ÂÖ•String‰πãÂâçÔºåÂÖà‰∫ÜËß£‰∏ãJVMÁöÑÁªÑÊàê„ÄÇ Â†ÜÔºöJVMËøêË°å‰∏≠Áî≥ËØ∑ÁöÑÂØπË±°Â≠òÊîæÁöÑ‰ΩçÁΩÆ„ÄÇ‰πüÂ∞±ÊòØÊâÄËØ¥ÁöÑÊñ∞Áîü‰ª£+ËÄÅÂπ¥‰ª£„ÄÇ ËôöÊãüÊú∫Ê†àÔºöÊØè‰∏™ÊñπÊ≥ïÂú®Ë¢´Ë∞ÉÁî®ÊâßË°åÊó∂ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™ËôöÊãüÊú∫Ê†àÔºåÁî®‰∫éÂ≠òÂÇ®‰∏¥Êó∂ÁöÑÈÅçÂéÜ„ÄÅÊñπÊ≥ïÁ≠â‰ø°ÊÅØ„ÄÇË∞ÉÁî®Áõ∏ÂΩì‰∫éËøõÊ†àÔºåËøîÂõûÁªìÊûúÂàôÁõ∏ÂΩì‰∫éÂá∫Ê†àÔºåÂºÇÂ∏∏ËæìÂá∫ÁöÑÊ†à‰ø°ÊÅØÂ∞±ÊòØ‰ªéËøôÈáåÊù•ÁöÑ„ÄÇ Êú¨Âú∞ÊñπÊ≥ïÊ†àÔºö‰πüÊòØÊñπÊ≥ïË∞ÉÁî®ÔºåÂè™ÊòØË∞ÉÁî®ÁöÑÊñπÊ≥ïÊòØÊú¨Âú∞nativeÊñπÊ≥ï„ÄÇ ÊñπÊ≥ïÂå∫ÔºöÂ≠òÂÇ®ÁöÑÁ±ªÁöÑÁªìÊûÑ‰ø°ÊÅØÔºåÈùôÊÄÅÂèòÈáèÁ≠â‰ø°ÊÅØ„ÄÇ‰πüÂ∞±ÊòØÊ∞∏Áîü‰ª£ÔºåÂèëÁîüFULL GCÁöÑÂú∞ÊñπÔºàJava8‰∏≠‰ª•ÂÖÉÁ©∫Èó¥‰ª£Êõø‰∫ÜÊ∞∏Áîü‰ª£Ëøô‰∏™Ê¶ÇÂøµÔºâ„ÄÇ Â∏∏ÈáèÊ±†ÔºöÊñπÊ≥ïÂå∫ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁî®Êù•Â≠òÊîæÂêÑÁßçÁîüÊàêÁöÑÂ≠óÈù¢ÈáèÔºå‰æãÂ¶ÇÂÆö‰πâÁöÑ‰∏Ä‰∏™StringÁ±ªÂûãÁöÑÊï∞ÊçÆÔºàJava7‰∏≠ÊääÂ∏∏ÈáèÊ±†ÁßªÂà∞‰∫ÜÂ†Ü‰∏≠Ôºâ 0. StringÁöÑÁâπÊÄß 1„ÄÅStringÁ±ªÊòØfinalÁöÑÔºå‰∏çÂèØË¢´ÁªßÊâø„ÄÇ 2„ÄÅStringÁ±ªÊòØÁöÑÊú¨Ë¥®ÊòØÂ≠óÁ¨¶Êï∞ÁªÑchar[], Âπ∂‰∏îÂÖ∂ÂÄº‰∏çÂèØÊîπÂèò„ÄÇ 3„ÄÅJavaËøêË°åÊó∂‰ºöÁª¥Êä§‰∏Ä‰∏™String PoolÔºàStringÊ±†ÔºâÔºåJavaDocÁøªËØëÂæàÊ®°Á≥ä‚ÄúÂ≠óÁ¨¶‰∏≤ÁºìÂÜ≤Âå∫‚Äù„ÄÇStringÊ±†Áî®Êù•Â≠òÊîæËøêË°åÊó∂‰∏≠‰∫ßÁîüÁöÑÂêÑÁßçÂ≠óÁ¨¶‰∏≤ÔºåÂπ∂‰∏îÊ±†‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÂÜÖÂÆπ‰∏çÈáçÂ§ç„ÄÇËÄå‰∏ÄËà¨ÂØπË±°‰∏çÂ≠òÂú®Ëøô‰∏™ÁºìÂÜ≤Ê±†ÔºåÂπ∂‰∏îÂàõÂª∫ÁöÑÂØπË±°‰ªÖ‰ªÖÂ≠òÂú®‰∫éÊñπÊ≥ïÁöÑÂ†ÜÊ†àÂå∫„ÄÇ 1. ÂàõÂª∫Â≠óÁ¨¶‰∏≤ ÂàõÂª∫Â≠óÁ¨¶‰∏≤‰∏ÄËà¨Â∞±‰∏§ÁßçÊñπÊ≥ïÔºö 123String s1="hello";String s2=new String("hello"); Á¨¨‰∏ÄÁßçÊñπÊ≥ïÊòØÂú®Ê†à‰∏≠ÂàõÂª∫‰∏Ä‰∏™StringÁ±ªÂûãÁöÑÂºïÁî®s1ÔºåÁÑ∂ÂêéÂú®Â∏∏ÈáèÊ±†‰∏≠ÂØªÊâæÔºåÂ¶ÇÊûúÂ∏∏ÈáèÊ±†‰∏≠Â≠òÂú®helloÁöÑÂ≠óÁ¨¶‰∏≤Êï∞ÊçÆÔºåÂàôÁõ¥Êé•Êääs1ÊåáÂêëÂ∏∏ÈáèÊ±†‰∏≠helloÁöÑÂú∞ÂùÄÔºõ Âê¶ÂàôÂ∞±‰ºöÂú®Â∏∏ÈáèÊ±†‰∏≠ÂàõÂª∫helloËøô‰∏™Â≠óÁ¨¶‰∏≤Êï∞ÊçÆÔºåÁÑ∂ÂêéÊääs1ÊåáÂêëÊñ∞ÂàõÂª∫ÁöÑhelloÂú∞ÂùÄ„ÄÇ Á¨¨‰∫åÁßçÊñπÊ≥ïÊòØÂú®Ê†à‰∏≠ÂàõÂª∫‰∏Ä‰∏™StringÁ±ªÂûãÁöÑÂºïÁî®s2ÔºåÁÑ∂ÂêéÂú®Â∏∏ÈáèÊ±†‰∏≠ÂØªÊâæÔºåÂ¶ÇÊûúÂ∏∏ÈáèÊ±†‰∏≠Â≠òÂú®ËØ•Êï∞ÊçÆÔºåÂàôÂú®Â†Ü‰∏≠Â§çÂà∂Êã∑Ë¥ùËØ•Êï∞ÊçÆÔºåÁÑ∂ÂêéÊääs2ÊåáÂêëÂ†Ü‰∏≠Êñ∞Âª∫ÁöÑÂú∞ÂùÄÔºõ Âê¶Âàô‰ºöÂàõÂª∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Â≠òÊîæÂú®Â∏∏ÈáèÊ±†‰∏≠ÔºåÁÑ∂ÂêéËøõË°åÊã∑Ë¥ù‰∏Ä‰ªΩÂà∞Â†Ü‰∏≠Ôºås2ÊåáÂêëÂ†Ü‰∏≠ÁöÑÂú∞ÂùÄ„ÄÇ ÈÄöËøánewÂàõÂª∫ÁöÑstring‰∏ÄÂÆö‰ºöÂú®Â†Ü‰∏≠ÂàõÂª∫‰∏Ä‰ªΩÊï∞ÊçÆÔºåÂêåÊó∂Â∏∏ÈáèÊ±†ËÇØÂÆöÊúâ‰∏Ä‰∏™ÂÄºÁöÑÂ§á‰ªΩÊìç‰ΩúÔºõËÄåÂçïÁã¨ÁöÑÂ≠óÁ¨¶‰∏≤ÂàôÊòØÁõ¥Êé•ÊåáÂêëÂ∏∏ÈáèÊ±†ÔºåÊâÄ‰ª•‰∏ÄËà¨ËøòÊòØ‰ΩøÁî®Â≠óÁ¨¶‰∏≤Êõ¥Â•Ω‰∫õÔºåÂÖ∑‰ΩìÂèØÁúãÂ¶Ç‰∏ãÁöÑÂõæËß£Ôºö 2. Â≠óÁ¨¶‰∏≤ + Êìç‰Ωú 1234567891011String s1="helloworld";String s2="hello" + "world";String s3=new String("hello") + "world";System.out.println(s1 == s2); // trueSystem.out.println(s2 == s3); // falseSystem.out.println(s1 == s3); // false ‰ª£Á†Å‰∏≠&quot;hello&quot; + &quot;world&quot;Âú®ÁºñËØëÊúüÂ∑≤ÁªèÁü•ÈÅì‰∫ÜÊï∞ÊçÆÊÉÖÂÜµÔºà‰ΩøÁî®javacÁºñËØëÊü•ÁúãclassÊñá‰ª∂‰ºöÂèëÁé∞s1Âíås2ÊòØ‰∏ÄËá¥ÁöÑÔºâÔºåJVM‰ºöËá™Âä®‰ºòÂåñ‰ΩøÂæós1Âíås2ÊòØ‰∏ÄÊ†∑ÁöÑÔºås3Áî±‰∫éÊúânewÊìç‰ΩúÔºåÊâÄ‰ª•ÈúÄË¶ÅStringBuilderÁöÑappendÂÆåÊàêÔºåÂÖ∑‰ΩìÂèØÁúãÂ¶Ç‰∏ãÂõæËß£: 3. Â≠óÁ¨¶‰∏≤ÂèòÈáè + Êìç‰Ωú 123456789String s1="hello";String s2="world";String s3="helloworld";String s4=s1 + s2;System.out.println(s3 == s4); // false ËøôÈáåÁöÑÊ†∑‰æãÂíå‰∏ä‰∏Ä‰∏™Ê†∑‰æãÂ≠òÂú®‰∏Ä‰∫õÂ∑ÆÂà´ÔºåËøôÈáåÁöÑs4ÊòØÁî±s1 + s2Ëé∑ÂæóÁöÑÔºåÂú®ÁºñËØëÊúüÊó†Ê≥ïÊÑüÁü•Âà∞ÂÖ∂ÂÆûÈôÖÂÄºÔºåÂú®ËøêË°åÊúüÊó∂‰ºöÂà©Áî®StringBuilderÁöÑappendÂâ©‰∏ã‰∏Ä‰∏™Êñ∞ÁöÑStringÂØπË±°ÔºåÊâÄ‰ª•s3ÊåáÂêëÁöÑÊòØÂ∏∏ÈáèÊ±†ÔºåËÄås4ÊåáÂêëÁöÑÂ†ÜÔºå‰∏§ËÄÖËá™ÁÑ∂ÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ 1s4 = new StringBuilder()).append(s1).append(s2).toString(); 5. Â∏¶finalÁöÑÂ≠óÁ¨¶‰∏≤ÂèòÈáè + Êìç‰Ωú 12345678910111213final String s1="hello";String s2="world";String s3="helloworld";String s4=s1 + "world";String s5=s1 + s2;System.out.println(s3 == s4); // trueSystem.out.println(s3 == s5); // false ‰ΩøÁî®javacÂèçÁºñËØë‰πãÂêéÁöÑclassÊñá‰ª∂Â¶Ç‰∏ãÔºö 1234567891011String var1 = "world";String var2 = "helloworld";String var3 = "helloworld";String var4 = "hello" + var1;System.out.println(var2 == var3);System.out.println(var2 == var4); Ê∑ªÂä†‰∫ÜfinalÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÁöÑÂèòÈáèÂú®ÁºñËØëÊúü‰ºöË¢´ÂØπÂ∫îÁöÑÂ≠óÁ¨¶‰∏≤Áõ¥Êé•ÊõøÊç¢ÊéâÔºåÁõ∏ÂΩì‰∫éÂ≠óÁ¨¶‰∏≤Êï∞ÊçÆÔºåËÄåÂåÖÂê´‰∫ÜÂ≠óÁ¨¶‰∏≤ÂèòÈáèÁöÑ+Êìç‰ΩúÂàô‰æùÊóßÊòØ‰ΩøÁî®‰∫ÜStringBuilder„ÄÇ 5. intern()ÊñπÊ≥ï String.internÊñπÊ≥ïÊòØ‰∏Ä‰∏™nativeÊñπÊ≥ïÔºåËé∑ÂèñÁöÑÊòØÂΩìÂâçÂ≠óÁ¨¶‰∏≤Âú®Â∏∏ÈáèÊ±†ÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûúÂ∏∏ÈáèÊ±†Â≠òÂú®ËØ•Êï∞ÊçÆÂàôÁõ¥Êé•ËøîÂõûÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ÂàôÊääËØ•Êï∞ÊçÆÊ∑ªÂä†Âà∞Â∏∏ÈáèÊ±†‰∏≠ÂêéËøîÂõûÔºåÊâÄ‰ª•Êúâ**String s1 = &quot;abc&quot; Âíå String s2 = s1.intern() ‰∏≠ÁöÑs1 == s2ÂíåString s1=&quot;world&quot; Âíå String s2=new String(&quot;world&quot;) ‰∏≠ s1.intern() == s2.intern()**1 6. ÊÄªÁªì String Êú¨Ë∫´ÊòØfinalÁ±ªÂûãÁöÑÁ±ªÔºåÂú®Êó•Â∏∏‰ΩøÁî®‰∏≠ÈúÄË¶ÅÈ¢ëÁπÅÁöÑÂÅöÂ≠óÁ¨¶‰∏≤ÂêàÂπ∂Êìç‰ΩúÊó∂ÔºåÂ∞ΩÂèØËÉΩÁöÑ‰ΩøÁî®StringBuilderÔºàÂ¶ÇÈúÄË¶ÅËÄÉËôëÁ∫øÁ®ãÂÆâÂÖ®Âàô‰ΩøÁî®StringBufferÔºâÔºåÈôç‰ΩéÊó†Ë∞ìÁöÑÂ≠óÁ¨¶‰∏≤ÂàõÂª∫Êìç‰ΩúÔºåÂú®‰øùËØÅÂÆâÂÖ®ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊèêÈ´òÊïàÁéáÔºÅ]]></content>
      <categories>
        <category>Java</category>
        <category>Èù¢ËØïÈ¢ò</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Èù¢ËØïÈ¢ò</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂºÇÂ∏∏Â≠¶‰π†]]></title>
    <url>%2Fposts%2Fe60072fb.html</url>
    <content type="text"><![CDATA[‰ªÄ‰πàÊòØÂºÇÂ∏∏ ÂºÇÂ∏∏Êú¨Ë¥®‰∏äÊòØÁ®ãÂ∫è‰∏äÁöÑÈîôËØØÔºåËøô‰∏™ÈîôËØØÂåÖÊã¨Á®ãÂ∫èÈÄªËæëÈîôËØØÂíåÁ≥ªÁªüÈîôËØØ„ÄÇÈîôËØØÂú®Á®ãÂ∫è‰∏≠ÂèàÊúâËøêË°åÊó∂ÂºÇÂ∏∏ÂíåÁºñËØëÊó∂ÂºÇÂ∏∏„ÄÇ ÁºñËØëÂºÇÂ∏∏Âú®ÁºñËØëÊúüÈó¥Âá∫ÈîôÊúâÁºñËØëÂô®Â∏ÆÂä©ÈîôÔºåÁÑ∂ËÄåËøêË°åÊúüÈó¥ÁöÑÈîôËØØÁºñËØëÂô®ÂàôÈû≠ÈïøËé´Âèä‰∫ÜÔºåÂπ∂‰∏îËøêË°åÊúüÈó¥ÁöÑÈîôËØØÂæÄÂæÄÊòØÈöæ‰ª•È¢ÑÊñôÁöÑÔºå‰ΩÜÊòØÂ¶ÇÊûú‰∏çÂ§ÑÁêÜËøô‰∫õÂºÇÂ∏∏Âàô‰ºöÁõ¥Êé•ÂØºËá¥Á®ãÂ∫èÂ¥©Ê∫É„ÄÇÂõ†Ê≠§Âú®ËøêË°åÊúüÈó¥Âá∫Áé∞ÈîôËØØÂ∫îËØ•Â¶Ç‰ΩïÊù•Ë°•ÊïëÊòµÔºüJavaÊèê‰æõ‰∫ÜÂºÇÂ∏∏Êú∫Âà∂Êù•Â§ÑÁêÜËøô‰∫õÈîôËØØ„ÄÇ ÂºÇÂ∏∏ÂàÜÁ±ª Âú®Java‰∏≠ÁöÑÂºÇÂ∏∏Ë¢´ÂΩìÂÅöÂØπË±°Êù•Â§ÑÁêÜÔºåÊ†πÁ±ª‰∏∫java.lang.ThrowableÁ±ªÔºåÂú®Java‰∏≠ÂÆö‰πâ‰∫ÜÂæàÂ§öÂºÇÂ∏∏Á±ªÔºàÂ¶ÇOutOfMemoryError„ÄÅNullPointerException„ÄÅIndexOutOfBoundsExceptionÁ≠âÔºâÔºåËøô‰∫õÂºÇÂ∏∏Á±ªÂàÜ‰∏∫‰∏§Â§ßÁ±ªÔºöErrorÂíåException„ÄÇ Error ErrorÊòØÊó†Ê≥ïÂ§ÑÁêÜÁöÑÂºÇÂ∏∏ÔºåÊØîÂ¶ÇOutOfMemoryErrorÔºå‰∏ÄËà¨ÂèëÁîüËøôÁßçÂºÇÂ∏∏ÔºåJVM‰ºöËá™Âä®ÁªàÊ≠¢Á®ãÂ∫èÔºåÂõ†Ê≠§ÁºñÂÜôÁ®ãÂ∫èÊó∂‰∏çÈúÄË¶ÅÂÖ≥ÂøÉËøôÁ±ªÂºÇÂ∏∏„ÄÇ Exception ExceptionÔºåÊòØÁªèÂ∏∏ËßÅÂà∞ÁöÑ‰∏Ä‰∫õÂºÇÂ∏∏ÊÉÖÂÜµÔºåÊØîÂ¶ÇNullPointerExceptionÔºåËøô‰∫õÂºÇÂ∏∏ÊòØÂèØ‰ª•Â§ÑÁêÜÁöÑ„ÄÇ ExceptionÁ±ªÁöÑÂºÇÂ∏∏ÂåÖÊã¨checked exceptionÂíåunchecked exceptionÔºàunchecked exception‰πüÁß∞ËøêË°åÊó∂ÂºÇÂ∏∏RuntimeExceptionÔºåÂΩìÁÑ∂ËøôÈáåÁöÑËøêË°åÊó∂ÂºÇÂ∏∏Âπ∂‰∏çÊòØÂâçÈù¢ÊâÄËØ¥ÁöÑËøêË°åÊúüÈó¥ÁöÑÂºÇÂ∏∏ÔºåÂè™ÊòØJava‰∏≠Áî®ËøêË°åÊó∂ÂºÇÂ∏∏Ëøô‰∏™ÊúØËØ≠Êù•Ë°®Á§∫ÔºåExceptionÁ±ªÁöÑÂºÇÂ∏∏ÈÉΩÊòØÂú®ËøêË°åÊúüÈó¥ÂèëÁîüÁöÑÔºâ„ÄÇ unchecked exceptionÔºàÈùûÊ£ÄÊü•ÂºÇÂ∏∏ÔºâÔºå‰πüÁß∞ËøêË°åÊó∂ÂºÇÂ∏∏ÔºàRuntimeExceptionÔºâÔºåÊØîÂ¶ÇÂ∏∏ËßÅÁöÑNullPointerException„ÄÅIndexOutOfBoundsException„ÄÇÂØπ‰∫éËøêË°åÊó∂ÂºÇÂ∏∏ÔºåjavaÁºñËØëÂô®‰∏çË¶ÅÊ±ÇÂøÖÈ°ªËøõË°åÂºÇÂ∏∏ÊçïËé∑Â§ÑÁêÜÊàñËÄÖÊäõÂá∫Â£∞ÊòéÔºåÁî±Á®ãÂ∫èÂëòËá™Ë°åÂÜ≥ÂÆö„ÄÇ checked exceptionÔºàÊ£ÄÊü•ÂºÇÂ∏∏ÔºâÔºå‰πüÁß∞ÈùûËøêË°åÊó∂ÂºÇÂ∏∏ÔºàËøêË°åÊó∂ÂºÇÂ∏∏‰ª•Â§ñÁöÑÂºÇÂ∏∏Â∞±ÊòØÈùûËøêË°åÊó∂ÂºÇÂ∏∏ÔºâÔºåjavaÁºñËØëÂô®Âº∫Âà∂Á®ãÂ∫èÂëòÂøÖÈ°ªËøõË°åÊçïËé∑Â§ÑÁêÜÔºåÊØîÂ¶ÇÂ∏∏ËßÅÁöÑIOExeptionÂíåSQLException„ÄÇÂØπ‰∫éÈùûËøêË°åÊó∂ÂºÇÂ∏∏Â¶ÇÊûú‰∏çËøõË°åÊçïËé∑ÊàñËÄÖÊäõÂá∫Â£∞ÊòéÂ§ÑÁêÜÔºåÁºñËØëÈÉΩ‰∏ç‰ºöÈÄöËøá„ÄÇ Âú®Java‰∏≠ÔºåÊâÄÊúâÂºÇÂ∏∏Á±ªÁöÑÁà∂Á±ªÊòØThrowableÁ±ªÔºåErrorÁ±ªÊòØerrorÁ±ªÂûãÂºÇÂ∏∏ÁöÑÁà∂Á±ªÔºåExceptionÁ±ªÊòØexceptionÁ±ªÂûãÂºÇÂ∏∏ÁöÑÁà∂Á±ªÔºåRuntimeExceptionÁ±ªÊòØÊâÄÊúâËøêË°åÊó∂ÂºÇÂ∏∏ÁöÑÁà∂Á±ªÔºåRuntimeException‰ª•Â§ñÁöÑÂπ∂‰∏îÁªßÊâøExceptionÁöÑÁ±ªÊòØÈùûËøêË°åÊó∂ÂºÇÂ∏∏„ÄÇ ÂÖ∏ÂûãÁöÑRuntimeExceptionÂåÖÊã¨NullPointerException„ÄÅIndexOutOfBoundsException„ÄÅIllegalArgumentExceptionÁ≠â„ÄÇ ÂÖ∏ÂûãÁöÑÈùûRuntimeExceptionÂåÖÊã¨IOException„ÄÅSQLExceptionÁ≠â„ÄÇ Java‰∏≠Â¶Ç‰ΩïÂ§ÑÁêÜÂºÇÂ∏∏ Âú®Java‰∏≠Â¶ÇÊûúÈúÄË¶ÅÂ§ÑÁêÜÂºÇÂ∏∏ÔºåÂøÖÈ°ªÂÖàÂØπÂºÇÂ∏∏ËøõË°åÊçïËé∑ÔºåÁÑ∂ÂêéÂÜçÂØπÂºÇÂ∏∏ÊÉÖÂÜµËøõË°åÂ§ÑÁêÜ„ÄÇ Â¶Ç‰ΩïÂØπÂèØËÉΩÂèëÁîüÂºÇÂ∏∏ÁöÑ‰ª£Á†ÅËøõË°åÂºÇÂ∏∏ÊçïËé∑ÂíåÂ§ÑÁêÜÂë¢Ôºü‰ΩøÁî®tryÂíåcatchÂÖ≥ÈîÆÂ≠óÂç≥ÂèØ„ÄÇ ÊçïËé∑ÂºÇÂ∏∏ 12345678910111213try &#123; File file = new File("d:/a.txt"); if(!file.exists()) file.createNewFile();&#125; catch (IOException e) &#123;// TODO: handle exception&#125; Âú®try‰∏≠ÂèëÁîüÁöÑÂºÇÂ∏∏ÔºåÂ∞Ü‰∫§Áî±catchËøõË°åÂ§ÑÁêÜ„ÄÇ ÊäõÂá∫ÂºÇÂ∏∏ 123456789101112131415161718192021222324252627public class Main &#123; public static void main(String[] args) &#123; try &#123; createFile(); &#125; catch (Exception e) &#123; // TODO: handle exception &#125; &#125; public static void createFile() throws IOException&#123; File file = new File("d:/a.txt"); if(!file.exists()) file.createNewFile(); &#125;&#125; Âú®createFile()‰∏≠Âπ∂Ê≤°ÊúâÂØπÂºÇÂ∏∏ËøõË°åÂ§ÑÁêÜÔºåËÄåÊòØÁî®throwsÂÖ≥ÈîÆÂ≠óÂ£∞ÊòéÊäõÂá∫ÂºÇÂ∏∏ÔºåÂç≥ÂëäÁü•Ëøô‰∏™ÊñπÊ≥ïÁöÑË∞ÉÁî®ËÄÖÊ≠§ÊñπÊ≥ïÂèØËÉΩ‰ºöÊäõÂá∫IOException„ÄÇÈÇ£‰πàÂú®mainÊñπÊ≥ï‰∏≠Ë∞ÉÁî®createFileÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºåÈááÁî®try...catchÂùóËøõË°å‰∫ÜÂºÇÂ∏∏ÊçïËé∑Â§ÑÁêÜ„ÄÇ throwÂÖ≥ÈîÆÂ≠óÊâãÂä®Êù•ÊäõÂá∫ÂºÇÂ∏∏ 1234567891011121314151617181920212223242526272829public class Main &#123; public static void main(String[] args) &#123; try &#123; int[] data = new int[]&#123;1,2,3&#125;; System.out.println(getDataByIndex(-1,data)); &#125; catch (Exception e) &#123; System.out.println(e.getMessage()); &#125; &#125; public static int getDataByIndex(int index,int[] data) &#123; if(index&lt;0||index&gt;=data.length) throw new ArrayIndexOutOfBoundsException("Êï∞ÁªÑ‰∏ãÊ†áË∂äÁïå"); return data[index]; &#125;&#125; ÁÑ∂ÂêéÂú®catchÂùó‰∏≠ËøõË°åÊçïËé∑„ÄÇ Âú®Java‰∏≠ËøõË°åÂºÇÂ∏∏Â§ÑÁêÜÁöÑËØùÔºåÂØπ‰∫éÂèØËÉΩ‰ºöÂèëÁîüÂºÇÂ∏∏ÁöÑ‰ª£Á†ÅÔºåÂèØ‰ª•ÈÄâÊã©‰∏âÁßçÊñπÊ≥ïÊù•ËøõË°åÂºÇÂ∏∏Â§ÑÁêÜÔºö1ÔºâÂØπ‰ª£Á†ÅÂùóÁî®try..catchËøõË°åÂºÇÂ∏∏ÊçïËé∑Â§ÑÁêÜÔºõ2ÔºâÂú®ËØ•‰ª£Á†ÅÁöÑÊñπÊ≥ï‰ΩìÂ§ñÁî®throwsËøõË°åÊäõÂá∫Â£∞ÊòéÔºåÂëäÁü•Ê≠§ÊñπÊ≥ïÁöÑË∞ÉÁî®ËÄÖËøôÊÆµ‰ª£Á†ÅÂèØËÉΩ‰ºöÂá∫Áé∞Ëøô‰∫õÂºÇÂ∏∏ÔºåÈúÄË¶ÅË∞®ÊÖéÂ§ÑÁêÜ„ÄÇÊ≠§Êó∂Êúâ‰∏§ÁßçÊÉÖÂÜµÔºöÂ¶ÇÊûúÂ£∞ÊòéÊäõÂá∫ÁöÑÂºÇÂ∏∏ÊòØÈùûËøêË°åÊó∂ÂºÇÂ∏∏ÔºåÊ≠§ÊñπÊ≥ïÁöÑË∞ÉÁî®ËÄÖÂøÖÈ°ªÊòæÁ§∫Âú∞Áî®try..catchÂùóËøõË°åÊçïËé∑ÊàñËÄÖÁªßÁª≠Âêë‰∏äÂ±ÇÊäõÂá∫ÂºÇÂ∏∏„ÄÇÂ¶ÇÊûúÂ£∞ÊòéÊäõÂá∫ÁöÑÂºÇÂ∏∏ÊòØËøêË°åÊó∂ÂºÇÂ∏∏ÔºåÊ≠§ÊñπÊ≥ïÁöÑË∞ÉÁî®ËÄÖÂèØ‰ª•ÈÄâÊã©Âú∞ËøõË°åÂºÇÂ∏∏ÊçïËé∑Â§ÑÁêÜ„ÄÇ3ÔºâÂú®‰ª£Á†ÅÂùóÁî®throwÊâãÂä®ÊäõÂá∫‰∏Ä‰∏™ÂºÇÂ∏∏ÂØπË±°ÔºåÊ≠§Êó∂‰πüÊúâ‰∏§ÁßçÊÉÖÂÜµÔºåË∑ü2Ôºâ‰∏≠ÁöÑÁ±ª‰ººÔºöÂ¶ÇÊûúÊäõÂá∫ÁöÑÂºÇÂ∏∏ÂØπË±°ÊòØÈùûËøêË°åÊó∂ÂºÇÂ∏∏ÔºåÊ≠§ÊñπÊ≥ïÁöÑË∞ÉÁî®ËÄÖÂøÖÈ°ªÊòæÁ§∫Âú∞Áî®try..catchÂùóËøõË°åÊçïËé∑ÊàñËÄÖÁªßÁª≠Âêë‰∏äÂ±ÇÊäõÂá∫ÂºÇÂ∏∏„ÄÇÂ¶ÇÊûúÊäõÂá∫ÁöÑÂºÇÂ∏∏ÂØπË±°ÊòØËøêË°åÊó∂ÂºÇÂ∏∏ÔºåÊ≠§ÊñπÊ≥ïÁöÑË∞ÉÁî®ËÄÖÂèØ‰ª•ÈÄâÊã©Âú∞ËøõË°åÂºÇÂ∏∏ÊçïËé∑Â§ÑÁêÜ„ÄÇÔºàÂ¶ÇÊûúÊúÄÁªàÂ∞ÜÂºÇÂ∏∏ÊäõÁªômainÊñπÊ≥ïÔºåÂàôÁõ∏ÂΩì‰∫é‰∫§ÁªôjvmËá™Âä®Â§ÑÁêÜÔºåÊ≠§Êó∂jvm‰ºöÁÆÄÂçïÂú∞ÊâìÂç∞ÂºÇÂ∏∏‰ø°ÊÅØÔºâ‰∏Ä‰∏™ÊñπÊ≥ïÊâÄËÉΩÊçïÊçâÁöÑÂºÇÂ∏∏Ôºå‰∏ÄÂÆöÊòØJava‰ª£Á†ÅÂú®ÊüêÂ§ÑÊâÄÊäõÂá∫ÁöÑÂºÇÂ∏∏„ÄÇÁÆÄÂçïÂú∞ËØ¥ÔºåÂºÇÂ∏∏ÊÄªÊòØÂÖàË¢´ÊäõÂá∫ÔºåÂêéË¢´ÊçïÊçâÁöÑ„ÄÇ ÁêÜËß£try,catch,finally,throws,throw‰∫î‰∏™ÂÖ≥ÈîÆÂ≠ó try,catch,finally tryÂÖ≥ÈîÆÂ≠óÁî®Êù•ÂåÖÂõ¥ÂèØËÉΩ‰ºöÂá∫Áé∞ÂºÇÂ∏∏ÁöÑÈÄªËæë‰ª£Á†ÅÔºåÂÆÉÂçïÁã¨Êó†Ê≥ï‰ΩøÁî®ÔºåÂøÖÈ°ªÈÖçÂêàcatchÊàñËÄÖfinally‰ΩøÁî®„ÄÇJavaÁºñËØëÂô®ÂÖÅËÆ∏ÁöÑÁªÑÂêà‰ΩøÁî®ÂΩ¢ÂºèÂè™Êúâ‰ª•‰∏ã‰∏âÁßçÂΩ¢ÂºèÔºö try...catch...; try....finally......; try....catch...finally... ÂΩìÁÑ∂catchÂùóÂèØ‰ª•ÊúâÂ§ö‰∏™ÔºåÊ≥®ÊÑètryÂùóÂè™ËÉΩÊúâ‰∏Ä‰∏™,finallyÂùóÊòØÂèØÈÄâÁöÑÔºà‰ΩÜÊòØÊúÄÂ§öÂè™ËÉΩÊúâ‰∏Ä‰∏™finallyÂùóÔºâ„ÄÇ ‰∏â‰∏™ÂùóÊâßË°åÁöÑÈ°∫Â∫è‰∏∫try‚Äî&gt;catch‚Äî&gt;finally„ÄÇ ÂΩìÁÑ∂Â¶ÇÊûúÊ≤°ÊúâÂèëÁîüÂºÇÂ∏∏ÔºåÂàôcatchÂùó‰∏ç‰ºöÊâßË°å„ÄÇ‰ΩÜÊòØfinallyÂùóÊó†ËÆ∫Âú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÈÉΩÊòØ‰ºöÊâßË°åÁöÑÔºàËøôÁÇπË¶ÅÈùûÂ∏∏Ê≥®ÊÑèÔºåÂõ†Ê≠§ÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÔºåÈÉΩ‰ºöÂ∞ÜÈáäÊîæËµÑÊ∫êÁöÑÊìç‰ΩúÊîæÂú®finallyÂùó‰∏≠ËøõË°åÔºâ„ÄÇ Âú®ÊúâÂ§ö‰∏™catchÂùóÁöÑÊó∂ÂÄôÔºåÊòØÊåâÁÖßcatchÂùóÁöÑÂÖàÂêéÈ°∫Â∫èËøõË°åÂåπÈÖçÁöÑÔºå‰∏ÄÊó¶ÂºÇÂ∏∏Á±ªÂûãË¢´‰∏Ä‰∏™catchÂùóÂåπÈÖçÔºåÂàô‰∏ç‰ºö‰∏éÂêéÈù¢ÁöÑcatchÂùóËøõË°åÂåπÈÖç„ÄÇ Âú®‰ΩøÁî®try..catch..finallyÂùóÁöÑÊó∂ÂÄôÔºåÊ≥®ÊÑèÂçÉ‰∏á‰∏çË¶ÅÂú®finallyÂùó‰∏≠‰ΩøÁî®returnÔºåÂõ†‰∏∫finally‰∏≠ÁöÑreturn‰ºöË¶ÜÁõñÂ∑≤ÊúâÁöÑËøîÂõûÂÄº„ÄÇ 1234567891011121314151617181920212223242526272829303132public String openFile() &#123; try &#123; FileInputStream inputStream = new FileInputStream("d:/a.txt"); int ch = inputStream.read(); System.out.println("aaa"); return "step1"; &#125; catch (FileNotFoundException e) &#123; System.out.println("file not found"); return "step2"; &#125;catch (IOException e) &#123; System.out.println("io exception"); return "step3"; &#125;finally&#123; System.out.println("finally block"); return "finally"; &#125;&#125; ËøôÈáåfinally‰∏≠ÁöÑËøîÂõûÂÄºÂõûÂêßcatchÈáåÈù¢ÁöÑËøîÂõûÂÄºÁªôË¶ÜÁõñÔºå‰πü‰ºöÊäätry‰∏≠ÁöÑreturnË¶ÜÁõñÊéâ„ÄÇ‰ªéË∞ÉËØï‰∏≠ÂèØ‰ª•ÁúãÂá∫Êù•Ôºåtry‰∏≠Â∞±ÁÆóÊúâreturnÔºå‰πü‰ºöÊâßË°åfinally‰∏≠„ÄÇ ÊÄªÁªìÔºö try ÂùóÔºöÁî®‰∫éÊçïËé∑ÂºÇÂ∏∏„ÄÇÂÖ∂ÂêéÂèØÊé•Èõ∂‰∏™ÊàñÂ§ö‰∏™catchÂùóÔºåÂ¶ÇÊûúÊ≤°ÊúâcatchÂùóÔºåÂàôÂøÖÈ°ªË∑ü‰∏Ä‰∏™finallyÂùó„ÄÇcatch ÂùóÔºöÁî®‰∫éÂ§ÑÁêÜtryÊçïËé∑Âà∞ÁöÑÂºÇÂ∏∏„ÄÇfinally ÂùóÔºöÊó†ËÆ∫ÊòØÂê¶ÊçïËé∑ÊàñÂ§ÑÁêÜÂºÇÂ∏∏ÔºåfinallyÂùóÈáåÁöÑËØ≠Âè•ÈÉΩ‰ºöË¢´ÊâßË°å„ÄÇÂΩìÂú®tryÂùóÊàñcatchÂùó‰∏≠ÈÅáÂà∞returnËØ≠Âè•Êó∂ÔºåfinallyËØ≠Âè•ÂùóÂ∞ÜÂú®ÊñπÊ≥ïËøîÂõû‰πãÂâçË¢´ÊâßË°å„ÄÇÂú®‰ª•‰∏ã4ÁßçÁâπÊÆäÊÉÖÂÜµ‰∏ãÔºåfinallyÂùó‰∏ç‰ºöË¢´ÊâßË°åÔºö1ÔºâÂú®finallyËØ≠Âè•Âùó‰∏≠ÂèëÁîü‰∫ÜÂºÇÂ∏∏„ÄÇ2ÔºâÂú®ÂâçÈù¢ÁöÑ‰ª£Á†Å‰∏≠Áî®‰∫ÜSystem.exit()ÈÄÄÂá∫Á®ãÂ∫è„ÄÇ3ÔºâÁ®ãÂ∫èÊâÄÂú®ÁöÑÁ∫øÁ®ãÊ≠ª‰∫°„ÄÇ4ÔºâÂÖ≥Èó≠CPU„ÄÇ throwsÂíåthowÂÖ≥ÈîÆÂ≠ó throwsÂá∫Áé∞Âú®ÊñπÊ≥ïÁöÑÂ£∞Êòé‰∏≠ÔºåË°®Á§∫ËØ•ÊñπÊ≥ïÂèØËÉΩ‰ºöÊäõÂá∫ÁöÑÂºÇÂ∏∏ÔºåÁÑ∂Âêé‰∫§Áªô‰∏äÂ±ÇË∞ÉÁî®ÂÆÉÁöÑÊñπÊ≥ïÁ®ãÂ∫èÂ§ÑÁêÜÔºåÂÖÅËÆ∏throwsÂêéÈù¢Ë∑üÁùÄÂ§ö‰∏™ÂºÇÂ∏∏Á±ªÂûãÔºõ throw‰∏ÄËà¨‰ºöÁî®‰∫éÁ®ãÂ∫èÂá∫Áé∞ÊüêÁßçÈÄªËæëÊó∂Á®ãÂ∫èÂëò‰∏ªÂä®ÊäõÂá∫ÊüêÁßçÁâπÂÆöÁ±ªÂûãÁöÑÂºÇÂ∏∏„ÄÇthrowÂè™‰ºöÂá∫Áé∞Âú®ÊñπÊ≥ï‰Ωì‰∏≠ÔºåÂΩìÊñπÊ≥ïÂú®ÊâßË°åËøáÁ®ã‰∏≠ÈÅáÂà∞ÂºÇÂ∏∏ÊÉÖÂÜµÊó∂ÔºåÂ∞ÜÂºÇÂ∏∏‰ø°ÊÅØÂ∞ÅË£Ö‰∏∫ÂºÇÂ∏∏ÂØπË±°ÔºåÁÑ∂ÂêéthrowÂá∫Âéª„ÄÇthrowÂÖ≥ÈîÆÂ≠óÁöÑ‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑ‰ΩúÁî®Â∞±ÊòØÂºÇÂ∏∏Á±ªÂûãÁöÑËΩ¨Êç¢„ÄÇ throwsË°®Á§∫Âá∫Áé∞ÂºÇÂ∏∏ÁöÑ‰∏ÄÁßçÂèØËÉΩÊÄßÔºåÂπ∂‰∏ç‰∏ÄÂÆö‰ºöÂèëÁîüËøô‰∫õÂºÇÂ∏∏ÔºõthrowÂàôÊòØÊäõÂá∫‰∫ÜÂºÇÂ∏∏ÔºåÊâßË°åthrowÂàô‰∏ÄÂÆöÊäõÂá∫‰∫ÜÊüêÁßçÂºÇÂ∏∏ÂØπË±°„ÄÇ‰∏§ËÄÖÈÉΩÊòØÊ∂àÊûÅÂ§ÑÁêÜÂºÇÂ∏∏ÁöÑÊñπÂºèÔºàËøôÈáåÁöÑÊ∂àÊûÅÂπ∂‰∏çÊòØËØ¥ËøôÁßçÊñπÂºè‰∏çÂ•ΩÔºâÔºåÂè™ÊòØÊäõÂá∫ÊàñËÄÖÂèØËÉΩÊäõÂá∫ÂºÇÂ∏∏Ôºå‰ΩÜÊòØ‰∏ç‰ºöÁî±ÊñπÊ≥ïÂéªÂ§ÑÁêÜÂºÇÂ∏∏ÔºåÁúüÊ≠£ÁöÑÂ§ÑÁêÜÂºÇÂ∏∏Áî±Ê≠§ÊñπÊ≥ïÁöÑ‰∏äÂ±ÇË∞ÉÁî®Â§ÑÁêÜ„ÄÇ ÂºÇÂ∏∏Â§ÑÁêÜÂª∫ËÆÆ Âè™Âú®ÂøÖË¶Å‰ΩøÁî®ÂºÇÂ∏∏ÁöÑÂú∞ÊñπÊâç‰ΩøÁî®ÂºÇÂ∏∏Ôºå‰∏çË¶ÅÁî®ÂºÇÂ∏∏ÂéªÊéßÂà∂Á®ãÂ∫èÁöÑÊµÅÁ®ã„ÄÇË∞®ÊÖéÂú∞‰ΩøÁî®ÂºÇÂ∏∏ÔºöÂºÇÂ∏∏ÊçïËé∑ÁöÑ‰ª£‰ª∑ÈùûÂ∏∏È´òÊòÇÔºåÂºÇÂ∏∏‰ΩøÁî®ËøáÂ§ö‰ºö‰∏•ÈáçÂΩ±ÂìçÁ®ãÂ∫èÁöÑÊÄßËÉΩ„ÄÇÂ¶ÇÊûúÂú®Á®ãÂ∫è‰∏≠ËÉΩÂ§üÁî®ifËØ≠Âè•ÂíåBooleanÂèòÈáèÊù•ËøõË°åÈÄªËæëÂà§Êñ≠ÔºåÈÇ£‰πàÂ∞ΩÈáèÂáèÂ∞ëÂºÇÂ∏∏ÁöÑ‰ΩøÁî®Ôºå‰ªéËÄåÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÂºÇÂ∏∏ÊçïËé∑ÂíåÂ§ÑÁêÜ„ÄÇÂàáÂøå‰ΩøÁî®Á©∫catchÂùóÂú®ÊçïËé∑‰∫ÜÂºÇÂ∏∏‰πãÂêé‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºåÁõ∏ÂΩì‰∫éÂøΩÁï•‰∫ÜËøô‰∏™ÂºÇÂ∏∏„ÄÇÂçÉ‰∏á‰∏çË¶Å‰ΩøÁî®Á©∫ÁöÑcatchÂùóÔºåÁ©∫ÁöÑcatchÂùóÊÑèÂë≥ÁùÄ‰Ω†Âú®Á®ãÂ∫è‰∏≠ÈöêËóè‰∫ÜÈîôËØØÂíåÂºÇÂ∏∏ÔºåÂπ∂‰∏îÂæàÂèØËÉΩÂØºËá¥Á®ãÂ∫èÂá∫Áé∞‰∏çÂèØÊéßÁöÑÊâßË°åÁªìÊûú„ÄÇÂ¶ÇÊûú‰Ω†ÈùûÂ∏∏ËÇØÂÆöÊçïËé∑Âà∞ÁöÑÂºÇÂ∏∏‰∏ç‰ºö‰ª•‰ªª‰ΩïÊñπÂºèÂØπÁ®ãÂ∫èÈÄ†ÊàêÂΩ±ÂìçÔºåÊúÄÂ•ΩÁî®LogÊó•ÂøóÂ∞ÜËØ•ÂºÇÂ∏∏ËøõË°åËÆ∞ÂΩïÔºå‰ª•‰æøÊó•ÂêéÊñπ‰æøÊõ¥Êñ∞ÂíåÁª¥Êä§„ÄÇÊ£ÄÊü•ÂºÇÂ∏∏ÂíåÈùûÊ£ÄÊü•ÂºÇÂ∏∏ÁöÑÈÄâÊã©‰∏ÄÊó¶ÂÜ≥ÂÆöÊäõÂá∫ÂºÇÂ∏∏ÔºåÂ∞±Ë¶ÅÂÜ≥ÂÆöÊäõÂá∫‰ªÄ‰πàÂºÇÂ∏∏„ÄÇËøôÈáåÈù¢ÁöÑ‰∏ªË¶ÅÈóÆÈ¢òÂ∞±ÊòØÊäõÂá∫Ê£ÄÊü•ÂºÇÂ∏∏ËøòÊòØÈùûÊ£ÄÊü•ÂºÇÂ∏∏„ÄÇÊ£ÄÊü•ÂºÇÂ∏∏ÂØºËá¥‰∫ÜÂ§™Â§öÁöÑtry‚Ä¶catch‰ª£Á†ÅÔºåÂèØËÉΩÊúâÂæàÂ§öÊ£ÄÊü•ÂºÇÂ∏∏ÂØπÂºÄÂèë‰∫∫ÂëòÊù•ËØ¥ÊòØÊó†Ê≥ïÂêàÁêÜÂú∞ËøõË°åÂ§ÑÁêÜÁöÑÔºåÊØîÂ¶ÇSQLExceptionÔºåËÄåÂºÄÂèë‰∫∫ÂëòÂç¥‰∏çÂæó‰∏çÂéªËøõË°åtry‚Ä¶catchÔºåËøôÊ†∑Â∞±‰ºöÂØºËá¥ÁªèÂ∏∏Âá∫Áé∞ËøôÊ†∑‰∏ÄÁßçÊÉÖÂÜµÔºöÈÄªËæë‰ª£Á†ÅÂè™ÊúâÂæàÂ∞ëÁöÑÂá†Ë°åÔºåËÄåËøõË°åÂºÇÂ∏∏ÊçïËé∑ÂíåÂ§ÑÁêÜÁöÑ‰ª£Á†ÅÂç¥ÊúâÂæàÂ§öË°å„ÄÇËøôÊ†∑‰∏ç‰ªÖÂØºËá¥ÈÄªËæë‰ª£Á†ÅÈòÖËØªËµ∑Êù•Êô¶Ê∂©ÈöæÊáÇÔºåËÄå‰∏îÈôç‰Ωé‰∫ÜÁ®ãÂ∫èÁöÑÊÄßËÉΩ„ÄÇÂª∫ËÆÆÂ∞ΩÈáèÈÅøÂÖçÊ£ÄÊü•ÂºÇÂ∏∏ÁöÑ‰ΩøÁî®ÔºåÂ¶ÇÊûúÁ°ÆÂÆûËØ•ÂºÇÂ∏∏ÊÉÖÂÜµÁöÑÂá∫Áé∞ÂæàÊôÆÈÅçÔºåÈúÄË¶ÅÊèêÈÜíË∞ÉÁî®ËÄÖÊ≥®ÊÑèÂ§ÑÁêÜÁöÑËØùÔºåÂ∞±‰ΩøÁî®Ê£ÄÊü•ÂºÇÂ∏∏ÔºõÂê¶Âàô‰ΩøÁî®ÈùûÊ£ÄÊü•ÂºÇÂ∏∏„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂ∞ΩÈáèÂ∞ÜÊ£ÄÊü•ÂºÇÂ∏∏ËΩ¨Âèò‰∏∫ÈùûÊ£ÄÊü•ÂºÇÂ∏∏‰∫§Áªô‰∏äÂ±ÇÂ§ÑÁêÜ„ÄÇÊ≥®ÊÑècatchÂùóÁöÑÈ°∫Â∫èÔºå‰∏çË¶ÅÊää‰∏äÂ±ÇÁ±ªÁöÑÂºÇÂ∏∏ÊîæÂú®ÊúÄÂâçÈù¢ÁöÑcatchÂùó„ÄÇ‰∏çË¶ÅÂ∞ÜÊèê‰æõÁªôÁî®Êà∑ÁúãÁöÑ‰ø°ÊÅØÊîæÂú®ÂºÇÂ∏∏‰ø°ÊÅØÈáå„ÄÇÈÅøÂÖçÂ§öÊ¨°Âú®Êó•Âøó‰ø°ÊÅØ‰∏≠ËÆ∞ÂΩïÂêå‰∏Ä‰∏™ÂºÇÂ∏∏Âè™Âú®ÂºÇÂ∏∏ÊúÄÂºÄÂßãÂèëÁîüÁöÑÂú∞ÊñπËøõË°åÊó•Âøó‰ø°ÊÅØËÆ∞ÂΩï„ÄÇÂæàÂ§öÊÉÖÂÜµ‰∏ãÂºÇÂ∏∏ÈÉΩÊòØÂ±ÇÂ±ÇÂêë‰∏äË∑ëÂá∫ÁöÑÔºåÂ¶ÇÊûúÂú®ÊØèÊ¨°Âêë‰∏äÊäõÂá∫ÁöÑÊó∂ÂÄôÔºåÈÉΩLogÂà∞Êó•ÂøóÁ≥ªÁªü‰∏≠ÔºåÂàô‰ºöÂØºËá¥Êó†‰ªéÊü•ÊâæÂºÇÂ∏∏ÂèëÁîüÁöÑÊ†πÊ∫ê„ÄÇÂºÇÂ∏∏Â§ÑÁêÜÂ∞ΩÈáèÊîæÂú®È´òÂ±ÇËøõË°åÂ∞ΩÈáèÂ∞ÜÂºÇÂ∏∏Áªü‰∏ÄÊäõÁªô‰∏äÂ±ÇË∞ÉÁî®ËÄÖÔºåÁî±‰∏äÂ±ÇË∞ÉÁî®ËÄÖÁªü‰∏Ä‰πãÊó∂Â¶Ç‰ΩïËøõË°åÂ§ÑÁêÜ„ÄÇÂ¶ÇÊûúÂú®ÊØè‰∏™Âá∫Áé∞ÂºÇÂ∏∏ÁöÑÂú∞ÊñπÈÉΩÁõ¥Êé•ËøõË°åÂ§ÑÁêÜÔºå‰ºöÂØºËá¥Á®ãÂ∫èÂºÇÂ∏∏Â§ÑÁêÜÊµÅÁ®ãÊ∑∑‰π±Ôºå‰∏çÂà©‰∫éÂêéÊúüÁª¥Êä§ÂíåÂºÇÂ∏∏ÈîôËØØÊéíÊü•„ÄÇÁî±‰∏äÂ±ÇÁªü‰∏ÄËøõË°åÂ§ÑÁêÜ‰ºö‰ΩøÂæóÊï¥‰∏™Á®ãÂ∫èÁöÑÊµÅÁ®ãÊ∏ÖÊô∞ÊòìÊáÇ„ÄÇÂú®finally‰∏≠ÈáäÊîæËµÑÊ∫êÂ¶ÇÊûúÊúâ‰ΩøÁî®Êñá‰ª∂ËØªÂèñ„ÄÅÁΩëÁªúÊìç‰Ωú‰ª•ÂèäÊï∞ÊçÆÂ∫ìÊìç‰ΩúÁ≠âÔºåËÆ∞ÂæóÂú®finally‰∏≠ÈáäÊîæËµÑÊ∫ê„ÄÇËøôÊ†∑‰∏ç‰ªÖ‰ºö‰ΩøÂæóÁ®ãÂ∫èÂç†Áî®Êõ¥Â∞ëÁöÑËµÑÊ∫êÔºå‰πü‰ºöÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÁî±‰∫éËµÑÊ∫êÊú™ÈáäÊîæËÄåÂèëÁîüÁöÑÂºÇÂ∏∏ÊÉÖÂÜµ„ÄÇÈÅøÂÖçËøáÂ§ßÁöÑtryÂùóÔºå‰∏çË¶ÅÊää‰∏ç‰ºöÂá∫Áé∞ÂºÇÂ∏∏ÁöÑ‰ª£Á†ÅÊîæÂà∞tryÂùóÈáåÈù¢ÔºåÂ∞ΩÈáè‰øùÊåÅ‰∏Ä‰∏™tryÂùóÂØπÂ∫î‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂºÇÂ∏∏„ÄÇÁªÜÂåñÂºÇÂ∏∏ÁöÑÁ±ªÂûãÔºå‰∏çË¶Å‰∏çÁÆ°‰ªÄ‰πàÁ±ªÂûãÁöÑÂºÇÂ∏∏ÈÉΩÂÜôÊàêExcetpion„ÄÇcatchÂùóÂ∞ΩÈáè‰øùÊåÅ‰∏Ä‰∏™ÂùóÊçïËé∑‰∏ÄÁ±ªÂºÇÂ∏∏Ôºå‰∏çË¶ÅÂøΩÁï•ÊçïËé∑ÁöÑÂºÇÂ∏∏ÔºåÊçïËé∑Âà∞ÂêéË¶Å‰πàÂ§ÑÁêÜÔºåË¶Å‰πàËΩ¨ËØëÔºåË¶Å‰πàÈáçÊñ∞ÊäõÂá∫Êñ∞Á±ªÂûãÁöÑÂºÇÂ∏∏„ÄÇ‰∏çË¶ÅÊääËá™Â∑±ËÉΩÂ§ÑÁêÜÁöÑÂºÇÂ∏∏ÊäõÁªôÂà´‰∫∫„ÄÇ‰∏çË¶ÅÁî®try...catchÂèÇ‰∏éÊéßÂà∂Á®ãÂ∫èÊµÅÁ®ãÔºåÂºÇÂ∏∏ÊéßÂà∂ÁöÑÊ†πÊú¨ÁõÆÁöÑÊòØÂ§ÑÁêÜÁ®ãÂ∫èÁöÑÈùûÊ≠£Â∏∏ÊÉÖÂÜµ„ÄÇ ThrowableÁ±ª‰∏≠ÁöÑÂ∏∏Áî®ÊñπÊ≥ï catchÂÖ≥ÈîÆÂ≠óÂêéÈù¢Êã¨Âè∑‰∏≠ÁöÑExceptionÁ±ªÂûãÁöÑÂèÇÊï∞e„ÄÇExceptionÂ∞±ÊòØtry‰ª£Á†ÅÂùó‰º†ÈÄíÁªôcatch‰ª£Á†ÅÂùóÁöÑÂèòÈáèÁ±ªÂûãÔºåeÂ∞±ÊòØÂèòÈáèÂêç„ÄÇcatch‰ª£Á†ÅÂùó‰∏≠ËØ≠Âè•&quot;e.getMessage();&quot;Áî®‰∫éËæìÂá∫ÈîôËØØÊÄßË¥®„ÄÇÈÄöÂ∏∏ÂºÇÂ∏∏Â§ÑÁêÜÂ∏∏Áî®3‰∏™ÂáΩÊï∞Êù•Ëé∑ÂèñÂºÇÂ∏∏ÁöÑÊúâÂÖ≥‰ø°ÊÅØ: getCause()ÔºöËøîÂõûÊäõÂá∫ÂºÇÂ∏∏ÁöÑÂéüÂõ†„ÄÇÂ¶ÇÊûú cause ‰∏çÂ≠òÂú®ÊàñÊú™Áü•ÔºåÂàôËøîÂõû null„ÄÇ getMeage()ÔºöËøîÂõûÂºÇÂ∏∏ÁöÑÊ∂àÊÅØ‰ø°ÊÅØ„ÄÇ printStackTrace()ÔºöÂØπË±°ÁöÑÂ†ÜÊ†àË∑üË∏™ËæìÂá∫Ëá≥ÈîôËØØËæìÂá∫ÊµÅÔºå‰Ωú‰∏∫Â≠óÊÆµ System.err ÁöÑÂÄº„ÄÇ ÊúâÊó∂‰∏∫‰∫ÜÁÆÄÂçï‰ºöÂøΩÁï•ÊéâcatchËØ≠Âè•ÂêéÁöÑ‰ª£Á†ÅÔºåËøôÊ†∑try-catchËØ≠Âè•Â∞±Êàê‰∫Ü‰∏ÄÁßçÊëÜËÆæÔºå‰∏ÄÊó¶Á®ãÂ∫èÂú®ËøêË°åËøáÁ®ã‰∏≠Âá∫Áé∞‰∫ÜÂºÇÂ∏∏ÔºåÂ∞±‰ºöÂøΩÁï•Â§ÑÁêÜÂºÇÂ∏∏ÔºåËÄåÈîôËØØÂèëÁîüÁöÑÂéüÂõ†ÂæàÈöæÊü•Êâæ„ÄÇ JavaÂ∏∏ËßÅÂºÇÂ∏∏ runtimeExceptionÂ≠êÁ±ª java.lang.ArrayIndexOutOfBoundsException Êï∞ÁªÑÁ¥¢ÂºïË∂äÁïåÂºÇÂ∏∏„ÄÇÂΩìÂØπÊï∞ÁªÑÁöÑÁ¥¢ÂºïÂÄº‰∏∫Ë¥üÊï∞ÊàñÂ§ß‰∫éÁ≠â‰∫éÊï∞ÁªÑÂ§ßÂ∞èÊó∂ÊäõÂá∫„ÄÇ java.lang.ArithmeticException ÁÆóÊúØÊù°‰ª∂ÂºÇÂ∏∏„ÄÇË≠¨Â¶ÇÔºöÊï¥Êï∞Èô§Èõ∂Á≠â„ÄÇ java.lang.NullPointerException Á©∫ÊåáÈíàÂºÇÂ∏∏„ÄÇÂΩìÂ∫îÁî®ËØïÂõæÂú®Ë¶ÅÊ±Ç‰ΩøÁî®ÂØπË±°ÁöÑÂú∞Êñπ‰ΩøÁî®‰∫ÜnullÊó∂ÔºåÊäõÂá∫ËØ•ÂºÇÂ∏∏„ÄÇË≠¨Â¶ÇÔºöË∞ÉÁî®nullÂØπË±°ÁöÑÂÆû‰æãÊñπÊ≥ï„ÄÅËÆøÈóÆnullÂØπË±°ÁöÑÂ±ûÊÄß„ÄÅËÆ°ÁÆónullÂØπË±°ÁöÑÈïøÂ∫¶„ÄÅ‰ΩøÁî®throwËØ≠Âè•ÊäõÂá∫nullÁ≠âÁ≠â java.lang.ClassNotFoundException Êâæ‰∏çÂà∞Á±ªÂºÇÂ∏∏„ÄÇÂΩìÂ∫îÁî®ËØïÂõæÊ†πÊçÆÂ≠óÁ¨¶‰∏≤ÂΩ¢ÂºèÁöÑÁ±ªÂêçÊûÑÈÄ†Á±ªÔºåËÄåÂú®ÈÅçÂéÜCLASSPAH‰πãÂêéÊâæ‰∏çÂà∞ÂØπÂ∫îÂêçÁß∞ÁöÑclassÊñá‰ª∂Êó∂ÔºåÊäõÂá∫ËØ•ÂºÇÂ∏∏„ÄÇ java.lang.NegativeArraySizeException Êï∞ÁªÑÈïøÂ∫¶‰∏∫Ë¥üÂºÇÂ∏∏ java.lang.ArrayStoreException Êï∞ÁªÑ‰∏≠ÂåÖÂê´‰∏çÂÖºÂÆπÁöÑÂÄºÊäõÂá∫ÁöÑÂºÇÂ∏∏ java.lang.SecurityException ÂÆâÂÖ®ÊÄßÂºÇÂ∏∏ java.lang.IllegalArgumentException ÈùûÊ≥ïÂèÇÊï∞ÂºÇÂ∏∏ IOException IOExceptionÔºöÊìç‰ΩúËæìÂÖ•ÊµÅÂíåËæìÂá∫ÊµÅÊó∂ÂèØËÉΩÂá∫Áé∞ÁöÑÂºÇÂ∏∏„ÄÇ EOFExceptionÔºöÊñá‰ª∂Â∑≤ÁªìÊùüÂºÇÂ∏∏ FileNotFoundExceptionÔºöÊñá‰ª∂Êú™ÊâæÂà∞ÂºÇÂ∏∏ ÂÖ∂‰ªñÂºÇÂ∏∏ ClassCastExceptionÔºöÁ±ªÂûãËΩ¨Êç¢ÂºÇÂ∏∏Á±ª ArrayStoreExceptionÔºöÊï∞ÁªÑ‰∏≠ÂåÖÂê´‰∏çÂÖºÂÆπÁöÑÂÄºÊäõÂá∫ÁöÑÂºÇÂ∏∏ SQLExceptionÔºöÊìç‰ΩúÊï∞ÊçÆÂ∫ìÂºÇÂ∏∏Á±ª NoSuchFieldExceptionÔºöÂ≠óÊÆµÊú™ÊâæÂà∞ÂºÇÂ∏∏ NoSuchMethodExceptionÔºöÊñπÊ≥ïÊú™ÊâæÂà∞ÊäõÂá∫ÁöÑÂºÇÂ∏∏ NumberFormatExceptionÔºöÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫Êï∞Â≠óÊäõÂá∫ÁöÑÂºÇÂ∏∏ StringIndexOutOfBoundsExceptionÔºöÂ≠óÁ¨¶‰∏≤Á¥¢ÂºïË∂ÖÂá∫ËåÉÂõ¥ÊäõÂá∫ÁöÑÂºÇÂ∏∏ IllegalAccessExceptionÔºö‰∏çÂÖÅËÆ∏ËÆøÈóÆÊüêÁ±ªÂºÇÂ∏∏ InstantiationExceptionÔºöÂΩìÂ∫îÁî®Á®ãÂ∫èËØïÂõæ‰ΩøÁî®ClassÁ±ª‰∏≠ÁöÑnewInstance()ÊñπÊ≥ïÂàõÂª∫‰∏Ä‰∏™Á±ªÁöÑÂÆû‰æãÔºåËÄåÊåáÂÆöÁöÑÁ±ªÂØπË±°Êó†Ê≥ïË¢´ÂÆû‰æãÂåñÊó∂ÔºåÊäõÂá∫ËØ•ÂºÇÂ∏∏ Ëá™ÂÆö‰πâÂºÇÂ∏∏ ‰ΩøÁî®JavaÂÜÖÁΩÆÁöÑÂºÇÂ∏∏Á±ªÂèØ‰ª•ÊèèËø∞Âú®ÁºñÁ®ãÊó∂Âá∫Áé∞ÁöÑÂ§ßÈÉ®ÂàÜÂºÇÂ∏∏ÊÉÖÂÜµ„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÁî®Êà∑ËøòÂèØ‰ª•Ëá™ÂÆö‰πâÂºÇÂ∏∏„ÄÇÁî®Êà∑Ëá™ÂÆö‰πâÂºÇÂ∏∏Á±ªÔºåÂè™ÈúÄÁªßÊâøExceptionÁ±ªÂç≥ÂèØ„ÄÇ Âú®Á®ãÂ∫è‰∏≠‰ΩøÁî®Ëá™ÂÆö‰πâÂºÇÂ∏∏Á±ªÔºåÂ§ß‰ΩìÂèØÂàÜ‰∏∫‰ª•‰∏ãÂá†‰∏™Ê≠•È™§„ÄÇ Ôºà1ÔºâÂàõÂª∫Ëá™ÂÆö‰πâÂºÇÂ∏∏Á±ª„ÄÇ Ôºà2ÔºâÂú®ÊñπÊ≥ï‰∏≠ÈÄöËøáthrowÂÖ≥ÈîÆÂ≠óÊäõÂá∫ÂºÇÂ∏∏ÂØπË±°„ÄÇ Ôºà3ÔºâÂ¶ÇÊûúÂú®ÂΩìÂâçÊäõÂá∫ÂºÇÂ∏∏ÁöÑÊñπÊ≥ï‰∏≠Â§ÑÁêÜÂºÇÂ∏∏ÔºåÂèØ‰ª•‰ΩøÁî®try-catchËØ≠Âè•ÊçïËé∑Âπ∂Â§ÑÁêÜÔºõÂê¶ÂàôÂú®ÊñπÊ≥ïÁöÑÂ£∞ÊòéÂ§ÑÈÄöËøáthrowsÂÖ≥ÈîÆÂ≠óÊåáÊòéË¶ÅÊäõÂá∫ÁªôÊñπÊ≥ïË∞ÉÁî®ËÄÖÁöÑÂºÇÂ∏∏ÔºåÁªßÁª≠ËøõË°å‰∏ã‰∏ÄÊ≠•Êìç‰Ωú„ÄÇ Ôºà4ÔºâÂú®Âá∫Áé∞ÂºÇÂ∏∏ÊñπÊ≥ïÁöÑË∞ÉÁî®ËÄÖ‰∏≠ÊçïËé∑Âπ∂Â§ÑÁêÜÂºÇÂ∏∏„ÄÇ]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Markdown ËØ≠Ê≥ïÁîªÊµÅÁ®ãÂõæ]]></title>
    <url>%2Fposts%2F711ce00.html</url>
    <content type="text"><![CDATA[Ê∑ªÂä†ÊîØÊåÅ Hexo ÈªòËÆ§ÊòØ‰∏çÊîØÊåÅÊµÅÁ®ãÂõæÁöÑ Markdown ËØ≠Ê≥ïÁöÑÔºåÈúÄË¶ÅÊ∑ªÂä†ÊîØÊåÅÔºö 1npm install --save hexo-filter-flowchart ÊºîÁ§∫ ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊµÅÁ®ãÂõæ ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö 12345678910¬∑¬∑¬∑flow #Áî±‰∫éÊ∏≤ÊüìÈóÆÈ¢òÔºåËØ∑Ëá™Ë°åÂ∞Ü ¬∑ ÊõøÊç¢‰∏∫ `st=&gt;start: ÂºÄÂßãe=&gt;end: ÁªìÊùüop=&gt;operation: ÊàëÁöÑÊìç‰Ωúcond=&gt;condition: Á°ÆËÆ§Ôºüst-&gt;op-&gt;condcond(yes)-&gt;econd(no)-&gt;op¬∑¬∑¬∑ ÊïàÊûúÂ¶Ç‰∏ãÔºö &lt;div id=&quot;flowchart-0&quot; class=&quot;flow-chart&quot;&gt;&lt;/div&gt; ‰∏Ä‰∏™Á®çÂ§çÊùÇÁöÑÊµÅÁ®ãÂõæ ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö 12345678910111213¬∑¬∑¬∑flow #Áî±‰∫éÊ∏≤ÊüìÈóÆÈ¢òÔºåËØ∑Ëá™Ë°åÂ∞Ü ¬∑ ÊõøÊç¢‰∏∫ `st=&gt;start: Start:&gt;http://www.google.com[blank]e=&gt;end:&gt;http://www.google.comop1=&gt;operation: My Operationsub1=&gt;subroutine: My Subroutinecond=&gt;condition: Yesor No?:&gt;http://www.google.comio=&gt;inputoutput: catch something...st-&gt;op1-&gt;condcond(yes)-&gt;io-&gt;econd(no)-&gt;sub1(right)-&gt;op1¬∑¬∑¬∑ ÊïàÊûúÂ¶Ç‰∏ãÔºö &lt;div id=&quot;flowchart-1&quot; class=&quot;flow-chart&quot;&gt;&lt;/div&gt; ËØ≠Ê≥ïËØ¶Ëß£ Hexo‰∏≠ÁöÑÊµÅÁ®ãÂõæÊòØ‰æùËµñ‰∫éflowchart.js ÂÆûÁé∞ÁöÑ„ÄÇ ‰ª•‰∏äÈù¢ÈÇ£‰∏™Á®çÂ§çÊùÇÁöÑÊµÅÁ®ãÂõæ‰∏∫‰æãÔºö 1234567891011121314¬∑¬∑¬∑flow #Áî±‰∫éÊ∏≤ÊüìÈóÆÈ¢òÔºåËØ∑Ëá™Ë°åÂ∞Ü ¬∑ ÊõøÊç¢‰∏∫ `//ÂÆö‰πâÈÉ®ÂàÜst=&gt;start: Start:&gt;http://www.google.com[blank]e=&gt;end:&gt;http://www.google.comop1=&gt;operation: My Operationsub1=&gt;subroutine: My Subroutinecond=&gt;condition: Yes or No?:&gt;http://www.google.comio=&gt;inputoutput: catch something...//Âà§Êñ≠Âíå‰ΩçÁΩÆÊéßÂà∂st-&gt;op1-&gt;condcond(yes)-&gt;io-&gt;econd(no)-&gt;sub1(right)-&gt;op1¬∑¬∑¬∑ ‰æãÂ¶ÇËøô‰∏ÄÂè•Ôºö st=&gt;start: Start|past:&gt;http://www.google.com[blank] ÂÖ∂‰∏≠ÔºåstÊòØÂèòÈáèÂêçÔºåstartÊòØÊåáÊìç‰ΩúÊ®°ÂùóÂêçÔºåÂÜíÂè∑ÂêéÈù¢Â∞±ÊòØÂÜÖÂÆπ‰∫Ü„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå** ÂÜíÂè∑ÂêéË¶ÅÂä†Á©∫Ê†ºÊâçËÉΩËØÜÂà´ ** Êìç‰ΩúÊ®°ÂùóËØ≠Ê≥ï Êìç‰ΩúÊ®°Âùó ËØ¥Êòé start ÂºÄÂßã end ÁªìÊùü operation ÊôÆÈÄöÊìç‰ΩúÂùó condition Âà§Êñ≠Âùó subroutine Â≠ê‰ªªÂä°Âùó inputoutput ËæìÂÖ•ËæìÂá∫Âùó Âà§Êñ≠Âíå‰ΩçÁΩÆÊéßÂà∂ ÊµÅÁ®ãÊéßÂà∂ st-&gt;op1-&gt;e -&gt; ‰Ωú‰∏∫ÊéßÂà∂ÊµÅÁ®ãÁöÑÊìç‰ΩúÁ¨¶ÔºåÂ∞±ÊòØÊåáÂêë‰∏ã‰∏ÄÊ≠•Ë¶ÅÊìç‰ΩúÁöÑ„ÄÇ ÊØè‰∏ÄÊù°ÈÉΩÁÆóÊòØ‰∏ÄÊù°ÊµÅÁ®ã ‰Ω†‰πüÂèØ‰ª•Êñ≠ÂºÄÂÜôÔºåÊÄé‰πàÊñπ‰æøÊÄé‰πàÊù•ÔºåÂ¶ÇÔºö‰∏ãÈù¢‰∏§‰∏™ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ÂàÜÁùÄÂÜô st-&gt;op1 op1-&gt;e ÂêàÁùÄÂÜô st-&gt;op1-&gt;e Âà§Êñ≠ cond(yes)-&gt;io-&gt;e #yesÁöÑÊó∂ÂÄôÂà∞ioÔºåÂÜçÂà∞e ‰ΩçÁΩÆÊåáÂÆö cond(no)-&gt;sub1(right)-&gt;op1 #noÁöÑÊó∂ÂÄôÂà∞Âà∞ sub1ÔºåÂÜç‰ªésub1ÁöÑÂè≥‰æßÂà∞op1 ËøòÂèØ‰ª•ËøôÊ†∑ cond1(no,right) ```&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js&quot;&gt;&lt;/script&gt;{% raw %}st=>start: ÂºÄÂßã e=>end: ÁªìÊùü op=>operation: ÊàëÁöÑÊìç‰Ωú cond=>condition: Á°ÆËÆ§Ôºü st->op->cond cond(yes)->e cond(no)->op{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-0-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-0", options);{% endraw %}{% raw %}st=>start: Start:>http://www.google.com[blank] e=>end:>http://www.google.com op1=>operation: My Operation sub1=>subroutine: My Subroutine cond=>condition: Yes or No?:>http://www.google.com io=>inputoutput: catch something... st->op1->cond cond(yes)->io->e cond(no)->sub1(right)->op1{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-1-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-1-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-1", options);{% endraw %}]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MarkdownËØ≠Ê≥ïÁ≥ñ]]></title>
    <url>%2Fposts%2F43883629.html</url>
    <content type="text"><![CDATA[ÂâçË®Ä Markdown ÊòØ‰∏ÄÁßçËΩªÈáèÁ∫ßÁöÑÊ†áËÆ∞ËØ≠Ë®ÄÔºåÂÖ∂Áî®ÁÆÄÂçïÁöÑÊ†áËÆ∞ËØ≠Ê≥ï‰æøÂèØËææÂà∞ÊéíÁâàÁöÑÁõÆÁöÑÔºåÂèØ‰ª•‰ΩøÊàë‰ª¨Êõ¥Âä†‰∏ìÊ≥®‰∫éÂÜÖÂÆπÁöÑÁºñÂÜôÔºåËÄå‰∏çÈúÄËøáÂ§öÂÖ≥Ê≥®ÊéíÁâà„ÄÇ Êú¨Êñá‰∏ªË¶ÅÊï¥ÁêÜ‰∫Ü Markdown ‰∏≠ÁöÑÂ∏∏Áî®ÁöÑÊ†áËÆ∞ËØ≠Ê≥ïÔºå‰ª•‰æøËá™Â∑±‰∏é‰ªñ‰∫∫‰ª•ÂêéÊü•Áî®„ÄÇ ‰ºòÁÇπ Á∫ØÊñáÊú¨ÔºåÊâÄ‰ª•ÂÖºÂÆπÊÄßÊûÅÂº∫ÔºåÂèØ‰ª•Áî®ÊâÄÊúâÊñáÊú¨ÁºñËæëÂô®ÊâìÂºÄ„ÄÇ ËÆ©‰Ω†‰∏ìÊ≥®‰∫éÊñáÂ≠óËÄå‰∏çÊòØÊéíÁâà„ÄÇ Ê†ºÂºèËΩ¨Êç¢Êñπ‰æøÔºåMarkdown ÁöÑÊñáÊú¨‰Ω†ÂèØ‰ª•ËΩªÊùæËΩ¨Êç¢‰∏∫ html„ÄÅÁîµÂ≠ê‰π¶Á≠â„ÄÇ Markdown ÁöÑÊ†áËÆ∞ËØ≠Ê≥ïÊúâÊûÅÂ•ΩÁöÑÂèØËØªÊÄß„ÄÇ Áº∫ÁÇπ ÈúÄË¶ÅËÆ∞‰∏Ä‰∫õËØ≠Ê≥ïÔºàÂΩìÁÑ∂ÔºåÊòØÂæàÁÆÄÂçï„ÄÇ‰∫îÂàÜÈíüÂ≠¶‰ºöÔºâ„ÄÇ Êúâ‰∫õÂπ≥Âè∞‰∏çÊîØÊåÅMarkdownÁºñËæëÊ®°Âºè„ÄÇ Âü∫Êú¨ËØ≠Ê≥ï Ê†áÈ¢ò Âú®ÊÉ≥Ë¶ÅËÆæÁΩÆ‰∏∫Ê†áÈ¢òÁöÑÊñáÂ≠óÂâçÈù¢Âä†#Êù•Ë°®Á§∫Ôºå‰∏Ä‰∏™#ÊòØ‰∏ÄÁ∫ßÊ†áÈ¢òÔºå‰∫å‰∏™#ÊòØ‰∫åÁ∫ßÊ†áÈ¢òÔºå‰ª•Ê≠§Á±ªÊé®„ÄÇÊîØÊåÅÂÖ≠Á∫ßÊ†áÈ¢ò„ÄÇ Ê≥®Ôºö#‰∏éÊñáÂ≠ó‰πãÈó¥Ë¶ÅÊúâ‰∏Ä‰∏™Á©∫Ê†º„ÄÇ Á§∫‰æãÔºö 123456# ËøôÊòØ‰∏ÄÁ∫ßÊ†áÈ¢ò## ËøôÊòØ‰∫åÁ∫ßÊ†áÈ¢ò### ËøôÊòØ‰∏âÁ∫ßÊ†áÈ¢ò#### ËøôÊòØÂõõÁ∫ßÊ†áÈ¢ò##### ËøôÊòØ‰∫îÁ∫ßÊ†áÈ¢ò###### ËøôÊòØÂÖ≠Á∫ßÊ†áÈ¢ò ÊïàÊûúÂ¶Ç‰∏ãÔºö Â≠ó‰Ωì ÊòüÂè∑ÊàñËÄÖ‰∏ãÂàíÁ∫øÈÉΩÂèØ‰ª•ÔºåÂçïÊòØÊñú‰ΩìÔºåÂèåÊòØÁ≤ó‰ΩìÔºåÁ¨¶Âè∑ÂèØ‰ª•Ë∑®Ë°åÔºåÁ¨¶Âè∑ÂèØÂä†Á©∫Ê†º„ÄÇ Âä†Á≤ó Ë¶ÅÂä†Á≤óÁöÑÊñáÂ≠óÂ∑¶Âè≥ÂàÜÂà´Áî®‰∏§‰∏™*Âè∑ÂåÖËµ∑Êù• Êñú‰Ωì Ë¶ÅÂÄæÊñúÁöÑÊñáÂ≠óÂ∑¶Âè≥ÂàÜÂà´Áî®‰∏Ä‰∏™*Âè∑ÂåÖËµ∑Êù• Êñú‰ΩìÂä†Á≤ó Ë¶ÅÂÄæÊñúÂíåÂä†Á≤óÁöÑÊñáÂ≠óÂ∑¶Âè≥ÂàÜÂà´Áî®‰∏â‰∏™*Âè∑ÂåÖËµ∑Êù• Âà†Èô§Á∫ø Ë¶ÅÂä†Âà†Èô§Á∫øÁöÑÊñáÂ≠óÂ∑¶Âè≥ÂàÜÂà´Áî®‰∏§‰∏™~~Âè∑ÂåÖËµ∑Êù• Á§∫‰æãÔºö 1234**ËøôÊòØÂä†Á≤óÁöÑÊñáÂ≠ó***ËøôÊòØÂÄæÊñúÁöÑÊñáÂ≠ó*`***ËøôÊòØÊñú‰ΩìÂä†Á≤óÁöÑÊñáÂ≠ó***~~ËøôÊòØÂä†Âà†Èô§Á∫øÁöÑÊñáÂ≠ó~~ ÊïàÊûúÂ¶Ç‰∏ãÔºö ÂºïÁî® Âú®ÂºïÁî®ÁöÑÊñáÂ≠óÂâçÂä†&gt;Âç≥ÂèØ„ÄÇÂºïÁî®‰πüÂèØ‰ª•ÂµåÂ•óÔºåÂ¶ÇÂä†‰∏§‰∏™&gt;&gt;‰∏â‰∏™&gt;&gt;&gt; n‰∏™... Ë≤å‰ººÂèØ‰ª•‰∏ÄÁõ¥Âä†‰∏ãÂéªÔºå‰ΩÜÊ≤°Á•ûÈ©¨ÂçµÁî®„ÄÇ Á§∫‰æãÔºö 123&gt;ËøôÊòØÂºïÁî®ÁöÑÂÜÖÂÆπ&gt;&gt;ËøôÊòØÂºïÁî®ÁöÑÂÜÖÂÆπ&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;ËøôÊòØÂºïÁî®ÁöÑÂÜÖÂÆπ ÊïàÊûúÂ¶Ç‰∏ãÔºö ÂàÜÂâ≤Á∫ø ‰∏â‰∏™ÊàñËÄÖ‰∏â‰∏™‰ª•‰∏äÁöÑ - ÊàñËÄÖ * ÈÉΩÂèØ‰ª•„ÄÇ Á§∫‰æãÔºö 1234-------******** ÊïàÊûúÂ¶Ç‰∏ãÔºö ÂèØ‰ª•ÁúãÂà∞ÔºåÊòæÁ§∫ÊïàÊûúÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ÂõæÁâá ËØ≠Ê≥ïÔºö 1234![ÂõæÁâáalt](ÂõæÁâáÂú∞ÂùÄ ''ÂõæÁâátitle'')ÂõæÁâáaltÂ∞±ÊòØÊòæÁ§∫Âú®ÂõæÁâá‰∏ãÈù¢ÁöÑÊñáÂ≠óÔºåÁõ∏ÂΩì‰∫éÂØπÂõæÁâáÂÜÖÂÆπÁöÑËß£Èáä„ÄÇÂõæÁâátitleÊòØÂõæÁâáÁöÑÊ†áÈ¢òÔºåÂΩìÈº†Ê†áÁßªÂà∞ÂõæÁâá‰∏äÊó∂ÊòæÁ§∫ÁöÑÂÜÖÂÆπ„ÄÇtitleÂèØÂä†ÂèØ‰∏çÂä† Á§∫‰æãÔºö 1![‰∏ÄËÑ∏ÊáµÈÄº](https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1558179968948&amp;di=1c8a7432843fdaafb91e9cbffacd1557&amp;imgtype=0&amp;src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201608%2F02%2F20160802213915_x23St.thumb.700_0.jpeg "‰∏ÄËÑ∏ÊáµÈÄº") ÊïàÊûúÂ¶Ç‰∏ãÔºö Ë∂ÖÈìæÊé• ËØ≠Ê≥ïÔºö 12[Ë∂ÖÈìæÊé•Âêç](Ë∂ÖÈìæÊé•Âú∞ÂùÄ "Ë∂ÖÈìæÊé•title")titleÂèØÂä†ÂèØ‰∏çÂä† Á§∫‰æãÔºö 12[ÁÆÄ‰π¶](http://jianshu.com)[ÁôæÂ∫¶](http://baidu.com) ÊïàÊûúÂ¶Ç‰∏ãÔºö ÁÆÄ‰π¶ ÁôæÂ∫¶ Ê≥®ÔºöMarkdownÊú¨Ë∫´ËØ≠Ê≥ï‰∏çÊîØÊåÅÈìæÊé•Âú®Êñ∞È°µÈù¢‰∏≠ÊâìÂºÄÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÂú®Êñ∞È°µÈù¢‰∏≠ÊâìÂºÄÁöÑËØùÂèØ‰ª•Áî®htmlËØ≠Ë®ÄÁöÑaÊ†áÁ≠æ‰ª£Êõø„ÄÇ 1234&lt;a href="Ë∂ÖÈìæÊé•Âú∞ÂùÄ" target="_blank"&gt;Ë∂ÖÈìæÊé•Âêç&lt;/a&gt;Á§∫‰æã&lt;a href="https://www.jianshu.com/u/1f5ac0cf6a8b" target="_blank"&gt;ÁÆÄ‰π¶&lt;/a&gt; Á¥¢ÂºïË∂ÖÈìæÊé• Á§∫‰æãÔºö 12[ÁôæÂ∫¶][1][1]:http://www.baidu.com ÊïàÊûúÂ¶Ç‰∏ãÔºö [ÁôæÂ∫¶][1] [1]:http://www.baidu.com Ëá™Âä®ÈìæÊé• ËØ≠Ê≥ïÔºö‰ΩøÁî®Â∞ñÊã¨Âè∑„ÄÇ Á§∫‰æãÔºö 12&lt;http://www.baidu.com&gt;&lt;1111111@qq.com&gt; ÊïàÊûúÂ¶Ç‰∏ãÔºö http://www.baidu.com 1111111@qq.com ÂàóË°® Êó†Â∫èÂàóË°® ËØ≠Ê≥ïÔºö Êó†Â∫èÂàóË°®Áî® - + * ‰ªª‰Ωï‰∏ÄÁßçÈÉΩÂèØ‰ª•„ÄÇ 12345- ÂàóË°®ÂÜÖÂÆπ+ ÂàóË°®ÂÜÖÂÆπ* ÂàóË°®ÂÜÖÂÆπÊ≥®ÊÑèÔºö- + * Ë∑üÂÜÖÂÆπ‰πãÈó¥ÈÉΩË¶ÅÊúâ‰∏Ä‰∏™Á©∫Ê†º ÊïàÊûúÂ¶Ç‰∏ãÔºö ÂàóË°®ÂÜÖÂÆπ ÂàóË°®ÂÜÖÂÆπ ÂàóË°®ÂÜÖÂÆπ ÊúâÂ∫èÂàóË°® ËØ≠Ê≥ïÔºö Êï∞Â≠óÂä†ÁÇπ„ÄÇ 123451. ÂàóË°®ÂÜÖÂÆπ2. ÂàóË°®ÂÜÖÂÆπ3. ÂàóË°®ÂÜÖÂÆπÊ≥®ÊÑèÔºöÂ∫èÂè∑Ë∑üÂÜÖÂÆπ‰πãÈó¥Ë¶ÅÊúâÁ©∫Ê†º ÊïàÊûúÂ¶Ç‰∏ãÔºö ÂàóË°®ÂÜÖÂÆπ ÂàóË°®ÂÜÖÂÆπ ÂàóË°®ÂÜÖÂÆπ ÂµåÂ•óÂàóË°® ËØ≠Ê≥ïÔºö ‰∏ä‰∏ÄÁ∫ßÂíå‰∏ã‰∏ÄÁ∫ß‰πãÈó¥Êï≤‰∏â‰∏™Á©∫Ê†ºÂç≥ÂèØ ‰∏ÄÁ∫ßÊó†Â∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊó†Â∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊó†Â∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊó†Â∫èÂàóË°®ÂÜÖÂÆπ ‰∏ÄÁ∫ßÊó†Â∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊúâÂ∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊúâÂ∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊúâÂ∫èÂàóË°®ÂÜÖÂÆπ ‰∏ÄÁ∫ßÊúâÂ∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊó†Â∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊó†Â∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊó†Â∫èÂàóË°®ÂÜÖÂÆπ ‰∏ÄÁ∫ßÊúâÂ∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊúâÂ∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊúâÂ∫èÂàóË°®ÂÜÖÂÆπ ‰∫åÁ∫ßÊúâÂ∫èÂàóË°®ÂÜÖÂÆπ Ê≥®ÊÑèÔºöÂú®‰ΩøÁî®ÂàóË°®Êó∂ÔºåÂè™Ë¶ÅÊòØÊï∞Â≠óÂêéÈù¢Âä†‰∏äËã±ÊñáÁöÑÁÇπÔºåÂ∞±‰ºöÊó†ÊÑèÈó¥‰∫ßÁîüÂàóË°®ÔºåÊØîÂ¶Ç2019.5.18 ËøôÊó∂ÂÄôÊÉ≥Ë°®ËææÁöÑÊòØÊó•ÊúüÔºåÊúâ‰∫õËΩØ‰ª∂ÊääÂÆÉË¢´ËØØËÆ§‰∏∫ÊòØÂàóË°®„ÄÇËß£ÂÜ≥ÊñπÂºèÔºöÂú®ÊØè‰∏™ÁÇπÂâçÈù¢Âä†‰∏ä\Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÂ¶ÇÊâÄÁ§∫Ôºö Á§∫‰æãÔºö 12019\.5\.18 ÊïàÊûúÂ¶Ç‰∏ãÔºö 2019.5.18 Ë°®Ê†º MarkdownË°®Ê†º ËØ≠Ê≥ïÔºö 1234567891011|Ë°®Â§¥|Ë°®Â§¥|Ë°®Â§¥||---|:---:|---:||ÂÜÖÂÆπ|ÂÜÖÂÆπ|ÂÜÖÂÆπ||ÂÜÖÂÆπ|ÂÜÖÂÆπ|ÂÜÖÂÆπ|Á¨¨‰∫åË°åÂàÜÂâ≤Ë°®Â§¥ÂíåÂÜÖÂÆπ„ÄÇ- Êúâ‰∏Ä‰∏™Â∞±Ë°åÔºå‰∏∫‰∫ÜÂØπÈΩêÔºåÂ§öÂä†‰∫ÜÂá†‰∏™ÊñáÂ≠óÈªòËÆ§Â±ÖÂ∑¶-‰∏§ËæπÂä†ÔºöË°®Á§∫ÊñáÂ≠óÂ±Ö‰∏≠-Âè≥ËæπÂä†ÔºöË°®Á§∫ÊñáÂ≠óÂ±ÖÂè≥Ê≥®ÔºöÂéüÁîüÁöÑËØ≠Ê≥ï‰∏§ËæπÈÉΩË¶ÅÁî® | ÂåÖËµ∑Êù•„ÄÇÊ≠§Â§ÑÁúÅÁï• Á§∫‰æã1Ôºö 12345| Ê≥ïÂè∑ | Êú¨È¢Ü | ÊéíË°å || :--------: | :-----: | :----: || ÊÇüÁ©∫ | 72Âèò | Â§ßÂ∏àÂÖÑ|| ÊÇüËÉΩ | 36Âèò | ‰∫åÂ∏àÂì•|| ÊÇüÂáÄ | 18Âèò | ‰∏âÂ∏àÂºü| ÊïàÊûúÂ¶Ç‰∏ãÔºö Ê≥ïÂè∑ Êú¨È¢Ü ÊéíË°å ÊÇüÁ©∫ 72Âèò Â§ßÂ∏àÂÖÑ ÊÇüËÉΩ 36Âèò ‰∫åÂ∏àÂì• ÊÇüÂáÄ 18Âèò ‰∏âÂ∏àÂºü Á§∫‰æã2Ôºö 1234567891011121314151617181920212223242526272829Ë°®Â§¥1 | Ë°®Â§¥2------------- | -------------Content Cell | Content CellContent Cell | Content Cell| Ë°®Â§¥1 | Ë°®Â§¥2|| ------------- | ------------- || Content Cell | Content Cell || Content Cell | Content Cell || ÂêçÂ≠ó | ÊèèËø∞ || ------------- | ----------- || Help | Display the help window.|| Close | Closes a window |Ë°®Ê†º‰∏≠‰πüÂèØ‰ª•‰ΩøÁî®ÊôÆÈÄöÊñáÊú¨ÁöÑÂà†Èô§Á∫øÔºåÊñú‰ΩìÁ≠âÊïàÊûú| ÂêçÂ≠ó | ÊèèËø∞ || ------------- | ----------- || Help | ~~Display the~~ help window.|| Close | _Closes_ a window |Ë°®Ê†ºÂèØ‰ª•ÊåáÂÆöÂØπÈΩêÊñπÂºè| Â∑¶ÂØπÈΩê | Â±Ö‰∏≠ | Âè≥ÂØπÈΩê || :------------ |:---------------:| -----:|| col 3 is | some wordy text | $1600 || col 2 is | centered | $12 || zebra stripes | are neat | $1 | ÊïàÊûúÂ¶Ç‰∏ãÔºö Ë°®Â§¥1 Ë°®Â§¥2 Content Cell Content Cell Content Cell Content Cell Ë°®Â§¥1 Ë°®Â§¥2 Content Cell Content Cell Content Cell Content Cell ÂêçÂ≠ó ÊèèËø∞ Help Display the help window. Close Closes a window ÂêçÂ≠ó ÊèèËø∞ Help Display the help window. Close Closes a window Â∑¶ÂØπÈΩê Â±Ö‰∏≠ Âè≥ÂØπÈΩê col 3 is some wordy text $1600 col 2 is centered $12 zebra stripes are neat $1 HTMLË°®Ê†º ËØ≠Ê≥ïÔºö 1234567891011121314151617181920&lt;table&gt; &lt;tr&gt; &lt;th&gt;È°πÁõÆ1&lt;/th&gt; &lt;th&gt;È°πÁõÆ2&lt;/th&gt; &lt;th&gt;È°πÁõÆ3&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;a1&lt;/td&gt; &lt;td colspan="2"&gt;a2&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td rowspan="2"&gt;b1&lt;/td&gt; &lt;td&gt;b2&lt;/td&gt; &lt;td&gt;b3&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;c2&lt;/td&gt; &lt;td&gt;c3&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; ÊïàÊûúÔºö È°πÁõÆ1 È°πÁõÆ2 È°πÁõÆ3 a1 a2 b1 b2 b3 c2 c3 ÈúÄË¶ÅÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÊòØÔºåÂú®markdown‰∏≠‰ΩøÁî®html‰ª£Á†ÅÊù•ÂÆûÁé∞Ë°®Ê†ºÁöÑÊïàÊûúÔºåÈúÄË¶ÅÂú®Ë°®Ê†ºÁöÑÂ§ñÈù¢Â•ó‰∏äÔºö 1&lt;escape&gt;&lt;/escape&gt; ÔºàËΩ¨‰πâÔºâÔºåÈò≤Ê≠¢markdownÁõ¥Êé•Â∞Ü‰ª£Á†Å‰∏≠ÁöÑË°åËøõË°åËΩ¨‰πâÊàêÂõûËΩ¶Ôºå‰∏çÁÑ∂‰ºöÂá∫Áé∞Ë°®Ê†ºÂâçÁ©∫‰∫Ü‰∏ÄÂ§ßÂùóÁ©∫ÁôΩ„ÄÇ ‰ΩÜÂêåÊó∂ÔºåÂºïÂÖ•html‰ºö‰ΩøÂæómarkdownÁöÑÊòìËØªÊòìÂÜôÁöÑÁâπÊÄßÈôç‰Ωé„ÄÇÈô§ÈùûÂøÖË¶ÅÔºåËøòÊòØÊé®Ëçê‰ΩøÁî®markdownÊú¨Ë∫´ÁöÑË°®Ê†ºËØ≠Ê≥ï„ÄÇ ÈÇ£‰πàÔºåÊàë‰ª¨Â¶Ç‰ΩïÂú®‰ΩøÁî®htmlË°®Ê†ºÁöÑÊó∂ÂÄôÔºåÂÅ∑Êáí‰∏çÁî®ÊâìËøôÊÆµË°®Ê†ºÂë¢Ôºü http://www.tablesgenerator.com/ ÂÆâÂà©Ëøô‰∏™ÁΩëÁ´ôÔºåÂÆÉÂèØ‰ª•ÂÆûÁé∞‰Ω†ÁöÑÈúÄÊ±ÇÔºåÂåÖÊã¨ÂêàÂπ∂ÂçïÂÖÉÊ†ºÁ≠â„ÄÇ ‰ª£Á†Å ÂçïË°å‰ª£Á†Å ËØ≠Ê≥ïÔºö ‰ª£Á†Å‰πãÈó¥ÂàÜÂà´Áî®‰∏Ä‰∏™ÂèçÂºïÂè∑ÂåÖËµ∑Êù•„ÄÇ 1`‰ª£Á†ÅÂÜÖÂÆπ` Á§∫‰æãÔºö 1`create database hero;` ÊïàÊûúÂ¶Ç‰∏ãÔºö create database hero; ‰ª£Á†ÅÂùó ËØ≠Ê≥ïÔºö ‰ª£Á†Å‰πãÈó¥ÂàÜÂà´Áî®‰∏â‰∏™ÂèçÂºïÂè∑ÂåÖËµ∑Êù•Ôºå‰∏î‰∏§ËæπÁöÑÂèçÂºïÂè∑ÂçïÁã¨Âç†‰∏ÄË°å„ÄÇ 12345(```) ‰ª£Á†Å... ‰ª£Á†Å... ‰ª£Á†Å...(```) Ê≥®Ôºö‰∏∫‰∫ÜÈò≤Ê≠¢ËΩ¨ËØëÔºåÂâçÂêé‰∏â‰∏™ÂèçÂºïÂè∑Â§ÑÂä†‰∫ÜÂ∞èÊã¨Âè∑ÔºåÂÆûÈôÖÊòØÊ≤°ÊúâÁöÑ„ÄÇËøôÈáåÂè™ÊòØÁî®Êù•ÊºîÁ§∫ÔºåÂÆûÈôÖ‰∏≠ÂéªÊéâ‰∏§ËæπÂ∞èÊã¨Âè∑Âç≥ÂèØ„ÄÇ Á§∫‰æãÔºö 123456(```) function fun()&#123; echo "ËøôÊòØ‰∏ÄÂè•ÈùûÂ∏∏ÁâõÈÄºÁöÑ‰ª£Á†Å"; &#125; fun();(```) ÊïàÊûúÂ¶Ç‰∏ãÔºö 1234function fun()&#123; echo "ËøôÊòØ‰∏ÄÂè•ÈùûÂ∏∏ÁâõÈÄºÁöÑ‰ª£Á†Å";&#125;fun(); Ê≥®Èáä ËØ≠Ê≥ïÔºöÁî®htmlÁöÑÊ≥®Èáä 1&lt;!-- Áî®htmlÁöÑÊ≥®Èáä --&gt; ËΩ¨‰πâÂ≠óÁ¨¶ Markdown‰∏≠ÁöÑËΩ¨‰πâÂ≠óÁ¨¶‰∏∫\ÔºåËΩ¨‰πâÁöÑÊúâÔºö 123456789101112\\ ÂèçÊñúÊù†\` ÂèçÂºïÂè∑\* ÊòüÂè∑\_ ‰∏ãÂàíÁ∫ø\&#123;\&#125; Â§ßÊã¨Âè∑\[\] ‰∏≠Êã¨Âè∑\(\) Â∞èÊã¨Âè∑\# ‰∫ïÂè∑\+ Âä†Âè∑\- ÂáèÂè∑\. Ëã±ÊñáÂè•Âè∑\! ÊÑüÂèπÂè∑ ÊïàÊûúÂ¶Ç‰∏ãÔºö \ ÂèçÊñúÊù† ` ÂèçÂºïÂè∑ * ÊòüÂè∑ _ ‰∏ãÂàíÁ∫ø {} Â§ßÊã¨Âè∑ [] ‰∏≠Êã¨Âè∑ () Â∞èÊã¨Âè∑ # ‰∫ïÂè∑ + Âä†Âè∑ - ÂáèÂè∑ . Ëã±ÊñáÂè•Âè∑ ! ÊÑüÂèπÂè∑ ÂÖ∂‰ªñÁâπÊÆäÂ≠óÁ¨¶ Á§∫‰æãÔºö 1234567891011&amp;#10084&amp;#10003&amp;#9728&amp;#9733&amp;#9730&amp;#9775&amp;#9762&amp;#9742&amp;#8734&amp;#10052&amp;#9835 ÊïàÊûúÂ¶Ç‰∏ãÔºö &amp;#10084 &amp;#10003 &amp;#9728 &amp;#9733 &amp;#9730 &amp;#9775 &amp;#9762 &amp;#9742 &amp;#8734 &amp;#10052 &amp;#9835 ÊÉ≥Áü•ÈÅìÂ≠óÁ¨¶ÂØπÂ∫îÁöÑUnicodeÁ†ÅÔºåÂèØ‰ª•ÁúãËøô‰∏™ÁΩëÁ´ôÔºöhttps://unicode-table.com/cn/ ÊµÅÁ®ãÂõæ ÊïàÊûúÂ¶Ç‰∏ãÔºö &lt;div id=&quot;flowchart-0&quot; class=&quot;flow-chart&quot;&gt;&lt;/div&gt; ÊÆµËêΩ‰∏éÊç¢Ë°å Markdown‰∏≠ÊÆµËêΩÊåáËøûÁª≠ÁöÑ‰∏ÄÊÆµÊñáÂ≠óÔºåÁºñÂÜôÊó∂ÊÆµËêΩ‰πãÈó¥Ëá≥Â∞ë‰∏Ä‰∏™Á©∫Ë°åÈöîÂºÄÔºåÊÆµËêΩÂÜÖÂ§ö‰∏™Á©∫Ê†ºË¢´ËßÜ‰∏∫‰∏Ä‰∏™Á©∫Ê†ºÔºåÊÆµÈ¶ñ‰∏çÊîØÊåÅÁº©Ëøõ„ÄÇ Â¶Ç‰ΩïÊÉ≥Ë¶ÅÂú®ÊòæÁ§∫Êó∂ÊòæÁ§∫Â§ö‰∏™Á©∫Ë°åÔºåÂèØ‰ª•ÊèíÂÖ•ÂÆûÁé∞ÔºåÊ≥®ÊÑèÁöÑÊòØÔºåÊèíÂÖ•ÁöÑÂ∫î‰∏éÂâçÂêéÁöÑÊÆµËêΩ‰∏≠Èó¥Ëá≥Â∞ëÁ©∫‰∏ÄË°å„ÄÇ ÊÆµËêΩÁº©ËøõÔºàÁ©∫Ê†ºÔºâ Á§∫‰æãÔºö 1234ÂçäÊñπÂ§ßÁöÑÁ©∫ÁôΩ&amp;ensp;Êàñ&amp;#8194;ÁúãÔºåÈ£ûÁ¢üÂÖ®ÊñπÂ§ßÁöÑÁ©∫ÁôΩ&amp;emsp;Êàñ&amp;#8195;ÁúãÔºåÈ£ûÁ¢ü‰∏çÊñ≠Ë°åÁöÑÁ©∫ÁôΩÊ†º&amp;nbsp;Êàñ&amp;#160;ÁúãÔºåÈ£ûÁ¢ü&amp;emsp;&amp;emsp;ÊÆµËêΩ‰ªéÊ≠§ÂºÄÂßã„ÄÇ ÊïàÊûúÂ¶Ç‰∏ãÔºö ÂçäÊñπÂ§ßÁöÑÁ©∫ÁôΩ Êàñ ÁúãÔºåÈ£ûÁ¢ü ÂÖ®ÊñπÂ§ßÁöÑÁ©∫ÁôΩ Êàñ ÁúãÔºåÈ£ûÁ¢ü ‰∏çÊñ≠Ë°åÁöÑÁ©∫ÁôΩÊ†º Êàñ ÁúãÔºåÈ£ûÁ¢ü ÊÆµËêΩ‰ªéÊ≠§ÂºÄÂßã„ÄÇ Â≠ó‰Ωì„ÄÅÂ≠óÂè∑„ÄÅÈ¢úËâ≤„ÄÅËÉåÊôØËâ≤ Á§∫‰æãÔºö 1234567&lt;font face=&quot;Èªë‰Ωì&quot;&gt;ÊàëÊòØÈªë‰ΩìÂ≠ó&lt;/font&gt;&lt;font face=&quot;ÂæÆËΩØÈõÖÈªë&quot;&gt;ÊàëÊòØÂæÆËΩØÈõÖÈªë&lt;/font&gt;&lt;font face=&quot;STCAIYUN&quot;&gt;ÊàëÊòØÂçéÊñáÂΩ©‰∫ë&lt;/font&gt;&lt;font color=#0099ff size=12 face=&quot;Èªë‰Ωì&quot;&gt;Èªë‰Ωì&lt;/font&gt;&lt;font color=#00ffff size=3&gt;null&lt;/font&gt;&lt;font color=gray size=5&gt;gray&lt;/font&gt;&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#FF4500&gt;ËøôÈáåÁöÑËÉåÊôØËâ≤ÊòØÔºöOrangeRedÔºå ÂçÅÂÖ≠ËøõÂà∂È¢úËâ≤ÂÄºÔºö#FF4500Ôºå rgb(255, 69, 0)&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; ÊïàÊûúÂ¶Ç‰∏ãÔºö &lt;font face=&quot;Èªë‰Ωì&quot;&gt;ÊàëÊòØÈªë‰ΩìÂ≠ó&lt;/font&gt; &lt;font face=&quot;ÂæÆËΩØÈõÖÈªë&quot;&gt;ÊàëÊòØÂæÆËΩØÈõÖÈªë&lt;/font&gt; &lt;font face=&quot;STCAIYUN&quot;&gt;ÊàëÊòØÂçéÊñáÂΩ©‰∫ë&lt;/font&gt; &lt;font color=#0099ff size=12 face=&quot;Èªë‰Ωì&quot;&gt;Èªë‰Ωì&lt;/font&gt; &lt;font color=#00ffff size=3&gt;null&lt;/font&gt; &lt;font color=gray size=5&gt;gray&lt;/font&gt; &lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#FF4500&gt;ËøôÈáåÁöÑËÉåÊôØËâ≤ÊòØÔºöOrangeRedÔºå ÂçÅÂÖ≠ËøõÂà∂È¢úËâ≤ÂÄºÔºö#FF4500Ôºå rgb(255, 69, 0)&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; Âø´Êç∑ÈîÆ ÂäüËÉΩ Âø´Êç∑ÈîÆ Âä†Á≤ó Ctrl + B Êñú‰Ωì Ctrl + I ÂºïÁî® Ctrl + Q ÊèíÂÖ•ÈìæÊé• Ctrl + L ÊèíÂÖ•‰ª£Á†Å Ctrl + K ÊèíÂÖ•ÂõæÁâá Ctrl + G ÊèêÂçáÊ†áÈ¢ò Ctrl + H ÊúâÂ∫èÂàóË°® Ctrl + O Êó†Â∫èÂàóË°® Ctrl + U Ê®™Á∫ø Ctrl + R Êí§ÈîÄ Ctrl + Z ÈáçÂÅö Ctrl + Y GitHubÁâπÊúâÁâπÊÄß Â§çÈÄâÊ°ÜÂàóË°® Âú®ÂàóË°®Á¨¶Âè∑ÂêéÈù¢Âä†‰∏ä[]ÊàñËÄÖ[x]‰ª£Ë°®ÈÄâ‰∏≠ÊàñËÄÖÊú™ÈÄâ‰∏≠ÊÉÖÂÜµ„ÄÇ Á§∫‰æãÔºö 1234567+ [x] C+ [x] C+++ [x] Java+ [x] Qt+ [x] Android+ [ ] C#+ [ ] .NET ÊïàÊûúÂ¶Ç‰∏ãÔºö [x] C [x] C++ [x] Java [x] Qt [x] Android [ ] C# [ ] .NET emojiË°®ÊÉÖÁ¨¶Âè∑ emojiË°®ÊÉÖ‰ΩøÁî®:EMOJICODE:ÁöÑÊ†ºÂºèÔºåËØ¶ÁªÜÂàóË°®ÂèØËßÅÔºö https://www.webpagefx.com/tools/emoji-cheat-sheet/ ÂΩìÁÑ∂Áé∞Âú®ÂæàÂ§ömarkdownÂ∑•ÂÖ∑ÊàñËÄÖÁΩëÁ´ôÈÉΩ‰∏çÊîØÊåÅ„ÄÇ ‰∏ãÈù¢ÂàóÂá∫Âá†‰∏™Âπ≥Âè∞ÁöÑÂØπÊØîÔºö Â∑•ÂÖ∑/ÁΩëÁ´ô emoji ÁÆÄ‰π¶ Âê¶ github ÊòØ ÊúâÈÅì‰∫ëÁ¨îËÆ∞ Âê¶ &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js&quot;&gt;&lt;/script&gt;st=>start: ÂºÄÂßã op=>operation: My Operation cond=>condition: Yes or No? e=>end st->op->cond cond(yes)->e cond(no)->op{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-0-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-0", options);]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MarkdownPadÂèëÁîüHTMLÊ∏≤ÊüìÁªÑ‰ª∂Âá∫Èîô]]></title>
    <url>%2Fposts%2Fe13690e.html</url>
    <content type="text"><![CDATA[Âú®ÂÆâË£ÖÁ†¥Ëß£MarkdownPad‰πãÂêéÔºåÊñ∞Âª∫‰∏Ä‰∏™ÊñáÊ°£ÂáÜÂ§áÁªÉ‰π†‰∏ãMarkdownPadÁöÑ‰ΩøÁî®ÔºåÁªìÊûúÔºåÂæà‰∏çÂπ∏Âú∞Âá∫Áé∞‰∫Ü‰∏ãÈù¢ÁöÑÈîôËØØÔºö Ê†πÊçÆÂÆÉÁöÑÊèêÁ§∫Ë∑≥ËΩ¨Âà∞ÂÆòÁΩë‰∏äÊü•Áúã‰∫Ü‰∏ÄÁï™ÔºåË°®Á§∫ÂæàÊáµÈÄº.... ÊúÄÁªàËøòÊòØÂÄüÂä©Âº∫Â§ßÁöÑÁôæÂ∫¶ÊêúÂà∞ÂÖ∂‰ªñÂ∞è‰ºô‰º¥‰πüÈÅáÂà∞ËøáËøô‰∏™ÈóÆÈ¢òÔºåÁé∞Â∞ÜËß£ÂÜ≥ÊñπÊ°àÊÄªÁªìÂ¶Ç‰∏ã„ÄÇ ‰∏ãËΩΩËøô‰∏™‰∏ú‰∏úÔºö Awesomium 1.6.6 SDK ‰∏ãËΩΩÂÆåÊàêÂêéÂèåÂáªexeÂÆâË£ÖÊñá‰ª∂ÂºÄÂßãÂÆâË£ÖÔºåÁÇπÂáªNextÔºö ÂãæÈÄâ**‚ÄúI accept the terms in the License Agreement‚ÄùÔºåÁÇπÂáªNext** ÂãæÈÄâ**&quot;Yes,remove the older version.&quot;ÔºåÁÇπÂáªNext** ÂÆâË£ÖË∑ØÂæÑÂèØ‰ª•‰ΩøÁî®ÈªòËÆ§ÁöÑÂÆâË£ÖË∑ØÂæÑÔºå‰πüÂèØ‰ª•Êõ¥ÊîπÂÆâË£ÖË∑ØÂæÑÔºåÁÑ∂ÂêéÈÄâÊã©TypicalÊ†áÂáÜÂ•óÈ§ê ÁÇπÂáªInstallÂºÄÂßãÂÆâË£Ö ÂÆâË£ÖÂÆåÊàêFinsh ÁÑ∂ÂêéÈáçÂêØMarkdownPadÔºåÈóÆÈ¢òËß£ÂÜ≥„ÄÇ]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MarkdownPadÊ≠£ÁâàÁ†¥Ëß£‰∏éÊ±âÂåñ]]></title>
    <url>%2Fposts%2F19a65e9.html</url>
    <content type="text"><![CDATA[‰∏ãËΩΩ ÂÖàÂéªÂÆòÁΩëÔºöhttp://markdownpad.com/ ‰∏ãËΩΩMarkdownPadÔºåÂ¶Ç‰∏ãÂõæÔºö ÂÆâË£Ö ÂÆâË£ÖËøáÁ®ãÂæàÁÆÄÂçïÔºå‰∏ÄË∑ØNexT‰∏ãÂéªÔºåÂèØ‰ΩøÁî®ÈªòËÆ§ÁöÑÂÆâË£ÖÁõÆÂΩïÔºå‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÂÆâË£ÖÁõÆÂΩïÔºåËøôÈáå‰∏çÂÅöÊà™ÂõæÂ±ïÁ§∫„ÄÇ Ê±âÂåñ ÂÆâË£ÖÂÆåÊàêÂêéÔºåÂêØÂä®MarkdownPadÔºåÂú®Â∑•ÂÖ∑Ê†è‰∏äÈù¢ÁÇπÂáªTools-OptionsÔºåÂ¶Ç‰∏ãÂõæÔºö Âú®ÊâìÂºÄÁöÑÈ°µÈù¢‰∏ãÊñπÊúâ‰∏™languagesÁöÑÈÄâÈ°πÔºåÁÇπÂáªEnglishÁöÑÈÄâÈ°πÂç°ÂºπÂá∫ÈÄâÊã©Á™óÔºåÈÄâ‰∏≠ÊñáÔºåÁÇπÂáªsave and closeÊåâÈíÆÂêéÂ∞±ÂèØ‰ª•ÁúãÂà∞‰∏≠ÊñáÊïàÊûúÔºåÂπ∂ÂºπÁ™ó**&quot;ÈúÄË¶ÅÈáçÊñ∞ÂêØÂä® MarkdownPad&quot;**ÁöÑÊèêÁ§∫„ÄÇÂ¶Ç‰∏ãÂõæÔºö Á†¥Ëß£ Ê≥®ÂÜåÁ†Å 1GBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5CCx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ== ÈÇÆÁÆ±Âú∞ÂùÄ Soar360@live.com ‰ΩøÁî®ÊñπÂºè ÁÇπÂáªÂ∏ÆÂä©-‰∏ì‰∏öÁâàÊøÄÊ¥ªÂú®ÂºπÂá∫ÁöÑÂ∞èÁ™óÂè£ËæìÂÖ•ÈÇÆÁÆ±Soar360@live.com ÊéàÊùÉÂØÜÈí•Á≤òË¥¥‰∏äÈù¢ÁöÑÊ≥®ÂÜåÁ†Å.ÁÇπÂáªÁ°ÆÂÆöÂ∞±ÊøÄÊ¥ª„ÄÇ Áé∞Âú®ÊòØ2019Âπ¥5Êúà18Êó•ÔºåÁõÆÂâç‰æùÁÑ∂ÊúâÊïà„ÄÇ]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
</search>
